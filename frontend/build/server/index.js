import { jsx, jsxs, Fragment } from "react/jsx-runtime";
import { PassThrough } from "node:stream";
import { createReadableStreamFromReadable } from "@react-router/node";
import { ServerRouter, useMatches, useActionData, useLoaderData, useParams, useRouteError, useNavigate, Links, ScrollRestoration, Scripts, Outlet, isRouteErrorResponse, Link, NavLink, useLocation, Navigate } from "react-router";
import { isbot } from "isbot";
import { renderToPipeableStream } from "react-dom/server";
import * as React from "react";
import { createElement as createElement$1, createContext, useState, useEffect, useContext } from "react";
import axios from "axios";
import { clsx } from "clsx";
import { twMerge } from "tailwind-merge";
import dayjs from "dayjs";
import * as ReactDOM from "react-dom";
import { useParams as useParams$1, useNavigate as useNavigate$1, Navigate as Navigate$1, Outlet as Outlet$1 } from "react-router-dom";
const streamTimeout = 5e3;
function handleRequest(request, responseStatusCode, responseHeaders, routerContext, loadContext) {
  return new Promise((resolve, reject) => {
    let shellRendered = false;
    let userAgent = request.headers.get("user-agent");
    let readyOption = userAgent && isbot(userAgent) || routerContext.isSpaMode ? "onAllReady" : "onShellReady";
    const { pipe, abort } = renderToPipeableStream(
      /* @__PURE__ */ jsx(ServerRouter, { context: routerContext, url: request.url }),
      {
        [readyOption]() {
          shellRendered = true;
          const body = new PassThrough();
          const stream = createReadableStreamFromReadable(body);
          responseHeaders.set("Content-Type", "text/html");
          resolve(
            new Response(stream, {
              headers: responseHeaders,
              status: responseStatusCode
            })
          );
          pipe(body);
        },
        onShellError(error) {
          reject(error);
        },
        onError(error) {
          responseStatusCode = 500;
          if (shellRendered) {
            console.error(error);
          }
        }
      }
    );
    setTimeout(abort, streamTimeout + 1e3);
  });
}
const entryServer = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: handleRequest,
  streamTimeout
}, Symbol.toStringTag, { value: "Module" }));
function withComponentProps(Component2) {
  return function Wrapped() {
    const props = {
      params: useParams(),
      loaderData: useLoaderData(),
      actionData: useActionData(),
      matches: useMatches()
    };
    return createElement$1(Component2, props);
  };
}
function withErrorBoundaryProps(ErrorBoundary3) {
  return function Wrapped() {
    const props = {
      params: useParams(),
      loaderData: useLoaderData(),
      actionData: useActionData(),
      error: useRouteError()
    };
    return createElement$1(ErrorBoundary3, props);
  };
}
var uid$1 = 0;
var isBlazorPlatform = false;
function createInstance(classFunction, params) {
  var arrayParam = params;
  arrayParam.unshift(void 0);
  return new (Function.prototype.bind.apply(classFunction, arrayParam))();
}
function setImmediate(handler) {
  var unbind;
  var num = new Uint16Array(5);
  var intCrypto = window.msCrypto || window.crypto;
  intCrypto.getRandomValues(num);
  var secret = "ej2" + combineArray(num);
  var messageHandler = function(event) {
    if (event.source === window && typeof event.data === "string" && event.data.length <= 32 && event.data === secret) {
      handler();
      unbind();
    }
  };
  window.addEventListener("message", messageHandler, false);
  window.postMessage(secret, "*");
  return unbind = function() {
    window.removeEventListener("message", messageHandler);
    handler = messageHandler = secret = void 0;
  };
}
function getValue(nameSpace, obj) {
  var value = obj;
  var splits = nameSpace.replace(/\[/g, ".").replace(/\]/g, "").split(".");
  for (var i = 0; i < splits.length && !isUndefined(value); i++) {
    value = value[splits[parseInt(i.toString(), 10)]];
  }
  return value;
}
function setValue(nameSpace, value, obj) {
  var keys2 = nameSpace.replace(/\[/g, ".").replace(/\]/g, "").split(".");
  var start = obj || {};
  var fromObj = start;
  var i;
  var length = keys2.length;
  var key;
  for (i = 0; i < length; i++) {
    key = keys2[parseInt(i.toString(), 10)];
    if (key === "__proto__" || key === "constructor" || key === "prototype") {
      continue;
    }
    if (i + 1 === length) {
      fromObj["" + key] = value === void 0 ? {} : value;
    } else if (isNullOrUndefined(fromObj["" + key])) {
      fromObj["" + key] = {};
    }
    fromObj = fromObj["" + key];
  }
  return start;
}
function deleteObject(obj, key) {
  delete obj["" + key];
}
var containerObject = typeof window !== "undefined" ? window : {};
function isObject(obj) {
  var objCon = {};
  return !isNullOrUndefined(obj) && obj.constructor === objCon.constructor;
}
function getEnumValue(enumObject, enumValue) {
  return enumObject["" + enumValue];
}
function merge(source, destination) {
  if (!isNullOrUndefined(destination)) {
    var temrObj = source;
    var tempProp = destination;
    var keys2 = Object.keys(destination);
    var deepmerge = "deepMerge";
    for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
      var key = keys_1[_i];
      if (!isNullOrUndefined(temrObj["" + deepmerge]) && temrObj["" + deepmerge].indexOf(key) !== -1 && (isObject(tempProp["" + key]) || Array.isArray(tempProp["" + key]))) {
        extend$1(temrObj["" + key], temrObj["" + key], tempProp["" + key], true);
      } else {
        temrObj["" + key] = tempProp["" + key];
      }
    }
  }
}
function extend$1(copied, first, second, deep) {
  var result = copied && typeof copied === "object" ? copied : {};
  var length = arguments.length;
  var args = [copied, first, second, deep];
  if (deep) {
    length = length - 1;
  }
  var _loop_1 = function(i2) {
    if (!args[parseInt(i2.toString(), 10)]) {
      return "continue";
    }
    var obj1 = args[parseInt(i2.toString(), 10)];
    Object.keys(obj1).forEach(function(key) {
      var src = result["" + key];
      var copy = obj1["" + key];
      var clone;
      Array.isArray(copy) && Array.isArray(src) && copy.length !== src.length;
      var blazorEventExtend = true;
      if (deep && blazorEventExtend && (isObject(copy) || Array.isArray(copy))) {
        if (isObject(copy)) {
          clone = src ? src : {};
          if (Array.isArray(clone) && Object.prototype.hasOwnProperty.call(clone, "isComplexArray")) {
            extend$1(clone, {}, copy, deep);
          } else {
            result["" + key] = extend$1(clone, {}, copy, deep);
          }
        } else {
          clone = src ? src : [];
          result["" + key] = extend$1([], clone, copy, clone && clone.length || copy && copy.length);
        }
      } else {
        result["" + key] = copy;
      }
    });
  };
  for (var i = 1; i < length; i++) {
    _loop_1(i);
  }
  return result;
}
function isNullOrUndefined(value) {
  return value === void 0 || value === null;
}
function isUndefined(value) {
  return "undefined" === typeof value;
}
function getUniqueID(definedName) {
  return definedName + "_" + uid$1++;
}
function debounce(eventFunction, delay2) {
  var out;
  return function() {
    var _this = this;
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      args[_i] = arguments[_i];
    }
    var later = function() {
      out = null;
      return eventFunction.apply(_this, args);
    };
    clearTimeout(out);
    out = setTimeout(later, delay2);
  };
}
function compareElementParent(child, parent) {
  var node = child;
  if (node === parent) {
    return true;
  } else if (node === document || !node) {
    return false;
  } else {
    return compareElementParent(node.parentNode, parent);
  }
}
function throwError(message) {
  try {
    throw new Error(message);
  } catch (e) {
    throw new Error(e.message + "\n" + e.stack);
  }
}
function print(element2, printWindow) {
  var div = document.createElement("div");
  var links2 = [].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style"));
  var blinks = [].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));
  if (blinks.length) {
    for (var l = 0, len = blinks.length; l < len; l++) {
      links2.push(blinks[parseInt(l.toString(), 10)]);
    }
  }
  var reference = "";
  if (isNullOrUndefined(printWindow)) {
    printWindow = window.open("", "print", "height=452,width=1024,tabbar=no");
  }
  div.appendChild(element2.cloneNode(true));
  for (var i = 0, len = links2.length; i < len; i++) {
    reference += links2[parseInt(i.toString(), 10)].outerHTML;
  }
  printWindow.document.write("<!DOCTYPE html> <html><head>" + reference + "</head><body>" + div.innerHTML + "<script> (function() { window.ready = true; })(); <\/script></body></html>");
  printWindow.document.close();
  printWindow.focus();
  var interval = setInterval(function() {
    if (printWindow.ready) {
      printWindow.print();
      printWindow.close();
      clearInterval(interval);
    }
  }, 500);
  return printWindow;
}
function formatUnit(value) {
  var result = value + "";
  if (result.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)) {
    return result;
  }
  return result + "px";
}
function isBlazor() {
  return isBlazorPlatform;
}
function uniqueID() {
  if (typeof window === "undefined") {
    return;
  }
  var num = new Uint16Array(5);
  var intCrypto = window.msCrypto || window.crypto;
  return intCrypto.getRandomValues(num);
}
function combineArray(num) {
  var ret = "";
  for (var i = 0; i < 5; i++) {
    ret += (i ? "," : "") + num[parseInt(i.toString(), 10)];
  }
  return ret;
}
var defaultNumberingSystem = {
  "latn": {
    "_digits": "0123456789",
    "_type": "numeric"
  }
};
var defaultNumberSymbols = {
  "decimal": ".",
  "group": ",",
  "percentSign": "%",
  "plusSign": "+",
  "minusSign": "-",
  "infinity": "∞",
  "nan": "NaN",
  "exponential": "E"
};
var latnNumberSystem = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
var ParserBase = (
  /** @class */
  function() {
    function ParserBase2() {
    }
    ParserBase2.getMainObject = function(obj, cName) {
      var value = "main." + cName;
      return getValue(value, obj);
    };
    ParserBase2.getNumberingSystem = function(obj) {
      return getValue("supplemental.numberingSystems", obj) || this.numberingSystems;
    };
    ParserBase2.reverseObject = function(prop, keys2) {
      var propKeys = keys2 || Object.keys(prop);
      var res = {};
      for (var _i = 0, propKeys_1 = propKeys; _i < propKeys_1.length; _i++) {
        var key = propKeys_1[_i];
        if (!Object.prototype.hasOwnProperty.call(res, prop["" + key])) {
          res[prop["" + key]] = key;
        }
      }
      return res;
    };
    ParserBase2.getSymbolRegex = function(props) {
      var regexStr = props.map(function(str) {
        return str.replace(/([.*+?^=!:${}()|[\]/\\])/g, "\\$1");
      }).join("|");
      var regExp2 = RegExp;
      return new regExp2(regexStr, "g");
    };
    ParserBase2.getSymbolMatch = function(prop) {
      var matchKeys = Object.keys(defaultNumberSymbols);
      var ret = {};
      for (var _i = 0, matchKeys_1 = matchKeys; _i < matchKeys_1.length; _i++) {
        var key = matchKeys_1[_i];
        ret[prop["" + key]] = defaultNumberSymbols["" + key];
      }
      return ret;
    };
    ParserBase2.constructRegex = function(val) {
      var len = val.length;
      var ret = "";
      for (var i = 0; i < len; i++) {
        if (i !== len - 1) {
          ret += val[parseInt(i.toString(), 10)] + "|";
        } else {
          ret += val[parseInt(i.toString(), 10)];
        }
      }
      return ret;
    };
    ParserBase2.convertValueParts = function(value, regex, obj) {
      return value.replace(regex, function(str) {
        return obj["" + str];
      });
    };
    ParserBase2.getDefaultNumberingSystem = function(obj) {
      var ret = {};
      ret.obj = getValue("numbers", obj);
      ret.nSystem = getValue("defaultNumberingSystem", ret.obj);
      return ret;
    };
    ParserBase2.getCurrentNumericOptions = function(curObj, numberSystem, needSymbols, blazorMode) {
      var ret = {};
      var cur = this.getDefaultNumberingSystem(curObj);
      if (!isUndefined(cur.nSystem) || blazorMode) {
        var digits = blazorMode ? getValue("obj.mapperDigits", cur) : getValue(cur.nSystem + "._digits", numberSystem);
        if (!isUndefined(digits)) {
          ret.numericPair = this.reverseObject(digits, latnNumberSystem);
          var regExp2 = RegExp;
          ret.numberParseRegex = new regExp2(this.constructRegex(digits), "g");
          ret.numericRegex = "[" + digits[0] + "-" + digits[9] + "]";
          if (needSymbols) {
            ret.numericRegex = digits[0] + "-" + digits[9];
            ret.symbolNumberSystem = getValue(blazorMode ? "numberSymbols" : "symbols-numberSystem-" + cur.nSystem, cur.obj);
            ret.symbolMatch = this.getSymbolMatch(ret.symbolNumberSystem);
            ret.numberSystem = cur.nSystem;
          }
        }
      }
      return ret;
    };
    ParserBase2.getNumberMapper = function(curObj, numberSystem, isNumber) {
      var ret = { mapper: {} };
      var cur = this.getDefaultNumberingSystem(curObj);
      if (!isUndefined(cur.nSystem)) {
        ret.numberSystem = cur.nSystem;
        ret.numberSymbols = getValue("symbols-numberSystem-" + cur.nSystem, cur.obj);
        ret.timeSeparator = getValue("timeSeparator", ret.numberSymbols);
        var digits = getValue(cur.nSystem + "._digits", numberSystem);
        if (!isUndefined(digits)) {
          for (var _i = 0, latnNumberSystem_1 = latnNumberSystem; _i < latnNumberSystem_1.length; _i++) {
            var i = latnNumberSystem_1[_i];
            ret.mapper[parseInt(i.toString(), 10)] = digits[parseInt(i.toString(), 10)];
          }
        }
      }
      return ret;
    };
    ParserBase2.nPair = "numericPair";
    ParserBase2.nRegex = "numericRegex";
    ParserBase2.numberingSystems = defaultNumberingSystem;
    return ParserBase2;
  }()
);
var blazorCurrencyData = {
  "DJF": "Fdj",
  "ERN": "Nfk",
  "ETB": "Br",
  "NAD": "$",
  "ZAR": "R",
  "XAF": "FCFA",
  "GHS": "GH₵",
  "XDR": "XDR",
  "AED": "د.إ.",
  "BHD": "د.ب.",
  "DZD": "د.ج.",
  "EGP": "ج.م.",
  "ILS": "₪",
  "IQD": "د.ع.",
  "JOD": "د.ا.",
  "KMF": "CF",
  "KWD": "د.ك.",
  "LBP": "ل.ل.",
  "LYD": "د.ل.",
  "MAD": "د.م.",
  "MRU": "أ.م.",
  "OMR": "ر.ع.",
  "QAR": "ر.ق.",
  "SAR": "ر.س.",
  "SDG": "ج.س.",
  "SOS": "S",
  "SSP": "£",
  "SYP": "ل.س.",
  "TND": "د.ت.",
  "YER": "ر.ي.",
  "CLP": "$",
  "INR": "₹",
  "TZS": "TSh",
  "EUR": "€",
  "AZN": "₼",
  "RUB": "₽",
  "BYN": "Br",
  "ZMW": "K",
  "BGN": "лв.",
  "NGN": "₦",
  "XOF": "CFA",
  "BDT": "৳",
  "CNY": "¥",
  "BAM": "КМ",
  "UGX": "USh",
  "USD": "$",
  "CZK": "Kč",
  "GBP": "£",
  "DKK": "kr.",
  "KES": "Ksh",
  "CHF": "CHF",
  "MVR": "ރ.",
  "BTN": "Nu.",
  "XCD": "EC$",
  "AUD": "$",
  "BBD": "$",
  "BIF": "FBu",
  "BMD": "$",
  "BSD": "$",
  "BWP": "P",
  "BZD": "$",
  "CAD": "$",
  "NZD": "$",
  "FJD": "$",
  "FKP": "£",
  "GIP": "£",
  "GMD": "D",
  "GYD": "$",
  "HKD": "$",
  "IDR": "Rp",
  "JMD": "$",
  "KYD": "$",
  "LRD": "$",
  "MGA": "Ar",
  "MOP": "MOP$",
  "MUR": "Rs",
  "MWK": "MK",
  "MYR": "RM",
  "PGK": "K",
  "PHP": "₱",
  "PKR": "Rs",
  "RWF": "RF",
  "SBD": "$",
  "SCR": "SR",
  "SEK": "kr",
  "SGD": "$",
  "SHP": "£",
  "SLL": "Le",
  "ANG": "NAf.",
  "SZL": "E",
  "TOP": "T$",
  "TTD": "$",
  "VUV": "VT",
  "WST": "WS$",
  "ARS": "$",
  "BOB": "Bs",
  "BRL": "R$",
  "COP": "$",
  "CRC": "₡",
  "CUP": "$",
  "DOP": "$",
  "GTQ": "Q",
  "HNL": "L",
  "MXN": "$",
  "NIO": "C$",
  "PAB": "B/.",
  "PEN": "S/",
  "PYG": "₲",
  "UYU": "$",
  "VES": "Bs.S",
  "IRR": "ريال",
  "GNF": "FG",
  "CDF": "FC",
  "HTG": "G",
  "XPF": "FCFP",
  "HRK": "kn",
  "HUF": "Ft",
  "AMD": "֏",
  "ISK": "kr",
  "JPY": "¥",
  "GEL": "₾",
  "CVE": "​",
  "KZT": "₸",
  "KHR": "៛",
  "KPW": "₩",
  "KRW": "₩",
  "KGS": "сом",
  "AOA": "Kz",
  "LAK": "₭",
  "MZN": "MTn",
  "MKD": "ден",
  "MNT": "₮",
  "BND": "$",
  "MMK": "K",
  "NOK": "kr",
  "NPR": "रु",
  "AWG": "Afl.",
  "SRD": "$",
  "PLN": "zł",
  "AFN": "؋",
  "STN": "Db",
  "MDL": "L",
  "RON": "lei",
  "UAH": "₴",
  "LKR": "රු.",
  "ALL": "Lekë",
  "RSD": "дин.",
  "TJS": "смн",
  "THB": "฿",
  "TMT": "m.",
  "TRY": "₺",
  "UZS": "сўм",
  "VND": "₫",
  "TWD": "NT$"
};
function getBlazorCurrencySymbol(currencyCode) {
  return getValue(currencyCode || "", blazorCurrencyData);
}
var defaultCurrencyCode = "USD";
var NumberFormat$1 = null;
var DateFormat$1 = null;
function setNumberFormat(value) {
  NumberFormat$1 = value;
}
function setDateFormat(value) {
  DateFormat$1 = value;
}
var regExp$1 = RegExp;
var blazorCultureFormats = {
  "en-US": {
    "d": "M/d/y",
    "D": "EEEE, MMMM d, y",
    "f": "EEEE, MMMM d, y h:mm a",
    "F": "EEEE, MMMM d, y h:mm:s a",
    "g": "M/d/y h:mm a",
    "G": "M/d/yyyy h:mm:ss tt",
    "m": "MMMM d",
    "M": "MMMM d",
    "r": "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",
    "R": "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",
    "s": "yyyy'-'MM'-'dd'T'HH':'mm':'ss",
    "t": "h:mm tt",
    "T": "h:m:s tt",
    "u": "yyyy'-'MM'-'dd HH':'mm':'ss'Z'",
    "U": "dddd, MMMM d, yyyy h:mm:ss tt",
    "y": "MMMM yyyy",
    "Y": "MMMM yyyy"
  }
};
var IntlBase;
(function(IntlBase2) {
  IntlBase2.negativeDataRegex = /^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;
  IntlBase2.customRegex = /^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0# ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;
  IntlBase2.latnParseRegex = /0|1|2|3|4|5|6|7|8|9/g;
  var fractionRegex = /[0-9]/g;
  IntlBase2.defaultCurrency = "$";
  var mapper2 = ["infinity", "nan", "group", "decimal"];
  var patternRegex = /G|M|L|H|c|'| a|yy|y|EEEE|E/g;
  var patternMatch = {
    "G": "",
    "M": "m",
    "L": "m",
    "H": "h",
    "c": "d",
    "'": '"',
    " a": " AM/PM",
    "yy": "yy",
    "y": "yyyy",
    "EEEE": "dddd",
    "E": "ddd"
  };
  IntlBase2.dateConverterMapper = /dddd|ddd/ig;
  var defaultFirstDay = "sun";
  IntlBase2.islamicRegex = /^islamic/;
  var firstDayMapper = {
    "sun": 0,
    "mon": 1,
    "tue": 2,
    "wed": 3,
    "thu": 4,
    "fri": 5,
    "sat": 6
  };
  IntlBase2.formatRegex = new regExp$1("(^[ncpae]{1})([0-1]?[0-9]|20)?$", "i");
  IntlBase2.currencyFormatRegex = new regExp$1("(^[ca]{1})([0-1]?[0-9]|20)?$", "i");
  IntlBase2.curWithoutNumberRegex = /(c|a)$/ig;
  var typeMapper = {
    "$": "isCurrency",
    "%": "isPercent",
    "-": "isNegative",
    0: "nlead",
    1: "nend"
  };
  IntlBase2.dateParseRegex = /([a-z])\1*|'([^']|'')+'|''|./gi;
  IntlBase2.basicPatterns = ["short", "medium", "long", "full"];
  IntlBase2.defaultObject = {
    "dates": {
      "calendars": {
        "gregorian": {
          "months": {
            "stand-alone": {
              "abbreviated": {
                "1": "Jan",
                "2": "Feb",
                "3": "Mar",
                "4": "Apr",
                "5": "May",
                "6": "Jun",
                "7": "Jul",
                "8": "Aug",
                "9": "Sep",
                "10": "Oct",
                "11": "Nov",
                "12": "Dec"
              },
              "narrow": {
                "1": "J",
                "2": "F",
                "3": "M",
                "4": "A",
                "5": "M",
                "6": "J",
                "7": "J",
                "8": "A",
                "9": "S",
                "10": "O",
                "11": "N",
                "12": "D"
              },
              "wide": {
                "1": "January",
                "2": "February",
                "3": "March",
                "4": "April",
                "5": "May",
                "6": "June",
                "7": "July",
                "8": "August",
                "9": "September",
                "10": "October",
                "11": "November",
                "12": "December"
              }
            }
          },
          "days": {
            "stand-alone": {
              "abbreviated": {
                "sun": "Sun",
                "mon": "Mon",
                "tue": "Tue",
                "wed": "Wed",
                "thu": "Thu",
                "fri": "Fri",
                "sat": "Sat"
              },
              "narrow": {
                "sun": "S",
                "mon": "M",
                "tue": "T",
                "wed": "W",
                "thu": "T",
                "fri": "F",
                "sat": "S"
              },
              "short": {
                "sun": "Su",
                "mon": "Mo",
                "tue": "Tu",
                "wed": "We",
                "thu": "Th",
                "fri": "Fr",
                "sat": "Sa"
              },
              "wide": {
                "sun": "Sunday",
                "mon": "Monday",
                "tue": "Tuesday",
                "wed": "Wednesday",
                "thu": "Thursday",
                "fri": "Friday",
                "sat": "Saturday"
              }
            }
          },
          "dayPeriods": {
            "format": {
              "wide": {
                "am": "AM",
                "pm": "PM"
              }
            }
          },
          "eras": {
            "eraNames": {
              "0": "Before Christ",
              "0-alt-variant": "Before Common Era",
              "1": "Anno Domini",
              "1-alt-variant": "Common Era"
            },
            "eraAbbr": {
              "0": "BC",
              "0-alt-variant": "BCE",
              "1": "AD",
              "1-alt-variant": "CE"
            },
            "eraNarrow": {
              "0": "B",
              "0-alt-variant": "BCE",
              "1": "A",
              "1-alt-variant": "CE"
            }
          },
          "dateFormats": {
            "full": "EEEE, MMMM d, y",
            "long": "MMMM d, y",
            "medium": "MMM d, y",
            "short": "M/d/yy"
          },
          "timeFormats": {
            "full": "h:mm:ss a zzzz",
            "long": "h:mm:ss a z",
            "medium": "h:mm:ss a",
            "short": "h:mm a"
          },
          "dateTimeFormats": {
            "full": "{1} 'at' {0}",
            "long": "{1} 'at' {0}",
            "medium": "{1}, {0}",
            "short": "{1}, {0}",
            "availableFormats": {
              "d": "d",
              "E": "ccc",
              "Ed": "d E",
              "Ehm": "E h:mm a",
              "EHm": "E HH:mm",
              "Ehms": "E h:mm:ss a",
              "EHms": "E HH:mm:ss",
              "Gy": "y G",
              "GyMMM": "MMM y G",
              "GyMMMd": "MMM d, y G",
              "GyMMMEd": "E, MMM d, y G",
              "h": "h a",
              "H": "HH",
              "hm": "h:mm a",
              "Hm": "HH:mm",
              "hms": "h:mm:ss a",
              "Hms": "HH:mm:ss",
              "hmsv": "h:mm:ss a v",
              "Hmsv": "HH:mm:ss v",
              "hmv": "h:mm a v",
              "Hmv": "HH:mm v",
              "M": "L",
              "Md": "M/d",
              "MEd": "E, M/d",
              "MMM": "LLL",
              "MMMd": "MMM d",
              "MMMEd": "E, MMM d",
              "MMMMd": "MMMM d",
              "ms": "mm:ss",
              "y": "y",
              "yM": "M/y",
              "yMd": "M/d/y",
              "yMEd": "E, M/d/y",
              "yMMM": "MMM y",
              "yMMMd": "MMM d, y",
              "yMMMEd": "E, MMM d, y",
              "yMMMM": "MMMM y"
            }
          }
        },
        "islamic": {
          "months": {
            "stand-alone": {
              "abbreviated": {
                "1": "Muh.",
                "2": "Saf.",
                "3": "Rab. I",
                "4": "Rab. II",
                "5": "Jum. I",
                "6": "Jum. II",
                "7": "Raj.",
                "8": "Sha.",
                "9": "Ram.",
                "10": "Shaw.",
                "11": "Dhuʻl-Q.",
                "12": "Dhuʻl-H."
              },
              "narrow": {
                "1": "1",
                "2": "2",
                "3": "3",
                "4": "4",
                "5": "5",
                "6": "6",
                "7": "7",
                "8": "8",
                "9": "9",
                "10": "10",
                "11": "11",
                "12": "12"
              },
              "wide": {
                "1": "Muharram",
                "2": "Safar",
                "3": "Rabiʻ I",
                "4": "Rabiʻ II",
                "5": "Jumada I",
                "6": "Jumada II",
                "7": "Rajab",
                "8": "Shaʻban",
                "9": "Ramadan",
                "10": "Shawwal",
                "11": "Dhuʻl-Qiʻdah",
                "12": "Dhuʻl-Hijjah"
              }
            }
          },
          "days": {
            "stand-alone": {
              "abbreviated": {
                "sun": "Sun",
                "mon": "Mon",
                "tue": "Tue",
                "wed": "Wed",
                "thu": "Thu",
                "fri": "Fri",
                "sat": "Sat"
              },
              "narrow": {
                "sun": "S",
                "mon": "M",
                "tue": "T",
                "wed": "W",
                "thu": "T",
                "fri": "F",
                "sat": "S"
              },
              "short": {
                "sun": "Su",
                "mon": "Mo",
                "tue": "Tu",
                "wed": "We",
                "thu": "Th",
                "fri": "Fr",
                "sat": "Sa"
              },
              "wide": {
                "sun": "Sunday",
                "mon": "Monday",
                "tue": "Tuesday",
                "wed": "Wednesday",
                "thu": "Thursday",
                "fri": "Friday",
                "sat": "Saturday"
              }
            }
          },
          "dayPeriods": {
            "format": {
              "wide": {
                "am": "AM",
                "pm": "PM"
              }
            }
          },
          "eras": {
            "eraNames": {
              "0": "AH"
            },
            "eraAbbr": {
              "0": "AH"
            },
            "eraNarrow": {
              "0": "AH"
            }
          },
          "dateFormats": {
            "full": "EEEE, MMMM d, y G",
            "long": "MMMM d, y G",
            "medium": "MMM d, y G",
            "short": "M/d/y GGGGG"
          },
          "timeFormats": {
            "full": "h:mm:ss a zzzz",
            "long": "h:mm:ss a z",
            "medium": "h:mm:ss a",
            "short": "h:mm a"
          },
          "dateTimeFormats": {
            "full": "{1} 'at' {0}",
            "long": "{1} 'at' {0}",
            "medium": "{1}, {0}",
            "short": "{1}, {0}",
            "availableFormats": {
              "d": "d",
              "E": "ccc",
              "Ed": "d E",
              "Ehm": "E h:mm a",
              "EHm": "E HH:mm",
              "Ehms": "E h:mm:ss a",
              "EHms": "E HH:mm:ss",
              "Gy": "y G",
              "GyMMM": "MMM y G",
              "GyMMMd": "MMM d, y G",
              "GyMMMEd": "E, MMM d, y G",
              "h": "h a",
              "H": "HH",
              "hm": "h:mm a",
              "Hm": "HH:mm",
              "hms": "h:mm:ss a",
              "Hms": "HH:mm:ss",
              "M": "L",
              "Md": "M/d",
              "MEd": "E, M/d",
              "MMM": "LLL",
              "MMMd": "MMM d",
              "MMMEd": "E, MMM d",
              "MMMMd": "MMMM d",
              "ms": "mm:ss",
              "y": "y G",
              "yyyy": "y G",
              "yyyyM": "M/y GGGGG",
              "yyyyMd": "M/d/y GGGGG",
              "yyyyMEd": "E, M/d/y GGGGG",
              "yyyyMMM": "MMM y G",
              "yyyyMMMd": "MMM d, y G",
              "yyyyMMMEd": "E, MMM d, y G",
              "yyyyMMMM": "MMMM y G",
              "yyyyQQQ": "QQQ y G",
              "yyyyQQQQ": "QQQQ y G"
            }
          }
        }
      },
      "timeZoneNames": {
        "hourFormat": "+HH:mm;-HH:mm",
        "gmtFormat": "GMT{0}",
        "gmtZeroFormat": "GMT"
      }
    },
    "numbers": {
      "currencies": {
        "USD": {
          "displayName": "US Dollar",
          "symbol": "$",
          "symbol-alt-narrow": "$"
        },
        "EUR": {
          "displayName": "Euro",
          "symbol": "€",
          "symbol-alt-narrow": "€"
        },
        "GBP": {
          "displayName": "British Pound",
          "symbol-alt-narrow": "£"
        }
      },
      "defaultNumberingSystem": "latn",
      "minimumGroupingDigits": "1",
      "symbols-numberSystem-latn": {
        "decimal": ".",
        "group": ",",
        "list": ";",
        "percentSign": "%",
        "plusSign": "+",
        "minusSign": "-",
        "exponential": "E",
        "superscriptingExponent": "×",
        "perMille": "‰",
        "infinity": "∞",
        "nan": "NaN",
        "timeSeparator": ":"
      },
      "decimalFormats-numberSystem-latn": {
        "standard": "#,##0.###"
      },
      "percentFormats-numberSystem-latn": {
        "standard": "#,##0%"
      },
      "currencyFormats-numberSystem-latn": {
        "standard": "¤#,##0.00",
        "accounting": "¤#,##0.00;(¤#,##0.00)"
      },
      "scientificFormats-numberSystem-latn": {
        "standard": "#E0"
      }
    }
  };
  IntlBase2.blazorDefaultObject = {
    "numbers": {
      "mapper": {
        "0": "0",
        "1": "1",
        "2": "2",
        "3": "3",
        "4": "4",
        "5": "5",
        "6": "6",
        "7": "7",
        "8": "8",
        "9": "9"
      },
      "mapperDigits": "0123456789",
      "numberSymbols": {
        "decimal": ".",
        "group": ",",
        "plusSign": "+",
        "minusSign": "-",
        "percentSign": "%",
        "nan": "NaN",
        "timeSeparator": ":",
        "infinity": "∞"
      },
      "timeSeparator": ":",
      "currencySymbol": "$",
      "currencypData": {
        "nlead": "$",
        "nend": "",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "percentpData": {
        "nlead": "",
        "nend": "%",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "percentnData": {
        "nlead": "-",
        "nend": "%",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "currencynData": {
        "nlead": "($",
        "nend": ")",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "decimalnData": {
        "nlead": "-",
        "nend": "",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "decimalpData": {
        "nlead": "",
        "nend": "",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      }
    },
    "dates": {
      "dayPeriods": {
        "am": "AM",
        "pm": "PM"
      },
      "dateSeperator": "/",
      "days": {
        "abbreviated": {
          "sun": "Sun",
          "mon": "Mon",
          "tue": "Tue",
          "wed": "Wed",
          "thu": "Thu",
          "fri": "Fri",
          "sat": "Sat"
        },
        "short": {
          "sun": "Su",
          "mon": "Mo",
          "tue": "Tu",
          "wed": "We",
          "thu": "Th",
          "fri": "Fr",
          "sat": "Sa"
        },
        "wide": {
          "sun": "Sunday",
          "mon": "Monday",
          "tue": "Tuesday",
          "wed": "Wednesday",
          "thu": "Thursday",
          "fri": "Friday",
          "sat": "Saturday"
        }
      },
      "months": {
        "abbreviated": {
          "1": "Jan",
          "2": "Feb",
          "3": "Mar",
          "4": "Apr",
          "5": "May",
          "6": "Jun",
          "7": "Jul",
          "8": "Aug",
          "9": "Sep",
          "10": "Oct",
          "11": "Nov",
          "12": "Dec"
        },
        "wide": {
          "1": "January",
          "2": "February",
          "3": "March",
          "4": "April",
          "5": "May",
          "6": "June",
          "7": "July",
          "8": "August",
          "9": "September",
          "10": "October",
          "11": "November",
          "12": "December"
        }
      },
      "eras": {
        "1": "AD"
      }
    }
  };
  IntlBase2.monthIndex = {
    3: "abbreviated",
    4: "wide",
    5: "narrow",
    1: "abbreviated"
  };
  IntlBase2.month = "months";
  IntlBase2.days = "days";
  IntlBase2.patternMatcher = {
    C: "currency",
    P: "percent",
    N: "decimal",
    A: "currency",
    E: "scientific"
  };
  function getResultantPattern(skeleton, dateObject, type, isIslamic, blazorCulture) {
    var resPattern;
    var iType = type || "date";
    if (blazorCulture) {
      resPattern = compareBlazorDateFormats({ skeleton }, blazorCulture).format || compareBlazorDateFormats({ skeleton: "d" }, "en-US").format;
    } else {
      if (IntlBase2.basicPatterns.indexOf(skeleton) !== -1) {
        resPattern = getValue(iType + "Formats." + skeleton, dateObject);
        if (iType === "dateTime") {
          var dPattern = getValue("dateFormats." + skeleton, dateObject);
          var tPattern = getValue("timeFormats." + skeleton, dateObject);
          resPattern = resPattern.replace("{1}", dPattern).replace("{0}", tPattern);
        }
      } else {
        resPattern = getValue("dateTimeFormats.availableFormats." + skeleton, dateObject);
      }
      if (isUndefined(resPattern) && skeleton === "yMd") {
        resPattern = "M/d/y";
      }
    }
    return resPattern;
  }
  IntlBase2.getResultantPattern = getResultantPattern;
  function getDependables(cldr, culture, mode, isNumber) {
    var ret = {};
    var calendartype = mode || "gregorian";
    ret.parserObject = ParserBase.getMainObject(cldr, culture) || IntlBase2.defaultObject;
    if (isNumber) {
      ret.numericObject = getValue("numbers", ret.parserObject);
    } else {
      var dateString = "dates.calendars." + calendartype;
      ret.dateObject = getValue(dateString, ret.parserObject);
    }
    return ret;
  }
  IntlBase2.getDependables = getDependables;
  function getSymbolPattern(type, numSystem, obj, isAccount) {
    return getValue(type + "Formats-numberSystem-" + numSystem + (isAccount ? ".accounting" : ".standard"), obj) || (isAccount ? getValue(type + "Formats-numberSystem-" + numSystem + ".standard", obj) : "");
  }
  IntlBase2.getSymbolPattern = getSymbolPattern;
  function ConvertDateToWeekFormat(format) {
    format.match(IntlBase2.dateConverterMapper);
    return format;
  }
  IntlBase2.ConvertDateToWeekFormat = ConvertDateToWeekFormat;
  function compareBlazorDateFormats(formatOptions, culture) {
    var format = formatOptions.format || formatOptions.skeleton;
    var curFormatMapper = getValue((culture || "en-US") + "." + format, blazorCultureFormats);
    if (!curFormatMapper) {
      curFormatMapper = getValue("en-US." + format, blazorCultureFormats);
    }
    if (curFormatMapper) {
      curFormatMapper = ConvertDateToWeekFormat(curFormatMapper);
      formatOptions.format = curFormatMapper.replace(/tt/, "a");
    }
    return formatOptions;
  }
  IntlBase2.compareBlazorDateFormats = compareBlazorDateFormats;
  function getProperNumericSkeleton(skeleton) {
    var matches2 = skeleton.match(IntlBase2.formatRegex);
    var ret = {};
    var pattern = matches2[1].toUpperCase();
    ret.isAccount = pattern === "A";
    ret.type = IntlBase2.patternMatcher["" + pattern];
    if (skeleton.length > 1) {
      ret.fractionDigits = parseInt(matches2[2], 10);
    }
    return ret;
  }
  IntlBase2.getProperNumericSkeleton = getProperNumericSkeleton;
  function getFormatData(pattern, needFraction, cSymbol, fractionOnly) {
    var nData = fractionOnly ? {} : { nlead: "", nend: "" };
    var match = pattern.match(IntlBase2.customRegex);
    if (match) {
      if (!fractionOnly) {
        nData.nlead = changeCurrencySymbol(match[1], cSymbol);
        nData.nend = changeCurrencySymbol(match[10], cSymbol);
        nData.groupPattern = match[4];
      }
      var fraction = match[7];
      if (fraction && needFraction) {
        var fmatch = fraction.match(fractionRegex);
        if (!isNullOrUndefined(fmatch)) {
          nData.minimumFraction = fmatch.length;
        } else {
          nData.minimumFraction = 0;
        }
        nData.maximumFraction = fraction.length - 1;
      }
    }
    return nData;
  }
  IntlBase2.getFormatData = getFormatData;
  function changeCurrencySymbol(val, sym) {
    if (val) {
      val = val.replace(IntlBase2.defaultCurrency, sym);
      return sym === "" ? val.trim() : val;
    }
    return "";
  }
  IntlBase2.changeCurrencySymbol = changeCurrencySymbol;
  function getCurrencySymbol(numericObject, currencyCode, altSymbol, ignoreCurrency) {
    var symbol = altSymbol ? "." + altSymbol : ".symbol";
    var getCurrency = ignoreCurrency ? "$" : getValue("currencies." + currencyCode + symbol, numericObject) || getValue("currencies." + currencyCode + ".symbol-alt-narrow", numericObject) || "$";
    return getCurrency;
  }
  IntlBase2.getCurrencySymbol = getCurrencySymbol;
  function customFormat(format, dOptions, obj) {
    var options = {};
    var formatSplit = format.split(";");
    var data = ["pData", "nData", "zeroData"];
    for (var i = 0; i < formatSplit.length; i++) {
      options["" + data[parseInt(i.toString(), 10)]] = customNumberFormat(formatSplit[parseInt(i.toString(), 10)], dOptions, obj);
    }
    if (isNullOrUndefined(options.nData)) {
      options.nData = extend$1({}, options.pData);
      options.nData.nlead = isNullOrUndefined(dOptions) ? "-" + options.nData.nlead : dOptions.minusSymbol + options.nData.nlead;
    }
    return options;
  }
  IntlBase2.customFormat = customFormat;
  function customNumberFormat(format, dOptions, numObject) {
    var cOptions = { type: "decimal", minimumFractionDigits: 0, maximumFractionDigits: 0 };
    var pattern = format.match(IntlBase2.customRegex);
    if (isNullOrUndefined(pattern) || pattern[5] === "" && format !== "N/A") {
      cOptions.type = void 0;
      return cOptions;
    }
    cOptions.nlead = pattern[1];
    cOptions.nend = pattern[10];
    var integerPart = pattern[6];
    var spaceCapture = integerPart.match(/ $/g) ? true : false;
    var spaceGrouping = integerPart.replace(/ $/g, "").indexOf(" ") !== -1;
    cOptions.useGrouping = integerPart.indexOf(",") !== -1 || spaceGrouping;
    integerPart = integerPart.replace(/,/g, "");
    integerPart = /\s$/.test(integerPart) ? integerPart.replace(/ /g, "") : integerPart;
    var fractionPart = pattern[7];
    if (integerPart.indexOf("0") !== -1) {
      cOptions.minimumIntegerDigits = integerPart.length - integerPart.indexOf("0");
    }
    if (!isNullOrUndefined(fractionPart)) {
      cOptions.minimumFractionDigits = fractionPart.lastIndexOf("0");
      cOptions.maximumFractionDigits = fractionPart.lastIndexOf("#");
      if (cOptions.minimumFractionDigits === -1) {
        cOptions.minimumFractionDigits = 0;
      }
      if (cOptions.maximumFractionDigits === -1 || cOptions.maximumFractionDigits < cOptions.minimumFractionDigits) {
        cOptions.maximumFractionDigits = cOptions.minimumFractionDigits;
      }
    }
    if (!isNullOrUndefined(dOptions)) {
      dOptions.isCustomFormat = true;
      extend$1(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], "$", dOptions.currencySymbol));
      if (!cOptions.isCurrency) {
        extend$1(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], "%", dOptions.percentSymbol));
      }
    } else {
      extend$1(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], "%", "%"));
    }
    if (!isNullOrUndefined(numObject)) {
      var symbolPattern = getSymbolPattern(cOptions.type, dOptions.numberMapper.numberSystem, numObject, false);
      if (cOptions.useGrouping) {
        cOptions.groupSeparator = spaceGrouping ? " " : dOptions.numberMapper.numberSymbols[mapper2[2]];
        cOptions.groupData = NumberFormat$1.getGroupingDetails(symbolPattern.split(";")[0]);
      }
      cOptions.nlead = cOptions.nlead.replace(/'/g, "");
      cOptions.nend = spaceCapture ? " " + cOptions.nend.replace(/'/g, "") : cOptions.nend.replace(/'/g, "");
    }
    return cOptions;
  }
  IntlBase2.customNumberFormat = customNumberFormat;
  function isCurrencyPercent(parts, actual, symbol) {
    var options = { nlead: parts[0], nend: parts[1] };
    for (var i = 0; i < 2; i++) {
      var part = parts[parseInt(i.toString(), 10)];
      var loc = part.indexOf(actual);
      if (loc !== -1 && (loc < part.indexOf("'") || loc > part.lastIndexOf("'"))) {
        options["" + typeMapper[parseInt(i.toString(), 10)]] = part.substr(0, loc) + symbol + part.substr(loc + 1);
        options["" + typeMapper["" + actual]] = true;
        options.type = options.isCurrency ? "currency" : "percent";
        break;
      }
    }
    return options;
  }
  IntlBase2.isCurrencyPercent = isCurrencyPercent;
  function getDateSeparator(dateObj) {
    var value = (getValue("dateFormats.short", dateObj) || "").match(/[dM]([^dM])[dM]/i);
    return value ? value[1] : "/";
  }
  IntlBase2.getDateSeparator = getDateSeparator;
  function getActualDateTimeFormat(culture, options, cldr, isExcelFormat) {
    var dependable = getDependables(cldr, culture, options.calendar);
    var actualPattern = options.format || getResultantPattern(options.skeleton, dependable.dateObject, options.type);
    if (isExcelFormat) {
      actualPattern = actualPattern.replace(patternRegex, function(pattern2) {
        return patternMatch["" + pattern2];
      });
      if (actualPattern.indexOf("z") !== -1) {
        var tLength = actualPattern.match(/z/g).length;
        var timeZonePattern = void 0;
        var options_1 = { "timeZone": {} };
        options_1.numMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        options_1.timeZone = getValue("dates.timeZoneNames", dependable.parserObject);
        var value = /* @__PURE__ */ new Date();
        var timezone = value.getTimezoneOffset();
        var pattern = tLength < 4 ? "+H;-H" : options_1.timeZone.hourFormat;
        pattern = pattern.replace(/:/g, options_1.numMapper.timeSeparator);
        if (timezone === 0) {
          timeZonePattern = options_1.timeZone.gmtZeroFormat;
        } else {
          timeZonePattern = DateFormat$1.getTimeZoneValue(timezone, pattern);
          timeZonePattern = options_1.timeZone.gmtFormat.replace(/\{0\}/, timeZonePattern);
        }
        actualPattern = actualPattern.replace(/[z]+/, '"' + timeZonePattern + '"');
      }
      actualPattern = actualPattern.replace(/ $/, "");
    }
    return actualPattern;
  }
  IntlBase2.getActualDateTimeFormat = getActualDateTimeFormat;
  function processSymbol(actual, option) {
    if (actual.indexOf(",") !== -1) {
      var split = actual.split(",");
      actual = split[0] + getValue("numberMapper.numberSymbols.group", option) + split[1].replace(".", getValue("numberMapper.numberSymbols.decimal", option));
    } else {
      actual = actual.replace(".", getValue("numberMapper.numberSymbols.decimal", option));
    }
    return actual;
  }
  IntlBase2.processSymbol = processSymbol;
  function getActualNumberFormat(culture, options, cldr, isExcel) {
    var dependable = getDependables(cldr, culture, "", true);
    var parseOptions = { custom: true };
    dependable.numericObject;
    var minFrac;
    var curObj = {};
    var curMatch = (options.format || "").match(IntlBase2.currencyFormatRegex);
    IntlBase2.formatRegex.test(options.format) ? getProperNumericSkeleton(options.format || "N") : {};
    var dOptions = {};
    if (curMatch) {
      dOptions.numberMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true);
      var curCode = getCurrencySymbol(dependable.numericObject, options.currency || defaultCurrencyCode, options.altSymbol);
      var symbolPattern = getSymbolPattern("currency", dOptions.numberMapper.numberSystem, dependable.numericObject, /a/i.test(options.format));
      symbolPattern = symbolPattern.replace(/\u00A4/g, curCode);
      var split = symbolPattern.split(";");
      curObj.hasNegativePattern = split.length > 1;
      curObj.nData = getFormatData(split[1] || "-" + split[0], true, curCode);
      curObj.pData = getFormatData(split[0], false, curCode);
      if (!curMatch[2] && !options.minimumFractionDigits && !options.maximumFractionDigits) {
        minFrac = getFormatData(symbolPattern.split(";")[0], true, "", true).minimumFraction;
      }
    }
    var actualPattern;
    if (IntlBase2.formatRegex.test(options.format) || !options.format) {
      extend$1(parseOptions, getProperNumericSkeleton(options.format || "N"));
      parseOptions.custom = false;
      actualPattern = "###0";
      if (parseOptions.fractionDigits || options.minimumFractionDigits || options.maximumFractionDigits || minFrac) {
        var defaultMinimum = 0;
        if (parseOptions.fractionDigits) {
          options.minimumFractionDigits = options.maximumFractionDigits = parseOptions.fractionDigits;
        }
        actualPattern = fractionDigitsPattern(actualPattern, minFrac || parseOptions.fractionDigits || options.minimumFractionDigits || defaultMinimum, options.maximumFractionDigits || defaultMinimum);
      }
      if (options.minimumIntegerDigits) {
        actualPattern = minimumIntegerPattern(actualPattern, options.minimumIntegerDigits);
      }
      if (options.useGrouping) {
        actualPattern = groupingPattern(actualPattern);
      }
      if (parseOptions.type === "currency" || parseOptions.type && isBlazor()) {
        var cPattern = actualPattern;
        actualPattern = curObj.pData.nlead + cPattern + curObj.pData.nend;
        if (curObj.hasNegativePattern || isBlazor()) {
          actualPattern += ";" + curObj.nData.nlead + cPattern + curObj.nData.nend;
        }
      }
      if (parseOptions.type === "percent" && true) {
        actualPattern += " %";
      }
    } else {
      actualPattern = options.format.replace(/'/g, '"');
    }
    if (Object.keys(dOptions).length > 0) {
      actualPattern = !isExcel ? processSymbol(actualPattern, dOptions) : actualPattern;
    }
    return actualPattern;
  }
  IntlBase2.getActualNumberFormat = getActualNumberFormat;
  function fractionDigitsPattern(pattern, minDigits, maxDigits) {
    pattern += ".";
    for (var a = 0; a < minDigits; a++) {
      pattern += "0";
    }
    if (minDigits < maxDigits) {
      var diff = maxDigits - minDigits;
      for (var b = 0; b < diff; b++) {
        pattern += "#";
      }
    }
    return pattern;
  }
  IntlBase2.fractionDigitsPattern = fractionDigitsPattern;
  function minimumIntegerPattern(pattern, digits) {
    var temp = pattern.split(".");
    var integer = "";
    for (var x = 0; x < digits; x++) {
      integer += "0";
    }
    return temp[1] ? integer + "." + temp[1] : integer;
  }
  IntlBase2.minimumIntegerPattern = minimumIntegerPattern;
  function groupingPattern(pattern) {
    var temp = pattern.split(".");
    var integer = temp[0];
    var no = 3 - integer.length % 3;
    var hash = no && no === 1 ? "#" : no === 2 ? "##" : "";
    integer = hash + integer;
    pattern = "";
    for (var x = integer.length - 1; x > 0; x = x - 3) {
      pattern = "," + integer[x - 2] + integer[x - 1] + integer[parseInt(x.toString(), 10)] + pattern;
    }
    pattern = pattern.slice(1);
    return temp[1] ? pattern + "." + temp[1] : pattern;
  }
  IntlBase2.groupingPattern = groupingPattern;
  function getWeekData(culture, cldr) {
    var firstDay = defaultFirstDay;
    var mapper3 = getValue("supplemental.weekData.firstDay", cldr);
    var iCulture = culture;
    if (/en-/.test(iCulture)) {
      iCulture = iCulture.slice(3);
    }
    iCulture = iCulture.slice(0, 2).toUpperCase() + iCulture.substr(2);
    if (mapper3) {
      firstDay = mapper3["" + iCulture] || mapper3[iCulture.slice(0, 2)] || defaultFirstDay;
    }
    return firstDayMapper["" + firstDay];
  }
  IntlBase2.getWeekData = getWeekData;
  function replaceBlazorCurrency(pData, aCurrency, rCurrency) {
    var iCurrency = getBlazorCurrencySymbol(rCurrency);
    if (aCurrency !== iCurrency) {
      for (var _i = 0, pData_1 = pData; _i < pData_1.length; _i++) {
        var data = pData_1[_i];
        data.nend = data.nend.replace(aCurrency, iCurrency);
        data.nlead = data.nlead.replace(aCurrency, iCurrency);
      }
    }
  }
  IntlBase2.replaceBlazorCurrency = replaceBlazorCurrency;
  function getWeekOfYear(date, firstDayOfWeek) {
    var newYear = new Date(date.getFullYear(), 0, 1);
    var day = newYear.getDay();
    var weeknum;
    day = day >= 0 ? day : day + 7;
    var daynum = Math.floor((date.getTime() - newYear.getTime() - (date.getTimezoneOffset() - newYear.getTimezoneOffset()) * 6e4) / 864e5) + 1;
    if (day < 4) {
      weeknum = Math.floor((daynum + day - firstDayOfWeek - 1) / 7) + 1;
      if (weeknum > 52) {
        var nYear = new Date(date.getFullYear() + 1, 0, 1);
        var nday = nYear.getDay();
        nday = nday >= 0 ? nday : nday + 7;
        weeknum = nday < 4 ? 1 : 53;
      }
    } else {
      weeknum = Math.floor((daynum + day - firstDayOfWeek - 1) / 7);
    }
    return weeknum;
  }
  IntlBase2.getWeekOfYear = getWeekOfYear;
})(IntlBase || (IntlBase = {}));
var Fetch = (
  /** @class */
  function() {
    function Fetch2(options, type, contentType) {
      this.type = "GET";
      this.emitError = true;
      if (typeof options === "string") {
        this.url = options;
        this.type = !isNullOrUndefined(type) ? type.toUpperCase() : this.type;
        this.contentType = contentType;
      } else if (isObject(options) && Object.keys(options).length > 0) {
        merge(this, options);
      }
      this.contentType = !isNullOrUndefined(this.contentType) ? this.contentType : "application/json; charset=utf-8";
    }
    Fetch2.prototype.send = function(data) {
      var _this = this;
      var contentTypes = {
        "application/json": "json",
        "multipart/form-data": "formData",
        "application/octet-stream": "blob",
        "application/x-www-form-urlencoded": "formData"
      };
      try {
        if (isNullOrUndefined(this.fetchRequest) && this.type === "GET") {
          this.fetchRequest = new Request(this.url, { method: this.type });
        } else if (isNullOrUndefined(this.fetchRequest)) {
          this.data = !isNullOrUndefined(data) ? data : this.data;
          this.fetchRequest = new Request(this.url, {
            method: this.type,
            headers: { "Content-Type": this.contentType },
            body: this.data
          });
        }
        var eventArgs = { cancel: false, fetchRequest: this.fetchRequest };
        this.triggerEvent(this["beforeSend"], eventArgs);
        if (eventArgs.cancel) {
          return null;
        }
        this.fetchResponse = fetch(this.fetchRequest);
        return this.fetchResponse.then(function(response) {
          _this.triggerEvent(_this["onLoad"], response);
          if (!response.ok) {
            throw response;
          }
          var responseType = "text";
          for (var _i = 0, _a = Object.keys(contentTypes); _i < _a.length; _i++) {
            var key = _a[_i];
            if (response.headers.get("Content-Type") && response.headers.get("Content-Type").indexOf(key) !== -1) {
              responseType = contentTypes[key];
            }
          }
          return response[responseType]();
        }).then(function(data2) {
          _this.triggerEvent(_this["onSuccess"], data2, _this);
          return data2;
        }).catch(function(error) {
          var returnVal = {};
          if (_this.emitError) {
            _this.triggerEvent(_this["onFailure"], error);
            returnVal = Promise.reject(error);
          }
          return returnVal;
        });
      } catch (error) {
        return error;
      }
    };
    Fetch2.prototype.triggerEvent = function(callback, data, instance) {
      if (!isNullOrUndefined(callback) && typeof callback === "function") {
        callback(data, instance);
      }
    };
    return Fetch2;
  }()
);
var REGX_MOBILE = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i;
var REGX_IE = /msie|trident/i;
var REGX_IE11 = /Trident\/7\./;
var REGX_IOS = /(ipad|iphone|ipod touch)/i;
var REGX_IOS7 = /(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i;
var REGX_ANDROID = /android/i;
var REGX_WINDOWS = /trident|windows phone|edge/i;
var REGX_VERSION = /(version)[ /]([\w.]+)/i;
var REGX_BROWSER = {
  OPERA: /(opera|opr)(?:.*version|)[ /]([\w.]+)/i,
  EDGE: /(edge)(?:.*version|)[ /]([\w.]+)/i,
  CHROME: /(chrome|crios)[ /]([\w.]+)/i,
  PANTHOMEJS: /(phantomjs)[ /]([\w.]+)/i,
  SAFARI: /(safari)[ /]([\w.]+)/i,
  WEBKIT: /(webkit)[ /]([\w.]+)/i,
  MSIE: /(msie|trident) ([\w.]+)/i,
  MOZILLA: /(mozilla)(?:.*? rv:([\w.]+)|)/i
};
if (typeof window !== "undefined") {
  window.browserDetails = window.browserDetails || {};
}
var Browser = (
  /** @class */
  function() {
    function Browser2() {
    }
    Browser2.extractBrowserDetail = function() {
      var browserInfo = { culture: {} };
      var keys2 = Object.keys(REGX_BROWSER);
      var clientInfo = [];
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        clientInfo = Browser2.userAgent.match(REGX_BROWSER["" + key]);
        if (clientInfo) {
          browserInfo.name = clientInfo[1].toLowerCase() === "opr" ? "opera" : clientInfo[1].toLowerCase();
          browserInfo.name = clientInfo[1].toLowerCase() === "crios" ? "chrome" : browserInfo.name;
          browserInfo.version = clientInfo[2];
          browserInfo.culture.name = browserInfo.culture.language = navigator.language;
          if (Browser2.userAgent.match(REGX_IE11)) {
            browserInfo.name = "msie";
            break;
          }
          var version = Browser2.userAgent.match(REGX_VERSION);
          if (browserInfo.name === "safari" && version) {
            browserInfo.version = version[2];
          }
          break;
        }
      }
      return browserInfo;
    };
    Browser2.getEvent = function(event) {
      var events = {
        start: {
          isPointer: "pointerdown",
          isTouch: "touchstart",
          isDevice: "mousedown"
        },
        move: {
          isPointer: "pointermove",
          isTouch: "touchmove",
          isDevice: "mousemove"
        },
        end: {
          isPointer: "pointerup",
          isTouch: "touchend",
          isDevice: "mouseup"
        },
        cancel: {
          isPointer: "pointercancel",
          isTouch: "touchcancel",
          isDevice: "mouseleave"
        }
      };
      return Browser2.isPointer ? events["" + event].isPointer : Browser2.isTouch ? events["" + event].isTouch + (!Browser2.isDevice ? " " + events["" + event].isDevice : "") : events["" + event].isDevice;
    };
    Browser2.getTouchStartEvent = function() {
      return Browser2.getEvent("start");
    };
    Browser2.getTouchEndEvent = function() {
      return Browser2.getEvent("end");
    };
    Browser2.getTouchMoveEvent = function() {
      return Browser2.getEvent("move");
    };
    Browser2.getTouchCancelEvent = function() {
      return Browser2.getEvent("cancel");
    };
    Browser2.isSafari = function() {
      return Browser2.isDevice && Browser2.isIos && Browser2.isTouch && typeof window !== "undefined" && window.navigator.userAgent.toLowerCase().indexOf("iphone") === -1 && window.navigator.userAgent.toLowerCase().indexOf("safari") > -1;
    };
    Browser2.getValue = function(key, regX) {
      var browserDetails = typeof window !== "undefined" ? window.browserDetails : {};
      if (typeof navigator !== "undefined" && navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1 && Browser2.isTouch === true && !REGX_BROWSER.CHROME.test(navigator.userAgent)) {
        browserDetails["isIos"] = true;
        browserDetails["isDevice"] = true;
        browserDetails["isTouch"] = true;
        browserDetails["isPointer"] = true;
        browserDetails["isPointer"] = "pointerEnabled" in window.navigator;
      }
      if (typeof window !== "undefined" && window.Capacitor && window.Capacitor.getPlatform() === "ios") {
        browserDetails["isPointer"] = false;
      }
      if ("undefined" === typeof browserDetails["" + key]) {
        return browserDetails["" + key] = regX.test(Browser2.userAgent);
      }
      return browserDetails["" + key];
    };
    Object.defineProperty(Browser2, "userAgent", {
      get: function() {
        return Browser2.uA;
      },
      //Properties
      /**
       * Property specifies the userAgent of the browser. Default userAgent value is based on the browser.
       * Also we can set our own userAgent.
       *
       * @param {string} uA ?
       */
      set: function(uA) {
        Browser2.uA = uA;
        window.browserDetails = {};
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "info", {
      //Read Only Properties
      /**
       * Property is to get the browser information like Name, Version and Language
       *
       * @returns {BrowserInfo} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.info)) {
          return window.browserDetails.info = Browser2.extractBrowserDetail();
        }
        return window.browserDetails.info;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isIE", {
      /**
       * Property is to get whether the userAgent is based IE.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isIE", REGX_IE);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isTouch", {
      /**
       * Property is to get whether the browser has touch support.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isTouch)) {
          return window.browserDetails.isTouch = "ontouchstart" in window.navigator || window && window.navigator && window.navigator.maxTouchPoints > 0 || "ontouchstart" in window;
        }
        return window.browserDetails.isTouch;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isPointer", {
      /**
       * Property is to get whether the browser has Pointer support.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isPointer)) {
          return window.browserDetails.isPointer = "pointerEnabled" in window.navigator;
        }
        return window.browserDetails.isPointer;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isMSPointer", {
      /**
       * Property is to get whether the browser has MSPointer support.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isMSPointer)) {
          return window.browserDetails.isMSPointer = "msPointerEnabled" in window.navigator;
        }
        return window.browserDetails.isMSPointer;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isDevice", {
      /**
       * Property is to get whether the userAgent is device based.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isDevice", REGX_MOBILE);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isIos", {
      /**
       * Property is to get whether the userAgent is IOS.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isIos", REGX_IOS);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isIos7", {
      /**
       * Property is to get whether the userAgent is Ios7.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isIos7", REGX_IOS7);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isAndroid", {
      /**
       * Property is to get whether the userAgent is Android.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isAndroid", REGX_ANDROID);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isWebView", {
      /**
       * Property is to identify whether application ran in web view.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isWebView)) {
          window.browserDetails.isWebView = !(isUndefined(window.cordova) && isUndefined(window.PhoneGap) && isUndefined(window.phonegap) && window.forge !== "object");
          return window.browserDetails.isWebView;
        }
        return window.browserDetails.isWebView;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isWindows", {
      /**
       * Property is to get whether the userAgent is Windows.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isWindows", REGX_WINDOWS);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchStartEvent", {
      /**
       * Property is to get the touch start event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchStartEvent)) {
          return window.browserDetails.touchStartEvent = Browser2.getTouchStartEvent();
        }
        return window.browserDetails.touchStartEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchMoveEvent", {
      /**
       * Property is to get the touch move event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchMoveEvent)) {
          return window.browserDetails.touchMoveEvent = Browser2.getTouchMoveEvent();
        }
        return window.browserDetails.touchMoveEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchEndEvent", {
      /**
       * Property is to get the touch end event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchEndEvent)) {
          return window.browserDetails.touchEndEvent = Browser2.getTouchEndEvent();
        }
        return window.browserDetails.touchEndEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchCancelEvent", {
      /**
       * Property is to cancel the touch end event.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchCancelEvent)) {
          return window.browserDetails.touchCancelEvent = Browser2.getTouchCancelEvent();
        }
        return window.browserDetails.touchCancelEvent;
      },
      enumerable: true,
      configurable: true
    });
    Browser2.uA = typeof navigator !== "undefined" ? navigator.userAgent : "";
    return Browser2;
  }()
);
var EventHandler = (
  /** @class */
  function() {
    function EventHandler2() {
    }
    EventHandler2.addOrGetEventData = function(element2) {
      if ("__eventList" in element2) {
        return element2.__eventList.events;
      } else {
        element2.__eventList = {};
        return element2.__eventList.events = [];
      }
    };
    EventHandler2.add = function(element2, eventName, listener, bindTo, intDebounce) {
      var eventData = EventHandler2.addOrGetEventData(element2);
      var debounceListener;
      if (intDebounce) {
        debounceListener = debounce(listener, intDebounce);
      } else {
        debounceListener = listener;
      }
      if (bindTo) {
        debounceListener = debounceListener.bind(bindTo);
      }
      var event = eventName.split(" ");
      for (var i = 0; i < event.length; i++) {
        eventData.push({
          name: event[parseInt(i.toString(), 10)],
          listener,
          debounce: debounceListener
        });
        if (Browser.isIE) {
          element2.addEventListener(event[parseInt(i.toString(), 10)], debounceListener);
        } else {
          element2.addEventListener(event[parseInt(i.toString(), 10)], debounceListener, { passive: false });
        }
      }
      return debounceListener;
    };
    EventHandler2.remove = function(element2, eventName, listener) {
      var eventData = EventHandler2.addOrGetEventData(element2);
      var event = eventName.split(" ");
      var _loop_1 = function(j2) {
        var index = -1;
        var debounceListener;
        if (eventData && eventData.length !== 0) {
          eventData.some(function(x, i) {
            return x.name === event[parseInt(j2.toString(), 10)] && x.listener === listener ? (index = i, debounceListener = x.debounce, true) : false;
          });
        }
        if (index !== -1) {
          eventData.splice(index, 1);
        }
        if (debounceListener) {
          element2.removeEventListener(event[parseInt(j2.toString(), 10)], debounceListener);
        }
      };
      for (var j = 0; j < event.length; j++) {
        _loop_1(j);
      }
    };
    EventHandler2.clearEvents = function(element2) {
      var eventData = EventHandler2.addOrGetEventData(element2);
      var copyData = extend$1([], void 0, eventData);
      for (var i = 0; i < copyData.length; i++) {
        var parseValue = copyData[parseInt(i.toString(), 10)];
        element2.removeEventListener(parseValue.name, parseValue.debounce);
        eventData.shift();
      }
    };
    EventHandler2.trigger = function(element2, eventName, eventProp) {
      var eventData = EventHandler2.addOrGetEventData(element2);
      for (var _i = 0, eventData_1 = eventData; _i < eventData_1.length; _i++) {
        var event_1 = eventData_1[_i];
        if (event_1.name === eventName) {
          event_1.debounce.call(this, eventProp);
        }
      }
    };
    return EventHandler2;
  }()
);
var __assign = function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
        t[p] = s[p];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var SVG_REG = /^svg|^path|^g/;
function createElement(tagName, properties) {
  var element2 = SVG_REG.test(tagName) ? document.createElementNS("http://www.w3.org/2000/svg", tagName) : document.createElement(tagName);
  if (typeof properties === "undefined") {
    return element2;
  }
  element2.innerHTML = properties.innerHTML ? properties.innerHTML : "";
  if (properties.className !== void 0) {
    element2.className = properties.className;
  }
  if (properties.id !== void 0) {
    element2.id = properties.id;
  }
  if (properties.styles !== void 0) {
    element2.style.cssText = properties.styles;
  }
  if (properties.attrs !== void 0) {
    attributes(element2, properties.attrs);
  }
  return element2;
}
function updateCSSText(element2, cssText) {
  var existingStyles = element2.style.cssText.split(";").reduce(function(styles, style) {
    var _a = style.split(":"), key = _a[0], value = _a[1];
    if (key && value) {
      styles[key.trim()] = value.trim();
    }
    return styles;
  }, {});
  var newStyles = cssText.split(";").reduce(function(styles, style) {
    var _a = style.split(":"), key = _a[0], value = _a[1];
    if (key && value) {
      styles[key.trim()] = value.trim();
    }
    return styles;
  }, {});
  var styleElement = document.createElement("div");
  Object.keys(__assign({}, existingStyles, newStyles)).forEach(function(key) {
    styleElement.style.setProperty(key, newStyles[key] || existingStyles[key]);
  });
  element2.style.cssText = styleElement.style.cssText;
}
function addClass(elements, classes) {
  var classList2 = getClassList(classes);
  var regExp2 = RegExp;
  for (var _i = 0, _a = elements; _i < _a.length; _i++) {
    var ele = _a[_i];
    for (var _b = 0, classList_1 = classList2; _b < classList_1.length; _b++) {
      var className = classList_1[_b];
      if (isObject(ele)) {
        var curClass = getValue("attributes.className", ele);
        if (isNullOrUndefined(curClass)) {
          setValue("attributes.className", className, ele);
        } else if (!new regExp2("\\b" + className + "\\b", "i").test(curClass)) {
          setValue("attributes.className", curClass + " " + className, ele);
        }
      } else {
        if (!ele.classList.contains(className)) {
          ele.classList.add(className);
        }
      }
    }
  }
  return elements;
}
function removeClass(elements, classes) {
  var classList2 = getClassList(classes);
  for (var _i = 0, _a = elements; _i < _a.length; _i++) {
    var ele = _a[_i];
    var flag = isObject(ele);
    var canRemove = flag ? getValue("attributes.className", ele) : ele.className !== "";
    if (canRemove) {
      for (var _b = 0, classList_2 = classList2; _b < classList_2.length; _b++) {
        var className = classList_2[_b];
        if (flag) {
          var classes_1 = getValue("attributes.className", ele);
          var classArr = classes_1.split(" ");
          var index = classArr.indexOf(className);
          if (index !== -1) {
            classArr.splice(index, 1);
          }
          setValue("attributes.className", classArr.join(" "), ele);
        } else {
          ele.classList.remove(className);
        }
      }
    }
  }
  return elements;
}
function getClassList(classes) {
  var classList2 = [];
  if (typeof classes === "string") {
    classList2.push(classes);
  } else {
    classList2 = classes;
  }
  return classList2;
}
function isVisible(element2) {
  var ele = element2;
  return ele.style.visibility === "" && ele.offsetWidth > 0;
}
function prepend(fromElements, toElement, isEval) {
  var docFrag = document.createDocumentFragment();
  for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {
    var ele = _a[_i];
    docFrag.appendChild(ele);
  }
  toElement.insertBefore(docFrag, toElement.firstElementChild);
  if (isEval) {
    executeScript(toElement);
  }
  return fromElements;
}
function append(fromElements, toElement, isEval) {
  var docFrag = document.createDocumentFragment();
  if (fromElements instanceof NodeList) {
    while (fromElements.length > 0) {
      docFrag.appendChild(fromElements[0]);
    }
  } else {
    for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {
      var ele = _a[_i];
      docFrag.appendChild(ele);
    }
  }
  toElement.appendChild(docFrag);
  if (isEval) {
    executeScript(toElement);
  }
  return fromElements;
}
function executeScript(ele) {
  var eleArray = ele.querySelectorAll("script");
  eleArray.forEach(function(element2) {
    var script = document.createElement("script");
    script.text = element2.innerHTML;
    document.head.appendChild(script);
    detach(script);
  });
}
function detach(element2) {
  var parentNode = element2.parentNode;
  if (parentNode) {
    return parentNode.removeChild(element2);
  }
}
function remove(element2) {
  var parentNode = element2.parentNode;
  EventHandler.clearEvents(element2);
  parentNode.removeChild(element2);
}
function attributes(element2, attributes2) {
  var keys2 = Object.keys(attributes2);
  var ele = element2;
  for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
    var key = keys_1[_i];
    if (isObject(ele)) {
      var iKey = key;
      if (key === "tabindex") {
        iKey = "tabIndex";
      }
      ele.attributes["" + iKey] = attributes2["" + key];
    } else {
      ele.setAttribute(key, attributes2["" + key]);
    }
  }
  return ele;
}
function select(selector, context, needsVDOM) {
  if (context === void 0) {
    context = document;
  }
  selector = querySelectId(selector);
  return context.querySelector(selector);
}
function selectAll(selector, context, needsVDOM) {
  if (context === void 0) {
    context = document;
  }
  selector = querySelectId(selector);
  var nodeList = context.querySelectorAll(selector);
  return nodeList;
}
function querySelectId(selector) {
  var charRegex = /(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;
  if (selector.match(/#[0-9]/g) || selector.match(charRegex)) {
    var idList = selector.split(",");
    for (var i = 0; i < idList.length; i++) {
      var list = idList[parseInt(i.toString(), 10)].split(" ");
      for (var j = 0; j < list.length; j++) {
        if (list[parseInt(j.toString(), 10)].indexOf("#") > -1) {
          if (!list[parseInt(j.toString(), 10)].match(/\[.*\]/)) {
            var splitId = list[parseInt(j.toString(), 10)].split("#");
            if (splitId[1].match(/^\d/) || splitId[1].match(charRegex)) {
              var setId = list[parseInt(j.toString(), 10)].split(".");
              setId[0] = setId[0].replace(/#/, "[id='") + "']";
              list[parseInt(j.toString(), 10)] = setId.join(".");
            }
          }
        }
      }
      idList[parseInt(i.toString(), 10)] = list.join(" ");
    }
    return idList.join(",");
  }
  return selector;
}
function closest(element2, selector) {
  var el = element2;
  if (typeof el.closest === "function") {
    return el.closest(selector);
  }
  while (el && el.nodeType === 1) {
    if (matches$1(el, selector)) {
      return el;
    }
    el = el.parentNode;
  }
  return null;
}
function setStyleAttribute(element2, attrs) {
  if (attrs !== void 0) {
    Object.keys(attrs).forEach(function(key) {
      element2.style["" + key] = attrs["" + key];
    });
  }
}
function classList(element2, addClasses, removeClasses) {
  addClass([element2], addClasses);
  removeClass([element2], removeClasses);
}
function matches$1(element2, selector) {
  var matches2 = element2.matches || element2.msMatchesSelector || element2.webkitMatchesSelector;
  if (matches2) {
    return matches2.call(element2, selector);
  } else {
    return [].indexOf.call(document.querySelectorAll(selector), element2) !== -1;
  }
}
var Observer = (
  /** @class */
  function() {
    function Observer2(context) {
      this.ranArray = [];
      this.boundedEvents = {};
      if (isNullOrUndefined(context)) {
        return;
      }
      this.context = context;
    }
    Observer2.prototype.on = function(property, handler, context, id) {
      if (isNullOrUndefined(handler)) {
        return;
      }
      var cntxt = context || this.context;
      if (this.notExist(property)) {
        this.boundedEvents["" + property] = [{ handler, context: cntxt, id }];
        return;
      }
      if (!isNullOrUndefined(id)) {
        if (this.ranArray.indexOf(id) === -1) {
          this.ranArray.push(id);
          this.boundedEvents["" + property].push({ handler, context: cntxt, id });
        }
      } else if (!this.isHandlerPresent(this.boundedEvents["" + property], handler)) {
        this.boundedEvents["" + property].push({ handler, context: cntxt });
      }
    };
    Observer2.prototype.off = function(property, handler, id) {
      if (this.notExist(property)) {
        return;
      }
      var curObject = getValue(property, this.boundedEvents);
      if (handler) {
        for (var i = 0; i < curObject.length; i++) {
          if (id) {
            if (curObject[parseInt(i.toString(), 10)].id === id) {
              curObject.splice(i, 1);
              var indexLocation = this.ranArray.indexOf(id);
              if (indexLocation !== -1) {
                this.ranArray.splice(indexLocation, 1);
              }
              break;
            }
          } else if (handler === curObject[parseInt(i.toString(), 10)].handler) {
            curObject.splice(i, 1);
            break;
          }
        }
      } else {
        delete this.boundedEvents["" + property];
      }
    };
    Observer2.prototype.notify = function(property, argument, successHandler, errorHandler) {
      if (this.notExist(property)) {
        if (successHandler) {
          successHandler.call(this, argument);
        }
        return;
      }
      if (argument) {
        argument.name = property;
      }
      var blazor = "Blazor";
      var curObject = getValue(property, this.boundedEvents).slice(0);
      if (window["" + blazor]) {
        return this.blazorCallback(curObject, argument, successHandler, errorHandler, 0);
      } else {
        for (var _i = 0, curObject_1 = curObject; _i < curObject_1.length; _i++) {
          var cur = curObject_1[_i];
          cur.handler.call(cur.context, argument);
        }
        if (successHandler) {
          successHandler.call(this, argument);
        }
      }
    };
    Observer2.prototype.blazorCallback = function(objs, argument, successHandler, errorHandler, index) {
      var _this = this;
      var isTrigger = index === objs.length - 1;
      if (index < objs.length) {
        var obj_1 = objs[parseInt(index.toString(), 10)];
        var promise = obj_1.handler.call(obj_1.context, argument);
        if (promise && typeof promise.then === "function") {
          if (!successHandler) {
            return promise;
          }
          promise.then(function(data) {
            data = typeof data === "string" && _this.isJson(data) ? JSON.parse(data, _this.dateReviver) : data;
            extend$1(argument, argument, data, true);
            if (successHandler && isTrigger) {
              successHandler.call(obj_1.context, argument);
            } else {
              return _this.blazorCallback(objs, argument, successHandler, errorHandler, index + 1);
            }
          }).catch(function(data) {
            if (errorHandler) {
              errorHandler.call(obj_1.context, typeof data === "string" && _this.isJson(data) ? JSON.parse(data, _this.dateReviver) : data);
            }
          });
        } else if (successHandler && isTrigger) {
          successHandler.call(obj_1.context, argument);
        } else {
          return this.blazorCallback(objs, argument, successHandler, errorHandler, index + 1);
        }
      }
    };
    Observer2.prototype.dateReviver = function(key, value) {
      var dPattern = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;
      if (isBlazor && typeof value === "string" && value.match(dPattern) !== null) {
        return new Date(value);
      }
      return value;
    };
    Observer2.prototype.isJson = function(value) {
      try {
        JSON.parse(value);
      } catch (e) {
        return false;
      }
      return true;
    };
    Observer2.prototype.destroy = function() {
      this.boundedEvents = this.context = void 0;
    };
    Observer2.prototype.offIntlEvents = function() {
      var eventsArr = this.boundedEvents["notifyExternalChange"];
      if (eventsArr) {
        for (var i = 0; i < eventsArr.length; i++) {
          var curContext = eventsArr[parseInt(i.toString(), 10)].context;
          if (curContext && curContext.detectFunction && curContext.randomId && curContext.isReactMock) {
            this.off("notifyExternalChange", curContext.detectFunction, curContext.randomId);
            i--;
          }
        }
        if (!this.boundedEvents["notifyExternalChange"].length) {
          delete this.boundedEvents["notifyExternalChange"];
        }
      }
    };
    Observer2.prototype.notExist = function(prop) {
      return Object.prototype.hasOwnProperty.call(this.boundedEvents, prop) === false || this.boundedEvents["" + prop].length <= 0;
    };
    Observer2.prototype.isHandlerPresent = function(boundedEvents, handler) {
      for (var _i = 0, boundedEvents_1 = boundedEvents; _i < boundedEvents_1.length; _i++) {
        var cur = boundedEvents_1[_i];
        if (cur.handler === handler) {
          return true;
        }
      }
      return false;
    };
    return Observer2;
  }()
);
var isColEName$1 = new RegExp("]");
var Base = (
  /** @class */
  function() {
    function Base2(options, element2) {
      this.isRendered = false;
      this.isComplexArraySetter = false;
      this.isServerRendered = false;
      this.allowServerDataBinding = true;
      this.isProtectedOnChange = true;
      this.properties = {};
      this.changedProperties = {};
      this.oldProperties = {};
      this.bulkChanges = {};
      this.refreshing = false;
      this.ignoreCollectionWatch = false;
      this.finalUpdate = function() {
      };
      this.childChangedProperties = {};
      this.modelObserver = new Observer(this);
      if (!isUndefined(element2)) {
        if ("string" === typeof element2) {
          this.element = document.querySelector(element2);
        } else {
          this.element = element2;
        }
        if (!isNullOrUndefined(this.element)) {
          this.isProtectedOnChange = false;
          this.addInstance();
        }
      }
      if (!isUndefined(options)) {
        this.setProperties(options, true);
      }
      this.isDestroyed = false;
    }
    Base2.prototype.setProperties = function(prop, muteOnChange) {
      var prevDetection = this.isProtectedOnChange;
      this.isProtectedOnChange = !!muteOnChange;
      merge(this, prop);
      if (muteOnChange !== true) {
        merge(this.changedProperties, prop);
        this.dataBind();
      }
      this.finalUpdate();
      this.changedProperties = {};
      this.oldProperties = {};
      this.isProtectedOnChange = prevDetection;
    };
    Base2.callChildDataBind = function(obj, parent) {
      var keys2 = Object.keys(obj);
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (parent["" + key] instanceof Array) {
          for (var _a = 0, _b = parent["" + key]; _a < _b.length; _a++) {
            var obj_1 = _b[_a];
            if (obj_1.dataBind !== void 0) {
              obj_1.dataBind();
            }
          }
        } else {
          parent["" + key].dataBind();
        }
      }
    };
    Base2.prototype.clearChanges = function() {
      this.finalUpdate();
      this.changedProperties = {};
      this.oldProperties = {};
      this.childChangedProperties = {};
    };
    Base2.prototype.dataBind = function() {
      Base2.callChildDataBind(this.childChangedProperties, this);
      if (Object.getOwnPropertyNames(this.changedProperties).length) {
        var prevDetection = this.isProtectedOnChange;
        var newChanges = this.changedProperties;
        var oldChanges = this.oldProperties;
        this.clearChanges();
        this.isProtectedOnChange = true;
        this.onPropertyChanged(newChanges, oldChanges);
        this.isProtectedOnChange = prevDetection;
      }
    };
    Base2.prototype.serverDataBind = function(newChanges) {
      {
        return;
      }
    };
    Base2.prototype.saveChanges = function(key, newValue, oldValue) {
      if (this.isProtectedOnChange) {
        return;
      }
      this.oldProperties["" + key] = oldValue;
      this.changedProperties["" + key] = newValue;
      this.finalUpdate();
      this.finalUpdate = setImmediate(this.dataBind.bind(this));
    };
    Base2.prototype.addEventListener = function(eventName, handler) {
      this.modelObserver.on(eventName, handler);
    };
    Base2.prototype.removeEventListener = function(eventName, handler) {
      this.modelObserver.off(eventName, handler);
    };
    Base2.prototype.trigger = function(eventName, eventProp, successHandler, errorHandler) {
      var _this = this;
      if (this.isDestroyed !== true) {
        var prevDetection = this.isProtectedOnChange;
        this.isProtectedOnChange = false;
        var data = this.modelObserver.notify(eventName, eventProp, successHandler, errorHandler);
        if (isColEName$1.test(eventName)) {
          var handler = getValue(eventName, this);
          if (handler) {
            var blazor = "Blazor";
            if (window["" + blazor]) {
              var promise = handler.call(this, eventProp);
              if (promise && typeof promise.then === "function") {
                if (!successHandler) {
                  data = promise;
                } else {
                  promise.then(function(data2) {
                    if (successHandler) {
                      data2 = typeof data2 === "string" && _this.modelObserver.isJson(data2) ? JSON.parse(data2) : data2;
                      successHandler.call(_this, data2);
                    }
                  }).catch(function(data2) {
                    if (errorHandler) {
                      data2 = typeof data2 === "string" && _this.modelObserver.isJson(data2) ? JSON.parse(data2) : data2;
                      errorHandler.call(_this, data2);
                    }
                  });
                }
              } else if (successHandler) {
                successHandler.call(this, eventProp);
              }
            } else {
              handler.call(this, eventProp);
              if (successHandler) {
                successHandler.call(this, eventProp);
              }
            }
          } else if (successHandler) {
            successHandler.call(this, eventProp);
          }
        }
        this.isProtectedOnChange = prevDetection;
        return data;
      }
    };
    Base2.prototype.addInstance = function() {
      var moduleClass = "e-" + this.getModuleName().toLowerCase();
      addClass([this.element], ["e-lib", moduleClass]);
      if (!isNullOrUndefined(this.element.ej2_instances)) {
        this.element.ej2_instances.push(this);
      } else {
        setValue("ej2_instances", [this], this.element);
      }
    };
    Base2.prototype.destroy = function() {
      var _this = this;
      this.element.ej2_instances = this.element.ej2_instances ? this.element.ej2_instances.filter(function(i) {
        return i !== _this;
      }) : [];
      removeClass([this.element], ["e-" + this.getModuleName()]);
      if (this.element.ej2_instances.length === 0) {
        removeClass([this.element], ["e-lib"]);
      }
      this.clearChanges();
      this.modelObserver.destroy();
      this.isDestroyed = true;
    };
    return Base2;
  }()
);
function getObject$1(instance, curKey, defaultValue, type) {
  if (!Object.prototype.hasOwnProperty.call(instance.properties, curKey) || !(instance.properties["" + curKey] instanceof type)) {
    instance.properties["" + curKey] = createInstance(type, [instance, curKey, defaultValue]);
  }
  return instance.properties["" + curKey];
}
function getObjectArray(instance, curKey, defaultValue, type, isSetter, isFactory) {
  var result = [];
  var len = defaultValue ? defaultValue.length : 0;
  for (var i = 0; i < len; i++) {
    var curType = type;
    if (isSetter) {
      var inst = createInstance(curType, [instance, curKey, {}, true]);
      inst.setProperties(defaultValue[parseInt(i.toString(), 10)], true);
      result.push(inst);
    } else {
      result.push(createInstance(curType, [instance, curKey, defaultValue[parseInt(i.toString(), 10)], false]));
    }
  }
  return result;
}
function propertyGetter(defaultValue, curKey) {
  return function() {
    if (!Object.prototype.hasOwnProperty.call(this.properties, curKey)) {
      this.properties["" + curKey] = defaultValue;
    }
    return this.properties["" + curKey];
  };
}
function propertySetter(defaultValue, curKey) {
  return function(newValue) {
    if (this.properties["" + curKey] !== newValue) {
      var oldVal = Object.prototype.hasOwnProperty.call(this.properties, curKey) ? this.properties["" + curKey] : defaultValue;
      this.saveChanges(curKey, newValue, oldVal);
      this.properties["" + curKey] = newValue;
    }
  };
}
function complexGetter(defaultValue, curKey, type) {
  return function() {
    return getObject$1(this, curKey, defaultValue, type);
  };
}
function complexSetter(defaultValue, curKey, type) {
  return function(newValue) {
    getObject$1(this, curKey, defaultValue, type).setProperties(newValue);
  };
}
function complexArrayGetter(defaultValue, curKey, type) {
  return function() {
    var _this = this;
    if (!Object.prototype.hasOwnProperty.call(this.properties, curKey)) {
      var defCollection = getObjectArray(this, curKey, defaultValue, type, false);
      this.properties["" + curKey] = defCollection;
    }
    var ignore = this.controlParent !== void 0 && this.controlParent.ignoreCollectionWatch || this.ignoreCollectionWatch;
    if (!Object.prototype.hasOwnProperty.call(this.properties["" + curKey], "push") && !ignore) {
      ["push", "pop"].forEach(function(extendFunc) {
        var descriptor = {
          value: complexArrayDefinedCallback(extendFunc, curKey, type, _this.properties["" + curKey]).bind(_this),
          configurable: true
        };
        Object.defineProperty(_this.properties["" + curKey], extendFunc, descriptor);
      });
    }
    if (!Object.prototype.hasOwnProperty.call(this.properties["" + curKey], "isComplexArray")) {
      Object.defineProperty(this.properties["" + curKey], "isComplexArray", { value: true });
    }
    return this.properties["" + curKey];
  };
}
function complexArraySetter(defaultValue, curKey, type) {
  return function(newValue) {
    this.isComplexArraySetter = true;
    var oldValueCollection = getObjectArray(this, curKey, defaultValue, type, false);
    var newValCollection = getObjectArray(this, curKey, newValue, type, true);
    this.isComplexArraySetter = false;
    this.saveChanges(curKey, newValCollection, oldValueCollection);
    this.properties["" + curKey] = newValCollection;
  };
}
function complexArrayDefinedCallback(dFunc, curKey, type, prop) {
  return function() {
    var newValue = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      newValue[_i] = arguments[_i];
    }
    var keyString = this.propName ? this.getParentKey() + "." + curKey + "-" : curKey + "-";
    switch (dFunc) {
      case "push":
        for (var i = 0; i < newValue.length; i++) {
          var newValueParse = newValue[parseInt(i.toString(), 10)];
          Array.prototype["" + dFunc].apply(prop, [newValueParse]);
          var model = getArrayModel(keyString + (prop.length - 1), newValueParse, !this.controlParent, dFunc);
          this.serverDataBind(model, newValue[parseInt(i.toString(), 10)], false, dFunc);
        }
        break;
      case "pop": {
        Array.prototype["" + dFunc].apply(prop);
        var model = getArrayModel(keyString + prop.length, null, !this.controlParent, dFunc);
        this.serverDataBind(model, { ejsAction: "pop" }, false, dFunc);
        break;
      }
    }
    return prop;
  };
}
function getArrayModel(keyString, value, isControlParent, arrayFunction) {
  var modelObject = keyString;
  if (isControlParent) {
    modelObject = {};
    modelObject["" + keyString] = value;
    if (value && typeof value === "object") {
      var action = "ejsAction";
      modelObject["" + keyString]["" + action] = arrayFunction;
    }
  }
  return modelObject;
}
function Property(defaultValue) {
  return function(target, key) {
    var propertyDescriptor = {
      set: propertySetter(defaultValue, key),
      get: propertyGetter(defaultValue, key),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, propertyDescriptor);
    addPropertyCollection(target, key, "prop", defaultValue);
  };
}
function Complex(defaultValue, type) {
  return function(target, key) {
    var propertyDescriptor = {
      set: complexSetter(defaultValue, key, type),
      get: complexGetter(defaultValue, key, type),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, propertyDescriptor);
    addPropertyCollection(target, key, "complexProp", defaultValue, type);
  };
}
function Collection(defaultValue, type) {
  return function(target, key) {
    var propertyDescriptor = {
      set: complexArraySetter(defaultValue, key, type),
      get: complexArrayGetter(defaultValue, key, type),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, propertyDescriptor);
    addPropertyCollection(target, key, "colProp", defaultValue, type);
  };
}
function Event() {
  return function(target, key) {
    var eventDescriptor = {
      set: function(newValue) {
        var oldValue = this.properties["" + key];
        if (oldValue !== newValue) {
          var finalContext = getParentContext(this, key);
          if (isUndefined(oldValue) === false) {
            finalContext.context.removeEventListener(finalContext.prefix, oldValue);
          }
          finalContext.context.addEventListener(finalContext.prefix, newValue);
          this.properties["" + key] = newValue;
        }
      },
      get: propertyGetter(void 0, key),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, eventDescriptor);
    addPropertyCollection(target, key, "event");
  };
}
function NotifyPropertyChanges(classConstructor) {
}
function addPropertyCollection(target, key, propertyType, defaultValue, type) {
  if (isUndefined(target.propList)) {
    target.propList = {
      props: [],
      complexProps: [],
      colProps: [],
      events: [],
      propNames: [],
      complexPropNames: [],
      colPropNames: [],
      eventNames: []
    };
  }
  target.propList[propertyType + "s"].push({
    propertyName: key,
    defaultValue,
    type
  });
  target.propList[propertyType + "Names"].push(key);
}
function getParentContext(context, prefix) {
  if (Object.prototype.hasOwnProperty.call(context, "parentObj") === false) {
    return { context, prefix };
  } else {
    var curText = getValue("propName", context);
    if (curText) {
      prefix = curText + "-" + prefix;
    }
    return getParentContext(getValue("parentObj", context), prefix);
  }
}
var __extends$H = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$k = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Animation$1 = (
  /** @class */
  function(_super) {
    __extends$H(Animation2, _super);
    function Animation2(options) {
      var _this = _super.call(this, options, void 0) || this;
      _this.easing = {
        ease: "cubic-bezier(0.250, 0.100, 0.250, 1.000)",
        linear: "cubic-bezier(0.250, 0.250, 0.750, 0.750)",
        easeIn: "cubic-bezier(0.420, 0.000, 1.000, 1.000)",
        easeOut: "cubic-bezier(0.000, 0.000, 0.580, 1.000)",
        easeInOut: "cubic-bezier(0.420, 0.000, 0.580, 1.000)",
        elasticInOut: "cubic-bezier(0.5,-0.58,0.38,1.81)",
        elasticIn: "cubic-bezier(0.17,0.67,0.59,1.81)",
        elasticOut: "cubic-bezier(0.7,-0.75,0.99,1.01)"
      };
      return _this;
    }
    Animation_1 = Animation2;
    Animation2.prototype.animate = function(element2, options) {
      options = !options ? {} : options;
      var model = this.getModel(options);
      if (typeof element2 === "string") {
        var elements = Array.prototype.slice.call(selectAll(element2, document));
        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
          var element_1 = elements_1[_i];
          model.element = element_1;
          Animation_1.delayAnimation(model);
        }
      } else {
        model.element = element2;
        Animation_1.delayAnimation(model);
      }
    };
    Animation2.stop = function(element2, model) {
      element2.style.animation = "";
      element2.removeAttribute("e-animate");
      var animationId = element2.getAttribute("e-animation-id");
      if (animationId) {
        var frameId = parseInt(animationId, 10);
        cancelAnimationFrame(frameId);
        element2.removeAttribute("e-animation-id");
      }
      if (model && model.end) {
        model.end.call(this, model);
      }
    };
    Animation2.delayAnimation = function(model) {
      if (animationMode === "Disable" || animationMode === GlobalAnimationMode.Disable) {
        if (model.begin) {
          model.begin.call(this, model);
        }
        if (model.end) {
          model.end.call(this, model);
        }
      } else {
        if (model.delay) {
          setTimeout(function() {
            Animation_1.applyAnimation(model);
          }, model.delay);
        } else {
          Animation_1.applyAnimation(model);
        }
      }
    };
    Animation2.applyAnimation = function(model) {
      var _this = this;
      model.timeStamp = 0;
      var step = 0;
      var timerId = 0;
      var prevTimeStamp = 0;
      var duration = model.duration;
      model.element.setAttribute("e-animate", "true");
      var startAnimation = function(timeStamp) {
        try {
          if (timeStamp) {
            prevTimeStamp = prevTimeStamp === 0 ? timeStamp : prevTimeStamp;
            model.timeStamp = timeStamp + model.timeStamp - prevTimeStamp;
            prevTimeStamp = timeStamp;
            if (!step && model.begin) {
              model.begin.call(_this, model);
            }
            step = step + 1;
            var avg = model.timeStamp / step;
            if (model.timeStamp < duration && model.timeStamp + avg < duration && model.element.getAttribute("e-animate")) {
              model.element.style.animation = model.name + " " + model.duration + "ms " + model.timingFunction;
              if (model.progress) {
                model.progress.call(_this, model);
              }
              requestAnimationFrame(startAnimation);
            } else {
              cancelAnimationFrame(timerId);
              model.element.removeAttribute("e-animation-id");
              model.element.removeAttribute("e-animate");
              model.element.style.animation = "";
              if (model.end) {
                model.end.call(_this, model);
              }
            }
          } else {
            timerId = requestAnimationFrame(startAnimation);
            model.element.setAttribute("e-animation-id", timerId.toString());
          }
        } catch (e) {
          cancelAnimationFrame(timerId);
          model.element.removeAttribute("e-animation-id");
          if (model.fail) {
            model.fail.call(_this, e);
          }
        }
      };
      startAnimation();
    };
    Animation2.prototype.getModel = function(options) {
      return {
        name: options.name || this.name,
        delay: options.delay || this.delay,
        duration: options.duration !== void 0 ? options.duration : this.duration,
        begin: options.begin || this.begin,
        end: options.end || this.end,
        fail: options.fail || this.fail,
        progress: options.progress || this.progress,
        timingFunction: this.easing[options.timingFunction] ? this.easing[options.timingFunction] : options.timingFunction || this.easing[this.timingFunction]
      };
    };
    Animation2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Animation2.prototype.getModuleName = function() {
      return "animation";
    };
    Animation2.prototype.destroy = function() {
    };
    var Animation_1;
    __decorate$k([
      Property("FadeIn")
    ], Animation2.prototype, "name", void 0);
    __decorate$k([
      Property(400)
    ], Animation2.prototype, "duration", void 0);
    __decorate$k([
      Property("ease")
    ], Animation2.prototype, "timingFunction", void 0);
    __decorate$k([
      Property(0)
    ], Animation2.prototype, "delay", void 0);
    __decorate$k([
      Event()
    ], Animation2.prototype, "progress", void 0);
    __decorate$k([
      Event()
    ], Animation2.prototype, "begin", void 0);
    __decorate$k([
      Event()
    ], Animation2.prototype, "end", void 0);
    __decorate$k([
      Event()
    ], Animation2.prototype, "fail", void 0);
    Animation2 = Animation_1 = __decorate$k([
      NotifyPropertyChanges
    ], Animation2);
    return Animation2;
  }(Base)
);
function rippleEffect(element2, rippleOptions, done) {
  var rippleModel = getRippleModel(rippleOptions);
  if (rippleModel.rippleFlag === false || rippleModel.rippleFlag === void 0 && true) {
    return function() {
    };
  }
  element2.setAttribute("data-ripple", "true");
  EventHandler.add(element2, "mousedown", rippleHandler, { parent: element2, rippleOptions: rippleModel });
  EventHandler.add(element2, "mouseup", rippleUpHandler, { parent: element2, rippleOptions: rippleModel, done });
  EventHandler.add(element2, "mouseleave", rippleLeaveHandler, { parent: element2, rippleOptions: rippleModel });
  if (Browser.isPointer) {
    EventHandler.add(element2, "transitionend", rippleLeaveHandler, { parent: element2, rippleOptions: rippleModel });
  }
  return function() {
    element2.removeAttribute("data-ripple");
    EventHandler.remove(element2, "mousedown", rippleHandler);
    EventHandler.remove(element2, "mouseup", rippleUpHandler);
    EventHandler.remove(element2, "mouseleave", rippleLeaveHandler);
    EventHandler.remove(element2, "transitionend", rippleLeaveHandler);
  };
}
function getRippleModel(rippleOptions) {
  var rippleModel = {
    selector: rippleOptions && rippleOptions.selector ? rippleOptions.selector : null,
    ignore: rippleOptions && rippleOptions.ignore ? rippleOptions.ignore : null,
    rippleFlag: rippleOptions && rippleOptions.rippleFlag,
    isCenterRipple: rippleOptions && rippleOptions.isCenterRipple,
    duration: rippleOptions && rippleOptions.duration ? rippleOptions.duration : 350
  };
  return rippleModel;
}
function rippleHandler(e) {
  var target = e.target;
  var selector = this.rippleOptions.selector;
  var element2 = selector ? closest(target, selector) : target;
  if (!element2 || this.rippleOptions && closest(target, this.rippleOptions.ignore)) {
    return;
  }
  var offset = element2.getBoundingClientRect();
  var offsetX = e.pageX - document.body.scrollLeft;
  var offsetY = e.pageY - (!document.body.scrollTop && document.documentElement ? document.documentElement.scrollTop : document.body.scrollTop);
  var pageX = Math.max(Math.abs(offsetX - offset.left), Math.abs(offsetX - offset.right));
  var pageY = Math.max(Math.abs(offsetY - offset.top), Math.abs(offsetY - offset.bottom));
  var radius = Math.sqrt(pageX * pageX + pageY * pageY);
  var diameter = radius * 2 + "px";
  var x = offsetX - offset.left - radius;
  var y = offsetY - offset.top - radius;
  if (this.rippleOptions && this.rippleOptions.isCenterRipple) {
    x = 0;
    y = 0;
    diameter = "100%";
  }
  element2.classList.add("e-ripple");
  var duration = this.rippleOptions.duration.toString();
  var styles = "width: " + diameter + ";height: " + diameter + ";left: " + x + "px;top: " + y + "px;transition-duration: " + duration + "ms;";
  var rippleElement = createElement("div", { className: "e-ripple-element", styles });
  element2.appendChild(rippleElement);
  window.getComputedStyle(rippleElement).getPropertyValue("opacity");
  rippleElement.style.transform = "scale(1)";
  if (element2 !== this.parent) {
    EventHandler.add(element2, "mouseleave", rippleLeaveHandler, { parent: this.parent, rippleOptions: this.rippleOptions });
  }
}
function rippleUpHandler(e) {
  removeRipple(e, this);
}
function rippleLeaveHandler(e) {
  removeRipple(e, this);
}
function removeRipple(e, eventArgs) {
  var duration = eventArgs.rippleOptions.duration;
  var target = e.target;
  var selector = eventArgs.rippleOptions.selector;
  var element2 = selector ? closest(target, selector) : target;
  if (!element2 || element2 && element2.className.indexOf("e-ripple") === -1) {
    return;
  }
  var rippleElements = selectAll(".e-ripple-element", element2);
  var rippleElement = rippleElements[rippleElements.length - 1];
  if (rippleElement) {
    rippleElement.style.opacity = "0.5";
  }
  if (eventArgs.parent !== element2) {
    EventHandler.remove(element2, "mouseleave", rippleLeaveHandler);
  }
  setTimeout(function() {
    if (rippleElement && rippleElement.parentNode) {
      rippleElement.parentNode.removeChild(rippleElement);
    }
    if (!element2.getElementsByClassName("e-ripple-element").length) {
      element2.classList.remove("e-ripple");
    }
    if (eventArgs.done) {
      eventArgs.done(e);
    }
  }, duration);
}
var animationMode;
var GlobalAnimationMode;
(function(GlobalAnimationMode2) {
  GlobalAnimationMode2["Default"] = "Default";
  GlobalAnimationMode2["Enable"] = "Enable";
  GlobalAnimationMode2["Disable"] = "Disable";
})(GlobalAnimationMode || (GlobalAnimationMode = {}));
var MODULE_SUFFIX = "Module";
var ModuleLoader = (
  /** @class */
  function() {
    function ModuleLoader2(parent) {
      this.loadedModules = [];
      this.parent = parent;
    }
    ModuleLoader2.prototype.inject = function(requiredModules, moduleList) {
      var reqLength = requiredModules.length;
      if (reqLength === 0) {
        this.clean();
        return;
      }
      if (this.loadedModules.length) {
        this.clearUnusedModule(requiredModules);
      }
      for (var i = 0; i < reqLength; i++) {
        var modl = requiredModules[parseInt(i.toString(), 10)];
        for (var _i = 0, moduleList_1 = moduleList; _i < moduleList_1.length; _i++) {
          var module = moduleList_1[_i];
          var modName = modl.member;
          if (module && module.prototype.getModuleName() === modl.member && !this.isModuleLoaded(modName)) {
            var moduleObject = createInstance(module, modl.args);
            var memberName = this.getMemberName(modName);
            if (modl.isProperty) {
              setValue(memberName, module, this.parent);
            } else {
              setValue(memberName, moduleObject, this.parent);
            }
            var loadedModule = modl;
            loadedModule.member = memberName;
            this.loadedModules.push(loadedModule);
          }
        }
      }
    };
    ModuleLoader2.prototype.clean = function() {
      for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {
        var modules = _a[_i];
        if (!modules.isProperty) {
          getValue(modules.member, this.parent).destroy();
        }
      }
      this.loadedModules = [];
    };
    ModuleLoader2.prototype.getNonInjectedModules = function(requiredModules) {
      var _this = this;
      return requiredModules.filter(function(module) {
        return !_this.isModuleLoaded(module.member);
      });
    };
    ModuleLoader2.prototype.clearUnusedModule = function(moduleList) {
      var _this = this;
      var usedModules = moduleList.map(function(arg) {
        return _this.getMemberName(arg.member);
      });
      var removableModule = this.loadedModules.filter(function(module) {
        return usedModules.indexOf(module.member) === -1;
      });
      for (var _i = 0, removableModule_1 = removableModule; _i < removableModule_1.length; _i++) {
        var mod = removableModule_1[_i];
        if (!mod.isProperty) {
          getValue(mod.member, this.parent).destroy();
        }
        this.loadedModules.splice(this.loadedModules.indexOf(mod), 1);
        deleteObject(this.parent, mod.member);
      }
    };
    ModuleLoader2.prototype.getMemberName = function(name) {
      return name[0].toLowerCase() + name.substring(1) + MODULE_SUFFIX;
    };
    ModuleLoader2.prototype.isModuleLoaded = function(modName) {
      for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {
        var mod = _a[_i];
        if (mod.member === this.getMemberName(modName)) {
          return true;
        }
      }
      return false;
    };
    return ModuleLoader2;
  }()
);
var ChildProperty = (
  /** @class */
  function() {
    function ChildProperty2(parent, propName, defaultValue, isArray) {
      this.isComplexArraySetter = false;
      this.properties = {};
      this.changedProperties = {};
      this.childChangedProperties = {};
      this.oldProperties = {};
      this.finalUpdate = function() {
      };
      this.callChildDataBind = getValue("callChildDataBind", Base);
      this.parentObj = parent;
      this.controlParent = this.parentObj.controlParent || this.parentObj;
      this.propName = propName;
      this.isParentArray = isArray;
      this.setProperties(defaultValue, true);
    }
    ChildProperty2.prototype.updateChange = function(val, propName) {
      if (val === true) {
        this.parentObj.childChangedProperties["" + propName] = val;
      } else {
        delete this.parentObj.childChangedProperties["" + propName];
      }
      if (this.parentObj.updateChange) {
        this.parentObj.updateChange(val, this.parentObj.propName);
      }
    };
    ChildProperty2.prototype.updateTimeOut = function() {
      if (this.parentObj.updateTimeOut) {
        this.parentObj.finalUpdate();
        this.parentObj.updateTimeOut();
      } else {
        var changeTime_1 = setTimeout(this.parentObj.dataBind.bind(this.parentObj));
        var clearUpdate = function() {
          clearTimeout(changeTime_1);
        };
        this.finalUpdate = clearUpdate;
      }
    };
    ChildProperty2.prototype.clearChanges = function() {
      this.finalUpdate();
      this.updateChange(false, this.propName);
      this.oldProperties = {};
      this.changedProperties = {};
    };
    ChildProperty2.prototype.setProperties = function(prop, muteOnChange) {
      if (muteOnChange === true) {
        merge(this, prop);
        this.updateChange(false, this.propName);
        this.clearChanges();
      } else {
        merge(this, prop);
      }
    };
    ChildProperty2.prototype.dataBind = function() {
      this.callChildDataBind(this.childChangedProperties, this);
      if (this.isParentArray) {
        var curIndex = this.parentObj[this.propName].indexOf(this);
        if (Object.keys(this.changedProperties).length) {
          setValue(this.propName + "." + curIndex, this.changedProperties, this.parentObj.changedProperties);
          setValue(this.propName + "." + curIndex, this.oldProperties, this.parentObj.oldProperties);
        }
      } else {
        this.parentObj.changedProperties[this.propName] = this.changedProperties;
        this.parentObj.oldProperties[this.propName] = this.oldProperties;
      }
      this.clearChanges();
    };
    ChildProperty2.prototype.saveChanges = function(key, newValue, oldValue, restrictServerDataBind) {
      if (this.controlParent.isProtectedOnChange) {
        return;
      }
      if (!restrictServerDataBind) {
        this.serverDataBind(key, newValue, true);
      }
      this.oldProperties["" + key] = oldValue;
      this.changedProperties["" + key] = newValue;
      this.updateChange(true, this.propName);
      this.finalUpdate();
      this.updateTimeOut();
    };
    ChildProperty2.prototype.serverDataBind = function(key, value, isSaveChanges, action) {
    };
    ChildProperty2.prototype.getParentKey = function(isSaveChanges) {
      var index = "";
      var propName = this.propName;
      if (this.isParentArray) {
        index = this.parentObj[this.propName].indexOf(this);
        var valueLength = this.parentObj[this.propName].length;
        valueLength = isSaveChanges ? valueLength : valueLength > 0 ? valueLength - 1 : 0;
        index = index !== -1 ? "-" + index : "-" + valueLength;
        propName = propName + index;
      }
      if (this.controlParent !== this.parentObj) {
        propName = this.parentObj.getParentKey() + "." + this.propName + index;
      }
      return propName;
    };
    return ChildProperty2;
  }()
);
var HijriParser;
(function(HijriParser2) {
  var dateCorrection = [
    28607,
    28636,
    28665,
    28695,
    28724,
    28754,
    28783,
    28813,
    28843,
    28872,
    28901,
    28931,
    28960,
    28990,
    29019,
    29049,
    29078,
    29108,
    29137,
    29167,
    29196,
    29226,
    29255,
    29285,
    29315,
    29345,
    29375,
    29404,
    29434,
    29463,
    29492,
    29522,
    29551,
    29580,
    29610,
    29640,
    29669,
    29699,
    29729,
    29759,
    29788,
    29818,
    29847,
    29876,
    29906,
    29935,
    29964,
    29994,
    30023,
    30053,
    30082,
    30112,
    30141,
    30171,
    30200,
    30230,
    30259,
    30289,
    30318,
    30348,
    30378,
    30408,
    30437,
    30467,
    30496,
    30526,
    30555,
    30585,
    30614,
    30644,
    30673,
    30703,
    30732,
    30762,
    30791,
    30821,
    30850,
    30880,
    30909,
    30939,
    30968,
    30998,
    31027,
    31057,
    31086,
    31116,
    31145,
    31175,
    31204,
    31234,
    31263,
    31293,
    31322,
    31352,
    31381,
    31411,
    31441,
    31471,
    31500,
    31530,
    31559,
    31589,
    31618,
    31648,
    31676,
    31706,
    31736,
    31766,
    31795,
    31825,
    31854,
    31884,
    31913,
    31943,
    31972,
    32002,
    32031,
    32061,
    32090,
    32120,
    32150,
    32180,
    32209,
    32239,
    32268,
    32298,
    32327,
    32357,
    32386,
    32416,
    32445,
    32475,
    32504,
    32534,
    32563,
    32593,
    32622,
    32652,
    32681,
    32711,
    32740,
    32770,
    32799,
    32829,
    32858,
    32888,
    32917,
    32947,
    32976,
    33006,
    33035,
    33065,
    33094,
    33124,
    33153,
    33183,
    33213,
    33243,
    33272,
    33302,
    33331,
    33361,
    33390,
    33420,
    33450,
    33479,
    33509,
    33539,
    33568,
    33598,
    33627,
    33657,
    33686,
    33716,
    33745,
    33775,
    33804,
    33834,
    33863,
    33893,
    33922,
    33952,
    33981,
    34011,
    34040,
    34069,
    34099,
    34128,
    34158,
    34187,
    34217,
    34247,
    34277,
    34306,
    34336,
    34365,
    34395,
    34424,
    34454,
    34483,
    34512,
    34542,
    34571,
    34601,
    34631,
    34660,
    34690,
    34719,
    34749,
    34778,
    34808,
    34837,
    34867,
    34896,
    34926,
    34955,
    34985,
    35015,
    35044,
    35074,
    35103,
    35133,
    35162,
    35192,
    35222,
    35251,
    35280,
    35310,
    35340,
    35370,
    35399,
    35429,
    35458,
    35488,
    35517,
    35547,
    35576,
    35605,
    35635,
    35665,
    35694,
    35723,
    35753,
    35782,
    35811,
    35841,
    35871,
    35901,
    35930,
    35960,
    35989,
    36019,
    36048,
    36078,
    36107,
    36136,
    36166,
    36195,
    36225,
    36254,
    36284,
    36314,
    36343,
    36373,
    36403,
    36433,
    36462,
    36492,
    36521,
    36551,
    36580,
    36610,
    36639,
    36669,
    36698,
    36728,
    36757,
    36786,
    36816,
    36845,
    36875,
    36904,
    36934,
    36963,
    36993,
    37022,
    37052,
    37081,
    37111,
    37141,
    37170,
    37200,
    37229,
    37259,
    37288,
    37318,
    37347,
    37377,
    37406,
    37436,
    37465,
    37495,
    37524,
    37554,
    37584,
    37613,
    37643,
    37672,
    37701,
    37731,
    37760,
    37790,
    37819,
    37849,
    37878,
    37908,
    37938,
    37967,
    37997,
    38027,
    38056,
    38085,
    38115,
    38144,
    38174,
    38203,
    38233,
    38262,
    38292,
    38322,
    38351,
    38381,
    38410,
    38440,
    38469,
    38499,
    38528,
    38558,
    38587,
    38617,
    38646,
    38676,
    38705,
    38735,
    38764,
    38794,
    38823,
    38853,
    38882,
    38912,
    38941,
    38971,
    39001,
    39030,
    39059,
    39089,
    39118,
    39148,
    39178,
    39208,
    39237,
    39267,
    39297,
    39326,
    39355,
    39385,
    39414,
    39444,
    39473,
    39503,
    39532,
    39562,
    39592,
    39621,
    39650,
    39680,
    39709,
    39739,
    39768,
    39798,
    39827,
    39857,
    39886,
    39916,
    39946,
    39975,
    40005,
    40035,
    40064,
    40094,
    40123,
    40153,
    40182,
    40212,
    40241,
    40271,
    40300,
    40330,
    40359,
    40389,
    40418,
    40448,
    40477,
    40507,
    40536,
    40566,
    40595,
    40625,
    40655,
    40685,
    40714,
    40744,
    40773,
    40803,
    40832,
    40862,
    40892,
    40921,
    40951,
    40980,
    41009,
    41039,
    41068,
    41098,
    41127,
    41157,
    41186,
    41216,
    41245,
    41275,
    41304,
    41334,
    41364,
    41393,
    41422,
    41452,
    41481,
    41511,
    41540,
    41570,
    41599,
    41629,
    41658,
    41688,
    41718,
    41748,
    41777,
    41807,
    41836,
    41865,
    41894,
    41924,
    41953,
    41983,
    42012,
    42042,
    42072,
    42102,
    42131,
    42161,
    42190,
    42220,
    42249,
    42279,
    42308,
    42337,
    42367,
    42397,
    42426,
    42456,
    42485,
    42515,
    42545,
    42574,
    42604,
    42633,
    42662,
    42692,
    42721,
    42751,
    42780,
    42810,
    42839,
    42869,
    42899,
    42929,
    42958,
    42988,
    43017,
    43046,
    43076,
    43105,
    43135,
    43164,
    43194,
    43223,
    43253,
    43283,
    43312,
    43342,
    43371,
    43401,
    43430,
    43460,
    43489,
    43519,
    43548,
    43578,
    43607,
    43637,
    43666,
    43696,
    43726,
    43755,
    43785,
    43814,
    43844,
    43873,
    43903,
    43932,
    43962,
    43991,
    44021,
    44050,
    44080,
    44109,
    44139,
    44169,
    44198,
    44228,
    44258,
    44287,
    44317,
    44346,
    44375,
    44405,
    44434,
    44464,
    44493,
    44523,
    44553,
    44582,
    44612,
    44641,
    44671,
    44700,
    44730,
    44759,
    44788,
    44818,
    44847,
    44877,
    44906,
    44936,
    44966,
    44996,
    45025,
    45055,
    45084,
    45114,
    45143,
    45172,
    45202,
    45231,
    45261,
    45290,
    45320,
    45350,
    45380,
    45409,
    45439,
    45468,
    45498,
    45527,
    45556,
    45586,
    45615,
    45644,
    45674,
    45704,
    45733,
    45763,
    45793,
    45823,
    45852,
    45882,
    45911,
    45940,
    45970,
    45999,
    46028,
    46058,
    46088,
    46117,
    46147,
    46177,
    46206,
    46236,
    46265,
    46295,
    46324,
    46354,
    46383,
    46413,
    46442,
    46472,
    46501,
    46531,
    46560,
    46590,
    46620,
    46649,
    46679,
    46708,
    46738,
    46767,
    46797,
    46826,
    46856,
    46885,
    46915,
    46944,
    46974,
    47003,
    47033,
    47063,
    47092,
    47122,
    47151,
    47181,
    47210,
    47240,
    47269,
    47298,
    47328,
    47357,
    47387,
    47417,
    47446,
    47476,
    47506,
    47535,
    47565,
    47594,
    47624,
    47653,
    47682,
    47712,
    47741,
    47771,
    47800,
    47830,
    47860,
    47890,
    47919,
    47949,
    47978,
    48008,
    48037,
    48066,
    48096,
    48125,
    48155,
    48184,
    48214,
    48244,
    48273,
    48303,
    48333,
    48362,
    48392,
    48421,
    48450,
    48480,
    48509,
    48538,
    48568,
    48598,
    48627,
    48657,
    48687,
    48717,
    48746,
    48776,
    48805,
    48834,
    48864,
    48893,
    48922,
    48952,
    48982,
    49011,
    49041,
    49071,
    49100,
    49130,
    49160,
    49189,
    49218,
    49248,
    49277,
    49306,
    49336,
    49365,
    49395,
    49425,
    49455,
    49484,
    49514,
    49543,
    49573,
    49602,
    49632,
    49661,
    49690,
    49720,
    49749,
    49779,
    49809,
    49838,
    49868,
    49898,
    49927,
    49957,
    49986,
    50016,
    50045,
    50075,
    50104,
    50133,
    50163,
    50192,
    50222,
    50252,
    50281,
    50311,
    50340,
    50370,
    50400,
    50429,
    50459,
    50488,
    50518,
    50547,
    50576,
    50606,
    50635,
    50665,
    50694,
    50724,
    50754,
    50784,
    50813,
    50843,
    50872,
    50902,
    50931,
    50960,
    50990,
    51019,
    51049,
    51078,
    51108,
    51138,
    51167,
    51197,
    51227,
    51256,
    51286,
    51315,
    51345,
    51374,
    51403,
    51433,
    51462,
    51492,
    51522,
    51552,
    51582,
    51611,
    51641,
    51670,
    51699,
    51729,
    51758,
    51787,
    51816,
    51846,
    51876,
    51906,
    51936,
    51965,
    51995,
    52025,
    52054,
    52083,
    52113,
    52142,
    52171,
    52200,
    52230,
    52260,
    52290,
    52319,
    52349,
    52379,
    52408,
    52438,
    52467,
    52497,
    52526,
    52555,
    52585,
    52614,
    52644,
    52673,
    52703,
    52733,
    52762,
    52792,
    52822,
    52851,
    52881,
    52910,
    52939,
    52969,
    52998,
    53028,
    53057,
    53087,
    53116,
    53146,
    53176,
    53205,
    53235,
    53264,
    53294,
    53324,
    53353,
    53383,
    53412,
    53441,
    53471,
    53500,
    53530,
    53559,
    53589,
    53619,
    53648,
    53678,
    53708,
    53737,
    53767,
    53796,
    53825,
    53855,
    53884,
    53913,
    53943,
    53973,
    54003,
    54032,
    54062,
    54092,
    54121,
    54151,
    54180,
    54209,
    54239,
    54268,
    54297,
    54327,
    54357,
    54387,
    54416,
    54446,
    54476,
    54505,
    54535,
    54564,
    54593,
    54623,
    54652,
    54681,
    54711,
    54741,
    54770,
    54800,
    54830,
    54859,
    54889,
    54919,
    54948,
    54977,
    55007,
    55036,
    55066,
    55095,
    55125,
    55154,
    55184,
    55213,
    55243,
    55273,
    55302,
    55332,
    55361,
    55391,
    55420,
    55450,
    55479,
    55508,
    55538,
    55567,
    55597,
    55627,
    55657,
    55686,
    55716,
    55745,
    55775,
    55804,
    55834,
    55863,
    55892,
    55922,
    55951,
    55981,
    56011,
    56040,
    56070,
    56100,
    56129,
    56159,
    56188,
    56218,
    56247,
    56276,
    56306,
    56335,
    56365,
    56394,
    56424,
    56454,
    56483,
    56513,
    56543,
    56572,
    56601,
    56631,
    56660,
    56690,
    56719,
    56749,
    56778,
    56808,
    56837,
    56867,
    56897,
    56926,
    56956,
    56985,
    57015,
    57044,
    57074,
    57103,
    57133,
    57162,
    57192,
    57221,
    57251,
    57280,
    57310,
    57340,
    57369,
    57399,
    57429,
    57458,
    57487,
    57517,
    57546,
    57576,
    57605,
    57634,
    57664,
    57694,
    57723,
    57753,
    57783,
    57813,
    57842,
    57871,
    57901,
    57930,
    57959,
    57989,
    58018,
    58048,
    58077,
    58107,
    58137,
    58167,
    58196,
    58226,
    58255,
    58285,
    58314,
    58343,
    58373,
    58402,
    58432,
    58461,
    58491,
    58521,
    58551,
    58580,
    58610,
    58639,
    58669,
    58698,
    58727,
    58757,
    58786,
    58816,
    58845,
    58875,
    58905,
    58934,
    58964,
    58994,
    59023,
    59053,
    59082,
    59111,
    59141,
    59170,
    59200,
    59229,
    59259,
    59288,
    59318,
    59348,
    59377,
    59407,
    59436,
    59466,
    59495,
    59525,
    59554,
    59584,
    59613,
    59643,
    59672,
    59702,
    59731,
    59761,
    59791,
    59820,
    59850,
    59879,
    59909,
    59939,
    59968,
    59997,
    60027,
    60056,
    60086,
    60115,
    60145,
    60174,
    60204,
    60234,
    60264,
    60293,
    60323,
    60352,
    60381,
    60411,
    60440,
    60469,
    60499,
    60528,
    60558,
    60588,
    60618,
    60648,
    60677,
    60707,
    60736,
    60765,
    60795,
    60824,
    60853,
    60883,
    60912,
    60942,
    60972,
    61002,
    61031,
    61061,
    61090,
    61120,
    61149,
    61179,
    61208,
    61237,
    61267,
    61296,
    61326,
    61356,
    61385,
    61415,
    61445,
    61474,
    61504,
    61533,
    61563,
    61592,
    61621,
    61651,
    61680,
    61710,
    61739,
    61769,
    61799,
    61828,
    61858,
    61888,
    61917,
    61947,
    61976,
    62006,
    62035,
    62064,
    62094,
    62123,
    62153,
    62182,
    62212,
    62242,
    62271,
    62301,
    62331,
    62360,
    62390,
    62419,
    62448,
    62478,
    62507,
    62537,
    62566,
    62596,
    62625,
    62655,
    62685,
    62715,
    62744,
    62774,
    62803,
    62832,
    62862,
    62891,
    62921,
    62950,
    62980,
    63009,
    63039,
    63069,
    63099,
    63128,
    63157,
    63187,
    63216,
    63246,
    63275,
    63305,
    63334,
    63363,
    63393,
    63423,
    63453,
    63482,
    63512,
    63541,
    63571,
    63600,
    63630,
    63659,
    63689,
    63718,
    63747,
    63777,
    63807,
    63836,
    63866,
    63895,
    63925,
    63955,
    63984,
    64014,
    64043,
    64073,
    64102,
    64131,
    64161,
    64190,
    64220,
    64249,
    64279,
    64309,
    64339,
    64368,
    64398,
    64427,
    64457,
    64486,
    64515,
    64545,
    64574,
    64603,
    64633,
    64663,
    64692,
    64722,
    64752,
    64782,
    64811,
    64841,
    64870,
    64899,
    64929,
    64958,
    64987,
    65017,
    65047,
    65076,
    65106,
    65136,
    65166,
    65195,
    65225,
    65254,
    65283,
    65313,
    65342,
    65371,
    65401,
    65431,
    65460,
    65490,
    65520,
    65549,
    65579,
    65608,
    65638,
    65667,
    65697,
    65726,
    65755,
    65785,
    65815,
    65844,
    65874,
    65903,
    65933,
    65963,
    65992,
    66022,
    66051,
    66081,
    66110,
    66140,
    66169,
    66199,
    66228,
    66258,
    66287,
    66317,
    66346,
    66376,
    66405,
    66435,
    66465,
    66494,
    66524,
    66553,
    66583,
    66612,
    66641,
    66671,
    66700,
    66730,
    66760,
    66789,
    66819,
    66849,
    66878,
    66908,
    66937,
    66967,
    66996,
    67025,
    67055,
    67084,
    67114,
    67143,
    67173,
    67203,
    67233,
    67262,
    67292,
    67321,
    67351,
    67380,
    67409,
    67439,
    67468,
    67497,
    67527,
    67557,
    67587,
    67617,
    67646,
    67676,
    67705,
    67735,
    67764,
    67793,
    67823,
    67852,
    67882,
    67911,
    67941,
    67971,
    68e3,
    68030,
    68060,
    68089,
    68119,
    68148,
    68177,
    68207,
    68236,
    68266,
    68295,
    68325,
    68354,
    68384,
    68414,
    68443,
    68473,
    68502,
    68532,
    68561,
    68591,
    68620,
    68650,
    68679,
    68708,
    68738,
    68768,
    68797,
    68827,
    68857,
    68886,
    68916,
    68946,
    68975,
    69004,
    69034,
    69063,
    69092,
    69122,
    69152,
    69181,
    69211,
    69240,
    69270,
    69300,
    69330,
    69359,
    69388,
    69418,
    69447,
    69476,
    69506,
    69535,
    69565,
    69595,
    69624,
    69654,
    69684,
    69713,
    69743,
    69772,
    69802,
    69831,
    69861,
    69890,
    69919,
    69949,
    69978,
    70008,
    70038,
    70067,
    70097,
    70126,
    70156,
    70186,
    70215,
    70245,
    70274,
    70303,
    70333,
    70362,
    70392,
    70421,
    70451,
    70481,
    70510,
    70540,
    70570,
    70599,
    70629,
    70658,
    70687,
    70717,
    70746,
    70776,
    70805,
    70835,
    70864,
    70894,
    70924,
    70954,
    70983,
    71013,
    71042,
    71071,
    71101,
    71130,
    71159,
    71189,
    71218,
    71248,
    71278,
    71308,
    71337,
    71367,
    71397,
    71426,
    71455,
    71485,
    71514,
    71543,
    71573,
    71602,
    71632,
    71662,
    71691,
    71721,
    71751,
    71781,
    71810,
    71839,
    71869,
    71898,
    71927,
    71957,
    71986,
    72016,
    72046,
    72075,
    72105,
    72135,
    72164,
    72194,
    72223,
    72253,
    72282,
    72311,
    72341,
    72370,
    72400,
    72429,
    72459,
    72489,
    72518,
    72548,
    72577,
    72607,
    72637,
    72666,
    72695,
    72725,
    72754,
    72784,
    72813,
    72843,
    72872,
    72902,
    72931,
    72961,
    72991,
    73020,
    73050,
    73080,
    73109,
    73139,
    73168,
    73197,
    73227,
    73256,
    73286,
    73315,
    73345,
    73375,
    73404,
    73434,
    73464,
    73493,
    73523,
    73552,
    73581,
    73611,
    73640,
    73669,
    73699,
    73729,
    73758,
    73788,
    73818,
    73848,
    73877,
    73907,
    73936,
    73965,
    73995,
    74024,
    74053,
    74083,
    74113,
    74142,
    74172,
    74202,
    74231,
    74261,
    74291,
    74320,
    74349,
    74379,
    74408,
    74437,
    74467,
    74497,
    74526,
    74556,
    74586,
    74615,
    74645,
    74675,
    74704,
    74733,
    74763,
    74792,
    74822,
    74851,
    74881,
    74910,
    74940,
    74969,
    74999,
    75029,
    75058,
    75088,
    75117,
    75147,
    75176,
    75206,
    75235,
    75264,
    75294,
    75323,
    75353,
    75383,
    75412,
    75442,
    75472,
    75501,
    75531,
    75560,
    75590,
    75619,
    75648,
    75678,
    75707,
    75737,
    75766,
    75796,
    75826,
    75856,
    75885,
    75915,
    75944,
    75974,
    76003,
    76032,
    76062,
    76091,
    76121,
    76150,
    76180,
    76210,
    76239,
    76269,
    76299,
    76328,
    76358,
    76387,
    76416,
    76446,
    76475,
    76505,
    76534,
    76564,
    76593,
    76623,
    76653,
    76682,
    76712,
    76741,
    76771,
    76801,
    76830,
    76859,
    76889,
    76918,
    76948,
    76977,
    77007,
    77036,
    77066,
    77096,
    77125,
    77155,
    77185,
    77214,
    77243,
    77273,
    77302,
    77332,
    77361,
    77390,
    77420,
    77450,
    77479,
    77509,
    77539,
    77569,
    77598,
    77627,
    77657,
    77686,
    77715,
    77745,
    77774,
    77804,
    77833,
    77863,
    77893,
    77923,
    77952,
    77982,
    78011,
    78041,
    78070,
    78099,
    78129,
    78158,
    78188,
    78217,
    78247,
    78277,
    78307,
    78336,
    78366,
    78395,
    78425,
    78454,
    78483,
    78513,
    78542,
    78572,
    78601,
    78631,
    78661,
    78690,
    78720,
    78750,
    78779,
    78808,
    78838,
    78867,
    78897,
    78926,
    78956,
    78985,
    79015,
    79044,
    79074,
    79104,
    79133,
    79163,
    79192,
    79222,
    79251,
    79281,
    79310,
    79340,
    79369,
    79399,
    79428,
    79458,
    79487,
    79517,
    79546,
    79576,
    79606,
    79635,
    79665,
    79695,
    79724,
    79753,
    79783,
    79812,
    79841,
    79871,
    79900,
    79930,
    79960,
    79990
  ];
  function getHijriDate(gDate) {
    var day = gDate.getDate();
    var month2 = gDate.getMonth();
    var year = gDate.getFullYear();
    var tMonth = month2 + 1;
    var tYear = year;
    if (tMonth < 3) {
      tYear -= 1;
      tMonth += 12;
    }
    var yPrefix = Math.floor(tYear / 100);
    var julilanOffset = yPrefix - Math.floor(yPrefix / 4) - 2;
    var julianNumber = Math.floor(365.25 * (tYear + 4716)) + Math.floor(30.6001 * (tMonth + 1)) + day - julilanOffset - 1524;
    yPrefix = Math.floor((julianNumber - 186721625e-2) / 36524.25);
    julilanOffset = yPrefix - Math.floor(yPrefix / 4) + 1;
    var b = julianNumber + julilanOffset + 1524;
    var c = Math.floor((b - 122.1) / 365.25);
    var d = Math.floor(365.25 * c);
    var tempMonth = Math.floor((b - d) / 30.6001);
    day = b - d - Math.floor(30.6001 * tempMonth);
    month2 = Math.floor((b - d) / 20.6001);
    if (month2 > 13) {
      c += 1;
      month2 -= 12;
    }
    month2 -= 1;
    year = c - 4716;
    var modifiedJulianDate = julianNumber - 24e5;
    var iyear = 10631 / 30;
    var z = julianNumber - 1948084;
    var cyc = Math.floor(z / 10631);
    z = z - 10631 * cyc;
    var j = Math.floor((z - 0.1335) / iyear);
    var iy = 30 * cyc + j;
    z = z - Math.floor(j * iyear + 0.1335);
    var im = Math.floor((z + 28.5001) / 29.5);
    if (im === 13) {
      im = 12;
    }
    var tempDay = z - Math.floor(29.5001 * im - 29);
    var i = 0;
    for (; i < dateCorrection.length; i++) {
      if (dateCorrection[parseInt(i.toString(), 10)] > modifiedJulianDate) {
        break;
      }
    }
    var iln = i + 16260;
    var ii = Math.floor((iln - 1) / 12);
    var hYear = ii + 1;
    var hmonth = iln - 12 * ii;
    var hDate = modifiedJulianDate - dateCorrection[i - 1] + 1;
    if ((hDate + "").length > 2) {
      hDate = tempDay;
      hmonth = im;
      hYear = iy;
    }
    return { year: hYear, month: hmonth, date: hDate };
  }
  HijriParser2.getHijriDate = getHijriDate;
  function toGregorian(year, month2, day) {
    var iy = year;
    var im = month2;
    var id = day;
    var ii = iy - 1;
    var iln = ii * 12 + 1 + (im - 1);
    var i = iln - 16260;
    var mcjdn = id + dateCorrection[i - 1] - 1;
    var julianDate = mcjdn + 24e5;
    var z = Math.floor(julianDate + 0.5);
    var a = Math.floor((z - 186721625e-2) / 36524.25);
    a = z + 1 + a - Math.floor(a / 4);
    var b = a + 1524;
    var c = Math.floor((b - 122.1) / 365.25);
    var d = Math.floor(365.25 * c);
    var e = Math.floor((b - d) / 30.6001);
    var gDay = b - d - Math.floor(e * 30.6001);
    var gMonth = e - (e > 13.5 ? 13 : 1);
    var gYear = c - (gMonth > 2.5 ? 4716 : 4715);
    if (gYear <= 0) {
      gMonth--;
    }
    return /* @__PURE__ */ new Date(gYear + "/" + gMonth + "/" + gDay);
  }
  HijriParser2.toGregorian = toGregorian;
})(HijriParser || (HijriParser = {}));
var abbreviateRegexGlobal = /\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi;
var standalone$1 = "stand-alone";
var weekdayKey = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];
var timeSetter$1 = {
  m: "getMinutes",
  h: "getHours",
  H: "getHours",
  s: "getSeconds",
  d: "getDate",
  f: "getMilliseconds"
};
var datePartMatcher = {
  "M": "month",
  "d": "day",
  "E": "weekday",
  "c": "weekday",
  "y": "year",
  "m": "minute",
  "h": "hour",
  "H": "hour",
  "s": "second",
  "L": "month",
  "a": "designator",
  "z": "timeZone",
  "Z": "timeZone",
  "G": "era",
  "f": "milliseconds"
};
var timeSeparator = "timeSeparator";
var DateFormat = (
  /** @class */
  function() {
    function DateFormat2() {
    }
    DateFormat2.dateFormat = function(culture, option, cldr) {
      var _this = this;
      var dependable = IntlBase.getDependables(cldr, culture, option.calendar);
      getValue("parserObject.numbers", dependable);
      var dateObject = dependable.dateObject;
      var formatOptions = { isIslamic: IntlBase.islamicRegex.test(option.calendar) };
      formatOptions.firstDayOfWeek = IntlBase.getWeekData(culture, cldr);
      var resPattern = option.format || IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type, false, "");
      formatOptions.dateSeperator = IntlBase.getDateSeparator(dependable.dateObject);
      if (isUndefined(resPattern)) {
        throwError("Format options or type given must be invalid");
      } else {
        resPattern = IntlBase.ConvertDateToWeekFormat(resPattern);
        formatOptions.pattern = resPattern;
        formatOptions.numMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        var patternMatch = resPattern.match(abbreviateRegexGlobal) || [];
        for (var _i = 0, patternMatch_1 = patternMatch; _i < patternMatch_1.length; _i++) {
          var str = patternMatch_1[_i];
          var len = str.length;
          var char = str[0];
          if (char === "K") {
            char = "h";
          }
          switch (char) {
            case "E":
            case "c":
              {
                formatOptions.weekday = dependable.dateObject["" + IntlBase.days]["" + standalone$1][IntlBase.monthIndex["" + len]];
              }
              break;
            case "M":
            case "L":
              {
                formatOptions.month = dependable.dateObject["" + IntlBase.month]["" + standalone$1][IntlBase.monthIndex["" + len]];
              }
              break;
            case "a":
              formatOptions.designator = getValue("dayPeriods.format.wide", dateObject);
              break;
            case "G": {
              var eText = len <= 3 ? "eraAbbr" : len === 4 ? "eraNames" : "eraNarrow";
              formatOptions.era = getValue("eras." + eText, dependable.dateObject);
              break;
            }
            case "z":
              formatOptions.timeZone = getValue("dates.timeZoneNames", dependable.parserObject);
              break;
          }
        }
      }
      return function(value) {
        if (isNaN(value.getDate())) {
          return null;
        }
        return _this.intDateFormatter(value, formatOptions);
      };
    };
    DateFormat2.intDateFormatter = function(value, options) {
      var pattern = options.pattern;
      var ret = "";
      var matches2 = pattern.match(IntlBase.dateParseRegex);
      var dObject = this.getCurrentDateValue(value, options.isIslamic);
      for (var _i = 0, matches_1 = matches2; _i < matches_1.length; _i++) {
        var match = matches_1[_i];
        var length_1 = match.length;
        var char = match[0];
        if (char === "K") {
          char = "h";
        }
        var curval = void 0;
        var curvalstr = "";
        var isNumber = void 0;
        var processNumber = void 0;
        var curstr = "";
        switch (char) {
          case "M":
          case "L":
            curval = dObject.month;
            if (length_1 > 2) {
              ret += options.month["" + curval];
            } else {
              isNumber = true;
            }
            break;
          case "E":
          case "c":
            ret += options.weekday["" + weekdayKey[value.getDay()]];
            break;
          case "H":
          case "h":
          case "m":
          case "s":
          case "d":
          case "f":
            isNumber = true;
            if (char === "d") {
              curval = dObject.date;
            } else if (char === "f") {
              isNumber = false;
              processNumber = true;
              curvalstr = value["" + timeSetter$1["" + char]]().toString();
              curvalstr = curvalstr.substring(0, length_1);
              var curlength = curvalstr.length;
              if (length_1 !== curlength) {
                if (length_1 > 3) {
                  continue;
                }
                for (var i = 0; i < length_1 - curlength; i++) {
                  curvalstr = "0" + curvalstr.toString();
                }
              }
              curstr += curvalstr;
            } else {
              curval = value["" + timeSetter$1["" + char]]();
            }
            if (char === "h") {
              curval = curval % 12 || 12;
            }
            break;
          case "y":
            processNumber = true;
            curstr += dObject.year;
            if (length_1 === 2) {
              curstr = curstr.substr(curstr.length - 2);
            }
            break;
          case "a": {
            var desig = value.getHours() < 12 ? "am" : "pm";
            ret += options.designator["" + desig];
            break;
          }
          case "G": {
            var dec = value.getFullYear() < 0 ? 0 : 1;
            var retu = options.era["" + dec];
            if (isNullOrUndefined(retu)) {
              retu = options.era[dec ? 0 : 1];
            }
            ret += retu || "";
            break;
          }
          case "'":
            ret += match === "''" ? "'" : match.replace(/'/g, "");
            break;
          case "z": {
            var timezone = value.getTimezoneOffset();
            var pattern_1 = length_1 < 4 ? "+H;-H" : options.timeZone.hourFormat;
            pattern_1 = pattern_1.replace(/:/g, options.numMapper.timeSeparator);
            if (timezone === 0) {
              ret += options.timeZone.gmtZeroFormat;
            } else {
              processNumber = true;
              curstr = this.getTimeZoneValue(timezone, pattern_1);
            }
            curstr = options.timeZone.gmtFormat.replace(/\{0\}/, curstr);
            break;
          }
          case ":":
            ret += options.numMapper.numberSymbols["" + timeSeparator];
            break;
          case "/":
            ret += options.dateSeperator;
            break;
          case "W":
            isNumber = true;
            curval = IntlBase.getWeekOfYear(value, options.firstDayOfWeek);
            break;
          default:
            ret += match;
        }
        if (isNumber) {
          processNumber = true;
          curstr = this.checkTwodigitNumber(curval, length_1);
        }
        if (processNumber) {
          ret += ParserBase.convertValueParts(curstr, IntlBase.latnParseRegex, options.numMapper.mapper);
        }
      }
      return ret;
    };
    DateFormat2.getCurrentDateValue = function(value, isIslamic) {
      if (isIslamic) {
        return HijriParser.getHijriDate(value);
      }
      return { year: value.getFullYear(), month: value.getMonth() + 1, date: value.getDate() };
    };
    DateFormat2.checkTwodigitNumber = function(val, len) {
      var ret = val + "";
      if (len === 2 && ret.length !== 2) {
        return "0" + ret;
      }
      return ret;
    };
    DateFormat2.getTimeZoneValue = function(tVal, pattern) {
      var _this = this;
      var splt = pattern.split(";");
      var curPattern = splt[tVal > 0 ? 1 : 0];
      var no = Math.abs(tVal);
      return curPattern = curPattern.replace(/HH?|mm/g, function(str) {
        var len = str.length;
        var ishour = str.indexOf("H") !== -1;
        return _this.checkTwodigitNumber(Math.floor(ishour ? no / 60 : no % 60), len);
      });
    };
    return DateFormat2;
  }()
);
setDateFormat(DateFormat);
var errorText = {
  "ms": "minimumSignificantDigits",
  "ls": "maximumSignificantDigits",
  "mf": "minimumFractionDigits",
  "lf": "maximumFractionDigits"
};
var percentSign = "percentSign";
var minusSign = "minusSign";
var mapper = ["infinity", "nan", "group", "decimal", "exponential"];
var NumberFormat = (
  /** @class */
  function() {
    function NumberFormat2() {
    }
    NumberFormat2.numberFormatter = function(culture, option, cldr) {
      var _this = this;
      var fOptions = extend$1({}, option);
      var cOptions = {};
      var dOptions = {};
      var symbolPattern;
      var dependable = IntlBase.getDependables(cldr, culture, "", true);
      dependable.numericObject;
      dOptions.numberMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true);
      dOptions.currencySymbol = IntlBase.getCurrencySymbol(dependable.numericObject, fOptions.currency || defaultCurrencyCode, option.altSymbol, option.ignoreCurrency);
      dOptions.percentSymbol = dOptions.numberMapper.numberSymbols["" + percentSign];
      dOptions.minusSymbol = dOptions.numberMapper.numberSymbols["" + minusSign];
      var symbols = dOptions.numberMapper.numberSymbols;
      if (option.format && !IntlBase.formatRegex.test(option.format)) {
        cOptions = IntlBase.customFormat(option.format, dOptions, dependable.numericObject);
        if (!isUndefined(fOptions.useGrouping) && fOptions.useGrouping) {
          fOptions.useGrouping = cOptions.pData.useGrouping;
        }
      } else {
        extend$1(fOptions, IntlBase.getProperNumericSkeleton(option.format || "N"));
        fOptions.isCurrency = fOptions.type === "currency";
        fOptions.isPercent = fOptions.type === "percent";
        {
          symbolPattern = IntlBase.getSymbolPattern(fOptions.type, dOptions.numberMapper.numberSystem, dependable.numericObject, fOptions.isAccount);
        }
        fOptions.groupOne = this.checkValueRange(fOptions.maximumSignificantDigits, fOptions.minimumSignificantDigits, true);
        this.checkValueRange(fOptions.maximumFractionDigits, fOptions.minimumFractionDigits, false, true);
        if (!isUndefined(fOptions.fractionDigits)) {
          fOptions.minimumFractionDigits = fOptions.maximumFractionDigits = fOptions.fractionDigits;
        }
        if (isUndefined(fOptions.useGrouping)) {
          fOptions.useGrouping = true;
        }
        if (fOptions.isCurrency && true) {
          symbolPattern = symbolPattern.replace(/\u00A4/g, IntlBase.defaultCurrency);
        }
        {
          var split = symbolPattern.split(";");
          cOptions.nData = IntlBase.getFormatData(split[1] || "-" + split[0], true, dOptions.currencySymbol);
          cOptions.pData = IntlBase.getFormatData(split[0], false, dOptions.currencySymbol);
          if (fOptions.useGrouping) {
            fOptions.groupSeparator = symbols[mapper[2]];
            fOptions.groupData = this.getGroupingDetails(split[0]);
          }
        }
        var minFrac = isUndefined(fOptions.minimumFractionDigits);
        if (minFrac) {
          fOptions.minimumFractionDigits = cOptions.nData.minimumFraction;
        }
        if (isUndefined(fOptions.maximumFractionDigits)) {
          var mval = cOptions.nData.maximumFraction;
          fOptions.maximumFractionDigits = isUndefined(mval) && fOptions.isPercent ? 0 : mval;
        }
        var mfrac = fOptions.minimumFractionDigits;
        var lfrac = fOptions.maximumFractionDigits;
        if (!isUndefined(mfrac) && !isUndefined(lfrac)) {
          if (mfrac > lfrac) {
            fOptions.maximumFractionDigits = mfrac;
          }
        }
      }
      extend$1(cOptions.nData, fOptions);
      extend$1(cOptions.pData, fOptions);
      return function(value) {
        if (isNaN(value)) {
          return symbols[mapper[1]];
        } else if (!isFinite(value)) {
          return symbols[mapper[0]];
        }
        return _this.intNumberFormatter(value, cOptions, dOptions, option);
      };
    };
    NumberFormat2.getGroupingDetails = function(pattern) {
      var ret = {};
      var match = pattern.match(IntlBase.negativeDataRegex);
      if (match && match[4]) {
        var pattern_1 = match[4];
        var p = pattern_1.lastIndexOf(",");
        if (p !== -1) {
          var temp = pattern_1.split(".")[0];
          ret.primary = temp.length - p - 1;
          var s = pattern_1.lastIndexOf(",", p - 1);
          if (s !== -1) {
            ret.secondary = p - 1 - s;
          }
        }
      }
      return ret;
    };
    NumberFormat2.checkValueRange = function(val1, val2, checkbothExist, isFraction) {
      var decide = isFraction ? "f" : "s";
      var dint = 0;
      var str1 = errorText["l" + decide];
      var str2 = errorText["m" + decide];
      if (!isUndefined(val1)) {
        this.checkRange(val1, str1, isFraction);
        dint++;
      }
      if (!isUndefined(val2)) {
        this.checkRange(val2, str2, isFraction);
        dint++;
      }
      if (dint === 2) {
        if (val1 < val2) {
          throwError(str2 + "specified must be less than the" + str1);
        } else {
          return true;
        }
      } else if (checkbothExist && dint === 1) {
        throwError("Both" + str2 + "and" + str2 + "must be present");
      }
      return false;
    };
    NumberFormat2.checkRange = function(val, text, isFraction) {
      var range = isFraction ? [0, 20] : [1, 21];
      if (val < range[0] || val > range[1]) {
        throwError(text + "value must be within the range" + range[0] + "to" + range[1]);
      }
    };
    NumberFormat2.intNumberFormatter = function(value, fOptions, dOptions, option) {
      var curData;
      if (isUndefined(fOptions.nData.type)) {
        return void 0;
      } else {
        if (value < 0) {
          value = value * -1;
          curData = fOptions.nData;
        } else if (value === 0) {
          curData = fOptions.zeroData || fOptions.pData;
        } else {
          curData = fOptions.pData;
        }
        var fValue = "";
        if (curData.isPercent) {
          value = value * 100;
        }
        if (curData.groupOne) {
          fValue = this.processSignificantDigits(value, curData.minimumSignificantDigits, curData.maximumSignificantDigits);
        } else {
          fValue = this.processFraction(value, curData.minimumFractionDigits, curData.maximumFractionDigits, option);
          if (curData.minimumIntegerDigits) {
            fValue = this.processMinimumIntegers(fValue, curData.minimumIntegerDigits);
          }
          if (dOptions.isCustomFormat && curData.minimumFractionDigits < curData.maximumFractionDigits && /\d+\.\d+/.test(fValue)) {
            var temp = fValue.split(".");
            var decimalPart = temp[1];
            var len = decimalPart.length;
            for (var i = len - 1; i >= 0; i--) {
              if (decimalPart[parseInt(i.toString(), 10)] === "0" && i >= curData.minimumFractionDigits) {
                decimalPart = decimalPart.slice(0, i);
              } else {
                break;
              }
            }
            fValue = temp[0] + "." + decimalPart;
          }
        }
        if (curData.type === "scientific") {
          fValue = value.toExponential(curData.maximumFractionDigits);
          fValue = fValue.replace("e", dOptions.numberMapper.numberSymbols[mapper[4]]);
        }
        fValue = fValue.replace(".", dOptions.numberMapper.numberSymbols[mapper[3]]);
        fValue = curData.format === "#,###,,;(#,###,,)" ? this.customPivotFormat(parseInt(fValue, 10)) : fValue;
        if (curData.useGrouping) {
          fValue = this.groupNumbers(fValue, curData.groupData.primary, curData.groupSeparator || ",", dOptions.numberMapper.numberSymbols[mapper[3]] || ".", curData.groupData.secondary);
        }
        fValue = ParserBase.convertValueParts(fValue, IntlBase.latnParseRegex, dOptions.numberMapper.mapper);
        if (curData.nlead === "N/A") {
          return curData.nlead;
        } else {
          if (fValue === "0" && option && option.format === "0") {
            return fValue + curData.nend;
          }
          return curData.nlead + fValue + curData.nend;
        }
      }
    };
    NumberFormat2.processSignificantDigits = function(value, min, max) {
      var temp = value + "";
      var tn;
      var length = temp.length;
      if (length < min) {
        return value.toPrecision(min);
      } else {
        temp = value.toPrecision(max);
        tn = +temp;
        return tn + "";
      }
    };
    NumberFormat2.groupNumbers = function(val, level1, sep, decimalSymbol, level2) {
      var flag = !isNullOrUndefined(level2) && level2 !== 0;
      var split = val.split(decimalSymbol);
      var prefix = split[0];
      var length = prefix.length;
      var str = "";
      while (length > level1) {
        str = prefix.slice(length - level1, length) + (str.length ? sep + str : "");
        length -= level1;
        if (flag) {
          level1 = level2;
          flag = false;
        }
      }
      split[0] = prefix.slice(0, length) + (str.length ? sep : "") + str;
      return split.join(decimalSymbol);
    };
    NumberFormat2.processFraction = function(value, min, max, option) {
      var temp = (value + "").split(".")[1];
      var length = temp ? temp.length : 0;
      if (min && length < min) {
        var ret = "";
        if (length === 0) {
          ret = value.toFixed(min);
        } else {
          ret += value;
          for (var j = 0; j < min - length; j++) {
            ret += "0";
          }
          return ret;
        }
        return value.toFixed(min);
      } else if (!isNullOrUndefined(max) && (length > max || max === 0)) {
        return value.toFixed(max);
      }
      var str = value + "";
      if (str[0] === "0" && option && option.format === "###.00") {
        str = str.slice(1);
      }
      return str;
    };
    NumberFormat2.processMinimumIntegers = function(value, min) {
      var temp = value.split(".");
      var lead = temp[0];
      var len = lead.length;
      if (len < min) {
        for (var i = 0; i < min - len; i++) {
          lead = "0" + lead;
        }
        temp[0] = lead;
      }
      return temp.join(".");
    };
    NumberFormat2.customPivotFormat = function(value) {
      if (value >= 5e5) {
        value /= 1e6;
        var _a = value.toString().split(".");
        _a[0];
        var decimal = _a[1];
        return decimal && +decimal.substring(0, 1) >= 5 ? Math.ceil(value).toString() : Math.floor(value).toString();
      }
      return "";
    };
    return NumberFormat2;
  }()
);
setNumberFormat(NumberFormat);
var standalone = "stand-alone";
var latnRegex = /^[0-9]*$/;
var timeSetter = {
  minute: "setMinutes",
  hour: "setHours",
  second: "setSeconds",
  day: "setDate",
  month: "setMonth",
  milliseconds: "setMilliseconds"
};
var month = "months";
var DateParser = (
  /** @class */
  function() {
    function DateParser2() {
    }
    DateParser2.dateParser = function(culture, option, cldr) {
      var _this = this;
      var dependable = IntlBase.getDependables(cldr, culture, option.calendar);
      var numOptions = ParserBase.getCurrentNumericOptions(dependable.parserObject, ParserBase.getNumberingSystem(cldr), false, isBlazor());
      var parseOptions = {};
      var resPattern = option.format || IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type, false, "");
      var regexString = "";
      var hourOnly;
      if (isUndefined(resPattern)) {
        throwError("Format options or type given must be invalid");
      } else {
        resPattern = IntlBase.ConvertDateToWeekFormat(resPattern);
        parseOptions = { isIslamic: IntlBase.islamicRegex.test(option.calendar), pattern: resPattern, evalposition: {}, culture };
        var patternMatch = resPattern.match(IntlBase.dateParseRegex) || [];
        var length_1 = patternMatch.length;
        var gmtCorrection = 0;
        var zCorrectTemp = 0;
        var isgmtTraversed = false;
        var nRegx = numOptions.numericRegex;
        var numMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        for (var i = 0; i < length_1; i++) {
          var str = patternMatch[parseInt(i.toString(), 10)];
          var len = str.length;
          var char = str[0] === "K" ? "h" : str[0];
          var isNumber = void 0;
          var canUpdate = void 0;
          var charKey = datePartMatcher["" + char];
          var optional = len === 2 ? "" : "?";
          if (isgmtTraversed) {
            gmtCorrection = zCorrectTemp;
            isgmtTraversed = false;
          }
          switch (char) {
            case "E":
            case "c": {
              var weekData = void 0;
              {
                weekData = dependable.dateObject["" + IntlBase.days]["" + standalone][IntlBase.monthIndex["" + len]];
              }
              var weekObject = ParserBase.reverseObject(weekData);
              regexString += "(" + Object.keys(weekObject).join("|") + ")";
              break;
            }
            case "M":
            case "L":
            case "d":
            case "m":
            case "s":
            case "h":
            case "H":
            case "f":
              canUpdate = true;
              if ((char === "M" || char === "L") && len > 2) {
                var monthData = void 0;
                {
                  monthData = dependable.dateObject["" + month]["" + standalone][IntlBase.monthIndex["" + len]];
                }
                parseOptions["" + charKey] = ParserBase.reverseObject(monthData);
                regexString += "(" + Object.keys(parseOptions["" + charKey]).join("|") + ")";
              } else if (char === "f") {
                if (len > 3) {
                  continue;
                }
                isNumber = true;
                regexString += "(" + nRegx + nRegx + "?" + nRegx + "?)";
              } else {
                isNumber = true;
                regexString += "(" + nRegx + nRegx + optional + ")";
              }
              if (char === "h") {
                parseOptions.hour12 = true;
              }
              break;
            case "W": {
              var opt = len === 1 ? "?" : "";
              regexString += "(" + nRegx + opt + nRegx + ")";
              break;
            }
            case "y":
              canUpdate = isNumber = true;
              if (len === 2) {
                regexString += "(" + nRegx + nRegx + ")";
              } else {
                regexString += "(" + nRegx + "{" + len + ",})";
              }
              break;
            case "a": {
              canUpdate = true;
              var periodValur = getValue("dayPeriods.format.wide", dependable.dateObject);
              parseOptions["" + charKey] = ParserBase.reverseObject(periodValur);
              regexString += "(" + Object.keys(parseOptions["" + charKey]).join("|") + ")";
              break;
            }
            case "G": {
              canUpdate = true;
              var eText = len <= 3 ? "eraAbbr" : len === 4 ? "eraNames" : "eraNarrow";
              parseOptions["" + charKey] = ParserBase.reverseObject(getValue("eras." + eText, dependable.dateObject));
              regexString += "(" + Object.keys(parseOptions["" + charKey]).join("|") + "?)";
              break;
            }
            case "z": {
              var tval = (/* @__PURE__ */ new Date()).getTimezoneOffset();
              canUpdate = tval !== 0;
              parseOptions["" + charKey] = getValue("dates.timeZoneNames", dependable.parserObject);
              var tzone = parseOptions["" + charKey];
              hourOnly = len < 4;
              var hpattern = hourOnly ? "+H;-H" : tzone.hourFormat;
              hpattern = hpattern.replace(/:/g, numMapper.timeSeparator);
              regexString += "(" + this.parseTimeZoneRegx(hpattern, tzone, nRegx) + ")?";
              isgmtTraversed = true;
              zCorrectTemp = hourOnly ? 6 : 12;
              break;
            }
            case "'": {
              var iString = str.replace(/'/g, "");
              regexString += "(" + iString + ")?";
              break;
            }
            default:
              regexString += "([\\D])";
              break;
          }
          if (canUpdate) {
            parseOptions.evalposition["" + charKey] = { isNumber, pos: i + 1 + gmtCorrection, hourOnly };
          }
          if (i === length_1 - 1 && !isNullOrUndefined(regexString)) {
            var regExp2 = RegExp;
            parseOptions.parserRegex = new regExp2("^" + regexString + "$", "i");
          }
        }
      }
      return function(value) {
        var parsedDateParts = _this.internalDateParse(value, parseOptions, numOptions);
        if (isNullOrUndefined(parsedDateParts) || !Object.keys(parsedDateParts).length) {
          return null;
        }
        if (parseOptions.isIslamic) {
          var dobj = {};
          var tYear = parsedDateParts.year;
          var tDate = parsedDateParts.day;
          var tMonth = parsedDateParts.month;
          var ystrig = tYear ? tYear + "" : "";
          var is2DigitYear = ystrig.length === 2;
          if (!tYear || !tMonth || !tDate || is2DigitYear) {
            dobj = HijriParser.getHijriDate(/* @__PURE__ */ new Date());
          }
          if (is2DigitYear) {
            tYear = parseInt((dobj.year + "").slice(0, 2) + ystrig, 10);
          }
          var dateObject = HijriParser.toGregorian(tYear || dobj.year, tMonth || dobj.month, tDate || dobj.date);
          parsedDateParts.year = dateObject.getFullYear();
          parsedDateParts.month = dateObject.getMonth() + 1;
          parsedDateParts.day = dateObject.getDate();
        }
        return _this.getDateObject(parsedDateParts);
      };
    };
    DateParser2.getDateObject = function(options, value) {
      var res = value || /* @__PURE__ */ new Date();
      res.setMilliseconds(0);
      var tKeys = ["hour", "minute", "second", "milliseconds", "month", "day"];
      var y = options.year;
      var desig = options.designator;
      var tzone = options.timeZone;
      if (!isUndefined(y)) {
        var len = (y + "").length;
        if (len <= 2) {
          var century = Math.floor(res.getFullYear() / 100) * 100;
          y += century;
        }
        res.setFullYear(y);
      }
      for (var _i = 0, tKeys_1 = tKeys; _i < tKeys_1.length; _i++) {
        var key = tKeys_1[_i];
        var tValue = options["" + key];
        if (isUndefined(tValue) && key === "day") {
          res.setDate(1);
        }
        if (!isUndefined(tValue)) {
          if (key === "month") {
            tValue -= 1;
            if (tValue < 0 || tValue > 11) {
              return /* @__PURE__ */ new Date("invalid");
            }
            var pDate = res.getDate();
            res.setDate(1);
            res[timeSetter["" + key]](tValue);
            var lDate = new Date(res.getFullYear(), tValue + 1, 0).getDate();
            res.setDate(pDate < lDate ? pDate : lDate);
          } else {
            if (key === "day") {
              var lastDay = new Date(res.getFullYear(), res.getMonth() + 1, 0).getDate();
              if (tValue < 1 || tValue > lastDay) {
                return null;
              }
            }
            res["" + timeSetter["" + key]](tValue);
          }
        }
      }
      if (!isUndefined(desig)) {
        var hour = res.getHours();
        if (desig === "pm") {
          res.setHours(hour + (hour === 12 ? 0 : 12));
        } else if (hour === 12) {
          res.setHours(0);
        }
      }
      if (!isUndefined(tzone)) {
        var tzValue = tzone - res.getTimezoneOffset();
        if (tzValue !== 0) {
          res.setMinutes(res.getMinutes() + tzValue);
        }
      }
      return res;
    };
    DateParser2.internalDateParse = function(value, parseOptions, num) {
      var matches2 = value.match(parseOptions.parserRegex);
      var retOptions = { "hour": 0, "minute": 0, "second": 0 };
      if (isNullOrUndefined(matches2)) {
        return null;
      } else {
        var props = Object.keys(parseOptions.evalposition);
        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {
          var prop = props_1[_i];
          var curObject = parseOptions.evalposition["" + prop];
          var matchString = matches2[curObject.pos];
          if (curObject.isNumber) {
            retOptions["" + prop] = this.internalNumberParser(matchString, num);
          } else {
            if (prop === "timeZone" && !isUndefined(matchString)) {
              var pos = curObject.pos;
              var val = void 0;
              var tmatch = matches2[pos + 1];
              var flag = !isUndefined(tmatch);
              if (curObject.hourOnly) {
                val = this.getZoneValue(flag, tmatch, matches2[pos + 4], num) * 60;
              } else {
                val = this.getZoneValue(flag, tmatch, matches2[pos + 7], num) * 60;
                val += this.getZoneValue(flag, matches2[pos + 4], matches2[pos + 10], num);
              }
              if (!isNullOrUndefined(val)) {
                retOptions["" + prop] = val;
              }
            } else {
              var cultureOptions = ["en-US", "en-MH", "en-MP"];
              matchString = prop === "month" && !parseOptions.isIslamic && (parseOptions.culture === "en" || parseOptions.culture === "en-GB" || parseOptions.culture === "en-US") ? matchString[0].toUpperCase() + matchString.substring(1).toLowerCase() : matchString;
              matchString = prop !== "month" && prop === "designator" && parseOptions.culture && parseOptions.culture.indexOf("en-") !== -1 && cultureOptions.indexOf(parseOptions.culture) === -1 ? matchString.toLowerCase() : matchString;
              retOptions["" + prop] = parseOptions["" + prop]["" + matchString];
            }
          }
        }
        if (parseOptions.hour12) {
          retOptions.hour12 = true;
        }
      }
      return retOptions;
    };
    DateParser2.internalNumberParser = function(value, option) {
      value = ParserBase.convertValueParts(value, option.numberParseRegex, option.numericPair);
      if (latnRegex.test(value)) {
        return +value;
      }
      return null;
    };
    DateParser2.parseTimeZoneRegx = function(hourFormat, tZone, nRegex) {
      var pattern = tZone.gmtFormat;
      var ret;
      var cRegex = "(" + nRegex + ")(" + nRegex + ")";
      ret = hourFormat.replace("+", "\\+");
      if (hourFormat.indexOf("HH") !== -1) {
        ret = ret.replace(/HH|mm/g, "(" + cRegex + ")");
      } else {
        ret = ret.replace(/H|m/g, "(" + cRegex + "?)");
      }
      var splitStr = ret.split(";").map(function(str) {
        return pattern.replace("{0}", str);
      });
      ret = splitStr.join("|") + "|" + tZone.gmtZeroFormat;
      return ret;
    };
    DateParser2.getZoneValue = function(flag, val1, val2, num) {
      var ival = flag ? val1 : val2;
      if (!ival) {
        return 0;
      }
      var value = this.internalNumberParser(ival, num);
      if (flag) {
        return -value;
      }
      return value;
    };
    return DateParser2;
  }()
);
var regExp = RegExp;
var parseRegex = new regExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$");
var groupRegex = /,/g;
var keys = ["minusSign", "infinity"];
var NumberParser = (
  /** @class */
  function() {
    function NumberParser2() {
    }
    NumberParser2.numberParser = function(culture, option, cldr) {
      var _this = this;
      var dependable = IntlBase.getDependables(cldr, culture, "", true);
      var parseOptions = { custom: true };
      if (IntlBase.formatRegex.test(option.format) || !option.format) {
        extend$1(parseOptions, IntlBase.getProperNumericSkeleton(option.format || "N"));
        parseOptions.custom = false;
        if (!parseOptions.fractionDigits) {
          if (option.maximumFractionDigits) {
            parseOptions.maximumFractionDigits = option.maximumFractionDigits;
          }
        }
      } else {
        extend$1(parseOptions, IntlBase.customFormat(option.format, null, null));
      }
      getValue("numbers", dependable.parserObject);
      var numOptions = ParserBase.getCurrentNumericOptions(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true, isBlazor());
      parseOptions.symbolRegex = ParserBase.getSymbolRegex(Object.keys(numOptions.symbolMatch));
      parseOptions.infinity = numOptions.symbolNumberSystem[keys[1]];
      var symbolpattern;
      {
        symbolpattern = IntlBase.getSymbolPattern(parseOptions.type, numOptions.numberSystem, dependable.numericObject, parseOptions.isAccount);
        if (symbolpattern) {
          symbolpattern = symbolpattern.replace(/\u00A4/g, IntlBase.defaultCurrency);
          var split = symbolpattern.split(";");
          parseOptions.nData = IntlBase.getFormatData(split[1] || "-" + split[0], true, "");
          parseOptions.pData = IntlBase.getFormatData(split[0], true, "");
        }
      }
      return function(value) {
        return _this.getParsedNumber(value, parseOptions, numOptions);
      };
    };
    NumberParser2.getParsedNumber = function(value, options, numOptions) {
      var isNegative;
      var isPercent;
      var tempValue;
      var lead;
      var end;
      var ret;
      if (value.indexOf(options.infinity) !== -1) {
        return Infinity;
      } else {
        value = ParserBase.convertValueParts(value, options.symbolRegex, numOptions.symbolMatch);
        value = ParserBase.convertValueParts(value, numOptions.numberParseRegex, numOptions.numericPair);
        value = value.indexOf("-") !== -1 ? value.replace("-.", "-0.") : value;
        if (value.indexOf(".") === 0) {
          value = "0" + value;
        }
        var matches2 = value.match(parseRegex);
        if (isNullOrUndefined(matches2)) {
          return NaN;
        }
        lead = matches2[1];
        tempValue = matches2[2];
        var exponent = matches2[5];
        end = matches2[6];
        isNegative = options.custom ? lead === options.nData.nlead && end === options.nData.nend : lead.indexOf(options.nData.nlead) !== -1 && end.indexOf(options.nData.nend) !== -1;
        isPercent = isNegative ? options.nData.isPercent : options.pData.isPercent;
        tempValue = tempValue.replace(groupRegex, "");
        if (exponent) {
          tempValue += exponent;
        }
        ret = +tempValue;
        if (options.type === "percent" || isPercent) {
          ret = ret / 100;
        }
        if (options.custom || options.fractionDigits) {
          ret = parseFloat(ret.toFixed(options.custom ? isNegative ? options.nData.maximumFractionDigits : options.pData.maximumFractionDigits : options.fractionDigits));
        }
        if (options.maximumFractionDigits) {
          ret = this.convertMaxFracDigits(tempValue, options, ret, isNegative);
        }
        if (isNegative) {
          ret *= -1;
        }
        return ret;
      }
    };
    NumberParser2.convertMaxFracDigits = function(value, options, ret, isNegative) {
      var decimalSplitValue = value.split(".");
      if (decimalSplitValue[1] && decimalSplitValue[1].length > options.maximumFractionDigits) {
        ret = +ret.toFixed(options.custom ? isNegative ? options.nData.maximumFractionDigits : options.pData.maximumFractionDigits : options.maximumFractionDigits);
      }
      return ret;
    };
    return NumberParser2;
  }()
);
var onIntlChange = new Observer();
var rightToLeft = false;
var cldrData = {};
var defaultCulture = "en-US";
var Internationalization = (
  /** @class */
  function() {
    function Internationalization2(cultureName) {
      if (cultureName) {
        this.culture = cultureName;
      }
    }
    Internationalization2.prototype.getDateFormat = function(options) {
      return DateFormat.dateFormat(this.getCulture(), options || { type: "date", skeleton: "short" }, cldrData);
    };
    Internationalization2.prototype.getNumberFormat = function(options) {
      if (options && !options.currency) {
        options.currency = defaultCurrencyCode;
      }
      return NumberFormat.numberFormatter(this.getCulture(), options || {}, cldrData);
    };
    Internationalization2.prototype.getDateParser = function(options) {
      return DateParser.dateParser(this.getCulture(), options || { skeleton: "short", type: "date" }, cldrData);
    };
    Internationalization2.prototype.getNumberParser = function(options) {
      return NumberParser.numberParser(this.getCulture(), options || { format: "N" }, cldrData);
    };
    Internationalization2.prototype.formatNumber = function(value, option) {
      return this.getNumberFormat(option)(value);
    };
    Internationalization2.prototype.formatDate = function(value, option) {
      return this.getDateFormat(option)(value);
    };
    Internationalization2.prototype.parseDate = function(value, option) {
      return this.getDateParser(option)(value);
    };
    Internationalization2.prototype.parseNumber = function(value, option) {
      return this.getNumberParser(option)(value);
    };
    Internationalization2.prototype.getDatePattern = function(option, isExcelFormat) {
      return IntlBase.getActualDateTimeFormat(this.getCulture(), option, cldrData, isExcelFormat);
    };
    Internationalization2.prototype.getNumberPattern = function(option, isExcel) {
      return IntlBase.getActualNumberFormat(this.getCulture(), option, cldrData, isExcel);
    };
    Internationalization2.prototype.getFirstDayOfWeek = function() {
      return IntlBase.getWeekData(this.getCulture(), cldrData);
    };
    Internationalization2.prototype.getCulture = function() {
      return this.culture || defaultCulture;
    };
    return Internationalization2;
  }()
);
function setCulture(cultureName) {
  defaultCulture = cultureName;
  onIntlChange.notify("notifyExternalChange", { "locale": defaultCulture });
}
var componentList = ["grid", "pivotview", "treegrid", "spreadsheet", "rangeNavigator", "DocumentEditor", "listbox", "inplaceeditor", "PdfViewer", "richtexteditor", "DashboardLayout", "chart", "stockChart", "circulargauge", "diagram", "heatmap", "lineargauge", "maps", "slider", "smithchart", "barcode", "sparkline", "treemap", "bulletChart", "kanban", "daterangepicker", "schedule", "gantt", "signature", "query-builder", "drop-down-tree", "carousel", "filemanager", "uploader", "accordion", "tab", "treeview"];
var bypassKey = [
  115,
  121,
  110,
  99,
  102,
  117,
  115,
  105,
  111,
  110,
  46,
  105,
  115,
  76,
  105,
  99,
  86,
  97,
  108,
  105,
  100,
  97,
  116,
  101,
  100
];
var accountURL;
var LicenseValidator = (
  /** @class */
  function() {
    function LicenseValidator2(key) {
      this.isValidated = false;
      this.isLicensed = true;
      this.version = "29";
      this.platform = /JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats|essentialstudio/i;
      this.errors = {
        noLicense: "<span>This application was built using a trial version of Syncfusion<sup>®</sup> Essential Studio<sup>®</sup>. To remove the license validation message permanently, a valid license key must be included.</span>",
        trailExpired: "<span>This application was built using a trial version of Syncfusion<sup>®</sup> Essential Studio<sup>®</sup>. To remove the license validation message permanently, a valid license key must be included.</span>",
        versionMismatched: "<span>The included Syncfusion<sup>®</sup> license key is invalid.</span>",
        platformMismatched: "<span>The included Syncfusion<sup>®</sup> license key is invalid.</span>",
        invalidKey: "<span>The included Syncfusion<sup>®</sup> license key is invalid.</span>"
      };
      this.minVersion = null;
      this.manager = /* @__PURE__ */ function() {
        var licKey = null;
        function set(key2) {
          licKey = key2;
        }
        function get() {
          return licKey;
        }
        return {
          setKey: set,
          getKey: get
        };
      }();
      this.npxManager = /* @__PURE__ */ function() {
        var npxLicKey = "npxKeyReplace";
        function get() {
          return npxLicKey;
        }
        return {
          getKey: get
        };
      }();
      this.manager.setKey(key);
    }
    LicenseValidator2.prototype.validate = function() {
      var contentKey = [
        115,
        121,
        110,
        99,
        102,
        117,
        115,
        105,
        111,
        110,
        46,
        108,
        105,
        99,
        101,
        110,
        115,
        101,
        67,
        111,
        110,
        116,
        101,
        110,
        116
      ];
      var URLKey = [
        115,
        121,
        110,
        99,
        102,
        117,
        115,
        105,
        111,
        110,
        46,
        99,
        108,
        97,
        105,
        109,
        65,
        99,
        99,
        111,
        117,
        110,
        116,
        85,
        82,
        76
      ];
      if (!this.isValidated && (containerObject && !getValue(convertToChar(bypassKey), containerObject) && !getValue("Blazor", containerObject))) {
        var validateMsg = void 0;
        var validateURL = void 0;
        if (this.manager && this.manager.getKey() || this.npxManager && this.npxManager.getKey() !== "npxKeyReplace") {
          var result = this.getInfoFromKey();
          if (result && result.length) {
            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {
              var res = result_1[_i];
              if (!this.platform.test(res.platform) || res.invalidPlatform) {
                validateMsg = this.errors.platformMismatched;
              } else {
                if (res.minVersion >= res.lastValue && res.minVersion !== res.lastValue || res.lastValue < parseInt(this.version, 10)) {
                  validateMsg = this.errors.versionMismatched;
                  validateMsg = validateMsg.replace("##LicenseVersion", res.version);
                  validateMsg = validateMsg.replace("##Requireversion", this.version + ".x");
                } else {
                  if (res.lastValue == null || isNaN(res.lastValue)) {
                    validateMsg = this.errors.versionMismatched;
                    validateMsg = validateMsg.replace("##LicenseVersion", res.version);
                    validateMsg = validateMsg.replace("##Requireversion", this.version + ".x");
                  }
                }
                if (res.expiryDate) {
                  var expDate = new Date(res.expiryDate);
                  var currDate = /* @__PURE__ */ new Date();
                  if (expDate !== currDate && expDate < currDate) {
                    validateMsg = this.errors.trailExpired;
                  } else {
                    break;
                  }
                }
              }
            }
          } else {
            validateMsg = this.errors.invalidKey;
          }
        } else {
          var licenseContent = getValue(convertToChar(contentKey), containerObject);
          validateURL = getValue(convertToChar(URLKey), containerObject);
          if (licenseContent && licenseContent !== "") {
            validateMsg = licenseContent;
          } else {
            validateMsg = this.errors.noLicense;
          }
        }
        if (validateMsg && typeof document !== "undefined" && !isNullOrUndefined(document)) {
          accountURL = validateURL && validateURL !== "" ? validateURL : "https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=Mjk=&utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information";
          var errorDiv = createElement("div", {
            innerHTML: `<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style="top: 6px;
                    position: absolute;
                    left: 16px;
                    width: 24px;
                    height: 24px;"/>` + validateMsg + ' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href=' + accountURL + ">Claim your free account</a>"
          });
          errorDiv.setAttribute("style", "position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;");
          document.body.appendChild(errorDiv);
          this.isLicensed = false;
        }
        this.isValidated = true;
        setValue(convertToChar(bypassKey), this.isValidated, containerObject);
      }
      return this.isLicensed;
    };
    LicenseValidator2.prototype.getDecryptedData = function(key) {
      try {
        return atob(key);
      } catch (error) {
        return "";
      }
    };
    LicenseValidator2.prototype.getInfoFromKey = function() {
      try {
        var licKey = "";
        var pkey = [
          5439488,
          7929856,
          5111808,
          6488064,
          4587520,
          7667712,
          5439488,
          6881280,
          5177344,
          7208960,
          4194304,
          4456448,
          6619136,
          7733248,
          5242880,
          7077888,
          6356992,
          7602176,
          4587520,
          7274496,
          7471104,
          7143424
        ];
        var decryptedStr = [];
        var resultArray = [];
        var invalidPlatform = false;
        var isNpxKey = false;
        if (this.manager.getKey()) {
          licKey = this.manager.getKey();
        } else {
          isNpxKey = true;
          licKey = this.npxManager.getKey().split("npxKeyReplace")[1];
        }
        var licKeySplit = licKey.split(";");
        for (var _i = 0, licKeySplit_1 = licKeySplit; _i < licKeySplit_1.length; _i++) {
          var lKey = licKeySplit_1[_i];
          var decodeStr = this.getDecryptedData(lKey);
          if (!decodeStr) {
            continue;
          }
          var k = 0;
          var buffr = "";
          if (!isNpxKey) {
            for (var i = 0; i < decodeStr.length; i++, k++) {
              if (k === pkey.length) {
                k = 0;
              }
              var c = decodeStr.charCodeAt(i);
              buffr += String.fromCharCode(c ^ pkey[parseInt(k.toString(), 10)] >> 16);
            }
          } else {
            var charKey = decodeStr[decodeStr.length - 1];
            var decryptedKey = [];
            for (var i = 0; i < decodeStr.length; i++) {
              decryptedKey[parseInt(i.toString(), 10)] = decodeStr[parseInt(i.toString(), 10)].charCodeAt(0) - charKey.charCodeAt(0);
            }
            for (var i = 0; i < decryptedKey.length; i++) {
              buffr += String.fromCharCode(decryptedKey[parseInt(i.toString(), 10)]);
            }
          }
          if (this.platform.test(buffr)) {
            decryptedStr = buffr.split(";");
            invalidPlatform = false;
            if (decryptedStr.length > 3) {
              var minVersion = parseInt(decryptedStr[1].split(".")[0], 10);
              var lastValue = parseInt(decryptedStr[4], 10);
              resultArray.push({
                platform: decryptedStr[0],
                version: decryptedStr[1],
                expiryDate: decryptedStr[2],
                lastValue,
                minVersion
              });
            }
          } else if (buffr && buffr.split(";").length > 3) {
            invalidPlatform = true;
          }
        }
        if (invalidPlatform && !resultArray.length) {
          return [{ invalidPlatform }];
        } else {
          return resultArray.length ? resultArray : null;
        }
      } catch (error) {
        return null;
      }
    };
    return LicenseValidator2;
  }()
);
var licenseValidator = new LicenseValidator();
function convertToChar(cArr) {
  var ret = "";
  for (var _i = 0, cArr_1 = cArr; _i < cArr_1.length; _i++) {
    var arr = cArr_1[_i];
    ret += String.fromCharCode(arr);
  }
  return ret;
}
function registerLicense(key) {
  licenseValidator = new LicenseValidator(key);
}
var validateLicense = function(key) {
  return licenseValidator.validate();
};
var createLicenseOverlay = function() {
  var bannerTemplate = '\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7500 flat and wireframe icons for free with Syncfusion<sup>®</sup> <a href="https://www.syncfusion.com/downloads/metrostudio?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion<sup>®</sup> technical <a href="https://www.syncfusion.com/blogs/?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIyMzAiIGhlaWdodD0iMTU2Ij4KPHBhdGggZD0iTTAgMCBDMTAuMjAxNTE3OTEgOC44MjE1MTgwNSAxNi4yMjU4NjAxNyAxOS4zODQ1MTIyMiAxNy4yODEyNSAzMi45NzI2NTYyNSBDMTcuNDE3OTUwMTYgNDUuOTc2MjU4NTUgMTMuMTkyNTE4MDQgNTcuNjM2ODk1NzMgNC4yNDYwOTM3NSA2Ny4xMzI4MTI1IEMtNS44MzQzNzk4NyA3Ni42NDQzNzA1IC0xNi43MjM2MTUyMyA4MC40NzU4MTc3IC0zMC40MTAxNTYyNSA4MC4yMjI2NTYyNSBDLTQzLjEyNjA0NDAyIDc5LjI2MTgzMzU2IC01NC4yMDMwOTQ1MyA3My40MDM0NzMyNCAtNjIuNzE4NzUgNjMuOTcyNjU2MjUgQy03MS4xNDgwNjkyNSA1MS44OTg2NTk5MiAtNzMuMTk0NzM3MSA0MC4zOTM3NzYxNCAtNzEuNzE4NzUgMjUuOTcyNjU2MjUgQy02OS4wOTkxNjQzNyAxNC41NTg3NDc0NCAtNjIuMzc0NTczNzggNC42NDI1NDI1NiAtNTIuNzE4NzUgLTIuMDI3MzQzNzUgQy0zNS45MDE4NDE2MSAtMTEuOTUyMDc2NTcgLTE1Ljg5MjUyMDU5IC0xMi4xNTE1ODYzNiAwIDAgWiAiIGZpbGw9IiMwODY4NDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzODguNzE4NzUsNDIuMDI3MzQzNzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzcuMzY3MjM5MTYgNC4wNDIzMjQxMSAxMS4xMDI1Mzc1MyAxMS4zOTA0MDEzMyAxNCAxOSBDMTQuMzg5NjU4MjYgMjAuOTg5NzkzMzQgMTQuNzQwMDUyODkgMjIuOTg5MTQ0ODEgMTUgMjUgQzE1LjY2IDI1IDE2LjMyIDI1IDE3IDI1IEMxNy4xMDA1NDY4NyAyNC4xNDQwNjI1IDE3LjIwMTA5Mzc1IDIzLjI4ODEyNSAxNy4zMDQ2ODc1IDIyLjQwNjI1IEMxOC45MTc0Mjc1NSAxNC41MDU2MzU4IDIzLjYwODM5NDI3IDUuNzcxNDMyNzMgMzAuMTc5Njg3NSAwLjg5NDUzMTI1IEMzMy43MzEzMzY1NCAtMC44NTA4MDcwMSAzNi4wNzI1NTM3NiAtMC42MjM0MDQxNyA0MCAwIEM0Ny43ODg2NDkxMyAzLjU4Mjc3ODYgNTEuMzQ3MDc2MTEgMTAuOTI1MDE3NDYgNTQuMzUyNzgzMiAxOC41ODg4NjcxOSBDNjAuNjYxMjYyNjMgMzUuNzMzMjUxOTkgNjMuMjM3ODY0ODggNTQuNDE0MDMxNTkgNjMuMDYyNSA3Mi42MjUgQzYzLjA1Nzk4ODI4IDczLjUzMzc4OTA2IDYzLjA1MzQ3NjU2IDc0LjQ0MjU3ODEyIDYzLjA0ODgyODEyIDc1LjM3ODkwNjI1IEM2My4wMzcyMTIwMiA3Ny41ODU5NjY5NSA2My4wMTkyODQ1MyA3OS43OTI5OTI5OSA2MyA4MiBDNTkuMDQgODIgNTUuMDggODIgNTEgODIgQzUwLjkzMDA2ODM2IDgwLjkwMzQ5MTIxIDUwLjg2MDEzNjcyIDc5LjgwNjk4MjQyIDUwLjc4ODA4NTk0IDc4LjY3NzI0NjA5IEM1MC4zMzA4MzIxNSA0MS45ODYzMDU3MyA1MC4zMzA4MzIxNSA0MS45ODYzMDU3MyAzOSA4IEMzOC4wMSA3LjY3IDM3LjAyIDcuMzQgMzYgNyBDMjUuMTQyMTkxNjggMTYuMjQ0MTIxMzEgMjQuODI2NDcwMzkgMzguNDA3NTg2NzUgMjMuNjgzNTkzNzUgNTEuNjcyMzYzMjggQzIzLjA0MTM0NzcxIDU5Ljc3NjY1NDY5IDIyLjUwMDE0OTM2IDY3Ljg4NTgxMjE3IDIyIDc2IEMxOC4wNCA3NiAxNC4wOCA3NiAxMCA3NiBDOS44OTUxMDI1NCA3NC40NzU4NDQ3MyA5Ljg5NTEwMjU0IDc0LjQ3NTg0NDczIDkuNzg4MDg1OTQgNzIuOTIwODk4NDQgQzkuMjg4Njk2MTIgMzkuNjQwNjkzMTMgOS4yODg2OTYxMiAzOS42NDA2OTMxMyAtMSA5IEMtMy4wMzU2NDA0IDcuNzQxNDM2NTkgLTMuMDM1NjQwNCA3Ljc0MTQzNjU5IC01IDcgQy0xNS44NDgzODY5NyAxNi40OTIzMzg2IC0xNi4wNTg3MjYyNSA0MC4yNTk3NTY0MSAtMTcgNTQgQy0xNy40NzQyMTEwMiA2My4zMjgyOTc4NCAtMTcuNzQ3NjYxNTkgNzIuNjYzNDc4NzQgLTE4IDgyIEMtMjIuMjkgODIgLTI2LjU4IDgyIC0zMSA4MiBDLTMxLjg5MjU5MjA1IDU1LjgxNzI5OTc3IC0yOS45NTA2NDQ2MiAyMi44Mzc1NTI0MSAtMTIgMiBDLTguNDczMzg5NDMgLTAuNjQ0OTU3OTMgLTQuMjE5NTgzOTggLTAuOTU4OTk2MzYgMCAwIFogIiBmaWxsPSIjRkZDQzAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MjgsMzcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzUuODg3MjkwNzMgMS40NDk4NTUxOCA5LjE2NjM4NTEzIDEuMjgxNTYyNTYgMTQuNzUgLTAuODM5ODQzNzUgQzIwLjM1Nzc0OTYyIC0yLjU0NjE0OTE0IDI1LjU0MDY3MjkyIC0xLjM4Mjk1NTEgMzAuNjI1IDEuMjUgQzMyLjkzNzM1MDYzIDMuMjczMzA2OCAzNC4xMDM0MzU0MiA0LjU3NzExOTE4IDM1LjEyNSA3LjQzNzUgQzM0LjM0MTI1IDguMTggMzMuNTU3NSA4LjkyMjUgMzIuNzUgOS42ODc1IEMyOS4xMTkwMTcwMyAxMy40OTEzODY5MiAyOC4yMzgzODk0NyAxNS4wMzE0NzA1OCAyNy44MTI1IDIwLjMxMjUgQzI3Ljk2MDg4MjA0IDI1LjAxNzA4MzQ0IDI5LjE5MzUzOTM2IDI4LjU3NDg0NDU4IDMyLjY2MDE1NjI1IDMxLjkxNzk2ODc1IEMzNC4xMDgzOTEwMSAzMy4xNDAyMzc4IDM1LjYxMjk3ODE1IDM0LjI5NTA4MzQ5IDM3LjEyNSAzNS40Mzc1IEMzNi4wNzAxOTM1MiA0Mi40Njk1NDMyIDMyLjAzNjA5MDQ5IDQ3Ljk3MzE5OTEgMjcuNzUgNTMuNSBDMjQuMjczODU5MzcgNTYuMDY1NzIyODUgMjEuNDA5Njc2NTkgNTYuNjI0MTU5MTggMTcuMTI1IDU2LjQzNzUgQzE1LjExMjc3OTUzIDU1LjgwODY4MTEgMTMuMTEyMjMyNjggNTUuMTQxMzExNTcgMTEuMTI1IDU0LjQzNzUgQzcuMTMyMjAwNjEgNTQuMDEwODUwMDcgMy44Njk5NzIwNCA1NC4xNzkwNDAzMSAwLjA2MjUgNTUuNSBDLTMuNzQ1OTgyNzYgNTYuNzE1NDczMjIgLTYuMDIwMDcxMDYgNTYuNDcwMDcwMjUgLTkuODc1IDU1LjQzNzUgQy0xNy44OTY4MjA0OCA1MC4zNjI0NzA3MiAtMjMuMjI0ODkxNjcgNDAuMjQ1NjM5MjYgLTI1LjQzMzU5Mzc1IDMxLjEzMjgxMjUgQy0yNi42OTE4Nzk2IDIzLjQ0OTQ3NDE1IC0yNy4zMTA4Njc4MiAxNC4yMDI1NjkzMiAtMjIuODc1IDcuNDM3NSBDLTE5LjE4NzExNTEzIDMuMTY0NjQwMjkgLTE0Ljk1ODc1MDk1IC0wLjQ2NDczMTYxIC05LjI2NTYyNSAtMS41NzQyMTg3NSBDLTYuMDIyMDAxNTYgLTEuNTU4MzE4NjQgLTMuMTQ1MDkxMDYgLTAuNzc5NDY1MjEgMCAwIFogIiBmaWxsPSIjMDAwMDAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMjIuODc1LDU1LjU2MjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuOTk4NjY1NzYgNi41NjU2MTQ1OCAxMy4yMzU0MjQ3IDEzLjIxNDc1OTU1IDE0LjE3OTY4NzUgMjMuMTg3NSBDMTMuOTYxMTk2MzQgMjguMjczOTc0MSAxMi4yNTY2NDk1NCAzMi4wNjY5ODMyNiA5LjAzNTE1NjI1IDM1Ljk3NjU2MjUgQzAuNTMzMzg4MDQgNDMuNTgzNDA3NzQgLTguOTc3NTY4MjUgNDUuMDAzODkwNjcgLTE5Ljg1NTQ2ODc1IDQ0Ljg5ODQzNzUgQy0yMS4xODA5NDcyNyA0NC44OTE2Njk5MiAtMjEuMTgwOTQ3MjcgNDQuODkxNjY5OTIgLTIyLjUzMzIwMzEyIDQ0Ljg4NDc2NTYyIEMtMjQuNzAzMTU0MzQgNDQuODczMDM2MTYgLTI2Ljg3MzA3MDQ3IDQ0Ljg1NTEwMjQ1IC0yOS4wNDI5Njg3NSA0NC44MzU5Mzc1IEMtMjkuMzcyOTY4NzUgNDUuNDk1OTM3NSAtMjkuNzAyOTY4NzUgNDYuMTU1OTM3NSAtMzAuMDQyOTY4NzUgNDYuODM1OTM3NSBDLTMyLjQxNzk2ODc1IDQ2Ljk2MDkzNzUgLTMyLjQxNzk2ODc1IDQ2Ljk2MDkzNzUgLTM1LjA0Mjk2ODc1IDQ2LjgzNTkzNzUgQy0zNy4wNDI5Njg3NSA0NC44MzU5Mzc1IC0zNy4wNDI5Njg3NSA0NC44MzU5Mzc1IC0zNy40MTQwNjI1IDQyLjM1NTQ2ODc1IEMtMzcuNzgyMzI5OTcgMzkuNzMzNjQ1MzEgLTM3Ljc4MjMyOTk3IDM5LjczMzY0NTMxIC0zOS44MjgxMjUgMzguNTM1MTU2MjUgQy00MC41Nzk2NDg0NCAzOC4yMDEyODkwNiAtNDEuMzMxMTcxODcgMzcuODY3NDIxODcgLTQyLjEwNTQ2ODc1IDM3LjUyMzQzNzUgQy00Ny4zNTI0NjU4MyAzNC44NTM3NjUzOCAtNTEuNDU1NzUyNzEgMzEuNTMwNDMxOTUgLTU1LjA0Mjk2ODc1IDI2LjgzNTkzNzUgQy01Ni4wNDI5Njg3NSAyMy4zMzU5Mzc1IC01Ni4wNDI5Njg3NSAyMy4zMzU5Mzc1IC01Ni4wNDI5Njg3NSAyMC44MzU5Mzc1IEMtNTEuMzM2NTk3OTUgMTYuMTI5NTY2NyAtNDUuMzAzOTE4MTcgMTQuNTc0NTc2MzMgLTM5LjA0Mjk2ODc1IDEyLjgzNTkzNzUgQy0zOC4zODI5Njg3NSAxMi44MzU5Mzc1IC0zNy43MjI5Njg3NSAxMi44MzU5Mzc1IC0zNy4wNDI5Njg3NSAxMi44MzU5Mzc1IEMtMzYuOTIxNzk2ODggMTEuOTA5MTAxNTYgLTM2LjgwMDYyNSAxMC45ODIyNjU2MiAtMzYuNjc1NzgxMjUgMTAuMDI3MzQzNzUgQy0zNi41MDgyMDMxMyA4LjgyOTgwNDY5IC0zNi4zNDA2MjUgNy42MzIyNjU2MyAtMzYuMTY3OTY4NzUgNi4zOTg0Mzc1IEMtMzYuMDA1NTQ2ODggNS4yMDM0NzY1NiAtMzUuODQzMTI1IDQuMDA4NTE1NjMgLTM1LjY3NTc4MTI1IDIuNzc3MzQzNzUgQy0zNS40NjY5NTMxMyAxLjgwNjY3OTY5IC0zNS4yNTgxMjUgMC44MzYwMTU2MyAtMzUuMDQyOTY4NzUgLTAuMTY0MDYyNSBDLTM0LjM4Mjk2ODc1IC0wLjQ5NDA2MjUgLTMzLjcyMjk2ODc1IC0wLjgyNDA2MjUgLTMzLjA0Mjk2ODc1IC0xLjE2NDA2MjUgQy0zMC4wNzc2OTExNyAxLjI4MTI3NiAtMjkuNDg3MTQ2NjEgMy4yODE5NjA5NyAtMjguODU1NDY4NzUgNy4wMjM0Mzc1IEMtMjguNjk2OTE0MDYgNy45MjQ0OTIxOSAtMjguNTM4MzU5MzggOC44MjU1NDY4OCAtMjguMzc1IDkuNzUzOTA2MjUgQy0yOC4yNjU0Mjk2OSAxMC40NDA5NzY1NiAtMjguMTU1ODU5MzcgMTEuMTI4MDQ2ODcgLTI4LjA0Mjk2ODc1IDExLjgzNTkzNzUgQy0yNy4xMjUxNTYyNSAxMS45MzM5MDYyNSAtMjYuMjA3MzQzNzUgMTIuMDMxODc1IC0yNS4yNjE3MTg3NSAxMi4xMzI4MTI1IEMtMTguMDQ1MDgyNTkgMTMuMDEyMTUwNTIgLTEyLjIzNzYzMDI1IDEzLjk0OTA5MTA3IC02LjA0Mjk2ODc1IDE3LjgzNTkzNzUgQy00LjY2MTcxODU3IDIwLjU5ODQzNzg2IC00Ljg1MjE3NTY5IDIyLjc4MzI0ODQ5IC01LjA0Mjk2ODc1IDI1LjgzNTkzNzUgQy03LjA0Mjk2ODc1IDI3LjgzNTkzNzUgLTcuMDQyOTY4NzUgMjcuODM1OTM3NSAtMTAuNjY3OTY4NzUgMjcuOTYwOTM3NSBDLTExLjc4MTcxODc1IDI3LjkxOTY4NzUgLTEyLjg5NTQ2ODc1IDI3Ljg3ODQzNzUgLTE0LjA0Mjk2ODc1IDI3LjgzNTkzNzUgQy0xMy4zODI5Njg3NSAyNi41MTU5Mzc1IC0xMi43MjI5Njg3NSAyNS4xOTU5Mzc1IC0xMi4wNDI5Njg3NSAyMy44MzU5Mzc1IEMtMTUuNzk1MjI3MTUgMjIuMTc5MDk2MTMgLTE5LjMwNjQ5OTM2IDIxLjMzMzg1NTg3IC0yMy4zNTU0Njg3NSAyMC43MTA5Mzc1IEMtMjUuMjMyMzQzNzUgMjAuNDIyMTg3NSAtMjcuMTA5MjE4NzUgMjAuMTMzNDM3NSAtMjkuMDQyOTY4NzUgMTkuODM1OTM3NSBDLTI4LjU0Nzk2ODc1IDI4LjI1MDkzNzUgLTI4LjU0Nzk2ODc1IDI4LjI1MDkzNzUgLTI4LjA0Mjk2ODc1IDM2LjgzNTkzNzUgQy0xMi4wNjE3Nzk5MSAzNy4zODI2NDE3MiAtMTIuMDYxNzc5OTEgMzcuMzgyNjQxNzIgMi4wODIwMzEyNSAzMC42NDg0Mzc1IEM0Ljc2MDcwNTQxIDI2LjYzMDQyNjI2IDQuNzc1MjY3NDcgMjMuNTI1MDYwNDMgMy45NTcwMzEyNSAxOC44MzU5Mzc1IEMxLjAxMTM1NTYzIDguNTI2MDcyODEgLTguODY3NTEyMiAyLjM4NDg3MDU4IC0xNy43MzQzNzUgLTIuNTYyNSBDLTMxLjY3NjMzMzk0IC05LjMxMTI2NDA3IC00NS42NDMxNzQyMiAtMTEuNTY4NzI4NjMgLTYxLjA0Mjk2ODc1IC0xMS4xNjQwNjI1IEMtNjEuMDQyOTY4NzUgLTEwLjE3NDA2MjUgLTYxLjA0Mjk2ODc1IC05LjE4NDA2MjUgLTYxLjA0Mjk2ODc1IC04LjE2NDA2MjUgQy02My4wMjI5Njg3NSAtOC4xNjQwNjI1IC02NS4wMDI5Njg3NSAtOC4xNjQwNjI1IC02Ny4wNDI5Njg3NSAtOC4xNjQwNjI1IEMtNjcuNzkyOTY4NzUgLTkuOTE0MDYyNSAtNjcuNzkyOTY4NzUgLTkuOTE0MDYyNSAtNjguMDQyOTY4NzUgLTEyLjE2NDA2MjUgQy02NS45Njg1NDMxOCAtMTUuNTIyNjU2MjggLTYzLjQ3ODY1NTM5IC0xNi41NTA0NzkzNSAtNTkuNzkyOTY4NzUgLTE3LjQ3NjU2MjUgQy0zOS4xODA0NTMyNSAtMjAuODM2MzExNzIgLTE1Ljg1MjQ2NDU2IC0xMy4zOTczMDI3NCAwIDAgWiBNLTQ3LjM1NTQ2ODc1IDIwLjgzNTkzNzUgQy00OC4yMzg0NzY1NiAyMS4wMjE1NjI1IC00OS4xMjE0ODQzOCAyMS4yMDcxODc1IC01MC4wMzEyNSAyMS4zOTg0Mzc1IEMtNTAuNjk1MTE3MTkgMjEuNTQyODEyNSAtNTEuMzU4OTg0MzcgMjEuNjg3MTg3NSAtNTIuMDQyOTY4NzUgMjEuODM1OTM3NSBDLTUyLjUwMDI0MDQ0IDI1LjcyNDc4Mzk5IC01Mi41MDAyNDA0NCAyNS43MjQ3ODM5OSAtNTAuNTAzOTA2MjUgMjcuNDY4NzUgQy00Ni40NjI2MDg1IDMwLjM1OTcxNTgxIC00Mi45NDE1MjEwNyAzMi42MTEyOTk0MiAtMzguMDQyOTY4NzUgMzMuODM1OTM3NSBDLTM2LjcwMzk1MDgzIDMyLjcyNDY3MDkxIC0zNi43MDM5NTA4MyAzMi43MjQ2NzA5MSAtMzYuOTQ1MzEyNSAyOS44OTQ1MzEyNSBDLTM2Ljk1NjkxNDA2IDI4LjY5OTU3MDMxIC0zNi45Njg1MTU2MyAyNy41MDQ2MDkzOCAtMzYuOTgwNDY4NzUgMjYuMjczNDM3NSBDLTM2Ljk4OTQ5MjE5IDI1LjA3NTg5ODQ0IC0zNi45OTg1MTU2MiAyMy44NzgzNTkzOCAtMzcuMDA3ODEyNSAyMi42NDQ1MzEyNSBDLTM3LjAxOTQxNDA2IDIxLjcxNzY5NTMxIC0zNy4wMzEwMTU2MyAyMC43OTA4NTkzNyAtMzcuMDQyOTY4NzUgMTkuODM1OTM3NSBDLTQwLjYzODE2MTY3IDE5LjczMjI5MjMgLTQzLjg0MDg2MTA3IDIwLjA4NjE1NDUzIC00Ny4zNTU0Njg3NSAyMC44MzU5Mzc1IFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NTEuMDQyOTY4NzUsNTguMTY0MDYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMy4zIDAgNi42IDAgMTAgMCBDMTMuOTk1NTQ4MTcgOC40NTIxMjExMyAxNi45NDE0Njg4MSAxNy4xNzE5NjY3OSAyMCAyNiBDMjAuMzMgMTcuNDIgMjAuNjYgOC44NCAyMSAwIEMyNC42MyAwIDI4LjI2IDAgMzIgMCBDMzIgMTguNDggMzIgMzYuOTYgMzIgNTYgQzI4IDU3IDI4IDU3IDIwIDU3IEMxNy4zNiA0OS40MSAxNC43MiA0MS44MiAxMiAzNCBDMTEuNjcgNDIuMjUgMTEuMzQgNTAuNSAxMSA1OSBDNS41NTUgNTkuNDk1IDUuNTU1IDU5LjQ5NSAwIDYwIEMwIDQwLjIgMCAyMC40IDAgMCBaICIgZmlsbD0iI0Q4MUYyNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTk1LDUyKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjE3MDQ2ODc1IDAuMDI3MDcwMzEgMi4zNDA5Mzc1IDAuMDU0MTQwNjMgMy41NDY4NzUgMC4wODIwMzEyNSBDNC40Mzg5MDYyNSAwLjExNjgzNTk0IDUuMzMwOTM3NSAwLjE1MTY0MDYyIDYuMjUgMC4xODc1IEM3LjUzODE4NzMxIDYuMjE4NDU0OTcgOC44MTk3NDQ4OSAxMi4yNTA3NjY0NyAxMC4wOTUyMTQ4NCAxOC4yODQ0MjM4MyBDMTAuNTI5OTIzMzUgMjAuMzM2MjQxNDggMTAuOTY2NDMxOTEgMjIuMzg3Njc4NjMgMTEuNDA0Nzg1MTYgMjQuNDM4NzIwNyBDMTIuMDM1MDI5NTggMjcuMzg5MTUwNjYgMTIuNjU4NzU5NzQgMzAuMzQwODk0MzcgMTMuMjgxMjUgMzMuMjkyOTY4NzUgQzEzLjQ3ODExNDAxIDM0LjIwNzczNDgzIDEzLjY3NDk3ODAzIDM1LjEyMjUwMDkyIDEzLjg3NzgwNzYyIDM2LjA2NDk4NzE4IEMxNC4wNTc5OTQzOCAzNi45MjU1MDE4NiAxNC4yMzgxODExNSAzNy43ODYwMTY1NCAxNC40MjM4MjgxMiAzOC42NzI2MDc0MiBDMTQuNTgzNzEyMTYgMzkuNDI1Mzk0NzQgMTQuNzQzNTk2MTkgNDAuMTc4MTgyMDcgMTQuOTA4MzI1MiA0MC45NTM3ODExMyBDMTUuMjUgNDMuMTg3NSAxNS4yNSA0My4xODc1IDE1LjI1IDQ4LjE4NzUgQzExLjI5IDQ4LjE4NzUgNy4zMyA0OC4xODc1IDMuMjUgNDguMTg3NSBDMi45MiA0NS44Nzc1IDIuNTkgNDMuNTY3NSAyLjI1IDQxLjE4NzUgQy0yLjcgNDEuNTE3NSAtNy42NSA0MS44NDc1IC0xMi43NSA0Mi4xODc1IEMtMTMuNDEgNDQuMTY3NSAtMTQuMDcgNDYuMTQ3NSAtMTQuNzUgNDguMTg3NSBDLTE5LjM3IDQ4LjE4NzUgLTIzLjk5IDQ4LjE4NzUgLTI4Ljc1IDQ4LjE4NzUgQy0yNi44MDgzMTEyNiA0Mi4yMDY0MzQ4NSAtMjQuNzAyMzE0NTggMzYuMzU1OTk3NzMgLTIyLjMxNjQwNjI1IDMwLjUzOTA2MjUgQy0yMS45OTcxOTcxMSAyOS43NTk4NTQ0MyAtMjEuNjc3OTg3OTggMjguOTgwNjQ2MzYgLTIxLjM0OTEwNTgzIDI4LjE3NzgyNTkzIEMtMjAuNjc5NDY4MTMgMjYuNTQ4NjI2IC0yMC4wMDc5ODYzNCAyNC45MjAxODI4OSAtMTkuMzM0NzE2OCAyMy4yOTI0ODA0NyBDLTE4LjY0OTcxMDY3IDIxLjYzMDYwMDMgLTE3Ljk3MDA3MDg4IDE5Ljk2NjQ5ODY1IC0xNy4yOTU2NTQzIDE4LjMwMDI5Mjk3IEMtMTYuMzEzOTk1MTggMTUuODc1MDE3NSAtMTUuMzE3MDg2OTUgMTMuNDU2NTQxMzggLTE0LjMxNjQwNjI1IDExLjAzOTA2MjUgQy0xNC4wMTgzNTU4NyAxMC4yOTUzMjM3OSAtMTMuNzIwMzA1NDggOS41NTE1ODUwOCAtMTMuNDEzMjIzMjcgOC43ODUzMDg4NCBDLTEwLjMyNjYxNzczIDEuNDMzOTIzMTMgLTcuOTE5NDc2MjUgLTAuMjM3NTg0MjkgMCAwIFogTS0zLjc1IDE1LjE4NzUgQy01LjQgMjAuMTM3NSAtNy4wNSAyNS4wODc1IC04Ljc1IDMwLjE4NzUgQy02LjExIDMwLjE4NzUgLTMuNDcgMzAuMTg3NSAtMC43NSAzMC4xODc1IEMtMS40MDM0OTYzMyAyMi42MzcxMTU3OCAtMS40MDM0OTYzMyAyMi42MzcxMTU3OCAtMi43NSAxNS4xODc1IEMtMy4wOCAxNS4xODc1IC0zLjQxIDE1LjE4NzUgLTMuNzUgMTUuMTg3NSBaICIgZmlsbD0iIzIzNDM5QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcwLjc1LDUzLjgxMjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuNzg5Mjg3NzggMi4zMDgzNzYwOSAzLjc1MTc2ODg4IDQuMjY1OTI4MzQgNC4yNzM0Mzc1IDcuOTEwMTU2MjUgQzQuNjM2ODE4NzQgMTUuNjExMDQzMzQgMS45NDAyMDM5IDIxLjI4NjM5NDY0IC0yLjc5Njg3NSAyNy4yNjk1MzEyNSBDLTkuMDAxNDUwMzQgMzMuOTU4MDYzNDcgLTE1LjA5NjEwOTIxIDM3LjE0MTAyMzg5IC0yNC4yNSAzNy41IEMtMjguMDQyMTE1NTYgMzcuMzY0OTExOTEgLTI5Ljc2NDgxODA0IDM3LjEzMTcwMTkgLTMzLjEyNSAzNS4yNSBDLTM2LjYxNDUyNjY5IDMxLjA2MjU2Nzk3IC0zNy40NTgyNTE2IDI3Ljc5OTc2MzM3IC0zNy4zMDg1OTM3NSAyMi40Mjk2ODc1IEMtMzYuMzE4MDI0MjMgMTQuNjMwNTE5ODYgLTMxLjc1MTQwMDU4IDguMTU2MDQwNzUgLTI2IDMgQy0xNy42OTY1MDc2NiAtMi42NTI1NDYzMSAtOS4yMjAwNTQ5MyAtNS42NTc3NjA5OCAwIDAgWiAiIGZpbGw9IiMwNjg4MkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNDUsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNzQ5ODUzMjUgLTAuMDg3MTc0NyA3LjQ5OTQ0NTU1IC0wLjE0MDQ1MDAzIDExLjI1IC0wLjE4NzUgQzEyLjMxMzQ3NjU2IC0wLjIxMjYzNjcyIDEzLjM3Njk1MzEyIC0wLjIzNzc3MzQ0IDE0LjQ3MjY1NjI1IC0wLjI2MzY3MTg4IEMxNS40OTc0NjA5NCAtMC4yNzMzMzk4NCAxNi41MjIyNjU2MyAtMC4yODMwMDc4MSAxNy41NzgxMjUgLTAuMjkyOTY4NzUgQzE4LjUyMDc1MTk1IC0wLjMwODY3OTIgMTkuNDYzMzc4OTEgLTAuMzI0Mzg5NjUgMjAuNDM0NTcwMzEgLTAuMzQwNTc2MTcgQzIzLjU2MjEwMzM5IDAuMDc0NjIyNTkgMjQuODI1NjM1MDMgMC43MTY2NzQ2NSAyNyAzIEMyNy45MTMwODU5NCA1LjYzNTQ5ODA1IDI3LjkxMzA4NTk0IDUuNjM1NDk4MDUgMjguNDg0Mzc1IDguNzYxNzE4NzUgQzI4LjgwMzQxNzk3IDEwLjQzOTExMTMzIDI4LjgwMzQxNzk3IDEwLjQzOTExMTMzIDI5LjEyODkwNjI1IDEyLjE1MDM5MDYyIEMyOS4zMzM4NjcxOSAxMy4zMTc2MzY3MiAyOS41Mzg4MjgxMiAxNC40ODQ4ODI4MSAyOS43NSAxNS42ODc1IEMyOS45NzA0Mjk2OSAxNi44NjYzNDc2NiAzMC4xOTA4NTkzOCAxOC4wNDUxOTUzMSAzMC40MTc5Njg3NSAxOS4yNTk3NjU2MiBDMzAuOTYwMTAyNjQgMjIuMTcwNzg4OTEgMzEuNDg2NzY4MjIgMjUuMDgzNzY2MzEgMzIgMjggQzM1LjA3NTc1MDg3IDIxLjMyMzQ4NDU3IDM4LjA0NTYyMTcyIDE0LjYyMjgwNzQ2IDQwLjgxMjUgNy44MTI1IEM0MS4xMjM4MDg1OSA3LjA1MTMwODU5IDQxLjQzNTExNzE5IDYuMjkwMTE3MTkgNDEuNzU1ODU5MzggNS41MDU4NTkzOCBDNDIuNTA1ODE1MTcgMy42NzEzNTIxMyA0My4yNTMxOTk4MiAxLjgzNTc5NDExIDQ0IDAgQzQ4LjI5IDAgNTIuNTggMCA1NyAwIEM1NS44NzQ5NzQ1OCA2Ljc1MDE1MjU0IDU1Ljg3NDk3NDU4IDYuNzUwMTUyNTQgNTQuMzQxNzk2ODggMTAuMzIxMjg5MDYgQzU0LjAwNDc0NzMxIDExLjExNTIxMDU3IDUzLjY2NzY5Nzc1IDExLjkwOTEzMjA4IDUzLjMyMDQzNDU3IDEyLjcyNzExMTgyIEM1Mi45NTY4Nzg2NiAxMy41NjQ4MjExNyA1Mi41OTMzMjI3NSAxNC40MDI1MzA1MiA1Mi4yMTg3NSAxNS4yNjU2MjUgQzUxLjg0NTIwMzg2IDE2LjE0MDIzMzc2IDUxLjQ3MTY1NzcxIDE3LjAxNDg0MjUzIDUxLjA4Njc5MTk5IDE3LjkxNTk1NDU5IEM0OS44OTczNDQ2IDIwLjY5NjY1Mjc4IDQ4LjY5ODc0NTQ1IDIzLjQ3MzI5OTM5IDQ3LjUgMjYuMjUgQzQ2LjY5MzQyMDAxIDI4LjEzMjU1OTY1IDQ1Ljg4NzQyNDAyIDMwLjAxNTM2OTYzIDQ1LjA4MjAzMTI1IDMxLjg5ODQzNzUgQzQzLjYxMDkxMDIyIDM1LjMzMjU2NDA1IDQyLjEzODAzMjE4IDM4Ljc2NTkwNDg3IDQwLjY1ODIwMzEyIDQyLjE5NjI4OTA2IEM0MC4zNjE0MzY3NyA0Mi44ODQzNDYzMSA0MC4wNjQ2NzA0MSA0My41NzI0MDM1NiAzOS43NTg5MTExMyA0NC4yODEzMTEwNCBDMzkuMjA1MDIxMiA0NS41MzU2OTMxMSAzOC42MTMyMzIxNyA0Ni43NzM1MzU2NyAzOCA0OCBDMzMuMzggNDggMjguNzYgNDggMjQgNDggQzIzLjcxODAxNzU4IDQ2Ljg2OTgxNDQ1IDIzLjQzNjAzNTE2IDQ1LjczOTYyODkxIDIzLjE0NTUwNzgxIDQ0LjU3NTE5NTMxIEMyMi4wOTM1MjM1MyA0MC4zNzQ2MTE1MyAyMS4wMjMxNzA3NiAzNi4xNzg4ODk2NSAxOS45NDcyNjU2MiAzMS45ODQzNzUgQzE5LjQ4NDU3MjAzIDMwLjE2OTg5MDMxIDE5LjAyNjgzOTQ1IDI4LjM1NDEzMjkyIDE4LjU3NDIxODc1IDI2LjUzNzEwOTM4IEMxNy45MjE5MzU4OSAyMy45MjIyNTYxNiAxNy4yNTE4MjE4MSAyMS4zMTI1MzE3MyAxNi41NzgxMjUgMTguNzAzMTI1IEMxNi4yODA5ODYwMiAxNy40ODcyODcyOSAxNi4yODA5ODYwMiAxNy40ODcyODcyOSAxNS45Nzc4NDQyNCAxNi4yNDY4ODcyMSBDMTQuODEwMjA5MzQgMTEuODA0OTMzNDYgMTMuNzk5Njc2MzYgOC44OTA1NzQxMSAxMCA2IEM3LjQ0MzcyNDc1IDQuODk3OTA2NjcgNy40NDM3MjQ3NSA0Ljg5NzkwNjY3IDQuNzUgNC4yNSBDMy44NTc5Njg3NSA0LjAwNzY1NjI1IDIuOTY1OTM3NSAzLjc2NTMxMjUgMi4wNDY4NzUgMy41MTU2MjUgQzEuMzcxNDA2MjUgMy4zNDU0Njg3NSAwLjY5NTkzNzUgMy4xNzUzMTI1IDAgMyBDMCAyLjAxIDAgMS4wMiAwIDAgWiAiIGZpbGw9IiMyMTI5NjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2LDU0KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjYzIDAgNy4yNiAwIDExIDAgQzE1IDkuNjI1IDE1IDkuNjI1IDE1IDEzIEMxNS42NiAxMyAxNi4zMiAxMyAxNyAxMyBDMTcuMTkzMzU5MzggMTIuMzk2NzE4NzUgMTcuMzg2NzE4NzUgMTEuNzkzNDM3NSAxNy41ODU5Mzc1IDExLjE3MTg3NSBDMTcuODQ2MzI4MTIgMTAuMzcyNjU2MjUgMTguMTA2NzE4NzUgOS41NzM0Mzc1IDE4LjM3NSA4Ljc1IEMxOC43NTc4NTE1NiA3LjU2NjY0MDYyIDE4Ljc1Nzg1MTU2IDcuNTY2NjQwNjIgMTkuMTQ4NDM3NSA2LjM1OTM3NSBDMjAgNCAyMCA0IDIyIDAgQzI1LjYzIDAgMjkuMjYgMCAzMyAwIEMzMS42MTIzNzc3OCA0LjQ4OTM2NjAxIDMwLjA5OTAyNzU4IDguODM1MTMyMDUgMjguMjA3MDMxMjUgMTMuMTM2NzE4NzUgQzI3LjcyNjY1NDA1IDE0LjI0Mjg1NTIyIDI3LjcyNjY1NDA1IDE0LjI0Mjg1NTIyIDI3LjIzNjU3MjI3IDE1LjM3MTMzNzg5IEMyNi41ODgzNzkzNiAxNi44NTIwMjc5OSAyNS45MjY0NjI4MyAxOC4zMjY4MDAwNiAyNS4yNDk3NTU4NiAxOS43OTQ2Nzc3MyBDMjEuMjM0Nzg2MTQgMjkuMDI3NTEyNzMgMjUuMDc1MDY3NzkgMzYuMzYzMTg5NTkgMjguNTYyNSA0NS4yNSBDMjkuNDAxNTk1MTQgNDcuMzk5MzA1OTEgMzAuMjM2NDQwNzggNDkuNTUwMjc3MTYgMzEuMDY2NDA2MjUgNTEuNzAzMTI1IEMzMS40MzcwOTIyOSA1Mi42NDgzMzAwOCAzMS44MDc3NzgzMiA1My41OTM1MzUxNiAzMi4xODk2OTcyNyA1NC41NjczODI4MSBDMzMgNTcgMzMgNTcgMzMgNjAgQzMxLjU2MTYzMjQ5IDU5Ljg4NTQxMzA3IDMwLjEyNDI5MDM0IDU5Ljc1NzkwODg0IDI4LjY4NzUgNTkuNjI1IEMyNy44ODY5OTIxOSA1OS41NTUzOTA2MyAyNy4wODY0ODQzOCA1OS40ODU3ODEyNSAyNi4yNjE3MTg3NSA1OS40MTQwNjI1IEMyNCA1OSAyNCA1OSAyMSA1NyBDMTkuNjEzMjgxMjUgNTMuOTYwOTM3NSAxOS42MTMyODEyNSA1My45NjA5Mzc1IDE4LjMxMjUgNTAuMzc1IEMxNy44NzU1MDc4MSA0OS4xODY0ODQzNyAxNy40Mzg1MTU2MyA0Ny45OTc5Njg3NSAxNi45ODgyODEyNSA0Ni43NzM0Mzc1IEMxNi42NjIxNDg0NCA0NS44NTgyMDMxMyAxNi4zMzYwMTU2MyA0NC45NDI5Njg3NSAxNiA0NCBDMTQuMjExNzgyMjYgNDYuNjgyMzI2NjEgMTIuNzk4NTczOTYgNDkuMzAyODg5NjEgMTEuMzc1IDUyLjE4NzUgQzEwLjkyODk4NDM4IDUzLjA4ODU1NDY5IDEwLjQ4Mjk2ODc1IDUzLjk4OTYwOTM4IDEwLjAyMzQzNzUgNTQuOTE3OTY4NzUgQzkuNjg1NzAzMTIgNTUuNjA1MDM5MDYgOS4zNDc5Njg3NSA1Ni4yOTIxMDkzNyA5IDU3IEM1LjcgNTYuNjcgMi40IDU2LjM0IC0xIDU2IEMtMC4zOTQ5ODQ5MyA0OS4xNzY3NzQ1NCAyLjkyNjY1MjAyIDQzLjQ2Njc3Nzg3IDUuOTM3NSAzNy40MzE2NDA2MiBDOC40NDU2MTQ0IDMyLjE0NzgyNjM3IDkuNzA2Nzk0NDIgMjguODM0MjUxNjYgOCAyMyBDNi43NTQ5MDE0NiAxOS41MzQxMTc5NSA1LjM3Mjc0NjExIDE2LjE0MTA0NzgxIDMuOTM3NSAxMi43NSBDMy4xOTE5Mjc4NyAxMC45NzU5MjA2OSAyLjQ1MDgyOTQ5IDkuMTk5OTUyNjcgMS43MTQ4NDM3NSA3LjQyMTg3NSBDMS4zODYwNTIyNSA2LjY0NDI0ODA1IDEuMDU3MjYwNzQgNS44NjY2MjEwOSAwLjcxODUwNTg2IDUuMDY1NDI5NjkgQzAgMyAwIDMgMCAwIFogIiBmaWxsPSIjRDgxRTI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTgzLDUyKSIvPgo8cGF0aCBkPSJNMCAwIEMtMC42NiAzLjYzIC0xLjMyIDcuMjYgLTIgMTEgQy0yLjgyNSAxMC44MzUgLTMuNjUgMTAuNjcgLTQuNSAxMC41IEMtMTEuNDA5NDk0MjQgOS40MzI1NTU0MyAtMTEuNDA5NDk0MjQgOS40MzI1NTU0MyAtMTggMTEgQy0xNy45MDQ4MDU0NiAxMi44OTU3NjM2NiAtMTcuOTA0ODA1NDYgMTIuODk1NzYzNjYgLTE3IDE1IEMtMTQuNTcyODYxMyAxNi44NzM4MTgyMSAtMTQuNTcyODYxMyAxNi44NzM4MTgyMSAtMTEuNjI1IDE4LjUgQy03LjkzODczNzE5IDIwLjYzOTc4MzE2IC01LjIyOTM2OTIyIDIyLjMxNTc1MDIyIC0zIDI2IEMtMS41MDg4MTc1MSAzMS42NDUxOTA4NSAtMi4xNzg0MTgzNiAzNC45MjExNTMwNiAtNSA0MCBDLTkuMzQ2NDcyNTcgNDUuMTQ3MTM4NTcgLTEzLjQ5MjA4MjkgNDcuMDc2ODA4NDEgLTIwLjEyNSA0Ny43NSBDLTI1Ljk4NTQzMDQyIDQ4LjIyMDQyOTExIC0zMS4zMDM1NDk3NiA0Ny4zMzMyMTE3NiAtMzcgNDYgQy0zOC4wOTg5ODcwMiA0Mi43MDMwMzg5NSAtMzcuODcxMjQ0NDQgNDEuNTk1MDUwOTcgLTM3LjA2MjUgMzguMzEyNSBDLTM2Ljg2Nzg1MTU2IDM3LjUwNDI1NzgxIC0zNi42NzMyMDMxMyAzNi42OTYwMTU2MyAtMzYuNDcyNjU2MjUgMzUuODYzMjgxMjUgQy0zNi4zMTY2Nzk2OSAzNS4yNDgzOTg0NCAtMzYuMTYwNzAzMTIgMzQuNjMzNTE1NjMgLTM2IDM0IEMtMzQuODQ1IDM0LjMzIC0zMy42OSAzNC42NiAtMzIuNSAzNSBDLTI4LjE4MjA3NzU3IDM2LjA3MzcyODQ5IC0yNC40NDM3NDM0NCAzNi4zMDEyNzA3NCAtMjAgMzYgQy0xOS4wMSAzNS4zNCAtMTguMDIgMzQuNjggLTE3IDM0IEMtMTcuMTc4MjU1OTkgMzIuMDY3MDg1MjEgLTE3LjE3ODI1NTk5IDMyLjA2NzA4NTIxIC0xOCAzMCBDLTE5LjkwMzM3ODEzIDI4LjYwODcxNTU2IC0xOS45MDMzNzgxMyAyOC42MDg3MTU1NiAtMjIuMjUgMjcuNTYyNSBDLTMxLjA3MTA4MzE3IDIyLjkxMzE3MTEzIC0zMS4wNzEwODMxNyAyMi45MTMxNzExMyAtMzIuNjYwMTU2MjUgMTcuOTI5Njg3NSBDLTMzLjUwOTcyNjg3IDEzLjA2MzIxNTAxIC0zMy4wODExMzgwMSA5LjYxMDg4NDM3IC0zMC4yOTI5Njg3NSA1LjUgQy0yMi4zNjg4Mzc3IC0zLjY5Mjk0OTYyIC0xMC42NjIyMzUzMyAtMi42NjU1NTg4MyAwIDAgWiAiIGZpbGw9IiMyMjM5ODUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Niw1NSkiLz4KPHBhdGggZD0iTTAgMCBDNC4yNTM4MDEzOCAxLjUxOTIxNDc4IDUuODUwNjA1NjkgNC4xMzEwOTAyNCA4IDggQzEwLjIxNjIxNjM0IDE0LjEzODE3MjIyIDExLjE3ODUwNDM3IDIwLjIzMzA3NjcgOC41NjI1IDI2LjM3NSBDNyAyOSA3IDI5IDYgMzAgQzMuNjM2NzE4NzUgMzAuMjk2ODc1IDMuNjM2NzE4NzUgMzAuMjk2ODc1IDEgMzAgQy0wLjczMDQ2ODc1IDI4LjM5MDYyNSAtMC43MzA0Njg3NSAyOC4zOTA2MjUgLTIuMTg3NSAyNi4yNSBDLTIuOTIwMzMyMDMgMjUuMjA1ODU5MzggLTIuOTIwMzMyMDMgMjUuMjA1ODU5MzggLTMuNjY3OTY4NzUgMjQuMTQwNjI1IEMtNC45MTMwODMwNCAyMi4xMzk2Nzg4OCAtNS45ODkwNDQ2MiAyMC4xMjczMTg0MyAtNyAxOCBDLTcuMTk5MTYwMTYgMTkuMjY0NTcwMzEgLTcuMTk5MTYwMTYgMTkuMjY0NTcwMzEgLTcuNDAyMzQzNzUgMjAuNTU0Njg3NSBDLTcuNTc4OTQ1MzEgMjEuNjUwMzkwNjIgLTcuNzU1NTQ2ODggMjIuNzQ2MDkzNzUgLTcuOTM3NSAyMy44NzUgQy04LjExMTUyMzQ0IDI0Ljk2NTU0Njg4IC04LjI4NTU0Njg4IDI2LjA1NjA5Mzc1IC04LjQ2NDg0Mzc1IDI3LjE3OTY4NzUgQy05IDMwIC05IDMwIC0xMCAzMiBDLTExLjg3NSAzMS43NSAtMTEuODc1IDMxLjc1IC0xNCAzMSBDLTE1LjI1IDI4LjkzNzUgLTE1LjI1IDI4LjkzNzUgLTE2IDI3IEMtMTYuNDMzMTI1IDI3LjQ3NDM3NSAtMTYuODY2MjUgMjcuOTQ4NzUgLTE3LjMxMjUgMjguNDM3NSBDLTIxLjI2ODUzMTg1IDMyLjEwMDQ5MjQ1IC0yNi43NTQ4NDI1IDMxLjMyNjM3NjY4IC0zMS44MjAzMTI1IDMxLjI4MTI1IEMtMzYuMjA3MDY0MDkgMzAuODkzMjMyNjYgLTM3LjkwMzMwOTI4IDMwLjA5NjY5MDcyIC00MSAyNyBDLTQyLjU2MjUgMjQuNSAtNDIuNTYyNSAyNC41IC00MyAyMiBDLTQxLjYyNSAxOS42ODc1IC00MS42MjUgMTkuNjg3NSAtNDAgMTggQy00MS4zMiAxNy4wMSAtNDIuNjQgMTYuMDIgLTQ0IDE1IEMtNDQgMTEuNzUgLTQ0IDExLjc1IC00MyA4IEMtMzcuODIzNzMwOTQgMy44MDUyMDc0OSAtMzIuMDE2MTEwNTQgMy40NTA1OTcyMiAtMjUuNjI1IDMuNjg3NSBDLTI0LjgxOTMzNTk0IDMuNjk3MTY3OTcgLTI0LjAxMzY3MTg4IDMuNzA2ODM1OTQgLTIzLjE4MzU5Mzc1IDMuNzE2Nzk2ODggQy0xNy4zNDEzMjczMSAzLjgyOTMzNjM1IC0xNy4zNDEzMjczMSAzLjgyOTMzNjM1IC0xNSA1IEMtMTUuMzEyNSA2LjkzNzUgLTE1LjMxMjUgNi45Mzc1IC0xNiA5IEMtMjAuMjg5NzAxMzQgMTAuNDI5OTAwNDUgLTI0LjU3MTM0MzI0IDEwLjQzODEyMTc2IC0yOS4wNjY0MDYyNSAxMC43MTg3NSBDLTMxLjkzMTY1NzQ2IDEwLjgxNTkwNjYxIC0zMS45MzE2NTc0NiAxMC44MTU5MDY2MSAtMzQgMTIgQy0zMy4wMzU3ODEyNSAxMi4xMDk1NzAzMSAtMzIuMDcxNTYyNSAxMi4yMTkxNDA2MiAtMzEuMDc4MTI1IDEyLjMzMjAzMTI1IEMtMjkuODE0ODQzNzUgMTIuNDkwNTg1OTQgLTI4LjU1MTU2MjUgMTIuNjQ5MTQwNjMgLTI3LjI1IDEyLjgxMjUgQy0yNS4zNzA1NDY4NyAxMy4wMzg3MzA0NyAtMjUuMzcwNTQ2ODcgMTMuMDM4NzMwNDcgLTIzLjQ1MzEyNSAxMy4yNjk1MzEyNSBDLTIwLjA1NDQ1OTUzIDEzLjk4ODQ3OTcxIC0xOC40MjUxMDM5MSAxNC41NjkwMDk5MSAtMTYgMTcgQy0xNS42NyAxNy45OSAtMTUuMzQgMTguOTggLTE1IDIwIEMtMTQuODc4ODI4MTMgMTkuMzI0NTMxMjUgLTE0Ljc1NzY1NjI1IDE4LjY0OTA2MjUgLTE0LjYzMjgxMjUgMTcuOTUzMTI1IEMtMTQuNDY1MjM0MzggMTcuMDYxMDkzNzUgLTE0LjI5NzY1NjI1IDE2LjE2OTA2MjUgLTE0LjEyNSAxNS4yNSBDLTEzLjk2MjU3ODEzIDE0LjM2ODI4MTI1IC0xMy44MDAxNTYyNSAxMy40ODY1NjI1IC0xMy42MzI4MTI1IDEyLjU3ODEyNSBDLTEzLjAzMjAzNzM2IDEwLjEzMDUyMjU2IC0xMi4yMjAwMjg4MyA4LjE5NDAwMTQzIC0xMSA2IEMtOC43Njk1MzEyNSA2LjEyMTA5Mzc1IC04Ljc2OTUzMTI1IDYuMTIxMDkzNzUgLTYgNyBDLTMuNzYxNzE4NzUgOS43MjI2NTYyNSAtMy43NjE3MTg3NSA5LjcyMjY1NjI1IC0xLjY4NzUgMTMuMDYyNSBDLTAuOTkwMTE3MTkgMTQuMTY3MjI2NTYgLTAuMjkyNzM0MzggMTUuMjcxOTUzMTIgMC40MjU3ODEyNSAxNi40MTAxNTYyNSBDMS4yMDUwMTk1MyAxNy42OTIxMjg5MSAxLjIwNTAxOTUzIDE3LjY5MjEyODkxIDIgMTkgQzEuODAwODM5ODQgMTcuODA1MDM5MDYgMS44MDA4Mzk4NCAxNy44MDUwMzkwNiAxLjU5NzY1NjI1IDE2LjU4NTkzNzUgQzEuMDY1MTA0MTcgMTMuMzkwNjI1IDAuNTMyNTUyMDggMTAuMTk1MzEyNSAwIDcgQy0wLjIwNzUzOTA2IDUuODk5MTQwNjMgLTAuNDE1MDc4MTMgNC43OTgyODEyNSAtMC42Mjg5MDYyNSAzLjY2NDA2MjUgQy0wLjc1MTM2NzE5IDIuNzg0OTIxODcgLTAuODczODI4MTMgMS45MDU3ODEyNSAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogTS0yOCAxOCBDLTI2LjE4Nzc3NDY2IDIwLjA2MjQ5OTQgLTI2LjE4Nzc3NDY2IDIwLjA2MjQ5OTQgLTI0IDIyIEMtMjMuMDEgMjIgLTIyLjAyIDIyIC0yMSAyMiBDLTIxLjMzIDIxLjAxIC0yMS42NiAyMC4wMiAtMjIgMTkgQy0yNC45NyAxOC41MDUgLTI0Ljk3IDE4LjUwNSAtMjggMTggWiBNLTM5IDIyIEMtMzkgMjIuNjYgLTM5IDIzLjMyIC0zOSAyNCBDLTM2LjAzIDI0LjMzIC0zMy4wNiAyNC42NiAtMzAgMjUgQy0zMi4zNTk2ODc0NCAyMi45MDI1MDAwNSAtMzMuNTQ2MTY5OTQgMjIuMDMwOTQyOTYgLTM2Ljc1IDIxLjgxMjUgQy0zNy40OTI1IDIxLjg3NDM3NSAtMzguMjM1IDIxLjkzNjI1IC0zOSAyMiBaICIgZmlsbD0iIzIyMUUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIwLDY3KSIvPgo8cGF0aCBkPSJNMCAwIEMyLjA1NDY4NzUgLTAuMTk5MjE4NzUgMi4wNTQ2ODc1IC0wLjE5OTIxODc1IDUuODY3MTg3NSAwLjM2MzI4MTI1IEM4LjI4Mjg5NDcyIDIuNDI4NzM2NjggMTAuMDk2NDE2NDkgNC43MzM5NTQ2IDExLjg2NzE4NzUgNy4zNjMyODEyNSBDMTIuMTQ5NDkyMTkgNi44NDYzNjcxOSAxMi40MzE3OTY4NyA2LjMyOTQ1MzEzIDEyLjcyMjY1NjI1IDUuNzk2ODc1IEMxNC4yNzE2ODgxMyAzLjQ3NTU5ODQ4IDE1LjU3MTg3NDIgMS45NzEyNTAyOCAxNy44NjcxODc1IDAuMzYzMjgxMjUgQzI2LjQ3NDM3MzUgLTAuNzg0MzQzNTUgMzQuOTQxNzAyNzcgMi4yOTMwNDg0MyA0Mi44NjcxODc1IDUuMzYzMjgxMjUgQzQxLjE2MTc1MzAxIDkuMTA0MjM0MzIgMzkuMjkzODYwOCAxMS4wMjMxMTQxMiAzNS44NjcxODc1IDEzLjM2MzI4MTI1IEMzNC44NzcxODc1IDEzLjM2MzI4MTI1IDMzLjg4NzE4NzUgMTMuMzYzMjgxMjUgMzIuODY3MTg3NSAxMy4zNjMyODEyNSBDMzIuMjA3MTg3NSAxMi4zNzMyODEyNSAzMS41NDcxODc1IDExLjM4MzI4MTI1IDMwLjg2NzE4NzUgMTAuMzYzMjgxMjUgQzI4LjY3MjY0MDY5IDkuNzgzMzQ0MjYgMjguNjcyNjQwNjkgOS43ODMzNDQyNiAyNi4yNDIxODc1IDkuNjc1NzgxMjUgQzI1LjQyNDkyMTg4IDkuNjEwMDM5MDYgMjQuNjA3NjU2MjUgOS41NDQyOTY4OCAyMy43NjU2MjUgOS40NzY1NjI1IEMyMi44MjU4OTg0NCA5LjQyMDQ4ODI4IDIyLjgyNTg5ODQ0IDkuNDIwNDg4MjggMjEuODY3MTg3NSA5LjM2MzI4MTI1IEMyMS43NTg4NzYwNCA5Ljk5OTk5MjUyIDIxLjY1MDU2NDU4IDEwLjYzNjcwMzggMjEuNTM4OTcwOTUgMTEuMjkyNzA5MzUgQzIwLjQxMzg1NTQzIDE3Ljg5NjI5MTI1IDE5LjI3NjQ4MDM1IDI0LjQ5NzY3NjE0IDE4LjEzMTgzNTk0IDMxLjA5NzkwMDM5IEMxNy43MDU4MDczNiAzMy41NjQxNTA1NiAxNy4yODI5NDkwNyAzNi4wMzA5NTA1MSAxNi44NjMyODEyNSAzOC40OTgyOTEwMiBDMTYuMjYwODYwODcgNDIuMDM2ODAwMzYgMTUuNjQ3MjEwNTMgNDUuNTczMjAwOSAxNS4wMzEyNSA0OS4xMDkzNzUgQzE0Ljg0NDcwODU2IDUwLjIxOTc3NjQ2IDE0LjY1ODE2NzExIDUxLjMzMDE3NzkyIDE0LjQ2NTk3MjkgNTIuNDc0MjI3OTEgQzE0LjI4NTkzNzE5IDUzLjQ5NTIxMDcyIDE0LjEwNTkwMTQ5IDU0LjUxNjE5MzU0IDEzLjkyMDQxMDE2IDU1LjU2ODExNTIzIEMxMy42ODcyNDU5NCA1Ni45MjM3OTg2IDEzLjY4NzI0NTk0IDU2LjkyMzc5ODYgMTMuNDQ5MzcxMzQgNTguMzA2ODY5NTEgQzEzLjI1NzI1MDY3IDU4Ljk4NTQ4NTM4IDEzLjA2NTEzIDU5LjY2NDEwMTI2IDEyLjg2NzE4NzUgNjAuMzYzMjgxMjUgQzExLjg3NzE4NzUgNjAuODU4MjgxMjUgMTEuODc3MTg3NSA2MC44NTgyODEyNSAxMC44NjcxODc1IDYxLjM2MzI4MTI1IEM5LjU4MDQ1Mjg0IDU0LjQ1OTA5MjQzIDguMjk5Mjc3MDIgNDcuNTUzODg4ODYgNy4wMjE5NzI2NiA0MC42NDc5NDkyMiBDNi41ODY3MzE3NyAzOC4yOTg0Mjc0MSA2LjE1MDIxNTc5IDM1Ljk0OTE0MTQ1IDUuNzEyNDAyMzQgMzMuNjAwMDk3NjYgQzUuMDgzNTYyMzcgMzAuMjI0ODk1MzcgNC40NTkzMDI5NCAyNi44NDg4NzMzNSAzLjgzNTkzNzUgMjMuNDcyNjU2MjUgQzMuNTQwNjQxNDggMjEuODk1OTAxMTggMy41NDA2NDE0OCAyMS44OTU5MDExOCAzLjIzOTM3OTg4IDIwLjI4NzI5MjQ4IEMzLjA1OTE5MzEyIDE5LjMwNjU3Nzc2IDIuODc5MDA2MzUgMTguMzI1ODYzMDQgMi42OTMzNTkzOCAxNy4zMTU0Mjk2OSBDMi41MzM0NzUzNCAxNi40NTM4MzI0IDIuMzczNTkxMzEgMTUuNTkyMjM1MTEgMi4yMDg4NjIzIDE0LjcwNDUyODgxIEMxLjg2NzE4NzUgMTIuMzYzMjgxMjUgMS44NjcxODc1IDEyLjM2MzI4MTI1IDEuODY3MTg3NSA4LjM2MzI4MTI1IEMtMS43NjI4MTI1IDkuMDIzMjgxMjUgLTUuMzkyODEyNSA5LjY4MzI4MTI1IC05LjEzMjgxMjUgMTAuMzYzMjgxMjUgQy05LjQ2MjgxMjUgMTEuMzUzMjgxMjUgLTkuNzkyODEyNSAxMi4zNDMyODEyNSAtMTAuMTMyODEyNSAxMy4zNjMyODEyNSBDLTE1LjA4OTc3ODMxIDEyLjEyNDAzOTggLTE3LjI0OTM5NzE2IDEwLjU3NzUwMzY3IC0yMC4xMzI4MTI1IDYuMzYzMjgxMjUgQy0xMy40NzU0Nzc3IDMuMTIxMTc0OTQgLTcuMjY2ODA3MzkgMS4yMzc3NTI5MSAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3NzUuMTMyODEyNSwzNS42MzY3MTg3NSkiLz4KPHBhdGggZD0iTTAgMCBDOC41OCAwIDE3LjE2IDAgMjYgMCBDMjYgMy4zIDI2IDYuNiAyNiAxMCBDMjAuNzIgMTAgMTUuNDQgMTAgMTAgMTAgQzEwIDEzLjYzIDEwIDE3LjI2IDEwIDIxIEMxMy45NiAyMSAxNy45MiAyMSAyMiAyMSBDMjIgMjQuMyAyMiAyNy42IDIyIDMxIEMxOC4wNCAzMSAxNC4wOCAzMSAxMCAzMSBDMTAgMzUuMjkgMTAgMzkuNTggMTAgNDQgQzE3LjkyIDQzLjUwNSAxNy45MiA0My41MDUgMjYgNDMgQzI2IDQ2LjMgMjYgNDkuNiAyNiA1MyBDMjIuODY0NjI0MDIgNTQuMDQ1MTI1MzMgMjAuMjI4NTQ5MDIgNTQuMzE1Mzc3MTMgMTYuOTM3NSA1NC41NjI1IEMxNS44NzQwMjM0NCA1NC42NDYyODkwNiAxNC44MTA1NDY4OCA1NC43MzAwNzgxMyAxMy43MTQ4NDM3NSA1NC44MTY0MDYyNSBDOS4xNDgzOTI5NSA1NS4wNDIwODc4NCA0LjU3MjAyNDE4IDU1IDAgNTUgQzAgMzYuODUgMCAxOC43IDAgMCBaICIgZmlsbD0iI0Q4MUUyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAzNSw1MikiLz4KPHBhdGggZD0iTTAgMCBDMS45MTAxNTYyNSAwLjgyMDMxMjUgMS45MTAxNTYyNSAwLjgyMDMxMjUgNC41MzUxNTYyNSAyLjMyMDMxMjUgQzQuNTM1MTU2MjUgNC45NjAzMTI1IDQuNTM1MTU2MjUgNy42MDAzMTI1IDQuNTM1MTU2MjUgMTAuMzIwMzEyNSBDMS43NzIzOTQ0OCA5Ljc5NzYyNzg0IC0wLjc5MDkzMTM1IDkuMjExNjE2NjMgLTMuNDY0ODQzNzUgOC4zMjAzMTI1IEMtNS4wMjYwMjgwMyA4LjI1MjkwMzg1IC02LjU4OTg2ODk1IDguMjM1MTY3OTQgLTguMTUyMzQzNzUgOC4yNTc4MTI1IEMtOC45NjA1ODU5NCA4LjI2NjgzNTk0IC05Ljc2ODgyODEzIDguMjc1ODU5MzcgLTEwLjYwMTU2MjUgOC4yODUxNTYyNSBDLTExLjIxNjQ0NTMxIDguMjk2NzU3ODEgLTExLjgzMTMyODEzIDguMzA4MzU5MzggLTEyLjQ2NDg0Mzc1IDguMzIwMzEyNSBDLTEyLjc5NDg0Mzc1IDkuMzEwMzEyNSAtMTMuMTI0ODQzNzUgMTAuMzAwMzEyNSAtMTMuNDY0ODQzNzUgMTEuMzIwMzEyNSBDLTEyLjU4NDQxNDA2IDExLjcwNzAzMTI1IC0xMS43MDM5ODQzNyAxMi4wOTM3NSAtMTAuNzk2ODc1IDEyLjQ5MjE4NzUgQy05LjYzNTQyOTY5IDEzLjAxMjk2ODc1IC04LjQ3Mzk4NDM4IDEzLjUzMzc1IC03LjI3NzM0Mzc1IDE0LjA3MDMxMjUgQy01LjU1NDUxMTcyIDE0LjgzNjAxNTYzIC01LjU1NDUxMTcyIDE0LjgzNjAxNTYzIC0zLjc5Njg3NSAxNS42MTcxODc1IEMwLjI0MTM3MzEyIDE3LjY4MTI4NjE5IDMuNTY0NTg1NyAxOS42ODc5ODkzIDUuOTEwMTU2MjUgMjMuNjMyODEyNSBDNi45OTYzOTk0NiAyOC4zMDM2NTgzIDYuMzE4NTczOSAzMS44ODQwNDY4MSA0LjAzNTE1NjI1IDM2LjA3MDMxMjUgQy0wLjE5NDIwMDc5IDM5Ljg3NjczMzg0IC00LjYxMjE4MDA4IDQxLjI1NzA5NTU4IC0xMC4yODUxNTYyNSA0MS4zODI4MTI1IEMtMTUuNjc4ODQ0MzEgNDEuMDMwMDkxNzUgLTE5Ljg2NjQ0MTQ4IDQwLjE3ODc3ODc4IC0yNC40NjQ4NDM3NSAzNy4zMjAzMTI1IEMtMjQuNDY0ODQzNzUgMzQuMDIwMzEyNSAtMjQuNDY0ODQzNzUgMzAuNzIwMzEyNSAtMjQuNDY0ODQzNzUgMjcuMzIwMzEyNSBDLTIzLjE2NTQ2ODc1IDI3Ljk4MDMxMjUgLTIxLjg2NjA5Mzc1IDI4LjY0MDMxMjUgLTIwLjUyNzM0Mzc1IDI5LjMyMDMxMjUgQy0xNS41OTQwNTE2OSAzMS41NDQyMDkyNCAtMTEuODI1MTI2MDMgMzEuNjYwNjQ3ODggLTYuNDY0ODQzNzUgMzEuMzIwMzEyNSBDLTYuNDY0ODQzNzUgMzAuMDAwMzEyNSAtNi40NjQ4NDM3NSAyOC42ODAzMTI1IC02LjQ2NDg0Mzc1IDI3LjMyMDMxMjUgQy03LjQxNzQ2MDk0IDI2Ljk1Njc5Njg3IC04LjM3MDA3ODEyIDI2LjU5MzI4MTI1IC05LjM1MTU2MjUgMjYuMjE4NzUgQy0yMi40OTU3MTQwNSAyMS4wMzAxNzczIC0yMi40OTU3MTQwNSAyMS4wMzAxNzczIC0yNS40NjQ4NDM3NSAxNS4zMjAzMTI1IEMtMjYuMjE3MDIwNTkgMTEuNDI4OTQ4NjQgLTI1LjgyMjM5NTM5IDguMjE0MTkxNTkgLTI0LjMzOTg0Mzc1IDQuNTA3ODEyNSBDLTE4LjQ5MTUxODczIC0yLjMxNTIzMzM1IC04LjEzNzk4MzIgLTIuMjQ0MDcxNDQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTY5LjQ2NDg0Mzc1LDQwLjY3OTY4NzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzguOTEgMCAxNy44MiAwIDI3IDAgQzI3IDMuMyAyNyA2LjYgMjcgMTAgQzIxLjM5IDEwIDE1Ljc4IDEwIDEwIDEwIEMxMCAxMy42MyAxMCAxNy4yNiAxMCAyMSBDMTQuMjkgMjEgMTguNTggMjEgMjMgMjEgQzIzIDI0LjMgMjMgMjcuNiAyMyAzMSBDMTguNzEgMzEgMTQuNDIgMzEgMTAgMzEgQzEwIDM3LjkzIDEwIDQ0Ljg2IDEwIDUyIEM2LjcgNTIgMy40IDUyIDAgNTIgQzAgMzQuODQgMCAxNy42OCAwIDAgWiAiIGZpbGw9IiNEODFFMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMDEsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuOTcgMCA1Ljk0IDAgOSAwIEM5IDEzLjUzIDkgMjcuMDYgOSA0MSBDNS4zNyA0MSAxLjc0IDQxIC0yIDQxIEMtMy4yMTY4NzUgNDEuMjQ3NSAtNC40MzM3NSA0MS40OTUgLTUuNjg3NSA0MS43NSBDLTEwLjMxMDAyNjQxIDQyLjA5ODg2OTkyIC0xMy4zMDg5OTE4NSA0MC43MzUwMDM3OSAtMTcgMzggQy0yMC42ODY4MTg5NSAzMy4xNjEwNTAxMyAtMjAuNjk0NzYzNjEgMjcuODUzMTQ1NTEgLTIwIDIyIEMtMTguNzI2MDcyMzggMTguMzEyMzE0NzcgLTE3Ljc0NDY5MDYyIDE2LjU4MzY3NjQzIC0xNC42ODc1IDE0LjE4NzUgQy05LjYzMTE5NDU5IDExLjk1MzMxODU0IC02LjQ1NjIyNjA3IDExLjkwODc1NDc5IC0xIDEzIEMtMC42NyA4LjcxIC0wLjM0IDQuNDIgMCAwIFogTS05LjQzNzUgMjEuMDYyNSBDLTExLjI1OTI1OTU5IDI0LjQ4NzQwODAyIC0xMS42MzY3NDE4MyAyNi4xNzk1NDkgLTExIDMwIEMtOS40NTY2NDk3MSAzMi45NTA0NzU1MyAtOS40NTY2NDk3MSAzMi45NTA0NzU1MyAtNyAzNSBDLTQuNDE0MTc4NzIgMzUuNTg0MDIxMzMgLTQuNDE0MTc4NzIgMzUuNTg0MDIxMzMgLTIgMzUgQzAuMzI4NjYyMjkgMzMuMTExNTM4MTcgMC4zMjg2NjIyOSAzMy4xMTE1MzgxNyAwLjE5NTMxMjUgMjkuOTYwOTM3NSBDMC4xNzIxMDkzOCAyOC43Nzc1NzgxMiAwLjE0ODkwNjI1IDI3LjU5NDIxODc1IDAuMTI1IDI2LjM3NSBDMC4xMDY5NTMxMyAyNS4xODY0ODQzNyAwLjA4ODkwNjI1IDIzLjk5Nzk2ODc1IDAuMDcwMzEyNSAyMi43NzM0Mzc1IEMwLjA0NzEwOTM4IDIxLjg1ODIwMzEzIDAuMDIzOTA2MjUgMjAuOTQyOTY4NzUgMCAyMCBDLTUuMTAxNDUzNyAxOC41Nzg2MzU2MiAtNS4xMDE0NTM3IDE4LjU3ODYzNTYyIC05LjQzNzUgMjEuMDYyNSBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEzMSw0MCkiLz4KPHBhdGggZD0iTTAgMCBDOS45IDAgMTkuOCAwIDMwIDAgQzMwIDMuMyAzMCA2LjYgMzAgMTAgQzI2LjcgMTAgMjMuNCAxMCAyMCAxMCBDMjAgMjMuODYgMjAgMzcuNzIgMjAgNTIgQzE1LjA1IDUyLjQ5NSAxNS4wNSA1Mi40OTUgMTAgNTMgQzEwIDM4LjgxIDEwIDI0LjYyIDEwIDEwIEM2LjcgMTAgMy40IDEwIDAgMTAgQzAgNi43IDAgMy40IDAgMCBaICIgZmlsbD0iI0Q4MUUyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA2Niw1MikiLz4KPHBhdGggZD0iTTAgMCBDLTAuNDgxMTQ5MSA1Ljc3Mzc4OTI1IC0yLjE4NDY3MTgxIDkuOTU4NTk4MzYgLTUgMTUgQy00LjMxOTM3NSAxNC4yOTg3NSAtMy42Mzg3NSAxMy41OTc1IC0yLjkzNzUgMTIuODc1IEMtMS45NjMyMDUxNCAxMS45MTE3MTQxMyAtMC45ODM1MTk0NiAxMC45NTM4NjU2MSAwIDEwIEMwLjU1NDI5Njg3IDkuNDYxMTcxODggMS4xMDg1OTM3NSA4LjkyMjM0Mzc1IDEuNjc5Njg3NSA4LjM2NzE4NzUgQzUuMjUwOTM2OCA1LjA4MTYzODE0IDcuODk2NjgzMzIgMi44ODQwMTU1MyAxMyAzIEMxNS4wMDY0OTYwNyA0LjUzNjM3NTAxIDE1Ljg3Mzg5MDQ5IDUuNTg4MTQ4NyAxNi42MTcxODc1IDguMDE1NjI1IEMxNy4yNTE1NjExIDEzLjUxMzUyOTUzIDE2Ljg0OTMwMTA3IDE3LjA2MTIxMTQ3IDE0IDIyIEMxMS4wNTUwNzk0MyAyNS40MDk5MDgwMyA4LjEyMTcwMjE1IDI4LjEzNTQyMDQ2IDQgMzAgQzEuNjY3MTQ1MiAzMC4wNDcyNTM5OSAtMC42NjcyNDM5MyAzMC4wNTE4OTk3MyAtMyAzMCBDLTMuMjY1NTQ2ODggMzEuMDczNzg5MDYgLTMuNTMxMDkzNzUgMzIuMTQ3NTc4MTIgLTMuODA0Njg3NSAzMy4yNTM5MDYyNSBDLTQuMTYxMzk0MjEgMzQuNjkwMTIwMSAtNC41MTgxNjg2NiAzNi4xMjYzMTcxMiAtNC44NzUgMzcuNTYyNSBDLTUuMDQ5MDIzNDQgMzguMjY2OTcyNjYgLTUuMjIzMDQ2ODggMzguOTcxNDQ1MzEgLTUuNDAyMzQzNzUgMzkuNjk3MjY1NjIgQy02LjUxMjk0ODE1IDQ0LjE2MDI0OTk4IC03LjcxMjAxMjE2IDQ4LjU4NDg3MDUyIC05IDUzIEMtMTMuODc1IDUxLjI1IC0xMy44NzUgNTEuMjUgLTE1IDQ5IEMtMTUuODA3NzM2NjkgNDEuNjExMTk1NTcgLTE0LjQ0MzM4Mzc0IDM1LjkyMzE3NjkzIC0xMS44NzEwOTM3NSAyOS4wNDI5Njg3NSBDLTEwLjkzNjk5MDk5IDI1Ljc3OTg5MjMxIC0xMC44OTM4OTA4MiAyMy4yNTE1MDY5MSAtMTEuMDYyNSAxOS44NzUgQy0xMS4zNDcwMDEzMyAxMi4zOTk0ODI0MiAtOC41MjkxMDMxNSA3LjAzNDkyMzc4IC0zLjgxMjUgMS4zNzUgQy0yIDAgLTIgMCAwIDAgWiBNMTAgMTAgQzcuOTU1NDM5NDEgMTIuMTcyNjQ2NTUgNy45NTU0Mzk0MSAxMi4xNzI2NDY1NSA1Ljg3NSAxNC44NzUgQzUuMTUwNTQ2ODggMTUuNzc5OTIxODcgNC40MjYwOTM3NSAxNi42ODQ4NDM3NSAzLjY3OTY4NzUgMTcuNjE3MTg3NSBDMS44MDc5NDc2NiAxOS43ODY1NTgxMSAxLjgwNzk0NzY2IDE5Ljc4NjU1ODExIDIgMjIgQzYuMDE1MzA1MDUgMjEuMDg3NDMwNjcgNy43MTEyODI3NSAyMC4zNDk0OTk4MyAxMC4zNzUgMTcuMTI1IEMxMi4zMDc1Njg0OSAxMy45OTU1NjM5MiAxMi4zMDc1Njg0OSAxMy45OTU1NjM5MiAxMiAxMCBDMTEuMzQgMTAgMTAuNjggMTAgMTAgMTAgWiAiIGZpbGw9IiMyMjFFMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY2NSw3MCkiLz4KPHBhdGggZD0iTTAgMCBDMy4zIDAgNi42IDAgMTAgMCBDMTAgMTQuMTkgMTAgMjguMzggMTAgNDMgQzEzLjk2IDQzIDE3LjkyIDQzIDIyIDQzIEMyMy4zMiA0My4zMyAyNC42NCA0My42NiAyNiA0NCBDMjYgNDcuMyAyNiA1MC42IDI2IDU0IEMxMy4xMyA1My41MDUgMTMuMTMgNTMuNTA1IDAgNTMgQzAgMzUuNTEgMCAxOC4wMiAwIDAgWiAiIGZpbGw9IiNEODFFMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMzMsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMyAwIDYuNiAwIDEwIDAgQzEwLjMzIDQuNjIgMTAuNjYgOS4yNCAxMSAxNCBDMTIuNTQ2ODc1IDEzLjQ0MzEyNSAxMi41NDY4NzUgMTMuNDQzMTI1IDE0LjEyNSAxMi44NzUgQzE4LjM5OTA1MzgzIDExLjkwOTg5MTA3IDIwLjEwMjI4MDU4IDEyLjEzOTcyNDgyIDI0IDE0IEMyNS45NTA0Njk0MiAxNS42MTQxODE1OSAyNi44NzAxODY5MyAxNi43NDAzNzM4NiAyOCAxOSBDMjguMDcxODE4MjEgMjEuNzE3NjAxMDggMjguMDkyOTk1MDYgMjQuNDA4NTkzODggMjguMDYyNSAyNy4xMjUgQzI4LjA1Nzk4ODI4IDI3Ljg3OTEwMTU2IDI4LjA1MzQ3NjU2IDI4LjYzMzIwMzEyIDI4LjA0ODgyODEyIDI5LjQxMDE1NjI1IEMyOC4wMzcwMzQ5OSAzMS4yNzM0NzEyNyAyOC4wMTkwOTk0MiAzMy4xMzY3NDU1NSAyOCAzNSBDMjMuNTQ1IDM1LjQ5NSAyMy41NDUgMzUuNDk1IDE5IDM2IEMxOC45Mzk0MTQwNiAzNS4wODQ3NjU2MyAxOC44Nzg4MjgxMiAzNC4xNjk1MzEyNSAxOC44MTY0MDYyNSAzMy4yMjY1NjI1IEMxOC43MzI2MTcxOSAzMi4wMzgwNDY4NyAxOC42NDg4MjgxMiAzMC44NDk1MzEyNSAxOC41NjI1IDI5LjYyNSBDMTguNDgxMjg5MDYgMjguNDQxNjQwNjMgMTguNDAwMDc4MTIgMjcuMjU4MjgxMjUgMTguMzE2NDA2MjUgMjYuMDM5MDYyNSBDMTguMTg5MTUwNjQgMjMuMDg0ODEwOTkgMTguMTg5MTUwNjQgMjMuMDg0ODEwOTkgMTcgMjEgQzE1LjMzMzg4MDk1IDIwLjk1NzI3OSAxMy42NjYxNzExNSAyMC45NTkzNjE2OCAxMiAyMSBDMTAuNDUwNDk3MzIgMjIuNTQ5NTAyNjggMTAuNzgzNDQ4MDcgMjQuMDk5OTA1OTQgMTAuNjgzNTkzNzUgMjYuMjUzOTA2MjUgQzEwLjY0MTY5OTIyIDI3LjEwNzkxMDE2IDEwLjU5OTgwNDY5IDI3Ljk2MTkxNDA2IDEwLjU1NjY0MDYyIDI4Ljg0MTc5Njg4IEMxMC41MTczMjQyMiAyOS43Mzk2Mjg5MSAxMC40NzgwMDc4MSAzMC42Mzc0NjA5NCAxMC40Mzc1IDMxLjU2MjUgQzEwLjM5NDMxNjQxIDMyLjQ2NDE5OTIyIDEwLjM1MTEzMjgxIDMzLjM2NTg5ODQ0IDEwLjMwNjY0MDYyIDM0LjI5NDkyMTg4IEMxMC4yMDAyMjAxNiAzNi41Mjk3NTE1NiAxMC4wOTk1NzUxOSAzOC43NjQ4NTQ4NiAxMCA0MSBDNi43IDQxIDMuNCA0MSAwIDQxIEMwIDI3LjQ3IDAgMTMuOTQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDA1LDQwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzkuOTk1NDE0NiAxNi4wODQxMjA5OCA2Ljc1MDQyOTQ2IDMyLjA3MjY0NDI3IDMgNDggQy0xLjI5IDQ4IC01LjU4IDQ4IC0xMCA0OCBDLTkuMzUyMDc5OTYgNDIuMjQzMTY0OTggLTguMzkyNDE1OTEgMzYuNjQxMDIxMyAtNy4xODc1IDMwLjk3NjU2MjUgQy03LjAxMzcxODI2IDMwLjE0OTE3NTcyIC02LjgzOTkzNjUyIDI5LjMyMTc4ODk0IC02LjY2MDg4ODY3IDI4LjQ2OTMyOTgzIEMtNi4yOTYwMjY4NiAyNi43MzYyMTU3NCAtNS45Mjk1NTA3IDI1LjAwMzQ0MDc3IC01LjU2MTUyMzQ0IDIzLjI3MDk5NjA5IEMtNC45OTczNjgxOSAyMC42MTI1OTg0NyAtNC40Mzk3NTU1NCAxNy45NTI4ODU2NSAtMy44ODI4MTI1IDE1LjI5Mjk2ODc1IEMtMy41MjY0Mjg0MSAxMy42MDQwODUwMSAtMy4xNjk2NzA5OSAxMS45MTUyOCAtMi44MTI1IDEwLjIyNjU2MjUgQy0yLjY0NTgwODExIDkuNDMwNzc3ODkgLTIuNDc5MTE2MjEgOC42MzQ5OTMyOSAtMi4zMDczNzMwNSA3LjgxNTA5Mzk5IEMtMS4xMTUxOTMxMyAyLjIzMDM4NjI2IC0xLjExNTE5MzEzIDIuMjMwMzg2MjYgMCAwIFogIiBmaWxsPSIjMjIzMTc1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5OCw1NCkiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjc1NDE0MjM1IDIyLjQ5MDU2OTM3IC0wLjI2NzY1MDE5IDI1LjU4MjA3Mjg1IC00IDMxIEMtMy45Mjc0OTIxNCAzNC41NTI4ODQ5NCAtMy4zMTc3NDE2NCAzNi40OTE2MTMzNyAtMS40Mzc1IDM5LjUgQzAuNDMyMjMyNTQgNDIuNzUxNzA4NzYgMC40OTI4MjA0OCA0NC4yNjg2NDQ5NCAwIDQ4IEMtMS4xNzkwNDA1IDUxLjQwNDQxNTYzIC0yLjU0MTk2MzU0IDU0LjcwNjM5OTc4IC00IDU4IEMtMTMuMDQyMzMyOTIgNTUuOTEzMzA3NzkgLTE5LjIzMTExMzk5IDQ5LjIyNDI2NTc5IC0yNC42ODc1IDQyLjExMzI4MTI1IEMtMjUuOTc2NzY1MDIgNDAuMDM3NDExMDkgLTI2LjU2ODUwMjU3IDM4LjM4OTQxNzA0IC0yNyAzNiBDLTIyLjM3NSAzMyAtMjIuMzc1IDMzIC0xOSAzMyBDLTE5IDMzLjk5IC0xOSAzNC45OCAtMTkgMzYgQy0xNi4wMjk4MjMwNiAzNS4zNzE4OTgyNyAtMTYuMDI5ODIzMDYgMzUuMzcxODk4MjcgLTEzIDM0IEMtMTEuODAxNjE3OTEgMzEuNjcxNDU1MzcgLTExLjgwMTYxNzkxIDMxLjY3MTQ1NTM3IC0xMSAyOSBDLTEwLjMyMzI0MjE5IDI4LjI5NDg4MjgxIC05LjY0NjQ4NDM4IDI3LjU4OTc2NTYyIC04Ljk0OTIxODc1IDI2Ljg2MzI4MTI1IEMtNi4yODY2NTkzNyAyMi45NTIxNDY5MyAtNi42NDc5NDA5OCAyMC4wOTMyNzg3OCAtNi45Mzc1IDE1LjUgQy03LjQ2Nzc4NzQgNi4zMzQ3MzQyNSAtNy40Njc3ODc0IDYuMzM0NzM0MjUgLTQgMiBDLTEuODEyNSAwLjY4NzUgLTEuODEyNSAwLjY4NzUgMCAwIFogIiBmaWxsPSIjMTg3MjRFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjIyNzM1OTE0IDUuMDI2MTMzNCA0LjM0Mzc1IDYuNjc1NjQ0OTEgNC4zNDM3NSAxMy41OTc2NTYyNSBDLTEuOTI2MjUgMTMuNTk3NjU2MjUgLTguMTk2MjUgMTMuNTk3NjU2MjUgLTE0LjY1NjI1IDEzLjU5NzY1NjI1IEMtMTIuMzAwNDg3NzkgMTguNzcwMzg3NjYgLTEyLjMwMDQ4Nzc5IDE4Ljc3MDM4NzY2IC04LjUzMTI1IDE5LjU5NzY1NjI1IEMtMy43NTI5OTc1NyAxOS41OTc2NTYyNSAtMC4wNTEzNDIxNSAxOC4zNjE2NzI4MyA0LjM0Mzc1IDE2LjU5NzY1NjI1IEM0LjY1NjI1IDE5LjQxMDE1NjI1IDQuNjU2MjUgMTkuNDEwMTU2MjUgNC4zNDM3NSAyMi41OTc2NTYyNSBDMC45MDEyMjIwNSAyNS45MjU0MzMyNyAtMy40MTQ1NjU0OCAyNi4zMjk5Njg0IC04LjAyMzQzNzUgMjYuNjYwMTU2MjUgQy0xMy42ODcyNjY0IDI2LjUyNTcwMzM0IC0xOC4xMzQxNTE4MiAyNS4xMTk3NTQ0MyAtMjIuMTU2MjUgMjEuMDk3NjU2MjUgQy0yNC43NzM1ODM1MyAxNi43MzU0MzM3IC0yNS4zMTY1NTAzOCAxMi41OTU3NjMyOCAtMjQuNjU2MjUgNy41OTc2NTYyNSBDLTIzLjI5NDg1NjcgMy44NjEyMjM1NSAtMjEuNDAxMzMxNDIgMS4xNzA3OTU4IC0xOC4yMTg3NSAtMS4yNzczNDM3NSBDLTEyLjMxODQ0Njg5IC0zLjg2NzcyMDcyIC01LjI1NTA1Mjk0IC00LjQ0OTQ0MzQxIDAgMCBaIE0tMTMuNjU2MjUgNC41OTc2NTYyNSBDLTEzLjk4NjI1IDUuOTE3NjU2MjUgLTE0LjMxNjI1IDcuMjM3NjU2MjUgLTE0LjY1NjI1IDguNTk3NjU2MjUgQy0xMS4wMjYyNSA4LjU5NzY1NjI1IC03LjM5NjI1IDguNTk3NjU2MjUgLTMuNjU2MjUgOC41OTc2NTYyNSBDLTQuOTgzMjM1NTkgMy42NzQ2NDYzMyAtNC45ODMyMzU1OSAzLjY3NDY0NjMzIC03LjUzMTI1IDIuNjYwMTU2MjUgQy0xMC4yMTA5NzMzNSAyLjU4MTM0MDg2IC0xMS40ODU2NTkxNSAzLjAyNTg0OTA4IC0xMy42NTYyNSA0LjU5NzY1NjI1IFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDkxLjY1NjI1LDU1LjQwMjM0Mzc1KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjUyMDkwNTk1IDQuNTExMTYwNzUgMyA2LjQxMTcwNDg5IDMgMTIuNTYyNSBDLTMuMjcgMTIuNTYyNSAtOS41NCAxMi41NjI1IC0xNiAxMi41NjI1IEMtMTMuNjQ0MjM3NzkgMTcuNzM1MjMxNDEgLTEzLjY0NDIzNzc5IDE3LjczNTIzMTQxIC05Ljg3NSAxOC41NjI1IEMtNS4wOTY3NDc1NyAxOC41NjI1IC0xLjM5NTA5MjE1IDE3LjMyNjUxNjU4IDMgMTUuNTYyNSBDMy4zMTI1IDE4LjM3NSAzLjMxMjUgMTguMzc1IDMgMjEuNTYyNSBDLTAuNDQyNTI3OTUgMjQuODkwMjc3MDIgLTQuNzU4MzE1NDggMjUuMjk0ODEyMTUgLTkuMzY3MTg3NSAyNS42MjUgQy0xNS4wMzEwMTY0IDI1LjQ5MDU0NzA5IC0xOS40Nzc5MDE4MiAyNC4wODQ1OTgxOCAtMjMuNSAyMC4wNjI1IEMtMjYuMTE3MzMzNTMgMTUuNzAwMjc3NDUgLTI2LjY2MDMwMDM4IDExLjU2MDYwNzAzIC0yNiA2LjU2MjUgQy0yNC42Mzg2MDY3IDIuODI2MDY3MyAtMjIuNzQ1MDgxNDIgMC4xMzU2Mzk1NSAtMTkuNTYyNSAtMi4zMTI1IEMtMTIuNjA1NTU1NjYgLTUuMzY2NzY4MjUgLTUuOTgyNDU3MiAtNC44NjA3NDY0OCAwIDAgWiBNLTE1IDMuNTYyNSBDLTE1LjMzIDQuODgyNSAtMTUuNjYgNi4yMDI1IC0xNiA3LjU2MjUgQy0xMi4zNyA3LjU2MjUgLTguNzQgNy41NjI1IC01IDcuNTYyNSBDLTYuMzI2OTg1NTkgMi42Mzk0OTAwOCAtNi4zMjY5ODU1OSAyLjYzOTQ5MDA4IC04Ljg3NSAxLjYyNSBDLTExLjU1NDcyMzM1IDEuNTQ2MTg0NjEgLTEyLjgyOTQwOTE1IDEuOTkwNjkyODMgLTE1IDMuNTYyNSBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE2OSw1Ni40Mzc1KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjMgMCA2LjYgMCAxMCAwIEMxMCAxOC4xNSAxMCAzNi4zIDEwIDU1IEM3LjAzIDU1IDQuMDYgNTUgMSA1NSBDMCA1NCAwIDU0IC0wLjEyMDI1NDUyIDUxLjgyOTY5NjY2IEMtMC4xMTgwMzM5MSA1MC44NzI2MTMwNyAtMC4xMTU4MTMyOSA0OS45MTU1Mjk0OCAtMC4xMTM1MjUzOSA0OC45Mjk0NDMzNiBDLTAuMTEzNDQ5ODYgNDcuODQ4Mzk4MjggLTAuMTEzMzc0MzMgNDYuNzY3MzUzMjEgLTAuMTEzMjk2NTEgNDUuNjUzNTQ5MTkgQy0wLjEwODEzNTIyIDQ0LjQ3NzUyNjQgLTAuMTAyOTczOTQgNDMuMzAxNTAzNiAtMC4wOTc2NTYyNSA0Mi4wODk4NDM3NSBDLTAuMDk2MjQxMyA0MC44OTI2NzIyNyAtMC4wOTQ4MjYzNSAzOS42OTU1MDA3OSAtMC4wOTMzNjg1MyAzOC40NjIwNTEzOSBDLTAuMDg3NzQ5NzkgMzQuNjIwNTA5MzQgLTAuMDc1MTk0MTEgMzAuNzc5MDI0NTcgLTAuMDYyNSAyNi45Mzc1IEMtMC4wNTc0ODc0MSAyNC4zNDA0OTU2MyAtMC4wNTI5MjQwOSAyMS43NDM0OTAzNSAtMC4wNDg4MjgxMiAxOS4xNDY0ODQzOCBDLTAuMDM3Nzc0MjcgMTIuNzY0MzAwNjggLTAuMDIwNDk3MDggNi4zODIxNjAwNyAwIDAgWiAiIGZpbGw9IiNEODFGMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExNjYsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMyAwIDYuNiAwIDEwIDAgQzEwIDAuNjYgMTAgMS4zMiAxMCAyIEMxMC45OSAxLjM0IDExLjk4IDAuNjggMTMgMCBDMTYuMzkyMTAyODcgLTAuNTQ2MTg2MDYgMTkuNjA2NTQzNSAtMC41MzU4MDg5MiAyMyAwIEMyNi42MTk5NTgyMSAyLjY1OTU2MTEzIDI4LjIwNjgzODE3IDQuNjQ4NDIzNTEgMjkgOSBDMjkuMDc4MTg2MzYgMTAuNTEzOTU2OTYgMjkuMTA3ODk5MDkgMTIuMDMwOTM1MDcgMjkuMDk3NjU2MjUgMTMuNTQ2ODc1IEMyOS4wOTQ0MzM1OSAxNC4zOTEyMTA5NCAyOS4wOTEyMTA5NCAxNS4yMzU1NDY4NyAyOS4wODc4OTA2MiAxNi4xMDU0Njg3NSBDMjkuMDc5NTExNzIgMTYuOTc4MTY0MDYgMjkuMDcxMTMyODEgMTcuODUwODU5MzcgMjkuMDYyNSAxOC43NSBDMjkuMDU3OTg4MjggMTkuNjM4MTY0MDYgMjkuMDUzNDc2NTYgMjAuNTI2MzI4MTIgMjkuMDQ4ODI4MTIgMjEuNDQxNDA2MjUgQzI5LjAzNzA3NDIyIDIzLjYyNzYzMzE2IDI5LjAxOTEzOTY2IDI1LjgxMzgyNTI4IDI5IDI4IEMyNS43IDI4IDIyLjQgMjggMTkgMjggQzE4LjUwNSAxOC4xIDE4LjUwNSAxOC4xIDE4IDggQzE2LjY4IDcuNjcgMTUuMzYgNy4zNCAxNCA3IEMxMy4wMSA3LjY2IDEyLjAyIDguMzIgMTEgOSBDMTAuNDE0MDczNjYgMTIuMTE2MTA1NTQgMTAuNDE0MDczNjYgMTIuMTE2MTA1NTQgMTAuMzEyNSAxNS42MjUgQzEwLjI0Njc1NzgxIDE2LjgxMzUxNTYzIDEwLjE4MTAxNTYzIDE4LjAwMjAzMTI1IDEwLjExMzI4MTI1IDE5LjIyNjU2MjUgQzEwLjA3NTg5ODQ0IDIwLjE0MTc5Njg3IDEwLjAzODUxNTYyIDIxLjA1NzAzMTI1IDEwIDIyIEM2LjcgMjEuNjcgMy40IDIxLjM0IDAgMjEgQzAgMTQuMDcgMCA3LjE0IDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAzNiw1MykiLz4KPHBhdGggZD0iTTAgMCBDNy44MjQzNDA1OCAtMC4xMTcwMzA3NCA3LjgyNDM0MDU4IC0wLjExNzAzMDc0IDEwLjQ4ODI4MTI1IDIuNDE0MDYyNSBDMTIuNzg3NDM3MTMgNi4yMDk3NTk4NSAxMy43NDA2OTg2IDkuNTU1ODA4MzkgMTMgMTQgQzExLjk1MTAwNjYgMTUuNzE2NTM0NjYgMTAuOTAxMjc3MjcgMTcuNDMyNzI1OTggOS44MzIwMzEyNSAxOS4xMzY3MTg3NSBDOC4yODEzNDc3OCAyMi42MDkzNzYxMSA5LjE2NDUxNTkyIDI1LjM1OTY3NjUzIDEwIDI5IEMxMC4zNTA2MjUgMjkuNzAxMjUgMTAuNzAxMjUgMzAuNDAyNSAxMS4wNjI1IDMxLjEyNSBDMTIuMzk2NjM0OTIgMzMuNzkzMjY5ODUgMTIuMTk1NTczOTMgMzYuMDY2MzkwOTggMTIgMzkgQzExIDQwIDExIDQwIDguMTI4OTA2MjUgNDAuMTMyODEyNSBDNi45NTE5OTIxOSA0MC4xMzAyMzQzOCA1Ljc3NTA3ODEyIDQwLjEyNzY1NjI1IDQuNTYyNSA0MC4xMjUgQzMuMzg4MTY0MDYgNDAuMTI3NTc4MTIgMi4yMTM4MjgxMiA0MC4xMzAxNTYyNSAxLjAwMzkwNjI1IDQwLjEzMjgxMjUgQy0yIDQwIC0yIDQwIC00IDM5IEMtMy4yNDgxNzUxOCAzMS40ODE3NTE4MiAtMy4yNDgxNzUxOCAzMS40ODE3NTE4MiAtMS45Mzc1IDI4LjkzNzUgQy0wLjQzNzQ4NjY0IDI1LjgzNzQ3MjM5IC0wLjY0OTM5MDYgMjMuMzg5MjI0MiAtMSAyMCBDLTIuMzE0MzE2OTUgMTcuOTg3NDUyMTggLTMuNjQ3MjE4ODUgMTUuOTg2ODk3MzEgLTUgMTQgQy01Ljg1NTE0NzQgOS42MjkyNDY2MSAtNC43NjA4MzQzNiA3LjI4MzU1ODE3IC0yLjUgMy42MjUgQy0xLjY3OTQ5NTggMi40MDc5MTg3NiAtMC44NTAyODE2NCAxLjE5NjQ2NzczIDAgMCBaICIgZmlsbD0iI0ZBRkJGQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1Nyw4MikiLz4KPHBhdGggZD0iTTAgMCBDMy45MDkzODcwMyAzLjczOTQxMzY4IDMuOTA5Mzg3MDMgMy43Mzk0MTM2OCA0LjEzMjgxMjUgNi44NDc2NTYyNSBDNC4xMzAyMzQzOCA3LjU3ODU1NDY5IDQuMTI3NjU2MjUgOC4zMDk0NTMxMyA0LjEyNSA5LjA2MjUgQzQuMTIzNzEwOTQgOS44NjU1ODU5NCA0LjEyMjQyMTg4IDEwLjY2ODY3MTg4IDQuMTIxMDkzNzUgMTEuNDk2MDkzNzUgQzQuMDAyNzk5MjggMTMuOTQyMTE4MSAzLjYyMDk4NDQgMTYuMjE4MTI5NDkgMy4xODc1IDE4LjYyNSBDMi43MDMyNTg3MiAyMi4yNzU5MjQ0MiAzLjIxMzk4MTIzIDIzLjg4MzIwMTQgNS40Mzc1IDI2LjgxMjUgQzUuOTEwNTg1OTQgMjcuMzM0NTcwMzEgNi4zODM2NzE4NyAyNy44NTY2NDA2MiA2Ljg3MTA5Mzc1IDI4LjM5NDUzMTI1IEM4IDMwIDggMzAgOCAzNCBDOC42NiAzNCA5LjMyIDM0IDEwIDM0IEM3Ljk4MzAzMjM0IDI5LjA1NjczNDA2IDcuOTgzMDMyMzQgMjkuMDU2NzM0MDYgNS4yNSAyNC41IEMzLjUwMjExMTMyIDIxLjAwNDIyMjYzIDQuMzAxODA1ODYgMTguODA4MzMxNjUgNSAxNSBDNS4yMjA5MzE1MSAxMC40OTc1NjgxMyA1LjIzOTU1NzQ5IDYuMzU4MTI2NzUgNCAyIEM3LjQ0NTAwNjYgNC45MzU2NjQyMyA3LjU3NDgyNDY0IDcuMjU3NDQyOTQgNy45Njg3NSAxMS41OTc2NTYyNSBDNy45OTg4MzUyIDEzLjkxMDQ1NTggNy43MDc4ODYzOCAxNS44NjYzODczNSA3LjI1IDE4LjEyNSBDNi45ODQxMjA2MSAyMi4yNDYxMzA1MyA3LjEwOTg0MDQyIDIyLjY4NTU3NDIyIDkuNDM3NSAyNS43NSBDOS45MTA1ODU5NCAyNi4yODEwOTM3NSAxMC4zODM2NzE4NyAyNi44MTIxODc1IDEwLjg3MTA5Mzc1IDI3LjM1OTM3NSBDMTIgMjkgMTIgMjkgMTIgMzMgQzE0LjMxIDMzLjY2IDE2LjYyIDM0LjMyIDE5IDM1IEMxOSAzNS45OSAxOSAzNi45OCAxOSAzOCBDMTkuNjM5Mzc1IDM4LjI4ODc1IDIwLjI3ODc1IDM4LjU3NzUgMjAuOTM3NSAzOC44NzUgQzIzIDQwIDIzIDQwIDI0IDQyIEMxOS4yNDAwNTc5OSA0OC4wNjgxMzc5OSAxMy45MjU3ODgzNiA1My40MjgxMzM2MyA3IDU3IEM0IDU2IDQgNTYgMi43OTY4NzUgNTMuOTI1NzgxMjUgQy0wLjc2MDI4NTczIDQ1LjA0NjE1MjQyIC0wLjc2MDI4NTczIDQ1LjA0NjE1MjQyIDEgNDAgQzEuNTE1NjI1IDM5LjE3NSAyLjAzMTI1IDM4LjM1IDIuNTYyNSAzNy41IEM0LjM4NzAyNzU2IDM0LjMyNjkwODU4IDQuNTE2NDQxMTggMzIuNjE1MDg4MjUgNCAyOSBDMy4zNCAyOC4wMzA2MjUgMi42OCAyNy4wNjEyNSAyIDI2LjA2MjUgQy0wLjQxMDU3NzgyIDIyLjM3MTMwMjcyIC0wLjQwODMyNzU1IDIwLjMyODI3MTk5IDAgMTYgQzAuMzMgMTUuMDEgMC42NiAxNC4wMiAxIDEzIEMxLjA5MjQ3MzgxIDExLjUyMzEzODg5IDEuMTI5OTkwNzEgMTAuMDQyMjQ0OTkgMS4xMjUgOC41NjI1IEMxLjEyODg2NzE5IDcuNDE5NzQ2MDkgMS4xMjg4NjcxOSA3LjQxOTc0NjA5IDEuMTMyODEyNSA2LjI1MzkwNjI1IEMxLjAwMjc2MDE1IDQuMDQ2ODQxNDEgMC42MDg1NjE5OSAyLjEyMDMwNzI0IDAgMCBaICIgZmlsbD0iIzI5N0Q1QiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3NCw2MSkiLz4KPHBhdGggZD0iTTAgMCBDMCAyLjY0IDAgNS4yOCAwIDggQy0wLjk5IDcuNjcgLTEuOTggNy4zNCAtMyA3IEMtNi41NTg4MDA1MSA2LjYyNjg5OTk1IC05LjgyNzU4NTIyIDYuMzQwNTE2NjkgLTEzIDguMTI1IEMtMTQuNDYyMjEyMTcgMTAuODY2NjQ3ODEgLTE0LjMxODMzNzMzIDEyLjk0Mzk2MTYyIC0xNCAxNiBDLTEyLjMyMDg1NTg1IDE5LjIyNTQwMTU2IC0xMi4zMjA4NTU4NSAxOS4yMjU0MDE1NiAtOS4zMTI1IDE5Ljc1IEMtNS43MDcwOTgyNCAyMC4wMjIxMDU3OSAtMi41NTAxMDA2NiAxOS42MzkwMTgxMiAxIDE5IEMxIDIxLjMxIDEgMjMuNjIgMSAyNiBDLTYuMzQ1MjM2NzIgMjguMjcwMzQ1ODkgLTEyLjM4MTY4ODY4IDI4Ljg3NjE2MTQyIC0xOS4zNzUgMjUuMjUgQy0yMi44MjkzNDgyMSAyMi4yODkxMzAxIC0yNC42OTA4NzcyNCAyMC4yNzgzNDkyMiAtMjUuMzE2NDA2MjUgMTUuNjY3OTY4NzUgQy0yNS41ODIxMzY1MiA5Ljk1MDQ4MTkxIC0yNC45Njg0NzE1MiA2LjM5NzQ5NTQ3IC0yMSAyIEMtMTQuMTcwMDE0MTEgLTMuMjEyMzU3NjUgLTcuODE4OTkzNjcgLTEuODY5NzU5MzYgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDAyLDU0KSIvPgo8cGF0aCBkPSJNMCAwIEMzIDMuMTkwMzcxOTkgMyAzLjE5MDM3MTk5IDMgNiBDLTAuMDkyNjI3NjcgNy41NDYzMTM4NCAtMy4zNjcwODkxIDcuMzkwNjA3MTYgLTYuNzg1MTU2MjUgNy42MjEwOTM3NSBDLTcuODgxNTAzOTEgNy44MDg2NTIzNCAtNy44ODE1MDM5MSA3LjgwODY1MjM0IC05IDggQy05LjMzIDguNjYgLTkuNjYgOS4zMiAtMTAgMTAgQy03LjY5IDEwLjMzIC01LjM4IDEwLjY2IC0zIDExIEMtMi40Mzc1IDEyLjkzNzUgLTIuNDM3NSAxMi45Mzc1IC0yIDE1IEMtMyAxNiAtMyAxNiAtNS4yODUxNTYyNSAxNi4wOTc2NTYyNSBDLTYuNjU5OTQxNDEgMTYuMDgwMjUzOTEgLTYuNjU5OTQxNDEgMTYuMDgwMjUzOTEgLTguMDYyNSAxNi4wNjI1IEMtOC45ODE2MDE1NiAxNi4wNTM0NzY1NiAtOS45MDA3MDMxMiAxNi4wNDQ0NTMxMyAtMTAuODQ3NjU2MjUgMTYuMDM1MTU2MjUgQy0xMS41NTc5Mjk2OSAxNi4wMjM1NTQ2OSAtMTIuMjY4MjAzMTMgMTYuMDExOTUzMTMgLTEzIDE2IEMtMTMuMzMgMTcuNjUgLTEzLjY2IDE5LjMgLTE0IDIxIEMtMTIuNzYyNSAyMC42NDkzNzUgLTExLjUyNSAyMC4yOTg3NSAtMTAuMjUgMTkuOTM3NSBDLTcuMDk2NzA4IDE5LjA0NDA2NzI3IC01LjEzMjI1ODM2IDE4Ljk5MTE4NzA2IC0yIDIwIEMtMS42NyAyMS4zMiAtMS4zNCAyMi42NCAtMSAyNCBDLTcuMDgzMDUwMzggMjguMTkwNTQ1ODIgLTExLjYyMjE1Nzc3IDI5Ljk3NTQ2ODkgLTE5IDI5IEMtMjEuMDYyNSAyNy4zNzUgLTIxLjA2MjUgMjcuMzc1IC0yMiAyNSBDLTIyLjU2NDA4OTkgMjAuMDM2MDA4OTIgLTIxLjQ2ODAwNjg0IDE1LjcxMzA3NDU4IC0yMCAxMSBDLTE4LjM3NSA5IC0xOC4zNzUgOSAtMTcgOCBDLTE3LjQ5NSA3LjU2Njg3NSAtMTcuOTkgNy4xMzM3NSAtMTguNSA2LjY4NzUgQy0yMCA1IC0yMCA1IC0yMCAyIEMtNi4wODE1NDUwNiAtMS4zMTY3MzgyIC02LjA4MTU0NTA2IC0xLjMxNjczODIgMCAwIFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NTIsNzEpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMiAyIDIgMi4zMTI1IDUuMTg3NSBDMS45Njk4MjgxOCA5LjM2ODA5NjIyIDAuNjY2NjA4NjQgMTIuMTgwNjg4NTMgLTEgMTYgQy0xLjU4NzYzMjQ0IDIwLjExMzQyNzEgLTEuMzMwNDM1NTggMjEuNTA0MzQ2NjQgMSAyNSBDMy4zMzQ1ODYzNSAyOC41MDE4Nzk1MyAzLjY3MjYwNzI3IDI5Ljg4MDI4MDQ3IDMgMzQgQzEuOTUxMDA2NiAzNS43MTY1MzQ2NiAwLjkwMTI3NzI3IDM3LjQzMjcyNTk4IC0wLjE2Nzk2ODc1IDM5LjEzNjcxODc1IEMtMS43MTg2NTIyMiA0Mi42MDkzNzYxMSAtMC44MzU0ODQwOCA0NS4zNTk2NzY1MyAwIDQ5IEMwLjM1MDYyNSA0OS43MDEyNSAwLjcwMTI1IDUwLjQwMjUgMS4wNjI1IDUxLjEyNSBDMi4zODM4NTAwOCA1My43Njc3MDAxNyAyLjEzMjA5ODM3IDU2LjA5MzgzNTkxIDIgNTkgQzEuMDEgNTkgMC4wMiA1OSAtMSA1OSBDLTEuMjg4NzUgNTcuNzgzMTI1IC0xLjU3NzUgNTYuNTY2MjUgLTEuODc1IDU1LjMxMjUgQy0yLjQ4MDE5MTExIDUyLjgzMDc4MTA3IC0zLjEwNzk3MDM0IDUwLjc2NzAxMTM3IC00LjE4NzUgNDguNDM3NSBDLTUuMzQyMzE4NDQgNDQuOTczMDQ0NjggLTQuODE4NjU2ODYgNDIuNTI2NTIxODcgLTQgMzkgQy0zLjIyNjU2MjUgMzcuNzMxNTYyNSAtMy4yMjY1NjI1IDM3LjczMTU2MjUgLTIuNDM3NSAzNi40Mzc1IEMtMC42MTEwNTMyMSAzMy4zNDA0ODE1MiAtMC41NTY2MDA4MSAzMS41NDcxOTM1MyAtMSAyOCBDLTIuNDI2MjE2ODQgMjUuMjg4NzM2MTYgLTIuNDI2MjE2ODQgMjUuMjg4NzM2MTYgLTQgMjMgQy00IDIyLjM0IC00IDIxLjY4IC00IDIxIEMtNi45NyAyMSAtOS45NCAyMSAtMTMgMjEgQy0xNi44OTY3Nzg1MSAyNy4wMDIyMTQ0NSAtMTYuODk2Nzc4NTEgMjcuMDAyMjE0NDUgLTE3IDM0IEMtMTYuMzQgMzQuOTY5Mzc1IC0xNS42OCAzNS45Mzg3NSAtMTUgMzYuOTM3NSBDLTEyLjUzNTY0NjkzIDQwLjcxMTA0MDY0IC0xMi40NTUwODUxNiA0Mi41NjI4MzYyOCAtMTMgNDcgQy0xMy45MzU3ODk5NSA0OS4zNTk4MTgxMyAtMTQuOTMzNDc4MDggNTEuNjk2MzEyNjQgLTE2IDU0IEMtMTYuNjkxNDA1MjIgNTYuNzc4ODg2MTMgLTE2LjY5MTQwNTIyIDU2Ljc3ODg4NjEzIC0xNyA1OSBDLTE3Ljk5IDU5IC0xOC45OCA1OSAtMjAgNTkgQy0yMC4yNTgxMzMwMiA1NS4zODYxMzc3NCAtMjAuMTY4MTU2NjcgNTMuMzI5MzA2OCAtMTguNSA1MC4wNjI1IEMtMTYuNjczNDE0OTMgNDYuMzMzMjIyMTUgLTE2LjQ4NjE3MTMzIDQ0LjExMDYyOTM5IC0xNyA0MCBDLTE4LjMxNDMxNjk1IDM3Ljk4NzQ1MjE4IC0xOS42NDcyMTg4NSAzNS45ODY4OTczMSAtMjEgMzQgQy0yMS41IDMxIC0yMS41IDMxIC0yMSAyOCBDLTIwLjMxOTM3NSAyNy4wNzE4NzUgLTE5LjYzODc1IDI2LjE0Mzc1IC0xOC45Mzc1IDI1LjE4NzUgQy0xNi4yOTQzMTIzNCAyMC44MzkwMjk5NyAtMTYuODYxMjA4MTUgMTcuODI0MTczMzMgLTE4IDEzIEMtMTguNjU5OTY3OSAxMS4zMzA2Njk0MiAtMTkuMzI1NTg4NjkgOS42NjM1NDc5IC0yMCA4IEMtMjAuMTI1IDQuNjg3NSAtMjAuMTI1IDQuNjg3NSAtMjAgMiBDLTE5LjM0IDIgLTE4LjY4IDIgLTE4IDIgQy0xOCAyLjY2IC0xOCAzLjMyIC0xOCA0IEMtMTYuNjggNCAtMTUuMzYgNCAtMTQgNCBDLTE0IDQuNjYgLTE0IDUuMzIgLTE0IDYgQy0xNC45OSA2IC0xNS45OCA2IC0xNyA2IEMtMTUuOTcwMjgxNCAxMS4yMzU1MDE3NyAtMTUuOTcwMjgxNCAxMS4yMzU1MDE3NyAtMTMuNzUgMTYgQy0xMC45NzQxNDAxOSAxNy41ODYyMDU2MSAtOS4xMjcxMzUyNSAxNy41MTA1NTI2OSAtNiAxNyBDLTIuMzk2ODM5NzggMTMuNjg4OTg3OTEgLTEuNDQ3Mjk0NzYgMTAuODA4NDE4NyAtMSA2IEMtMy4zMSA2LjMzIC01LjYyIDYuNjYgLTggNyBDLTguMDQyNzIxIDUuMzMzODgwOTUgLTguMDQwNjM4MzIgMy42NjYxNzExNSAtOCAyIEMtNS45NTQ0Nzk1OCAtMC4wNDU1MjA0MiAtMi43Mjk0MTkxNCAwLjIzOTQyMjczIDAgMCBaICIgZmlsbD0iIzIyNzg1NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw2MikiLz4KPHBhdGggZD0iTTAgMCBDMC45NDg3NSAwLjY2IDEuODk3NSAxLjMyIDIuODc1IDIgQzMuMzAxNTM3MjcgNi4zNTA2ODAxOCAzLjQ1MjcyODcyIDguMjkzODg3MTIgMC42MjUgMTEuNzUgQy0wLjI4MjUgMTIuNDkyNSAtMS4xOSAxMy4yMzUgLTIuMTI1IDE0IEMtMi43MDYzNjcxOSAxNC41MTY5MTQwNiAtMy4yODc3MzQzOCAxNS4wMzM4MjgxMiAtMy44ODY3MTg3NSAxNS41NjY0MDYyNSBDLTYuNzk2MjA2MzYgMTcuNDI5OTAwMDYgLTkuMjc0ODQ0NzUgMTcuNzMzMjU1NzkgLTEyLjY4NzUgMTguMTg3NSBDLTEzLjgyMzE2NDA2IDE4LjM0NjA1NDY5IC0xNC45NTg4MjgxMiAxOC41MDQ2MDkzOCAtMTYuMTI4OTA2MjUgMTguNjY3OTY4NzUgQy0xOS4xMjUgMTkgLTE5LjEyNSAxOSAtMjIuMTI1IDE5IEMtMjMuOTMxNDYxMTggMTUuMzg3MDc3NjQgLTI1LjEyNSAxMi45OTMwMDYgLTI1LjEyNSA4LjkzNzUgQy0yMy41NjkwNzIyNyA0LjM2Njk2MjI5IC0yMS4wMzM3Mjg5IDEuMTk5NzcyNDUgLTE2LjkzNzUgLTEuMzc1IEMtMTEuMDE1MDAyNTMgLTIuNjkxMTEwNTUgLTUuMzkzODE5MTMgLTMuMDkxNTc5MjYgMCAwIFogTS0xOC4xMjUgNSBDLTE4Ljc4NSA2LjMyIC0xOS40NDUgNy42NCAtMjAuMTI1IDkgQy0xOC44MDUgNy42OCAtMTcuNDg1IDYuMzYgLTE2LjEyNSA1IEMtMTYuNzg1IDUgLTE3LjQ0NSA1IC0xOC4xMjUgNSBaIE0tMTIuMTI1IDkgQy0xMy45NTgwMDkwOSAxMS4xMDU3NTY0MyAtMTMuOTU4MDA5MDkgMTEuMTA1NzU2NDMgLTE1LjEyNSAxMyBDLTkuMzI4NzM4OTMgMTIuNjAwMjU3ODYgLTUuNzEwMjc1MzcgMTEuODk3NDg0MDcgLTEuMTI1IDggQy0xLjEyNSA3LjAxIC0xLjEyNSA2LjAyIC0xLjEyNSA1IEMtNS45NTc3NzI2OCA0LjQzMTQzODUxIC04LjM2ODA4Njg2IDYuMDU5ODA3MTEgLTEyLjEyNSA5IFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1ODUuMTI1LDQ5KSIvPgo8cGF0aCBkPSJNMCAwIEMyLjk3IDAgNS45NCAwIDkgMCBDOS4zMyAxLjMyIDkuNjYgMi42NCAxMCA0IEMxMC41MTU2MjUgMy4zNCAxMS4wMzEyNSAyLjY4IDExLjU2MjUgMiBDMTQuODI2NDEzMTkgLTAuNjc4MDgyNjIgMTYuODgzOTk1MjUgLTAuMzgxMTExNTUgMjEgMCBDMjEuNjYgMC4zMyAyMi4zMiAwLjY2IDIzIDEgQzIyLjY3IDMuNjQgMjIuMzQgNi4yOCAyMiA5IEMxOSAxMCAxOSAxMCAxNy4wNjI1IDkuMzEyNSBDMTYuMzgxODc1IDkuMjA5Mzc1IDE1LjcwMTI1IDkuMTA2MjUgMTUgOSBDMTEuNjQ5OTE3OTUgMTEuNzc1NzgyMjcgMTAuMTM2Mzk1ODYgMTMuNjg5OTI2MiA5LjY4MzU5Mzc1IDE4LjAzOTA2MjUgQzkuNjAyMzgyODEgMTkuMjIyNDIxODcgOS41MjExNzE4OCAyMC40MDU3ODEyNSA5LjQzNzUgMjEuNjI1IEM5LjM1MzcxMDk0IDIyLjgxMzUxNTYzIDkuMjY5OTIxODcgMjQuMDAyMDMxMjUgOS4xODM1OTM3NSAyNS4yMjY1NjI1IEM5LjEyMzAwNzgxIDI2LjE0MTc5Njg3IDkuMDYyNDIxODcgMjcuMDU3MDMxMjUgOSAyOCBDNi4wMyAyOCAzLjA2IDI4IDAgMjggQzAgMTguNzYgMCA5LjUyIDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE3Niw1MykiLz4KPHBhdGggZD0iTTAgMCBDMC40OTUgMS40ODUgMC40OTUgMS40ODUgMSAzIEMwLjAxIDMuOTkgLTAuOTggNC45OCAtMiA2IEMtMi43MjcwMzEyNSA1LjczNDQ1MzEzIC0zLjQ1NDA2MjUgNS40Njg5MDYyNSAtNC4yMDMxMjUgNS4xOTUzMTI1IEMtMjUuMTQ4Njk1MTMgLTIuMTYyNDkwMzQgLTQ1LjE2MzM2MjQ5IC0xLjA2MjQxOCAtNjYgNiBDLTY2LjMzIDQuMzUgLTY2LjY2IDIuNyAtNjcgMSBDLTQ4Ljc3Mzk1ODUzIC05LjkzNTYyNDg4IC0xOC43MTE0Nzg5MyAtOC4zODU4NDYyMiAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4MjAsMzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyLjMzIDEuNjUgMi42NiAzLjMgMyA1IEM0LjY1IDUgNi4zIDUgOCA1IEM3LjAxIDYuNDg1IDcuMDEgNi40ODUgNiA4IEM1LjgzMjg2NDMxIDEwLjYyNTMxNTI0IDUuODMyODY0MzEgMTAuNjI1MzE1MjQgNiAxMyBDNi45MDc1IDEyLjQ4NDM3NSA3LjgxNSAxMS45Njg3NSA4Ljc1IDExLjQzNzUgQzEyIDEwIDEyIDEwIDE0LjM3NSAxMC4zMTI1IEMxNC45MTEyNSAxMC41MzkzNzUgMTUuNDQ3NSAxMC43NjYyNSAxNiAxMSBDMTUuNjcgMTIuMzIgMTUuMzQgMTMuNjQgMTUgMTUgQzE2Ljk4IDE0LjY3IDE4Ljk2IDE0LjM0IDIxIDE0IEMxOS42OCAxNi42NCAxOC4zNiAxOS4yOCAxNyAyMiBDMTYuMjM4MTY0MDYgMjEuNzgzNDM3NSAxNS40NzYzMjgxMyAyMS41NjY4NzUgMTQuNjkxNDA2MjUgMjEuMzQzNzUgQzMuNTQ5MjExNDUgMTguMzM5MTEzMiAtMy45OTQ5NjA1MyAxOC41NDQyMTE5MSAtMTUgMjIgQy0xNi4zMiAxOS4zNiAtMTcuNjQgMTYuNzIgLTE5IDE0IEMtMTYuNjkgMTQuMzMgLTE0LjM4IDE0LjY2IC0xMiAxNSBDLTEyLjY2IDEzLjM1IC0xMy4zMiAxMS43IC0xNCAxMCBDLTEwLjI4MTExNzYxIDEwLjUwNzEyMDMzIC03LjI2NTQ1NzYxIDExLjExNjA4MjE1IC00IDEzIEMtMy43OTkxMzU1NyA5LjI4NDAwODA5IC0zLjg0ODA1NjMgOC4yMjc5MTU1NSAtNiA1IEMtNC4zNSA1IC0yLjcgNSAtMSA1IEMtMC42NyAzLjM1IC0wLjM0IDEuNyAwIDAgWiAiIGZpbGw9IiNGM0Y4RjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjAsMzcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuNzQyMTY3OTcgMC4wNTQxNDA2MyAxLjc0MjE2Nzk3IDAuMDU0MTQwNjMgMy41MTk1MzEyNSAwLjEwOTM3NSBDNC4zOTk5NjA5NCAwLjE1NTc4MTI1IDUuMjgwMzkwNjMgMC4yMDIxODc1IDYuMTg3NSAwLjI1IEM1Ljg1NzUgMS45IDUuNTI3NSAzLjU1IDUuMTg3NSA1LjI1IEMzLjIwNzUgNS41OCAxLjIyNzUgNS45MSAtMC44MTI1IDYuMjUgQy0xLjA1MDMzMjAzIDcuMzU0MDgyMDMgLTEuMDUwMzMyMDMgNy4zNTQwODIwMyAtMS4yOTI5Njg3NSA4LjQ4MDQ2ODc1IEMtMi43NDE2MTc3NyAxNC41MzkxODMxOCAtMy44MTM2MDk0MSAxOC40MDQ2OTk1NSAtOC44MTI1IDIyLjI1IEMtMTEuNTc3MDIwMzMgMjMuNjMyMjYwMTYgLTEzLjg1ODYzNjMgMjMuMzQ1MjUzODcgLTE2LjkzNzUgMjMuMzEyNSBDLTE4LjAzMzIwMzEyIDIzLjMwMzQ3NjU2IC0xOS4xMjg5MDYyNSAyMy4yOTQ0NTMxMyAtMjAuMjU3ODEyNSAyMy4yODUxNTYyNSBDLTIxLjUyMjM4MjgxIDIzLjI2Nzc1MzkxIC0yMS41MjIzODI4MSAyMy4yNjc3NTM5MSAtMjIuODEyNSAyMy4yNSBDLTIyLjQ4MjUgMjEuNiAtMjIuMTUyNSAxOS45NSAtMjEuODEyNSAxOC4yNSBDLTE5LjgzMjUgMTcuOTIgLTE3Ljg1MjUgMTcuNTkgLTE1LjgxMjUgMTcuMjUgQy0xNS41ODE3NTc4MSAxNi4zNTc5Njg3NSAtMTUuMzUxMDE1NjIgMTUuNDY1OTM3NSAtMTUuMTEzMjgxMjUgMTQuNTQ2ODc1IEMtMTQuNzg3MTQ4NDQgMTMuMzc2NDA2MjUgLTE0LjQ2MTAxNTYzIDEyLjIwNTkzNzUgLTE0LjEyNSAxMSBDLTEzLjgxMTc1NzgxIDkuODM5ODQzNzUgLTEzLjQ5ODUxNTYyIDguNjc5Njg3NSAtMTMuMTc1NzgxMjUgNy40ODQzNzUgQy0xMC40NDExMzY5OSAwLjk5NjQ1MTA5IC02Ljc2ODAwODc1IC0wLjI3MzQ1NDkgMCAwIFogIiBmaWxsPSIjRjVGOUY2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDM2LjgxMjUsODQuNzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuOTcgMCA1Ljk0IDAgOSAwIEM5IDkuMjQgOSAxOC40OCA5IDI4IEM2LjAzIDI4IDMuMDYgMjggMCAyOCBDMCAxOC43NiAwIDkuNTIgMCAwIFogIiBmaWxsPSIjMDA4NDJBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDk5LDUzKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjgwODE5NTIyIDAuMDEzNzU3MzUgNC44MDgxOTUyMiAwLjAxMzc1NzM1IDcuODEyNSAyLjg3NSBDOC40OTMxMjUgNC4xMTI1IDguNDkzMTI1IDQuMTEyNSA5LjE4NzUgNS4zNzUgQzYuODc3NSA1LjcwNSA0LjU2NzUgNi4wMzUgMi4xODc1IDYuMzc1IEMxLjg1NzUgOC4wMjUgMS41Mjc1IDkuNjc1IDEuMTg3NSAxMS4zNzUgQzQuNjUyNSAxMC44OCA0LjY1MjUgMTAuODggOC4xODc1IDEwLjM3NSBDOC42ODA5ODE3NSAxNC41MjAyNDY3MSA4LjMyNjA0MzA3IDE2LjE1NDk2MSA2LjA2MjUgMTkuNzUgQzMuMTg3NSAyMi4zNzUgMy4xODc1IDIyLjM3NSAwLjE4NzUgMjMuMTI1IEMtNC4xMzU1MDE1OSAyMi4wNDQyNDk2IC01LjQ3Mjc4ODMxIDIwLjA5MTAxMjY4IC03LjgxMjUgMTYuMzc1IEMtOC4xMjUgMTMgLTguMTI1IDEzIC03LjgxMjUgMTAuMzc1IEMtNS41MDI1IDEwLjM3NSAtMy4xOTI1IDEwLjM3NSAtMC44MTI1IDEwLjM3NSBDLTEuMTQyNSA5LjA1NSAtMS40NzI1IDcuNzM1IC0xLjgxMjUgNi4zNzUgQy00Ljc4MjUgNS44OCAtNC43ODI1IDUuODggLTcuODEyNSA1LjM3NSBDLTUuNjI4MjEwMTUgMC44NjA4MDA5NyAtNS4wOTkzMDg2NyAwLjE5NDExNzE3IDAgMCBaICIgZmlsbD0iI0U1RUZFQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2MC44MTI1LDU3LjYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMTUuNTEgMCAzMS4wMiAwIDQ3IDAgQzQ3IDEuNjUgNDcgMy4zIDQ3IDUgQzMxLjQ5IDUgMTUuOTggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsNzIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuNjIgMCA5LjI0IDAgMTQgMCBDMTQgMS4zMiAxNCAyLjY0IDE0IDQgQzEwLjcgNCA3LjQgNCA0IDQgQzQgNS45OCA0IDcuOTYgNCAxMCBDNy4zIDEwIDEwLjYgMTAgMTQgMTAgQzE0IDExLjMyIDE0IDEyLjY0IDE0IDE0IEMxMC43IDE0IDcuNCAxNCA0IDE0IEM0IDE1Ljk4IDQgMTcuOTYgNCAyMCBDNy4zIDIwIDEwLjYgMjAgMTQgMjAgQzE0LjMzIDIxLjMyIDE0LjY2IDIyLjY0IDE1IDI0IEMxMC4wNSAyNCA1LjEgMjQgMCAyNCBDMCAxNi4wOCAwIDguMTYgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDU2LDg1KSIvPgo8cGF0aCBkPSJNMCAwIEMxNC41MiAwIDI5LjA0IDAgNDQgMCBDNDMuMzQgMS42NSA0Mi42OCAzLjMgNDIgNSBDMjguMTQgNSAxNC4yOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0MSw5NCkiLz4KPHBhdGggZD0iTTAgMCBDMTMuODYgMCAyNy43MiAwIDQyIDAgQzQyLjY2IDEuNjUgNDMuMzIgMy4zIDQ0IDUgQzI5LjQ4IDUgMTQuOTYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDEsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTUxOTMyMjEgNS44NTU3OTY2MyAzLjYyOTIyNzk1IDE1LjU1OTg2NzYxIDAuOTE0MDYyNSAyMS4yOTI5Njg3NSBDMC40NDc0MjE4NyAyMS44MzU2NjQwNiAtMC4wMTkyMTg3NSAyMi4zNzgzNTkzOCAtMC41IDIyLjkzNzUgQy0zLjIyMjkwNTM0IDI1LjY1Mjg1NDI2IC0zLjIyMjkwNTM0IDI1LjY1Mjg1NDI2IC0zLjExMzI4MTI1IDI4LjQwNjI1IEMtMi44NDc1MjI1NiAzMC42NDI3NjQ2OSAtMi41MDI2MTIyNCAzMi44MDU0MjU3OCAtMiAzNSBDLTYuNjI1IDM4IC02LjYyNSAzOCAtMTAgMzggQy0xMC4zMyAzOS4zMiAtMTAuNjYgNDAuNjQgLTExIDQyIEMtMTIuMzIgNDIgLTEzLjY0IDQyIC0xNSA0MiBDLTE2LjcwMzEyNSA0MC4xMDE1NjI1IC0xNi43MDMxMjUgNDAuMTAxNTYyNSAtMTguMjUgMzcuNjI1IEMtMTguNzcwNzgxMjUgMzYuODEyODkwNjIgLTE5LjI5MTU2MjUgMzYuMDAwNzgxMjUgLTE5LjgyODEyNSAzNS4xNjQwNjI1IEMtMjEgMzMgLTIxIDMzIC0yMSAzMSBDLTE4LjA5NDUxMTE4IDI4Ljk1ODMwNTE1IC0xNi41OTg1Nzk1NCAyOCAtMTMgMjggQy0xMyAyOC45OSAtMTMgMjkuOTggLTEzIDMxIEMtMTAuMDI5ODIzMDYgMzAuMzcxODk4MjcgLTEwLjAyOTgyMzA2IDMwLjM3MTg5ODI3IC03IDI5IEMtNS44MDE2MTc5MSAyNi42NzE0NTUzNyAtNS44MDE2MTc5MSAyNi42NzE0NTUzNyAtNSAyNCBDLTQuMzI1ODIwMzEgMjMuMjk4NzUgLTMuNjUxNjQwNjMgMjIuNTk3NSAtMi45NTcwMzEyNSAyMS44NzUgQy0wLjI3MTkxNzk2IDE3LjkzMDQwMjQ0IC0wLjU4MDIxNDc2IDE0Ljk1NDI2NzczIC0wLjgxMjUgMTAuMzEyNSBDLTEuMDkwOTg5MDUgMi4xODE5NzgxMSAtMS4wOTA5ODkwNSAyLjE4MTk3ODExIDAgMCBaICIgZmlsbD0iI0VCRjNFRiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDLTAuNDAyODE3NzEgNS44NDA4NTY3NCAtMS4xMTI3NzkgOS4zNzczNTg4MSAtNSAxNCBDLTguMjkwNzY2NiAxNi43MTg0NTkzNyAtMTAuMDk2NDA4NjQgMTcuOTMzMDY3MzEgLTE0LjM3NSAxOC4yNSBDLTE1LjI0MTI1IDE4LjE2NzUgLTE2LjEwNzUgMTguMDg1IC0xNyAxOCBDLTE2LjY2ODA5NTE4IDExLjY5MzgwODQyIC0xNS41MDUxNjQ5NyA3LjU2NTU1NTkzIC0xMSAzIEMtNy4yMTg5MzIxOCAwLjU1ODA2MDM3IC00LjQ5MzYzOTc2IC0wLjM5NjQ5NzYzIDAgMCBaICIgZmlsbD0iIzAwMDAwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ1LDM3KSIvPgo8cGF0aCBkPSJNMCAwIEM0Ljc1MDUzNTExIC0wLjA3NDM1MjIyIDkuNTAwNzI4ODcgLTAuMTI4Njk2OTEgMTQuMjUxNzA4OTggLTAuMTY0Nzk0OTIgQzE1Ljg2NjY3Nzg5IC0wLjE3OTg0ODc2IDE3LjQ4MTYwNjEzIC0wLjIwMDI5NjQ4IDE5LjA5NjQzNTU1IC0wLjIyNjMxODM2IEMyMS40MjI0NjU1NSAtMC4yNjI4NTI4NiAyMy43NDc5NTM0MSAtMC4yNzk3NjAxNSAyNi4wNzQyMTg3NSAtMC4yOTI5Njg3NSBDMjcuMTUxMDcxODUgLTAuMzE2MTk0NTMgMjcuMTUxMDcxODUgLTAuMzE2MTk0NTMgMjguMjQ5Njc5NTcgLTAuMzM5ODg5NTMgQzMyLjY1ODMwNTk5IC0wLjM0MTM1Nzg4IDM1LjUyNjI3Nzc5IDAuMjE1ODYwOTQgMzkgMyBDMzkgMy42NiAzOSA0LjMyIDM5IDUgQzI2LjEzIDUgMTMuMjYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDEsNTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEM1LjE4NDE5OTU5IDMuNzk2NTQ1NjcgNS4zODczNDU0OCA3LjExNjc2MjIgNS4yMzgyODEyNSAxMS44NjMyODEyNSBDNC45NDYwNDkxMyAxNC40ODM3ODg5NyA0LjA0MjM4MTk1IDE2LjU4OTQ5MTczIDMgMTkgQzIuNDgyMDk2ODIgMjMuMDU2OTA4MjUgMi42OTk5NDI5NCAyNC41NDk5MTQ0MSA1IDI4IEM3LjMzNDU4NjM1IDMxLjUwMTg3OTUzIDcuNjcyNjA3MjcgMzIuODgwMjgwNDcgNyAzNyBDNi4zNDg5OTE3IDM4LjE2Njk1MjY0IDUuNjU4MzE0NjEgMzkuMzEyMzI1OTggNC45Mzc1IDQwLjQzNzUgQzMuMTY4MTQxMTcgNDMuMjg2MDQyMjIgMi45OTk2OTkxNiA0My45ODI4NTIyOSAzLjA2MjUgNDcuNTYyNSBDNC4wMDI5NTg2MSA1MS4wMTA4NDgyMyA1LjM3ODg4Njc3IDUzLjgyODI1NjcyIDcgNTcgQzcgNTguMzIgNyA1OS42NCA3IDYxIEM1LjAyIDYxLjQ5NSA1LjAyIDYxLjQ5NSAzIDYyIEMyLjcxMTI1IDYwLjc4MzEyNSAyLjQyMjUgNTkuNTY2MjUgMi4xMjUgNTguMzEyNSBDMS41MTk4MDg4OSA1NS44MzA3ODEwNyAwLjg5MjAyOTY2IDUzLjc2NzAxMTM3IC0wLjE4NzUgNTEuNDM3NSBDLTEuMzQyMzE4NDQgNDcuOTczMDQ0NjggLTAuODE4NjU2ODYgNDUuNTI2NTIxODcgMCA0MiBDMC43NzM0Mzc1IDQwLjczMTU2MjUgMC43NzM0Mzc1IDQwLjczMTU2MjUgMS41NjI1IDM5LjQzNzUgQzMuNDExMzY2MjEgMzYuMzAyNDY1OTkgMy41MTMyNzU5MiAzNC41OTI5MzE0MSAzIDMxIEMyLjM0IDMwLjAxIDEuNjggMjkuMDIgMSAyOCBDLTEuMzMwNDM1NTggMjQuNTA0MzQ2NjQgLTEuNTg3NjMyNDQgMjMuMTEzNDI3MSAtMSAxOSBDLTAuNTA1IDE3Ljg2NTYyNSAtMC4wMSAxNi43MzEyNSAwLjUgMTUuNTYyNSBDMi41NDM3NjAwOCAxMC43MDg1Njk4MSAyLjY5NzAxMDU0IDcuMDQ3NDY4NDUgMSAyLjA2MjUgQzAuNjcgMS4zODE4NzUgMC4zNCAwLjcwMTI1IDAgMCBaICIgZmlsbD0iI0U5RjFFRSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2OSw1OSkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwLjMzIDIuNjQgMC42NiA0IDEgQzUuMTU2NjQ3MzcgNi40ODI2OTA2OSA1LjExNDE2MjU1IDExLjgwMzM5Mjc0IDUuMDYyNSAxNy4zNzUgQzUuMDU3OTg4MjggMTguMzAxODM1OTQgNS4wNTM0NzY1NiAxOS4yMjg2NzE4OCA1LjA0ODgyODEyIDIwLjE4MzU5Mzc1IEM1LjAzNzExNTc0IDIyLjQ1NTc5NzA5IDUuMDIwNzEzNzIgMjQuNzI3ODYzODggNSAyNyBDMy4zNSAyNy4zMyAxLjcgMjcuNjYgMCAyOCBDLTIuNjA1MTM5NTkgMjQuMDkyMjkwNjIgLTIuMjkzNjc1NjUgMjAuNzc3NzA5MjEgLTIuMjUgMTYuMjUgQy0yLjI1NzczNDM4IDE1LjQ2MzY3MTg4IC0yLjI2NTQ2ODc1IDE0LjY3NzM0Mzc1IC0yLjI3MzQzNzUgMTMuODY3MTg3NSBDLTIuMjU2ODM4MzYgOC44NzA4NDc1NSAtMS41OTU2NjE5NSA0LjczNjMyOTkxIDAgMCBaICIgZmlsbD0iIzIyMUUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTY5LDcxKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjY3NTQyOTc2IDAuMjg2MDQ4OTggMy4zNDM4NTM0MyAwLjYxNzgxMjMzIDUgMSBDNi4wNjgwODM3NCA3LjI3NDk5MTk3IDcuMDQzNjc4MzkgMTMuODY4OTY0ODMgNSAyMCBDNC40NDQ5NTIwOSAyNS44ODM1MDc4OCA1Ljc0ODA2MTcyIDI4LjIyMzcxNTY1IDkgMzMgQzkuNjgyNDU2MDcgMzcuMDA5NDI5NCA5LjA2MjU0MzA2IDM5LjEyMDM1OTYxIDYuOTM3NSA0Mi40Mzc1IEM1LjE4NzQ3ODQxIDQ1LjI2MTExNjM5IDQuOTk5MzU1NTggNDUuOTYzOTEyNyA1LjA2MjUgNDkuNSBDNi4wNjQxNTYzNSA1My4yMzk1MTcwMiA3LjQxMDgyMDg0IDU2LjQ3NjE2Nzk1IDkgNjAgQzkgNjAuNjYgOSA2MS4zMiA5IDYyIEM4LjAxIDYyIDcuMDIgNjIgNiA2MiBDNS4xMjcyMDEzOCA2MC4xMzM2MDAxOSA0LjI3NzQ4OTczIDU4LjI1NjM5Mzg5IDMuNDM3NSA1Ni4zNzUgQzIuOTYxODM1OTQgNTUuMzMwODU5MzggMi40ODYxNzE4OCA1NC4yODY3MTg3NSAxLjk5NjA5Mzc1IDUzLjIxMDkzNzUgQzAuODc4NDcyMzMgNDkuNjA4MjUxOTcgMS4wMTg2Mjk2NiA0Ny42MDg1ODA1MSAyIDQ0IEMyLjUxNTYyNSA0My4xNzUgMy4wMzEyNSA0Mi4zNSAzLjU2MjUgNDEuNSBDNS4zODcwMjc1NiAzOC4zMjY5MDg1OCA1LjUxNjQ0MTE4IDM2LjYxNTA4ODI1IDUgMzMgQzQuMzE5Mzc1IDMyLjA3MTg3NSAzLjYzODc1IDMxLjE0Mzc1IDIuOTM3NSAzMC4xODc1IEMwLjMyMzM1MDI2IDI1Ljg4NjgwMjA0IDAuODgyMTgxNzcgMjIuNzc3MDAxIDIgMTggQzIuMzMgMTcuMzQgMi42NiAxNi42OCAzIDE2IEMzLjQxNzQwMjY4IDExLjA1OTExNzE1IDMuNDg3NDY4NzMgNi40MjIxNjY2NCAxIDIgQzAuMzQgMS42NyAtMC4zMiAxLjM0IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiMxRDc1NTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMC42NiAwLjY2IDEuMzIgMSAyIEMwLjY3IDIuNjYgMC4zNCAzLjMyIDAgNCBDMC4wMjM3OTA0IDYuMzExMDc4NzggMC4wMjM3OTA0IDYuMzExMDc4NzggMC4zMTI1IDguODc1IEMwLjM5MTEzMjgxIDkuNzM4NjcxODcgMC40Njk3NjU2MyAxMC42MDIzNDM3NSAwLjU1MDc4MTI1IDExLjQ5MjE4NzUgQzEuMDAzMjA3MjQgMTQuMDE3OTA0NzUgMS44MTI2MDgzMyAxNS43NDgyMTM0IDMgMTggQzMuNzA0NDkyODkgMjMuNDAxMTEyMTcgMS45Mjk0NDIzOSAyNS42MDU4MzY0MiAtMSAzMCBDLTEuNjc4NzgwNTkgMzQuMDcyNjgzNTYgLTEuMzQxNzI0MDYgMzUuNDk4MDkyNzkgMSAzOC45Mzc1IEMzLjQ1MjU5MTI5IDQyLjY5MzAzMDQxIDMuNTUxNTQyOTEgNDQuNTg3NjU2NyAzIDQ5IEMyLjA2NTUzNDY1IDUxLjAzMTQ0NjQxIDEuMDY3NzUyMjQgNTMuMDM1MzM1ODcgMCA1NSBDLTAuNjk5MDc0MTQgNTcuNzM1NzI1ODUgLTAuNjk5MDc0MTQgNTcuNzM1NzI1ODUgLTEgNjAgQy0yLjMyIDU5LjY3IC0zLjY0IDU5LjM0IC01IDU5IEMtNC41MjI2OTE2MiA1Ny41NDEwNTc0IC00LjA0MzA4OTU4IDU2LjA4Mjg2NTA0IC0zLjU2MjUgNTQuNjI1IEMtMy4xNjIyNDYwOSA1My40MDY4MzU5NCAtMy4xNjIyNDYwOSA1My40MDY4MzU5NCAtMi43NTM5MDYyNSA1Mi4xNjQwNjI1IEMtMiA1MCAtMiA1MCAtMSA0OCBDLTAuNTQzMTA3NzYgNDQuMDcwNzI2NzUgLTAuOTU5NzA3MDkgNDEuNzM5NDU4MTMgLTMgMzguNDM3NSBDLTUuNzU4MjkzODQgMzMuNjk2NjgyNDYgLTUuNzU4MjkzODQgMzMuNjk2NjgyNDYgLTUgMzAgQy00LjM0IDI5LjA1MTI1IC0zLjY4IDI4LjEwMjUgLTMgMjcuMTI1IEMtMC41ODgzOTUzIDIzLjM1Njg2NzY2IC0wLjUyMDEwNzIzIDIxLjM5OTAxNzAyIC0xIDE3IEMtMS4zMyAxNi4xOTU2MjUgLTEuNjYgMTUuMzkxMjUgLTIgMTQuNTYyNSBDLTMuNDY1MDU4MjkgMTAuODA4Mjg4MTIgLTMuMzIwMjAxNTkgOC4wMzQ1NDAwMiAtMyA0IEMtMS41IDEuNSAtMS41IDEuNSAwIDAgWiAiIGZpbGw9IiNGMUY2RjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTEsNjApIi8+CjxwYXRoIGQ9Ik0wIDAgQzMgMSAzIDEgNSA0IEM1IDQuOTkgNSA1Ljk4IDUgNyBDNS42NiA2LjY3IDYuMzIgNi4zNCA3IDYgQzguNTQwMjM5OTYgNS45MzA0OTQ1OSAxMC4wODMzNDk4OCA1LjkxNTQ3NjQzIDExLjYyNSA1LjkzNzUgQzEyLjg1MDg5ODQ0IDUuOTUxMDM1MTYgMTIuODUwODk4NDQgNS45NTEwMzUxNiAxNC4xMDE1NjI1IDUuOTY0ODQzNzUgQzE1LjA0MTI4OTA2IDUuOTgyMjQ2MDkgMTUuMDQxMjg5MDYgNS45ODIyNDYwOSAxNiA2IEMxNS4yMzY4NzUgNi43NDI1IDE0LjQ3Mzc1IDcuNDg1IDEzLjY4NzUgOC4yNSBDMTEuMDU1OTU5NzIgMTAuNzU4MDE3NDUgMTEuMDU1OTU5NzIgMTAuNzU4MDE3NDUgOS42NTIzNDM3NSAxMy4wOTc2NTYyNSBDNy41MTM0ODk4OSAxNS41NjAxMTkyIDYuMDYwMDUxNDUgMTUuNzE4NTYzODUgMi44NzUgMTYuMTg3NSBDLTAuMzYzMTQzNTQgMTYuNDU4MzM3OTMgLTAuMzYzMTQzNTQgMTYuNDU4MzM3OTMgLTMgMTggQy00LjY2NjE3MTE1IDE4LjA0MDYzODMyIC02LjMzMzg4MDk1IDE4LjA0MjcyMSAtOCAxOCBDLTcuMjU5NDMzNTkgMTYuOTMwNzIyNjYgLTcuMjU5NDMzNTkgMTYuOTMwNzIyNjYgLTYuNTAzOTA2MjUgMTUuODM5ODQzNzUgQy0xLjU0NzYwNyA4LjUwMTAxOTAzIC0xLjU0NzYwNyA4LjUwMTAxOTAzIDAgMCBaICIgZmlsbD0iI0VGRjVGMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNiw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMS44NzUgMS4xMjUgMS44NzUgMS4xMjUgMyAzIEMzLjY4NzUgNi4xODc1IDMuNjg3NSA2LjE4NzUgNCA5IEMwLjM3IDkgLTMuMjYgOSAtNyA5IEMtNi4wMSA5Ljk5IC01LjAyIDEwLjk4IC00IDEyIEMtMC4zNTQ1ODE1NSAxMS43NjUyMjgwMSAtMC4zNTQ1ODE1NSAxMS43NjUyMjgwMSAzIDExIEMyLjY3IDEyLjY1IDIuMzQgMTQuMyAyIDE2IEMtNC4yNDE1OTc5NyAxNy4zNDYyMjcwMSAtNC4yNDE1OTc5NyAxNy4zNDYyMjcwMSAtNy44NzUgMTUuNjg3NSBDLTEwIDE0IC0xMCAxNCAtMTEgMTIgQy0xMS41NzE0Mjg1NyA0LjkxNDI4NTcxIC0xMS41NzE0Mjg1NyA0LjkxNDI4NTcxIC05LjQzNzUgMS41IEMtNi4wODk2NTY1MSAtMC41NjAyMTEzOCAtMy44NTk4NTc1MyAtMC40OTEyNTQ1OSAwIDAgWiBNLTUgMyBDLTUuOTkgNC40ODUgLTUuOTkgNC40ODUgLTcgNiBDLTQuNjkgNiAtMi4zOCA2IDAgNiBDLTAuNjYgNS4wMSAtMS4zMiA0LjAyIC0yIDMgQy0yLjk5IDMgLTMuOTggMyAtNSAzIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTAwLDkzKSIvPgo8cGF0aCBkPSJNMCAwIEMxMC44OSAwIDIxLjc4IDAgMzMgMCBDMzIuNjcgMS4zMiAzMi4zNCAyLjY0IDMyIDQgQzI5LjA3ODAyMzEgNS40NjA5ODg0NSAyNi41MDEwNjUyNSA1LjExMTM0OTAxIDIzLjI0MjE4NzUgNS4wOTc2NTYyNSBDMjIuMjQ3NjEwMzIgNS4wOTU1MzM4MyAyMi4yNDc2MTAzMiA1LjA5NTUzMzgzIDIxLjIzMjk0MDY3IDUuMDkzMzY4NTMgQzE5LjExMzU4MTM3IDUuMDg3NzY3NTQgMTYuOTk0MzI3NDEgNS4wNzUyMTUgMTQuODc1IDUuMDYyNSBDMTMuNDM4ODAzNjEgNS4wNTc0ODUxMiAxMi4wMDI2MDU1NiA1LjA1MjkyMjE5IDEwLjU2NjQwNjI1IDUuMDQ4ODI4MTIgQzcuMDQ0MjM2NTUgNS4wMzc3OTc4MiAzLjUyMjEyODU1IDUuMDIwNTMyNTkgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTQ5LDcyKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjIxNzQ5MjE5IC0wLjA3NDE5MTM0IDguNDM0NjM4MTEgLTAuMTI4NjIwNCAxMi42NTI1ODc4OSAtMC4xNjQ3OTQ5MiBDMTQuMDg3MjI1NTIgLTAuMTc5ODc1ODkgMTUuNTIxODE3MDggLTAuMjAwMzQzOCAxNi45NTYyOTg4MyAtMC4yMjYzMTgzNiBDMTkuMDE5MTU4NTkgLTAuMjYyNzM0MzcgMjEuMDgxNDA4NTggLTAuMjc5NzMyNDMgMjMuMTQ0NTMxMjUgLTAuMjkyOTY4NzUgQzI1LjAwNjIxOTQ4IC0wLjMxNjUzNDQyIDI1LjAwNjIxOTQ4IC0wLjMxNjUzNDQyIDI2LjkwNTUxNzU4IC0wLjM0MDU3NjE3IEMzMCAwIDMwIDAgMzEuOTI4NDY2OCAxLjM5MzMxMDU1IEMzMyAzIDMzIDMgMzMgNSBDMjIuMTEgNSAxMS4yMiA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0OSw3OSkiLz4KPHBhdGggZD0iTTAgMCBDMC42NiAwIDEuMzIgMCAyIDAgQzIuMDg2MzY3MTkgMC41Njg0NzY1NiAyLjE3MjczNDM3IDEuMTM2OTUzMTIgMi4yNjE3MTg3NSAxLjcyMjY1NjI1IEMzLjM1MjcwNTM2IDcuNzE4MDc4MSA1LjI4MTQzMTU2IDExLjIwNTAwMzg1IDkgMTYgQzkgMTYuNjYgOSAxNy4zMiA5IDE4IEM4LjI3NTU0Njg3IDE3Ljg0NjYwMTU2IDcuNTUxMDkzNzUgMTcuNjkzMjAzMTIgNi44MDQ2ODc1IDE3LjUzNTE1NjI1IEM0LjA3MzM2NjA3IDE2Ljk3MzE0OTc3IDQuMDczMzY2MDcgMTYuOTczMTQ5NzcgMS41NzAzMTI1IDE2Ljc0NjA5Mzc1IEMtNC45MDkwNjM1OCAxNS45Mjg0MDg5MSAtNy44MDY5NTYzOCAxMy44OTExMzYyMyAtMTEuODIwMzEyNSA4Ljc3NzM0Mzc1IEMtMTMgNyAtMTMgNyAtMTMgNiBDLTYuMzc1IDUuODc1IC02LjM3NSA1Ljg3NSAtMyA3IEMtMi44NzYyNSA2LjQwMTg3NSAtMi43NTI1IDUuODAzNzUgLTIuNjI1IDUuMTg3NSBDLTIgMyAtMiAzIDAgMCBaICIgZmlsbD0iI0YyRjdGNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5NCw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMSAyIDEgMiAwLjkzNzUgNS44MTI1IEMwLjg3OTY0ODA4IDkuMzg2NDYzMTggMS42NDA2MzE3NyAxMS42ODY1Mzk5NCAzIDE1IEMzLjQ3NzIyODgxIDE5LjM3NDU5NzM5IDMuNDk4NjQwNDQgMjEuMjg5ODE1MTMgMC45Mzc1IDI0LjkzNzUgQy0xLjA1MTY1MDY5IDI4LjA4MTY0MTQxIC0xLjI4MzkwMDM2IDI4LjY1NDU4MTU5IC0wLjkzNzUgMzIuMTI1IEMtMC4wNDE1OTEyMiAzNS44MjgwODk2MSAwLjc4Mzk2MDg3IDM3LjEwOTUxNDE4IDMgNDAgQzMuNjQwNzA0NzggNDQuOTEyMDY5OTQgMi4yODAwNjUxNiA0Ny43MTM0Nzc1IDAgNTIgQy0wLjY5OTA3NDE0IDU0LjczNTcyNTg1IC0wLjY5OTA3NDE0IDU0LjczNTcyNTg1IC0xIDU3IEMtMS45OSA1NyAtMi45OCA1NyAtNCA1NyBDLTMuMjQ3ODEzNDEgNTAuNDgxMDQ5NTYgLTMuMjQ3ODEzNDEgNTAuNDgxMDQ5NTYgLTEuOTM3NSA0Ny45Mzc1IEMtMC41NTU0NjYzNyA0NS4wODEyOTcxNyAtMC42Mjk3ODY4MiA0My4xNDY4MTIgLTEgNDAgQy0xLjkyMzQ0MjExIDM4LjIzNzkyNDggLTEuOTIzNDQyMTEgMzguMjM3OTI0OCAtMy4wNjI1IDM2LjUgQy00LjcyOTM3MDExIDMzLjgyMjM2ODIyIC01LjAwMjU5OTI2IDMzLjEzMjU2MjEgLTQuOTM3NSAyOS44MTI1IEMtNCAyNyAtNCAyNyAtMi40Mzc1IDI1LjE4NzUgQy0wLjE2NjczOTU4IDIxLjczMTk5NTAyIC0wLjYxNDU0MzE5IDE4LjAyNTA1ODY1IC0xIDE0IEMtMS4zMyAxMy4wMSAtMS42NiAxMi4wMiAtMiAxMSBDLTIuMTY3OTY4NzUgOS4wNjI1IC0yLjE2Nzk2ODc1IDkuMDYyNSAtMi4xODc1IDcgQy0yLjIwMTY3OTY5IDYuMzE5Mzc1IC0yLjIxNTg1OTM4IDUuNjM4NzUgLTIuMjMwNDY4NzUgNC45Mzc1IEMtMiAzIC0yIDMgMCAwIFogIiBmaWxsPSIjMTQ3MDRCIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMxMi44NyAwIDI1Ljc0IDAgMzkgMCBDMzUuMDM1MDk2OTkgMy45NjQ5MDMwMSAzNS4wMzUwOTY5OSAzLjk2NDkwMzAxIDMwLjY1MTg1NTQ3IDQuMTEzNTI1MzkgQzI5LjIyMzYyMzAzIDQuMTEzMzY2ODggMjcuNzk1Mzg0NTggNC4xMDc3MDczNSAyNi4zNjcxODc1IDQuMDk3NjU2MjUgQzI1LjIzOTQzNDA1IDQuMDk1NTMzODMgMjUuMjM5NDM0MDUgNC4wOTU1MzM4MyAyNC4wODg4OTc3MSA0LjA5MzM2ODUzIEMyMS42ODQyMjQ5IDQuMDg3NzY0NjUgMTkuMjc5NjQ0NzMgNC4wNzUyMTE1NyAxNi44NzUgNC4wNjI1IEMxNS4yNDYwOTUwOSA0LjA1NzQ4NTUgMTMuNjE3MTg4NzMgNC4wNTI5MjI1IDExLjk4ODI4MTI1IDQuMDQ4ODI4MTIgQzcuOTkyMTUxNzMgNC4wMzc3OTM5NyAzLjk5NjA5MTU4IDQuMDIwNTI2NzkgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0MSwxMDIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNDQ1MDA2NiAyLjkzNTY2NDIzIDMuNTc0ODI0NjQgNS4yNTc0NDI5NCAzLjk2ODc1IDkuNTk3NjU2MjUgQzMuOTk4ODM1MiAxMS45MTA0NTU4IDMuNzA3ODg2MzggMTMuODY2Mzg3MzUgMy4yNSAxNi4xMjUgQzIuOTg0MTIwNjEgMjAuMjQ2MTMwNTMgMy4xMDk4NDA0MiAyMC42ODU1NzQyMiA1LjQzNzUgMjMuNzUgQzUuOTEwNTg1OTQgMjQuMjgxMDkzNzUgNi4zODM2NzE4NyAyNC44MTIxODc1IDYuODcxMDkzNzUgMjUuMzU5Mzc1IEM4IDI3IDggMjcgOCAzMSBDMTAuMzEgMzEuNjYgMTIuNjIgMzIuMzIgMTUgMzMgQzE1IDMzLjk5IDE1IDM0Ljk4IDE1IDM2IEMxNi4zMiAzNi42NiAxNy42NCAzNy4zMiAxOSAzOCBDMTkgMzguOTkgMTkgMzkuOTggMTkgNDEgQzE3LjkxNzE4NzUgNDAuNDc0MDYyNSAxNy45MTcxODc1IDQwLjQ3NDA2MjUgMTYuODEyNSAzOS45Mzc1IEMxNC4wNzY4ODc3IDM4Ljc1NjQ4MjEyIDE0LjA3Njg4NzcgMzguNzU2NDgyMTIgMTEuNSAzOS41NjI1IEM5IDQwIDkgNDAgNi4xODc1IDM4LjU2MjUgQzUuNDY1NjI1IDM4LjA0Njg3NSA0Ljc0Mzc1IDM3LjUzMTI1IDQgMzcgQzQuMTk1MjkyOTcgMzYuMTY0Njg3NSA0LjE5NTI5Mjk3IDM2LjE2NDY4NzUgNC4zOTQ1MzEyNSAzNS4zMTI1IEM1LjMwMzg2MTMxIDMwLjQ2NzI5MzAxIDUuMzAzODYxMzEgMzAuNDY3MjkzMDEgMy45MTc5Njg3NSAyNS44NjcxODc1IEMyLjk3NDUwMDc2IDI0LjU0MTY1Mzk2IDIuMDI5MTkzNjQgMjMuMjE3NDI3NDggMS4wODIwMzEyNSAyMS44OTQ1MzEyNSBDLTAuNjgwNTA5NzQgMTguODA4NDkzNzggMC4yMzQyODE5NyAxNi4zNTczNzkwNyAxIDEzIEMxLjA4MjI5MTcgMTEuNDM5MTEyMjkgMS4xMjI0NDU5OSA5Ljg3NTU1MzM3IDEuMTI1IDguMzEyNSBDMS4xMjg4NjcxOSA3LjIyMzg4NjcyIDEuMTI4ODY3MTkgNy4yMjM4ODY3MiAxLjEzMjgxMjUgNi4xMTMyODEyNSBDMC45OTc4MDczMiAzLjk2NTExMDU5IDAuNTg3NzI5NCAyLjA2NjM4MTk1IDAgMCBaICIgZmlsbD0iI0VGRjVGMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3OCw2MykiLz4KPHBhdGggZD0iTTAgMCBDOS4yNCAwIDE4LjQ4IDAgMjggMCBDMjggMS42NSAyOCAzLjMgMjggNSBDMTguNzYgNSA5LjUyIDUgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTEwLDk0KSIvPgo8cGF0aCBkPSJNMCAwIEM5LjI0IDAgMTguNDggMCAyOCAwIEMyOCAxLjY1IDI4IDMuMyAyOCA1IEMxOC43NiA1IDkuNTIgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzkuMjQgMCAxOC40OCAwIDI4IDAgQzI4IDEuNjUgMjggMy4zIDI4IDUgQzE4Ljc2IDUgOS41MiA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUxMCw1MCkiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjc1NDE0MjM1IDIyLjQ5MDU2OTM3IC0wLjI2NzY1MDE5IDI1LjU4MjA3Mjg1IC00IDMxIEMtMy45Mjc0OTIxNCAzNC41NTI4ODQ5NCAtMy4zMTc3NDE2NCAzNi40OTE2MTMzNyAtMS40Mzc1IDM5LjUgQzAuNDMyMjMyNTQgNDIuNzUxNzA4NzYgMC40OTI4MjA0OCA0NC4yNjg2NDQ5NCAwIDQ4IEMtMS4xNzkwNDA1IDUxLjQwNDQxNTYzIC0yLjU0MTk2MzU0IDU0LjcwNjM5OTc4IC00IDU4IEMtNC45OSA1Ny42NyAtNS45OCA1Ny4zNCAtNyA1NyBDLTYuNTc1MjcyMSA1NC40NTE2MzI2IC02LjE4NjYwNjY3IDUyLjM0MDI4Mjc1IC00LjkzNzUgNTAuMDYyNSBDLTMuNjI5MDkzODEgNDcuMTg0MDA2MzkgLTMuNjg2MTgxNDMgNDUuMTM4MTg1NzMgLTQgNDIgQy00LjQ5NSA0MS4wMSAtNC45OSA0MC4wMiAtNS41IDM5IEMtNy4yMTc0NTA3IDM1LjU2NTA5ODYgLTcuNTUyMzU3MzMgMzMuNzg3NTkzMTMgLTcgMzAgQy01Ljk4MjkyOTY5IDI4LjY2Nzc1MzkxIC01Ljk4MjkyOTY5IDI4LjY2Nzc1MzkxIC00Ljk0NTMxMjUgMjcuMzA4NTkzNzUgQy0yLjU3NzgwMDU3IDIzLjI4MTkyMTg1IC0yLjgyMDAzNjc0IDIwLjUwMjM1NDg2IC0zLjQzNzUgMTYuMDYyNSBDLTQuMjQwNTQ3MzkgMTAuMDc2NjY0NDYgLTMuNzgyNzc2OTMgNi4zMjc0MTg5MSAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogIiBmaWxsPSIjRTRFRUVBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYwKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjkwOTM4NzAzIDMuNzM5NDEzNjggMy45MDkzODcwMyAzLjczOTQxMzY4IDQuMTMyODEyNSA2Ljg0NzY1NjI1IEM0LjEzMDIzNDM4IDcuNTc4NTU0NjkgNC4xMjc2NTYyNSA4LjMwOTQ1MzEzIDQuMTI1IDkuMDYyNSBDNC4xMjI0MjE4OCA5Ljg2MzAwNzgxIDQuMTE5ODQzNzUgMTAuNjYzNTE1NjMgNC4xMTcxODc1IDExLjQ4ODI4MTI1IEM0LjAwMTcwMTk1IDEzLjk2MzUyMTY0IDMuNjUxMDI0NzkgMTYuMzA3MDIyNDggMy4yNSAxOC43NSBDMi43NjIwMjY5NSAyMi40MjA4OTQxOCAyLjc2MjAyNjk1IDIyLjQyMDg5NDE4IDQuOTM3NSAyNS41NjI1IEM1Ljk1ODQzNzUgMjYuNzY5MDYyNSA1Ljk1ODQzNzUgMjYuNzY5MDYyNSA3IDI4IEM4LjA0NzU1MTk0IDMzLjMxNDE0MzcgNi44NDIyMzI0NCAzNi40OTk3OTg2MyA0IDQxIEMzLjM3MDk3MDM5IDQ1LjkyNzM5ODU3IDQuNzQ3ODkzNDUgNDguNjgzNDYyNDQgNyA1MyBDNyA1NC4zMiA3IDU1LjY0IDcgNTcgQzQgNTYgNCA1NiAyLjc5Njg3NSA1My45MjU3ODEyNSBDLTAuNzYwMjg1NzMgNDUuMDQ2MTUyNDIgLTAuNzYwMjg1NzMgNDUuMDQ2MTUyNDIgMSA0MCBDMS41MTU2MjUgMzkuMTc1IDIuMDMxMjUgMzguMzUgMi41NjI1IDM3LjUgQzQuMzg3MDI3NTYgMzQuMzI2OTA4NTggNC41MTY0NDExOCAzMi42MTUwODgyNSA0IDI5IEMzLjM0IDI4LjAzMDYyNSAyLjY4IDI3LjA2MTI1IDIgMjYuMDYyNSBDLTAuNDEwNTc3ODIgMjIuMzcxMzAyNzIgLTAuNDA4MzI3NTUgMjAuMzI4MjcxOTkgMCAxNiBDMC4zMyAxNS4wMSAwLjY2IDE0LjAyIDEgMTMgQzEuMDkyNDczODEgMTEuNTIzMTM4ODkgMS4xMjk5OTA3MSAxMC4wNDIyNDQ5OSAxLjEyNSA4LjU2MjUgQzEuMTI4ODY3MTkgNy40MTk3NDYwOSAxLjEyODg2NzE5IDcuNDE5NzQ2MDkgMS4xMzI4MTI1IDYuMjUzOTA2MjUgQzEuMDAyNzYwMTUgNC4wNDY4NDE0MSAwLjYwODU2MTk5IDIuMTIwMzA3MjQgMCAwIFogIiBmaWxsPSIjRTZGMEVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc0LDYxKSIvPgo8cGF0aCBkPSJNMCAwIEM4LjI1IDAgMTYuNSAwIDI1IDAgQzI1LjY2IDEuNjUgMjYuMzIgMy4zIDI3IDUgQzE4LjA5IDUgOS4xOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU4Nyw1NykiLz4KPHBhdGggZD0iTTAgMCBDOC4yNSAwIDE2LjUgMCAyNSAwIEMyNSAxLjY1IDI1IDMuMyAyNSA1IEMxNi40MiA1IDcuODQgNSAtMSA1IEMtMC42NyAzLjM1IC0wLjM0IDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjQsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyLjMzIDEuNjUgMi42NiAzLjMgMyA1IEM0LjY1IDUgNi4zIDUgOCA1IEM3LjAxIDYuNDg1IDcuMDEgNi40ODUgNiA4IEM1LjgzMjg2NDMxIDEwLjYyNTMxNTI0IDUuODMyODY0MzEgMTAuNjI1MzE1MjQgNiAxMyBDNi42NiAxMy4zMyA3LjMyIDEzLjY2IDggMTQgQzcuMzQgMTQgNi42OCAxNCA2IDE0IEM2IDE0LjY2IDYgMTUuMzIgNiAxNiBDMi43IDE2IC0wLjYgMTYgLTQgMTYgQy00IDE1LjM0IC00IDE0LjY4IC00IDE0IEMtNC42NiAxMy42NyAtNS4zMiAxMy4zNCAtNiAxMyBDLTUuMzQgMTMgLTQuNjggMTMgLTQgMTMgQy0zLjc5OTEzNTU3IDkuMjg0MDA4MDkgLTMuODQ4MDU2MyA4LjIyNzkxNTU1IC02IDUgQy00LjM1IDUgLTIuNyA1IC0xIDUgQy0wLjY3IDMuMzUgLTAuMzQgMS43IDAgMCBaICIgZmlsbD0iI0Q4RTdFMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2MCwzNykiLz4KPHBhdGggZD0iTTAgMCBDMCAxLjY1IDAgMy4zIDAgNSBDLTAuNzYzMTI1IDQuNzczMTI1IC0xLjUyNjI1IDQuNTQ2MjUgLTIuMzEyNSA0LjMxMjUgQy0zLjE5OTM3NSA0LjIwOTM3NSAtNC4wODYyNSA0LjEwNjI1IC01IDQgQy02LjgzNTQ3OTkgNS4zMzM3ODU3NSAtNi44MzU0Nzk5IDUuMzMzNzg1NzUgLTggNyBDLTcuMzQgOC42NSAtNi42OCAxMC4zIC02IDEyIEMtMy42OSAxMiAtMS4zOCAxMiAxIDEyIEMxIDEzLjMyIDEgMTQuNjQgMSAxNiBDLTUuMjAwODE5NjcgMTcuMzM3NDMxNjkgLTUuMjAwODE5NjcgMTcuMzM3NDMxNjkgLTguODEyNSAxNS44MTI1IEMtMTEuMTQwMzY2MTcgMTMuODgzNjk2NiAtMTIuMTcyMjU2MTEgMTIuODk3MTAzNjEgLTEzIDEwIEMtMTIuODU1NzAyNCA2LjUzNjg1NzUgLTEyLjM0NTYyNDk3IDQuNTI1MzQ5OTYgLTEwLjQzNzUgMS42MjUgQy02Ljg1NzUyODY3IC0wLjc2MTY0NzU1IC00LjI0ODUyOTc0IC0wLjI4MzIzNTMyIDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE5Miw5MykiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQzEuNjUgMyAzLjMgMyA1IDMgQzUgNC4zMiA1IDUuNjQgNSA3IEMzLjM1IDcgMS43IDcgMCA3IEMwIDkuOTcgMCAxMi45NCAwIDE2IEMxLjY1IDE1LjY3IDMuMyAxNS4zNCA1IDE1IEM1IDE2LjMyIDUgMTcuNjQgNSAxOSBDMS43MTMwMzc2NyAxOS43OTk1MzEzOCAwLjI4OTc2ODA4IDIwLjA5NjU4OTM2IC0zIDE5IEMtNC4yNjIzNzczMSAxNi40NzUyNDUzOCAtNC4wOTg1NjQwNCAxNC42ODc5OTUzNCAtNC4wNjI1IDExLjg3NSBDLTQuMDUzNDc2NTYgMTAuOTY0OTIxODggLTQuMDQ0NDUzMTMgMTAuMDU0ODQzNzUgLTQuMDM1MTU2MjUgOS4xMTcxODc1IEMtNC4wMjM1NTQ2OSA4LjQxODUxNTYyIC00LjAxMTk1MzEzIDcuNzE5ODQzNzUgLTQgNyBDLTQuOTkgNyAtNS45OCA3IC03IDcgQy0zLjg2MjA2ODk3IDAgLTMuODYyMDY4OTcgMCAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxMzcsOTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMS42NSAwLjY2IDMuMyAxIDUgQzAuMDUxMjUgNC43OTM3NSAtMC44OTc1IDQuNTg3NSAtMS44NzUgNC4zNzUgQy0zLjQyMTg3NSA0LjE4OTM3NSAtMy40MjE4NzUgNC4xODkzNzUgLTUgNCBDLTcuMzQ5NzM4MTggNS44OTc1NTE0NCAtNy4zNDk3MzgxOCA1Ljg5NzU1MTQ0IC03LjEyNSA5LjEyNSBDLTcuMDYzMTI1IDEwLjU0ODEyNSAtNy4wNjMxMjUgMTAuNTQ4MTI1IC03IDEyIEMtNC4zNiAxMiAtMS43MiAxMiAxIDEyIEMxIDEzLjMyIDEgMTQuNjQgMSAxNiBDLTUuMzI5OTc5ODggMTcuMjE3MzAzODIgLTUuMzI5OTc5ODggMTcuMjE3MzAzODIgLTguMzEyNSAxNi4yNSBDLTEwIDE1IC0xMCAxNSAtMTIgMTIgQy0xMi40NDUwNTU3NiA3Ljk5NDQ5ODEzIC0xMi4zNDMxOTE2NyA1LjY3MjA4MzY5IC0xMC41IDIuMDYyNSBDLTYuODg4MjI0MDkgLTAuOTE3MjE1MTMgLTQuNTg5MTk0MjEgLTAuMzgyNDMyODUgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTIyLDkzKSIvPgo8cGF0aCBkPSJNMCAwIEM3LjU5IDAgMTUuMTggMCAyMyAwIEMyMy4zMyAxLjY1IDIzLjY2IDMuMyAyNCA1IEMxNi4wOCA1IDguMTYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1ODcsNTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzcuMjYgMCAxNC41MiAwIDIyIDAgQzIyIDEuNjUgMjIgMy4zIDIyIDUgQzE0LjQxIDUgNi44MiA1IC0xIDUgQy0wLjY3IDMuMzUgLTAuMzQgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYyNyw1MCkiLz4KPHBhdGggZD0iTTAgMCBDMy45NiAwIDcuOTIgMCAxMiAwIEMxMiAzLjY2NjY2NjY3IDEyIDcuMzMzMzMzMzMgMTIgMTEgQzguMDQgMTEgNC4wOCAxMSAwIDExIEMwIDcuMzMzMzMzMzMgMCAzLjY2NjY2NjY3IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc4MiwxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzkuMjQgMCAxOC40OCAwIDI4IDAgQzI4IDEuMzIgMjggMi42NCAyOCA0IEMxOC43NiA0IDkuNTIgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTEwLDEwMikiLz4KPHBhdGggZD0iTTAgMCBDMCAxLjY1IDAgMy4zIDAgNSBDLTAuNTU1NTg1OTQgNC41MTQwMjM0NCAtMS4xMTExNzE4OCA0LjAyODA0Njg4IC0xLjY4MzU5Mzc1IDMuNTI3MzQzNzUgQy00LjM3OTY1MzUgMS43NDk2NzE5NyAtNS44NjQwNjM4NiAxLjU2NzMyNDE5IC05LjA2MjUgMS41NjI1IEMtOS45MTk3MjY1NiAxLjU0MzE2NDA2IC0xMC43NzY5NTMxMyAxLjUyMzgyODEzIC0xMS42NjAxNTYyNSAxLjUwMzkwNjI1IEMtMTQuMTc3NTgwNDEgMS43OTY0NDEzNyAtMTQuMTc3NTgwNDEgMS43OTY0NDEzNyAtMTUuODA4NTkzNzUgNC4wMjczNDM3NSBDLTE2LjM5ODMzOTg0IDUuMDAzODA4NTkgLTE2LjM5ODMzOTg0IDUuMDAzODA4NTkgLTE3IDYgQy0xNS4wMiA2IC0xMy4wNCA2IC0xMSA2IEMtMTAuNjcgNy42NSAtMTAuMzQgOS4zIC0xMCAxMSBDLTExLjMyIDExIC0xMi42NCAxMSAtMTQgMTEgQy0xNCAxMC4zNCAtMTQgOS42OCAtMTQgOSBDLTE1LjMyIDkgLTE2LjY0IDkgLTE4IDkgQy0xOC4zMyA3LjM1IC0xOC42NiA1LjcgLTE5IDQgQy0xOS42NiA0LjY2IC0yMC4zMiA1LjMyIC0yMSA2IEMtMjEgNC4wMiAtMjEgMi4wNCAtMjEgMCBDLTEzLjk3OTM2NDY0IC0yLjM5MDAwMzUzIC02Ljg1MjIxNDU0IC0zLjUzNjYyNjg2IDAgMCBaICIgZmlsbD0iIzE5NzM0RiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw1NykiLz4KPHBhdGggZD0iTTAgMCBDNi45MyAwIDEzLjg2IDAgMjEgMCBDMjEgMS42NSAyMSAzLjMgMjEgNSBDMTQuMDcgNSA3LjE0IDUgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjI5LDk0KSIvPgo8cGF0aCBkPSJNMCAwIEMwIDAuOTkgMCAxLjk4IDAgMyBDLTAuOTkgMyAtMS45OCAzIC0zIDMgQy0zIDMuNjYgLTMgNC4zMiAtMyA1IEMtMi4wMSA1LjMzIC0xLjAyIDUuNjYgMCA2IEMwIDcuMzIgMCA4LjY0IDAgMTAgQy02LjYyNSAxMi44NzUgLTYuNjI1IDEyLjg3NSAtMTAgMTQgQy0xMS4xOTI4NzQxMSAxMC4xMjMxNTkxMyAtMTIgNy4wODM3ODA3NyAtMTIgMyBDLTEwLjc1MzM2NjY5IDIuNDkxNjY0MDkgLTkuNTAyNTA2MTMgMS45OTM2ODg1NSAtOC4yNSAxLjUgQy03LjU1MzkwNjI1IDEuMjIxNTYyNSAtNi44NTc4MTI1IDAuOTQzMTI1IC02LjE0MDYyNSAwLjY1NjI1IEMtNCAwIC00IDAgMCAwIFogIiBmaWxsPSIjMUM3NTUxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzI5LDgwKSIvPgo8cGF0aCBkPSJNMCAwIEM2LjYgMCAxMy4yIDAgMjAgMCBDMjAgMS42NSAyMCAzLjMgMjAgNSBDMTMuNCA1IDYuOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU4Nyw5NCkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzQgNy45MiA0IDE1Ljg0IDQgMjQgQzIuNjggMjQgMS4zNiAyNCAwIDI0IEMwIDE2LjA4IDAgOC4xNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNzcsODUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuNjA4NzUgLTAuMDIwNjI1IDMuMjE3NSAtMC4wNDEyNSA0Ljg3NSAtMC4wNjI1IEM1Ljc3OTkyMTg4IC0wLjA3NDEwMTU2IDYuNjg0ODQzNzUgLTAuMDg1NzAzMTIgNy42MTcxODc1IC0wLjA5NzY1NjI1IEMxMCAwIDEwIDAgMTIgMSBDMTEuMzQgMi4zMiAxMC42OCAzLjY0IDEwIDUgQzguMzUgNSA2LjcgNSA1IDUgQzQuNjcgOC42MyA0LjM0IDEyLjI2IDQgMTYgQzIuNjggMTYgMS4zNiAxNiAwIDE2IEMwIDEwLjcyIDAgNS40NCAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxNDksOTMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuMjcgMCAxMi41NCAwIDE5IDAgQzE4LjY3IDEuNjUgMTguMzQgMy4zIDE4IDUgQzEyLjM5IDUgNi43OCA1IDEgNSBDMC42NyAzLjM1IDAuMzQgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYwOSw3OSkiLz4KPHBhdGggZD0iTTAgMCBDNi45MyAwIDEzLjg2IDAgMjEgMCBDMjEgMS4zMiAyMSAyLjY0IDIxIDQgQzEzLjc0IDQgNi40OCA0IC0xIDQgQy0wLjY3IDIuNjggLTAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjEsNjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuODEyNSAyLjE4NzUgMC44MTI1IDIuMTg3NSAxIDUgQy0xLjEyNSA3Ljg3NSAtMS4xMjUgNy44NzUgLTQgMTAgQy02LjgxMjUgOS44MTI1IC02LjgxMjUgOS44MTI1IC05IDkgQy05Ljc1IDYuNzUgLTkuNzUgNi43NSAtMTAgNCBDLTcuMTk2NDEzNTIgLTAuMTQ5MzA3OTkgLTQuODI5NDYzOCAtMC40MzkwNDIxNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxMDgsNDApIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuOTMgMCAxMy44NiAwIDIxIDAgQzIxIDEuMzIgMjEgMi42NCAyMSA0IEMxNC4wNyA0IDcuMTQgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjI5LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDNi42IDAgMTMuMiAwIDIwIDAgQzIwLjMzIDEuMzIgMjAuNjYgMi42NCAyMSA0IEMxNC4wNyA0IDcuMTQgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTk1LDY1KSIvPgo8cGF0aCBkPSJNMCAwIEM2LjYgMCAxMy4yIDAgMjAgMCBDMjAgMS4zMiAyMCAyLjY0IDIwIDQgQzEzLjQgNCA2LjggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTg3LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDMC4zMyAwLjY2IDAuNjYgMS4zMiAxIDIgQzAuNjcgMi42NiAwLjM0IDMuMzIgMCA0IEMwLjAyMzc5MDQgNi4zMTEwNzg3OCAwLjAyMzc5MDQgNi4zMTEwNzg3OCAwLjMxMjUgOC44NzUgQzAuMzkxMTMyODEgOS43Mzg2NzE4NyAwLjQ2OTc2NTYzIDEwLjYwMjM0Mzc1IDAuNTUwNzgxMjUgMTEuNDkyMTg3NSBDMS4wMDMyMDcyNCAxNC4wMTc5MDQ3NSAxLjgxMjYwODMzIDE1Ljc0ODIxMzQgMyAxOCBDMy42ODc1MDI5NCAyMy4yNzA4NTU4NiAyLjE2OTQxODg1IDI1Ljg0MDEzNzc1IC0xIDMwIEMtMS42NiAyOS42NyAtMi4zMiAyOS4zNCAtMyAyOSBDLTIuNTA1IDI3Ljk3OTA2MjUgLTIuNTA1IDI3Ljk3OTA2MjUgLTIgMjYuOTM3NSBDLTAuNTQwNjAwMTQgMjIuNjUwNTEyOSAtMC4yNjA1MDE3MyAxOC44MDI1MjcwNCAtMiAxNC41NjI1IEMtMy40NjUwNTgyOSAxMC44MDgyODgxMiAtMy4zMjAyMDE1OSA4LjAzNDU0MDAyIC0zIDQgQy0xLjUgMS41IC0xLjUgMS41IDAgMCBaICIgZmlsbD0iI0U1RUZFQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1MSw2MCkiLz4KPHBhdGggZD0iTTAgMCBDMC4zMyAwIDAuNjYgMCAxIDAgQzAuOTg4Mzk4NDQgMC43NTAyMzQzNyAwLjk3Njc5Njg3IDEuNTAwNDY4NzUgMC45NjQ4NDM3NSAyLjI3MzQzNzUgQzAuOTE5NjU0NTMgNy4zOTkxODY2NiAwLjk4NDI4NjYxIDEyLjMwMTE4MTk1IDEuNzUgMTcuMzc1IEMyLjE5NjY0NjM5IDIxLjE0NzM1MTI3IDIuMTA3NDI3NTkgMjEuODEwMjExMjYgMC4xMjUgMjUuMzEyNSBDLTAuOTI2ODc1IDI2LjY0MjgxMjUgLTAuOTI2ODc1IDI2LjY0MjgxMjUgLTIgMjggQy0yLjc4MjE1NTg4IDMwLjcyODI1MDQgLTIuNzgyMTU1ODggMzAuNzI4MjUwNCAtMyAzMyBDLTMuOTkgMzMgLTQuOTggMzMgLTYgMzMgQy01LjY2Mzk0OTIgMjkuMzg3NDUzODUgLTUuNDU0NzA0MzIgMjcuNDg1NTg5OSAtMi45Mjk2ODc1IDI0Ljc4OTA2MjUgQy0wLjM4MTE3MzczIDIxLjEwNTU4MzA5IC0wLjgyNDUyNDMzIDE4LjI5NzIzMDcyIC0xLjM3NSAxNC4wNjI1IEMtMS45OTMyNTI0NiA4Ljg4OTQ2NTc5IC0yLjA0NDM3NzU4IDQuOTExMTE3NTYgMCAwIFogIiBmaWxsPSIjMkE3RDVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ0LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjE2MTE1Nzc2IDEuMzY5ODM1MDMgMy45OTI3MDkyIDEuOTg5MDYzOCA2IDUgQzYuNTMwNzQ3NDEgMTAuNTE5NzczMDggNS4zMDE0OTUxMSAxNC4wMjg3NzA1NSAzIDE5IEMyLjMwODU5NDc4IDIxLjc3ODg4NjEzIDIuMzA4NTk0NzggMjEuNzc4ODg2MTMgMiAyNCBDMS4wMSAyNCAwLjAyIDI0IC0xIDI0IEMtMS4yNTgxMzMwMiAyMC4zODYxMzc3NCAtMS4xNjgxNTY2NyAxOC4zMjkzMDY4IDAuNSAxNS4wNjI1IEMyLjczMzE5NzQyIDEwLjUwMzA1NTI2IDIuNjIzNDM0NjEgNi44MzEzMzkxNiAxIDIuMDYyNSBDMC42NyAxLjM4MTg3NSAwLjM0IDAuNzAxMjUgMCAwIFogIiBmaWxsPSIjMTc3MjREIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzUxLDk3KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjMzIDAuOTkgMC42NiAxLjk4IDEgMyBDMC41MDUgMy45MDc1IDAuMDEgNC44MTUgLTAuNSA1Ljc1IEMtMi4zNzE1ODI0MSA5LjgwNTA5NTIzIC0yLjA1NTkwNDQyIDExLjcwMDk2MDU3IC0xIDE2IEMtMC4wODA4Mzc4IDE4LjM3NzMwOTU2IDAuOTUxMzM0NzMgMjAuNjc0Njk4NzUgMiAyMyBDMiAyMy42NiAyIDI0LjMyIDIgMjUgQzEuMDEgMjUgMC4wMiAyNSAtMSAyNSBDLTEuODcyNzk4NjIgMjMuMTMzNjAwMTkgLTIuNzIyNTEwMjcgMjEuMjU2MzkzODkgLTMuNTYyNSAxOS4zNzUgQy00LjI3NTk5NjA5IDE3LjgwODc4OTA2IC00LjI3NTk5NjA5IDE3LjgwODc4OTA2IC01LjAwMzkwNjI1IDE2LjIxMDkzNzUgQy02LjEzMjU2NzY4IDEyLjU3MjY2NDE5IC02LjAzOTIzNjQyIDEwLjYzNzMyNzQ1IC01IDcgQy0zLjU1NDMxMTQ1IDQuNDMwOTQwMzUgLTEuODIzMDY5ODYgMi4zMzcyNjkwNSAwIDAgWiAiIGZpbGw9IiMxMzZGNEEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzcsOTQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEM1LjE4NDE5OTU5IDMuNzk2NTQ1NjcgNS4zODczNDU0OCA3LjExNjc2MjIgNS4yMzgyODEyNSAxMS44NjMyODEyNSBDNC45NDYwNDkxMyAxNC40ODM3ODg5NyA0LjA0MjM4MTk1IDE2LjU4OTQ5MTczIDMgMTkgQzIuNzkzNDQ5MzQgMjIuNDQyNTEwOTcgMi45MDYxNjA2OSAyNC43MTg0ODIwOCA0IDI4IEMyLjA2MjUgMjcuNjI1IDIuMDYyNSAyNy42MjUgMCAyNyBDLTEuNDIxNTEzNDUgMjQuMTU2OTczMDkgLTEuMjM5MjI2MDYgMjIuMTY5NzQ1MjggLTEgMTkgQy0wLjUwNSAxNy44NjU2MjUgLTAuMDEgMTYuNzMxMjUgMC41IDE1LjU2MjUgQzIuNTQzNzYwMDggMTAuNzA4NTY5ODEgMi42OTcwMTA1NCA3LjA0NzQ2ODQ1IDEgMi4wNjI1IEMwLjY3IDEuMzgxODc1IDAuMzQgMC43MDEyNSAwIDAgWiAiIGZpbGw9IiNEREVBRTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjksNTkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMiAyIDIgMi4yNSA1LjMxMjUgQzIuMDE4NjM0NTIgOC43MjUxNDA4NCAxLjQ3NjUyODggMTAuOTU0NjU5MzUgMCAxNCBDLTAuNjYgMTMuMzQgLTEuMzIgMTIuNjggLTIgMTIgQy0xLjYyNSA4Ljg3NSAtMS42MjUgOC44NzUgLTEgNiBDLTMuMzEgNi4zMyAtNS42MiA2LjY2IC04IDcgQy04LjA0MjcyMSA1LjMzMzg4MDk1IC04LjA0MDYzODMyIDMuNjY2MTcxMTUgLTggMiBDLTUuOTU0NDc5NTggLTAuMDQ1NTIwNDIgLTIuNzI5NDE5MTQgMC4yMzk0MjI3MyAwIDAgWiAiIGZpbGw9IiMwQzZCNDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNjIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMjkgMCA4LjU4IDAgMTMgMCBDMTMgMS42NSAxMyAzLjMgMTMgNSBDOC43MSA1IDQuNDIgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjksNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuMzIgMCAyLjY0IDAgNCAwIEM0IDUuMjggNCAxMC41NiA0IDE2IEMyLjY4IDE2IDEuMzYgMTYgMCAxNiBDMCAxMC43MiAwIDUuNDQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTY5LDkzKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzEyLjY3IDAuOTkgMTIuMzQgMS45OCAxMiAzIEMxMC42OCAzIDkuMzYgMyA4IDMgQzggNS42NCA4IDguMjggOCAxMSBDNy4wMSAxMSA2LjAyIDExIDUgMTEgQzUgOC4zNiA1IDUuNzIgNSAzIEMzLjM1IDIuNjcgMS43IDIuMzQgMCAyIEMwIDEuMzQgMCAwLjY4IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc0OSwxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTgsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTgsNzIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMzIDIuNjQgMyA1LjI4IDMgOCBDNS42NCA4IDguMjggOCAxMSA4IEMxMC42NyA4Ljk5IDEwLjM0IDkuOTggMTAgMTEgQzYuNyAxMSAzLjQgMTEgMCAxMSBDMCA3LjM3IDAgMy43NCAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3OTgsMTE2KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjEyMTE3MTg4IDAuNjAzMjgxMjUgMC4yNDIzNDM3NSAxLjIwNjU2MjUgMC4zNjcxODc1IDEuODI4MTI1IEMwLjUzNDc2NTYzIDIuNjI3MzQzNzUgMC43MDIzNDM3NSAzLjQyNjU2MjUgMC44NzUgNC4yNSBDMS4wMzc0MjE4OCA1LjAzODkwNjI1IDEuMTk5ODQzNzUgNS44Mjc4MTI1IDEuMzY3MTg3NSA2LjY0MDYyNSBDMS45MTcxMzYxNyA5LjAxNDkwNDM4IDEuOTE3MTM2MTcgOS4wMTQ5MDQzOCAzLjA2MjUgMTEuMDkzNzUgQzQuMzcxMjUzNjQgMTMuNzU0ODgyNCA0LjEzMjY4NDUxIDE2LjA4MDk0MDc2IDQgMTkgQzMuMDEgMTkgMi4wMiAxOSAxIDE5IEMwLjcxMTI1IDE3Ljc4MzEyNSAwLjQyMjUgMTYuNTY2MjUgMC4xMjUgMTUuMzEyNSBDLTAuNDgzNjM3NyAxMi44NDMxNjk5MSAtMS4xMzkxMzY4MSAxMC42Njc2MTc2MyAtMi4xMjUgOC4zMTI1IEMtMy4xMDE2MzIyIDUuNzMxNDAwNjMgLTMuMTU2Mzg1NjggMy43MzY3NDk0NSAtMyAxIEMtMSAwIC0xIDAgMCAwIFogIiBmaWxsPSIjMEU2QzQ3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzY4LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDNC45NSAwIDkuOSAwIDE1IDAgQzE0LjM0IDEuMzIgMTMuNjggMi42NCAxMyA0IEM5LjA0IDQgNS4wOCA0IDEgNCBDMC42NyAyLjY4IDAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MTEsODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjI1NDM5MjIgMC41MTc5MTk4OSA3LjI1MDczNjc2IDEuMDM2Mzk3MjcgMTAuODc1IDEuNTYyNSBDMTIuOTMwODIyNzEgMS44NzcxMDUwMiAxMi45MzA4MjI3MSAxLjg3NzEwNTAyIDE1IDIgQzE1IDMuNjUgMTUgNS4zIDE1IDcgQzkuNTQ1MjA4MTUgNi40MzE3OTI1MiA1LjA4OTQwNzQ0IDUuMDUzNjIwNTUgMCAzIEMwIDIuMDEgMCAxLjAyIDAgMCBaICIgZmlsbD0iI0VFRjRGMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5MSw3MykiLz4KPHBhdGggZD0iTTAgMCBDMy42MyAwIDcuMjYgMCAxMSAwIEMxMSAyLjMxIDExIDQuNjIgMTEgNyBDMTAuMzQgNyA5LjY4IDcgOSA3IEM5IDUuNjggOSA0LjM2IDkgMyBDNy4wMiAzIDUuMDQgMyAzIDMgQzIuNjcgNC4zMiAyLjM0IDUuNjQgMiA3IEMxLjM0IDcgMC42OCA3IDAgNyBDMCA0LjY5IDAgMi4zOCAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4MTMsMTIwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzEzIDEuMzIgMTMgMi42NCAxMyA0IEM4LjcxIDQgNC40MiA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjksODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIuMzMgMS4zMiAxMi42NiAyLjY0IDEzIDQgQzguNzEgNCA0LjQyIDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU3Miw4NykiLz4KPHBhdGggZD0iTTAgMCBDMy40NDQ0NzI5OSAyLjkzNTIwOTUxIDMuNTc3ODc2MSA1LjI1NjU4Mjc0IDMuOTY0ODQzNzUgOS41OTc2NTYyNSBDMy45OTg0NTQwNiAxMS44OTQzNjEgMy43Mzc5MTUwOSAxMy44NzUxMjQzMyAzLjMxMjUgMTYuMTI1IEMyLjkwNDY5NjM3IDIxLjE4MTc2NSA0LjE4MDYwNDkgMjIuODk5MDYxNjcgNyAyNyBDNi4zNCAyNy4zMyA1LjY4IDI3LjY2IDUgMjggQy0wLjA2ODA5Mzg0IDIxLjI0ODM4NzEgLTAuMDY4MDkzODQgMjEuMjQ4Mzg3MSAwLjE4NzUgMTYuNTYyNSBDMC40NTU2MjUgMTUuMzg2ODc1IDAuNzIzNzUgMTQuMjExMjUgMSAxMyBDMS4wODIyOTE3IDExLjQzOTExMjI5IDEuMTIyNDQ1OTkgOS44NzU1NTMzNyAxLjEyNSA4LjMxMjUgQzEuMTI4ODY3MTkgNy4yMjM4ODY3MiAxLjEyODg2NzE5IDcuMjIzODg2NzIgMS4xMzI4MTI1IDYuMTEzMjgxMjUgQzAuOTk3ODA3MzIgMy45NjUxMTA1OSAwLjU4NzcyOTQgMi4wNjYzODE5NSAwIDAgWiAiIGZpbGw9IiNEMEUyREIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzgsNjMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMjkgMCA4LjU4IDAgMTMgMCBDMTIuNjcgMS4zMiAxMi4zNCAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU3Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0xLjU3OTY3ODA3IDMuNjc1MjgyMjMgLTMuMTYzOTE5MDMgNC4zMzk4OTY5NCAtNC43NSA1IEMtNi4wNzI1NzgxMyA1LjU1Njg3NSAtNi4wNzI1NzgxMyA1LjU1Njg3NSAtNy40MjE4NzUgNi4xMjUgQy0xMCA3IC0xMCA3IC0xNCA3IEMtMTQgNS42OCAtMTQgNC4zNiAtMTQgMyBDLTQuNTg5OTc3MjIgLTAuNDQ0MTkxMzQgLTQuNTg5OTc3MjIgLTAuNDQ0MTkxMzQgMCAwIFogIiBmaWxsPSIjRUZGNUYzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzMxLDczKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzEyIDEuMzIgMTIgMi42NCAxMiA0IEM4LjA0IDQgNC4wOCA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS4zMiAxMiAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0OSw4NykiLz4KPHBhdGggZD0iTTAgMCBDMy45NiAwIDcuOTIgMCAxMiAwIEMxMiAxLjMyIDEyIDIuNjQgMTIgNCBDOC4wNCA0IDQuMDggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTE4LDg3KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzEyIDEuMzIgMTIgMi42NCAxMiA0IEM4LjA0IDQgNC4wOCA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDksNjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS4zMiAxMiAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUxOCw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMy4zNzQ2MjcxNSAwLjU0NzIzNjgzIDUuMDgyMzUgMS4wNTQ5IDggMyBDNy4zNCA0Ljk4IDYuNjggNi45NiA2IDkgQzQgOCAyIDcgMCA2IEMwIDQuMDIgMCAyLjA0IDAgMCBaICIgZmlsbD0iIzFENzY1MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5Myw5MykiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjEyNzgxNzg2IDE4LjY3Mzk0OTY0IDAuMDQzOTE4NzEgMjEuMzIwOTU4NTcgMCAyNCBDLTAuNjYgMjQgLTEuMzIgMjQgLTIgMjQgQy0zLjcyNzI5MzA0IDE3LjI5MDY3OTkxIC00Ljc4MjM1NDYyIDEwLjgxODQwMzYgLTMgNCBDLTEuNDQ5MjE4NzUgMS43MTA5Mzc1IC0xLjQ0OTIxODc1IDEuNzEwOTM3NSAwIDAgWiAiIGZpbGw9IiNEOUU4RTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNDgsNjApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMCAwLjY2IDAgMSAwIEMxIDEuNjUgMSAzLjMgMSA1IEMxLjg4Njg3NSA0LjY5MDYyNSAyLjc3Mzc1IDQuMzgxMjUgMy42ODc1IDQuMDYyNSBDOS4xNjA2NzE0NiAyLjMwNjk1NDQ0IDkuMTYwNjcxNDYgMi4zMDY5NTQ0NCAxMiAyIEMxMi45OSAyLjY2IDEzLjk4IDMuMzIgMTUgNCBDMTQuNjcgNC42NiAxNC4zNCA1LjMyIDE0IDYgQzExLjY4MDI1NzY2IDYuNDE3NTUzNjIgOS4zNDIxNDIwNyA2LjczNTU2NDYgNyA3IEM1LjA1MDkzNzUgNy4yNzg0Mzc1IDUuMDUwOTM3NSA3LjI3ODQzNzUgMy4wNjI1IDcuNTYyNSBDMi4wNTE4NzUgNy43MDY4NzUgMS4wNDEyNSA3Ljg1MTI1IDAgOCBDMCA1LjM2IDAgMi43MiAwIDAgWiAiIGZpbGw9IiMxODcyNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMTcsNjgpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMzMzMzMzMzMgMCA2LjY2NjY2NjY3IDAgMTAgMCBDMTAgMS45OCAxMCAzLjk2IDEwIDYgQzcuMzYgNiA0LjcyIDYgMiA2IEMyIDQuNjggMiAzLjM2IDIgMiBDMS4zNCAyIDAuNjggMiAwIDIgQzAgMS4zNCAwIDAuNjggMCAwIFogIiBmaWxsPSIjMDA2NDNDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzg1LDExNykiLz4KPHBhdGggZD0iTTAgMCBDMi45NyAwIDUuOTQgMCA5IDAgQzguNjcgMS42NSA4LjM0IDMuMyA4IDUgQzUuNjkgNSAzLjM4IDUgMSA1IEMwLjY3IDMuMzUgMC4zNCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjE0LDk0KSIvPgo8cGF0aCBkPSJNMCAwIEMwIDAuOTkgMCAxLjk4IDAgMyBDLTMuNjMgNC4zMiAtNy4yNiA1LjY0IC0xMSA3IEMtMTEuMzMgNS42OCAtMTEuNjYgNC4zNiAtMTIgMyBDLTEwLjc1MzM2NjY5IDIuNDkxNjY0MDkgLTkuNTAyNTA2MTMgMS45OTM2ODg1NSAtOC4yNSAxLjUgQy03LjU1MzkwNjI1IDEuMjIxNTYyNSAtNi44NTc4MTI1IDAuOTQzMTI1IC02LjE0MDYyNSAwLjY1NjI1IEMtNCAwIC00IDAgMCAwIFogIiBmaWxsPSIjRUZGNUYyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzI5LDgwKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjA3MDc3Mzc1IDMuMjEyMzIxMjUgMSA1LjYzOTM3ODA3IDEgOSBDMS4zMyA5Ljk5IDEuNjYgMTAuOTggMiAxMiBDMS4wMSAxMiAwLjAyIDEyIC0xIDEyIEMtMS4zMyAxMC4zNSAtMS42NiA4LjcgLTIgNyBDLTMuOTggNyAtNS45NiA3IC04IDcgQy03LjIzNjg3NSA2LjQwMTg3NSAtNi40NzM3NSA1LjgwMzc1IC01LjY4NzUgNS4xODc1IEMtMy42NTE2NDI1IDMuNTMwNDA2NjggLTEuODAyMTcyMSAxLjg5NzAyMzI2IDAgMCBaICIgZmlsbD0iIzBENkI0NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2OCw3NSkiLz4KPHBhdGggZD0iTTAgMCBDMS4yMDE1NzEzMSAzLjYwNDcxMzkzIDEuNTQ5ODEzNDggNy4xMTUwMzA4OCAxLjg3NSAxMC44NzUgQzEuOTYwMDc4MTMgMTEuNTgyNjk1MzEgMi4wNDUxNTYyNSAxMi4yOTAzOTA2MyAyLjEzMjgxMjUgMTMuMDE5NTMxMjUgQzIuNDc2OTI2MjggMTcuMjE5MjgzNTEgMi4yMzk3Mzc5MiAxOC43MTA2NjExMyAtMC40OTIxODc1IDIyLjAwNzgxMjUgQy0xLjMxOTc2NTYyIDIyLjY2NTIzNDM3IC0yLjE0NzM0Mzc1IDIzLjMyMjY1NjI1IC0zIDI0IEMtMi4xMjUgMjAuMTI1IC0yLjEyNSAyMC4xMjUgLTEgMTkgQy0wLjkzOTY4OTYzIDE1LjM4NTE0NzQyIC0wLjk4MDA1NDkzIDExLjc4NDEzNTc2IC0xLjAzOTA2MjUgOC4xNjk5MjE4OCBDLTEuMTAwMTMzMTUgMi4yMDAyNjYyOSAtMS4xMDAxMzMxNSAyLjIwMDI2NjI5IDAgMCBaICIgZmlsbD0iI0RERUFFNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMSAyIDEgMiAwLjkzNzUgNS42ODc1IEMwLjg2OTQ3NzA3IDkuODIxNzgyMyAxLjY5NjU0Mzg5IDEzLjA4OTYzMTY4IDMgMTcgQzIuMzQgMTcgMS42OCAxNyAxIDE3IEMwLjY3IDE4LjMyIDAuMzQgMTkuNjQgMCAyMSBDLTEuMzk3NzM2NjEgMTQuOTA5ODYxOSAtMi40MzkxOTg3NCA5LjI1ODU4MjExIC0yIDMgQy0xLjM0IDIuMDEgLTAuNjggMS4wMiAwIDAgWiAiIGZpbGw9IiMyMTc4NTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNDgsNjIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMTk0Njk1NzEgMC41OTkyNDIyNCA4LjAwOTk5ODM0IDEuNTc0OTk5NDEgMTIgMyBDMTIgMy45OSAxMiA0Ljk4IDEyIDYgQzcuNjgyMjU0MiA1LjQ5MjAyOTkxIDMuOTY2OTc4ODYgNC44MDMxNzIyMSAwIDMgQzAgMi4wMSAwIDEuMDIgMCAwIFogIiBmaWxsPSIjRTdGMEVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzkzLDgwKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjY3NTQyOTc2IDAuMjg2MDQ4OTggMy4zNDM4NTM0MyAwLjYxNzgxMjMzIDUgMSBDNS44NDY4MTEzMyA2LjA4MDg2Nzk2IDYuMDkwMzgwOTkgMTAuODQ4MjgzNzcgNiAxNiBDNS4zNCAxNiA0LjY4IDE2IDQgMTYgQzMuOTUxMDE1NjMgMTUuNDA4MzIwMzEgMy45MDIwMzEyNSAxNC44MTY2NDA2MyAzLjg1MTU2MjUgMTQuMjA3MDMxMjUgQzMuMjYxOTU4IDcuODg5NzQ5MDkgMy4yNjE5NTggNy44ODk3NDkwOSAxIDIgQzAuMzQgMS42NyAtMC4zMiAxLjM0IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiMxNzcyNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjA4ODEzMSAwLjgzNTA2MTE3IDMuNjA4ODEzMSAwLjgzNTA2MTE3IDUuODEyNSAtMC41IEM1LjgxMjUgMS4xNSA1LjgxMjUgMi44IDUuODEyNSA0LjUgQzMuNDc5MTY2NjcgNC4xNjY2NjY2NyAxLjE0NTgzMzMzIDMuODMzMzMzMzMgLTEuMTg3NSAzLjUgQy0yLjQ2NjI1IDMuMzU1NjI1IC0zLjc0NSAzLjIxMTI1IC01LjA2MjUgMy4wNjI1IEMtNi4wOTM3NSAyLjg3Njg3NSAtNy4xMjUgMi42OTEyNSAtOC4xODc1IDIuNSBDLTguNTE3NSAxLjg0IC04Ljg0NzUgMS4xOCAtOS4xODc1IDAuNSBDLTUuOTIyMjU5MDcgLTAuNDE4MzQ5MDEgLTMuMzE1NTMyMDkgLTAuNDc3MDk4NDIgMCAwIFogIiBmaWxsPSIjMUI3NDUxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzk5LjE4NzUsNzEuNSkiLz4KPHBhdGggZD0iTTAgMCBDMi45NyAwIDUuOTQgMCA5IDAgQzguNjcgMS4zMiA4LjM0IDIuNjQgOCA0IEM1LjAzIDQgMi4wNiA0IC0xIDQgQy0wLjY3IDIuNjggLTAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiNEQ0VERTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNDAsOTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTEuNjcgMC45OSAxMS4zNCAxLjk4IDExIDMgQzcuNyAzIDQuNCAzIDEgMyBDMC42NyAyLjAxIDAuMzQgMS4wMiAwIDAgWiAiIGZpbGw9IiNFNzIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3NjYsMTIwKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzExLjY3IDAuOTkgMTEuMzQgMS45OCAxMSAzIEM3LjcgMyA0LjQgMyAxIDMgQzAuNjcgMi4wMSAwLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRTkyMDI2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzY2LDExNikiLz4KPHBhdGggZD0iTTAgMCBDOS40MTAwMjI3OCAtMC4zNjkwMjA1IDkuNDEwMDIyNzggLTAuMzY5MDIwNSAxNCAyIEMxNCAzLjY1IDE0IDUuMyAxNCA3IEMxMy41MDUgNi41MjU2MjUgMTMuMDEgNi4wNTEyNSAxMi41IDUuNTYyNSBDOS45MzI3MzUyOSAzLjk1Nzk1OTU1IDguODAwMzY5MDkgMy43NDk5ODYwOSA1Ljg3NSAzLjUgQzQuNTk2MjUgMy4zMzUgMy4zMTc1IDMuMTcgMiAzIEMxLjM0IDIuMDEgMC42OCAxLjAyIDAgMCBaICIgZmlsbD0iIzNEODk2QiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1Niw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMC4yODQ4ODI4MSAwLjU3NDkyMTg4IDAuNTY5NzY1NjIgMS4xNDk4NDM3NSAwLjg2MzI4MTI1IDEuNzQyMTg3NSBDMS41OTM5MzI5NyAzLjE5MzQ0NzYyIDIuMzQwMTUwNTEgNC42MzcwMzEgMy4xMDU0Njg3NSA2LjA3MDMxMjUgQzMuNDYyNTM5MDYgNi43NDgzNTkzOCAzLjgxOTYwOTM4IDcuNDI2NDA2MjUgNC4xODc1IDguMTI1IEM0LjU1MjMwNDY5IDguODA4MjAzMTMgNC45MTcxMDkzOCA5LjQ5MTQwNjI1IDUuMjkyOTY4NzUgMTAuMTk1MzEyNSBDNS41MjYyODkwNiAxMC43OTA4NTkzNyA1Ljc1OTYwOTM4IDExLjM4NjQwNjI1IDYgMTIgQzUuNjcgMTIuNjYgNS4zNCAxMy4zMiA1IDE0IEM0LjM0IDE0IDMuNjggMTQgMyAxNCBDLTEuMDc4Nzc0NjIgNS45NjQ5ODkwNiAtMS4wNzg3NzQ2MiA1Ljk2NDk4OTA2IC0wLjc1IDEuOTM3NSBDLTAuNTAyNSAxLjI5ODEyNSAtMC4yNTUgMC42NTg3NSAwIDAgWiAiIGZpbGw9IiMwQzZCNDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzgsMTAzKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzExLjAxIDEuNDg1IDExLjAxIDEuNDg1IDEwIDMgQzguMTI1IDMuMzI4MTI1IDguMTI1IDMuMzI4MTI1IDYgMy4yNSBDNS4yOTg3NSAzLjIzNDUzMTI1IDQuNTk3NSAzLjIxOTA2MjUgMy44NzUgMy4yMDMxMjUgQzIgMyAyIDMgMCAyIEMwIDEuMzQgMCAwLjY4IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2NiwxMjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjMgMCA3LjI2IDAgMTEgMCBDMTAuNjcgMC45OSAxMC4zNCAxLjk4IDEwIDMgQzcuMDMgMyA0LjA2IDMgMSAzIEMwLjY3IDIuMDEgMC4zNCAxLjAyIDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTgxMywxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNDk1IDAuMzkxODc1IDAuOTkgMC43ODM3NSAxLjUgMS4xODc1IEMwLjE2NjY2NjY3IDEuODU0MTY2NjcgLTEuMTY2NjY2NjcgMi41MjA4MzMzMyAtMi41IDMuMTg3NSBDLTMuNDkgMy43NDQzNzUgLTMuNDkgMy43NDQzNzUgLTQuNSA0LjMxMjUgQy02LjUgNS4xODc1IC02LjUgNS4xODc1IC0xMC41IDUuMTg3NSBDLTEwLjUgNC4xOTc1IC0xMC41IDMuMjA3NSAtMTAuNSAyLjE4NzUgQy0zLjI4Nzc0NjE3IC0xLjA2ODUxNzUxIC0zLjI4Nzc0NjE3IC0xLjA2ODUxNzUxIDAgMCBaICIgZmlsbD0iIzEyNkY0QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNy41LDc3LjgxMjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuNjQgMCA1LjI4IDAgOCAwIEM3LjY3IDEuMzIgNy4zNCAyLjY0IDcgNCBDNC42OSA0IDIuMzggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjRDdFQkRFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDA5LDk2KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjU1NzgwMTk2IDAuNjA5OTA4OTEgNi42ODI4NTg5IDEuNTc4MzY4MSAxMCAzIEM5LjY3IDMuOTkgOS4zNCA0Ljk4IDkgNiBDNS44NTI2MjgxOCA1LjMwMDU4NDA0IDIuOTc0MTExMjQgNC4yMzkyMTMwMiAwIDMgQzAgMi4wMSAwIDEuMDIgMCAwIFogIiBmaWxsPSIjREZFQkU2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzk0LDg3KSIvPgo8cGF0aCBkPSJNMCAwIEMtMSAzIC0xIDMgLTIuODQ3NjU2MjUgNC4xNjc5Njg3NSBDLTMuNTc4NTU0NjkgNC41MDQ0MTQwNiAtNC4zMDk0NTMxMiA0Ljg0MDg1OTM3IC01LjA2MjUgNS4xODc1IEMtNS43OTU5NzY1NiA1LjUzMTY3OTY5IC02LjUyOTQ1MzEyIDUuODc1ODU5MzggLTcuMjg1MTU2MjUgNi4yMzA0Njg3NSBDLTguMTM0MDAzOTEgNi42MTEzODY3MiAtOC4xMzQwMDM5MSA2LjYxMTM4NjcyIC05IDcgQy05LjMzIDUuNjggLTkuNjYgNC4zNiAtMTAgMyBDLTYuMjcwMzQ4NjEgMC45NjU2NDQ2OSAtNC4zMzA5NDk1OCAwIDAgMCBaICIgZmlsbD0iI0U4RjFFRCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyOCw4NykiLz4KPHBhdGggZD0iTTAgMCBDMi4zOTI3MzIzNSAzLjU4OTA5ODUzIDMuMTUzMTA5ODYgNS4yNjMxMzQ3OCAzLjE4NzUgOS41IEMzLjIwMTY3OTY5IDEwLjI5NDA2MjUgMy4yMTU4NTkzOCAxMS4wODgxMjUgMy4yMzA0Njg3NSAxMS45MDYyNSBDMyAxNCAzIDE0IDEgMTYgQy0wLjE1NzAzOTggMTIuNTI4ODgwNTkgLTAuMDMzOTY0ODkgOS43NzM2ODM0NiAwLjA2MjUgNi4xNTYyNSBDMC4wOTg0MjE3OSAzLjgxNDI1MTIzIDAuMDk4NDIxNzkgMy44MTQyNTEyMyAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogIiBmaWxsPSIjMjI3OTU2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc3LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMwLjY2IDAuMzMgMS4zMiAwLjY2IDIgMSBDMS4zNCAzLjk3IDAuNjggNi45NCAwIDEwIEMtMC45OSA5LjY3IC0xLjk4IDkuMzQgLTMgOSBDLTIuNDQyNzEwODcgNS42NTYyNjUyNSAtMS42NDgyNjExMSAyLjk2Njg3MDAxIDAgMCBaICIgZmlsbD0iI0RDRUFFNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0NCwxMDgpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMjcyODY2ODIgMi43ODE5MzY4IDQuOTY0Mjc2OTcgNi4yNzk1NDA2NyA3IDEwIEM2LjAxIDEwLjMzIDUuMDIgMTAuNjYgNCAxMSBDMy4zMjU5MTY5MiA5LjczMzA4NDkzIDIuNjYwOTk1MDMgOC40NjEyOTI1MSAyIDcuMTg3NSBDMS42Mjg3NSA2LjQ3OTgwNDY5IDEuMjU3NSA1Ljc3MjEwOTM3IDAuODc1IDUuMDQyOTY4NzUgQzAgMyAwIDMgMCAwIFogIiBmaWxsPSIjRDVFNURGIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc5LDEwNCkiLz4KPHBhdGggZD0iTTAgMCBDMi42NCAwIDUuMjggMCA4IDAgQzcuMzQgMS4zMiA2LjY4IDIuNjQgNiA0IEMzLjAzIDMuNTA1IDMuMDMgMy41MDUgMCAzIEMwIDIuMDEgMCAxLjAyIDAgMCBaICIgZmlsbD0iI0ZDRkRGQyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAzOCw5OSkiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0zLjQ2NSA0LjQ4NSAtMy40NjUgNC40ODUgLTcgNiBDLTcuMzMgNS4wMSAtNy42NiA0LjAyIC04IDMgQy0zLjM3NSAwIC0zLjM3NSAwIDAgMCBaICIgZmlsbD0iI0Q2RTZERiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyOSw5MykiLz4KPHBhdGggZD0iTTAgMCBDLTAuNzUgNy43NSAtMC43NSA3Ljc1IC0zIDEwIEMtNC40NzgzMjI2IDcuMDQzMzU0ODEgLTQuMDYwMzI3ODMgNC4yNTc3MDI2MyAtNCAxIEMtMiAwIC0yIDAgMCAwIFogIiBmaWxsPSIjMkM3RTVEIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzcyLDY2KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjkzMDQ1OTMzIDIuNTUxNDQ4MjQgMS4wODU2NDA5MSAzLjc0MDA2NDc4IDAuMjIyNjU2MjUgNi4zNTkzNzUgQy0wLjE2MDE5NTMxIDcuMTQ4MjgxMjUgLTAuNTQzMDQ2ODggNy45MzcxODc1IC0wLjkzNzUgOC43NSBDLTEuNTA3OTEwMTYgOS45NDg4MjgxMyAtMS41MDc5MTAxNiA5Ljk0ODgyODEzIC0yLjA4OTg0Mzc1IDExLjE3MTg3NSBDLTIuMzkwMTk1MzEgMTEuNzc1MTU2MjUgLTIuNjkwNTQ2ODggMTIuMzc4NDM3NSAtMyAxMyBDLTMuNjYgMTIuNjcgLTQuMzIgMTIuMzQgLTUgMTIgQy00LjQ2MjMxMTI4IDguMTI4NjQxMiAtMy40MjI1MjcgNi4wMjgxNTg3NSAtMSAzIEMtMC42NyAyLjAxIC0wLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRENFOUU0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQyLDEwMykiLz4KPHBhdGggZD0iTTAgMCBDMC45OSAwLjMzIDEuOTggMC42NiAzIDEgQzIuNTQ2MjUgMS43NDI1IDIuMDkyNSAyLjQ4NSAxLjYyNSAzLjI1IEMwLjMxMzU5MjA0IDUuNDY5MzA1NzggLTAuODgyODA4MDMgNy42Nzk2NzgyMiAtMiAxMCBDLTMuMDYzNTE2NzUgNi42MTYwODMwNyAtMy4yMTQ0Mjk4MiA1LjQxOTUzNjYgLTEuNTYyNSAyLjE4NzUgQy0xLjA0Njg3NSAxLjQ2NTYyNSAtMC41MzEyNSAwLjc0Mzc1IDAgMCBaICIgZmlsbD0iI0RCRTlFMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3OCw5NikiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0yLjUgNC42ODc1IC0yLjUgNC42ODc1IC01IDYgQy01LjY2IDUuMDEgLTYuMzIgNC4wMiAtNyAzIEMtMy4zNzUgMCAtMy4zNzUgMCAwIDAgWiAiIGZpbGw9IiMwRDZDNDYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjksOTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyIDAuNjYgMiAxLjMyIDIgMiBDMy4zMiAyIDQuNjQgMiA2IDIgQzYgMi42NiA2IDMuMzIgNiA0IEM0LjY4IDQgMy4zNiA0IDIgNCBDMS42NyA1LjMyIDEuMzQgNi42NCAxIDggQy0wLjM1NDM5NjY4IDUuMjkxMjA2NjUgLTAuMDY1MDE0NTEgMi45OTA2NjczMiAwIDAgWiAiIGZpbGw9IiMxOTczNEYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTAsNjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuMzIgMC42NiAyLjY0IDEuMzIgNCAyIEM0IDIuOTkgNCAzLjk4IDQgNSBDMSA1IDEgNSAtMC42ODc1IDMuNSBDLTEuMTIwNjI1IDMuMDA1IC0xLjU1Mzc1IDIuNTEgLTIgMiBDLTEuMzQgMS4zNCAtMC42OCAwLjY4IDAgMCBaICIgZmlsbD0iIzE1NzI0QyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5MiwxMDEpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMC4zMyAxLjk4IDAuNjYgMyAxIEMyLjM0IDMuOTcgMS42OCA2Ljk0IDEgMTAgQzAuMDEgOS4wMSAtMC45OCA4LjAyIC0yIDcgQy0xLjM0IDQuNjkgLTAuNjggMi4zOCAwIDAgWiAiIGZpbGw9IiMyOTdENUIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzMsNzMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMC42NjY2NjY2NyA0IDEuMzMzMzMzMzMgNiAyIEM1LjY3IDIuNjYgNS4zNCAzLjMyIDUgNCBDMi4zNTEzOTU3MyA0LjU5MzU1NjE0IC0wLjI5MTk3MzIyIDQuNzQyMDkyNjkgLTMgNSBDLTIuNjI1IDMuMDYyNSAtMi42MjUgMy4wNjI1IC0yIDEgQy0xLjM0IDAuNjcgLTAuNjggMC4zNCAwIDAgWiAiIGZpbGw9IiMzMzgzNjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjYsNzApIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuMzEgMCA0LjYyIDAgNyAwIEM3IDEuMzIgNyAyLjY0IDcgNCBDNS42OCA0IDQuMzYgNCAzIDQgQzMgMy4zNCAzIDIuNjggMyAyIEMyLjAxIDIgMS4wMiAyIDAgMiBDMCAxLjM0IDAgMC42OCAwIDAgWiAiIGZpbGw9IiM2N0EyOEEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTMsNjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMyLjY4NzUgMS44NzUgMi42ODc1IDEuODc1IDIgNCBDMS4wMSA0LjY2IDAuMDIgNS4zMiAtMSA2IEMtMS42MjUgNC4xMjUgLTEuNjI1IDQuMTI1IC0yIDIgQy0xLjM0IDEuMzQgLTAuNjggMC42OCAwIDAgWiAiIGZpbGw9IiMxNDcwNEIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjgsMTAxKSIvPgo8cGF0aCBkPSJNMCAwIEM0Ljc1IDEuODc1IDQuNzUgMS44NzUgNyAzIEM2LjY3IDMuOTkgNi4zNCA0Ljk4IDYgNiBDMy45NjE2NjU3NiA0LjcyNjA0MTEgMS45NjE0Nzg3NCAzLjM4OTM4MDc3IDAgMiBDMCAxLjM0IDAgMC42OCAwIDAgWiAiIGZpbGw9IiNFOEYxRUUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzOTQsOTMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTggMCAzLjk2IDAgNiAwIEM2IDAuOTkgNiAxLjk4IDYgMyBDMy42OSAzIDEuMzggMyAtMSAzIEMtMC42NyAyLjAxIC0wLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRjhGQkY5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDEyLDkwKSIvPgo8cGF0aCBkPSJNMCAwIEMwLjMzIDEuMzIgMC42NiAyLjY0IDEgNCBDMS42NiA0IDIuMzIgNCAzIDQgQzMuNjYgNS42NSA0LjMyIDcuMyA1IDkgQzMuMDYyNSA4LjYyNSAzLjA2MjUgOC42MjUgMSA4IEMtMC4zNTQzOTY2OCA1LjI5MTIwNjY1IC0wLjA2NTAxNDUxIDIuOTkwNjY3MzIgMCAwIFogIiBmaWxsPSIjRDRFNERFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzY4LDc4KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjk5IDAuMzMgMS45OCAwLjY2IDMgMSBDMi4zNCAzLjMxIDEuNjggNS42MiAxIDggQzAuMzQgOCAtMC4zMiA4IC0xIDggQy0xLjEyNSAyLjI1IC0xLjEyNSAyLjI1IDAgMCBaICIgZmlsbD0iI0VGRjVGMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw3NCkiLz4KPHBhdGggZD0iTTAgMCBDMi4wMDcyMDkyMyAwLjI4Njc0NDE4IDQuMDA4NTk0NCAwLjYxODY2NzAxIDYgMSBDNiAxLjY2IDYgMi4zMiA2IDMgQzQuMzUgMyAyLjcgMyAxIDMgQzEgMy45OSAxIDQuOTggMSA2IEMwLjM0IDYgLTAuMzIgNiAtMSA2IEMtMS4wNDI3MjEgNC4zMzM4ODA5NSAtMS4wNDA2MzgzMiAyLjY2NjE3MTE1IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiM3MkE5OTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjMsNjMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTM3NSAwLjY4NzUgMS45Mzc1IDAuNjg3NSA0IDIgQzQuNzUgNC42MjUgNC43NSA0LjYyNSA1IDcgQzQuMzQgNyAzLjY4IDcgMyA3IEMwIDIuNjE1Mzg0NjIgMCAyLjYxNTM4NDYyIDAgMCBaICIgZmlsbD0iIzBDNkI0NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1MSw5NykiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzQgMC45OSA0IDEuOTggNCAzIEMyLjAyIDMuNjYgMC4wNCA0LjMyIC0yIDUgQy0xLjM0IDMuMzUgLTAuNjggMS43IDAgMCBaICIgZmlsbD0iI0U2RjBFQyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNSw4MCkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzMuNjcgMS4zMiAzLjM0IDIuNjQgMyA0IEMyLjAxIDQgMS4wMiA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxNjksODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMyLjM0IDEuMzIgMS42OCAyLjY0IDEgNCBDMC42NyAyLjY4IDAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MTcsMTAyKSIvPgo8L3N2Zz4K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href=' + accountURL + ' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion<sup>®</sup> account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';
  if (typeof document !== "undefined" && !isNullOrUndefined(document)) {
    var errorBackground = createElement("div", {
      innerHTML: bannerTemplate
    });
    document.body.appendChild(errorBackground);
  }
};
var __extends$G = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$j = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var componentCount = 0;
var lastPageID;
var lastHistoryLen = 0;
var instancecount = 0;
var isvalid = true;
var isBannerAdded = false;
var Component = (
  /** @class */
  function(_super) {
    __extends$G(Component2, _super);
    function Component2(options, selector) {
      var _this = _super.call(this, options, selector) || this;
      _this.randomId = uniqueID();
      _this.isStringTemplate = false;
      _this.needsID = false;
      _this.isReactHybrid = false;
      _this.isAngular = false;
      _this.isReact = false;
      _this.isVue = false;
      if (isNullOrUndefined(_this.enableRtl)) {
        _this.setProperties({ "enableRtl": rightToLeft }, true);
      }
      if (isNullOrUndefined(_this.locale)) {
        _this.setProperties({ "locale": defaultCulture }, true);
      }
      _this.moduleLoader = new ModuleLoader(_this);
      _this.localObserver = new Observer(_this);
      onIntlChange.on("notifyExternalChange", _this.detectFunction, _this, _this.randomId);
      if (typeof window !== "undefined" && typeof document !== "undefined" && !validateLicense()) {
        if (componentList.indexOf(_this.getModuleName()) !== -1) {
          instancecount = instancecount + 1;
          if (instancecount > 5) {
            isvalid = false;
          }
        }
      }
      if (!isUndefined(selector)) {
        _this.appendTo();
      }
      return _this;
    }
    Component2.prototype.requiredModules = function() {
      return [];
    };
    Component2.prototype.destroy = function() {
      if (this.isDestroyed) {
        return;
      }
      if (this.enablePersistence) {
        this.setPersistData();
        this.detachUnloadEvent();
      }
      this.localObserver.destroy();
      if (this.refreshing) {
        return;
      }
      removeClass([this.element], ["e-control"]);
      this.trigger("destroyed", { cancel: false });
      _super.prototype.destroy.call(this);
      this.moduleLoader.clean();
      onIntlChange.off("notifyExternalChange", this.detectFunction, this.randomId);
    };
    Component2.prototype.refresh = function() {
      this.refreshing = true;
      this.moduleLoader.clean();
      this.destroy();
      this.clearChanges();
      this.localObserver = new Observer(this);
      this.preRender();
      this.injectModules();
      this.render();
      this.refreshing = false;
    };
    Component2.prototype.accessMount = function() {
      if (this.mount && !this.isReactHybrid) {
        this.mount();
      }
    };
    Component2.prototype.getRootElement = function() {
      if (this.isReactHybrid) {
        return this.actualElement;
      } else {
        return this.element;
      }
    };
    Component2.prototype.getLocalData = function() {
      var eleId = this.getModuleName() + this.element.id;
      {
        return window.localStorage.getItem(eleId);
      }
    };
    Component2.prototype.attachUnloadEvent = function() {
      this.handleUnload = this.handleUnload.bind(this);
      window.addEventListener("pagehide", this.handleUnload);
    };
    Component2.prototype.handleUnload = function() {
      this.setPersistData();
    };
    Component2.prototype.detachUnloadEvent = function() {
      window.removeEventListener("pagehide", this.handleUnload);
    };
    Component2.prototype.appendTo = function(selector) {
      if (!isNullOrUndefined(selector) && typeof selector === "string") {
        this.element = select(selector, document);
      } else if (!isNullOrUndefined(selector)) {
        this.element = selector;
      }
      if (!isNullOrUndefined(this.element)) {
        var moduleClass = "e-" + this.getModuleName().toLowerCase();
        addClass([this.element], ["e-control", moduleClass]);
        this.isProtectedOnChange = false;
        if (this.needsID && !this.element.id) {
          this.element.id = this.getUniqueID(this.getModuleName());
        }
        if (this.enablePersistence) {
          this.mergePersistData();
          this.attachUnloadEvent();
        }
        var inst = getValue("ej2_instances", this.element);
        if (!inst || inst.indexOf(this) === -1) {
          _super.prototype.addInstance.call(this);
        }
        this.preRender();
        this.injectModules();
        var ignoredComponents = {
          schedule: "all",
          diagram: "all",
          PdfViewer: "all",
          grid: ["logger"],
          richtexteditor: ["link", "table", "image", "audio", "video", "formatPainter", "emojiPicker", "pasteCleanup", "htmlEditor", "toolbar", "importExport"],
          treegrid: ["filter"],
          gantt: ["tooltip"],
          chart: ["Export", "Zoom"],
          accumulationchart: ["Export"],
          "query-builder": "all"
        };
        var component = this.getModuleName();
        if (this.requiredModules && (!ignoredComponents["" + component] || ignoredComponents["" + component] !== "all")) {
          var modulesRequired = this.requiredModules();
          for (var _i = 0, _a = this.moduleLoader.getNonInjectedModules(modulesRequired); _i < _a.length; _i++) {
            var module = _a[_i];
            var moduleName = module.name ? module.name : module.member;
            if (ignoredComponents["" + component] && ignoredComponents["" + component].indexOf(module.member) !== -1) {
              continue;
            }
            var componentName = component.charAt(0).toUpperCase() + component.slice(1);
            console.warn('[WARNING] :: Module "' + moduleName + '" is not available in ' + componentName + " component! You either misspelled the module name or forgot to load it.");
          }
        }
        if (!isvalid && !isBannerAdded) {
          createLicenseOverlay();
          isBannerAdded = true;
        }
        this.render();
        if (!this.mount) {
          this.trigger("created");
        } else {
          this.accessMount();
        }
      }
    };
    Component2.prototype.renderComplete = function(wrapperElement) {
      this.isRendered = true;
    };
    Component2.prototype.dataBind = function() {
      this.injectModules();
      _super.prototype.dataBind.call(this);
    };
    Component2.prototype.on = function(event, handler, context) {
      if (typeof event === "string") {
        this.localObserver.on(event, handler, context);
      } else {
        for (var _i = 0, event_1 = event; _i < event_1.length; _i++) {
          var arg = event_1[_i];
          this.localObserver.on(arg.event, arg.handler, arg.context);
        }
      }
    };
    Component2.prototype.off = function(event, handler) {
      if (typeof event === "string") {
        this.localObserver.off(event, handler);
      } else {
        for (var _i = 0, event_2 = event; _i < event_2.length; _i++) {
          var arg = event_2[_i];
          this.localObserver.off(arg.event, arg.handler);
        }
      }
    };
    Component2.prototype.notify = function(property, argument) {
      if (this.isDestroyed !== true) {
        this.localObserver.notify(property, argument);
      }
    };
    Component2.prototype.getInjectedModules = function() {
      return this.injectedModules;
    };
    Component2.Inject = function() {
      var moduleList = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        moduleList[_i] = arguments[_i];
      }
      if (!this.prototype.injectedModules) {
        this.prototype.injectedModules = [];
      }
      for (var i = 0; i < moduleList.length; i++) {
        if (this.prototype.injectedModules.indexOf(moduleList[parseInt(i.toString(), 10)]) === -1) {
          this.prototype.injectedModules.push(moduleList[parseInt(i.toString(), 10)]);
        }
      }
    };
    Component2.prototype.createElement = function(tagName, prop, isVDOM) {
      return createElement(tagName, prop);
    };
    Component2.prototype.triggerStateChange = function(handler, argument) {
      if (this.isReactHybrid) {
        this.setState();
        this.currentContext = { calls: handler, args: argument };
      }
    };
    Component2.prototype.injectModules = function() {
      if (this.injectedModules && this.injectedModules.length) {
        this.moduleLoader.inject(this.requiredModules(), this.injectedModules);
      }
    };
    Component2.prototype.detectFunction = function(args) {
      var prop = Object.keys(args);
      if (prop.length) {
        this[prop[0]] = args[prop[0]];
      }
    };
    Component2.prototype.mergePersistData = function() {
      var data;
      {
        data = window.localStorage.getItem(this.getModuleName() + this.element.id);
      }
      if (!(isNullOrUndefined(data) || data === "")) {
        this.setProperties(JSON.parse(data), true);
      }
    };
    Component2.prototype.setPersistData = function() {
      if (!this.isDestroyed) {
        {
          window.localStorage.setItem(this.getModuleName() + this.element.id, this.getPersistData());
        }
      }
    };
    Component2.prototype.renderReactTemplates = function(callback) {
      if (!isNullOrUndefined(callback)) {
        callback();
      }
    };
    Component2.prototype.clearTemplate = function(templateName, index) {
    };
    Component2.prototype.getUniqueID = function(definedName) {
      if (this.isHistoryChanged()) {
        componentCount = 0;
      }
      lastPageID = this.pageID(location.href);
      lastHistoryLen = history.length;
      return definedName + "_" + lastPageID + "_" + componentCount++;
    };
    Component2.prototype.pageID = function(url) {
      var hash = 0;
      if (url.length === 0) {
        return hash;
      }
      for (var i = 0; i < url.length; i++) {
        var char = url.charCodeAt(i);
        hash = (hash << 5) - hash + char;
        hash = hash & hash;
      }
      return Math.abs(hash);
    };
    Component2.prototype.isHistoryChanged = function() {
      return lastPageID !== this.pageID(location.href) || lastHistoryLen !== history.length;
    };
    Component2.prototype.addOnPersist = function(options) {
      var _this = this;
      var persistObj = {};
      for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {
        var key = options_1[_i];
        var objValue = getValue(key, this);
        if (!isUndefined(objValue)) {
          setValue(key, this.getActualProperties(objValue), persistObj);
        }
      }
      return JSON.stringify(persistObj, function(key2, value) {
        return _this.getActualProperties(value);
      });
    };
    Component2.prototype.getActualProperties = function(obj) {
      if (obj instanceof ChildProperty) {
        return getValue("properties", obj);
      } else {
        return obj;
      }
    };
    Component2.prototype.ignoreOnPersist = function(options) {
      return JSON.stringify(this.iterateJsonProperties(this.properties, options));
    };
    Component2.prototype.iterateJsonProperties = function(obj, ignoreList) {
      var newObj = {};
      var _loop_1 = function(key2) {
        if (ignoreList.indexOf(key2) === -1) {
          var value = obj["" + key2];
          if (typeof value === "object" && !(value instanceof Array)) {
            var newList = ignoreList.filter(function(str) {
              var regExp2 = RegExp;
              return new regExp2(key2 + ".").test(str);
            }).map(function(str) {
              return str.replace(key2 + ".", "");
            });
            newObj["" + key2] = this_1.iterateJsonProperties(this_1.getActualProperties(value), newList);
          } else {
            newObj["" + key2] = value;
          }
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {
        var key = _a[_i];
        _loop_1(key);
      }
      return newObj;
    };
    __decorate$j([
      Property(false)
    ], Component2.prototype, "enablePersistence", void 0);
    __decorate$j([
      Property()
    ], Component2.prototype, "enableRtl", void 0);
    __decorate$j([
      Property()
    ], Component2.prototype, "locale", void 0);
    Component2 = __decorate$j([
      NotifyPropertyChanges
    ], Component2);
    return Component2;
  }(Base)
);
(function() {
  if (typeof window !== "undefined") {
    window.addEventListener(
      "popstate",
      /* istanbul ignore next */
      function() {
        componentCount = 0;
      }
    );
  }
})();
var __extends$F = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$i = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var defaultPosition = { left: 0, top: 0, bottom: 0, right: 0 };
var isDraggedObject = { isDragged: false };
var Position = (
  /** @class */
  function(_super) {
    __extends$F(Position2, _super);
    function Position2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$i([
      Property(0)
    ], Position2.prototype, "left", void 0);
    __decorate$i([
      Property(0)
    ], Position2.prototype, "top", void 0);
    return Position2;
  }(ChildProperty)
);
var Draggable = (
  /** @class */
  function(_super) {
    __extends$F(Draggable2, _super);
    function Draggable2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.dragLimit = Draggable_1.getDefaultPosition();
      _this.borderWidth = Draggable_1.getDefaultPosition();
      _this.padding = Draggable_1.getDefaultPosition();
      _this.diffX = 0;
      _this.prevLeft = 0;
      _this.prevTop = 0;
      _this.dragProcessStarted = false;
      _this.eleTop = 0;
      _this.tapHoldTimer = 0;
      _this.externalInitialize = false;
      _this.diffY = 0;
      _this.parentScrollX = 0;
      _this.parentScrollY = 0;
      _this.droppables = {};
      _this.bind();
      return _this;
    }
    Draggable_1 = Draggable2;
    Draggable2.prototype.bind = function() {
      this.toggleEvents();
      if (Browser.isIE) {
        addClass([this.element], "e-block-touch");
      }
      this.droppables[this.scope] = {};
    };
    Draggable2.getDefaultPosition = function() {
      return extend$1({}, defaultPosition);
    };
    Draggable2.prototype.toggleEvents = function(isUnWire) {
      var ele;
      if (!isUndefined(this.handle)) {
        ele = select(this.handle, this.element);
      }
      var handler = this.enableTapHold && Browser.isDevice && Browser.isTouch ? this.mobileInitialize : this.initialize;
      if (isUnWire) {
        EventHandler.remove(ele || this.element, Browser.isSafari() ? "touchstart" : Browser.touchStartEvent, handler);
      } else {
        EventHandler.add(ele || this.element, Browser.isSafari() ? "touchstart" : Browser.touchStartEvent, handler, this);
      }
    };
    Draggable2.prototype.mobileInitialize = function(evt) {
      var _this = this;
      var target = evt.currentTarget;
      this.tapHoldTimer = setTimeout(function() {
        _this.externalInitialize = true;
        _this.removeTapholdTimer();
        _this.initialize(evt, target);
      }, this.tapHoldThreshold);
      EventHandler.add(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.removeTapholdTimer, this);
      EventHandler.add(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.removeTapholdTimer, this);
    };
    Draggable2.prototype.removeTapholdTimer = function() {
      clearTimeout(this.tapHoldTimer);
      EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.removeTapholdTimer);
      EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.removeTapholdTimer);
    };
    Draggable2.prototype.getScrollableParent = function(element2, axis) {
      var scroll2 = { "vertical": "scrollHeight", "horizontal": "scrollWidth" };
      var client = { "vertical": "clientHeight", "horizontal": "clientWidth" };
      if (isNullOrUndefined(element2)) {
        return null;
      }
      if (element2[scroll2["" + axis]] > element2[client["" + axis]]) {
        if (axis === "vertical" ? element2.scrollTop > 0 : element2.scrollLeft > 0) {
          if (axis === "vertical") {
            this.parentScrollY = this.parentScrollY + (this.parentScrollY === 0 ? element2.scrollTop : element2.scrollTop - this.parentScrollY);
            this.tempScrollHeight = element2.scrollHeight;
          } else {
            this.parentScrollX = this.parentScrollX + (this.parentScrollX === 0 ? element2.scrollLeft : element2.scrollLeft - this.parentScrollX);
            this.tempScrollWidth = element2.scrollWidth;
          }
          if (!isNullOrUndefined(element2)) {
            return this.getScrollableParent(element2.parentNode, axis);
          } else {
            return element2;
          }
        } else {
          return this.getScrollableParent(element2.parentNode, axis);
        }
      } else {
        return this.getScrollableParent(element2.parentNode, axis);
      }
    };
    Draggable2.prototype.getScrollableValues = function() {
      this.parentScrollX = 0;
      this.parentScrollY = 0;
      this.element.classList.contains("e-dialog") && this.element.classList.contains("e-dlg-modal");
      this.getScrollableParent(this.element.parentNode, "vertical");
      this.getScrollableParent(this.element.parentNode, "horizontal");
    };
    Draggable2.prototype.initialize = function(evt, curTarget) {
      this.currentStateTarget = evt.target;
      if (this.isDragStarted()) {
        return;
      } else {
        this.isDragStarted(true);
        this.externalInitialize = false;
      }
      this.target = evt.currentTarget || curTarget;
      this.dragProcessStarted = false;
      if (this.abort) {
        var abortSelectors = this.abort;
        if (typeof abortSelectors === "string") {
          abortSelectors = [abortSelectors];
        }
        for (var i = 0; i < abortSelectors.length; i++) {
          if (!isNullOrUndefined(closest(evt.target, abortSelectors[parseInt(i.toString(), 10)]))) {
            if (this.isDragStarted()) {
              this.isDragStarted(true);
            }
            return;
          }
        }
      }
      if (this.preventDefault && !isUndefined(evt.changedTouches) && evt.type !== "touchstart") {
        evt.preventDefault();
      }
      this.element.setAttribute("aria-grabbed", "true");
      var intCoord = this.getCoordinates(evt);
      this.initialPosition = { x: intCoord.pageX, y: intCoord.pageY };
      if (!this.clone) {
        var pos = this.element.getBoundingClientRect();
        this.getScrollableValues();
        if (evt.clientX === evt.pageX) {
          this.parentScrollX = 0;
        }
        if (evt.clientY === evt.pageY) {
          this.parentScrollY = 0;
        }
        this.relativeXPosition = intCoord.pageX - (pos.left + this.parentScrollX);
        this.relativeYPosition = intCoord.pageY - (pos.top + this.parentScrollY);
      }
      if (this.externalInitialize) {
        this.intDragStart(evt);
      } else {
        EventHandler.add(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDragStart, this);
        EventHandler.add(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDestroy, this);
      }
      this.toggleEvents(true);
      if (evt.type !== "touchstart" && this.isPreventSelect) {
        document.body.classList.add("e-prevent-select");
      }
      this.externalInitialize = false;
      EventHandler.trigger(document.documentElement, Browser.isSafari() ? "touchstart" : Browser.touchStartEvent, evt);
    };
    Draggable2.prototype.intDragStart = function(evt) {
      this.removeTapholdTimer();
      var isChangeTouch = !isUndefined(evt.changedTouches);
      if (isChangeTouch && evt.changedTouches.length !== 1) {
        return;
      }
      var intCordinate = this.getCoordinates(evt);
      var pos;
      var styleProp = getComputedStyle(this.element);
      this.margin = {
        left: parseInt(styleProp.marginLeft, 10),
        top: parseInt(styleProp.marginTop, 10),
        right: parseInt(styleProp.marginRight, 10),
        bottom: parseInt(styleProp.marginBottom, 10)
      };
      var element2 = this.element;
      if (this.clone && this.dragTarget) {
        var intClosest = closest(evt.target, this.dragTarget);
        if (!isNullOrUndefined(intClosest)) {
          element2 = intClosest;
        }
      }
      if (this.isReplaceDragEle) {
        element2 = this.currentStateCheck(evt.target, element2);
      }
      this.offset = this.calculateParentPosition(element2);
      this.position = this.getMousePosition(evt, this.isDragScroll);
      var x = this.initialPosition.x - intCordinate.pageX;
      var y = this.initialPosition.y - intCordinate.pageY;
      var distance = Math.sqrt(x * x + y * y);
      if (distance >= this.distance || this.externalInitialize) {
        var ele = this.getHelperElement(evt);
        if (!ele || isNullOrUndefined(ele)) {
          return;
        }
        if (isChangeTouch) {
          evt.preventDefault();
        }
        var dragTargetElement = this.helperElement = ele;
        this.parentClientRect = this.calculateParentPosition(dragTargetElement.offsetParent);
        if (this.dragStart) {
          var curTarget = this.getProperTargetElement(evt);
          var args = {
            event: evt,
            element: element2,
            target: curTarget,
            bindEvents: null,
            dragElement: dragTargetElement
          };
          this.trigger("dragStart", args);
        }
        if (this.dragArea) {
          this.setDragArea();
        } else {
          this.dragLimit = { left: 0, right: 0, bottom: 0, top: 0 };
          this.borderWidth = { top: 0, left: 0 };
        }
        pos = { left: this.position.left - this.parentClientRect.left, top: this.position.top - this.parentClientRect.top };
        if (this.clone && !this.enableTailMode) {
          this.diffX = this.position.left - this.offset.left;
          this.diffY = this.position.top - this.offset.top;
        }
        this.getScrollableValues();
        var styles = getComputedStyle(element2);
        var marginTop = parseFloat(styles.marginTop);
        if (this.clone && marginTop !== 0) {
          pos.top += marginTop;
        }
        this.eleTop = !isNaN(parseFloat(styles.top)) ? parseFloat(styles.top) - this.offset.top : 0;
        if (this.enableScrollHandler && !this.clone) {
          pos.top -= this.parentScrollY;
          pos.left -= this.parentScrollX;
        }
        var posValue = this.getProcessedPositionValue({
          top: pos.top - this.diffY + "px",
          left: pos.left - this.diffX + "px"
        });
        if (this.dragArea && typeof this.dragArea !== "string" && this.dragArea.classList.contains("e-kanban-content") && this.dragArea.style.position === "relative") {
          pos.top += this.dragArea.scrollTop;
        }
        this.dragElePosition = { top: pos.top, left: pos.left };
        setStyleAttribute(dragTargetElement, this.getDragPosition({ position: "absolute", left: posValue.left, top: posValue.top }));
        EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDragStart);
        EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDestroy);
        {
          this.bindDragEvents(dragTargetElement);
        }
      }
    };
    Draggable2.prototype.bindDragEvents = function(dragTargetElement) {
      if (isVisible(dragTargetElement)) {
        EventHandler.add(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDrag, this);
        EventHandler.add(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDragStop, this);
        this.setGlobalDroppables(false, this.element, dragTargetElement);
      } else {
        this.toggleEvents();
        document.body.classList.remove("e-prevent-select");
      }
    };
    Draggable2.prototype.elementInViewport = function(el) {
      this.top = el.offsetTop;
      this.left = el.offsetLeft;
      this.width = el.offsetWidth;
      this.height = el.offsetHeight;
      while (el.offsetParent) {
        el = el.offsetParent;
        this.top += el.offsetTop;
        this.left += el.offsetLeft;
      }
      return this.top >= window.pageYOffset && this.left >= window.pageXOffset && this.top + this.height <= window.pageYOffset + window.innerHeight && this.left + this.width <= window.pageXOffset + window.innerWidth;
    };
    Draggable2.prototype.getProcessedPositionValue = function(value) {
      if (this.queryPositionInfo) {
        return this.queryPositionInfo(value);
      }
      return value;
    };
    Draggable2.prototype.calculateParentPosition = function(ele) {
      if (isNullOrUndefined(ele)) {
        return { left: 0, top: 0 };
      }
      var rect = ele.getBoundingClientRect();
      var style = getComputedStyle(ele);
      return {
        left: rect.left + window.pageXOffset - parseInt(style.marginLeft, 10),
        top: rect.top + window.pageYOffset - parseInt(style.marginTop, 10)
      };
    };
    Draggable2.prototype.intDrag = function(evt) {
      if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {
        return;
      }
      if (this.clone && evt.changedTouches && Browser.isDevice && Browser.isTouch) {
        evt.preventDefault();
      }
      var left;
      var top;
      this.position = this.getMousePosition(evt, this.isDragScroll);
      var docHeight = this.getDocumentWidthHeight("Height");
      if (docHeight < this.position.top) {
        this.position.top = docHeight;
      }
      var docWidth = this.getDocumentWidthHeight("Width");
      if (docWidth < this.position.left) {
        this.position.left = docWidth;
      }
      if (this.drag) {
        var curTarget = this.getProperTargetElement(evt);
        this.trigger("drag", { event: evt, element: this.element, target: curTarget });
      }
      var eleObj = this.checkTargetElement(evt);
      if (eleObj.target && eleObj.instance) {
        var flag = true;
        if (this.hoverObject) {
          if (this.hoverObject.instance !== eleObj.instance) {
            this.triggerOutFunction(evt, eleObj);
          } else {
            flag = false;
          }
        }
        if (flag) {
          eleObj.instance.dragData[this.scope] = this.droppables[this.scope];
          eleObj.instance.intOver(evt, eleObj.target);
          this.hoverObject = eleObj;
        }
      } else if (this.hoverObject) {
        this.triggerOutFunction(evt, eleObj);
      }
      var helperElement = this.droppables[this.scope].helper;
      this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent);
      var tLeft = this.parentClientRect.left;
      var tTop = this.parentClientRect.top;
      var intCoord = this.getCoordinates(evt);
      var pagex = intCoord.pageX;
      var pagey = intCoord.pageY;
      var dLeft = this.position.left - this.diffX;
      var dTop = this.position.top - this.diffY;
      var styles = getComputedStyle(helperElement);
      if (this.dragArea) {
        if (this.enableAutoScroll) {
          this.setDragArea();
        }
        if (this.pageX !== pagex || this.skipDistanceCheck) {
          var helperWidth = helperElement.offsetWidth + (parseFloat(styles.marginLeft) + parseFloat(styles.marginRight));
          if (this.dragLimit.left > dLeft && dLeft > 0) {
            left = this.dragLimit.left;
          } else if (this.dragLimit.right + window.pageXOffset < dLeft + helperWidth && dLeft > 0) {
            left = dLeft - (dLeft - this.dragLimit.right) + window.pageXOffset - helperWidth;
          } else {
            left = dLeft < 0 ? this.dragLimit.left : dLeft;
          }
        }
        if (this.pageY !== pagey || this.skipDistanceCheck) {
          var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));
          if (this.dragLimit.top > dTop && dTop > 0) {
            top = this.dragLimit.top;
          } else if (this.dragLimit.bottom + window.pageYOffset < dTop + helperHeight && dTop > 0) {
            top = dTop - (dTop - this.dragLimit.bottom) + window.pageYOffset - helperHeight;
          } else {
            top = dTop < 0 ? this.dragLimit.top : dTop;
          }
        }
      } else {
        left = dLeft;
        top = dTop;
      }
      var iTop = tTop + this.borderWidth.top;
      var iLeft = tLeft + this.borderWidth.left;
      if (this.dragProcessStarted) {
        if (isNullOrUndefined(top)) {
          top = this.prevTop;
        }
        if (isNullOrUndefined(left)) {
          left = this.prevLeft;
        }
      }
      var draEleTop;
      var draEleLeft;
      if (this.helperElement.classList.contains("e-treeview")) {
        if (this.dragArea) {
          this.dragLimit.top = this.clone ? this.dragLimit.top : 0;
          draEleTop = top - iTop < 0 ? this.dragLimit.top : top - this.borderWidth.top;
          draEleLeft = left - iLeft < 0 ? this.dragLimit.left : left - this.borderWidth.left;
        } else {
          draEleTop = top - this.borderWidth.top;
          draEleLeft = left - this.borderWidth.left;
        }
      } else {
        if (this.dragArea) {
          var isDialogEle = this.helperElement.classList.contains("e-dialog");
          this.dragLimit.top = this.clone ? this.dragLimit.top : 0;
          draEleTop = top - iTop < 0 ? this.dragLimit.top : top - iTop;
          draEleLeft = left - iLeft < 0 ? isDialogEle ? left - (iLeft - this.borderWidth.left) : this.dragElePosition.left : left - iLeft;
        } else {
          draEleTop = top - iTop;
          draEleLeft = left - iLeft;
        }
      }
      var marginTop = parseFloat(getComputedStyle(this.element).marginTop);
      if (marginTop > 0) {
        if (this.clone) {
          draEleTop += marginTop;
          if (dTop < 0) {
            if (marginTop + dTop >= 0) {
              draEleTop = marginTop + dTop;
            } else {
              draEleTop -= marginTop;
            }
          }
          if (this.dragArea) {
            draEleTop = this.dragLimit.bottom < draEleTop ? this.dragLimit.bottom : draEleTop;
          }
        }
        if (top - iTop < 0) {
          if (dTop + marginTop + (helperElement.offsetHeight - iTop) >= 0) {
            var tempDraEleTop = this.dragLimit.top + dTop - iTop;
            if (tempDraEleTop + marginTop + iTop < 0) {
              draEleTop -= marginTop + iTop;
            } else {
              draEleTop = tempDraEleTop;
            }
          } else {
            draEleTop -= marginTop + iTop;
          }
        }
      }
      if (this.dragArea && this.helperElement.classList.contains("e-treeview")) {
        var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));
        draEleTop = draEleTop + helperHeight > this.dragLimit.bottom ? this.dragLimit.bottom - helperHeight : draEleTop;
      }
      if (this.enableScrollHandler && !this.clone) {
        draEleTop -= this.parentScrollY;
        draEleLeft -= this.parentScrollX;
      }
      if (this.dragArea && typeof this.dragArea !== "string" && this.dragArea.classList.contains("e-kanban-content") && this.dragArea.style.position === "relative") {
        draEleTop += this.dragArea.scrollTop;
      }
      var dragValue = this.getProcessedPositionValue({ top: draEleTop + "px", left: draEleLeft + "px" });
      if (this.isPreventScroll) {
        dragValue = this.getProcessedPositionValue({
          top: this.position.top - this.parentClientRect.top - 2 + "px",
          left: this.position.left - this.parentClientRect.left - 2 + "px"
        });
      }
      setStyleAttribute(helperElement, this.getDragPosition(dragValue));
      if (!this.elementInViewport(helperElement) && this.enableAutoScroll && !this.helperElement.classList.contains("e-treeview")) {
        this.helperElement.scrollIntoView();
      }
      var elements = document.querySelectorAll(":hover");
      if (this.enableAutoScroll && this.helperElement.classList.contains("e-treeview")) {
        if (elements.length === 0) {
          elements = this.getPathElements(evt);
        }
        var scrollParent = this.getScrollParent(elements, false);
        if (this.elementInViewport(this.helperElement)) {
          this.getScrollPosition(scrollParent, draEleTop);
        } else if (!this.elementInViewport(this.helperElement)) {
          elements = [].slice.call(document.querySelectorAll(":hover"));
          if (elements.length === 0) {
            elements = this.getPathElements(evt);
          }
          scrollParent = this.getScrollParent(elements, true);
          this.getScrollPosition(scrollParent, draEleTop);
        }
      }
      this.dragProcessStarted = true;
      this.prevLeft = left;
      this.prevTop = top;
      this.position.left = left;
      this.position.top = top;
      this.pageX = pagex;
      this.pageY = pagey;
    };
    Draggable2.prototype.getScrollParent = function(node, reverse) {
      var nodeEl = reverse ? node.reverse() : node;
      var hasScroll;
      for (var i = nodeEl.length - 1; i >= 0; i--) {
        hasScroll = window.getComputedStyle(nodeEl[parseInt(i.toString(), 10)])["overflow-y"];
        if ((hasScroll === "auto" || hasScroll === "scroll") && nodeEl[parseInt(i.toString(), 10)].scrollHeight > nodeEl[parseInt(i.toString(), 10)].clientHeight) {
          return nodeEl[parseInt(i.toString(), 10)];
        }
      }
      hasScroll = window.getComputedStyle(document.scrollingElement)["overflow-y"];
      if (hasScroll === "visible") {
        document.scrollingElement.style.overflow = "auto";
        return document.scrollingElement;
      }
    };
    Draggable2.prototype.getScrollPosition = function(nodeEle, draEleTop) {
      if (nodeEle && nodeEle === document.scrollingElement) {
        if (nodeEle.clientHeight + document.scrollingElement.scrollTop - this.helperElement.clientHeight < draEleTop && nodeEle.getBoundingClientRect().height + this.parentClientRect.top > draEleTop) {
          nodeEle.scrollTop += this.helperElement.clientHeight;
        } else if (nodeEle.scrollTop > draEleTop - this.helperElement.clientHeight) {
          nodeEle.scrollTop -= this.helperElement.clientHeight;
        }
      } else if (nodeEle && nodeEle !== document.scrollingElement) {
        var docScrollTop = document.scrollingElement.scrollTop;
        var helperClientHeight = this.helperElement.clientHeight;
        if (nodeEle.clientHeight + nodeEle.getBoundingClientRect().top - helperClientHeight + docScrollTop < draEleTop) {
          nodeEle.scrollTop += this.helperElement.clientHeight;
        } else if (nodeEle.getBoundingClientRect().top > draEleTop - helperClientHeight - docScrollTop) {
          nodeEle.scrollTop -= this.helperElement.clientHeight;
        }
      }
    };
    Draggable2.prototype.getPathElements = function(evt) {
      var elementTop = evt.clientX > 0 ? evt.clientX : 0;
      var elementLeft = evt.clientY > 0 ? evt.clientY : 0;
      return document.elementsFromPoint(elementTop, elementLeft);
    };
    Draggable2.prototype.triggerOutFunction = function(evt, eleObj) {
      this.hoverObject.instance.intOut(evt, eleObj.target);
      this.hoverObject.instance.dragData[this.scope] = null;
      this.hoverObject = null;
    };
    Draggable2.prototype.getDragPosition = function(dragValue) {
      var temp = extend$1({}, dragValue);
      if (this.axis) {
        if (this.axis === "x") {
          delete temp.top;
        } else if (this.axis === "y") {
          delete temp.left;
        }
      }
      return temp;
    };
    Draggable2.prototype.getDocumentWidthHeight = function(str) {
      var docBody = document.body;
      var docEle = document.documentElement;
      var returnValue = Math.max(docBody["scroll" + str], docEle["scroll" + str], docBody["offset" + str], docEle["offset" + str], docEle["client" + str]);
      return returnValue;
    };
    Draggable2.prototype.intDragStop = function(evt) {
      this.dragProcessStarted = false;
      if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {
        return;
      }
      var type = ["touchend", "pointerup", "mouseup"];
      if (type.indexOf(evt.type) !== -1) {
        if (this.dragStop) {
          var curTarget = this.getProperTargetElement(evt);
          this.trigger("dragStop", { event: evt, element: this.element, target: curTarget, helper: this.helperElement });
        }
        this.intDestroy(evt);
      } else {
        this.element.setAttribute("aria-grabbed", "false");
      }
      var eleObj = this.checkTargetElement(evt);
      if (eleObj.target && eleObj.instance) {
        eleObj.instance.dragStopCalled = true;
        eleObj.instance.dragData[this.scope] = this.droppables[this.scope];
        eleObj.instance.intDrop(evt, eleObj.target);
      }
      this.setGlobalDroppables(true);
      document.body.classList.remove("e-prevent-select");
    };
    Draggable2.prototype.intDestroy = function(evt) {
      this.dragProcessStarted = false;
      this.toggleEvents();
      document.body.classList.remove("e-prevent-select");
      this.element.setAttribute("aria-grabbed", "false");
      EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDragStart);
      EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDragStop);
      EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDestroy);
      EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDrag);
      if (this.isDragStarted()) {
        this.isDragStarted(true);
      }
    };
    Draggable2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Draggable2.prototype.getModuleName = function() {
      return "draggable";
    };
    Draggable2.prototype.isDragStarted = function(change) {
      if (change) {
        isDraggedObject.isDragged = !isDraggedObject.isDragged;
      }
      return isDraggedObject.isDragged;
    };
    Draggable2.prototype.setDragArea = function() {
      var eleWidthBound;
      var eleHeightBound;
      var top = 0;
      var left = 0;
      var ele;
      var type = typeof this.dragArea;
      if (type === "string") {
        ele = select(this.dragArea);
      } else {
        ele = this.dragArea;
      }
      if (ele) {
        var elementArea = ele.getBoundingClientRect();
        eleWidthBound = ele.scrollWidth ? ele.scrollWidth : elementArea.right - elementArea.left;
        eleHeightBound = ele.scrollHeight ? this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains("e-treeview") ? ele.clientHeight : ele.scrollHeight : elementArea.bottom - elementArea.top;
        var keys2 = ["Top", "Left", "Bottom", "Right"];
        var styles = getComputedStyle(ele);
        for (var i = 0; i < keys2.length; i++) {
          var key = keys2[parseInt(i.toString(), 10)];
          var tborder = styles["border" + key + "Width"];
          var tpadding = styles["padding" + key];
          var lowerKey = key.toLowerCase();
          this.borderWidth["" + lowerKey] = isNaN(parseFloat(tborder)) ? 0 : parseFloat(tborder);
          this.padding["" + lowerKey] = isNaN(parseFloat(tpadding)) ? 0 : parseFloat(tpadding);
        }
        if (this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains("e-treeview")) {
          top = elementArea.top + document.scrollingElement.scrollTop;
        } else {
          top = elementArea.top;
        }
        left = elementArea.left;
        this.dragLimit.left = left + this.borderWidth.left + this.padding.left;
        this.dragLimit.top = ele.offsetTop + this.borderWidth.top + this.padding.top;
        this.dragLimit.right = left + eleWidthBound - (this.borderWidth.right + this.padding.right);
        this.dragLimit.bottom = top + eleHeightBound - (this.borderWidth.bottom + this.padding.bottom);
      }
    };
    Draggable2.prototype.getProperTargetElement = function(evt) {
      var intCoord = this.getCoordinates(evt);
      var ele;
      var prevStyle = this.helperElement.style.pointerEvents || "";
      var isPointer = evt.type.indexOf("pointer") !== -1 && Browser.info.name === "safari" && parseInt(Browser.info.version, 10) > 12;
      if (compareElementParent(evt.target, this.helperElement) || evt.type.indexOf("touch") !== -1 || isPointer) {
        this.helperElement.style.pointerEvents = "none";
        ele = document.elementFromPoint(intCoord.clientX, intCoord.clientY);
        this.helperElement.style.pointerEvents = prevStyle;
      } else {
        ele = evt.target;
      }
      return ele;
    };
    Draggable2.prototype.currentStateCheck = function(ele, oldEle) {
      var elem;
      if (!isNullOrUndefined(this.currentStateTarget) && this.currentStateTarget !== ele) {
        elem = this.currentStateTarget;
      } else {
        elem = !isNullOrUndefined(oldEle) ? oldEle : ele;
      }
      return elem;
    };
    Draggable2.prototype.getMousePosition = function(evt, isdragscroll) {
      var dragEle = evt.srcElement !== void 0 ? evt.srcElement : evt.target;
      var intCoord = this.getCoordinates(evt);
      var pageX;
      var pageY;
      var isOffsetParent = isNullOrUndefined(dragEle.offsetParent);
      if (isdragscroll) {
        pageX = this.clone ? intCoord.pageX : intCoord.pageX + (isOffsetParent ? 0 : dragEle.offsetParent.scrollLeft) - this.relativeXPosition;
        pageY = this.clone ? intCoord.pageY : intCoord.pageY + (isOffsetParent ? 0 : dragEle.offsetParent.scrollTop) - this.relativeYPosition;
      } else {
        pageX = this.clone ? intCoord.pageX : intCoord.pageX + window.pageXOffset - this.relativeXPosition;
        pageY = this.clone ? intCoord.pageY : intCoord.pageY + window.pageYOffset - this.relativeYPosition;
      }
      if (document.scrollingElement && (!isdragscroll && !this.clone)) {
        var ele = document.scrollingElement;
        var isVerticalScroll = ele.scrollHeight > 0 && ele.scrollHeight > ele.clientHeight && ele.scrollTop > 0;
        var isHorrizontalScroll = ele.scrollWidth > 0 && ele.scrollWidth > ele.clientWidth && ele.scrollLeft > 0;
        pageX = isHorrizontalScroll ? pageX - ele.scrollLeft : pageX;
        pageY = isVerticalScroll ? pageY - ele.scrollTop : pageY;
      }
      return {
        left: pageX - (this.margin.left + this.cursorAt.left),
        top: pageY - (this.margin.top + this.cursorAt.top)
      };
    };
    Draggable2.prototype.getCoordinates = function(evt) {
      if (evt.type.indexOf("touch") > -1) {
        return evt.changedTouches[0];
      }
      return evt;
    };
    Draggable2.prototype.getHelperElement = function(evt) {
      var element2;
      if (this.clone) {
        if (this.helper) {
          element2 = this.helper({ sender: evt, element: this.target, currentTargetElement: this.currentStateTarget });
        } else {
          element2 = createElement("div", { className: "e-drag-helper e-block-touch", innerHTML: "Draggable" });
          document.body.appendChild(element2);
        }
      } else {
        element2 = this.element;
      }
      return element2;
    };
    Draggable2.prototype.setGlobalDroppables = function(reset, drag, helper) {
      this.droppables[this.scope] = reset ? null : {
        draggable: drag,
        helper,
        draggedElement: this.element
      };
    };
    Draggable2.prototype.checkTargetElement = function(evt) {
      var target = this.getProperTargetElement(evt);
      var dropIns = this.getDropInstance(target);
      if (!dropIns && target && !isNullOrUndefined(target.parentNode)) {
        var parent_1 = closest(target.parentNode, ".e-droppable") || target.parentElement;
        if (parent_1) {
          dropIns = this.getDropInstance(parent_1);
        }
      }
      return { target, instance: dropIns };
    };
    Draggable2.prototype.getDropInstance = function(ele) {
      var name = "getModuleName";
      var drop;
      var eleInst = ele && ele.ej2_instances;
      if (eleInst) {
        for (var _i = 0, eleInst_1 = eleInst; _i < eleInst_1.length; _i++) {
          var inst = eleInst_1[_i];
          if (inst["" + name]() === "droppable") {
            drop = inst;
            break;
          }
        }
      }
      return drop;
    };
    Draggable2.prototype.destroy = function() {
      this.toggleEvents(true);
      _super.prototype.destroy.call(this);
    };
    var Draggable_1;
    __decorate$i([
      Complex({}, Position)
    ], Draggable2.prototype, "cursorAt", void 0);
    __decorate$i([
      Property(true)
    ], Draggable2.prototype, "clone", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "dragArea", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "isDragScroll", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "isReplaceDragEle", void 0);
    __decorate$i([
      Property(true)
    ], Draggable2.prototype, "isPreventSelect", void 0);
    __decorate$i([
      Property(false)
    ], Draggable2.prototype, "isPreventScroll", void 0);
    __decorate$i([
      Event()
    ], Draggable2.prototype, "drag", void 0);
    __decorate$i([
      Event()
    ], Draggable2.prototype, "dragStart", void 0);
    __decorate$i([
      Event()
    ], Draggable2.prototype, "dragStop", void 0);
    __decorate$i([
      Property(1)
    ], Draggable2.prototype, "distance", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "handle", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "abort", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "helper", void 0);
    __decorate$i([
      Property("default")
    ], Draggable2.prototype, "scope", void 0);
    __decorate$i([
      Property("")
    ], Draggable2.prototype, "dragTarget", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "axis", void 0);
    __decorate$i([
      Property()
    ], Draggable2.prototype, "queryPositionInfo", void 0);
    __decorate$i([
      Property(false)
    ], Draggable2.prototype, "enableTailMode", void 0);
    __decorate$i([
      Property(false)
    ], Draggable2.prototype, "skipDistanceCheck", void 0);
    __decorate$i([
      Property(true)
    ], Draggable2.prototype, "preventDefault", void 0);
    __decorate$i([
      Property(false)
    ], Draggable2.prototype, "enableAutoScroll", void 0);
    __decorate$i([
      Property(false)
    ], Draggable2.prototype, "enableTapHold", void 0);
    __decorate$i([
      Property(750)
    ], Draggable2.prototype, "tapHoldThreshold", void 0);
    __decorate$i([
      Property(false)
    ], Draggable2.prototype, "enableScrollHandler", void 0);
    Draggable2 = Draggable_1 = __decorate$i([
      NotifyPropertyChanges
    ], Draggable2);
    return Draggable2;
  }(Base)
);
var __extends$E = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$h = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Droppable = (
  /** @class */
  function(_super) {
    __extends$E(Droppable2, _super);
    function Droppable2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.mouseOver = false;
      _this.dragData = {};
      _this.dragStopCalled = false;
      _this.bind();
      return _this;
    }
    Droppable2.prototype.bind = function() {
      this.wireEvents();
    };
    Droppable2.prototype.wireEvents = function() {
      EventHandler.add(this.element, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDrop, this);
    };
    Droppable2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Droppable2.prototype.getModuleName = function() {
      return "droppable";
    };
    Droppable2.prototype.intOver = function(event, element2) {
      if (!this.mouseOver) {
        var drag = this.dragData[this.scope];
        this.trigger("over", { event, target: element2, dragData: drag });
        this.mouseOver = true;
      }
    };
    Droppable2.prototype.intOut = function(event, element2) {
      if (this.mouseOver) {
        this.trigger("out", { evt: event, target: element2 });
        this.mouseOver = false;
      }
    };
    Droppable2.prototype.intDrop = function(evt, element2) {
      if (!this.dragStopCalled) {
        return;
      } else {
        this.dragStopCalled = false;
      }
      var accept = true;
      var drag = this.dragData[this.scope];
      var isDrag = drag ? drag.helper && isVisible(drag.helper) : false;
      var area;
      if (isDrag) {
        area = this.isDropArea(evt, drag.helper, element2);
        if (this.accept) {
          accept = matches$1(drag.helper, this.accept);
        }
      }
      if (isDrag && this.drop && area.canDrop && accept) {
        this.trigger("drop", { event: evt, target: area.target, droppedElement: drag.helper, dragData: drag });
      }
      this.mouseOver = false;
    };
    Droppable2.prototype.isDropArea = function(evt, helper, element2) {
      var area = { canDrop: true, target: element2 || evt.target };
      var isTouch = evt.type === "touchend";
      if (isTouch || area.target === helper) {
        helper.style.display = "none";
        var coord = isTouch ? evt.changedTouches[0] : evt;
        var ele = document.elementFromPoint(coord.clientX, coord.clientY);
        area.canDrop = false;
        area.canDrop = compareElementParent(ele, this.element);
        if (area.canDrop) {
          area.target = ele;
        }
        helper.style.display = "";
      }
      return area;
    };
    Droppable2.prototype.destroy = function() {
      EventHandler.remove(this.element, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDrop);
      _super.prototype.destroy.call(this);
    };
    __decorate$h([
      Property()
    ], Droppable2.prototype, "accept", void 0);
    __decorate$h([
      Property("default")
    ], Droppable2.prototype, "scope", void 0);
    __decorate$h([
      Event()
    ], Droppable2.prototype, "drop", void 0);
    __decorate$h([
      Event()
    ], Droppable2.prototype, "over", void 0);
    __decorate$h([
      Event()
    ], Droppable2.prototype, "out", void 0);
    Droppable2 = __decorate$h([
      NotifyPropertyChanges
    ], Droppable2);
    return Droppable2;
  }(Base)
);
var __extends$D = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$g = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var keyCode = {
  "backspace": 8,
  "tab": 9,
  "enter": 13,
  "shift": 16,
  "control": 17,
  "alt": 18,
  "pause": 19,
  "capslock": 20,
  "space": 32,
  "escape": 27,
  "pageup": 33,
  "pagedown": 34,
  "end": 35,
  "home": 36,
  "leftarrow": 37,
  "uparrow": 38,
  "rightarrow": 39,
  "downarrow": 40,
  "insert": 45,
  "delete": 46,
  "f1": 112,
  "f2": 113,
  "f3": 114,
  "f4": 115,
  "f5": 116,
  "f6": 117,
  "f7": 118,
  "f8": 119,
  "f9": 120,
  "f10": 121,
  "f11": 122,
  "f12": 123,
  "semicolon": 186,
  "plus": 187,
  "comma": 188,
  "minus": 189,
  "dot": 190,
  "forwardslash": 191,
  "graveaccent": 192,
  "openbracket": 219,
  "backslash": 220,
  "closebracket": 221,
  "singlequote": 222
};
var KeyboardEvents = (
  /** @class */
  function(_super) {
    __extends$D(KeyboardEvents2, _super);
    function KeyboardEvents2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.keyPressHandler = function(e) {
        var isAltKey = e.altKey;
        var isCtrlKey = e.ctrlKey;
        var isShiftKey = e.shiftKey;
        var curkeyCode = e.which;
        var keys2 = Object.keys(_this.keyConfigs);
        for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
          var key = keys_1[_i];
          var configCollection = _this.keyConfigs["" + key].split(",");
          for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {
            var rconfig = configCollection_1[_a];
            var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());
            if (isAltKey === rKeyObj.altKey && isCtrlKey === rKeyObj.ctrlKey && isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {
              e.action = key;
              if (_this.keyAction) {
                _this.keyAction(e);
              }
            }
          }
        }
      };
      _this.bind();
      return _this;
    }
    KeyboardEvents_1 = KeyboardEvents2;
    KeyboardEvents2.prototype.destroy = function() {
      this.unwireEvents();
      _super.prototype.destroy.call(this);
    };
    KeyboardEvents2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    KeyboardEvents2.prototype.bind = function() {
      this.wireEvents();
    };
    KeyboardEvents2.prototype.getModuleName = function() {
      return "keyboard";
    };
    KeyboardEvents2.prototype.wireEvents = function() {
      this.element.addEventListener(this.eventName, this.keyPressHandler);
    };
    KeyboardEvents2.prototype.unwireEvents = function() {
      this.element.removeEventListener(this.eventName, this.keyPressHandler);
    };
    KeyboardEvents2.getKeyConfigData = function(config2) {
      if (config2 in this.configCache) {
        return this.configCache["" + config2];
      }
      var keys2 = config2.toLowerCase().split("+");
      var keyData = {
        altKey: keys2.indexOf("alt") !== -1 ? true : false,
        ctrlKey: keys2.indexOf("ctrl") !== -1 ? true : false,
        shiftKey: keys2.indexOf("shift") !== -1 ? true : false,
        keyCode: null
      };
      if (keys2[keys2.length - 1].length > 1 && !!Number(keys2[keys2.length - 1])) {
        keyData.keyCode = Number(keys2[keys2.length - 1]);
      } else {
        keyData.keyCode = KeyboardEvents_1.getKeyCode(keys2[keys2.length - 1]);
      }
      KeyboardEvents_1.configCache["" + config2] = keyData;
      return keyData;
    };
    KeyboardEvents2.getKeyCode = function(keyVal) {
      return keyCode["" + keyVal] || keyVal.toUpperCase().charCodeAt(0);
    };
    var KeyboardEvents_1;
    KeyboardEvents2.configCache = {};
    __decorate$g([
      Property({})
    ], KeyboardEvents2.prototype, "keyConfigs", void 0);
    __decorate$g([
      Property("keyup")
    ], KeyboardEvents2.prototype, "eventName", void 0);
    __decorate$g([
      Event()
    ], KeyboardEvents2.prototype, "keyAction", void 0);
    KeyboardEvents2 = KeyboardEvents_1 = __decorate$g([
      NotifyPropertyChanges
    ], KeyboardEvents2);
    return KeyboardEvents2;
  }(Base)
);
var L10n = (
  /** @class */
  function() {
    function L10n2(controlName, localeStrings, locale) {
      this.controlName = controlName;
      this.localeStrings = localeStrings;
      this.setLocale(locale || defaultCulture);
    }
    L10n2.prototype.setLocale = function(locale) {
      var intLocale = this.intGetControlConstant(L10n2.locale, locale);
      this.currentLocale = intLocale || this.localeStrings;
    };
    L10n2.load = function(localeObject) {
      this.locale = extend$1(this.locale, localeObject, {}, true);
    };
    L10n2.prototype.getConstant = function(prop) {
      if (!isNullOrUndefined(this.currentLocale["" + prop])) {
        return this.currentLocale["" + prop];
      } else {
        return this.localeStrings["" + prop] || "";
      }
    };
    L10n2.prototype.intGetControlConstant = function(curObject, locale) {
      if (curObject["" + locale]) {
        return curObject["" + locale][this.controlName];
      }
      return null;
    };
    L10n2.locale = {};
    return L10n2;
  }()
);
var __extends$C = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$f = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var SwipeSettings = (
  /** @class */
  function(_super) {
    __extends$C(SwipeSettings2, _super);
    function SwipeSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$f([
      Property(50)
    ], SwipeSettings2.prototype, "swipeThresholdDistance", void 0);
    return SwipeSettings2;
  }(ChildProperty)
);
var swipeRegex = /(Up|Down)/;
var Touch = (
  /** @class */
  function(_super) {
    __extends$C(Touch2, _super);
    function Touch2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.touchAction = true;
      _this.tapCount = 0;
      _this.startEvent = function(evt) {
        if (_this.touchAction === true) {
          var point = _this.updateChangeTouches(evt);
          if (evt.changedTouches !== void 0) {
            _this.touchAction = false;
          }
          _this.isTouchMoved = false;
          _this.movedDirection = "";
          _this.startPoint = _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };
          _this.startEventData = point;
          _this.hScrollLocked = _this.vScrollLocked = false;
          _this.tStampStart = Date.now();
          _this.timeOutTapHold = setTimeout(function() {
            _this.tapHoldEvent(evt);
          }, _this.tapHoldThreshold);
          EventHandler.add(_this.element, Browser.touchMoveEvent, _this.moveEvent, _this);
          EventHandler.add(_this.element, Browser.touchEndEvent, _this.endEvent, _this);
          EventHandler.add(_this.element, Browser.touchCancelEvent, _this.cancelEvent, _this);
        }
      };
      _this.moveEvent = function(evt) {
        var point = _this.updateChangeTouches(evt);
        _this.movedPoint = point;
        _this.isTouchMoved = !(point.clientX === _this.startPoint.clientX && point.clientY === _this.startPoint.clientY);
        var eScrollArgs = {};
        if (_this.isTouchMoved) {
          clearTimeout(_this.timeOutTapHold);
          _this.calcScrollPoints(evt);
          var scrollArg = {
            startEvents: _this.startEventData,
            originalEvent: evt,
            startX: _this.startPoint.clientX,
            startY: _this.startPoint.clientY,
            distanceX: _this.distanceX,
            distanceY: _this.distanceY,
            scrollDirection: _this.scrollDirection,
            velocity: _this.getVelocity(point)
          };
          eScrollArgs = extend$1(eScrollArgs, {}, scrollArg);
          _this.trigger("scroll", eScrollArgs);
          _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };
        }
      };
      _this.cancelEvent = function(evt) {
        clearTimeout(_this.timeOutTapHold);
        clearTimeout(_this.timeOutTap);
        _this.tapCount = 0;
        _this.swipeFn(evt);
        EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);
      };
      _this.endEvent = function(evt) {
        _this.swipeFn(evt);
        if (!_this.isTouchMoved) {
          if (typeof _this.tap === "function") {
            _this.trigger("tap", { originalEvent: evt, tapCount: ++_this.tapCount });
            _this.timeOutTap = setTimeout(function() {
              _this.tapCount = 0;
            }, _this.tapThreshold);
          }
        }
        _this.modeclear();
      };
      _this.swipeFn = function(evt) {
        clearTimeout(_this.timeOutTapHold);
        clearTimeout(_this.timeOutTap);
        var point = _this.updateChangeTouches(evt);
        var diffX = point.clientX - _this.startPoint.clientX;
        var diffY = point.clientY - _this.startPoint.clientY;
        diffX = Math.floor(diffX < 0 ? -1 * diffX : diffX);
        diffY = Math.floor(diffY < 0 ? -1 * diffY : diffX);
        _this.isTouchMoved = diffX > 1 || diffY > 1;
        var isFirefox = /Firefox/.test(Browser.userAgent);
        if (isFirefox && point.clientX === 0 && point.clientY === 0 && evt.type === "mouseup") {
          _this.isTouchMoved = false;
        }
        _this.endPoint = point;
        _this.calcPoints(evt);
        var swipeArgs = {
          originalEvent: evt,
          startEvents: _this.startEventData,
          startX: _this.startPoint.clientX,
          startY: _this.startPoint.clientY,
          distanceX: _this.distanceX,
          distanceY: _this.distanceY,
          swipeDirection: _this.movedDirection,
          velocity: _this.getVelocity(point)
        };
        if (_this.isTouchMoved) {
          var tDistance = _this.swipeSettings.swipeThresholdDistance;
          var eSwipeArgs = extend$1(void 0, _this.defaultArgs, swipeArgs);
          var canTrigger = false;
          var ele = _this.element;
          var scrollBool = _this.isScrollable(ele);
          var moved = swipeRegex.test(_this.movedDirection);
          if (tDistance < _this.distanceX && !moved || tDistance < _this.distanceY && moved) {
            if (!scrollBool) {
              canTrigger = true;
            } else {
              canTrigger = _this.checkSwipe(ele, moved);
            }
          }
          if (canTrigger) {
            _this.trigger("swipe", eSwipeArgs);
          }
        }
        _this.modeclear();
      };
      _this.modeclear = function() {
        _this.modeClear = setTimeout(function() {
          _this.touchAction = true;
        }, typeof _this.tap !== "function" ? 0 : 20);
        _this.lastTapTime = (/* @__PURE__ */ new Date()).getTime();
        EventHandler.remove(_this.element, Browser.touchMoveEvent, _this.moveEvent);
        EventHandler.remove(_this.element, Browser.touchEndEvent, _this.endEvent);
        EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);
      };
      _this.bind();
      return _this;
    }
    Touch2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Touch2.prototype.bind = function() {
      this.wireEvents();
      if (Browser.isIE) {
        this.element.classList.add("e-block-touch");
      }
    };
    Touch2.prototype.destroy = function() {
      this.unwireEvents();
      _super.prototype.destroy.call(this);
    };
    Touch2.prototype.wireEvents = function() {
      EventHandler.add(this.element, Browser.touchStartEvent, this.startEvent, this);
    };
    Touch2.prototype.unwireEvents = function() {
      EventHandler.remove(this.element, Browser.touchStartEvent, this.startEvent);
    };
    Touch2.prototype.getModuleName = function() {
      return "touch";
    };
    Touch2.prototype.isScrollable = function(element2) {
      var eleStyle = getComputedStyle(element2);
      var style = eleStyle.overflow + eleStyle.overflowX + eleStyle.overflowY;
      if (/(auto|scroll)/.test(style)) {
        return true;
      }
      return false;
    };
    Touch2.prototype.tapHoldEvent = function(evt) {
      this.tapCount = 0;
      this.touchAction = true;
      EventHandler.remove(this.element, Browser.touchMoveEvent, this.moveEvent);
      EventHandler.remove(this.element, Browser.touchEndEvent, this.endEvent);
      var eTapArgs = { originalEvent: evt };
      this.trigger("tapHold", eTapArgs);
      EventHandler.remove(this.element, Browser.touchCancelEvent, this.cancelEvent);
    };
    Touch2.prototype.calcPoints = function(evt) {
      var point = this.updateChangeTouches(evt);
      this.defaultArgs = { originalEvent: evt };
      this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.startPoint.clientX));
      this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.startPoint.clientY));
      if (this.distanceX > this.distanceY) {
        this.movedDirection = point.clientX > this.startPoint.clientX ? "Right" : "Left";
      } else {
        this.movedDirection = point.clientY < this.startPoint.clientY ? "Up" : "Down";
      }
    };
    Touch2.prototype.calcScrollPoints = function(evt) {
      var point = this.updateChangeTouches(evt);
      this.defaultArgs = { originalEvent: evt };
      this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.lastMovedPoint.clientX));
      this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.lastMovedPoint.clientY));
      if ((this.distanceX > this.distanceY || this.hScrollLocked === true) && this.vScrollLocked === false) {
        this.scrollDirection = point.clientX > this.lastMovedPoint.clientX ? "Right" : "Left";
        this.hScrollLocked = true;
      } else {
        this.scrollDirection = point.clientY < this.lastMovedPoint.clientY ? "Up" : "Down";
        this.vScrollLocked = true;
      }
    };
    Touch2.prototype.getVelocity = function(pnt) {
      var newX = pnt.clientX;
      var newY = pnt.clientY;
      var newT = Date.now();
      var xDist = newX - this.startPoint.clientX;
      var yDist = newY - this.startPoint.clientX;
      var interval = newT - this.tStampStart;
      return Math.sqrt(xDist * xDist + yDist * yDist) / interval;
    };
    Touch2.prototype.checkSwipe = function(ele, flag) {
      var keys2 = ["scroll", "offset"];
      var temp = flag ? ["Height", "Top"] : ["Width", "Left"];
      if (ele[keys2[0] + temp[0]] <= ele[keys2[1] + temp[0]]) {
        return true;
      }
      return ele[keys2[0] + temp[1]] === 0 || ele[keys2[1] + temp[0]] + ele[keys2[0] + temp[1]] >= ele[keys2[0] + temp[0]];
    };
    Touch2.prototype.updateChangeTouches = function(evt) {
      var point = evt.changedTouches && evt.changedTouches.length !== 0 ? evt.changedTouches[0] : evt;
      return point;
    };
    __decorate$f([
      Event()
    ], Touch2.prototype, "tap", void 0);
    __decorate$f([
      Event()
    ], Touch2.prototype, "tapHold", void 0);
    __decorate$f([
      Event()
    ], Touch2.prototype, "swipe", void 0);
    __decorate$f([
      Event()
    ], Touch2.prototype, "scroll", void 0);
    __decorate$f([
      Property(350)
    ], Touch2.prototype, "tapThreshold", void 0);
    __decorate$f([
      Property(750)
    ], Touch2.prototype, "tapHoldThreshold", void 0);
    __decorate$f([
      Complex({}, SwipeSettings)
    ], Touch2.prototype, "swipeSettings", void 0);
    Touch2 = __decorate$f([
      NotifyPropertyChanges
    ], Touch2);
    return Touch2;
  }(Base)
);
var LINES = new RegExp("\\n|\\r|\\s\\s+", "g");
var QUOTES = new RegExp(/'|"/g);
var IF_STMT = new RegExp("if ?\\(");
var ELSEIF_STMT = new RegExp("else if ?\\(");
var ELSE_STMT = new RegExp("else");
var FOR_STMT = new RegExp("for ?\\(");
var IF_OR_FOR = new RegExp("(/if|/for)");
var CALL_FUNCTION = new RegExp("\\((.*)\\)", "");
var NOT_NUMBER = new RegExp("^[0-9]+$", "g");
var WORD = new RegExp(`[\\w"'.\\s+]+`, "g");
var DBL_QUOTED_STR = new RegExp('"(.*?)"', "g");
var WORDIF = new RegExp(`[\\w"'@#$.\\s-+]+`, "g");
var exp = new RegExp("\\${([^}]*)}", "g");
var ARR_OBJ = /^\..*/gm;
var SINGLE_SLASH = /\\/gi;
var DOUBLE_SLASH = /\\\\/gi;
var WORDFUNC = new RegExp(`[\\w"'@#$.\\s+]+`, "g");
var WINDOWFUNC = /\window\./gm;
function compile$2(template, helper, ignorePrefix) {
  if (typeof template === "function") {
    return template;
  } else {
    var argName = "data";
    var evalExpResult = evalExp(template, argName, helper);
    var condtion = `var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);
        var hrefRegex = (/(?:href)([\\s='"./]+)([\\w-./?=&\\\\#"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);
        if(str.match(valueRegEx)){
            var check = str.match(valueRegEx);
            var str1 = str;
            for (var i=0; i < check.length; i++) {
                var check1 = str.match(valueRegEx)[i].split('value=')[1];
                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '"') : check1;
                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'"') : change;
                str1 = str1.replace(check1, change);
            }
            str = str.replace(str, str1);
        }
        else if (str.match(/(?:href='')/) === null) {
            if(str.match(hrefRegex)) {
                var check = str.match(hrefRegex);
                var str1 = str;
                for (var i=0; i < check.length; i++) {
                    var check1 = str.match(hrefRegex)[i].split('href=')[1];
                    if (check1) {
                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '"') : check1;
                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'"') : change;
                        str1 = str1.replace(check1, change);
                    }
                }
                str = str.replace(str, str1);
            }
        }
        `;
    var fnCode = 'var str="' + evalExpResult + '";' + condtion + " return str;";
    var fn = new Function(argName, fnCode);
    return fn.bind(helper);
  }
}
function evalExp(str, nameSpace, helper, ignorePrefix) {
  var varCOunt = 0;
  var localKeys = [];
  var isClass = str.match(/class="([^"]+|)\s{2}/g);
  var singleSpace = "";
  if (isClass) {
    isClass.forEach(function(value) {
      singleSpace = value.replace(/\s\s+/g, " ");
      str = str.replace(value, singleSpace);
    });
  }
  if (exp.test(str)) {
    var insideBraces = false;
    var outputString = "";
    for (var i = 0; i < str.length; i++) {
      if (str[i + ""] === "$" && str[i + 1] === "{") {
        insideBraces = true;
      } else if (str[i + ""] === "}") {
        insideBraces = false;
      }
      outputString += str[i + ""] === '"' && !insideBraces ? '\\"' : str[i + ""];
    }
    str = outputString;
  } else {
    str = str.replace(/\\?"/g, '\\"');
  }
  return str.replace(LINES, "").replace(DBL_QUOTED_STR, "'$1'").replace(exp, function(match, cnt, offset, matchStr) {
    var SPECIAL_CHAR = /@|#|\$/gm;
    var matches2 = cnt.match(CALL_FUNCTION);
    if (matches2) {
      var rlStr = matches2[1];
      if (ELSEIF_STMT.test(cnt)) {
        cnt = '";} ' + cnt.replace(matches2[1], rlStr.replace(WORD, function(str2) {
          str2 = str2.trim();
          return addNameSpace(str2, !QUOTES.test(str2) && localKeys.indexOf(str2) === -1, nameSpace, localKeys);
        })) + '{ \n str = str + "';
      } else if (IF_STMT.test(cnt)) {
        cnt = '"; ' + cnt.replace(matches2[1], rlStr.replace(WORDIF, function(strs) {
          return HandleSpecialCharArrObj(strs, nameSpace, localKeys);
        })) + '{ \n str = str + "';
      } else if (FOR_STMT.test(cnt)) {
        var rlStr_1 = matches2[1].split(" of ");
        cnt = '"; ' + cnt.replace(matches2[1], function(mtc) {
          localKeys.push(rlStr_1[0]);
          localKeys.push(rlStr_1[0] + "Index");
          varCOunt = varCOunt + 1;
          return "var i" + varCOunt + "=0; i" + varCOunt + " < " + addNameSpace(rlStr_1[1], true, nameSpace, localKeys) + ".length; i" + varCOunt + "++";
        }) + "{ \n " + rlStr_1[0] + "= " + addNameSpace(rlStr_1[1], true, nameSpace, localKeys) + "[i" + varCOunt + "]; \n var " + rlStr_1[0] + "Index=i" + varCOunt + '; \n str = str + "';
      } else {
        var fnStr = cnt.split("(");
        var fNameSpace = helper && Object.prototype.hasOwnProperty.call(helper, fnStr[0]) ? "this." : "global";
        fNameSpace = /\./.test(fnStr[0]) ? "" : fNameSpace;
        var ftArray = matches2[1].split(",");
        if (matches2[1].length !== 0 && !/data/.test(ftArray[0]) && !/window./.test(ftArray[0])) {
          matches2[1] = fNameSpace === "global" ? nameSpace + "." + matches2[1] : matches2[1];
        }
        var splRegexp = /@|\$|#/gm;
        var arrObj = /\]\./gm;
        if (WINDOWFUNC.test(cnt) && arrObj.test(cnt) || splRegexp.test(cnt)) {
          var splArrRegexp = /@|\$|#|\]\./gm;
          if (splArrRegexp.test(cnt)) {
            cnt = '"+ ' + (fNameSpace === "global" ? "" : fNameSpace) + cnt.replace(matches2[1], rlStr.replace(WORDFUNC, function(strs) {
              return HandleSpecialCharArrObj(strs, nameSpace, localKeys);
            })) + '+ "';
          }
        } else {
          cnt = '" + ' + (fNameSpace === "global" ? "" : fNameSpace) + cnt.replace(rlStr, addNameSpace(matches2[1].replace(/,( |)data.|,/gi, "," + nameSpace + ".").replace(/,( |)data.window/gi, ",window"), fNameSpace === "global" ? false : true, nameSpace, localKeys)) + '+"';
        }
      }
    } else if (ELSE_STMT.test(cnt)) {
      cnt = '"; ' + cnt.replace(ELSE_STMT, '} else { \n str = str + "');
    } else if (cnt.match(IF_OR_FOR)) {
      cnt = cnt.replace(IF_OR_FOR, '"; \n } \n str = str + "');
    } else if (SPECIAL_CHAR.test(cnt)) {
      if (cnt.match(SINGLE_SLASH)) {
        cnt = SlashReplace(cnt);
      }
      cnt = '"+' + NameSpaceForspecialChar(cnt, localKeys.indexOf(cnt) === -1, nameSpace, localKeys) + '"]+"';
    } else {
      if (cnt.match(SINGLE_SLASH)) {
        cnt = SlashReplace(cnt);
        cnt = '"+' + NameSpaceForspecialChar(cnt, localKeys.indexOf(cnt) === -1, nameSpace, localKeys) + '"]+"';
      } else {
        cnt = cnt !== "" ? '"+' + addNameSpace(cnt.replace(/,/gi, "+" + nameSpace + "."), localKeys.indexOf(cnt) === -1, nameSpace, localKeys) + '+"' : "${}";
      }
    }
    return cnt;
  });
}
function addNameSpace(str, addNS, nameSpace, ignoreList, ignorePrefix) {
  return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split(".")[0]) === -1 && true && str !== "true" && str !== "false" ? nameSpace + "." + str : str;
}
function NameSpaceArrObj(str, addNS, nameSpace, ignoreList) {
  var arrObjReg = /^\..*/gm;
  return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split(".")[0]) === -1 && !arrObjReg.test(str) ? nameSpace + "." + str : str;
}
function NameSpaceForspecialChar(str, addNS, nameSpace, ignoreList) {
  return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split(".")[0]) === -1 ? nameSpace + '["' + str : str;
}
function SlashReplace(tempStr) {
  var double = "\\\\";
  if (tempStr.match(DOUBLE_SLASH)) {
    return tempStr;
  } else {
    return tempStr.replace(SINGLE_SLASH, double);
  }
}
function HandleSpecialCharArrObj(str, nameSpaceNew, keys2, ignorePrefix) {
  str = str.trim();
  var windowFunc = /\window\./gm;
  if (!windowFunc.test(str)) {
    var quotes = /'|"/gm;
    var splRegexp = /@|\$|#/gm;
    if (splRegexp.test(str)) {
      str = NameSpaceForspecialChar(str, keys2.indexOf(str) === -1, nameSpaceNew, keys2) + '"]';
    }
    if (ARR_OBJ.test(str)) {
      return NameSpaceArrObj(str, !quotes.test(str) && keys2.indexOf(str) === -1, nameSpaceNew, keys2);
    } else {
      return addNameSpace(str, !quotes.test(str) && keys2.indexOf(str) === -1, nameSpaceNew, keys2);
    }
  } else {
    return str;
  }
}
var HAS_ROW = /^[\n\r.]+<tr|^<tr/;
var HAS_SVG = /^[\n\r.]+<svg|^<path|^<g/;
var blazorTemplates = {};
function compile$1(templateString, helper, ignorePrefix) {
  var compiler = engineObj.compile(templateString, helper, ignorePrefix);
  return function(data, component, propName, templateId, isStringTemplate, index, element2, root2) {
    var result = compiler(data, component, propName, element2, root2);
    if (typeof result === "string") {
      if (HAS_SVG.test(result)) {
        var ele = createElement("svg", { innerHTML: result });
        return ele.childNodes;
      } else {
        var ele = createElement(HAS_ROW.test(result) ? "table" : "div", { innerHTML: result });
        return ele.childNodes;
      }
    } else {
      return result;
    }
  };
}
function updateBlazorTemplate(templateId, templateName, comp, isEmpty, callBack) {
}
function resetBlazorTemplate(templateId, templateName, index) {
  var templateDiv = document.getElementById(templateId);
  if (templateDiv) {
    var innerTemplates = templateDiv.getElementsByClassName("blazor-inner-template");
    for (var i = 0; i < innerTemplates.length; i++) {
      var tempId = " ";
      if (!isNullOrUndefined(index)) {
        tempId = innerTemplates[parseInt(index.toString(), 10)].getAttribute("data-templateId");
      } else {
        tempId = innerTemplates[parseInt(i.toString(), 10)].getAttribute("data-templateId");
      }
      var tempElement = document.getElementById(tempId);
      if (tempElement) {
        var length_1 = tempElement.childNodes.length;
        for (var j = 0; j < length_1; j++) {
          if (!isNullOrUndefined(index)) {
            innerTemplates[parseInt(index.toString(), 10)].appendChild(tempElement.childNodes[0]);
            i = innerTemplates.length;
          } else {
            innerTemplates[parseInt(i.toString(), 10)].appendChild(tempElement.childNodes[0]);
          }
        }
      }
    }
  }
}
function setTemplateEngine(classObj) {
  engineObj.compile = classObj.compile;
}
function getTemplateEngine() {
  return engineObj.compile;
}
var Engine = (
  /** @class */
  function() {
    function Engine2() {
    }
    Engine2.prototype.compile = function(templateString, helper, ignorePrefix) {
      if (helper === void 0) {
        helper = {};
      }
      return compile$2(templateString, helper);
    };
    return Engine2;
  }()
);
var engineObj = { compile: new Engine().compile };
var removeTags = [
  "script",
  "style",
  "iframe[src]",
  'link[href*="javascript:"]',
  'object[type="text/x-scriptlet"]',
  'object[data^="data:text/html;base64"]',
  'img[src^="data:text/html;base64"]',
  '[src^="javascript:"]',
  '[dynsrc^="javascript:"]',
  '[lowsrc^="javascript:"]',
  '[type^="application/x-shockwave-flash"]'
];
var removeAttrs = [
  { attribute: "href", selector: '[href*="javascript:"]' },
  { attribute: "href", selector: "a[href]" },
  { attribute: "background", selector: '[background^="javascript:"]' },
  { attribute: "style", selector: '[style*="javascript:"]' },
  { attribute: "style", selector: '[style*="expression("]' },
  { attribute: "href", selector: 'a[href^="data:text/html;base64"]' }
];
var jsEvents = [
  "onchange",
  "onclick",
  "onmouseover",
  "onmouseout",
  "onkeydown",
  "onload",
  "onerror",
  "onblur",
  "onfocus",
  "onbeforeload",
  "onbeforeunload",
  "onkeyup",
  "onsubmit",
  "onafterprint",
  "onbeforeonload",
  "onbeforeprint",
  "oncanplay",
  "oncanplaythrough",
  "oncontextmenu",
  "ondblclick",
  "ondrag",
  "ondragend",
  "ondragenter",
  "ondragleave",
  "ondragover",
  "ondragstart",
  "ondrop",
  "ondurationchange",
  "onemptied",
  "onended",
  "onformchange",
  "onforminput",
  "onhaschange",
  "oninput",
  "oninvalid",
  "onkeypress",
  "onloadeddata",
  "onloadedmetadata",
  "onloadstart",
  "onmessage",
  "onmousedown",
  "onmousemove",
  "onmouseup",
  "onmousewheel",
  "onoffline",
  "onoine",
  "ononline",
  "onpagehide",
  "onpageshow",
  "onpause",
  "onplay",
  "onplaying",
  "onpopstate",
  "onprogress",
  "onratechange",
  "onreadystatechange",
  "onredo",
  "onresize",
  "onscroll",
  "onseeked",
  "onseeking",
  "onselect",
  "onstalled",
  "onstorage",
  "onsuspend",
  "ontimeupdate",
  "onundo",
  "onunload",
  "onvolumechange",
  "onwaiting",
  "onmouseenter",
  "onmouseleave",
  "onstart",
  "onpropertychange",
  "oncopy",
  "ontoggle",
  "onpointerout",
  "onpointermove",
  "onpointerleave",
  "onpointerenter",
  "onpointerrawupdate",
  "onpointerover",
  "onbeforecopy",
  "onbeforecut",
  "onbeforeinput"
];
var SanitizeHtmlHelper = (
  /** @class */
  function() {
    function SanitizeHtmlHelper2() {
    }
    SanitizeHtmlHelper2.beforeSanitize = function() {
      return {
        selectors: {
          tags: removeTags,
          attributes: removeAttrs
        }
      };
    };
    SanitizeHtmlHelper2.sanitize = function(value) {
      if (isNullOrUndefined(value)) {
        return value;
      }
      var item = this.beforeSanitize();
      var output = this.serializeValue(item, value);
      return output;
    };
    SanitizeHtmlHelper2.serializeValue = function(item, value) {
      this.removeAttrs = item.selectors.attributes;
      this.removeTags = item.selectors.tags;
      this.wrapElement = document.createElement("div");
      this.wrapElement.innerHTML = value;
      this.removeXssTags();
      this.removeJsEvents();
      this.removeXssAttrs();
      var tempEleValue = this.wrapElement.innerHTML;
      this.removeElement();
      this.wrapElement = null;
      return tempEleValue.replace(/&amp;/g, "&");
    };
    SanitizeHtmlHelper2.removeElement = function() {
      var nodes = this.wrapElement.children;
      for (var j = 0; j < nodes.length; j++) {
        var attribute = nodes[parseInt(j.toString(), 10)].attributes;
        for (var i = 0; i < attribute.length; i++) {
          this.wrapElement.children[parseInt(j.toString(), 10)].removeAttribute(attribute[parseInt(i.toString(), 10)].localName);
        }
      }
    };
    SanitizeHtmlHelper2.removeXssTags = function() {
      var elements = this.wrapElement.querySelectorAll(this.removeTags.join(","));
      if (elements.length > 0) {
        elements.forEach(function(element2) {
          detach(element2);
        });
      } else {
        return;
      }
    };
    SanitizeHtmlHelper2.removeJsEvents = function() {
      var elements = this.wrapElement.querySelectorAll("[" + jsEvents.join("],[") + "]");
      if (elements.length > 0) {
        elements.forEach(function(element2) {
          jsEvents.forEach(function(attr) {
            if (element2.hasAttribute(attr)) {
              element2.removeAttribute(attr);
            }
          });
        });
      } else {
        return;
      }
    };
    SanitizeHtmlHelper2.removeXssAttrs = function() {
      var _this = this;
      this.removeAttrs.forEach(function(item, index) {
        var elements = _this.wrapElement.querySelectorAll(item.selector);
        if (elements.length > 0) {
          if (item.selector === "a[href]") {
            elements.forEach(function(element2) {
              if (element2.getAttribute(item.attribute).replace(/\t|\s|&/, "").indexOf("javascript:alert") !== -1) {
                element2.removeAttribute(item.attribute);
              }
            });
          } else {
            elements.forEach(function(element2) {
              element2.removeAttribute(item.attribute);
            });
          }
        }
      });
    };
    return SanitizeHtmlHelper2;
  }()
);
function cn(...inputs) {
  return twMerge(clsx(inputs));
}
const formatDate = (dateString) => {
  return dayjs(dateString).format("MMMM DD, YYYY");
};
const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
const log = (source, message, data) => {
  console.log(`[${source}] ${message}`, data ?? "");
};
const AuthContext = createContext({
  authData: null,
  token: null,
  login: async () => {
    log("AuthContext", "login() called without provider");
  },
  logout: () => {
    log("AuthContext", "logout() called without provider");
  }
});
const API_URL$5 = "http://backend:5000Auth";
const loginUser = async (data, addDelay = false) => {
  log("loginUser → Request", data);
  const response = await axios.post(`${API_URL$5}/login`, data);
  log("loginUser → Response", response.data);
  if (addDelay) await delay(500);
  return response.data;
};
const registerUser = async (data, addDelay = false) => {
  log("registerUser → Request", data);
  const response = await axios.post(`${API_URL$5}/register`, data);
  log("registerUser → Response", response.data);
  if (addDelay) await delay(500);
  return response.data;
};
const decodeToken = (token) => {
  try {
    const payload = token.split(".")[1];
    return JSON.parse(atob(payload));
  } catch (e) {
    console.error("Failed to decode token", e);
    return null;
  }
};
const AuthProvider = ({ children }) => {
  const [authData, setAuthData] = useState(null);
  const [token, setToken] = useState(null);
  const navigate = useNavigate();
  useEffect(() => {
    const storedToken = localStorage.getItem("token");
    if (storedToken) {
      setToken(storedToken);
    }
  }, []);
  useEffect(() => {
    const storedToken = localStorage.getItem("token");
    const storedUser = localStorage.getItem("authData");
    if (storedToken) {
      setToken(storedToken);
      axios.defaults.headers.Authorization = `Bearer ${storedToken}`;
      log("AuthProvider", `Token restored: ${storedToken}`);
    }
    if (storedUser) {
      setAuthData(JSON.parse(storedUser));
      log("AuthProvider", "AuthData restored:", JSON.parse(storedUser));
    } else {
      delete axios.defaults.headers.common["Authorization"];
      setAuthData(null);
      log("AuthProvider", "No user session found. Cleared auth data.");
    }
  }, []);
  const login = async (username, password) => {
    log("AuthProvider", `Attempting login for: ${username}`);
    const response = await loginUser({ username, password });
    const newToken = response.token;
    if (newToken) {
      localStorage.setItem("token", newToken);
      setToken(newToken);
      axios.defaults.headers.Authorization = `Bearer ${newToken}`;
      log("AuthProvider", "Token set after login:", newToken);
      const decoded = decodeToken(newToken);
      const userData = {
        id: decoded.id,
        username: decoded.unique_name,
        role: decoded.role,
        token: newToken
      };
      log("AuthProvider", "Decoded user data:", userData);
      localStorage.setItem("authData", JSON.stringify(userData));
      setAuthData(userData);
      await delay(300);
    } else {
      console.error("Invalid login response", response);
    }
  };
  const logout = () => {
    log("AuthProvider", "Logging out user");
    localStorage.removeItem("token");
    localStorage.removeItem("authData");
    setToken(null);
    setAuthData(null);
    axios.defaults.headers.Authorization = "";
    navigate("/");
  };
  const value = { authData, token, login, logout };
  return /* @__PURE__ */ jsx(AuthContext.Provider, { value, children });
};
const links = () => [{
  rel: "preconnect",
  href: "https://fonts.googleapis.com"
}, {
  rel: "preconnect",
  href: "https://fonts.gstatic.com",
  crossOrigin: "anonymous"
}, {
  rel: "stylesheet",
  href: "https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
}];
registerLicense("Ngo9BigBOggjHTQxAR8/V1NNaF5cWWJCf1FpRmJGdld5fUVHYVZUTXxaS00DNHVRdkdmWXpeeXRTRGNZV0NxXEVWYUA=");
function Layout({
  children
}) {
  return /* @__PURE__ */ jsxs("html", {
    lang: "en",
    children: [/* @__PURE__ */ jsxs("head", {
      children: [/* @__PURE__ */ jsx("meta", {
        charSet: "utf-8"
      }), /* @__PURE__ */ jsx("meta", {
        name: "viewport",
        content: "width=device-width, initial-scale=1"
      }), /* @__PURE__ */ jsx(Links, {})]
    }), /* @__PURE__ */ jsxs("body", {
      children: [children, /* @__PURE__ */ jsx(ScrollRestoration, {}), /* @__PURE__ */ jsx(Scripts, {})]
    })]
  });
}
const root = withComponentProps(function App() {
  return /* @__PURE__ */ jsx(AuthProvider, {
    children: /* @__PURE__ */ jsx(Outlet, {})
  });
});
const ErrorBoundary = withErrorBoundaryProps(function ErrorBoundary2({
  error
}) {
  let message = "Oops!";
  let details = "An unexpected error occurred.";
  let stack;
  if (isRouteErrorResponse(error)) {
    message = error.status === 404 ? "404" : "Error";
    details = error.status === 404 ? "The requested page could not be found." : error.statusText || details;
  }
  return /* @__PURE__ */ jsxs("main", {
    className: "pt-16 p-4 container mx-auto",
    children: [/* @__PURE__ */ jsx("h1", {
      children: message
    }), /* @__PURE__ */ jsx("p", {
      children: details
    }), stack]
  });
});
const route0 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  ErrorBoundary,
  Layout,
  default: root,
  links
}, Symbol.toStringTag, { value: "Module" }));
function getTextNode(element2) {
  var node;
  var childnode = element2.childNodes;
  for (var i = 0; i < childnode.length; i++) {
    node = childnode[i];
    if (node.nodeType === 3) {
      return node;
    }
  }
  return null;
}
function createCheckBox(createElement2, enableRipple, options) {
  if (options === void 0) {
    options = {};
  }
  var wrapper = createElement2("div", { className: "e-checkbox-wrapper e-css" });
  if (options.cssClass) {
    addClass([wrapper], options.cssClass.split(" "));
  }
  if (options.enableRtl) {
    wrapper.classList.add("e-rtl");
  }
  var frameSpan = createElement2("span", { className: "e-frame e-icons" });
  if (options.checked) {
    frameSpan.classList.add("e-check");
  }
  wrapper.appendChild(frameSpan);
  if (options.label) {
    var labelSpan = createElement2("span", { className: "e-label" });
    if (options.disableHtmlEncode) {
      labelSpan.textContent = options.label;
    } else {
      labelSpan.innerHTML = options.label;
    }
    wrapper.appendChild(labelSpan);
  }
  return wrapper;
}
var __extends$B = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$e = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var IconPosition;
(function(IconPosition2) {
  IconPosition2["Left"] = "Left";
  IconPosition2["Right"] = "Right";
  IconPosition2["Top"] = "Top";
  IconPosition2["Bottom"] = "Bottom";
})(IconPosition || (IconPosition = {}));
var cssClassName$1 = {
  RTL: "e-rtl",
  BUTTON: "e-btn",
  PRIMARY: "e-primary",
  ICONBTN: "e-icon-btn"
};
var Button = (
  /** @class */
  function(_super) {
    __extends$B(Button2, _super);
    function Button2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    Button2.prototype.preRender = function() {
    };
    Button2.prototype.render = function() {
      this.initialize();
      this.removeRippleEffect = rippleEffect(this.element, { selector: "." + cssClassName$1.BUTTON });
      this.renderComplete();
    };
    Button2.prototype.initialize = function() {
      if (this.cssClass) {
        addClass([this.element], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
      if (this.isPrimary) {
        this.element.classList.add(cssClassName$1.PRIMARY);
      }
      {
        if (this.content) {
          var tempContent = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(this.content) : this.content;
          this.element.innerHTML = tempContent;
        }
        this.setIconCss();
      }
      if (this.enableRtl) {
        this.element.classList.add(cssClassName$1.RTL);
      }
      if (this.disabled) {
        this.controlStatus(this.disabled);
      } else {
        this.wireEvents();
      }
    };
    Button2.prototype.controlStatus = function(disabled) {
      this.element.disabled = disabled;
    };
    Button2.prototype.setIconCss = function() {
      if (this.iconCss) {
        var span = this.createElement("span", { className: "e-btn-icon " + this.iconCss });
        if (!this.element.textContent.trim()) {
          this.element.classList.add(cssClassName$1.ICONBTN);
        } else {
          span.classList.add("e-icon-" + this.iconPosition.toLowerCase());
          if (this.iconPosition === "Top" || this.iconPosition === "Bottom") {
            this.element.classList.add("e-" + this.iconPosition.toLowerCase() + "-icon-btn");
          }
        }
        var node = this.element.childNodes[0];
        if (node && (this.iconPosition === "Left" || this.iconPosition === "Top")) {
          this.element.insertBefore(span, node);
        } else {
          this.element.appendChild(span);
        }
      }
    };
    Button2.prototype.wireEvents = function() {
      if (this.isToggle) {
        EventHandler.add(this.element, "click", this.btnClickHandler, this);
      }
    };
    Button2.prototype.unWireEvents = function() {
      if (this.isToggle) {
        EventHandler.remove(this.element, "click", this.btnClickHandler);
      }
    };
    Button2.prototype.btnClickHandler = function() {
      if (this.element.classList.contains("e-active")) {
        this.element.classList.remove("e-active");
      } else {
        this.element.classList.add("e-active");
      }
    };
    Button2.prototype.destroy = function() {
      var classList2 = [
        cssClassName$1.PRIMARY,
        cssClassName$1.RTL,
        cssClassName$1.ICONBTN,
        "e-success",
        "e-info",
        "e-danger",
        "e-warning",
        "e-flat",
        "e-outline",
        "e-small",
        "e-bigger",
        "e-active",
        "e-round",
        "e-top-icon-btn",
        "e-bottom-icon-btn"
      ];
      if (this.cssClass) {
        classList2 = classList2.concat(this.cssClass.split(/\s+/).filter(function(c) {
          return c.length > 0;
        }));
      }
      _super.prototype.destroy.call(this);
      removeClass([this.element], classList2);
      if (!this.element.getAttribute("class")) {
        this.element.removeAttribute("class");
      }
      if (this.disabled) {
        this.element.removeAttribute("disabled");
      }
      if (this.content) {
        this.element.innerHTML = this.element.innerHTML.replace(this.content, "");
      }
      var span = this.element.querySelector("span.e-btn-icon");
      if (span) {
        detach(span);
      }
      this.unWireEvents();
    };
    Button2.prototype.getModuleName = function() {
      return "btn";
    };
    Button2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Button2.Inject = function() {
    };
    Button2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var span = this.element.querySelector("span.e-btn-icon");
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "isPrimary":
            if (newProp.isPrimary) {
              this.element.classList.add(cssClassName$1.PRIMARY);
            } else {
              this.element.classList.remove(cssClassName$1.PRIMARY);
            }
            break;
          case "disabled":
            this.controlStatus(newProp.disabled);
            break;
          case "iconCss": {
            span = this.element.querySelector("span.e-btn-icon");
            if (span) {
              if (newProp.iconCss) {
                span.className = "e-btn-icon " + newProp.iconCss;
                if (this.element.textContent.trim()) {
                  if (this.iconPosition === "Left") {
                    span.classList.add("e-icon-left");
                  } else {
                    span.classList.add("e-icon-right");
                  }
                }
              } else {
                detach(span);
              }
            } else {
              this.setIconCss();
            }
            break;
          }
          case "iconPosition":
            removeClass([this.element], ["e-top-icon-btn", "e-bottom-icon-btn"]);
            span = this.element.querySelector("span.e-btn-icon");
            if (span) {
              detach(span);
            }
            this.setIconCss();
            break;
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([this.element], oldProp.cssClass.split(/\s+/).filter(function(c) {
                return c.length > 0;
              }));
            }
            if (newProp.cssClass) {
              addClass([this.element], newProp.cssClass.replace(/\s+/g, " ").trim().split(" "));
            }
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              this.element.classList.add(cssClassName$1.RTL);
            } else {
              this.element.classList.remove(cssClassName$1.RTL);
            }
            break;
          case "content": {
            var node = getTextNode(this.element);
            if (!node) {
              this.element.classList.remove(cssClassName$1.ICONBTN);
            }
            {
              if (this.enableHtmlSanitizer) {
                newProp.content = SanitizeHtmlHelper.sanitize(newProp.content);
              }
              this.element.innerHTML = newProp.content;
              this.setIconCss();
            }
            break;
          }
          case "isToggle":
            if (newProp.isToggle) {
              EventHandler.add(this.element, "click", this.btnClickHandler, this);
            } else {
              EventHandler.remove(this.element, "click", this.btnClickHandler);
              removeClass([this.element], ["e-active"]);
            }
            break;
        }
      }
    };
    Button2.prototype.click = function() {
      this.element.click();
    };
    Button2.prototype.focusIn = function() {
      this.element.focus();
    };
    __decorate$e([
      Property("Left")
    ], Button2.prototype, "iconPosition", void 0);
    __decorate$e([
      Property("")
    ], Button2.prototype, "iconCss", void 0);
    __decorate$e([
      Property(false)
    ], Button2.prototype, "disabled", void 0);
    __decorate$e([
      Property(false)
    ], Button2.prototype, "isPrimary", void 0);
    __decorate$e([
      Property("")
    ], Button2.prototype, "cssClass", void 0);
    __decorate$e([
      Property("")
    ], Button2.prototype, "content", void 0);
    __decorate$e([
      Property(false)
    ], Button2.prototype, "isToggle", void 0);
    __decorate$e([
      Property()
    ], Button2.prototype, "locale", void 0);
    __decorate$e([
      Property(true)
    ], Button2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$e([
      Event()
    ], Button2.prototype, "created", void 0);
    Button2 = __decorate$e([
      NotifyPropertyChanges
    ], Button2);
    return Button2;
  }(Component)
);
var __extends$A = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$d = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var classNames = {
  chipSet: "e-chip-set",
  chip: "e-chip",
  avatar: "e-chip-avatar",
  text: "e-chip-text",
  icon: "e-chip-icon",
  delete: "e-chip-delete",
  deleteIcon: "e-dlt-btn",
  multiSelection: "e-multi-selection",
  singleSelection: "e-selection",
  active: "e-active",
  chipWrapper: "e-chip-avatar-wrap",
  iconWrapper: "e-chip-icon-wrap",
  focused: "e-focused",
  disabled: "e-disabled",
  rtl: "e-rtl",
  template: "e-chip-template",
  chipList: "e-chip-list",
  customIcon: "e-icons",
  chipDrag: "e-chip-drag",
  dragAndDrop: "e-drag-and-drop",
  dropRestricted: "e-error-treeview",
  cloneChip: "e-clone-chip",
  dragIndicator: "e-drag-indicator"
};
var ChipList = (
  /** @class */
  function(_super) {
    __extends$A(ChipList2, _super);
    function ChipList2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.multiSelectedChip = [];
      return _this;
    }
    ChipList_1 = ChipList2;
    ChipList2.prototype.preRender = function() {
    };
    ChipList2.prototype.chipType = function() {
      return this.chips && this.chips.length && this.chips.length > 0;
    };
    ChipList2.prototype.render = function() {
      this.type = !isNullOrUndefined(this.chips) && this.chips.length ? "chipset" : this.text || this.element.innerText ? "chip" : "chipset";
      this.setAttributes();
      this.createChip();
      this.setRtl();
      this.select(this.selectedChips);
      this.wireEvent(false);
      this.rippleFunction = rippleEffect(this.element, {
        selector: "." + classNames.chip
      });
      this.renderComplete();
      this.dragCollection = [];
      if (this.allowDragAndDrop) {
        this.enableDraggingChips();
      }
    };
    ChipList2.prototype.enableDraggingChips = function() {
      var _this = this;
      var clonedChipElement;
      var chipElements = this.element.querySelectorAll("." + classNames.chip);
      chipElements.forEach(function(chip, index) {
        _this.dragObj = new Draggable(chip, {
          preventDefault: false,
          clone: true,
          dragArea: _this.dragArea,
          helper: function() {
            clonedChipElement = chip.cloneNode(true);
            clonedChipElement.classList.add(classNames.cloneChip);
            _this.element.appendChild(clonedChipElement);
            return clonedChipElement;
          },
          dragStart: function(args) {
            _this.dragIndicator = _this.createElement("div", { className: classNames.dragIndicator });
            document.body.appendChild(_this.dragIndicator);
            var chipData = _this.find(args.element);
            var dragStartArgs = {
              cancel: false,
              event: args.event,
              draggedItem: args.element,
              draggedItemData: chipData,
              dropTarget: null
            };
            _this.trigger("dragStart", dragStartArgs, function() {
              if (isNullOrUndefined(dragStartArgs.cancel)) {
                dragStartArgs.cancel = false;
              }
            });
            if (!dragStartArgs.cancel) {
              clonedChipElement.setAttribute("drag-indicator-index", index.toString());
            } else {
              _this.dragObj.intDestroy(args.event);
            }
          },
          drag: function(args) {
            var chipData = _this.find(args.element);
            var draggingArgs = {
              event: args.event,
              draggedItem: args.element,
              draggedItemData: chipData,
              dropTarget: null
            };
            _this.trigger("dragging", draggingArgs);
            var draggingIconEle = clonedChipElement.querySelector("." + classNames.chipDrag);
            if (isNullOrUndefined(draggingIconEle)) {
              draggingIconEle = _this.createElement("span", { className: classNames.customIcon + " " + classNames.dragAndDrop + " " + classNames.chipDrag });
              clonedChipElement.prepend(draggingIconEle);
            }
            _this.allowExternalDragging(args, clonedChipElement, draggingIconEle);
          },
          dragStop: function(args) {
            var chipData = _this.find(args.element);
            var dragStopArgs = {
              cancel: false,
              event: args.event,
              draggedItem: args.element,
              draggedItemData: chipData,
              dropTarget: args.target
            };
            _this.trigger("dragStop", dragStopArgs, function() {
              if (isNullOrUndefined(dragStopArgs.cancel)) {
                dragStopArgs.cancel = false;
              }
            });
            if (!dragStopArgs.cancel) {
              _this.allowExternalDrop(args, clonedChipElement);
            }
            if (!isNullOrUndefined(_this.dragIndicator)) {
              remove(_this.dragIndicator);
            }
            if (!isNullOrUndefined(clonedChipElement)) {
              clonedChipElement.remove();
            }
          }
        });
        if (_this.dragCollection.indexOf(_this.dragObj) === -1) {
          _this.dragCollection.push(_this.dragObj);
        }
      });
    };
    ChipList2.prototype.checkInstance = function(args, context) {
      var isInstanceMatched = !isNullOrUndefined(args.target.closest("." + classNames.chipList)) && args.target.closest("." + classNames.chipList).id !== context.element.id;
      if (isInstanceMatched) {
        this.updatedInstance = args.target.closest("." + classNames.chipList);
      }
      return isInstanceMatched;
    };
    ChipList2.prototype.setIcons = function(currentInstance, draggingIconEle, target, indicatorEle, outOfDragArea) {
      var isTargetInside = currentInstance.element.contains(target);
      var isDroppable = target.closest(".e-droppable");
      if ((isTargetInside || isDroppable) && !outOfDragArea) {
        draggingIconEle.classList.add(classNames.dragAndDrop);
        draggingIconEle.classList.remove(classNames.dropRestricted);
        if (isDroppable) {
          indicatorEle.style.display = "none";
        }
      } else {
        draggingIconEle.classList.remove(classNames.dragAndDrop);
        draggingIconEle.classList.add(classNames.dropRestricted);
        indicatorEle.style.display = "none";
      }
    };
    ChipList2.prototype.allowExternalDragging = function(args, clonedChipElement, draggingIconEle) {
      var currentInstance;
      var closestChip = null;
      var closestDistance = Infinity;
      var newIndex = -1;
      var outOfDragArea = false;
      if (this.checkInstance(args, this)) {
        this.dragIndicator.style.display = "none";
        currentInstance = this.getCurrentInstance(args);
        currentInstance.dragIndicator = this.dragIndicator;
        if (!currentInstance.allowDragAndDrop) {
          return;
        }
      } else {
        currentInstance = this;
      }
      var indicatorEle = currentInstance.dragIndicator;
      indicatorEle.style.display = "inline";
      outOfDragArea = this.dragAreaCheck(this.dragArea, args.target, outOfDragArea, draggingIconEle, indicatorEle);
      this.setIcons(currentInstance, draggingIconEle, args.target, indicatorEle, outOfDragArea);
      currentInstance.element.appendChild(clonedChipElement);
      var droppedRect = clonedChipElement.getBoundingClientRect();
      var allChips = Array.from(currentInstance.element.querySelectorAll("." + classNames.chip));
      allChips.forEach(function(chip, i) {
        if (chip !== clonedChipElement) {
          var rect_1 = chip.getBoundingClientRect();
          var distance = Math.sqrt(Math.pow(droppedRect.left - rect_1.left, 2) + Math.pow(droppedRect.top - rect_1.top, 2));
          if (distance < closestDistance) {
            closestDistance = distance;
            closestChip = chip;
            newIndex = i;
          }
        }
      });
      if (newIndex === -1) {
        newIndex = allChips.length;
      }
      var chipsDistance = this.getChipsDistance(currentInstance);
      var cloneRect = clonedChipElement.getBoundingClientRect();
      var rect;
      if (closestChip || allChips.length > 0) {
        var targetChip = closestChip || allChips[allChips.length - 1];
        rect = targetChip.getBoundingClientRect();
        indicatorEle.style.top = rect.top + window.scrollY + "px";
        indicatorEle.style.left = currentInstance.enableRtl ? rect.right + chipsDistance + "px" : rect.left - chipsDistance + window.scrollX + "px";
      }
      if (currentInstance.enableRtl) {
        if (cloneRect.left < rect.left - rect.width / 2 && cloneRect.top > rect.top) {
          indicatorEle.style.left = rect.left - chipsDistance + window.scrollX + "px";
        }
      } else if (cloneRect.left > rect.left + rect.width / 2 && cloneRect.top > rect.top) {
        indicatorEle.style.left = rect.left + rect.width + chipsDistance + window.scrollX + "px";
      }
    };
    ChipList2.prototype.dragAreaCheck = function(dragArea, target, outOfDragArea, draggingIconEle, indicatorEle) {
      if (isNullOrUndefined(dragArea)) {
        return false;
      }
      var isString = typeof dragArea === "string";
      var isHtmlElement = dragArea instanceof HTMLElement;
      var dragAreaElement = isString ? document.querySelector(dragArea) : dragArea;
      if (!isNullOrUndefined(dragAreaElement)) {
        if ((isString || isHtmlElement) && !dragAreaElement.contains(target)) {
          outOfDragArea = true;
          indicatorEle.style.display = "none";
          draggingIconEle.classList.add(classNames.dropRestricted);
          draggingIconEle.classList.remove(classNames.dragAndDrop);
        }
      }
      return outOfDragArea;
    };
    ChipList2.prototype.getChipsDistance = function(currentInstance) {
      var constValue = 4;
      if (currentInstance.chips.length <= 1) {
        return constValue;
      }
      var constantDistance;
      var firstChipClientRect = currentInstance.find(0).element.getBoundingClientRect();
      var secondChipClientRect = currentInstance.find(1).element.getBoundingClientRect();
      var firstChipLeft = firstChipClientRect.left;
      if (currentInstance.enableRtl) {
        var secondChipRight = secondChipClientRect.right;
        constantDistance = firstChipLeft < secondChipRight ? constValue : (firstChipLeft - secondChipRight) / 2;
        return constantDistance;
      } else {
        var firstChipWidth = firstChipClientRect.width;
        var secondChipLeft = secondChipClientRect.left;
        constantDistance = secondChipLeft < firstChipLeft + firstChipWidth ? constValue : (secondChipLeft - (firstChipLeft + firstChipWidth)) / 2;
        return constantDistance;
      }
    };
    ChipList2.prototype.getCurrentInstance = function(args) {
      var chipContainer = args.target.closest("." + classNames.chipList);
      if (!isNullOrUndefined(chipContainer) && !isNullOrUndefined(chipContainer.ej2_instances)) {
        for (var i = 0; i < chipContainer.ej2_instances.length; i++) {
          if (chipContainer.ej2_instances[parseInt(i.toString(), 10)] instanceof ChipList_1) {
            return chipContainer.ej2_instances[i];
          }
        }
      }
      return null;
    };
    ChipList2.prototype.allowExternalDrop = function(args, clonedChipElement) {
      var originalIndex = parseInt(clonedChipElement.getAttribute("drag-indicator-index"), 10);
      var currentInstance;
      var outOfDragArea = false;
      var isInstanceChanged = false;
      if (this.checkInstance(args, this)) {
        isInstanceChanged = true;
        currentInstance = this.getCurrentInstance(args);
        if (!currentInstance.allowDragAndDrop) {
          return;
        }
      } else {
        currentInstance = this;
      }
      var indicatorEle = currentInstance.dragIndicator;
      indicatorEle.style.display = "inline";
      if (!currentInstance.element.contains(args.target)) {
        return;
      }
      outOfDragArea = this.dragAreaCheck(this.dragArea, args.target, outOfDragArea, clonedChipElement.querySelector("." + classNames.chipDrag), indicatorEle);
      if (outOfDragArea) {
        return;
      }
      var indicatorRect = indicatorEle.getBoundingClientRect();
      var allChips = Array.from(currentInstance.element.querySelectorAll("." + classNames.chip));
      var newIndex = -1;
      var topOffset = false;
      var leftOffset = false;
      var rightOffset = false;
      for (var i = 0; i < allChips.length; i++) {
        if (allChips[i] !== clonedChipElement) {
          var chipRect = allChips[i].getBoundingClientRect();
          topOffset = indicatorRect.top < chipRect.top + chipRect.height / 2;
          leftOffset = indicatorRect.left < chipRect.left + chipRect.width / 2;
          rightOffset = indicatorRect.left > chipRect.left + chipRect.width / 2;
          if (!currentInstance.enableRtl && topOffset && leftOffset || currentInstance.enableRtl && topOffset && rightOffset) {
            newIndex = i;
            if (i > originalIndex && !isInstanceChanged) {
              newIndex = i - 1;
            }
            break;
          }
        }
      }
      if (newIndex === -1) {
        var nextChipIndex = void 0;
        for (var i = 0; i < allChips.length; i++) {
          var chipRect = allChips[i].getBoundingClientRect();
          if (chipRect.top > indicatorRect.top || chipRect.top === indicatorRect.top && chipRect.left > indicatorRect.left) {
            nextChipIndex = i;
            break;
          }
        }
        if (nextChipIndex !== allChips.length) {
          newIndex = nextChipIndex;
        } else {
          newIndex = allChips.length;
        }
      }
      var currentChipList = Array.from(this.chips);
      if (isInstanceChanged) {
        this.dropChip(currentChipList, originalIndex, currentInstance, newIndex, true);
      } else if (newIndex !== originalIndex) {
        this.dropChip(currentChipList, originalIndex, currentInstance, newIndex, false);
      }
    };
    ChipList2.prototype.dropChip = function(currentChipList, originalIndex, currentInstance, newIndex, instanceChanged) {
      var draggedChip = currentChipList.splice(originalIndex, 1)[0];
      if (!instanceChanged) {
        currentChipList.splice(newIndex, 0, draggedChip);
        currentInstance.chips = currentChipList;
      } else {
        var newChips = Array.from(currentInstance.chips);
        newChips.splice(newIndex, 0, draggedChip);
        currentInstance.chips = newChips;
      }
      this.chips = currentChipList;
      currentInstance.dataBind();
      this.dataBind();
      currentInstance.enableDraggingChips();
    };
    ChipList2.prototype.createChip = function() {
      this.innerText = this.element.innerText && this.element.innerText.length !== 0 ? this.element.innerText.trim() : this.element.innerText;
      this.element.innerHTML = "";
      this.chipCreation(this.type === "chip" ? [this.innerText ? this.innerText : this.text] : this.chips);
    };
    ChipList2.prototype.setAttributes = function() {
      if (this.type === "chip") {
        if (this.enabled) {
          this.element.tabIndex = 0;
        }
        this.element.setAttribute("role", "button");
      } else {
        this.element.classList.add(classNames.chipSet);
        this.element.setAttribute("role", "listbox");
        if (this.selection === "Multiple") {
          this.element.classList.add(classNames.multiSelection);
          this.element.setAttribute("aria-multiselectable", "true");
        } else if (this.selection === "Single") {
          this.element.classList.add(classNames.singleSelection);
          this.element.setAttribute("aria-multiselectable", "false");
        } else {
          this.element.setAttribute("aria-multiselectable", "false");
        }
      }
    };
    ChipList2.prototype.setRtl = function() {
      this.element.classList[this.enableRtl ? "add" : "remove"](classNames.rtl);
    };
    ChipList2.prototype.renderTemplates = function() {
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    ChipList2.prototype.templateParser = function(template) {
      if (template) {
        try {
          if (typeof template !== "function" && document.querySelectorAll(template).length) {
            return compile$1(document.querySelector(template).innerHTML.trim());
          } else {
            return compile$1(template);
          }
        } catch (error) {
          return compile$1(template);
        }
      }
      return void 0;
    };
    ChipList2.prototype.chipCreation = function(data) {
      if (isNullOrUndefined(data)) {
        return;
      }
      var chipListArray = [];
      var attributeArray = [];
      for (var i = 0; i < data.length; i++) {
        var fieldsData = this.getFieldValues(data[i]);
        var attributesValue = fieldsData.htmlAttributes;
        attributeArray.push(attributesValue);
        var chipArray = this.elementCreation(fieldsData);
        var className = (classNames.chip + " " + (fieldsData.enabled ? " " : classNames.disabled) + " " + (fieldsData.avatarIconCss || fieldsData.avatarText ? classNames.chipWrapper : fieldsData.leadingIconCss ? classNames.iconWrapper : " ") + " " + fieldsData.cssClass).split(" ").filter(function(css) {
          return css;
        });
        if (!this.chipType() || this.type === "chip") {
          chipListArray = chipArray;
          addClass([this.element], className);
          this.element.setAttribute("aria-label", fieldsData.text);
          if (fieldsData.value) {
            this.element.setAttribute("data-value", fieldsData.value.toString());
          }
        } else {
          var wrapper = this.createElement("DIV", {
            className: className.join(" "),
            attrs: {
              tabIndex: "0",
              role: "option",
              "aria-label": fieldsData.text,
              "aria-selected": "false"
            }
          });
          if (this.enableDelete) {
            wrapper.setAttribute("aria-keyshortcuts", "Press delete or backspace key to delete");
          }
          if (fieldsData.value) {
            wrapper.setAttribute("data-value", fieldsData.value.toString());
          }
          if (fieldsData.enabled) {
            wrapper.setAttribute("aria-disabled", "false");
          } else {
            wrapper.removeAttribute("tabindex");
            wrapper.setAttribute("aria-disabled", "true");
          }
          if (!isNullOrUndefined(attributeArray[i])) {
            if (attributeArray.length > i && Object.keys(attributeArray[i]).length) {
              var htmlAttr = [];
              htmlAttr = Object.keys(attributeArray[i]);
              for (var j = 0; j < htmlAttr.length; j++) {
                wrapper.setAttribute(htmlAttr[j], attributeArray[i][htmlAttr[j]]);
              }
            }
          }
          append(chipArray, wrapper);
          chipListArray.push(wrapper);
        }
      }
      append(chipListArray, this.element);
    };
    ChipList2.prototype.getFieldValues = function(data) {
      var chipEnabled = !(this.enabled.toString() === "false");
      var fields = {
        text: typeof data === "object" ? data.text ? data.text.toString() : this.text.toString() : !this.chipType() ? this.innerText ? this.innerText : this.text.toString() : data.toString(),
        cssClass: typeof data === "object" ? data.cssClass ? data.cssClass.toString() : this.cssClass.toString() : this.cssClass.toString(),
        leadingIconCss: typeof data === "object" ? data.leadingIconCss ? data.leadingIconCss.toString() : this.leadingIconCss.toString() : this.leadingIconCss.toString(),
        avatarIconCss: typeof data === "object" ? data.avatarIconCss ? data.avatarIconCss.toString() : this.avatarIconCss.toString() : this.avatarIconCss.toString(),
        avatarText: typeof data === "object" ? data.avatarText ? data.avatarText.toString() : this.avatarText.toString() : this.avatarText.toString(),
        trailingIconCss: typeof data === "object" ? data.trailingIconCss ? data.trailingIconCss.toString() : this.trailingIconCss.toString() : this.trailingIconCss.toString(),
        enabled: typeof data === "object" ? data.enabled !== void 0 ? data.enabled.toString() === "false" ? false : true : chipEnabled : chipEnabled,
        value: typeof data === "object" ? data.value ? data.value.toString() : null : null,
        leadingIconUrl: typeof data === "object" ? data.leadingIconUrl ? data.leadingIconUrl.toString() : this.leadingIconUrl : this.leadingIconUrl,
        trailingIconUrl: typeof data === "object" ? data.trailingIconUrl ? data.trailingIconUrl.toString() : this.trailingIconUrl : this.trailingIconUrl,
        htmlAttributes: typeof data === "object" ? data.htmlAttributes ? data.htmlAttributes : this.htmlAttributes : this.htmlAttributes,
        template: typeof data === "object" ? data.template ? data.template : null : null
      };
      return fields;
    };
    ChipList2.prototype.elementCreation = function(fields) {
      var chipArray = [];
      if (fields.avatarText || fields.avatarIconCss) {
        var className = (classNames.avatar + " " + fields.avatarIconCss).trim();
        var chipAvatarElement = this.createElement("span", { className });
        chipAvatarElement.innerText = fields.avatarText;
        chipArray.push(chipAvatarElement);
      } else if (fields.leadingIconCss) {
        var className = (classNames.icon + " " + fields.leadingIconCss).trim();
        var chipIconElement = this.createElement("span", { className });
        chipArray.push(chipIconElement);
      } else if (fields.leadingIconUrl) {
        var className = (classNames.avatar + " image-url").trim();
        var chipIconElement = this.createElement("span", { className });
        chipIconElement.style.backgroundImage = "url(" + fields.leadingIconUrl + ")";
        chipArray.push(chipIconElement);
      }
      var chipTextElement = this.createElement("span", { className: classNames.text });
      chipTextElement.innerText = fields.text;
      chipArray.push(chipTextElement);
      if (fields.template) {
        var templateWrapper = this.createElement("div", { className: classNames.template });
        var templateContent = this.templateParser(fields.template)(fields, this, "template", this.element.id + "_template", false);
        append(templateContent, templateWrapper);
        chipArray.push(templateWrapper);
        this.renderTemplates();
      }
      if (fields.trailingIconCss || this.chipType() && this.enableDelete) {
        var className = (classNames.delete + " " + (fields.trailingIconCss ? fields.trailingIconCss : classNames.deleteIcon)).trim();
        var chipdeleteElement = this.createElement("span", { className });
        chipArray.push(chipdeleteElement);
      } else if (fields.trailingIconUrl) {
        var className = "trailing-icon-url".trim();
        var chipIconsElement = this.createElement("span", { className });
        chipIconsElement.style.backgroundImage = "url(" + fields.trailingIconUrl + ")";
        chipArray.push(chipIconsElement);
      }
      return chipArray;
    };
    ChipList2.prototype.find = function(fields) {
      var chipData = { text: "", index: -1, element: this.element, data: "" };
      var chipElement = fields instanceof HTMLElement ? fields : this.element.querySelectorAll("." + classNames.chip)[fields];
      if (chipElement && this.chipType()) {
        chipData.index = Array.prototype.slice.call(this.element.querySelectorAll("." + classNames.chip)).indexOf(chipElement);
        var chip = this.chips[chipData.index];
        if (typeof chip === "object" && chip !== null) {
          var chipModel = chip;
          if (chipModel.text !== void 0) {
            chipData.text = chipModel.text.toString();
          }
        } else if (chip !== void 0) {
          chipData.text = chip.toString();
        }
        chipData.data = chip;
        chipData.element = chipElement;
      }
      return chipData;
    };
    ChipList2.prototype.add = function(chipsData) {
      var _a;
      if (this.type !== "chip") {
        var fieldData = chipsData instanceof Array ? chipsData : [chipsData];
        this.chips = (_a = [].slice.call(this.chips)).concat.apply(_a, fieldData);
        this.chipCreation(fieldData);
      }
    };
    ChipList2.prototype.select = function(fields, selectionType) {
      this.onSelect(fields, false, selectionType);
    };
    ChipList2.prototype.multiSelection = function(newProp) {
      var items = this.element.querySelectorAll("." + classNames.chip);
      for (var j = 0; j < newProp.length; j++) {
        if (typeof newProp[j] === "string") {
          for (var k = 0; k < items.length; k++) {
            if (newProp[j] !== k) {
              if (newProp[j] === items[k].attributes[5].value) {
                this.multiSelectedChip.push(k);
                break;
              }
            }
          }
        } else {
          this.multiSelectedChip.push(newProp[j]);
        }
      }
    };
    ChipList2.prototype.onSelect = function(fields, callFromProperty, selectionType) {
      var index;
      var chipNodes;
      var chipValue = null;
      if (this.chipType() && this.selection !== "None") {
        if (callFromProperty) {
          var chipElements = this.element.querySelectorAll("." + classNames.chip);
          for (var i = 0; i < chipElements.length; i++) {
            chipElements[i].setAttribute("aria-selected", "false");
            chipElements[i].classList.remove(classNames.active);
          }
        }
        var fieldData = fields instanceof Array ? fields : [fields];
        for (var i = 0; i < fieldData.length; i++) {
          var chipElement = fieldData[i] instanceof HTMLElement ? fieldData[i] : this.element.querySelectorAll("." + classNames.chip)[fieldData[i]];
          if (selectionType !== "index") {
            for (var j = 0; j < this.chips.length; j++) {
              chipNodes = this.element.querySelectorAll("." + classNames.chip)[j];
              var fieldsData = this.getFieldValues(this.chips[j]);
              if (selectionType === "value") {
                if (fieldsData.value !== null) {
                  chipValue = chipNodes.dataset.value;
                }
              } else if (selectionType === "text") {
                chipValue = chipNodes.innerText;
              }
              if (chipValue === fieldData[i].toString()) {
                index = j;
                chipElement = this.element.querySelectorAll("." + classNames.chip)[index];
              }
            }
          }
          if (chipElement instanceof HTMLElement) {
            this.selectionHandler(chipElement);
          }
        }
      }
    };
    ChipList2.prototype.remove = function(fields) {
      var _this = this;
      if (this.chipType()) {
        var fieldData = fields instanceof Array ? fields : [fields];
        var chipElements_1 = [];
        var chipCollection_1 = this.element.querySelectorAll("." + classNames.chip);
        fieldData.forEach(function(data) {
          var chipElement = data instanceof HTMLElement ? data : chipCollection_1[data];
          if (chipElement instanceof HTMLElement) {
            chipElements_1.push(chipElement);
          }
        });
        chipElements_1.forEach(function(element2) {
          var chips = _this.element.querySelectorAll("." + classNames.chip);
          var index = Array.prototype.slice.call(chips).indexOf(element2);
          _this.deleteHandler(element2, index);
        });
      }
    };
    ChipList2.prototype.getSelectedChips = function() {
      var selectedChips;
      if (this.chipType() && this.selection !== "None") {
        var selectedItems = { texts: [], Indexes: [], data: [], elements: [] };
        var items = this.element.querySelectorAll("." + classNames.active);
        for (var i = 0; i < items.length; i++) {
          var chip = items[i];
          selectedItems.elements.push(chip);
          var index = Array.prototype.slice.call(this.element.querySelectorAll("." + classNames.chip)).indexOf(chip);
          selectedItems.Indexes.push(index);
          selectedItems.data.push(this.chips[index]);
          var text = typeof this.chips[index] === "object" ? this.chips[index].text ? this.chips[index].text : null : this.chips[index].toString();
          selectedItems.texts.push(text);
        }
        var selectedItem = {
          text: selectedItems.texts[0],
          index: selectedItems.Indexes[0],
          data: selectedItems.data[0],
          element: selectedItems.elements[0]
        };
        selectedChips = !isNullOrUndefined(selectedItem.index) ? this.selection === "Multiple" ? selectedItems : selectedItem : void 0;
      }
      return selectedChips;
    };
    ChipList2.prototype.wireEvent = function(unWireEvent) {
      if (!unWireEvent) {
        EventHandler.add(this.element, "click", this.clickHandler, this);
        EventHandler.add(this.element, "focusout", this.focusOutHandler, this);
        EventHandler.add(this.element, "keydown", this.keyHandler, this);
        EventHandler.add(this.element, "keyup", this.keyHandler, this);
      } else {
        EventHandler.remove(this.element, "click", this.clickHandler);
        EventHandler.remove(this.element, "focusout", this.focusOutHandler);
        EventHandler.remove(this.element, "keydown", this.keyHandler);
        EventHandler.remove(this.element, "keyup", this.keyHandler);
      }
    };
    ChipList2.prototype.keyHandler = function(e) {
      if (e.target.classList.contains(classNames.chip)) {
        if (e.type === "keydown") {
          if (e.keyCode === 13 || e.keyCode === 32) {
            this.clickHandler(e);
          } else if ((e.keyCode === 46 || e.keyCode === 8) && this.enableDelete) {
            this.clickHandler(e, true);
          }
        } else if (e.keyCode === 9) {
          this.focusInHandler(e.target);
        }
      }
    };
    ChipList2.prototype.focusInHandler = function(chipWrapper) {
      if (!chipWrapper.classList.contains(classNames.focused)) {
        chipWrapper.classList.add(classNames.focused);
      }
    };
    ChipList2.prototype.focusOutHandler = function(e) {
      var chipWrapper = closest(e.target, "." + classNames.chip);
      var focusedElement = !this.chipType() ? this.element.classList.contains(classNames.focused) ? this.element : null : this.element.querySelector("." + classNames.focused);
      if (chipWrapper && focusedElement) {
        focusedElement.classList.remove(classNames.focused);
      }
    };
    ChipList2.prototype.clickHandler = function(e, del) {
      var _this = this;
      if (del === void 0) {
        del = false;
      }
      var chipWrapper = closest(e.target, "." + classNames.chip);
      if (chipWrapper) {
        var chipDataArgs = void 0;
        if (this.chipType()) {
          chipDataArgs = this.find(chipWrapper);
        } else {
          var index = Array.prototype.slice.call(this.element.querySelectorAll("." + classNames.chip)).indexOf(chipWrapper);
          chipDataArgs = {
            text: this.innerText ? this.innerText : this.text,
            element: chipWrapper,
            data: this.text,
            index
          };
        }
        chipDataArgs.event = e;
        chipDataArgs.cancel = false;
        this.trigger("beforeClick", chipDataArgs, function(observedArgs) {
          if (!observedArgs.cancel) {
            _this.clickEventHandler(observedArgs.element, e, del);
          }
        });
      }
    };
    ChipList2.prototype.clickEventHandler = function(chipWrapper, e, del) {
      var _this = this;
      if (this.chipType()) {
        var chipData_1 = this.find(chipWrapper);
        chipData_1.event = e;
        var deleteElement = e.target.classList.contains(classNames.deleteIcon) ? e.target : del ? chipWrapper.querySelector("." + classNames.deleteIcon) : void 0;
        if (deleteElement && this.enableDelete) {
          chipData_1.cancel = false;
          var deletedItemArgs = chipData_1;
          this.trigger("delete", deletedItemArgs, function(observedArgs) {
            if (!observedArgs.cancel) {
              _this.deleteHandler(observedArgs.element, observedArgs.index);
              _this.selectionHandler(chipWrapper);
              chipData_1.selected = observedArgs.element.classList.contains(classNames.active);
              var selectedItemArgs2 = chipData_1;
              _this.trigger("click", selectedItemArgs2);
              var chipElement = _this.element.querySelectorAll("." + classNames.chip)[observedArgs.index];
              if (chipElement) {
                chipElement.focus();
                _this.focusInHandler(chipElement);
              }
            }
          });
        } else if (this.selection !== "None") {
          this.selectionHandler(chipWrapper);
          chipData_1.selected = chipWrapper.classList.contains(classNames.active);
          var selectedItemArgs = chipData_1;
          this.trigger("click", selectedItemArgs);
        } else {
          this.focusInHandler(chipWrapper);
          var clickedItemArgs = chipData_1;
          this.trigger("click", clickedItemArgs);
        }
      } else {
        this.focusInHandler(chipWrapper);
        var clickedItemArgs = {
          text: this.innerText ? this.innerText : this.text,
          element: chipWrapper,
          data: this.text,
          event: e
        };
        this.trigger("click", clickedItemArgs);
      }
    };
    ChipList2.prototype.selectionHandler = function(chipWrapper) {
      if (this.selection === "Single") {
        var activeElement = this.element.querySelector("." + classNames.active);
        if (activeElement && activeElement !== chipWrapper) {
          activeElement.classList.remove(classNames.active);
          activeElement.setAttribute("aria-selected", "false");
        }
        this.setProperties({ selectedChips: null }, true);
      } else {
        this.setProperties({ selectedChips: [] }, true);
      }
      if (chipWrapper.classList.contains(classNames.active)) {
        chipWrapper.classList.remove(classNames.active);
        chipWrapper.setAttribute("aria-selected", "false");
      } else {
        chipWrapper.classList.add(classNames.active);
        chipWrapper.setAttribute("aria-selected", "true");
      }
      this.updateSelectedChips();
    };
    ChipList2.prototype.updateSelectedChips = function() {
      var chipListEle = this.element.querySelectorAll("." + classNames.chip);
      var chipCollIndex = [];
      var chipCollValue = [];
      var chip = null;
      var value = null;
      for (var i = 0; i < chipListEle.length; i++) {
        var selectedEle = this.element.querySelectorAll("." + classNames.chip)[i];
        if (selectedEle.getAttribute("aria-selected") === "true") {
          value = selectedEle.getAttribute("data-value");
          if (this.selection === "Single" && selectedEle.classList.contains("e-active")) {
            chip = value ? value : i;
            break;
          } else {
            chip = value ? chipCollValue.push(value) : chipCollIndex.push(i);
          }
        }
      }
      this.setProperties({ selectedChips: this.selection === "Single" ? chip : value ? chipCollValue : chipCollIndex }, true);
    };
    ChipList2.prototype.deleteHandler = function(chipWrapper, index) {
      var deletedChipData = this.find(chipWrapper);
      this.chips.splice(index, 1);
      this.setProperties({ chips: this.chips }, true);
      detach(chipWrapper);
      this.trigger("deleted", deletedChipData);
    };
    ChipList2.prototype.destroy = function() {
      for (var i = 0; i < this.dragCollection.length; i++) {
        this.dragCollection[i].destroy();
      }
      this.dragCollection = [];
      this.clearTemplate();
      removeClass([this.element], [
        classNames.chipSet,
        classNames.chip,
        classNames.rtl,
        classNames.multiSelection,
        classNames.singleSelection,
        classNames.disabled,
        classNames.chipWrapper,
        classNames.iconWrapper,
        classNames.active,
        classNames.focused
      ].concat(this.cssClass ? this.cssClass.toString().split(" ").filter(function(css) {
        return css;
      }) : []));
      this.removeMultipleAttributes(["tabindex", "role", "aria-label", "aria-multiselectable"], this.element);
      this.wireEvent(true);
      this.rippleFunction();
      _super.prototype.destroy.call(this);
      this.element.innerHTML = "";
      this.element.innerText = this.innerText;
    };
    ChipList2.prototype.removeMultipleAttributes = function(attributes2, element2) {
      attributes2.forEach(function(attr) {
        element2.removeAttribute(attr);
      });
    };
    ChipList2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    ChipList2.prototype.getModuleName = function() {
      return "chip-list";
    };
    ChipList2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "chips":
          case "text":
          case "avatarText":
          case "avatarIconCss":
          case "leadingIconCss":
          case "trailingIconCss":
          case "selection":
          case "enableDelete":
          case "enabled":
            this.refresh();
            break;
          case "cssClass":
            if (!this.chipType()) {
              removeClass([this.element], oldProp.cssClass.toString().split(" ").filter(function(css) {
                return css;
              }));
              addClass([this.element], newProp.cssClass.toString().split(" ").filter(function(css) {
                return css;
              }));
            } else {
              this.refresh();
            }
            break;
          case "selectedChips":
            removeClass(this.element.querySelectorAll(".e-active"), "e-active");
            if (this.selection === "Multiple") {
              this.multiSelectedChip = [];
              this.multiSelection(newProp.selectedChips);
              this.onSelect(this.multiSelectedChip, true);
              this.updateSelectedChips();
            } else {
              this.onSelect(newProp.selectedChips, true);
            }
            break;
          case "enableRtl":
            this.setRtl();
            break;
          case "allowDragAndDrop":
            for (var i = 0; i < this.dragCollection.length; i++) {
              this.dragCollection[i].destroy();
            }
            this.dragCollection = [];
            if (this.allowDragAndDrop) {
              this.enableDraggingChips();
            }
            break;
          case "dragArea":
            if (this.allowDragAndDrop) {
              for (var i = 0; i < this.dragCollection.length; i++) {
                this.dragCollection[i].dragArea = this.dragArea;
              }
            }
            break;
        }
      }
    };
    var ChipList_1;
    __decorate$d([
      Property([])
    ], ChipList2.prototype, "chips", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "text", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "avatarText", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "avatarIconCss", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "htmlAttributes", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "leadingIconCss", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "trailingIconCss", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "leadingIconUrl", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "trailingIconUrl", void 0);
    __decorate$d([
      Property("")
    ], ChipList2.prototype, "cssClass", void 0);
    __decorate$d([
      Property(true)
    ], ChipList2.prototype, "enabled", void 0);
    __decorate$d([
      Property([])
    ], ChipList2.prototype, "selectedChips", void 0);
    __decorate$d([
      Property("None")
    ], ChipList2.prototype, "selection", void 0);
    __decorate$d([
      Property(false)
    ], ChipList2.prototype, "enableDelete", void 0);
    __decorate$d([
      Property(false)
    ], ChipList2.prototype, "allowDragAndDrop", void 0);
    __decorate$d([
      Property(null)
    ], ChipList2.prototype, "dragArea", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "created", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "click", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "beforeClick", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "delete", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "deleted", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "dragStart", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "dragging", void 0);
    __decorate$d([
      Event()
    ], ChipList2.prototype, "dragStop", void 0);
    ChipList2 = ChipList_1 = __decorate$d([
      NotifyPropertyChanges
    ], ChipList2);
    return ChipList2;
  }(Component)
);
var __extends$z = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var defaulthtmlkeys = [
  "alt",
  "className",
  "disabled",
  "form",
  "id",
  "readOnly",
  "style",
  "tabIndex",
  "title",
  "type",
  "name",
  "onClick",
  "onFocus",
  "onBlur"
];
var delayUpdate = ["accordion", "tab", "splitter"];
var isColEName = /\]/;
var ComponentBase = (
  /** @class */
  function(_super) {
    __extends$z(ComponentBase2, _super);
    function ComponentBase2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.mountingState = false;
      _this.attrKeys = [];
      _this.cachedTimeOut = 0;
      _this.isAppendCalled = false;
      _this.initRenderCalled = false;
      _this.isReactForeceUpdate = false;
      _this.isReact = true;
      _this.isshouldComponentUpdateCalled = false;
      _this.isCreated = false;
      return _this;
    }
    ComponentBase2.prototype.componentDidMount = function() {
      this.refreshChild(true);
      this.canDelayUpdate = delayUpdate.indexOf(this.getModuleName()) !== -1;
      this.renderReactComponent();
      if (this.portals && this.portals.length) {
        this.mountingState = true;
        this.renderReactTemplates();
        this.mountingState = false;
      }
    };
    ComponentBase2.prototype.componentDidUpdate = function(prev) {
      if (!this.isshouldComponentUpdateCalled && this.initRenderCalled && !this.isReactForeceUpdate) {
        if (prev !== this.props) {
          this.isshouldComponentUpdateCalled = true;
          this.updateProperties(this.props, false, prev);
        }
      }
    };
    ComponentBase2.prototype.renderReactComponent = function() {
      var ele = this.reactElement;
      if (ele && !this.isAppendCalled) {
        this.isAppendCalled = true;
        this.appendTo(ele);
      }
    };
    ComponentBase2.prototype.shouldComponentUpdate = function(nextProps) {
      this.isshouldComponentUpdateCalled = true;
      if (!this.initRenderCalled) {
        this.updateProperties(nextProps, true);
        return true;
      }
      if (!this.isAppendCalled) {
        clearTimeout(this.cachedTimeOut);
        this.isAppendCalled = true;
        this.appendTo(this.reactElement);
      }
      this.updateProperties(nextProps);
      return true;
    };
    ComponentBase2.prototype.updateProperties = function(nextProps, silent, prev) {
      var _this = this;
      var dProps = extend$1({}, nextProps);
      var keys2 = Object.keys(nextProps);
      var prevProps = extend$1({}, prev || this.props);
      var statelessTemplates = !isNullOrUndefined(prevProps["statelessTemplates"]) ? prevProps["statelessTemplates"] : !isNullOrUndefined(this["statelessTemplateProps"]) ? this["statelessTemplateProps"] : [];
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var propkey = keys_1[_i];
        var isClassName = propkey === "className";
        if (propkey === "children") {
          continue;
        }
        if (!isClassName && !isNullOrUndefined(this.htmlattributes["" + propkey]) && this.htmlattributes["" + propkey] !== dProps["" + propkey]) {
          this.htmlattributes["" + propkey] = dProps["" + propkey];
        }
        if (this.compareValues(prevProps["" + propkey], nextProps["" + propkey])) {
          delete dProps["" + propkey];
        } else if (this.attrKeys.indexOf(propkey) !== -1) {
          if (isClassName) {
            this.clsName = true;
            var propsClsName = prevProps["" + propkey].split(" ");
            for (var i = 0; i < propsClsName.length; i++) {
              this.element.classList.remove(propsClsName[parseInt(i.toString(), 10)]);
            }
            var dpropsClsName = dProps["" + propkey].split(" ");
            for (var j = 0; j < dpropsClsName.length; j++) {
              this.element.classList.add(dpropsClsName[parseInt(j.toString(), 10)]);
            }
          } else if (propkey !== "disabled" && !Object.prototype.hasOwnProperty.call(this.properties, propkey)) {
            delete dProps["" + propkey];
          }
        } else if (propkey === "value" && nextProps["" + propkey] === this["" + propkey]) {
          delete dProps["" + propkey];
        } else if (statelessTemplates.indexOf(propkey) > -1 && (propkey === "content" && typeof dProps["" + propkey] === "function" || nextProps["" + propkey].toString() === this["" + propkey].toString())) {
          delete dProps["" + propkey];
        }
      }
      if (dProps["children"]) {
        delete dProps["children"];
      }
      if (this.initRenderCalled && (this.canDelayUpdate || prevProps.delayUpdate)) {
        setTimeout(function() {
          _this.refreshProperties(dProps, nextProps, silent);
        });
      } else {
        this.refreshProperties(dProps, nextProps, silent);
      }
    };
    ComponentBase2.prototype.refreshProperties = function(dProps, nextProps, silent) {
      var statelessTemplates = !isNullOrUndefined(this.props["statelessTemplates"]) ? this.props["statelessTemplates"] : [];
      if (Object.keys(dProps).length) {
        if (!silent) {
          this.processComplexTemplate(dProps, this);
        }
        this.setProperties(dProps, silent);
      }
      if (statelessTemplates.indexOf("directiveTemplates") === -1) {
        this.refreshChild(silent, nextProps);
      }
    };
    ComponentBase2.prototype.processComplexTemplate = function(curObject, context) {
      var compTemplate = context.complexTemplate;
      if (compTemplate) {
        for (var prop in compTemplate) {
          if (Object.prototype.hasOwnProperty.call(compTemplate, prop)) {
            var PropVal = compTemplate["" + prop];
            if (curObject["" + prop]) {
              setValue(PropVal, getValue(prop, curObject), curObject);
            }
          }
        }
      }
    };
    ComponentBase2.prototype.getDefaultAttributes = function() {
      var _this = this;
      this.isReact = true;
      var propKeys = Object.keys(this.props);
      var ignoreProps = ["children", "statelessTemplates", "immediateRender", "isLegacyTemplate", "delayUpdate"];
      if (!this.htmlattributes) {
        this.htmlattributes = {};
      }
      this.attrKeys = defaulthtmlkeys.concat(this.controlAttributes || []);
      for (var _i = 0, propKeys_1 = propKeys; _i < propKeys_1.length; _i++) {
        var prop = propKeys_1[_i];
        if (prop.indexOf("data-") !== -1 || prop.indexOf("aria-") !== -1 || this.attrKeys.indexOf(prop) !== -1 || Object.keys(this.properties).indexOf("" + prop) === -1 && ignoreProps.indexOf("" + prop) === -1) {
          if (this.htmlattributes["" + prop] !== this.props["" + prop]) {
            this.htmlattributes["" + prop] = this.props["" + prop];
          }
        }
      }
      if (!this.htmlattributes.ref) {
        this.htmlattributes.ref = function(ele) {
          _this.reactElement = ele;
        };
        var keycompoentns = [
          "autocomplete",
          "combobox",
          "dropdownlist",
          "dropdowntree",
          "multiselect",
          "listbox",
          "colorpicker",
          "numerictextbox",
          "textbox",
          "smarttextarea",
          "uploader",
          "maskedtextbox",
          "slider",
          "datepicker",
          "datetimepicker",
          "daterangepicker",
          "timepicker",
          "checkbox",
          "switch",
          "radio",
          "rating",
          "textarea",
          "multicolumncombobox"
        ];
        if (keycompoentns.indexOf(this.getModuleName()) !== -1) {
          this.htmlattributes.key = "" + ComponentBase2.reactUid;
          ComponentBase2.reactUid++;
          if (this.type && !this.htmlattributes["type"]) {
            this.htmlattributes["type"] = this.multiline ? "hidden" : this.type;
          }
          if (this.name && !this.htmlattributes["name"]) {
            this.htmlattributes["name"] = this.name;
          }
        }
      }
      if (this.clsName) {
        var clsList = this.element.classList;
        var className = this.htmlattributes["className"];
        for (var i = 0; i < clsList.length; i++) {
          if (className.indexOf(clsList[parseInt(i.toString(), 10)]) === -1) {
            this.htmlattributes["className"] = this.htmlattributes["className"] + " " + clsList[parseInt(i.toString(), 10)];
          }
        }
      }
      return this.htmlattributes;
    };
    ComponentBase2.prototype.trigger = function(eventName, eventProp, successHandler) {
      var _this = this;
      if (this.isDestroyed !== true && this.modelObserver) {
        if (isColEName.test(eventName)) {
          var handler = getValue(eventName, this);
          if (handler) {
            handler.call(this, eventProp);
            if (successHandler) {
              successHandler.call(this, eventProp);
            }
          } else if (successHandler) {
            successHandler.call(this, eventProp);
          }
        }
        if (eventName === "change" || eventName === "input") {
          if (this.props.onChange && eventProp.event) {
            this.props.onChange.call(void 0, {
              syntheticEvent: eventProp.event,
              nativeEvent: { text: eventProp.value },
              value: eventProp.value,
              target: this
            });
          }
        }
        var prevDetection = this.isProtectedOnChange;
        this.isProtectedOnChange = false;
        if (eventName === "created") {
          setTimeout(function() {
            _this.isCreated = true;
            if (!_this.isDestroyed) {
              _this.modelObserver.notify(eventName, eventProp, successHandler);
            }
          }, 10);
        } else {
          this.modelObserver.notify(eventName, eventProp, successHandler);
        }
        this.isProtectedOnChange = prevDetection;
      }
    };
    ComponentBase2.prototype.compareValues = function(value1, value2) {
      var typeVal = typeof value1;
      var typeVal2 = typeof value2;
      if (typeVal === typeVal2) {
        if (value1 === value2) {
          return true;
        }
        if ((!isNullOrUndefined(value1) && value1.constructor) !== (!isNullOrUndefined(value2) && value2.constructor)) {
          return false;
        }
        if (value1 instanceof Date || value1 instanceof RegExp || value1 instanceof String || value1 instanceof Number) {
          return value1.toString() === value2.toString();
        }
        if (isObject(value1) || Array.isArray(value1)) {
          var tempVal = value1;
          var tempVal2 = value2;
          if (isObject(tempVal)) {
            tempVal = [value1];
            tempVal2 = [value2];
          }
          return this.compareObjects(tempVal, tempVal2).status;
        }
        if (value1.moduleName && value1.moduleName === value2.moduleName && (value1.moduleName === "query" || value1.moduleName === "datamanager")) {
          if (JSON.stringify(value1) === JSON.stringify(value2)) {
            return true;
          }
        }
      }
      return false;
    };
    ComponentBase2.prototype.compareObjects = function(oldProps, newProps, propName) {
      var status = true;
      var lenSimilarity = oldProps.length === newProps.length;
      var diffArray = [];
      var templateProps = !isNullOrUndefined(this["templateProps"]) ? this["templateProps"] : [];
      if (lenSimilarity) {
        for (var i = 0, len = newProps.length; i < len; i++) {
          var curObj = {};
          var oldProp = oldProps[parseInt(i.toString(), 10)];
          var newProp = newProps[parseInt(i.toString(), 10)];
          var keys2 = Object.keys(newProp);
          if (keys2.length !== 0) {
            for (var _i = 0, keys_2 = keys2; _i < keys_2.length; _i++) {
              var key = keys_2[_i];
              var oldValue = oldProp["" + key];
              var newValue = newProp["" + key];
              if (key === "items") {
                for (var _j = 0; _j < newValue.length; _j++) {
                  if (this.getModuleName() === "richtexteditor" && typeof newValue[parseInt(_j.toString(), 10)] === "object") {
                    return { status: true };
                  }
                }
              }
              if (this.getModuleName() === "grid" && key === "field") {
                curObj["" + key] = newValue;
              }
              if (!Object.prototype.hasOwnProperty.call(oldProp, key) || !(templateProps.length > 0 && templateProps.indexOf("" + key) === -1 && typeof newValue === "function" ? this.compareValues(oldValue.toString(), newValue.toString()) : this.compareValues(oldValue, newValue))) {
                if (!propName) {
                  return { status: false };
                }
                status = false;
                curObj["" + key] = newValue;
              }
            }
          } else if (newProps[parseInt(i.toString(), 10)] === oldProps[parseInt(i.toString(), 10)]) {
            status = true;
          } else {
            if (!propName) {
              return { status: false };
            }
            status = false;
          }
          if (this.getModuleName() === "grid" && propName === "columns" && isNullOrUndefined(curObj["field"])) {
            curObj["field"] = void 0;
          }
          if (Object.keys(curObj).length) {
            diffArray.push({ index: i, value: curObj, key: propName });
          }
        }
      } else {
        status = false;
      }
      return { status, changedProperties: diffArray };
    };
    ComponentBase2.prototype.refreshChild = function(silent, props) {
      if (this.checkInjectedModules) {
        var prevModule = this.getInjectedModules() || [];
        var curModule = this.getInjectedServices() || [];
        for (var _i = 0, curModule_1 = curModule; _i < curModule_1.length; _i++) {
          var mod = curModule_1[_i];
          if (prevModule.indexOf(mod) === -1) {
            prevModule.push(mod);
          }
        }
        this.injectedModules = prevModule;
      }
      if (this.directivekeys) {
        var changedProps = [];
        var key = "";
        var directiveValue = this.validateChildren({}, this.directivekeys, props || this.props);
        if (directiveValue && Object.keys(directiveValue).length) {
          if (!silent && this.skipRefresh) {
            for (var _a = 0, _b = this.skipRefresh; _a < _b.length; _a++) {
              var fields = _b[_a];
              delete directiveValue["" + fields];
            }
          }
          if (this.prevProperties) {
            var dKeys = Object.keys(this.prevProperties);
            for (var i = 0; i < dKeys.length; i++) {
              key = dKeys[parseInt(i.toString(), 10)];
              if (!Object.prototype.hasOwnProperty.call(directiveValue, key)) {
                continue;
              }
              var compareOutput = this.compareObjects(this.prevProperties["" + key], directiveValue["" + key], key);
              if (compareOutput.status) {
                delete directiveValue["" + key];
              } else {
                if (compareOutput.changedProperties.length) {
                  changedProps = changedProps.concat(compareOutput.changedProperties);
                }
                var obj = {};
                obj["" + key] = directiveValue["" + key];
                this.prevProperties = extend$1(this.prevProperties, obj);
              }
            }
          } else {
            this.prevProperties = extend$1({}, directiveValue, {}, true);
          }
          if (changedProps.length) {
            if (this.getModuleName() === "grid" && key === "columns") {
              for (var _c1 = 0, allColumns = this.columns; _c1 < allColumns.length; _c1++) {
                var compareField1 = getValue("field", allColumns[parseInt(_c1.toString(), 10)]);
                var compareField2 = getValue(_c1 + ".value.field", changedProps);
                if (compareField1 === compareField2) {
                  var propInstance = getValue(changedProps[parseInt(_c1.toString(), 10)].key + "." + changedProps[parseInt(_c1.toString(), 10)].index, this);
                  if (propInstance && propInstance.setProperties) {
                    propInstance.setProperties(changedProps[parseInt(_c1.toString(), 10)].value);
                  } else {
                    extend$1(propInstance, changedProps[parseInt(_c1.toString(), 10)].value);
                  }
                } else {
                  this.setProperties(directiveValue, silent);
                }
              }
            } else {
              for (var _c = 0, changedProps_1 = changedProps; _c < changedProps_1.length; _c++) {
                var changes = changedProps_1[_c];
                var propInstance = getValue(changes.key + "." + changes.index, this);
                if (propInstance && propInstance.setProperties) {
                  propInstance.setProperties(changes.value);
                } else {
                  extend$1(propInstance, changes.value);
                }
              }
            }
          } else {
            this.setProperties(directiveValue, silent);
          }
        }
      }
    };
    ComponentBase2.prototype.componentWillUnmount = function() {
      clearTimeout(this.cachedTimeOut);
      var modulesName = ["dropdowntree", "checkbox"];
      var hasModule = !modulesName.indexOf(this.getModuleName()) ? document.body.contains(this.element) : true;
      if (this.initRenderCalled && this.isAppendCalled && this.element && hasModule && !this.isDestroyed && this.isCreated) {
        this.destroy();
      }
      onIntlChange.offIntlEvents();
    };
    ComponentBase2.prototype.appendReactElement = function(element2, container) {
      var portal = ReactDOM.createPortal(element2, container);
      if (!this.portals) {
        this.portals = [portal];
      } else {
        this.portals.push(portal);
      }
    };
    ComponentBase2.prototype.renderReactTemplates = function(callback) {
      this.isReactForeceUpdate = true;
      if (callback) {
        this.forceUpdate(callback);
      } else {
        this.forceUpdate();
      }
      this.isReactForeceUpdate = false;
    };
    ComponentBase2.prototype.clearTemplate = function(templateNames, index, callback) {
      var _this = this;
      if (templateNames && templateNames.length) {
        Array.prototype.forEach.call(templateNames, function(propName) {
          _this.portals.forEach(function(portal) {
            if (portal.propName === propName) ;
          });
          if (!isNullOrUndefined(index) && _this.portals[index] && _this.portals[index].propName === propName) {
            _this.portals.splice(index, 1);
          } else {
            for (var i = 0; i < _this.portals.length; i++) {
              if (_this.portals[parseInt(i.toString(), 10)].propName === propName) {
                _this.portals.splice(i, 1);
                i--;
              }
            }
          }
        });
      } else {
        this.portals = [];
      }
      this.renderReactTemplates(callback);
    };
    ComponentBase2.prototype.validateChildren = function(childCache, mapper2, props) {
      var flag = false;
      var childs = React.Children.toArray(props.children);
      for (var _i = 0, childs_1 = childs; _i < childs_1.length; _i++) {
        var child = childs_1[_i];
        var ifield = this.getChildType(child);
        var key = mapper2["" + ifield];
        if (ifield && mapper2) {
          var childProps = this.getChildProps(React.Children.toArray(child.props.children), key);
          if (childProps.length) {
            flag = true;
            childCache[child.type.propertyName || ifield] = childProps;
          }
        }
      }
      if (flag) {
        return childCache;
      }
      return null;
    };
    ComponentBase2.prototype.getChildType = function(child) {
      if (child.type && child.type.isDirective) {
        return child.type.moduleName || "";
      }
      return "";
    };
    ComponentBase2.prototype.getChildProps = function(subChild, matcher) {
      var ret = [];
      for (var _i = 0, subChild_1 = subChild; _i < subChild_1.length; _i++) {
        var child = subChild_1[_i];
        var accessProp = false;
        var key = void 0;
        if (typeof matcher === "string") {
          accessProp = true;
          key = matcher;
        } else {
          key = Object.keys(matcher)[0];
        }
        var prop = child.props;
        var field = this.getChildType(child);
        if (field === key) {
          if (accessProp || !prop.children) {
            var cacheVal = extend$1({}, prop, {}, true);
            this.processComplexTemplate(cacheVal, child.type);
            ret.push(cacheVal);
          } else {
            var cachedValue = this.validateChildren(extend$1({}, prop), matcher["" + key], prop) || prop;
            if (cachedValue["children"]) {
              delete cachedValue["children"];
            }
            this.processComplexTemplate(cachedValue, child.type);
            ret.push(cachedValue);
          }
        }
      }
      return ret;
    };
    ComponentBase2.prototype.getInjectedServices = function() {
      var childs = React.Children.toArray(this.props.children);
      for (var _i = 0, childs_2 = childs; _i < childs_2.length; _i++) {
        var child = childs_2[_i];
        if (child.type && child.type.isService) {
          return child.props.services;
        }
      }
      return [];
    };
    ComponentBase2.reactUid = 1;
    return ComponentBase2;
  }(React.Component)
);
function applyMixins(derivedClass, baseClass) {
  baseClass.forEach(function(baseClass2) {
    Object.getOwnPropertyNames(baseClass2.prototype).forEach(function(name) {
      if (name !== "isMounted" && name !== "replaceState" && name !== "render") {
        derivedClass.prototype["" + name] = baseClass2.prototype["" + name];
      }
    });
  });
}
var __extends$y = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var ComplexBase = (
  /** @class */
  function(_super) {
    __extends$y(ComplexBase2, _super);
    function ComplexBase2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ComplexBase2.prototype.render = function() {
      return null;
    };
    ComplexBase2.isDirective = true;
    return ComplexBase2;
  }(React.PureComponent)
);
var __extends$x = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var Inject = (
  /** @class */
  function(_super) {
    __extends$x(Inject2, _super);
    function Inject2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Inject2.prototype.render = function() {
      return null;
    };
    Inject2.isService = true;
    return Inject2;
  }(React.PureComponent)
);
var stringCompiler = getTemplateEngine();
function compile(templateElement, helper) {
  if (typeof templateElement === "string" || templateElement.prototype && templateElement.prototype.CSPTemplate && typeof templateElement === "function") {
    return stringCompiler(templateElement, helper);
  } else {
    return function(data, component, prop, element2) {
      var actTemplate = templateElement;
      var actData = data;
      if (typeof actTemplate === "object") {
        actTemplate = templateElement.template;
        actData = extend$1({}, data, templateElement.data || {});
      }
      var cEle;
      if (element2) {
        cEle = element2;
      } else {
        cEle = document.createElement("div");
      }
      var rele = React.createElement(actTemplate, actData);
      var portal = ReactDOM.createPortal(rele, cEle);
      portal.propName = prop;
      if (!component.portals) {
        component.portals = [portal];
      } else {
        component.portals.push(portal);
      }
      if (!element2) {
        return [cEle];
      }
    };
  }
}
setTemplateEngine({ compile });
var __extends$w = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var ButtonComponent = (
  /** @class */
  function(_super) {
    __extends$w(ButtonComponent2, _super);
    function ButtonComponent2(props) {
      var _this = _super.call(this, props) || this;
      _this.initRenderCalled = false;
      _this.checkInjectedModules = false;
      _this.statelessTemplateProps = null;
      _this.templateProps = null;
      _this.immediateRender = true;
      _this.isReactMock = true;
      _this.portals = [];
      return _this;
    }
    ButtonComponent2.prototype.render = function() {
      this.isReactMock = false;
      if ((this.element && !this.initRenderCalled || this.refreshing) && !this.isReactForeceUpdate) {
        _super.prototype.render.call(this);
        this.initRenderCalled = true;
      } else {
        return React.createElement("button", this.getDefaultAttributes(), [].concat(this.props.children, this.portals));
      }
    };
    return ButtonComponent2;
  }(Button)
);
applyMixins(ButtonComponent, [ComponentBase, React.Component]);
var __extends$v = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var ChipDirective = (
  /** @class */
  function(_super) {
    __extends$v(ChipDirective2, _super);
    function ChipDirective2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ChipDirective2.moduleName = "chip";
    return ChipDirective2;
  }(ComplexBase)
);
var ChipsDirective = (
  /** @class */
  function(_super) {
    __extends$v(ChipsDirective2, _super);
    function ChipsDirective2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ChipsDirective2.propertyName = "chips";
    ChipsDirective2.moduleName = "chips";
    return ChipsDirective2;
  }(ComplexBase)
);
var __extends$u = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var ChipListComponent = (
  /** @class */
  function(_super) {
    __extends$u(ChipListComponent2, _super);
    function ChipListComponent2(props) {
      var _this = _super.call(this, props) || this;
      _this.initRenderCalled = false;
      _this.checkInjectedModules = false;
      _this.directivekeys = { "chips": "chip" };
      _this.statelessTemplateProps = null;
      _this.templateProps = null;
      _this.immediateRender = false;
      _this.isReactMock = true;
      _this.portals = [];
      return _this;
    }
    ChipListComponent2.prototype.render = function() {
      this.isReactMock = false;
      if ((this.element && !this.initRenderCalled || this.refreshing) && !this.isReactForeceUpdate) {
        _super.prototype.render.call(this);
        this.initRenderCalled = true;
      } else {
        return React.createElement("div", this.getDefaultAttributes(), [].concat(this.props.children, this.portals));
      }
    };
    return ChipListComponent2;
  }(ChipList)
);
applyMixins(ChipListComponent, [ComponentBase, React.Component]);
const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error("useAuth must be used within an AuthProvider");
  }
  return context;
};
const sidebarItems = [
  {
    id: 1,
    icon: "/assets/icons/home.svg",
    label: "Dashboard",
    href: "/dashboard"
  },
  {
    id: 2,
    icon: "/assets/icons/users.svg",
    label: "All Products",
    href: "/all-product"
  },
  {
    id: 3,
    icon: "/assets/icons/itinerary.svg",
    label: "All Categories",
    href: "/all-categories"
  },
  {
    id: 4,
    icon: "/assets/icons/itinerary.svg",
    label: "All Customers",
    href: "/all-users"
  }
];
const userSidebarItems = [
  {
    id: 1,
    icon: "/assets/icons/users.svg",
    label: "All Products",
    href: "/user-dashboard"
  }
];
const roles = [
  "ADMIN",
  "CUSTOMER"
];
const NavItems = () => {
  const { authData, logout } = useContext(AuthContext);
  const [imageUrl, setImageUrl] = useState("");
  const navigate = useNavigate();
  const handleLogout = () => {
    console.log("Logging out in 500ms...");
    setTimeout(() => {
      logout();
      navigate("/log-in");
    }, 500);
  };
  useEffect(() => {
    if (authData) {
      console.log(`Setting profile icon for role: ${authData.role}`);
      switch (authData.role) {
        case "ADMIN":
          setImageUrl("/assets/icons/admin.png");
          break;
        default:
          setImageUrl("/assets/icons/customer.png");
      }
    } else {
      console.warn("No authenticated user found.");
    }
  }, [authData]);
  return /* @__PURE__ */ jsxs("section", { className: "nav-items", children: [
    /* @__PURE__ */ jsxs(Link, { to: "/dashboard", className: "link-logo", children: [
      /* @__PURE__ */ jsx("img", { src: "/assets/icons/cosmos.png", alt: "Logo", className: "size-[40px]" }),
      /* @__PURE__ */ jsx("h1", { children: /* @__PURE__ */ jsx("span", { className: "text-gray-600", children: "COSMOS" }) })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "container", children: [
      /* @__PURE__ */ jsx("nav", { children: sidebarItems.map(({ id, href, icon, label }) => /* @__PURE__ */ jsx(NavLink, { to: href, children: ({ isActive }) => /* @__PURE__ */ jsxs("div", { className: cn("group nav-item", {
        "bg-primary-100 !text-white": isActive
      }), children: [
        /* @__PURE__ */ jsx(
          "img",
          {
            src: icon,
            alt: label,
            className: `group-hover:brightness-0 size-0 group-hover:invert ${isActive ? "brightness-0 invert" : "text-dark-200"}`
          }
        ),
        label
      ] }) }, id)) }),
      /* @__PURE__ */ jsxs("footer", { className: "nav-footer", children: [
        authData ? /* @__PURE__ */ jsxs(Fragment, { children: [
          /* @__PURE__ */ jsx(
            "img",
            {
              src: imageUrl || "/assets/icons/customer.png",
              alt: authData.username
            }
          ),
          /* @__PURE__ */ jsxs("article", { children: [
            /* @__PURE__ */ jsx("h2", { children: authData.username }),
            /* @__PURE__ */ jsx("p", { children: authData.role })
          ] })
        ] }) : /* @__PURE__ */ jsx("p", { children: "SIGN IN" }),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: () => {
              handleLogout();
            },
            className: "cursor-pointer",
            children: /* @__PURE__ */ jsx(
              "img",
              {
                src: "/assets/icons/logout.svg",
                alt: "Logout",
                className: "size-6"
              }
            )
          }
        )
      ] })
    ] })
  ] });
};
var Query = (
  /** @class */
  function() {
    function Query2(from) {
      this.subQuery = null;
      this.isChild = false;
      this.distincts = [];
      this.queries = [];
      this.key = "";
      this.fKey = "";
      if (typeof from === "string") {
        this.fromTable = from;
      } else if (from && from instanceof Array) {
        this.lookups = from;
      }
      this.expands = [];
      this.sortedColumns = [];
      this.groupedColumns = [];
      this.subQuery = null;
      this.isChild = false;
      this.params = [];
      this.lazyLoad = [];
      return this;
    }
    Object.defineProperty(Query2.prototype, "moduleName", {
      /** @hidden */
      get: function() {
        return "query";
      },
      enumerable: true,
      configurable: true
    });
    Query2.prototype.setKey = function(field) {
      this.key = field;
      return this;
    };
    Query2.prototype.using = function(dataManager) {
      this.dataManager = dataManager;
      return this;
    };
    Query2.prototype.execute = function(dataManager, done, fail, always) {
      dataManager = dataManager || this.dataManager;
      if (dataManager) {
        return dataManager.executeQuery(this, done, fail, always);
      }
      return DataUtil.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument');
    };
    Query2.prototype.executeLocal = function(dataManager) {
      dataManager = dataManager || this.dataManager;
      if (dataManager) {
        return dataManager.executeLocal(this);
      }
      return DataUtil.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument');
    };
    Query2.prototype.clone = function() {
      var cloned = new Query2();
      cloned.queries = this.queries.slice(0);
      cloned.key = this.key;
      cloned.isChild = this.isChild;
      cloned.dataManager = this.dataManager;
      cloned.fromTable = this.fromTable;
      cloned.params = this.params.slice(0);
      cloned.expands = this.expands.slice(0);
      cloned.sortedColumns = this.sortedColumns.slice(0);
      cloned.groupedColumns = this.groupedColumns.slice(0);
      cloned.subQuerySelector = this.subQuerySelector;
      cloned.subQuery = this.subQuery;
      cloned.fKey = this.fKey;
      cloned.isCountRequired = this.isCountRequired;
      cloned.distincts = this.distincts.slice(0);
      cloned.lazyLoad = this.lazyLoad.slice(0);
      return cloned;
    };
    Query2.prototype.from = function(tableName) {
      this.fromTable = tableName;
      return this;
    };
    Query2.prototype.addParams = function(key, value) {
      if (typeof value === "function") {
        this.params.push({ key, fn: value });
      } else {
        this.params.push({ key, value });
      }
      return this;
    };
    Query2.prototype.distinct = function(fields) {
      if (typeof fields === "string") {
        this.distincts = [].slice.call([fields], 0);
      } else {
        this.distincts = fields.slice(0);
      }
      return this;
    };
    Query2.prototype.expand = function(tables) {
      if (typeof tables === "string") {
        this.expands = [].slice.call([tables], 0);
      } else {
        this.expands = tables.slice(0);
      }
      return this;
    };
    Query2.prototype.where = function(fieldName, operator, value, ignoreCase, ignoreAccent, matchCase) {
      operator = operator ? operator.toLowerCase() : null;
      var predicate = null;
      if (typeof fieldName === "string") {
        predicate = new Predicate$1(fieldName, operator, value, ignoreCase, ignoreAccent, matchCase);
      } else if (fieldName instanceof Predicate$1) {
        predicate = fieldName;
      }
      this.queries.push({
        fn: "onWhere",
        e: predicate
      });
      return this;
    };
    Query2.prototype.search = function(searchKey, fieldNames, operator, ignoreCase, ignoreAccent) {
      if (typeof fieldNames === "string") {
        fieldNames = [fieldNames];
      }
      if (!operator || operator === "none") {
        operator = "contains";
      }
      var comparer = DataUtil.fnOperators[operator];
      this.queries.push({
        fn: "onSearch",
        e: {
          fieldNames,
          operator,
          searchKey,
          ignoreCase,
          ignoreAccent,
          comparer
        }
      });
      return this;
    };
    Query2.prototype.sortBy = function(fieldName, comparer, isFromGroup) {
      return this.sortByForeignKey(fieldName, comparer, isFromGroup);
    };
    Query2.prototype.sortByForeignKey = function(fieldName, comparer, isFromGroup, direction) {
      var order = !isNullOrUndefined(direction) ? direction : "ascending";
      var sorts;
      var temp;
      if (typeof fieldName === "string" && DataUtil.endsWith(fieldName.toLowerCase(), " desc")) {
        fieldName = fieldName.replace(/ desc$/i, "");
        comparer = "descending";
      }
      if (!comparer || typeof comparer === "string") {
        order = comparer ? comparer.toLowerCase() : "ascending";
        comparer = DataUtil.fnSort(comparer);
      }
      if (isFromGroup) {
        sorts = Query2.filterQueries(this.queries, "onSortBy");
        for (var i = 0; i < sorts.length; i++) {
          temp = sorts[i].e.fieldName;
          if (typeof temp === "string") {
            if (temp === fieldName) {
              return this;
            }
          } else if (temp instanceof Array) {
            for (var j = 0; j < temp.length; j++) {
              if (temp[j] === fieldName || fieldName.toLowerCase() === temp[j] + " desc") {
                return this;
              }
            }
          }
        }
      }
      this.queries.push({
        fn: "onSortBy",
        e: {
          fieldName,
          comparer,
          direction: order
        }
      });
      return this;
    };
    Query2.prototype.sortByDesc = function(fieldName) {
      return this.sortBy(fieldName, "descending");
    };
    Query2.prototype.group = function(fieldName, fn, format) {
      this.sortBy(fieldName, null, true);
      this.queries.push({
        fn: "onGroup",
        e: {
          fieldName,
          comparer: fn ? fn : null,
          format: format ? format : null
        }
      });
      return this;
    };
    Query2.prototype.page = function(pageIndex, pageSize) {
      this.queries.push({
        fn: "onPage",
        e: {
          pageIndex,
          pageSize
        }
      });
      return this;
    };
    Query2.prototype.range = function(start, end) {
      this.queries.push({
        fn: "onRange",
        e: {
          start,
          end
        }
      });
      return this;
    };
    Query2.prototype.take = function(nos) {
      this.queries.push({
        fn: "onTake",
        e: {
          nos
        }
      });
      return this;
    };
    Query2.prototype.skip = function(nos) {
      this.queries.push({
        fn: "onSkip",
        e: { nos }
      });
      return this;
    };
    Query2.prototype.select = function(fieldNames) {
      if (typeof fieldNames === "string") {
        fieldNames = [].slice.call([fieldNames], 0);
      }
      this.queries.push({
        fn: "onSelect",
        e: { fieldNames }
      });
      return this;
    };
    Query2.prototype.hierarchy = function(query, selectorFn) {
      this.subQuerySelector = selectorFn;
      this.subQuery = query;
      return this;
    };
    Query2.prototype.foreignKey = function(key) {
      this.fKey = key;
      return this;
    };
    Query2.prototype.requiresCount = function() {
      this.isCountRequired = true;
      return this;
    };
    Query2.prototype.aggregate = function(type, field) {
      this.queries.push({
        fn: "onAggregates",
        e: { field, type }
      });
      return this;
    };
    Query2.filterQueries = function(queries, name) {
      return queries.filter(function(q) {
        return q.fn === name;
      });
    };
    Query2.filterQueryLists = function(queries, singles) {
      var filtered = queries.filter(function(q) {
        return singles.indexOf(q.fn) !== -1;
      });
      var res = {};
      for (var i = 0; i < filtered.length; i++) {
        if (!res[filtered[i].fn]) {
          res[filtered[i].fn] = filtered[i].e;
        }
      }
      return res;
    };
    return Query2;
  }()
);
var Predicate$1 = (
  /** @class */
  function() {
    function Predicate2(field, operator, value, ignoreCase, ignoreAccent, matchCase) {
      if (ignoreCase === void 0) {
        ignoreCase = false;
      }
      this.ignoreAccent = false;
      this.isComplex = false;
      if (typeof field === "string") {
        this.field = field;
        this.operator = operator.toLowerCase();
        this.value = value;
        this.matchCase = matchCase;
        this.ignoreCase = ignoreCase;
        this.ignoreAccent = ignoreAccent;
        this.isComplex = false;
        this.comparer = DataUtil.fnOperators.processOperator(this.operator);
      } else if (field instanceof Predicate2 && value instanceof Predicate2 || value instanceof Array) {
        this.isComplex = true;
        this.condition = operator.toLowerCase();
        this.predicates = [field];
        this.matchCase = field.matchCase;
        this.ignoreCase = field.ignoreCase;
        this.ignoreAccent = field.ignoreAccent;
        if (value instanceof Array) {
          [].push.apply(this.predicates, value);
        } else {
          this.predicates.push(value);
        }
      }
      return this;
    }
    Predicate2.and = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "and");
    };
    Predicate2.prototype.and = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "and", ignoreCase, ignoreAccent);
    };
    Predicate2.or = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "or");
    };
    Predicate2.prototype.or = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "or", ignoreCase, ignoreAccent);
    };
    Predicate2.ornot = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "or not");
    };
    Predicate2.prototype.ornot = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "ornot", ignoreCase, ignoreAccent);
    };
    Predicate2.andnot = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "and not");
    };
    Predicate2.prototype.andnot = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "andnot", ignoreCase, ignoreAccent);
    };
    Predicate2.fromJson = function(json) {
      if (json instanceof Array) {
        var res = [];
        for (var i = 0, len = json.length; i < len; i++) {
          res.push(this.fromJSONData(json[i]));
        }
        return res;
      }
      var pred = json;
      return this.fromJSONData(pred);
    };
    Predicate2.prototype.validate = function(record) {
      var predicate = this.predicates ? this.predicates : [];
      var ret;
      var isAnd;
      if (!this.isComplex && this.comparer) {
        if (this.condition && this.condition.indexOf("not") !== -1) {
          this.condition = this.condition.split("not")[0] === "" ? void 0 : this.condition.split("not")[0];
          return !this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);
        } else {
          return this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);
        }
      }
      if (this.condition && this.condition.indexOf("not") !== -1) {
        isAnd = this.condition.indexOf("and") !== -1;
      } else {
        isAnd = this.condition === "and";
      }
      for (var i = 0; i < predicate.length; i++) {
        if (i > 0 && this.condition && this.condition.indexOf("not") !== -1) {
          predicate[i].condition = predicate[i].condition ? predicate[i].condition + "not" : "not";
        }
        ret = predicate[i].validate(record);
        if (isAnd) {
          if (!ret) {
            return false;
          }
        } else {
          if (ret) {
            return true;
          }
        }
      }
      return isAnd;
    };
    Predicate2.prototype.toJson = function() {
      var predicates;
      var p;
      if (this.isComplex) {
        predicates = [];
        p = this.predicates;
        for (var i = 0; i < p.length; i++) {
          predicates.push(p[i].toJson());
        }
      }
      return {
        isComplex: this.isComplex,
        field: this.field,
        operator: this.operator,
        value: this.value,
        ignoreCase: this.ignoreCase,
        ignoreAccent: this.ignoreAccent,
        condition: this.condition,
        predicates,
        matchCase: this.matchCase
      };
    };
    Predicate2.combinePredicates = function(predicates, operator) {
      if (predicates.length === 1) {
        if (!(predicates[0] instanceof Array)) {
          return predicates[0];
        }
        predicates = predicates[0];
      }
      return new Predicate2(predicates[0], operator, predicates.slice(1));
    };
    Predicate2.combine = function(pred, field, operator, value, condition, ignoreCase, ignoreAccent) {
      if (field instanceof Predicate2) {
        return Predicate2[condition](pred, field);
      }
      if (typeof field === "string") {
        return Predicate2[condition](pred, new Predicate2(field, operator, value, ignoreCase, ignoreAccent));
      }
      return DataUtil.throwError("Predicate - " + condition + " : invalid arguments");
    };
    Predicate2.fromJSONData = function(json) {
      var preds = json.predicates || [];
      var len = preds.length;
      var predicates = [];
      var result;
      for (var i = 0; i < len; i++) {
        predicates.push(this.fromJSONData(preds[i]));
      }
      if (!json.isComplex) {
        result = new Predicate2(json.field, json.operator, json.value, json.ignoreCase, json.ignoreAccent);
      } else {
        result = new Predicate2(predicates[0], json.condition, predicates.slice(1));
      }
      return result;
    };
    return Predicate2;
  }()
);
var consts$1 = { GroupGuid: "{271bbba0-1ee7}" };
var DataUtil = (
  /** @class */
  function() {
    function DataUtil2() {
    }
    DataUtil2.getValue = function(value, inst) {
      if (typeof value === "function") {
        return value.call(inst || {});
      }
      return value;
    };
    DataUtil2.endsWith = function(input, substr) {
      return input.slice && input.slice(-substr.length) === substr;
    };
    DataUtil2.notEndsWith = function(input, substr) {
      return input.slice && input.slice(-substr.length) !== substr;
    };
    DataUtil2.startsWith = function(input, start) {
      return input.slice(0, start.length) === start;
    };
    DataUtil2.notStartsWith = function(input, start) {
      return input.slice(0, start.length) !== start;
    };
    DataUtil2.wildCard = function(input, pattern) {
      var asteriskSplit;
      var optionalSplit;
      if (pattern.indexOf("[") !== -1) {
        pattern = pattern.split("[").join("[[]");
      }
      if (pattern.indexOf("(") !== -1) {
        pattern = pattern.split("(").join("[(]");
      }
      if (pattern.indexOf(")") !== -1) {
        pattern = pattern.split(")").join("[)]");
      }
      if (pattern.indexOf("\\") !== -1) {
        pattern = pattern.split("\\").join("[\\\\]");
      }
      if (pattern.indexOf("*") !== -1) {
        if (pattern.charAt(0) !== "*") {
          pattern = "^" + pattern;
        }
        if (pattern.charAt(pattern.length - 1) !== "*") {
          pattern = pattern + "$";
        }
        asteriskSplit = pattern.split("*");
        for (var i = 0; i < asteriskSplit.length; i++) {
          if (asteriskSplit[i].indexOf(".") === -1) {
            asteriskSplit[i] = asteriskSplit[i] + ".*";
          } else {
            asteriskSplit[i] = asteriskSplit[i] + "*";
          }
        }
        pattern = asteriskSplit.join("");
      }
      if (pattern.indexOf("%3f") !== -1 || pattern.indexOf("?") !== -1) {
        optionalSplit = pattern.indexOf("%3f") !== -1 ? pattern.split("%3f") : pattern.split("?");
        pattern = optionalSplit.join(".");
      }
      var regexPattern = new RegExp(pattern, "g");
      return regexPattern.test(input);
    };
    DataUtil2.like = function(input, pattern) {
      if (pattern.indexOf("%") !== -1) {
        if (pattern.charAt(0) === "%" && pattern.lastIndexOf("%") < 2) {
          pattern = pattern.substring(1, pattern.length);
          return DataUtil2.startsWith(DataUtil2.toLowerCase(input), DataUtil2.toLowerCase(pattern));
        } else if (pattern.charAt(pattern.length - 1) === "%" && pattern.indexOf("%") > pattern.length - 3) {
          pattern = pattern.substring(0, pattern.length - 1);
          return DataUtil2.endsWith(DataUtil2.toLowerCase(input), DataUtil2.toLowerCase(pattern));
        } else if (pattern.lastIndexOf("%") !== pattern.indexOf("%") && pattern.lastIndexOf("%") > pattern.indexOf("%") + 1) {
          pattern = pattern.substring(pattern.indexOf("%") + 1, pattern.lastIndexOf("%"));
          return input.indexOf(pattern) !== -1;
        } else {
          return input.indexOf(pattern) !== -1;
        }
      } else {
        return false;
      }
    };
    DataUtil2.fnSort = function(order) {
      order = order ? DataUtil2.toLowerCase(order) : "ascending";
      if (order === "ascending") {
        return this.fnAscending;
      }
      return this.fnDescending;
    };
    DataUtil2.fnAscending = function(x, y) {
      if (isNullOrUndefined(x) && isNullOrUndefined(y)) {
        return 0;
      }
      if (y === null || y === void 0) {
        return -1;
      }
      if (typeof x === "string") {
        return x.localeCompare(y);
      }
      if (x === null || x === void 0) {
        return 1;
      }
      return x - y;
    };
    DataUtil2.fnDescending = function(x, y) {
      if (isNullOrUndefined(x) && isNullOrUndefined(y)) {
        return 0;
      }
      if (y === null || y === void 0) {
        return 1;
      }
      if (typeof x === "string") {
        return x.localeCompare(y) * -1;
      }
      if (x === null || x === void 0) {
        return -1;
      }
      return y - x;
    };
    DataUtil2.extractFields = function(obj, fields) {
      var newObj = {};
      for (var i = 0; i < fields.length; i++) {
        newObj = this.setValue(fields[i], this.getObject(fields[i], obj), newObj);
      }
      return newObj;
    };
    DataUtil2.select = function(jsonArray, fields) {
      var newData = [];
      for (var i = 0; i < jsonArray.length; i++) {
        newData.push(this.extractFields(jsonArray[i], fields));
      }
      return newData;
    };
    DataUtil2.group = function(jsonArray, field, aggregates, level, groupDs, format, isLazyLoad) {
      level = level || 1;
      var jsonData = jsonArray;
      var guid = "GroupGuid";
      if (jsonData.GroupGuid === consts$1[guid]) {
        var _loop_1 = function(j2) {
          if (!isNullOrUndefined(groupDs)) {
            var indx = -1;
            var temp = groupDs.filter(function(e) {
              return e.key === jsonData[j2].key;
            });
            indx = groupDs.indexOf(temp[0]);
            jsonData[j2].items = this_1.group(jsonData[j2].items, field, aggregates, jsonData.level + 1, groupDs[indx].items, format, isLazyLoad);
            jsonData[j2].count = groupDs[indx].count;
          } else {
            jsonData[j2].items = this_1.group(jsonData[j2].items, field, aggregates, jsonData.level + 1, null, format, isLazyLoad);
            jsonData[j2].count = jsonData[j2].items.length;
          }
        };
        var this_1 = this;
        for (var j = 0; j < jsonData.length; j++) {
          _loop_1(j);
        }
        jsonData.childLevels += 1;
        return jsonData;
      }
      var grouped = {};
      var groupedArray = [];
      groupedArray.GroupGuid = consts$1[guid];
      groupedArray.level = level;
      groupedArray.childLevels = 0;
      groupedArray.records = jsonData;
      var _loop_2 = function(i2) {
        var val = this_2.getVal(jsonData, i2, field);
        if (!isNullOrUndefined(format)) {
          val = format(val, field);
        }
        if (!grouped[val]) {
          grouped[val] = {
            key: val,
            count: 0,
            items: [],
            aggregates: {},
            field
          };
          groupedArray.push(grouped[val]);
          if (!isNullOrUndefined(groupDs)) {
            var tempObj = groupDs.filter(function(e) {
              return e.key === grouped[val].key;
            });
            grouped[val].count = tempObj[0].count;
          }
        }
        grouped[val].count = !isNullOrUndefined(groupDs) ? grouped[val].count : grouped[val].count += 1;
        if (!isLazyLoad || isLazyLoad && aggregates.length) {
          grouped[val].items.push(jsonData[i2]);
        }
      };
      var this_2 = this;
      for (var i = 0; i < jsonData.length; i++) {
        _loop_2(i);
      }
      if (aggregates && aggregates.length) {
        var _loop_3 = function(i2) {
          var res = {};
          var fn = void 0;
          var aggs = aggregates;
          for (var j2 = 0; j2 < aggregates.length; j2++) {
            fn = DataUtil2.aggregates[aggregates[j2].type];
            if (!isNullOrUndefined(groupDs)) {
              var temp = groupDs.filter(function(e) {
                return e.key === groupedArray[i2].key;
              });
              if (fn) {
                res[aggs[j2].field + " - " + aggs[j2].type] = fn(temp[0].items, aggs[j2].field);
              }
            } else {
              if (fn) {
                res[aggs[j2].field + " - " + aggs[j2].type] = fn(groupedArray[i2].items, aggs[j2].field);
              }
            }
          }
          groupedArray[i2].aggregates = res;
        };
        for (var i = 0; i < groupedArray.length; i++) {
          _loop_3(i);
        }
      }
      if (isLazyLoad && groupedArray.length && aggregates.length) {
        for (var i = 0; i < groupedArray.length; i++) {
          groupedArray[i].items = [];
        }
      }
      return jsonData.length && groupedArray || jsonData;
    };
    DataUtil2.buildHierarchy = function(fKey, from, source, lookup, pKey) {
      var i;
      var grp = {};
      var temp;
      if (lookup.result) {
        lookup = lookup.result;
      }
      if (lookup.GroupGuid) {
        this.throwError("DataManager: Do not have support Grouping in hierarchy");
      }
      for (i = 0; i < lookup.length; i++) {
        var fKeyData = this.getObject(fKey, lookup[i]);
        temp = grp[fKeyData] || (grp[fKeyData] = []);
        temp.push(lookup[i]);
      }
      for (i = 0; i < source.length; i++) {
        var fKeyData = this.getObject(pKey || fKey, source[i]);
        source[i][from] = grp[fKeyData];
      }
    };
    DataUtil2.getFieldList = function(obj, fields, prefix) {
      if (prefix === void 0) {
        prefix = "";
      }
      if (fields === void 0 || fields === null) {
        return this.getFieldList(obj, [], prefix);
      }
      var copyObj = obj;
      var keys2 = Object.keys(obj);
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var prop = keys_1[_i];
        if (typeof copyObj[prop] === "object" && !(copyObj[prop] instanceof Array)) {
          this.getFieldList(copyObj[prop], fields, prefix + prop + ".");
        } else {
          fields.push(prefix + prop);
        }
      }
      return fields;
    };
    DataUtil2.getObject = function(nameSpace, from) {
      if (!nameSpace) {
        return from;
      }
      if (!from) {
        return void 0;
      }
      if (nameSpace.indexOf(".") === -1) {
        if (!isNullOrUndefined(from[nameSpace])) {
          return from[nameSpace];
        } else {
          var lowerCaseNameSpace = nameSpace.charAt(0).toLowerCase() + nameSpace.slice(1);
          var upperCaseNameSpace = nameSpace.charAt(0).toUpperCase() + nameSpace.slice(1);
          if (!isNullOrUndefined(from[lowerCaseNameSpace])) {
            return from[lowerCaseNameSpace];
          } else if (!isNullOrUndefined(from[upperCaseNameSpace])) {
            return from[upperCaseNameSpace];
          } else {
            return null;
          }
        }
      }
      var value = from;
      var splits = nameSpace.split(".");
      for (var i = 0; i < splits.length; i++) {
        if (value == null) {
          break;
        }
        value = value[splits[i]];
        if (value === void 0) {
          var casing = splits[i].charAt(0).toUpperCase() + splits[i].slice(1);
          value = from[casing] || from[casing.charAt(0).toLowerCase() + casing.slice(1)] || null;
        }
        from = value;
      }
      return value;
    };
    DataUtil2.setValue = function(nameSpace, value, obj) {
      var keys2 = nameSpace.toString().split(".");
      var start = obj || {};
      var fromObj = start;
      var i;
      var length = keys2.length;
      var key;
      for (i = 0; i < length; i++) {
        key = keys2[i];
        if (i + 1 === length) {
          fromObj[key] = value === void 0 ? void 0 : value;
        } else if (isNullOrUndefined(fromObj[key])) {
          fromObj[key] = {};
        }
        fromObj = fromObj[key];
      }
      return start;
    };
    DataUtil2.sort = function(dataSource, field, comparer) {
      var _this = this;
      if (dataSource.length <= 1) {
        return dataSource;
      }
      return dataSource.slice().sort(function(a, b) {
        return comparer(_this.getVal([a], 0, field), _this.getVal([b], 0, field), a, b);
      });
    };
    DataUtil2.ignoreDiacritics = function(value) {
      if (typeof value !== "string") {
        return value;
      }
      var result = value.split("");
      var newValue = result.map(function(temp) {
        return temp in DataUtil2.diacritics ? DataUtil2.diacritics[temp] : temp;
      });
      return newValue.join("");
    };
    DataUtil2.ignoreDiacriticsForArrays = function(valueArray) {
      if (!Array.isArray(valueArray)) {
        return [];
      }
      return valueArray.map(function(item) {
        return DataUtil2.ignoreDiacritics(item);
      });
    };
    DataUtil2.merge = function(left, right, fieldName, comparer) {
      var result = [];
      var current;
      while (left.length > 0 || right.length > 0) {
        if (left.length > 0 && right.length > 0) {
          if (comparer) {
            current = comparer(this.getVal(left, 0, fieldName), this.getVal(right, 0, fieldName), left[0], right[0]) <= 0 ? left : right;
          } else {
            current = left[0][fieldName] < left[0][fieldName] ? left : right;
          }
        } else {
          current = left.length > 0 ? left : right;
        }
        result.push(current.shift());
      }
      return result;
    };
    DataUtil2.getVal = function(array, index, field) {
      return field ? this.getObject(field, array[index]) : array[index];
    };
    DataUtil2.toLowerCase = function(val) {
      if (isNullOrUndefined(val))
        return "";
      if (typeof val === "string")
        return val.toLowerCase();
      if (val instanceof Date)
        return val.toString().toLowerCase();
      return val.toString();
    };
    DataUtil2.callAdaptorFunction = function(adaptor, fnName, param1, param2) {
      if (fnName in adaptor) {
        var res = adaptor[fnName](param1, param2);
        if (!isNullOrUndefined(res)) {
          param1 = res;
        }
      }
      return param1;
    };
    DataUtil2.getAddParams = function(adp, dm, query) {
      var req = {};
      DataUtil2.callAdaptorFunction(adp, "addParams", {
        dm,
        query,
        params: query ? query.params : [],
        reqParams: req
      });
      return req;
    };
    DataUtil2.isPlainObject = function(obj) {
      return !!obj && obj.constructor === Object;
    };
    DataUtil2.isCors = function() {
      var xhr = null;
      var request = "XMLHttpRequest";
      try {
        xhr = new window[request]();
      } catch (e) {
      }
      return !!xhr && "withCredentials" in xhr;
    };
    DataUtil2.getGuid = function(prefix) {
      var hexs = "0123456789abcdef";
      var rand;
      return (prefix || "") + "00000000-0000-4000-0000-000000000000".replace(/0/g, function(val, i) {
        if ("crypto" in window && "getRandomValues" in crypto) {
          var arr = new Uint8Array(1);
          window.crypto.getRandomValues(arr);
          rand = arr[0] % 16 | 0;
        } else {
          rand = Math.random() * 16 | 0;
        }
        return hexs[i === 19 ? rand & 3 | 8 : rand];
      });
    };
    DataUtil2.isNull = function(val) {
      return val === void 0 || val === null;
    };
    DataUtil2.getItemFromComparer = function(array, field, comparer) {
      var keyVal;
      var current;
      var key;
      var i = 0;
      var castRequired = typeof DataUtil2.getVal(array, 0, field) === "string";
      if (array.length) {
        while (isNullOrUndefined(keyVal) && i < array.length) {
          keyVal = DataUtil2.getVal(array, i, field);
          key = array[i++];
        }
      }
      for (; i < array.length; i++) {
        current = DataUtil2.getVal(array, i, field);
        if (isNullOrUndefined(current)) {
          continue;
        }
        if (castRequired) {
          keyVal = +keyVal;
          current = +current;
        }
        if (comparer(keyVal, current) > 0) {
          keyVal = current;
          key = array[i];
        }
      }
      return key;
    };
    DataUtil2.distinct = function(json, fieldName, requiresCompleteRecord) {
      requiresCompleteRecord = isNullOrUndefined(requiresCompleteRecord) ? false : requiresCompleteRecord;
      var result = [];
      var val;
      var tmp = {};
      json.forEach(function(data, index) {
        val = typeof json[index] === "object" ? DataUtil2.getVal(json, index, fieldName) : json[index];
        if (!(val in tmp)) {
          result.push(!requiresCompleteRecord ? val : json[index]);
          tmp[val] = 1;
        }
      });
      return result;
    };
    DataUtil2.processData = function(dm, records) {
      var query = this.prepareQuery(dm);
      var sampledata = new DataManager(records);
      if (dm.requiresCounts) {
        query.requiresCount();
      }
      var result = sampledata.executeLocal(query);
      var returnValue = {
        result: dm.requiresCounts ? result.result : result,
        count: result.count,
        aggregates: JSON.stringify(result.aggregates)
      };
      return dm.requiresCounts ? returnValue : result;
    };
    DataUtil2.prepareQuery = function(dm) {
      var _this = this;
      var query = new Query();
      if (dm.select) {
        query.select(dm.select);
      }
      if (dm.where) {
        var where = DataUtil2.parse.parseJson(dm.where);
        where.filter(function(pred) {
          if (isNullOrUndefined(pred.condition)) {
            query.where(pred.field, pred.operator, pred.value, pred.ignoreCase, pred.ignoreAccent);
          } else {
            var predicateList = [];
            if (pred.field) {
              predicateList.push(new Predicate$1(pred.field, pred.operator, pred.value, pred.ignoreCase, pred.ignoreAccent));
            } else {
              predicateList = predicateList.concat(_this.getPredicate(pred.predicates));
            }
            if (pred.condition === "or") {
              query.where(Predicate$1.or(predicateList));
            } else if (pred.condition === "and") {
              query.where(Predicate$1.and(predicateList));
            }
          }
        });
      }
      if (dm.search) {
        var search = DataUtil2.parse.parseJson(dm.search);
        search.filter(function(e) {
          return query.search(
            e.key,
            e.fields,
            e["operator"],
            // tslint:disable-next-line:no-string-literal
            e["ignoreCase"],
            e["ignoreAccent"]
          );
        });
      }
      if (dm.aggregates) {
        dm.aggregates.filter(function(e) {
          return query.aggregate(e.type, e.field);
        });
      }
      if (dm.sorted) {
        dm.sorted.filter(function(e) {
          return query.sortBy(e.name, e.direction);
        });
      }
      if (dm.skip) {
        query.skip(dm.skip);
      }
      if (dm.take) {
        query.take(dm.take);
      }
      if (dm.group) {
        dm.group.filter(function(grp) {
          return query.group(grp);
        });
      }
      return query;
    };
    DataUtil2.getPredicate = function(pred) {
      var mainPred = [];
      for (var i = 0; i < pred.length; i++) {
        var e = pred[i];
        if (e.field) {
          mainPred.push(new Predicate$1(e.field, e.operator, e.value, e.ignoreCase, e.ignoreAccent));
        } else {
          var childPred = [];
          var cpre = this.getPredicate(e.predicates);
          for (var _i = 0, _a = Object.keys(cpre); _i < _a.length; _i++) {
            var prop = _a[_i];
            childPred.push(cpre[prop]);
          }
          mainPred.push(e.condition === "or" ? Predicate$1.or(childPred) : Predicate$1.and(childPred));
        }
      }
      return mainPred;
    };
    DataUtil2.serverTimezoneOffset = null;
    DataUtil2.timeZoneHandling = true;
    DataUtil2.throwError = function(error) {
      try {
        throw new Error(error);
      } catch (e) {
        throw e.message + "\n" + e.stack;
      }
    };
    DataUtil2.aggregates = {
      /**
       * Calculate sum of the given field in the data.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      sum: function(ds, field) {
        var result = 0;
        var val;
        var castRequired = typeof DataUtil2.getVal(ds, 0, field) !== "number";
        for (var i = 0; i < ds.length; i++) {
          val = DataUtil2.getVal(ds, i, field);
          if (!isNaN(val) && val !== null) {
            if (castRequired) {
              val = +val;
            }
            result += val;
          }
        }
        return result;
      },
      /**
       * Calculate average value of the given field in the data.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      average: function(ds, field) {
        return DataUtil2.aggregates.sum(ds, field) / ds.length;
      },
      /**
       * Returns the min value of the data based on the field.
       *
       * @param  {Object[]} ds
       * @param  {string|Function} field
       */
      min: function(ds, field) {
        var comparer;
        if (typeof field === "function") {
          comparer = field;
          field = null;
        }
        return DataUtil2.getObject(field, DataUtil2.getItemFromComparer(ds, field, comparer || DataUtil2.fnAscending));
      },
      /**
       * Returns the max value of the data based on the field.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       * @returns number
       */
      max: function(ds, field) {
        var comparer;
        if (typeof field === "function") {
          comparer = field;
          field = null;
        }
        return DataUtil2.getObject(field, DataUtil2.getItemFromComparer(ds, field, comparer || DataUtil2.fnDescending));
      },
      /**
       * Returns the total number of true value present in the data based on the given boolean field name.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      truecount: function(ds, field) {
        return new DataManager(ds).executeLocal(new Query().where(field, "equal", true, true)).length;
      },
      /**
       * Returns the total number of false value present in the data based on the given boolean field name.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      falsecount: function(ds, field) {
        return new DataManager(ds).executeLocal(new Query().where(field, "equal", false, true)).length;
      },
      /**
       * Returns the length of the given data.
       *
       * @param {Object[]} ds
       * @param {string} field?
       * @param field
       * @returns number
       */
      count: function(ds, field) {
        return ds.length;
      }
    };
    DataUtil2.operatorSymbols = {
      "<": "lessthan",
      ">": "greaterthan",
      "<=": "lessthanorequal",
      ">=": "greaterthanorequal",
      "==": "equal",
      "!=": "notequal",
      "*=": "contains",
      "$=": "endswith",
      "^=": "startswith"
    };
    DataUtil2.odBiOperator = {
      "<": " lt ",
      ">": " gt ",
      "<=": " le ",
      ">=": " ge ",
      "==": " eq ",
      "!=": " ne ",
      "lessthan": " lt ",
      "lessthanorequal": " le ",
      "greaterthan": " gt ",
      "greaterthanorequal": " ge ",
      "equal": " eq ",
      "notequal": " ne "
    };
    DataUtil2.odUniOperator = {
      "$=": "endswith",
      "^=": "startswith",
      "*=": "substringof",
      "endswith": "endswith",
      "startswith": "startswith",
      "contains": "substringof",
      "doesnotendwith": "not endswith",
      "doesnotstartwith": "not startswith",
      "doesnotcontain": "not substringof",
      "wildcard": "wildcard",
      "like": "like"
    };
    DataUtil2.odv4UniOperator = {
      "$=": "endswith",
      "^=": "startswith",
      "*=": "contains",
      "endswith": "endswith",
      "startswith": "startswith",
      "contains": "contains",
      "doesnotendwith": "not endswith",
      "doesnotstartwith": "not startswith",
      "doesnotcontain": "not contains",
      "wildcard": "wildcard",
      "like": "like"
    };
    DataUtil2.diacritics = {
      "Ⓐ": "A",
      "Ａ": "A",
      "À": "A",
      "Á": "A",
      "Â": "A",
      "Ầ": "A",
      "Ấ": "A",
      "Ẫ": "A",
      "Ẩ": "A",
      "Ã": "A",
      "Ā": "A",
      "Ă": "A",
      "Ằ": "A",
      "Ắ": "A",
      "Ẵ": "A",
      "Ẳ": "A",
      "Ȧ": "A",
      "Ǡ": "A",
      "Ä": "A",
      "Ǟ": "A",
      "Ả": "A",
      "Å": "A",
      "Ǻ": "A",
      "Ǎ": "A",
      "Ȁ": "A",
      "Ȃ": "A",
      "Ạ": "A",
      "Ậ": "A",
      "Ặ": "A",
      "Ḁ": "A",
      "Ą": "A",
      "Ⱥ": "A",
      "Ɐ": "A",
      "Ꜳ": "AA",
      "Æ": "AE",
      "Ǽ": "AE",
      "Ǣ": "AE",
      "Ꜵ": "AO",
      "Ꜷ": "AU",
      "Ꜹ": "AV",
      "Ꜻ": "AV",
      "Ꜽ": "AY",
      "Ⓑ": "B",
      "Ｂ": "B",
      "Ḃ": "B",
      "Ḅ": "B",
      "Ḇ": "B",
      "Ƀ": "B",
      "Ƃ": "B",
      "Ɓ": "B",
      "Ⓒ": "C",
      "Ｃ": "C",
      "Ć": "C",
      "Ĉ": "C",
      "Ċ": "C",
      "Č": "C",
      "Ç": "C",
      "Ḉ": "C",
      "Ƈ": "C",
      "Ȼ": "C",
      "Ꜿ": "C",
      "Ⓓ": "D",
      "Ｄ": "D",
      "Ḋ": "D",
      "Ď": "D",
      "Ḍ": "D",
      "Ḑ": "D",
      "Ḓ": "D",
      "Ḏ": "D",
      "Đ": "D",
      "Ƌ": "D",
      "Ɗ": "D",
      "Ɖ": "D",
      "Ꝺ": "D",
      "Ǳ": "DZ",
      "Ǆ": "DZ",
      "ǲ": "Dz",
      "ǅ": "Dz",
      "Ⓔ": "E",
      "Ｅ": "E",
      "È": "E",
      "É": "E",
      "Ê": "E",
      "Ề": "E",
      "Ế": "E",
      "Ễ": "E",
      "Ể": "E",
      "Ẽ": "E",
      "Ē": "E",
      "Ḕ": "E",
      "Ḗ": "E",
      "Ĕ": "E",
      "Ė": "E",
      "Ë": "E",
      "Ẻ": "E",
      "Ě": "E",
      "Ȅ": "E",
      "Ȇ": "E",
      "Ẹ": "E",
      "Ệ": "E",
      "Ȩ": "E",
      "Ḝ": "E",
      "Ę": "E",
      "Ḙ": "E",
      "Ḛ": "E",
      "Ɛ": "E",
      "Ǝ": "E",
      "Ⓕ": "F",
      "Ｆ": "F",
      "Ḟ": "F",
      "Ƒ": "F",
      "Ꝼ": "F",
      "Ⓖ": "G",
      "Ｇ": "G",
      "Ǵ": "G",
      "Ĝ": "G",
      "Ḡ": "G",
      "Ğ": "G",
      "Ġ": "G",
      "Ǧ": "G",
      "Ģ": "G",
      "Ǥ": "G",
      "Ɠ": "G",
      "Ꞡ": "G",
      "Ᵹ": "G",
      "Ꝿ": "G",
      "Ⓗ": "H",
      "Ｈ": "H",
      "Ĥ": "H",
      "Ḣ": "H",
      "Ḧ": "H",
      "Ȟ": "H",
      "Ḥ": "H",
      "Ḩ": "H",
      "Ḫ": "H",
      "Ħ": "H",
      "Ⱨ": "H",
      "Ⱶ": "H",
      "Ɥ": "H",
      "Ⓘ": "I",
      "Ｉ": "I",
      "Ì": "I",
      "Í": "I",
      "Î": "I",
      "Ĩ": "I",
      "Ī": "I",
      "Ĭ": "I",
      "İ": "I",
      "Ï": "I",
      "Ḯ": "I",
      "Ỉ": "I",
      "Ǐ": "I",
      "Ȉ": "I",
      "Ȋ": "I",
      "Ị": "I",
      "Į": "I",
      "Ḭ": "I",
      "Ɨ": "I",
      "Ⓙ": "J",
      "Ｊ": "J",
      "Ĵ": "J",
      "Ɉ": "J",
      "Ⓚ": "K",
      "Ｋ": "K",
      "Ḱ": "K",
      "Ǩ": "K",
      "Ḳ": "K",
      "Ķ": "K",
      "Ḵ": "K",
      "Ƙ": "K",
      "Ⱪ": "K",
      "Ꝁ": "K",
      "Ꝃ": "K",
      "Ꝅ": "K",
      "Ꞣ": "K",
      "Ⓛ": "L",
      "Ｌ": "L",
      "Ŀ": "L",
      "Ĺ": "L",
      "Ľ": "L",
      "Ḷ": "L",
      "Ḹ": "L",
      "Ļ": "L",
      "Ḽ": "L",
      "Ḻ": "L",
      "Ł": "L",
      "Ƚ": "L",
      "Ɫ": "L",
      "Ⱡ": "L",
      "Ꝉ": "L",
      "Ꝇ": "L",
      "Ꞁ": "L",
      "Ǉ": "LJ",
      "ǈ": "Lj",
      "Ⓜ": "M",
      "Ｍ": "M",
      "Ḿ": "M",
      "Ṁ": "M",
      "Ṃ": "M",
      "Ɱ": "M",
      "Ɯ": "M",
      "Ⓝ": "N",
      "Ｎ": "N",
      "Ǹ": "N",
      "Ń": "N",
      "Ñ": "N",
      "Ṅ": "N",
      "Ň": "N",
      "Ṇ": "N",
      "Ņ": "N",
      "Ṋ": "N",
      "Ṉ": "N",
      "Ƞ": "N",
      "Ɲ": "N",
      "Ꞑ": "N",
      "Ꞥ": "N",
      "Ǌ": "NJ",
      "ǋ": "Nj",
      "Ⓞ": "O",
      "Ｏ": "O",
      "Ò": "O",
      "Ó": "O",
      "Ô": "O",
      "Ồ": "O",
      "Ố": "O",
      "Ỗ": "O",
      "Ổ": "O",
      "Õ": "O",
      "Ṍ": "O",
      "Ȭ": "O",
      "Ṏ": "O",
      "Ō": "O",
      "Ṑ": "O",
      "Ṓ": "O",
      "Ŏ": "O",
      "Ȯ": "O",
      "Ȱ": "O",
      "Ö": "O",
      "Ȫ": "O",
      "Ỏ": "O",
      "Ő": "O",
      "Ǒ": "O",
      "Ȍ": "O",
      "Ȏ": "O",
      "Ơ": "O",
      "Ờ": "O",
      "Ớ": "O",
      "Ỡ": "O",
      "Ở": "O",
      "Ợ": "O",
      "Ọ": "O",
      "Ộ": "O",
      "Ǫ": "O",
      "Ǭ": "O",
      "Ø": "O",
      "Ǿ": "O",
      "Ɔ": "O",
      "Ɵ": "O",
      "Ꝋ": "O",
      "Ꝍ": "O",
      "Ƣ": "OI",
      "Ꝏ": "OO",
      "Ȣ": "OU",
      "Ⓟ": "P",
      "Ｐ": "P",
      "Ṕ": "P",
      "Ṗ": "P",
      "Ƥ": "P",
      "Ᵽ": "P",
      "Ꝑ": "P",
      "Ꝓ": "P",
      "Ꝕ": "P",
      "Ⓠ": "Q",
      "Ｑ": "Q",
      "Ꝗ": "Q",
      "Ꝙ": "Q",
      "Ɋ": "Q",
      "Ⓡ": "R",
      "Ｒ": "R",
      "Ŕ": "R",
      "Ṙ": "R",
      "Ř": "R",
      "Ȑ": "R",
      "Ȓ": "R",
      "Ṛ": "R",
      "Ṝ": "R",
      "Ŗ": "R",
      "Ṟ": "R",
      "Ɍ": "R",
      "Ɽ": "R",
      "Ꝛ": "R",
      "Ꞧ": "R",
      "Ꞃ": "R",
      "Ⓢ": "S",
      "Ｓ": "S",
      "ẞ": "S",
      "Ś": "S",
      "Ṥ": "S",
      "Ŝ": "S",
      "Ṡ": "S",
      "Š": "S",
      "Ṧ": "S",
      "Ṣ": "S",
      "Ṩ": "S",
      "Ș": "S",
      "Ş": "S",
      "Ȿ": "S",
      "Ꞩ": "S",
      "Ꞅ": "S",
      "Ⓣ": "T",
      "Ｔ": "T",
      "Ṫ": "T",
      "Ť": "T",
      "Ṭ": "T",
      "Ț": "T",
      "Ţ": "T",
      "Ṱ": "T",
      "Ṯ": "T",
      "Ŧ": "T",
      "Ƭ": "T",
      "Ʈ": "T",
      "Ⱦ": "T",
      "Ꞇ": "T",
      "Ꜩ": "TZ",
      "Ⓤ": "U",
      "Ｕ": "U",
      "Ù": "U",
      "Ú": "U",
      "Û": "U",
      "Ũ": "U",
      "Ṹ": "U",
      "Ū": "U",
      "Ṻ": "U",
      "Ŭ": "U",
      "Ü": "U",
      "Ǜ": "U",
      "Ǘ": "U",
      "Ǖ": "U",
      "Ǚ": "U",
      "Ủ": "U",
      "Ů": "U",
      "Ű": "U",
      "Ǔ": "U",
      "Ȕ": "U",
      "Ȗ": "U",
      "Ư": "U",
      "Ừ": "U",
      "Ứ": "U",
      "Ữ": "U",
      "Ử": "U",
      "Ự": "U",
      "Ụ": "U",
      "Ṳ": "U",
      "Ų": "U",
      "Ṷ": "U",
      "Ṵ": "U",
      "Ʉ": "U",
      "Ⓥ": "V",
      "Ｖ": "V",
      "Ṽ": "V",
      "Ṿ": "V",
      "Ʋ": "V",
      "Ꝟ": "V",
      "Ʌ": "V",
      "Ꝡ": "VY",
      "Ⓦ": "W",
      "Ｗ": "W",
      "Ẁ": "W",
      "Ẃ": "W",
      "Ŵ": "W",
      "Ẇ": "W",
      "Ẅ": "W",
      "Ẉ": "W",
      "Ⱳ": "W",
      "Ⓧ": "X",
      "Ｘ": "X",
      "Ẋ": "X",
      "Ẍ": "X",
      "Ⓨ": "Y",
      "Ｙ": "Y",
      "Ỳ": "Y",
      "Ý": "Y",
      "Ŷ": "Y",
      "Ỹ": "Y",
      "Ȳ": "Y",
      "Ẏ": "Y",
      "Ÿ": "Y",
      "Ỷ": "Y",
      "Ỵ": "Y",
      "Ƴ": "Y",
      "Ɏ": "Y",
      "Ỿ": "Y",
      "Ⓩ": "Z",
      "Ｚ": "Z",
      "Ź": "Z",
      "Ẑ": "Z",
      "Ż": "Z",
      "Ž": "Z",
      "Ẓ": "Z",
      "Ẕ": "Z",
      "Ƶ": "Z",
      "Ȥ": "Z",
      "Ɀ": "Z",
      "Ⱬ": "Z",
      "Ꝣ": "Z",
      "ⓐ": "a",
      "ａ": "a",
      "ẚ": "a",
      "à": "a",
      "á": "a",
      "â": "a",
      "ầ": "a",
      "ấ": "a",
      "ẫ": "a",
      "ẩ": "a",
      "ã": "a",
      "ā": "a",
      "ă": "a",
      "ằ": "a",
      "ắ": "a",
      "ẵ": "a",
      "ẳ": "a",
      "ȧ": "a",
      "ǡ": "a",
      "ä": "a",
      "ǟ": "a",
      "ả": "a",
      "å": "a",
      "ǻ": "a",
      "ǎ": "a",
      "ȁ": "a",
      "ȃ": "a",
      "ạ": "a",
      "ậ": "a",
      "ặ": "a",
      "ḁ": "a",
      "ą": "a",
      "ⱥ": "a",
      "ɐ": "a",
      "ꜳ": "aa",
      "æ": "ae",
      "ǽ": "ae",
      "ǣ": "ae",
      "ꜵ": "ao",
      "ꜷ": "au",
      "ꜹ": "av",
      "ꜻ": "av",
      "ꜽ": "ay",
      "ⓑ": "b",
      "ｂ": "b",
      "ḃ": "b",
      "ḅ": "b",
      "ḇ": "b",
      "ƀ": "b",
      "ƃ": "b",
      "ɓ": "b",
      "ⓒ": "c",
      "ｃ": "c",
      "ć": "c",
      "ĉ": "c",
      "ċ": "c",
      "č": "c",
      "ç": "c",
      "ḉ": "c",
      "ƈ": "c",
      "ȼ": "c",
      "ꜿ": "c",
      "ↄ": "c",
      "ⓓ": "d",
      "ｄ": "d",
      "ḋ": "d",
      "ď": "d",
      "ḍ": "d",
      "ḑ": "d",
      "ḓ": "d",
      "ḏ": "d",
      "đ": "d",
      "ƌ": "d",
      "ɖ": "d",
      "ɗ": "d",
      "ꝺ": "d",
      "ǳ": "dz",
      "ǆ": "dz",
      "ⓔ": "e",
      "ｅ": "e",
      "è": "e",
      "é": "e",
      "ê": "e",
      "ề": "e",
      "ế": "e",
      "ễ": "e",
      "ể": "e",
      "ẽ": "e",
      "ē": "e",
      "ḕ": "e",
      "ḗ": "e",
      "ĕ": "e",
      "ė": "e",
      "ë": "e",
      "ẻ": "e",
      "ě": "e",
      "ȅ": "e",
      "ȇ": "e",
      "ẹ": "e",
      "ệ": "e",
      "ȩ": "e",
      "ḝ": "e",
      "ę": "e",
      "ḙ": "e",
      "ḛ": "e",
      "ɇ": "e",
      "ɛ": "e",
      "ǝ": "e",
      "ⓕ": "f",
      "ｆ": "f",
      "ḟ": "f",
      "ƒ": "f",
      "ꝼ": "f",
      "ⓖ": "g",
      "ｇ": "g",
      "ǵ": "g",
      "ĝ": "g",
      "ḡ": "g",
      "ğ": "g",
      "ġ": "g",
      "ǧ": "g",
      "ģ": "g",
      "ǥ": "g",
      "ɠ": "g",
      "ꞡ": "g",
      "ᵹ": "g",
      "ꝿ": "g",
      "ⓗ": "h",
      "ｈ": "h",
      "ĥ": "h",
      "ḣ": "h",
      "ḧ": "h",
      "ȟ": "h",
      "ḥ": "h",
      "ḩ": "h",
      "ḫ": "h",
      "ẖ": "h",
      "ħ": "h",
      "ⱨ": "h",
      "ⱶ": "h",
      "ɥ": "h",
      "ƕ": "hv",
      "ⓘ": "i",
      "ｉ": "i",
      "ì": "i",
      "í": "i",
      "î": "i",
      "ĩ": "i",
      "ī": "i",
      "ĭ": "i",
      "ï": "i",
      "ḯ": "i",
      "ỉ": "i",
      "ǐ": "i",
      "ȉ": "i",
      "ȋ": "i",
      "ị": "i",
      "į": "i",
      "ḭ": "i",
      "ɨ": "i",
      "ı": "i",
      "ⓙ": "j",
      "ｊ": "j",
      "ĵ": "j",
      "ǰ": "j",
      "ɉ": "j",
      "ⓚ": "k",
      "ｋ": "k",
      "ḱ": "k",
      "ǩ": "k",
      "ḳ": "k",
      "ķ": "k",
      "ḵ": "k",
      "ƙ": "k",
      "ⱪ": "k",
      "ꝁ": "k",
      "ꝃ": "k",
      "ꝅ": "k",
      "ꞣ": "k",
      "ⓛ": "l",
      "ｌ": "l",
      "ŀ": "l",
      "ĺ": "l",
      "ľ": "l",
      "ḷ": "l",
      "ḹ": "l",
      "ļ": "l",
      "ḽ": "l",
      "ḻ": "l",
      "ſ": "l",
      "ł": "l",
      "ƚ": "l",
      "ɫ": "l",
      "ⱡ": "l",
      "ꝉ": "l",
      "ꞁ": "l",
      "ꝇ": "l",
      "ǉ": "lj",
      "ⓜ": "m",
      "ｍ": "m",
      "ḿ": "m",
      "ṁ": "m",
      "ṃ": "m",
      "ɱ": "m",
      "ɯ": "m",
      "ⓝ": "n",
      "ｎ": "n",
      "ǹ": "n",
      "ń": "n",
      "ñ": "n",
      "ṅ": "n",
      "ň": "n",
      "ṇ": "n",
      "ņ": "n",
      "ṋ": "n",
      "ṉ": "n",
      "ƞ": "n",
      "ɲ": "n",
      "ŉ": "n",
      "ꞑ": "n",
      "ꞥ": "n",
      "ǌ": "nj",
      "ⓞ": "o",
      "ｏ": "o",
      "ò": "o",
      "ó": "o",
      "ô": "o",
      "ồ": "o",
      "ố": "o",
      "ỗ": "o",
      "ổ": "o",
      "õ": "o",
      "ṍ": "o",
      "ȭ": "o",
      "ṏ": "o",
      "ō": "o",
      "ṑ": "o",
      "ṓ": "o",
      "ŏ": "o",
      "ȯ": "o",
      "ȱ": "o",
      "ö": "o",
      "ȫ": "o",
      "ỏ": "o",
      "ő": "o",
      "ǒ": "o",
      "ȍ": "o",
      "ȏ": "o",
      "ơ": "o",
      "ờ": "o",
      "ớ": "o",
      "ỡ": "o",
      "ở": "o",
      "ợ": "o",
      "ọ": "o",
      "ộ": "o",
      "ǫ": "o",
      "ǭ": "o",
      "ø": "o",
      "ǿ": "o",
      "ɔ": "o",
      "ꝋ": "o",
      "ꝍ": "o",
      "ɵ": "o",
      "ƣ": "oi",
      "ȣ": "ou",
      "ꝏ": "oo",
      "ⓟ": "p",
      "ｐ": "p",
      "ṕ": "p",
      "ṗ": "p",
      "ƥ": "p",
      "ᵽ": "p",
      "ꝑ": "p",
      "ꝓ": "p",
      "ꝕ": "p",
      "ⓠ": "q",
      "ｑ": "q",
      "ɋ": "q",
      "ꝗ": "q",
      "ꝙ": "q",
      "ⓡ": "r",
      "ｒ": "r",
      "ŕ": "r",
      "ṙ": "r",
      "ř": "r",
      "ȑ": "r",
      "ȓ": "r",
      "ṛ": "r",
      "ṝ": "r",
      "ŗ": "r",
      "ṟ": "r",
      "ɍ": "r",
      "ɽ": "r",
      "ꝛ": "r",
      "ꞧ": "r",
      "ꞃ": "r",
      "ⓢ": "s",
      "ｓ": "s",
      "ß": "s",
      "ś": "s",
      "ṥ": "s",
      "ŝ": "s",
      "ṡ": "s",
      "š": "s",
      "ṧ": "s",
      "ṣ": "s",
      "ṩ": "s",
      "ș": "s",
      "ş": "s",
      "ȿ": "s",
      "ꞩ": "s",
      "ꞅ": "s",
      "ẛ": "s",
      "ⓣ": "t",
      "ｔ": "t",
      "ṫ": "t",
      "ẗ": "t",
      "ť": "t",
      "ṭ": "t",
      "ț": "t",
      "ţ": "t",
      "ṱ": "t",
      "ṯ": "t",
      "ŧ": "t",
      "ƭ": "t",
      "ʈ": "t",
      "ⱦ": "t",
      "ꞇ": "t",
      "ꜩ": "tz",
      "ⓤ": "u",
      "ｕ": "u",
      "ù": "u",
      "ú": "u",
      "û": "u",
      "ũ": "u",
      "ṹ": "u",
      "ū": "u",
      "ṻ": "u",
      "ŭ": "u",
      "ü": "u",
      "ǜ": "u",
      "ǘ": "u",
      "ǖ": "u",
      "ǚ": "u",
      "ủ": "u",
      "ů": "u",
      "ű": "u",
      "ǔ": "u",
      "ȕ": "u",
      "ȗ": "u",
      "ư": "u",
      "ừ": "u",
      "ứ": "u",
      "ữ": "u",
      "ử": "u",
      "ự": "u",
      "ụ": "u",
      "ṳ": "u",
      "ų": "u",
      "ṷ": "u",
      "ṵ": "u",
      "ʉ": "u",
      "ⓥ": "v",
      "ｖ": "v",
      "ṽ": "v",
      "ṿ": "v",
      "ʋ": "v",
      "ꝟ": "v",
      "ʌ": "v",
      "ꝡ": "vy",
      "ⓦ": "w",
      "ｗ": "w",
      "ẁ": "w",
      "ẃ": "w",
      "ŵ": "w",
      "ẇ": "w",
      "ẅ": "w",
      "ẘ": "w",
      "ẉ": "w",
      "ⱳ": "w",
      "ⓧ": "x",
      "ｘ": "x",
      "ẋ": "x",
      "ẍ": "x",
      "ⓨ": "y",
      "ｙ": "y",
      "ỳ": "y",
      "ý": "y",
      "ŷ": "y",
      "ỹ": "y",
      "ȳ": "y",
      "ẏ": "y",
      "ÿ": "y",
      "ỷ": "y",
      "ẙ": "y",
      "ỵ": "y",
      "ƴ": "y",
      "ɏ": "y",
      "ỿ": "y",
      "ⓩ": "z",
      "ｚ": "z",
      "ź": "z",
      "ẑ": "z",
      "ż": "z",
      "ž": "z",
      "ẓ": "z",
      "ẕ": "z",
      "ƶ": "z",
      "ȥ": "z",
      "ɀ": "z",
      "ⱬ": "z",
      "ꝣ": "z",
      "Ά": "Α",
      "Έ": "Ε",
      "Ή": "Η",
      "Ί": "Ι",
      "Ϊ": "Ι",
      "Ό": "Ο",
      "Ύ": "Υ",
      "Ϋ": "Υ",
      "Ώ": "Ω",
      "ά": "α",
      "έ": "ε",
      "ή": "η",
      "ί": "ι",
      "ϊ": "ι",
      "ΐ": "ι",
      "ό": "ο",
      "ύ": "υ",
      "ϋ": "υ",
      "ΰ": "υ",
      "ω": "ω",
      "ς": "σ"
    };
    DataUtil2.fnOperators = {
      /**
       * Returns true when the actual input is equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param {boolean} ignoreAccent?
       * @param ignoreCase
       * @param ignoreAccent
       */
      equal: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) === DataUtil2.toLowerCase(expected);
        }
        return actual === expected;
      },
      /**
       * Returns true when the actual input is not equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      notequal: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        return !DataUtil2.fnOperators.equal(actual, expected, ignoreCase);
      },
      /**
       * Returns true when the actual input is less than to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      lessthan: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) < DataUtil2.toLowerCase(expected);
        }
        if (isNullOrUndefined(actual)) {
          actual = void 0;
        }
        return actual < expected;
      },
      /**
       * Returns true when the actual input is greater than to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      greaterthan: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) > DataUtil2.toLowerCase(expected);
        }
        return actual > expected;
      },
      /**
       * Returns true when the actual input is less than or equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      lessthanorequal: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) <= DataUtil2.toLowerCase(expected);
        }
        if (isNullOrUndefined(actual)) {
          actual = void 0;
        }
        return actual <= expected;
      },
      /**
       * Returns true when the actual input is greater than or equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      greaterthanorequal: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) >= DataUtil2.toLowerCase(expected);
        }
        if (isNullOrUndefined(actual)) {
          actual = void 0;
        }
        return actual >= expected;
      },
      /**
       * Returns true when the actual input contains the given string.
       *
       * @param {string|number} actual
       * @param {string|number} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      contains: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && DataUtil2.toLowerCase(actual).indexOf(DataUtil2.toLowerCase(expected)) !== -1;
        }
        return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && actual.toString().indexOf(expected) !== -1;
      },
      /**
       * Returns true when the actual input not contains the given string.
       *
       * @param  {string|number} actual
       * @param  {string|number} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotcontain: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && DataUtil2.toLowerCase(actual).indexOf(DataUtil2.toLowerCase(expected)) === -1;
        }
        return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && actual.toString().indexOf(expected) === -1;
      },
      /**
       * Returns true when the given input value is not null.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnotnull: function(actual) {
        return actual !== null && actual !== void 0;
      },
      /**
       * Returns true when the given input value is null.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnull: function(actual) {
        return actual === null || actual === void 0;
      },
      /**
       * Returns true when the actual input starts with the given string
       *
       * @param {string} actual
       * @param {string} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      startswith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.startsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.startsWith(actual, expected);
      },
      /**
       * Returns true when the actual input not starts with the given string
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotstartwith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.notStartsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.notStartsWith(actual, expected);
      },
      /**
       * Returns true when the actual input like with the given string.
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      like: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.like(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.like(actual, expected);
      },
      /**
       * Returns true when the given input value is empty.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isempty: function(actual) {
        return actual === void 0 || actual === "";
      },
      /**
       * Returns true when the given input value is not empty.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnotempty: function(actual) {
        return actual !== void 0 && actual !== "";
      },
      /**
       * Returns true when the actual input pattern(wildcard) matches with the given string.
       *
       * @param  {string|Date} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      wildcard: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return (actual || typeof actual === "boolean") && expected && typeof actual !== "object" && DataUtil2.wildCard(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return (actual || typeof actual === "boolean") && expected && DataUtil2.wildCard(actual, expected);
      },
      /**
       * Returns true when the actual input ends with the given string.
       *
       * @param {string} actual
       * @param {string} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      endswith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.endsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.endsWith(actual, expected);
      },
      /**
       * Returns true when the actual input not ends with the given string.
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotendwith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.notEndsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.notEndsWith(actual, expected);
      },
      /**
       * It will return the filter operator based on the filter symbol.
       *
       * @param  {string} operator
       * @hidden
       */
      processSymbols: function(operator) {
        var fnName = DataUtil2.operatorSymbols[operator];
        if (fnName) {
          var fn = DataUtil2.fnOperators[fnName];
          return fn;
        }
        return DataUtil2.throwError("Query - Process Operator : Invalid operator");
      },
      /**
       * It will return the valid filter operator based on the specified operators.
       *
       * @param  {string} operator
       * @hidden
       */
      processOperator: function(operator) {
        var fn = DataUtil2.fnOperators[operator];
        if (fn) {
          return fn;
        }
        return DataUtil2.fnOperators.processSymbols(operator);
      },
      /**
       * Checks if the specified value exists in the given array, with optional case and accent insensitivity.
       *
       * @param {string | number} actual - The value to check.
       * @param {Array<string | number>} expectedArray - The array to search within.
       * @param {boolean} [ignoreCase] - Whether to perform a case-insensitive comparison.
       * @param {boolean} [ignoreAccent] - Whether to ignore accents/diacritics.
       * @returns {boolean} `true` if the value is found, otherwise `false`.
       */
      in: function(actual, expectedArray, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expectedArray = DataUtil2.ignoreDiacriticsForArrays(expectedArray);
        }
        if (ignoreCase) {
          return !isNullOrUndefined(actual) && expectedArray && expectedArray.length > 0 && expectedArray.map(function(item) {
            return DataUtil2.toLowerCase(item);
          }).indexOf(DataUtil2.toLowerCase(actual)) > -1;
        }
        if (actual instanceof Date) {
          return !isNullOrUndefined(actual) && expectedArray && expectedArray.length > 0 && Array.isArray(expectedArray) && expectedArray.some(function(item) {
            return item instanceof Date && item.getTime() === actual.getTime();
          });
        }
        return !isNullOrUndefined(actual) && expectedArray && expectedArray.length > 0 && expectedArray.indexOf(actual) > -1;
      },
      /**
       * Checks if the specified value is not present in the given array, with optional case and accent insensitivity.
       *
       * @param {string | number} actual - The value to check.
       * @param {Array<string | number>} expectedArray - The array to search within.
       * @param {boolean} [ignoreCase] - Whether to perform a case-insensitive comparison.
       * @param {boolean} [ignoreAccent] - Whether to ignore accents/diacritics.
       * @returns {boolean} `true` if the value is not found, otherwise `false`.
       */
      notin: function(actual, expectedArray, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expectedArray = DataUtil2.ignoreDiacriticsForArrays(expectedArray);
        }
        if (ignoreCase) {
          return !isNullOrUndefined(actual) && expectedArray && expectedArray.length > 0 && expectedArray.map(function(item) {
            return DataUtil2.toLowerCase(item);
          }).indexOf(DataUtil2.toLowerCase(actual)) === -1;
        }
        if (actual instanceof Date) {
          return !isNullOrUndefined(actual) && expectedArray && expectedArray.length > 0 && Array.isArray(expectedArray) && expectedArray.every(function(item) {
            return !(item instanceof Date) || item.getTime() !== actual.getTime();
          });
        }
        return !isNullOrUndefined(actual) && expectedArray && expectedArray.length > 0 && expectedArray.indexOf(actual) === -1;
      }
    };
    DataUtil2.parse = {
      /**
       * Parse the given string to the plain JavaScript object.
       *
       * @param  {string|Object|Object[]} jsonText
       */
      parseJson: function(jsonText) {
        if (typeof jsonText === "string" && (/^[\s]*\[|^[\s]*\{(.)+:/g.test(jsonText) || jsonText.indexOf('"') === -1)) {
          jsonText = JSON.parse(jsonText, DataUtil2.parse.jsonReviver);
        } else if (jsonText instanceof Array) {
          DataUtil2.parse.iterateAndReviveArray(jsonText);
        } else if (typeof jsonText === "object" && jsonText !== null) {
          DataUtil2.parse.iterateAndReviveJson(jsonText);
        }
        return jsonText;
      },
      /**
       * It will perform on array of values.
       *
       * @param  {string[]|Object[]} array
       * @hidden
       */
      iterateAndReviveArray: function(array) {
        for (var i = 0; i < array.length; i++) {
          if (typeof array[i] === "object" && array[i] !== null) {
            DataUtil2.parse.iterateAndReviveJson(array[i]);
          } else if (typeof array[i] === "string" && (!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(array[i]) || array[i].toString().indexOf('"') === -1)) {
            array[i] = DataUtil2.parse.jsonReviver("", array[i]);
          } else {
            array[i] = DataUtil2.parse.parseJson(array[i]);
          }
        }
      },
      /**
       * It will perform on JSON values
       *
       * @param  {JSON} json
       * @hidden
       */
      iterateAndReviveJson: function(json) {
        var value;
        var keys2 = Object.keys(json);
        for (var _i = 0, keys_2 = keys2; _i < keys_2.length; _i++) {
          var prop = keys_2[_i];
          if (DataUtil2.startsWith(prop, "__")) {
            continue;
          }
          value = json[prop];
          if (typeof value === "object") {
            if (value instanceof Array) {
              DataUtil2.parse.iterateAndReviveArray(value);
            } else if (value) {
              DataUtil2.parse.iterateAndReviveJson(value);
            }
          } else {
            json[prop] = DataUtil2.parse.jsonReviver(json[prop], value);
          }
        }
      },
      /**
       * It will perform on JSON values
       *
       * @param  {string} field
       * @param  {string|Date} value
       * @hidden
       */
      jsonReviver: function(field, value) {
        if (typeof value === "string") {
          var ms = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(value);
          var offSet = DataUtil2.timeZoneHandling ? DataUtil2.serverTimezoneOffset : null;
          if (ms) {
            return DataUtil2.dateParse.toTimeZone(new Date(parseInt(ms[1], 10)), offSet, true);
          } else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(value)) {
            var isUTC = value.indexOf("Z") > -1 || value.indexOf("z") > -1;
            var arr = value.split(/[^0-9.]/);
            if (isUTC) {
              if (arr[5].indexOf(".") > -1) {
                var secondsMs = arr[5].split(".");
                arr[5] = secondsMs[0];
                arr[6] = new Date(value).getUTCMilliseconds().toString();
              } else {
                arr[6] = "00";
              }
              value = DataUtil2.dateParse.toTimeZone(new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5] ? arr[5] : "00", 10), parseInt(arr[6], 10)), DataUtil2.serverTimezoneOffset, false);
            } else {
              var utcFormat = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5] ? arr[5] : "00", 10));
              var hrs = parseInt(arr[6], 10);
              var mins = parseInt(arr[7], 10);
              if (isNaN(hrs) && isNaN(mins)) {
                return utcFormat;
              }
              if (value.indexOf("+") > -1) {
                utcFormat.setHours(utcFormat.getHours() - hrs, utcFormat.getMinutes() - mins);
              } else {
                utcFormat.setHours(utcFormat.getHours() + hrs, utcFormat.getMinutes() + mins);
              }
              value = DataUtil2.dateParse.toTimeZone(utcFormat, DataUtil2.serverTimezoneOffset, false);
            }
            if (DataUtil2.serverTimezoneOffset == null) {
              value = DataUtil2.dateParse.addSelfOffset(value);
            }
          }
        }
        return value;
      },
      /**
       * Check wheather the given value is JSON or not.
       *
       * @param  {Object[]} jsonData
       */
      isJson: function(jsonData) {
        if (typeof jsonData[0] === "string") {
          return jsonData;
        }
        return DataUtil2.parse.parseJson(jsonData);
      },
      /**
       * Checks wheather the given value is GUID or not.
       *
       * @param  {string} value
       */
      isGuid: function(value) {
        var regex = /[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i;
        var match = regex.exec(value);
        return match != null;
      },
      /**
       * The method used to replace the value based on the type.
       *
       * @param  {Object} value
       * @param  {boolean} stringify
       * @hidden
       */
      replacer: function(value, stringify) {
        if (DataUtil2.isPlainObject(value)) {
          return DataUtil2.parse.jsonReplacer(value, stringify);
        }
        if (value instanceof Array) {
          return DataUtil2.parse.arrayReplacer(value);
        }
        if (value instanceof Date) {
          return DataUtil2.parse.jsonReplacer({ val: value }, stringify).val;
        }
        return value;
      },
      /**
       * It will replace the JSON value.
       *
       * @param {string} key
       * @param {Object} val
       * @param stringify
       * @hidden
       */
      jsonReplacer: function(val, stringify) {
        var value;
        var keys2 = Object.keys(val);
        for (var _i = 0, keys_3 = keys2; _i < keys_3.length; _i++) {
          var prop = keys_3[_i];
          value = val[prop];
          if (!(value instanceof Date)) {
            continue;
          }
          var d = value;
          if (DataUtil2.serverTimezoneOffset == null) {
            val[prop] = DataUtil2.dateParse.toTimeZone(d, null).toJSON();
          } else {
            d = new Date(+d + DataUtil2.serverTimezoneOffset * 36e5);
            val[prop] = DataUtil2.dateParse.toTimeZone(DataUtil2.dateParse.addSelfOffset(d), null).toJSON();
          }
        }
        return val;
      },
      /**
       * It will replace the Array of value.
       *
       * @param  {string} key
       * @param  {Object[]} val
       * @hidden
       */
      arrayReplacer: function(val) {
        for (var i = 0; i < val.length; i++) {
          if (DataUtil2.isPlainObject(val[i])) {
            val[i] = DataUtil2.parse.jsonReplacer(val[i]);
          } else if (val[i] instanceof Date) {
            val[i] = DataUtil2.parse.jsonReplacer({ date: val[i] }).date;
          }
        }
        return val;
      },
      /**
       * It will replace the Date object with respective to UTC format value.
       *
       * @param  {string} key
       * @param  {any} value
       * @hidden
       */
      /* eslint-disable @typescript-eslint/no-explicit-any */
      /* tslint:disable-next-line:no-any */
      jsonDateReplacer: function(key, value) {
        if (key === "value" && value) {
          if (typeof value === "string") {
            var ms = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(value);
            if (ms) {
              value = DataUtil2.dateParse.toTimeZone(new Date(parseInt(ms[1], 10)), null, true);
            } else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(value)) {
              var arr = value.split(/[^0-9]/);
              value = DataUtil2.dateParse.toTimeZone(new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5], 10)), null, true);
            }
          }
          if (value instanceof Date) {
            value = DataUtil2.dateParse.addSelfOffset(value);
            if (DataUtil2.serverTimezoneOffset === null) {
              return DataUtil2.dateParse.toTimeZone(DataUtil2.dateParse.addSelfOffset(value), null).toJSON();
            } else {
              value = DataUtil2.dateParse.toTimeZone(value, value.getTimezoneOffset() / 60 - DataUtil2.serverTimezoneOffset, false);
              return value.toJSON();
            }
          }
        }
        return value;
      }
    };
    DataUtil2.dateParse = {
      addSelfOffset: function(input) {
        return new Date(+input - input.getTimezoneOffset() * 6e4);
      },
      toUTC: function(input) {
        return new Date(+input + input.getTimezoneOffset() * 6e4);
      },
      toTimeZone: function(input, offset, utc) {
        if (offset === null) {
          return input;
        }
        var unix = utc ? DataUtil2.dateParse.toUTC(input) : input;
        return new Date(+unix - offset * 36e5);
      },
      toLocalTime: function(input) {
        var datefn = input;
        var timeZone = -datefn.getTimezoneOffset();
        var differenceString = timeZone >= 0 ? "+" : "-";
        var localtimefn = function(num) {
          var norm = Math.floor(Math.abs(num));
          return (norm < 10 ? "0" : "") + norm;
        };
        var val = datefn.getFullYear() + "-" + localtimefn(datefn.getMonth() + 1) + "-" + localtimefn(datefn.getDate()) + "T" + localtimefn(datefn.getHours()) + ":" + localtimefn(datefn.getMinutes()) + ":" + localtimefn(datefn.getSeconds()) + differenceString + localtimefn(timeZone / 60) + ":" + localtimefn(timeZone % 60);
        return val;
      }
    };
    return DataUtil2;
  }()
);
var __extends$t = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var consts = { GroupGuid: "{271bbba0-1ee7}" };
var Adaptor = (
  /** @class */
  function() {
    function Adaptor2(ds) {
      this.options = {
        from: "table",
        requestType: "json",
        sortBy: "sorted",
        select: "select",
        skip: "skip",
        group: "group",
        take: "take",
        search: "search",
        count: "requiresCounts",
        where: "where",
        aggregates: "aggregates",
        expand: "expand"
      };
      this.type = Adaptor2;
      this.dataSource = ds;
      this.pvt = {};
    }
    Adaptor2.prototype.processResponse = function(data, ds, query, xhr) {
      return data;
    };
    return Adaptor2;
  }()
);
var JsonAdaptor = (
  /** @class */
  function(_super) {
    __extends$t(JsonAdaptor2, _super);
    function JsonAdaptor2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    JsonAdaptor2.prototype.processQuery = function(dataManager, query) {
      var result = dataManager.dataSource.json.slice(0);
      var count = result.length;
      var countFlg = true;
      var ret;
      var key;
      var lazyLoad = {};
      var keyCount = 0;
      var group = [];
      var sort = [];
      var page;
      for (var i = 0; i < query.lazyLoad.length; i++) {
        keyCount++;
        lazyLoad[query.lazyLoad[i].key] = query.lazyLoad[i].value;
      }
      var agg = {};
      var isGroupByFormat = false;
      if (query.lazyLoad.length) {
        for (var i = 0; i < query.queries.length; i++) {
          key = query.queries[i];
          if (key.fn === "onGroup" && !isNullOrUndefined(key.e.format)) {
            isGroupByFormat = true;
            break;
          }
        }
      }
      for (var i = 0; i < query.queries.length; i++) {
        key = query.queries[i];
        if ((key.fn === "onPage" || key.fn === "onGroup" || key.fn === "onSortBy" && !isGroupByFormat) && query.lazyLoad.length) {
          if (key.fn === "onGroup") {
            group.push(key.e);
          }
          if (key.fn === "onPage") {
            page = key.e;
          }
          if (key.fn === "onSortBy") {
            sort.unshift(key.e);
          }
          continue;
        }
        ret = this[key.fn].call(this, result, key.e, query);
        if (key.fn === "onAggregates") {
          agg[key.e.field + " - " + key.e.type] = ret;
        } else {
          result = ret !== void 0 ? ret : result;
        }
        if (key.fn === "onPage" || key.fn === "onSkip" || key.fn === "onTake" || key.fn === "onRange") {
          countFlg = false;
        }
        if (countFlg) {
          count = result.length;
        }
      }
      if (keyCount) {
        var args = {
          query,
          lazyLoad,
          result,
          group,
          page,
          sort
        };
        var lazyLoadData = this.lazyLoadGroup(args);
        result = lazyLoadData.result;
        count = lazyLoadData.count;
      }
      if (query.isCountRequired) {
        result = {
          result,
          count,
          aggregates: agg
        };
      }
      return result;
    };
    JsonAdaptor2.prototype.lazyLoadGroup = function(args) {
      var count = 0;
      var agg = this.getAggregate(args.query);
      var result = args.result;
      if (!isNullOrUndefined(args.lazyLoad.onDemandGroupInfo)) {
        var req = args.lazyLoad.onDemandGroupInfo;
        for (var i = req.where.length - 1; i >= 0; i--) {
          result = this.onWhere(result, req.where[i]);
        }
        if (args.group.length !== req.level) {
          var field = args.group[req.level].fieldName;
          result = DataUtil.group(result, field, agg, null, null, args.group[req.level].comparer, true);
          if (args.sort.length) {
            result = this.onSortBy(result, args.sort[parseInt(req.level.toString(), 10)], args.query, true);
          }
        } else {
          for (var i = args.sort.length - 1; i >= req.level; i--) {
            result = this.onSortBy(result, args.sort[parseInt(i.toString(), 10)], args.query, false);
          }
        }
        count = result.length;
        var data = result;
        result = result.slice(req.skip);
        result = result.slice(0, req.take);
        if (args.group.length !== req.level) {
          this.formGroupResult(result, data);
        }
      } else {
        var field_1 = args.group[0].fieldName;
        result = DataUtil.group(result, field_1, agg, null, null, args.group[0].comparer, true);
        count = result.length;
        var data = result;
        if (args.sort.length) {
          var sort = args.sort.length > 1 ? args.sort.filter(function(x) {
            return x.fieldName === field_1;
          })[0] : args.sort[0];
          result = this.onSortBy(result, sort, args.query, true);
        }
        if (args.page) {
          result = this.onPage(result, args.page, args.query);
        }
        this.formGroupResult(result, data);
      }
      return { result, count };
    };
    JsonAdaptor2.prototype.formGroupResult = function(result, data) {
      if (result.length && data.length) {
        var uid2 = "GroupGuid";
        var childLevel = "childLevels";
        var level = "level";
        var records = "records";
        result[uid2] = data[uid2];
        result[childLevel] = data[childLevel];
        result[level] = data[level];
        result[records] = data[records];
      }
      return result;
    };
    JsonAdaptor2.prototype.getAggregate = function(query) {
      var aggQuery = Query.filterQueries(query.queries, "onAggregates");
      var agg = [];
      if (aggQuery.length) {
        var tmp = void 0;
        for (var i = 0; i < aggQuery.length; i++) {
          tmp = aggQuery[i].e;
          agg.push({ type: tmp.type, field: DataUtil.getValue(tmp.field, query) });
        }
      }
      return agg;
    };
    JsonAdaptor2.prototype.batchRequest = function(dm, changes, e) {
      var i;
      var deletedRecordsLen = changes.deletedRecords.length;
      for (i = 0; i < changes.addedRecords.length; i++) {
        this.insert(dm, changes.addedRecords[i]);
      }
      for (i = 0; i < changes.changedRecords.length; i++) {
        this.update(dm, e.key, changes.changedRecords[i]);
      }
      for (i = 0; i < deletedRecordsLen; i++) {
        this.remove(dm, e.key, changes.deletedRecords[i]);
      }
      return changes;
    };
    JsonAdaptor2.prototype.onWhere = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.filter(function(obj) {
        if (e) {
          return e.validate(obj);
        }
      });
    };
    JsonAdaptor2.prototype.onAggregates = function(ds, e) {
      var fn = DataUtil.aggregates[e.type];
      if (!ds || !fn || ds.length === 0) {
        return null;
      }
      return fn(ds, e.field);
    };
    JsonAdaptor2.prototype.onSearch = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      if (e.fieldNames.length === 0) {
        DataUtil.getFieldList(ds[0], e.fieldNames);
      }
      return ds.filter(function(obj) {
        for (var j = 0; j < e.fieldNames.length; j++) {
          if (e.comparer.call(obj, DataUtil.getObject(e.fieldNames[j], obj), e.searchKey, e.ignoreCase, e.ignoreAccent)) {
            return true;
          }
        }
        return false;
      });
    };
    JsonAdaptor2.prototype.onSortBy = function(ds, e, query, isLazyLoadGroupSort) {
      if (!ds || !ds.length) {
        return ds;
      }
      var fnCompare;
      var field = DataUtil.getValue(e.fieldName, query);
      if (!field) {
        return ds.sort(e.comparer);
      }
      if (field instanceof Array) {
        field = field.slice(0);
        for (var i = field.length - 1; i >= 0; i--) {
          if (!field[i]) {
            continue;
          }
          fnCompare = e.comparer;
          if (DataUtil.endsWith(field[i], " desc")) {
            fnCompare = DataUtil.fnSort("descending");
            field[i] = field[i].replace(" desc", "");
          }
          ds = DataUtil.sort(ds, field[i], fnCompare);
        }
        return ds;
      }
      return DataUtil.sort(ds, isLazyLoadGroupSort ? "key" : field, e.comparer);
    };
    JsonAdaptor2.prototype.onGroup = function(ds, e, query) {
      if (!ds || !ds.length) {
        return ds;
      }
      var agg = this.getAggregate(query);
      return DataUtil.group(ds, DataUtil.getValue(e.fieldName, query), agg, null, null, e.comparer);
    };
    JsonAdaptor2.prototype.onPage = function(ds, e, query) {
      var size = DataUtil.getValue(e.pageSize, query);
      var start = (DataUtil.getValue(e.pageIndex, query) - 1) * size;
      var end = start + size;
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(start, end);
    };
    JsonAdaptor2.prototype.onRange = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(DataUtil.getValue(e.start), DataUtil.getValue(e.end));
    };
    JsonAdaptor2.prototype.onTake = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(0, DataUtil.getValue(e.nos));
    };
    JsonAdaptor2.prototype.onSkip = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(DataUtil.getValue(e.nos));
    };
    JsonAdaptor2.prototype.onSelect = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return DataUtil.select(ds, DataUtil.getValue(e.fieldNames));
    };
    JsonAdaptor2.prototype.insert = function(dm, data, tableName, query, position) {
      if (isNullOrUndefined(position)) {
        return dm.dataSource.json.push(data);
      } else {
        return dm.dataSource.json.splice(position, 0, data);
      }
    };
    JsonAdaptor2.prototype.remove = function(dm, keyField, value, tableName) {
      var ds = dm.dataSource.json;
      var i;
      if (typeof value === "object" && !(value instanceof Date)) {
        value = DataUtil.getObject(keyField, value);
      }
      for (i = 0; i < ds.length; i++) {
        if (DataUtil.getObject(keyField, ds[i]) === value) {
          break;
        }
      }
      return i !== ds.length ? ds.splice(i, 1) : null;
    };
    JsonAdaptor2.prototype.update = function(dm, keyField, value, tableName) {
      var ds = dm.dataSource.json;
      var i;
      var key;
      if (!isNullOrUndefined(keyField)) {
        key = getValue(keyField, value);
      }
      for (i = 0; i < ds.length; i++) {
        if (!isNullOrUndefined(keyField) && getValue(keyField, ds[i]) === key) {
          break;
        }
      }
      return i < ds.length ? merge(ds[i], value) : null;
    };
    return JsonAdaptor2;
  }(Adaptor)
);
var UrlAdaptor = (
  /** @class */
  function(_super) {
    __extends$t(UrlAdaptor2, _super);
    function UrlAdaptor2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    UrlAdaptor2.prototype.processQuery = function(dm, query, hierarchyFilters) {
      var queries = this.getQueryRequest(query);
      var singles = Query.filterQueryLists(query.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]);
      var params = query.params;
      var url = dm.dataSource.url;
      var temp;
      var skip;
      var take = null;
      var options = this.options;
      var request = { sorts: [], groups: [], filters: [], searches: [], aggregates: [] };
      if ("onPage" in singles) {
        temp = singles.onPage;
        skip = DataUtil.getValue(temp.pageIndex, query);
        take = DataUtil.getValue(temp.pageSize, query);
        skip = (skip - 1) * take;
      } else if ("onRange" in singles) {
        temp = singles.onRange;
        skip = temp.start;
        take = temp.end - temp.start;
      }
      for (var i = 0; i < queries.sorts.length; i++) {
        temp = DataUtil.getValue(queries.sorts[i].e.fieldName, query);
        request.sorts.push(DataUtil.callAdaptorFunction(this, "onEachSort", { name: temp, direction: queries.sorts[i].e.direction }, query));
      }
      if (hierarchyFilters) {
        temp = this.getFiltersFrom(hierarchyFilters, query);
        if (temp) {
          request.filters.push(DataUtil.callAdaptorFunction(this, "onEachWhere", temp.toJson(), query));
        }
      }
      for (var i = 0; i < queries.filters.length; i++) {
        var res = DataUtil.callAdaptorFunction(this, "onEachWhere", queries.filters[i].e.toJson(), query);
        if (this.getModuleName && this.getModuleName() === "ODataV4Adaptor" && !isNullOrUndefined(queries.filters[i].e.key) && queries.filters.length > 1) {
          res = "(" + res + ")";
        }
        request.filters.push(res);
        var keys_3 = typeof request.filters[i] === "object" ? Object.keys(request.filters[i]) : [];
        for (var _i = 0, keys_1 = keys_3; _i < keys_1.length; _i++) {
          var prop = keys_1[_i];
          if (DataUtil.isNull(request[prop])) {
            delete request[prop];
          }
        }
      }
      for (var i = 0; i < queries.searches.length; i++) {
        temp = queries.searches[i].e;
        request.searches.push(DataUtil.callAdaptorFunction(this, "onEachSearch", {
          fields: temp.fieldNames,
          operator: temp.operator,
          key: temp.searchKey,
          ignoreCase: temp.ignoreCase,
          ignoreAccent: temp.ignoreAccent
        }, query));
      }
      for (var i = 0; i < queries.groups.length; i++) {
        request.groups.push(DataUtil.getValue(queries.groups[i].e.fieldName, query));
      }
      for (var i = 0; i < queries.aggregates.length; i++) {
        temp = queries.aggregates[i].e;
        request.aggregates.push({ type: temp.type, field: DataUtil.getValue(temp.field, query) });
      }
      var req = {};
      this.getRequestQuery(options, query, singles, request, req);
      DataUtil.callAdaptorFunction(this, "addParams", { dm, query, params, reqParams: req });
      if (query.lazyLoad.length) {
        for (var i = 0; i < query.lazyLoad.length; i++) {
          req[query.lazyLoad[i].key] = query.lazyLoad[i].value;
        }
      }
      var keys2 = Object.keys(req);
      for (var _a = 0, keys_2 = keys2; _a < keys_2.length; _a++) {
        var prop = keys_2[_a];
        if (DataUtil.isNull(req[prop]) || req[prop] === "" || req[prop].length === 0) {
          delete req[prop];
        }
      }
      if (!(options.skip in req && options.take in req) && take !== null) {
        req[options.skip] = DataUtil.callAdaptorFunction(this, "onSkip", skip, query);
        req[options.take] = DataUtil.callAdaptorFunction(this, "onTake", take, query);
      }
      var p = this.pvt;
      this.pvt = {};
      if (this.options.requestType === "json") {
        return {
          data: JSON.stringify(req, DataUtil.parse.jsonDateReplacer),
          url,
          pvtData: p,
          type: "POST",
          contentType: "application/json; charset=utf-8"
        };
      }
      temp = this.convertToQueryString(req, query, dm);
      temp = (dm.dataSource.url.indexOf("?") !== -1 ? "&" : "/") + temp;
      return {
        type: "GET",
        url: temp.length ? url.replace(/\/*$/, temp) : url,
        pvtData: p
      };
    };
    UrlAdaptor2.prototype.getRequestQuery = function(options, query, singles, request, request1) {
      var param = "param";
      var req = request1;
      req[options.from] = query.fromTable;
      if (options.apply && query.distincts.length) {
        req[options.apply] = "onDistinct" in this ? DataUtil.callAdaptorFunction(this, "onDistinct", query.distincts) : "";
      }
      if (!query.distincts.length && options.expand) {
        req[options.expand] = "onExpand" in this && "onSelect" in singles ? DataUtil.callAdaptorFunction(this, "onExpand", { selects: DataUtil.getValue(singles.onSelect.fieldNames, query), expands: query.expands }, query) : query.expands;
      }
      req[options.select] = "onSelect" in singles && !query.distincts.length ? DataUtil.callAdaptorFunction(this, "onSelect", DataUtil.getValue(singles.onSelect.fieldNames, query), query) : "";
      req[options.count] = query.isCountRequired ? DataUtil.callAdaptorFunction(this, "onCount", query.isCountRequired, query) : "";
      req[options.search] = request.searches.length ? DataUtil.callAdaptorFunction(this, "onSearch", request.searches, query) : "";
      req[options.skip] = "onSkip" in singles ? DataUtil.callAdaptorFunction(this, "onSkip", DataUtil.getValue(singles.onSkip.nos, query), query) : "";
      req[options.take] = "onTake" in singles ? DataUtil.callAdaptorFunction(this, "onTake", DataUtil.getValue(singles.onTake.nos, query), query) : "";
      req[options.where] = request.filters.length || request.searches.length ? DataUtil.callAdaptorFunction(this, "onWhere", request.filters, query) : "";
      req[options.sortBy] = request.sorts.length ? DataUtil.callAdaptorFunction(this, "onSortBy", request.sorts, query) : "";
      req[options.group] = request.groups.length ? DataUtil.callAdaptorFunction(this, "onGroup", request.groups, query) : "";
      req[options.aggregates] = request.aggregates.length ? DataUtil.callAdaptorFunction(this, "onAggregates", request.aggregates, query) : "";
      req[param] = [];
    };
    UrlAdaptor2.prototype.convertToQueryString = function(request, query, dm) {
      return "";
    };
    UrlAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
      if (xhr && xhr.headers.get("Content-Type") && xhr.headers.get("Content-Type").indexOf("application/json") !== -1) {
        var handleTimeZone = DataUtil.timeZoneHandling;
        if (ds && !ds.timeZoneHandling) {
          DataUtil.timeZoneHandling = false;
        }
        if (!ds.enableCache) {
          data = DataUtil.parse.parseJson(data);
        }
        DataUtil.timeZoneHandling = handleTimeZone;
      }
      var requests = request;
      var pvt = requests.pvtData || {};
      var groupDs = data ? data.groupDs : [];
      if (xhr && xhr.headers.get("Content-Type") && xhr.headers.get("Content-Type").indexOf("xml") !== -1) {
        return query.isCountRequired ? { result: [], count: 0 } : [];
      }
      var d = JSON.parse(requests.data);
      if (d && d.action === "batch" && data && data.addedRecords && !isNullOrUndefined(changes)) {
        changes.addedRecords = data.addedRecords;
        return changes;
      }
      if (data && data.d) {
        data = data.d;
      }
      var args = {};
      if (data && "count" in data) {
        args.count = data.count;
      }
      args.result = data && data.result ? data.result : data;
      var isExpand = false;
      if (Array.isArray(data.result) && data.result.length) {
        var key = "key";
        var val = "value";
        var level = "level";
        if (!isNullOrUndefined(data.result[0][key])) {
          args.result = this.formRemoteGroupedData(args.result, 1, pvt.groups.length - 1);
        }
        if (query && query.lazyLoad.length && pvt.groups.length) {
          for (var i = 0; i < query.lazyLoad.length; i++) {
            if (query.lazyLoad[i][key] === "onDemandGroupInfo") {
              var value = query.lazyLoad[i][val][level];
              if (pvt.groups.length === value) {
                isExpand = true;
              }
            }
          }
        }
      }
      if (!isExpand) {
        this.getAggregateResult(pvt, data, args, groupDs, query);
      }
      return DataUtil.isNull(args.count) ? args.result : { result: args.result, count: args.count, aggregates: args.aggregates };
    };
    UrlAdaptor2.prototype.formRemoteGroupedData = function(data, level, childLevel) {
      for (var i = 0; i < data.length; i++) {
        if (data[i].items.length && Object.keys(data[i].items[0]).indexOf("key") > -1) {
          this.formRemoteGroupedData(data[i].items, level + 1, childLevel - 1);
        }
      }
      var uid2 = "GroupGuid";
      var childLvl = "childLevels";
      var lvl = "level";
      var records = "records";
      data[uid2] = consts[uid2];
      data[lvl] = level;
      data[childLvl] = childLevel;
      data[records] = data[0].items.length ? this.getGroupedRecords(data, !isNullOrUndefined(data[0].items[records])) : [];
      return data;
    };
    UrlAdaptor2.prototype.getGroupedRecords = function(data, hasRecords) {
      var childGroupedRecords = [];
      var records = "records";
      for (var i = 0; i < data.length; i++) {
        if (!hasRecords) {
          for (var j = 0; j < data[i].items.length; j++) {
            childGroupedRecords.push(data[i].items[j]);
          }
        } else {
          childGroupedRecords = childGroupedRecords.concat(data[i].items[records]);
        }
      }
      return childGroupedRecords;
    };
    UrlAdaptor2.prototype.onGroup = function(e) {
      this.pvt.groups = e;
      return e;
    };
    UrlAdaptor2.prototype.onAggregates = function(e) {
      this.pvt.aggregates = e;
    };
    UrlAdaptor2.prototype.batchRequest = function(dm, changes, e, query, original) {
      var url;
      var key;
      return {
        type: "POST",
        url: dm.dataSource.batchUrl || dm.dataSource.crudUrl || dm.dataSource.removeUrl || dm.dataSource.url,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify(extend$1({}, {
          changed: changes.changedRecords,
          added: changes.addedRecords,
          deleted: changes.deletedRecords,
          action: "batch",
          table: e[url],
          key: e[key]
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.beforeSend = function(dm, request, settings) {
    };
    UrlAdaptor2.prototype.insert = function(dm, data, tableName, query) {
      return {
        url: dm.dataSource.insertUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend$1({}, {
          value: data,
          table: tableName,
          action: "insert"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.remove = function(dm, keyField, value, tableName, query) {
      return {
        type: "POST",
        url: dm.dataSource.removeUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend$1({}, {
          key: value,
          keyColumn: keyField,
          table: tableName,
          action: "remove"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.update = function(dm, keyField, value, tableName, query) {
      return {
        type: "POST",
        url: dm.dataSource.updateUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend$1({}, {
          value,
          action: "update",
          keyColumn: keyField,
          key: DataUtil.getObject(keyField, value),
          table: tableName
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.getFiltersFrom = function(data, query) {
      var key = query.fKey;
      var value;
      var prop = key;
      var pKey = query.key;
      var predicats = [];
      if (typeof data[0] !== "object") {
        prop = null;
      }
      for (var i = 0; i < data.length; i++) {
        if (typeof data[0] === "object") {
          value = DataUtil.getObject(pKey || prop, data[i]);
        } else {
          value = data[i];
        }
        predicats.push(new Predicate$1(key, "equal", value));
      }
      return Predicate$1.or(predicats);
    };
    UrlAdaptor2.prototype.getAggregateResult = function(pvt, data, args, groupDs, query) {
      var pData = data;
      if (data && data.result) {
        pData = data.result;
      }
      if (pvt && pvt.aggregates && pvt.aggregates.length) {
        var agg = pvt.aggregates;
        var fn = void 0;
        var aggregateData = pData;
        var res = {};
        if (data.aggregate) {
          aggregateData = data.aggregate;
        }
        for (var i = 0; i < agg.length; i++) {
          fn = DataUtil.aggregates[agg[i].type];
          if (fn) {
            res[agg[i].field + " - " + agg[i].type] = fn(aggregateData, agg[i].field);
          }
        }
        args.aggregates = res;
      }
      var key = "key";
      var isServerGrouping = Array.isArray(data.result) && data.result.length && !isNullOrUndefined(data.result[0][key]);
      if (pvt && pvt.groups && pvt.groups.length && !isServerGrouping) {
        var groups = pvt.groups;
        for (var i = 0; i < groups.length; i++) {
          var level = null;
          if (!isNullOrUndefined(groupDs)) {
            groupDs = DataUtil.group(groupDs, groups[i]);
          }
          var groupQuery = Query.filterQueries(query.queries, "onGroup")[i].e;
          pData = DataUtil.group(pData, groups[i], pvt.aggregates, level, groupDs, groupQuery.comparer);
        }
        args.result = pData;
      }
      return args;
    };
    UrlAdaptor2.prototype.getQueryRequest = function(query) {
      var req = { sorts: [], groups: [], filters: [], searches: [], aggregates: [] };
      req.sorts = Query.filterQueries(query.queries, "onSortBy");
      req.groups = Query.filterQueries(query.queries, "onGroup");
      req.filters = Query.filterQueries(query.queries, "onWhere");
      req.searches = Query.filterQueries(query.queries, "onSearch");
      req.aggregates = Query.filterQueries(query.queries, "onAggregates");
      return req;
    };
    UrlAdaptor2.prototype.addParams = function(options) {
      var req = options.reqParams;
      if (options.params.length) {
        req.params = {};
      }
      for (var _i = 0, _a = options.params; _i < _a.length; _i++) {
        var tmp = _a[_i];
        if (req[tmp.key]) {
          throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");
        }
        req[tmp.key] = tmp.value;
        if (tmp.fn) {
          req[tmp.key] = tmp.fn.call(options.query, tmp.key, options.query, options.dm);
        }
        req.params[tmp.key] = req[tmp.key];
      }
    };
    return UrlAdaptor2;
  }(Adaptor)
);
var ODataAdaptor = (
  /** @class */
  function(_super) {
    __extends$t(ODataAdaptor2, _super);
    function ODataAdaptor2(props) {
      var _this = _super.call(this) || this;
      _this.options = extend$1({}, _this.options, {
        requestType: "get",
        accept: "application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",
        multipartAccept: "multipart/mixed",
        sortBy: "$orderby",
        select: "$select",
        skip: "$skip",
        take: "$top",
        count: "$inlinecount",
        where: "$filter",
        expand: "$expand",
        batch: "$batch",
        changeSet: "--changeset_",
        batchPre: "batch_",
        contentId: "Content-Id: ",
        batchContent: "Content-Type: multipart/mixed; boundary=",
        changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ",
        batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ",
        updateType: "PUT"
      });
      extend$1(_this.options, props || {});
      return _this;
    }
    ODataAdaptor2.prototype.getModuleName = function() {
      return "ODataAdaptor";
    };
    ODataAdaptor2.prototype.onPredicate = function(predicate, query, requiresCast) {
      var returnValue = "";
      var operator;
      var guid;
      var val = predicate.value;
      var type = typeof val;
      var field = predicate.field ? ODataAdaptor2.getField(predicate.field) : null;
      if (val instanceof Date) {
        val = "datetime'" + DataUtil.parse.replacer(val) + "'";
      }
      if (type === "string") {
        val = val.replace(/'/g, "''");
        if (predicate.ignoreCase) {
          val = val.toLowerCase();
        }
        if (predicate.operator !== "like") {
          val = encodeURIComponent(val);
        }
        if (predicate.operator !== "wildcard" && predicate.operator !== "like") {
          val = "'" + val + "'";
        }
        if (requiresCast) {
          field = "cast(" + field + ", 'Edm.String')";
        }
        if (DataUtil.parse.isGuid(val)) {
          guid = "guid";
        }
        if (predicate.ignoreCase) {
          if (!guid) {
            field = "tolower(" + field + ")";
          }
          val = val.toLowerCase();
        }
      }
      if (predicate.operator === "isempty" || predicate.operator === "isnull" || predicate.operator === "isnotempty" || predicate.operator === "isnotnull") {
        operator = predicate.operator.indexOf("isnot") !== -1 ? DataUtil.odBiOperator["notequal"] : DataUtil.odBiOperator["equal"];
        val = predicate.operator === "isnull" || predicate.operator === "isnotnull" ? null : "''";
      } else {
        operator = DataUtil.odBiOperator[predicate.operator];
      }
      if (operator) {
        returnValue += field;
        returnValue += operator;
        if (guid) {
          returnValue += guid;
        }
        return returnValue + val;
      }
      if (!isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor") {
        operator = DataUtil.odv4UniOperator[predicate.operator];
      } else {
        operator = DataUtil.odUniOperator[predicate.operator];
      }
      if (operator === "like") {
        val = val;
        if (val.indexOf("%") !== -1) {
          if (val.charAt(0) === "%" && val.lastIndexOf("%") < 2) {
            val = val.substring(1, val.length);
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["startswith"] : DataUtil.odUniOperator["startswith"];
          } else if (val.charAt(val.length - 1) === "%" && val.indexOf("%") > val.length - 3) {
            val = val.substring(0, val.length - 1);
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["endswith"] : DataUtil.odUniOperator["endswith"];
          } else if (val.lastIndexOf("%") !== val.indexOf("%") && val.lastIndexOf("%") > val.indexOf("%") + 1) {
            val = val.substring(val.indexOf("%") + 1, val.lastIndexOf("%"));
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
          } else {
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
          }
        }
        val = encodeURIComponent(val);
        val = "'" + val + "'";
      } else if (operator === "wildcard") {
        val = val;
        if (val.indexOf("*") !== -1) {
          var splittedStringValue = val.split("*");
          var splittedValue = void 0;
          var count = 0;
          if (val.indexOf("*") !== 0 && splittedStringValue[0].indexOf("%3f") === -1 && splittedStringValue[0].indexOf("?") === -1) {
            splittedValue = splittedStringValue[0];
            splittedValue = "'" + splittedValue + "'";
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["startswith"] : DataUtil.odUniOperator["startswith"];
            returnValue += operator + "(";
            returnValue += field + ",";
            if (guid) {
              returnValue += guid;
            }
            returnValue += splittedValue + ")";
            count++;
          }
          if (val.lastIndexOf("*") !== val.length - 1 && splittedStringValue[splittedStringValue.length - 1].indexOf("%3f") === -1 && splittedStringValue[splittedStringValue.length - 1].indexOf("?") === -1) {
            splittedValue = splittedStringValue[splittedStringValue.length - 1];
            splittedValue = "'" + splittedValue + "'";
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["endswith"] : DataUtil.odUniOperator["endswith"];
            if (count > 0) {
              returnValue += " and ";
            }
            returnValue += operator + "(";
            returnValue += field + ",";
            if (guid) {
              returnValue += guid;
            }
            returnValue += splittedValue + ")";
            count++;
          }
          if (splittedStringValue.length > 2) {
            for (var i = 1; i < splittedStringValue.length - 1; i++) {
              if (splittedStringValue[i].indexOf("%3f") === -1 && splittedStringValue[i].indexOf("?") === -1) {
                splittedValue = splittedStringValue[i];
                splittedValue = "'" + splittedValue + "'";
                operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
                if (count > 0) {
                  returnValue += " and ";
                }
                if (operator === "substringof" || operator === "not substringof") {
                  var temp = splittedValue;
                  splittedValue = field;
                  field = temp;
                }
                returnValue += operator + "(";
                returnValue += field + ",";
                if (guid) {
                  returnValue += guid;
                }
                returnValue += splittedValue + ")";
                count++;
              }
            }
          }
          if (count === 0) {
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
            if (val.indexOf("?") !== -1 || val.indexOf("%3f") !== -1) {
              val = val.indexOf("?") !== -1 ? val.split("?").join("") : val.split("%3f").join("");
            }
            val = "'" + val + "'";
          } else {
            operator = "wildcard";
          }
        } else {
          operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
          if (val.indexOf("?") !== -1 || val.indexOf("%3f") !== -1) {
            val = val.indexOf("?") !== -1 ? val.split("?").join("") : val.split("%3f").join("");
          }
          val = "'" + val + "'";
        }
      }
      if (operator === "substringof" || operator === "not substringof") {
        var temp = val;
        val = field;
        field = temp;
      }
      if (operator !== "wildcard") {
        returnValue += operator + "(";
        returnValue += field + ",";
        if (guid) {
          returnValue += guid;
        }
        returnValue += val + ")";
      }
      return returnValue;
    };
    ODataAdaptor2.prototype.addParams = function(options) {
      _super.prototype.addParams.call(this, options);
      delete options.reqParams.params;
    };
    ODataAdaptor2.prototype.onComplexPredicate = function(predicate, query, requiresCast) {
      var res = [];
      for (var i = 0; i < predicate.predicates.length; i++) {
        res.push("(" + this.onEachWhere(predicate.predicates[i], query, requiresCast) + ")");
      }
      return res.join(" " + predicate.condition + " ");
    };
    ODataAdaptor2.prototype.onEachWhere = function(filter, query, requiresCast) {
      return filter.isComplex ? this.onComplexPredicate(filter, query, requiresCast) : this.onPredicate(filter, query, requiresCast);
    };
    ODataAdaptor2.prototype.onWhere = function(filters) {
      if (this.pvt.search) {
        filters.push(this.onEachWhere(this.pvt.search, null, true));
      }
      return filters.join(" and ");
    };
    ODataAdaptor2.prototype.onEachSearch = function(e) {
      if (e.fields && e.fields.length === 0) {
        DataUtil.throwError("Query() - Search : oData search requires list of field names to search");
      }
      var filter = this.pvt.search || [];
      for (var i = 0; i < e.fields.length; i++) {
        filter.push(new Predicate$1(e.fields[i], e.operator, e.key, e.ignoreCase));
      }
      this.pvt.search = filter;
    };
    ODataAdaptor2.prototype.onSearch = function(e) {
      this.pvt.search = Predicate$1.or(this.pvt.search);
      return "";
    };
    ODataAdaptor2.prototype.onEachSort = function(e) {
      var res = [];
      if (e.name instanceof Array) {
        for (var i = 0; i < e.name.length; i++) {
          res.push(ODataAdaptor2.getField(e.name[i]) + (e.direction === "descending" ? " desc" : ""));
        }
      } else {
        res.push(ODataAdaptor2.getField(e.name) + (e.direction === "descending" ? " desc" : ""));
      }
      return res.join(",");
    };
    ODataAdaptor2.prototype.onSortBy = function(e) {
      return e.reverse().join(",");
    };
    ODataAdaptor2.prototype.onGroup = function(e) {
      this.pvt.groups = e;
      return [];
    };
    ODataAdaptor2.prototype.onSelect = function(e) {
      for (var i = 0; i < e.length; i++) {
        e[i] = ODataAdaptor2.getField(e[i]);
      }
      return e.join(",");
    };
    ODataAdaptor2.prototype.onAggregates = function(e) {
      this.pvt.aggregates = e;
      return "";
    };
    ODataAdaptor2.prototype.onCount = function(e) {
      return e === true ? "allpages" : "";
    };
    ODataAdaptor2.prototype.beforeSend = function(dm, request, settings) {
      if (DataUtil.endsWith(settings.url, this.options.batch) && settings.type.toLowerCase() === "post") {
        request.headers.set("Accept", this.options.multipartAccept);
        request.headers.set("DataServiceVersion", "2.0");
      } else {
        request.headers.set("Accept", this.options.accept);
      }
      request.headers.set("DataServiceVersion", "2.0");
      request.headers.set("MaxDataServiceVersion", "2.0");
    };
    ODataAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
      var metaCheck = "odata.metadata";
      if (request && request.type === "GET" && !this.rootUrl && data[metaCheck]) {
        var dataUrls = data[metaCheck].split("/$metadata#");
        this.rootUrl = dataUrls[0];
        this.resourceTableName = dataUrls[1];
      }
      var pvtData = "pvtData";
      if (!isNullOrUndefined(data.d)) {
        var dataCopy = query && query.isCountRequired ? data.d.results : data.d;
        var metaData = "__metadata";
        if (!isNullOrUndefined(dataCopy)) {
          for (var i = 0; i < dataCopy.length; i++) {
            if (!isNullOrUndefined(dataCopy[i][metaData])) {
              delete dataCopy[i][metaData];
            }
          }
        }
      }
      var pvt = request && request[pvtData];
      var emptyAndBatch = this.processBatchResponse(data, query, xhr, request, changes);
      if (emptyAndBatch) {
        return emptyAndBatch;
      }
      var versionCheck = xhr && request.fetchRequest.headers.get("DataServiceVersion");
      var count = null;
      var version = versionCheck && parseInt(versionCheck, 10) || 2;
      if (query && query.isCountRequired) {
        var oDataCount = "__count";
        if (data[oDataCount] || data["odata.count"]) {
          count = data[oDataCount] || data["odata.count"];
        }
        if (data.d) {
          data = data.d;
        }
        if (data[oDataCount] || data["odata.count"]) {
          count = data[oDataCount] || data["odata.count"];
        }
      }
      if (version === 3 && data.value) {
        data = data.value;
      }
      if (data.d) {
        data = data.d;
      }
      if (version < 3 && data.results) {
        data = data.results;
      }
      var args = {};
      args.count = count;
      args.result = data;
      this.getAggregateResult(pvt, data, args, null, query);
      return DataUtil.isNull(count) ? args.result : { result: args.result, count: args.count, aggregates: args.aggregates };
    };
    ODataAdaptor2.prototype.convertToQueryString = function(request, query, dm) {
      var res = [];
      var table2 = "table";
      var tableName = request[table2] || "";
      var format = "$format";
      delete request[table2];
      if (dm.dataSource.requiresFormat) {
        request[format] = "json";
      }
      var keys2 = Object.keys(request);
      for (var _i = 0, keys_4 = keys2; _i < keys_4.length; _i++) {
        var prop = keys_4[_i];
        res.push(prop + "=" + request[prop]);
      }
      res = res.join("&");
      if (dm.dataSource.url && dm.dataSource.url.indexOf("?") !== -1 && !tableName) {
        return res;
      }
      return res.length ? tableName + "?" + res : tableName || "";
    };
    ODataAdaptor2.prototype.localTimeReplacer = function(key, convertObj) {
      for (var _i = 0, _a = !isNullOrUndefined(convertObj) ? Object.keys(convertObj) : []; _i < _a.length; _i++) {
        var prop = _a[_i];
        if (convertObj[prop] instanceof Date) {
          convertObj[prop] = DataUtil.dateParse.toLocalTime(convertObj[prop]);
        }
      }
      return convertObj;
    };
    ODataAdaptor2.prototype.insert = function(dm, data, tableName) {
      return {
        url: (dm.dataSource.insertUrl || dm.dataSource.url).replace(/\/*$/, tableName ? "/" + tableName : ""),
        data: JSON.stringify(data, this.options.localTime ? this.localTimeReplacer : null)
      };
    };
    ODataAdaptor2.prototype.remove = function(dm, keyField, value, tableName) {
      var url;
      if (typeof value === "string" && !DataUtil.parse.isGuid(value)) {
        url = "('" + value + "')";
      } else {
        url = "(" + value + ")";
      }
      return {
        type: "DELETE",
        url: (dm.dataSource.removeUrl || dm.dataSource.url).replace(/\/*$/, tableName ? "/" + tableName : "") + url
      };
    };
    ODataAdaptor2.prototype.update = function(dm, keyField, value, tableName, query, original) {
      if (this.options.updateType === "PATCH" && !isNullOrUndefined(original)) {
        value = this.compareAndRemove(value, original, keyField);
      }
      var url;
      if (typeof value[keyField] === "string" && !DataUtil.parse.isGuid(value[keyField])) {
        url = "('" + value[keyField] + "')";
      } else {
        url = "(" + value[keyField] + ")";
      }
      return {
        type: this.options.updateType,
        url: (dm.dataSource.updateUrl || dm.dataSource.url).replace(/\/*$/, tableName ? "/" + tableName : "") + url,
        data: JSON.stringify(value, this.options.localTime ? this.localTimeReplacer : null),
        accept: this.options.accept
      };
    };
    ODataAdaptor2.prototype.batchRequest = function(dm, changes, e, query, original) {
      var initialGuid = e.guid = DataUtil.getGuid(this.options.batchPre);
      var url = dm.dataSource.batchUrl || this.rootUrl ? (dm.dataSource.batchUrl || this.rootUrl) + "/" + this.options.batch : (dm.dataSource.batchUrl || dm.dataSource.url).replace(/\/*$/, "/" + this.options.batch);
      e.url = this.resourceTableName ? this.resourceTableName : e.url;
      var args = {
        url: e.url,
        key: e.key,
        cid: 1,
        cSet: DataUtil.getGuid(this.options.changeSet)
      };
      var req = "--" + initialGuid + "\n";
      req += "Content-Type: multipart/mixed; boundary=" + args.cSet.replace("--", "") + "\n";
      this.pvt.changeSet = 0;
      req += this.generateInsertRequest(changes.addedRecords, args, dm);
      req += this.generateUpdateRequest(changes.changedRecords, args, dm, original ? original.changedRecords : []);
      req += this.generateDeleteRequest(changes.deletedRecords, args, dm);
      req += args.cSet + "--\n";
      req += "--" + initialGuid + "--";
      return {
        type: "POST",
        url,
        dataType: "json",
        contentType: "multipart/mixed; charset=UTF-8;boundary=" + initialGuid,
        data: req
      };
    };
    ODataAdaptor2.prototype.generateDeleteRequest = function(arr, e, dm) {
      if (!arr) {
        return "";
      }
      var req = "";
      var stat = {
        "method": "DELETE ",
        "url": function(data, i, key) {
          var url = DataUtil.getObject(key, data[i]);
          if (typeof url === "number" || DataUtil.parse.isGuid(url)) {
            return "(" + url + ")";
          } else if (url instanceof Date) {
            var dateTime = data[i][key];
            return "(" + dateTime.toJSON() + ")";
          } else {
            return "('" + url + "')";
          }
        },
        "data": function(data, i) {
          return "";
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req + "\n";
    };
    ODataAdaptor2.prototype.generateInsertRequest = function(arr, e, dm) {
      if (!arr) {
        return "";
      }
      var req = "";
      var stat = {
        "method": "POST ",
        "url": function(data, i, key) {
          return "";
        },
        "data": function(data, i) {
          return JSON.stringify(data[i]) + "\n\n";
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req;
    };
    ODataAdaptor2.prototype.generateUpdateRequest = function(arr, e, dm, org) {
      var _this = this;
      if (!arr) {
        return "";
      }
      var req = "";
      arr.forEach(function(change) {
        return change = _this.compareAndRemove(change, org.filter(function(o) {
          return DataUtil.getObject(e.key, o) === DataUtil.getObject(e.key, change);
        })[0], e.key);
      });
      var stat = {
        "method": this.options.updateType + " ",
        "url": function(data, i, key) {
          if (typeof data[i][key] === "number" || DataUtil.parse.isGuid(data[i][key])) {
            return "(" + data[i][key] + ")";
          } else if (data[i][key] instanceof Date) {
            var date = data[i][key];
            return "(" + date.toJSON() + ")";
          } else {
            return "('" + data[i][key] + "')";
          }
        },
        "data": function(data, i) {
          return JSON.stringify(data[i]) + "\n\n";
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req;
    };
    ODataAdaptor2.getField = function(prop) {
      return prop.replace(/\./g, "/");
    };
    ODataAdaptor2.prototype.generateBodyContent = function(arr, e, stat, dm) {
      var req = "";
      for (var i = 0; i < arr.length; i++) {
        req += "\n" + e.cSet + "\n";
        req += this.options.changeSetContent + "\n\n";
        req += stat.method;
        if (stat.method === "POST ") {
          req += (dm.dataSource.insertUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + " HTTP/1.1\n";
        } else if (stat.method === "PUT " || stat.method === "PATCH ") {
          req += (dm.dataSource.updateUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + " HTTP/1.1\n";
        } else if (stat.method === "DELETE ") {
          req += (dm.dataSource.removeUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + " HTTP/1.1\n";
        }
        req += "Accept: " + this.options.accept + "\n";
        req += "Content-Id: " + this.pvt.changeSet++ + "\n";
        req += this.options.batchChangeSetContentType + "\n";
        if (!isNullOrUndefined(arr[i]["@odata.etag"])) {
          req += "If-Match: " + arr[i]["@odata.etag"] + "\n\n";
          delete arr[i]["@odata.etag"];
        } else {
          req += "\n";
        }
        req += stat.data(arr, i);
      }
      return req;
    };
    ODataAdaptor2.prototype.processBatchResponse = function(data, query, xhr, request, changes) {
      if (xhr && xhr.headers.get("Content-Type") && xhr.headers.get("Content-Type").indexOf("xml") !== -1) {
        return query.isCountRequired ? { result: [], count: 0 } : [];
      }
      if (request && this.options.batch && DataUtil.endsWith(request.url, this.options.batch) && request.type.toLowerCase() === "post") {
        var guid = xhr.headers.get("Content-Type");
        var cIdx = void 0;
        var jsonObj = void 0;
        var d = data + "";
        guid = guid.substring(guid.indexOf("=batchresponse") + 1);
        d = d.split(guid);
        if (d.length < 2) {
          return {};
        }
        d = d[1];
        var exVal = /(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(d);
        if (exVal) {
          d.replace(exVal[0], "");
        }
        var changeGuid = exVal ? exVal[1] : "";
        d = d.split(changeGuid);
        for (var i = d.length; i > -1; i--) {
          if (!/\bContent-ID:/i.test(d[i]) || !/\bHTTP.+201/.test(d[i])) {
            continue;
          }
          cIdx = parseInt(/\bContent-ID: (\d+)/i.exec(d[i])[1], 10);
          if (changes.addedRecords[cIdx]) {
            jsonObj = DataUtil.parse.parseJson(/^\{.+\}/m.exec(d[i])[0]);
            extend$1({}, changes.addedRecords[cIdx], this.processResponse(jsonObj));
          }
        }
        return changes;
      }
      return null;
    };
    ODataAdaptor2.prototype.compareAndRemove = function(data, original, key) {
      var _this = this;
      if (isNullOrUndefined(original)) {
        return data;
      }
      Object.keys(data).forEach(function(prop) {
        if (prop !== key && prop !== "@odata.etag") {
          if (DataUtil.isPlainObject(data[prop])) {
            _this.compareAndRemove(data[prop], original[prop]);
            var final = Object.keys(data[prop]).filter(function(data2) {
              return data2 !== "@odata.etag";
            });
            if (final.length === 0) {
              delete data[prop];
            }
          } else if (data[prop] === original[prop]) {
            delete data[prop];
          } else if (data[prop] && original[prop] && data[prop].valueOf() === original[prop].valueOf()) {
            delete data[prop];
          }
        }
      });
      return data;
    };
    return ODataAdaptor2;
  }(UrlAdaptor)
);
(function(_super) {
  __extends$t(ODataV4Adaptor, _super);
  function ODataV4Adaptor(props) {
    var _this = _super.call(this, props) || this;
    _this.options = extend$1({}, _this.options, {
      requestType: "get",
      accept: "application/json, text/javascript, */*; q=0.01",
      multipartAccept: "multipart/mixed",
      sortBy: "$orderby",
      select: "$select",
      skip: "$skip",
      take: "$top",
      count: "$count",
      search: "$search",
      where: "$filter",
      expand: "$expand",
      batch: "$batch",
      changeSet: "--changeset_",
      batchPre: "batch_",
      contentId: "Content-Id: ",
      batchContent: "Content-Type: multipart/mixed; boundary=",
      changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ",
      batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ",
      updateType: "PATCH",
      localTime: false,
      apply: "$apply"
    });
    extend$1(_this.options, props || {});
    return _this;
  }
  ODataV4Adaptor.prototype.getModuleName = function() {
    return "ODataV4Adaptor";
  };
  ODataV4Adaptor.prototype.onCount = function(e) {
    return e === true ? "true" : "";
  };
  ODataV4Adaptor.prototype.onPredicate = function(predicate, query, requiresCast) {
    var returnValue = "";
    var val = predicate.value;
    var isDate = val instanceof Date;
    if (query instanceof Query) {
      var queries = this.getQueryRequest(query);
      for (var i = 0; i < queries.filters.length; i++) {
        if (queries.filters[i].e.key === predicate.value) {
          requiresCast = true;
        }
      }
    }
    returnValue = _super.prototype.onPredicate.call(this, predicate, query, requiresCast);
    if (isDate) {
      returnValue = returnValue.replace(/datetime'(.*)'$/, "$1");
    }
    if (DataUtil.parse.isGuid(val)) {
      returnValue = returnValue.replace("guid", "").replace(/'/g, "");
    }
    return returnValue;
  };
  ODataV4Adaptor.prototype.onEachSearch = function(e) {
    var search = this.pvt.searches || [];
    search.push(e.key);
    this.pvt.searches = search;
  };
  ODataV4Adaptor.prototype.onSearch = function(e) {
    return this.pvt.searches.join(" OR ");
  };
  ODataV4Adaptor.prototype.onExpand = function(e) {
    var _this = this;
    var selected = {};
    var expanded = {};
    var expands = e.expands.slice();
    var exArr = [];
    var selects = e.selects.filter(function(item) {
      return item.indexOf(".") > -1;
    });
    selects.forEach(function(select2) {
      var splits = select2.split(".");
      if (!(splits[0] in selected)) {
        selected[splits[0]] = [];
      }
      if (splits.length === 2) {
        if (selected[splits[0]].length && Object.keys(selected).indexOf(splits[0]) !== -1) {
          if (selected[splits[0]][0].indexOf("$expand") !== -1 && selected[splits[0]][0].indexOf(";$select=") === -1) {
            selected[splits[0]][0] = selected[splits[0]][0] + ";$select=" + splits[1];
          } else {
            selected[splits[0]][0] = selected[splits[0]][0] + "," + splits[1];
          }
        } else {
          selected[splits[0]].push("$select=" + splits[1]);
        }
      } else {
        var sel = "$select=" + splits[splits.length - 1];
        var exp2 = "";
        var close_1 = "";
        for (var i = 1; i < splits.length - 1; i++) {
          exp2 = exp2 + "$expand=" + splits[i] + "(";
          close_1 = close_1 + ")";
        }
        var combineVal = exp2 + sel + close_1;
        if (selected[splits[0]].length && Object.keys(selected).indexOf(splits[0]) !== -1 && _this.expandQueryIndex(selected[splits[0]], true)) {
          var idx = _this.expandQueryIndex(selected[splits[0]]);
          selected[splits[0]][idx] = selected[splits[0]][idx] + combineVal.replace("$expand=", ",");
        } else {
          selected[splits[0]].push(combineVal);
        }
      }
    });
    Object.keys(selected).forEach(function(expand) {
      if (expands.indexOf(expand) === -1) {
        expands.push(expand);
      }
    });
    expands.forEach(function(expand) {
      expanded[expand] = expand in selected ? expand + "(" + selected[expand].join(";") + ")" : expand;
    });
    Object.keys(expanded).forEach(function(ex) {
      return exArr.push(expanded[ex]);
    });
    return exArr.join(",");
  };
  ODataV4Adaptor.prototype.expandQueryIndex = function(query, isExpand) {
    for (var i = 0; i < query.length; i++) {
      if (query[i].indexOf("$expand") !== -1) {
        return isExpand ? true : i;
      }
    }
    return isExpand ? false : 0;
  };
  ODataV4Adaptor.prototype.onDistinct = function(distinctFields) {
    var fields = distinctFields.map(function(field) {
      return ODataAdaptor.getField(field);
    }).join(",");
    return "groupby((" + fields + "))";
  };
  ODataV4Adaptor.prototype.onSelect = function(e) {
    return _super.prototype.onSelect.call(this, e.filter(function(item) {
      return item.indexOf(".") === -1;
    }));
  };
  ODataV4Adaptor.prototype.beforeSend = function(dm, request, settings) {
    if (settings.type === "POST" || settings.type === "PUT" || settings.type === "PATCH") {
      request.headers.set("Prefer", "return=representation");
    }
    request.headers.set("Accept", this.options.accept);
  };
  ODataV4Adaptor.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
    var metaName = "@odata.context";
    var metaV4Name = "@context";
    if (request && request.type === "GET" && !this.rootUrl && (data[metaName] || data[metaV4Name])) {
      var dataUrl = data[metaName] ? data[metaName].split("/$metadata#") : data[metaV4Name].split("/$metadata#");
      this.rootUrl = dataUrl[0];
      this.resourceTableName = dataUrl[1];
    }
    var pvtData = "pvtData";
    var pvt = request && request[pvtData];
    var emptyAndBatch = _super.prototype.processBatchResponse.call(this, data, query, xhr, request, changes);
    if (emptyAndBatch) {
      return emptyAndBatch;
    }
    var count = null;
    var dataCount = "@odata.count";
    var dataV4Count = "@count";
    if (query && query.isCountRequired) {
      if (dataCount in data) {
        count = data[dataCount];
      } else if (dataV4Count in data) {
        count = data[dataV4Count];
      }
    }
    data = !isNullOrUndefined(data.value) ? data.value : data;
    var args = {};
    args.count = count;
    args.result = data;
    this.getAggregateResult(pvt, data, args, null, query);
    return DataUtil.isNull(count) ? args.result : { result: args.result, count, aggregates: args.aggregates };
  };
  return ODataV4Adaptor;
})(ODataAdaptor);
(function(_super) {
  __extends$t(WebApiAdaptor, _super);
  function WebApiAdaptor() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  WebApiAdaptor.prototype.getModuleName = function() {
    return "WebApiAdaptor";
  };
  WebApiAdaptor.prototype.insert = function(dm, data, tableName) {
    return {
      type: "POST",
      url: dm.dataSource.url,
      data: JSON.stringify(data)
    };
  };
  WebApiAdaptor.prototype.remove = function(dm, keyField, value, tableName) {
    return {
      type: "DELETE",
      url: dm.dataSource.url + "/" + value,
      data: JSON.stringify(value)
    };
  };
  WebApiAdaptor.prototype.update = function(dm, keyField, value, tableName) {
    return {
      type: "PUT",
      url: dm.dataSource.url,
      data: JSON.stringify(value)
    };
  };
  WebApiAdaptor.prototype.batchRequest = function(dm, changes, e) {
    var _this = this;
    var initialGuid = e.guid = DataUtil.getGuid(this.options.batchPre);
    var url = dm.dataSource.url.replace(/\/*$/, "/" + this.options.batch);
    e.url = this.resourceTableName ? this.resourceTableName : e.url;
    var req = [];
    var _loop_1 = function(i2, x2) {
      changes.addedRecords.forEach(function(j, d) {
        var stat = {
          "method": "POST ",
          "url": function(data, i3, key) {
            return "";
          },
          "data": function(data, i3) {
            return JSON.stringify(data[i3]) + "\n\n";
          }
        };
        req.push("--" + initialGuid);
        req.push("Content-Type: application/http; msgtype=request", "");
        req.push("POST /api/" + (dm.dataSource.insertUrl || dm.dataSource.crudUrl || e.url) + stat.url(changes.addedRecords, i2, e.key) + " HTTP/1.1");
        req.push("Content-Type: application/json; charset=utf-8");
        req.push("Host: " + location.host);
        req.push("", j ? JSON.stringify(j) : "");
      });
    };
    for (var i = 0, x = changes.addedRecords.length; i < x; i++) {
      _loop_1(i);
    }
    var _loop_2 = function(i2, x2) {
      changes.changedRecords.forEach(function(j, d) {
        var stat = {
          "method": _this.options.updateType + " ",
          "url": function(data, i3, key) {
            return "";
          },
          "data": function(data, i3) {
            return JSON.stringify(data[i3]) + "\n\n";
          }
        };
        req.push("--" + initialGuid);
        req.push("Content-Type: application/http; msgtype=request", "");
        req.push("PUT /api/" + (dm.dataSource.updateUrl || dm.dataSource.crudUrl || e.url) + stat.url(changes.changedRecords, i2, e.key) + " HTTP/1.1");
        req.push("Content-Type: application/json; charset=utf-8");
        req.push("Host: " + location.host);
        req.push("", j ? JSON.stringify(j) : "");
      });
    };
    for (var i = 0, x = changes.changedRecords.length; i < x; i++) {
      _loop_2(i);
    }
    var _loop_3 = function(i2, x2) {
      changes.deletedRecords.forEach(function(j, d) {
        var state = {
          "mtd": "DELETE ",
          "url": function(data, i3, key) {
            var url2 = DataUtil.getObject(key, data[i3]);
            if (typeof url2 === "number" || DataUtil.parse.isGuid(url2)) {
              return "/" + url2;
            } else if (url2 instanceof Date) {
              var datTime = data[i3][key];
              return "/" + datTime.toJSON();
            } else {
              return "/'" + url2 + "'";
            }
          },
          "data": function(data, i3) {
            return "";
          }
        };
        req.push("--" + initialGuid);
        req.push("Content-Type: application/http; msgtype=request", "");
        req.push("DELETE /api/" + (dm.dataSource.removeUrl || dm.dataSource.crudUrl || e.url) + state.url(changes.deletedRecords, i2, e.key) + " HTTP/1.1");
        req.push("Content-Type: application/json; charset=utf-8");
        req.push("Host: " + location.host);
        req.push("", j ? JSON.stringify(j) : "");
      });
    };
    for (var i = 0, x = changes.deletedRecords.length; i < x; i++) {
      _loop_3(i);
    }
    req.push("--" + initialGuid + "--", "");
    return {
      type: "POST",
      url,
      contentType: "multipart/mixed; boundary=" + initialGuid,
      data: req.join("\r\n")
    };
  };
  WebApiAdaptor.prototype.beforeSend = function(dm, request, settings) {
    request.headers.set("Accept", "application/json, text/javascript, */*; q=0.01");
  };
  WebApiAdaptor.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
    var pvtData = "pvtData";
    var pvt = request && request[pvtData];
    var count = null;
    var args = {};
    if (request && request.type.toLowerCase() !== "post") {
      var versionCheck = xhr && request.fetchRequest.headers.get("DataServiceVersion");
      var version = versionCheck && parseInt(versionCheck, 10) || 2;
      if (query && query.isCountRequired) {
        if (!DataUtil.isNull(data.Count)) {
          count = data.Count;
        }
      }
      if (version < 3 && data.Items) {
        data = data.Items;
      }
      args.count = count;
      args.result = data;
      this.getAggregateResult(pvt, data, args, null, query);
    }
    args.result = args.result || data;
    return DataUtil.isNull(count) ? args.result : { result: args.result, count: args.count, aggregates: args.aggregates };
  };
  return WebApiAdaptor;
})(ODataAdaptor);
(function(_super) {
  __extends$t(WebMethodAdaptor, _super);
  function WebMethodAdaptor() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  WebMethodAdaptor.prototype.processQuery = function(dm, query, hierarchyFilters) {
    var obj = new UrlAdaptor().processQuery(dm, query, hierarchyFilters);
    var getData = "data";
    var data = DataUtil.parse.parseJson(obj[getData]);
    var result = {};
    var value = "value";
    if (data.param) {
      for (var i = 0; i < data.param.length; i++) {
        var param = data.param[i];
        var key = Object.keys(param)[0];
        result[key] = param[key];
      }
    }
    result[value] = data;
    var pvtData = "pvtData";
    var url = "url";
    return {
      data: JSON.stringify(result, DataUtil.parse.jsonDateReplacer),
      url: obj[url],
      pvtData: obj[pvtData],
      type: "POST",
      contentType: "application/json; charset=utf-8"
    };
  };
  return WebMethodAdaptor;
})(UrlAdaptor);
var RemoteSaveAdaptor = (
  /** @class */
  function(_super) {
    __extends$t(RemoteSaveAdaptor2, _super);
    function RemoteSaveAdaptor2() {
      return _super.call(this) || this;
    }
    RemoteSaveAdaptor2.prototype.insert = function(dm, data, tableName, query, position) {
      this.pvt.position = position;
      this.updateType = "add";
      return {
        url: dm.dataSource.insertUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend$1({}, {
          value: data,
          table: tableName,
          action: "insert"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.remove = function(dm, keyField, val, tableName, query) {
      _super.prototype.remove.call(this, dm, keyField, val);
      return {
        type: "POST",
        url: dm.dataSource.removeUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend$1({}, {
          key: val,
          keyColumn: keyField,
          table: tableName,
          action: "remove"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.update = function(dm, keyField, val, tableName, query) {
      this.updateType = "update";
      this.updateKey = keyField;
      return {
        type: "POST",
        url: dm.dataSource.updateUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend$1({}, {
          value: val,
          action: "update",
          keyColumn: keyField,
          key: val[keyField],
          table: tableName
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes, e) {
      var i;
      var newData = request ? JSON.parse(request.data) : data;
      data = newData.action === "batch" ? DataUtil.parse.parseJson(data) : data;
      if (this.updateType === "add") {
        _super.prototype.insert.call(this, ds, data, null, null, this.pvt.position);
      }
      if (this.updateType === "update") {
        _super.prototype.update.call(this, ds, this.updateKey, data);
      }
      this.updateType = void 0;
      if (data.added) {
        for (i = 0; i < data.added.length; i++) {
          _super.prototype.insert.call(this, ds, data.added[i]);
        }
      }
      if (data.changed) {
        for (i = 0; i < data.changed.length; i++) {
          _super.prototype.update.call(this, ds, e.key, data.changed[i]);
        }
      }
      if (data.deleted) {
        for (i = 0; i < data.deleted.length; i++) {
          _super.prototype.remove.call(this, ds, e.key, data.deleted[i]);
        }
      }
      return data;
    };
    RemoteSaveAdaptor2.prototype.batchRequest = function(dm, changes, e, query, original) {
      return {
        type: "POST",
        url: dm.dataSource.batchUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify(extend$1({}, {
          changed: changes.changedRecords,
          added: changes.addedRecords,
          deleted: changes.deletedRecords,
          action: "batch",
          table: e.url,
          key: e.key
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.addParams = function(options) {
      var urlParams = new UrlAdaptor();
      urlParams.addParams(options);
    };
    RemoteSaveAdaptor2.prototype.beforeSend = function(dm, request, settings) {
    };
    return RemoteSaveAdaptor2;
  }(JsonAdaptor)
);
var CustomDataAdaptor = (
  /** @class */
  function(_super) {
    __extends$t(CustomDataAdaptor2, _super);
    function CustomDataAdaptor2(props) {
      var _this = _super.call(this) || this;
      _this.options = extend$1({}, _this.options, {
        getData: function() {
        },
        addRecord: function() {
        },
        updateRecord: function() {
        },
        deleteRecord: function() {
        },
        batchUpdate: function() {
        }
      });
      extend$1(_this.options, props || {});
      return _this;
    }
    CustomDataAdaptor2.prototype.getModuleName = function() {
      return "CustomDataAdaptor";
    };
    return CustomDataAdaptor2;
  }(UrlAdaptor)
);
(function(_super) {
  __extends$t(GraphQLAdaptor, _super);
  function GraphQLAdaptor(options) {
    var _this = _super.call(this) || this;
    _this.opt = options;
    _this.schema = _this.opt.response;
    _this.query = _this.opt.query;
    _this.getVariables = _this.opt.getVariables ? _this.opt.getVariables : function() {
    };
    _this.getQuery = function() {
      return _this.query;
    };
    return _this;
  }
  GraphQLAdaptor.prototype.getModuleName = function() {
    return "GraphQLAdaptor";
  };
  GraphQLAdaptor.prototype.processQuery = function(datamanager, query) {
    var urlQuery = _super.prototype.processQuery.apply(this, arguments);
    var dm = JSON.parse(urlQuery.data);
    var keys2 = [
      "skip",
      "take",
      "sorted",
      "table",
      "select",
      "where",
      "search",
      "requiresCounts",
      "aggregates",
      "params"
    ];
    var temp = {};
    var str = "searchwhereparams";
    keys2.filter(function(e) {
      temp[e] = str.indexOf(e) > -1 ? JSON.stringify(dm[e]) : dm[e];
    });
    var vars = this.getVariables() || {};
    vars["datamanager"] = temp;
    var data = JSON.stringify({
      query: this.getQuery(),
      variables: vars
    });
    urlQuery.data = data;
    return urlQuery;
  };
  GraphQLAdaptor.prototype.processResponse = function(resData, ds, query, xhr, request) {
    var res = resData;
    var count;
    var aggregates;
    var result = getValue(this.schema.result, res.data);
    if (this.schema.count) {
      count = getValue(this.schema.count, res.data);
    }
    if (this.schema.aggregates) {
      aggregates = getValue(this.schema.aggregates, res.data);
      aggregates = !isNullOrUndefined(aggregates) ? DataUtil.parse.parseJson(aggregates) : aggregates;
    }
    var pvt = request.pvtData || {};
    var args = { result, aggregates };
    var data = args;
    if (pvt && pvt.groups && pvt.groups.length) {
      this.getAggregateResult(pvt, data, args, null, query);
    }
    return !isNullOrUndefined(count) ? { result: args.result, count, aggregates } : args.result;
  };
  GraphQLAdaptor.prototype.insert = function() {
    var inserted = _super.prototype.insert.apply(this, arguments);
    return this.generateCrudData(inserted, "insert");
  };
  GraphQLAdaptor.prototype.update = function() {
    var inserted = _super.prototype.update.apply(this, arguments);
    return this.generateCrudData(inserted, "update");
  };
  GraphQLAdaptor.prototype.remove = function() {
    var inserted = _super.prototype.remove.apply(this, arguments);
    return this.generateCrudData(inserted, "remove");
  };
  GraphQLAdaptor.prototype.batchRequest = function(dm, changes, e, query, original) {
    var batch = _super.prototype.batchRequest.apply(this, arguments);
    var bData = JSON.parse(batch.data);
    bData.key = e.key;
    batch.data = JSON.stringify(bData);
    return this.generateCrudData(batch, "batch");
  };
  GraphQLAdaptor.prototype.generateCrudData = function(crudData, action) {
    var parsed = JSON.parse(crudData.data);
    crudData.data = JSON.stringify({
      query: this.opt.getMutation(action),
      variables: parsed
    });
    return crudData;
  };
  return GraphQLAdaptor;
})(UrlAdaptor);
var CacheAdaptor = (
  /** @class */
  function(_super) {
    __extends$t(CacheAdaptor2, _super);
    function CacheAdaptor2(adaptor, timeStamp, pageSize) {
      var _this = _super.call(this) || this;
      _this.isCrudAction = false;
      _this.isInsertAction = false;
      if (!isNullOrUndefined(adaptor)) {
        _this.cacheAdaptor = adaptor;
      }
      _this.pageSize = pageSize;
      _this.guidId = DataUtil.getGuid("cacheAdaptor");
      var obj = { keys: [], results: [] };
      window.localStorage.setItem(_this.guidId, JSON.stringify(obj));
      var guid = _this.guidId;
      if (!isNullOrUndefined(timeStamp)) {
        setInterval(function() {
          var data = DataUtil.parse.parseJson(window.localStorage.getItem(guid));
          var forDel = [];
          for (var i = 0; i < data.results.length; i++) {
            var currentTime = +/* @__PURE__ */ new Date();
            var requestTime = +new Date(data.results[i].timeStamp);
            data.results[i].timeStamp = currentTime - requestTime;
            if (currentTime - requestTime > timeStamp) {
              forDel.push(i);
            }
          }
          for (var i = 0; i < forDel.length; i++) {
            data.results.splice(forDel[i], 1);
            data.keys.splice(forDel[i], 1);
          }
          window.localStorage.removeItem(guid);
          window.localStorage.setItem(guid, JSON.stringify(data));
        }, timeStamp);
      }
      return _this;
    }
    CacheAdaptor2.prototype.generateKey = function(url, query) {
      var queries = this.getQueryRequest(query);
      var singles = Query.filterQueryLists(query.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]);
      var key = url;
      var page = "onPage";
      if (page in singles) {
        key += singles[page].pageIndex;
      }
      queries.sorts.forEach(function(obj) {
        key += obj.e.direction + obj.e.fieldName;
      });
      queries.groups.forEach(function(obj) {
        key += obj.e.fieldName;
      });
      queries.searches.forEach(function(obj) {
        key += obj.e.searchKey;
      });
      for (var filter = 0; filter < queries.filters.length; filter++) {
        var currentFilter = queries.filters[filter];
        if (currentFilter.e.isComplex) {
          var newQuery = query.clone();
          newQuery.queries = [];
          for (var i = 0; i < currentFilter.e.predicates.length; i++) {
            newQuery.queries.push({ fn: "onWhere", e: currentFilter.e.predicates[i], filter: query.queries.filter });
          }
          key += currentFilter.e.condition + this.generateKey(url, newQuery);
        } else {
          key += currentFilter.e.field + currentFilter.e.operator + currentFilter.e.value;
        }
      }
      return key;
    };
    CacheAdaptor2.prototype.processQuery = function(dm, query, hierarchyFilters) {
      var key = this.generateKey(dm.dataSource.url, query);
      var cachedItems = DataUtil.parse.parseJson(window.localStorage.getItem(this.guidId));
      var data = cachedItems ? cachedItems.results[cachedItems.keys.indexOf(key)] : null;
      if (data != null && !this.isCrudAction && !this.isInsertAction) {
        return data;
      }
      this.isCrudAction = null;
      this.isInsertAction = null;
      return this.cacheAdaptor.processQuery.apply(this.cacheAdaptor, [].slice.call(arguments, 0));
    };
    CacheAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
      if (this.isInsertAction || request && this.cacheAdaptor.options.batch && DataUtil.endsWith(request.url, this.cacheAdaptor.options.batch) && request.type.toLowerCase() === "post") {
        return this.cacheAdaptor.processResponse(data, ds, query, xhr, request, changes);
      }
      data = this.cacheAdaptor.processResponse.apply(this.cacheAdaptor, [].slice.call(arguments, 0));
      var key = query ? this.generateKey(ds.dataSource.url, query) : ds.dataSource.url;
      var obj = {};
      obj = DataUtil.parse.parseJson(window.localStorage.getItem(this.guidId));
      var index = obj.keys.indexOf(key);
      if (index !== -1) {
        obj.results.splice(index, 1);
        obj.keys.splice(index, 1);
      }
      obj.results[obj.keys.push(key) - 1] = { keys: key, result: data.result, timeStamp: /* @__PURE__ */ new Date(), count: data.count };
      while (obj.results.length > this.pageSize) {
        obj.results.splice(0, 1);
        obj.keys.splice(0, 1);
      }
      window.localStorage.setItem(this.guidId, JSON.stringify(obj));
      return data;
    };
    CacheAdaptor2.prototype.beforeSend = function(dm, request, settings) {
      if (!isNullOrUndefined(this.cacheAdaptor.options.batch) && DataUtil.endsWith(settings.url, this.cacheAdaptor.options.batch) && settings.type.toLowerCase() === "post") {
        request.headers.set("Accept", this.cacheAdaptor.options.multipartAccept);
      }
      if (!dm.dataSource.crossDomain) {
        request.headers.set("Accept", this.cacheAdaptor.options.accept);
      }
    };
    CacheAdaptor2.prototype.update = function(dm, keyField, value, tableName) {
      this.isCrudAction = true;
      return this.cacheAdaptor.update(dm, keyField, value, tableName);
    };
    CacheAdaptor2.prototype.insert = function(dm, data, tableName) {
      this.isInsertAction = true;
      return this.cacheAdaptor.insert(dm, data, tableName);
    };
    CacheAdaptor2.prototype.remove = function(dm, keyField, value, tableName) {
      this.isCrudAction = true;
      return this.cacheAdaptor.remove(dm, keyField, value, tableName);
    };
    CacheAdaptor2.prototype.batchRequest = function(dm, changes, e) {
      return this.cacheAdaptor.batchRequest(dm, changes, e);
    };
    return CacheAdaptor2;
  }(UrlAdaptor)
);
var __awaiter = function(thisArg, _arguments, P, generator) {
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : new P(function(resolve2) {
        resolve2(result.value);
      }).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var __generator = function(thisArg, body) {
  var _ = { label: 0, sent: function() {
    if (t[0] & 1) throw t[1];
    return t[1];
  }, trys: [], ops: [] }, f, y, t, g;
  return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() {
    return this;
  }), g;
  function verb(n) {
    return function(v) {
      return step([n, v]);
    };
  }
  function step(op) {
    if (f) throw new TypeError("Generator is already executing.");
    while (_) try {
      if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
      if (y = 0, t) op = [op[0] & 2, t.value];
      switch (op[0]) {
        case 0:
        case 1:
          t = op;
          break;
        case 4:
          _.label++;
          return { value: op[1], done: false };
        case 5:
          _.label++;
          y = op[1];
          op = [0];
          continue;
        case 7:
          op = _.ops.pop();
          _.trys.pop();
          continue;
        default:
          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
            _ = 0;
            continue;
          }
          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
            _.label = op[1];
            break;
          }
          if (op[0] === 6 && _.label < t[1]) {
            _.label = t[1];
            t = op;
            break;
          }
          if (t && _.label < t[2]) {
            _.label = t[2];
            _.ops.push(op);
            break;
          }
          if (t[2]) _.ops.pop();
          _.trys.pop();
          continue;
      }
      op = body.call(thisArg, _);
    } catch (e) {
      op = [6, e];
      y = 0;
    } finally {
      f = t = 0;
    }
    if (op[0] & 5) throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
};
var DataManager = (
  /** @class */
  function() {
    function DataManager2(dataSource, query, adaptor) {
      var _this = this;
      this.dateParse = true;
      this.timeZoneHandling = true;
      this.persistQuery = {};
      this.isInitialLoad = false;
      this.requests = [];
      this.isEnableCache = false;
      this.isInitialLoad = true;
      this.isEnableCache = false;
      if (!dataSource && !this.dataSource) {
        dataSource = [];
      }
      adaptor = adaptor || dataSource.adaptor;
      if (dataSource && dataSource.timeZoneHandling === false) {
        this.timeZoneHandling = dataSource.timeZoneHandling;
      }
      var data;
      if (dataSource instanceof Array) {
        data = {
          json: dataSource,
          offline: true
        };
      } else if (typeof dataSource === "object") {
        if (!dataSource.json) {
          dataSource.json = [];
        }
        if (!dataSource.enablePersistence) {
          dataSource.enablePersistence = false;
        }
        if (!dataSource.id) {
          dataSource.id = "";
        }
        if (!dataSource.ignoreOnPersist) {
          dataSource.ignoreOnPersist = [];
        }
        data = {
          url: dataSource.url,
          insertUrl: dataSource.insertUrl,
          removeUrl: dataSource.removeUrl,
          updateUrl: dataSource.updateUrl,
          crudUrl: dataSource.crudUrl,
          batchUrl: dataSource.batchUrl,
          json: dataSource.json,
          headers: dataSource.headers,
          accept: dataSource.accept,
          data: dataSource.data,
          enableCache: dataSource.enableCache,
          timeTillExpiration: dataSource.timeTillExpiration,
          cachingPageSize: dataSource.cachingPageSize,
          enableCaching: dataSource.enableCaching,
          requestType: dataSource.requestType,
          key: dataSource.key,
          crossDomain: dataSource.crossDomain,
          jsonp: dataSource.jsonp,
          dataType: dataSource.dataType,
          offline: dataSource.offline !== void 0 ? dataSource.offline : dataSource.adaptor instanceof RemoteSaveAdaptor || dataSource.adaptor instanceof CustomDataAdaptor ? false : dataSource.url ? false : true,
          requiresFormat: dataSource.requiresFormat,
          enablePersistence: dataSource.enablePersistence,
          id: dataSource.id,
          ignoreOnPersist: dataSource.ignoreOnPersist
        };
      } else {
        DataUtil.throwError("DataManager: Invalid arguments");
      }
      if (data.requiresFormat === void 0 && !DataUtil.isCors()) {
        data.requiresFormat = isNullOrUndefined(data.crossDomain) ? true : data.crossDomain;
      }
      if (data.dataType === void 0) {
        data.dataType = "json";
      }
      this.isEnableCache = data.enableCache;
      this.dataSource = data;
      this.defaultQuery = query;
      if (this.dataSource.enablePersistence && this.dataSource.id) {
        window.addEventListener("unload", this.setPersistData.bind(this));
      }
      if (data.url && data.offline && !data.json.length) {
        this.isDataAvailable = false;
        this.adaptor = adaptor || new ODataAdaptor();
        this.dataSource.offline = false;
        this.ready = this.executeQuery(query || new Query());
        this.ready.then(function(e) {
          _this.dataSource.offline = true;
          _this.isDataAvailable = true;
          data.json = e.result;
          _this.adaptor = new JsonAdaptor();
        });
      } else {
        this.adaptor = data.offline ? new JsonAdaptor() : new ODataAdaptor();
      }
      if (!data.jsonp && this.adaptor instanceof ODataAdaptor) {
        data.jsonp = "callback";
      }
      this.adaptor = adaptor || this.adaptor;
      if (this.isEnableCache) {
        this.guidId = DataUtil.getGuid("cacheAdaptor");
        var obj = { keys: [], results: [] };
        window.localStorage.setItem(this.guidId, JSON.stringify(obj));
      }
      if (data.enableCaching) {
        this.adaptor = new CacheAdaptor(this.adaptor, data.timeTillExpiration, data.cachingPageSize);
      }
      return this;
    }
    Object.defineProperty(DataManager2.prototype, "moduleName", {
      /** @hidden */
      get: function() {
        return "datamanager";
      },
      enumerable: true,
      configurable: true
    });
    DataManager2.prototype.getPersistedData = function(id) {
      var persistedData = localStorage.getItem(id || this.dataSource.id);
      return JSON.parse(persistedData);
    };
    DataManager2.prototype.setPersistData = function(e, id, persistData) {
      localStorage.setItem(id || this.dataSource.id, JSON.stringify(persistData || this.persistQuery));
    };
    DataManager2.prototype.setPersistQuery = function(query) {
      var _this = this;
      var persistedQuery = this.getPersistedData();
      if (this.isInitialLoad && persistedQuery && Object.keys(persistedQuery).length) {
        this.persistQuery = persistedQuery;
        this.persistQuery.queries = this.persistQuery.queries.filter(function(query2) {
          if (_this.dataSource.ignoreOnPersist && _this.dataSource.ignoreOnPersist.length) {
            if (query2.fn && _this.dataSource.ignoreOnPersist.some(function(keyword) {
              return query2.fn === keyword;
            })) {
              return false;
            }
          }
          if (query2.fn === "onWhere") {
            var e = query2.e;
            if (e && e.isComplex && e.predicates instanceof Array) {
              var allPredicates = e.predicates.map(function(predicateObj) {
                if (predicateObj.predicates && predicateObj.predicates instanceof Array) {
                  var nestedPredicates = predicateObj.predicates.map(function(nestedPredicate) {
                    var field2 = nestedPredicate.field, operator2 = nestedPredicate.operator, value2 = nestedPredicate.value, ignoreCase2 = nestedPredicate.ignoreCase, ignoreAccent2 = nestedPredicate.ignoreAccent, matchCase2 = nestedPredicate.matchCase;
                    return new Predicate$1(field2, operator2, value2, ignoreCase2, ignoreAccent2, matchCase2);
                  });
                  return predicateObj.condition === "and" ? Predicate$1.and(nestedPredicates) : Predicate$1.or(nestedPredicates);
                } else {
                  var field = predicateObj.field, operator = predicateObj.operator, value = predicateObj.value, ignoreCase = predicateObj.ignoreCase, ignoreAccent = predicateObj.ignoreAccent, matchCase = predicateObj.matchCase;
                  return new Predicate$1(field, operator, value, ignoreCase, ignoreAccent, matchCase);
                }
              });
              query2.e = new Predicate$1(allPredicates[0], e.condition, allPredicates.slice(1));
            }
          }
          return true;
        });
        var newQuery = extend$1(new Query(), this.persistQuery);
        this.isInitialLoad = false;
        return newQuery;
      } else {
        this.persistQuery = query;
        this.isInitialLoad = false;
        return query;
      }
    };
    DataManager2.prototype.setDefaultQuery = function(query) {
      this.defaultQuery = query;
      return this;
    };
    DataManager2.prototype.executeLocal = function(query) {
      if (!this.defaultQuery && !(query instanceof Query)) {
        DataUtil.throwError("DataManager - executeLocal() : A query is required to execute");
      }
      if (!this.dataSource.json) {
        DataUtil.throwError("DataManager - executeLocal() : Json data is required to execute");
      }
      if (this.dataSource.enablePersistence && this.dataSource.id) {
        query = this.setPersistQuery(query);
      }
      query = query || this.defaultQuery;
      var result = this.adaptor.processQuery(this, query);
      if (query.subQuery) {
        var from = query.subQuery.fromTable;
        var lookup = query.subQuery.lookups;
        var res = query.isCountRequired ? result.result : result;
        if (lookup && lookup instanceof Array) {
          DataUtil.buildHierarchy(query.subQuery.fKey, from, res, lookup, query.subQuery.key);
        }
        for (var j = 0; j < res.length; j++) {
          if (res[j][from] instanceof Array) {
            res[j] = extend$1({}, {}, res[j]);
            res[j][from] = this.adaptor.processResponse(query.subQuery.using(new DataManager2(res[j][from].slice(0))).executeLocal(), this, query);
          }
        }
      }
      return this.adaptor.processResponse(result, this, query);
    };
    DataManager2.prototype.executeQuery = function(query, done, fail, always) {
      var _this = this;
      var makeRequest = "makeRequest";
      if (this.dataSource.enablePersistence && this.dataSource.id) {
        query = this.setPersistQuery(query);
      }
      if (typeof query === "function") {
        always = fail;
        fail = done;
        done = query;
        query = null;
      }
      if (!query) {
        query = this.defaultQuery;
      }
      if (!(query instanceof Query)) {
        DataUtil.throwError("DataManager - executeQuery() : A query is required to execute");
      }
      var deffered = new Deferred();
      var args = { query };
      if (!this.dataSource.offline && (this.dataSource.url !== void 0 && this.dataSource.url !== "") || !isNullOrUndefined(this.adaptor[makeRequest]) || this.isCustomDataAdaptor(this.adaptor)) {
        var result = this.isEnableCache ? this.processQuery(query) : this.adaptor.processQuery(this, query);
        if (!isNullOrUndefined(this.adaptor[makeRequest])) {
          this.adaptor[makeRequest](result, deffered, args, query);
        } else if (!isNullOrUndefined(result.url) || this.isCustomDataAdaptor(this.adaptor)) {
          this.requests = [];
          this.makeRequest(result, deffered, args, query);
        } else {
          args = DataManager2.getDeferedArgs(query, result, args);
          deffered.resolve(args);
        }
      } else {
        DataManager2.nextTick(function() {
          var res = _this.executeLocal(query);
          args = DataManager2.getDeferedArgs(query, res, args);
          deffered.resolve(args);
        });
      }
      if (done || fail) {
        deffered.promise.then(done, fail);
      }
      if (always) {
        deffered.promise.then(always, always);
      }
      return deffered.promise;
    };
    DataManager2.prototype.getQueryRequest = function(query) {
      var req = { sorts: [], groups: [], filters: [], searches: [], aggregates: [] };
      req.sorts = Query.filterQueries(query.queries, "onSortBy");
      req.groups = Query.filterQueries(query.queries, "onGroup");
      req.filters = Query.filterQueries(query.queries, "onWhere");
      req.searches = Query.filterQueries(query.queries, "onSearch");
      req.aggregates = Query.filterQueries(query.queries, "onAggregates");
      return req;
    };
    DataManager2.prototype.generateKey = function(url, query) {
      var queries = this.getQueryRequest(query);
      var singles = Query.filterQueryLists(query.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]);
      var key = url;
      var page = "onPage";
      queries.sorts.forEach(function(obj2) {
        key += obj2.e.direction + obj2.e.fieldName;
      });
      queries.groups.forEach(function(obj2) {
        key += obj2.e.fieldName;
      });
      queries.searches.forEach(function(obj2) {
        key += obj2.e.searchKey;
      });
      for (var filter = 0; filter < queries.filters.length; filter++) {
        var currentFilter = queries.filters[filter];
        if (currentFilter.e.isComplex) {
          var newQuery = query.clone();
          newQuery.queries = [];
          for (var i = 0; i < currentFilter.e.predicates.length; i++) {
            newQuery.queries.push({ fn: "onWhere", e: currentFilter.e.predicates[i], filter: query.queries.filter });
          }
          key += currentFilter.e.condition + this.generateKey(url, newQuery);
        } else {
          key += currentFilter.e.field + currentFilter.e.operator + currentFilter.e.value;
        }
      }
      if (!isNullOrUndefined(this.previousCacheQuery) && this.previousCacheQuery !== key) {
        var obj = { keys: [], results: [] };
        window.localStorage.setItem(this.guidId, JSON.stringify(obj));
      }
      this.previousCacheQuery = key;
      if (page in singles) {
        key += singles[page].pageIndex;
      }
      return key;
    };
    DataManager2.prototype.processQuery = function(query) {
      var key = this.generateKey(this.dataSource.url, query);
      var cachedItems = JSON.parse(window.localStorage.getItem(this.guidId));
      var data = cachedItems ? cachedItems.results[cachedItems.keys.indexOf(key)] : null;
      if (data != null) {
        return DataUtil.parse.parseJson(data);
      }
      return this.adaptor.processQuery(this, query);
    };
    DataManager2.getDeferedArgs = function(query, result, args) {
      if (query.isCountRequired) {
        args.result = result.result;
        args.count = result.count;
        args.aggregates = result.aggregates;
      } else {
        args.result = result;
      }
      return args;
    };
    DataManager2.nextTick = function(fn) {
      (window.setImmediate || window.setTimeout)(fn, 0);
    };
    DataManager2.prototype.extendRequest = function(url, fnSuccess, fnFail) {
      return extend$1({}, {
        type: "GET",
        dataType: this.dataSource.dataType,
        crossDomain: this.dataSource.crossDomain,
        jsonp: this.dataSource.jsonp,
        cache: true,
        processData: false,
        onSuccess: fnSuccess,
        onFailure: fnFail
      }, url);
    };
    DataManager2.prototype.makeRequest = function(url, deffered, args, query) {
      var _this = this;
      var isSelector = !!query.subQuerySelector;
      var fnFail = function(e) {
        args.error = e;
        deffered.reject(args);
      };
      var process = function(data, count, xhr, request2, actual, aggregates, virtualSelectRecords) {
        args.xhr = xhr;
        args.count = count ? parseInt(count.toString(), 10) : 0;
        args.result = data;
        args.request = request2;
        args.aggregates = aggregates;
        args.actual = actual;
        args.virtualSelectRecords = virtualSelectRecords;
        deffered.resolve(args);
      };
      var fnQueryChild = function(data, selector) {
        var subDeffer = new Deferred();
        var childArgs = { parent: args };
        query.subQuery.isChild = true;
        var subUrl = _this.adaptor.processQuery(_this, query.subQuery, data ? _this.adaptor.processResponse(data) : selector);
        var childReq = _this.makeRequest(subUrl, subDeffer, childArgs, query.subQuery);
        if (!isSelector) {
          subDeffer.then(function(subData) {
            if (data) {
              DataUtil.buildHierarchy(query.subQuery.fKey, query.subQuery.fromTable, data, subData, query.subQuery.key);
              process(data, subData.count, subData.xhr);
            }
          }, fnFail);
        }
        return childReq;
      };
      var fnSuccess = function(data, request2) {
        if (_this.isGraphQLAdaptor(_this.adaptor)) {
          if (!isNullOrUndefined(data["errors"])) {
            return fnFail(data["errors"]);
          }
        }
        if (_this.isCustomDataAdaptor(_this.adaptor)) {
          request2 = extend$1({}, _this.fetchReqOption, request2);
        }
        if (request2.contentType.indexOf("xml") === -1 && _this.dateParse && !_this.isEnableCache) {
          data = DataUtil.parse.parseJson(data);
        }
        var result;
        var promise2 = _this.afterReponseRequest(data);
        promise2.then(function(data2) {
          result = _this.adaptor.processResponse(data2, _this, query, request2.fetchRequest, request2);
          if (_this.isEnableCache) {
            var key = query ? _this.generateKey(_this.dataSource.url, query) : _this.dataSource.url;
            var obj = {};
            obj = JSON.parse(window.localStorage.getItem(_this.guidId));
            var index = obj.keys.indexOf(key);
            if (index !== -1) {
              obj.results.splice(index, 1);
              obj.keys.splice(index, 1);
            }
            obj.results[obj.keys.push(key) - 1] = { keys: key, result: result.result, timeStamp: /* @__PURE__ */ new Date(), count: result.count };
            window.localStorage.setItem(_this.guidId, JSON.stringify(obj));
          }
          if (request2.contentType.indexOf("xml") === -1 && _this.dateParse && _this.isEnableCache) {
            result = DataUtil.parse.parseJson(result);
          }
          var count = 0;
          var aggregates = null;
          var virtualSelectRecords = "virtualSelectRecords";
          var virtualRecords = data2[virtualSelectRecords];
          if (query.isCountRequired) {
            count = result.count;
            aggregates = result.aggregates;
            result = result.result;
          }
          if (!query.subQuery) {
            process(result, count, request2.fetchRequest, request2.type, data2, aggregates, virtualRecords);
            return;
          }
          if (!isSelector) {
            fnQueryChild(result, request2);
          }
        }).catch(function(e) {
          return _this.dataManagerFailure(e, deffered, args);
        });
      };
      var req = this.extendRequest(url, fnSuccess, fnFail);
      if (!this.isCustomDataAdaptor(this.adaptor)) {
        var promise = this.useMiddleware(req);
        var fetch_1;
        promise.then(function(response) {
          fetch_1 = new Fetch(req);
          fetch_1.beforeSend = function() {
            _this.beforeSend(fetch_1.fetchRequest, fetch_1, response);
          };
          req = fetch_1.send();
          req.catch(function(e) {
            return true;
          });
          _this.requests.push(fetch_1);
        }).catch(function(e) {
          return _this.dataManagerFailure(e, deffered, args);
        });
      } else {
        this.fetchReqOption = req;
        var request = req;
        this.adaptor.options.getData({
          data: request.data,
          onSuccess: request.onSuccess,
          onFailure: request.onFailure
        });
      }
      if (isSelector) {
        var promise = void 0;
        var res = query.subQuerySelector.call(this, { query: query.subQuery, parent: query });
        if (res && res.length) {
          promise = Promise.all([req, fnQueryChild(null, res)]);
          promise.then(function() {
            var args2 = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              args2[_i] = arguments[_i];
            }
            var result = args2[0];
            var pResult = _this.adaptor.processResponse(result[0], _this, query, _this.requests[0].fetchRequest, _this.requests[0]);
            var count = 0;
            if (query.isCountRequired) {
              count = pResult.count;
              pResult = pResult.result;
            }
            var cResult = _this.adaptor.processResponse(result[1], _this, query.subQuery, _this.requests[1].fetchRequest, _this.requests[1]);
            count = 0;
            if (query.subQuery.isCountRequired) {
              count = cResult.count;
              cResult = cResult.result;
            }
            DataUtil.buildHierarchy(query.subQuery.fKey, query.subQuery.fromTable, pResult, cResult, query.subQuery.key);
            isSelector = false;
            process(pResult, count, _this.requests[0].fetchRequest);
          });
        } else {
          isSelector = false;
        }
      }
      return req;
    };
    DataManager2.prototype.dataManagerFailure = function(e, deffered, args) {
      args.error = e;
      deffered.reject(args);
    };
    DataManager2.prototype.afterReponseRequest = function(data) {
      return __awaiter(this, void 0, void 0, function() {
        var reponse, deffered;
        return __generator(this, function(_a) {
          switch (_a.label) {
            case 0:
              return [4, this.applyPostRequestMiddlewares(data)];
            case 1:
              reponse = _a.sent();
              deffered = new Deferred();
              deffered.resolve(reponse);
              return [2, deffered.promise];
          }
        });
      });
    };
    DataManager2.prototype.applyPostRequestMiddlewares = function(response) {
      return __awaiter(this, void 0, void 0, function() {
        return __generator(this, function(_a) {
          return [2, response];
        });
      });
    };
    DataManager2.prototype.useMiddleware = function(request) {
      return __awaiter(this, void 0, void 0, function() {
        var reponse, deffered;
        return __generator(this, function(_a) {
          switch (_a.label) {
            case 0:
              return [4, this.applyPreRequestMiddlewares(request)];
            case 1:
              reponse = _a.sent();
              deffered = new Deferred();
              deffered.resolve(reponse);
              return [2, deffered.promise];
          }
        });
      });
    };
    DataManager2.prototype.applyPreRequestMiddlewares = function(request) {
      return __awaiter(this, void 0, void 0, function() {
        return __generator(this, function(_a) {
          return [2, request];
        });
      });
    };
    DataManager2.prototype.beforeSend = function(request, settings, response) {
      this.adaptor.beforeSend(this, request, settings);
      var headers = [];
      if (this.dataSource.headers) {
        headers = headers.concat(this.dataSource.headers);
      }
      var props;
      if (response && response.headers) {
        headers = headers.concat(response.headers);
      }
      for (var i = 0; headers && i < headers.length; i++) {
        props = [];
        var keys2 = Object.keys(headers[i]);
        for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
          var prop = keys_1[_i];
          props.push(prop);
          request.headers.set(prop, headers[i][prop]);
        }
      }
    };
    DataManager2.prototype.saveChanges = function(changes, key, tableName, query, original) {
      var _this = this;
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var args = {
        url: tableName,
        key: key || this.dataSource.key
      };
      var req = this.adaptor.batchRequest(this, changes, args, query || new Query(), original);
      var dofetchRequest = "dofetchRequest";
      if (this.dataSource.offline) {
        return req;
      }
      if (!isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](req);
      } else if (!this.isCustomDataAdaptor(this.adaptor)) {
        var deff_1 = new Deferred();
        var fetch_2 = new Fetch(req);
        fetch_2.beforeSend = function() {
          _this.beforeSend(fetch_2.fetchRequest, fetch_2);
        };
        fetch_2.onSuccess = function(data, request) {
          if (_this.isGraphQLAdaptor(_this.adaptor)) {
            if (!isNullOrUndefined(data["errors"])) {
              fetch_2.onFailure(JSON.stringify(data["errors"]));
            }
          }
          deff_1.resolve(_this.adaptor.processResponse(data, _this, null, request.fetchRequest, request, changes, args));
        };
        fetch_2.onFailure = function(e) {
          deff_1.reject([{ error: e }]);
        };
        fetch_2.send().catch(function(e) {
          return true;
        });
        return deff_1.promise;
      } else {
        return this.dofetchRequest(req, this.adaptor.options.batchUpdate, changes);
      }
    };
    DataManager2.prototype.insert = function(data, tableName, query, position) {
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var req = this.adaptor.insert(this, data, tableName, query, position);
      var dofetchRequest = "dofetchRequest";
      if (this.dataSource.offline) {
        return req;
      }
      if (!isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](req);
      } else {
        return this.dofetchRequest(req, this.adaptor.options.addRecord);
      }
    };
    DataManager2.prototype.remove = function(keyField, value, tableName, query) {
      if (typeof value === "object") {
        value = DataUtil.getObject(keyField, value);
      }
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var res = this.adaptor.remove(this, keyField, value, tableName, query);
      var dofetchRequest = "dofetchRequest";
      if (this.dataSource.offline) {
        return res;
      }
      if (!isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](res);
      } else {
        var remove2 = this.adaptor.options.deleteRecord;
        return this.dofetchRequest(res, remove2);
      }
    };
    DataManager2.prototype.update = function(keyField, value, tableName, query, original) {
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      if (this.isEnableCache) {
        this.cacheQuery = this.generateKey(this.dataSource.url, query);
      }
      var res = this.adaptor.update(this, keyField, value, tableName, query, original);
      var dofetchRequest = "dofetchRequest";
      if (this.dataSource.offline) {
        return res;
      }
      if (!isNullOrUndefined(this.adaptor[dofetchRequest])) {
        return this.adaptor[dofetchRequest](res);
      } else {
        var update = this.adaptor.options.updateRecord;
        return this.dofetchRequest(res, update);
      }
    };
    DataManager2.prototype.isCustomDataAdaptor = function(dataSource) {
      return this.adaptor.getModuleName && this.adaptor.getModuleName() === "CustomDataAdaptor";
    };
    DataManager2.prototype.isGraphQLAdaptor = function(dataSource) {
      return this.adaptor.getModuleName && this.adaptor.getModuleName() === "GraphQLAdaptor";
    };
    DataManager2.prototype.successFunc = function(record, request, changes) {
      if (this.isGraphQLAdaptor(this.adaptor)) {
        var data = typeof record === "object" ? record : JSON.parse(record);
        if (!isNullOrUndefined(data["errors"])) {
          this.failureFunc(JSON.stringify(data["errors"]));
        }
      }
      if (this.isCustomDataAdaptor(this.adaptor)) {
        request = extend$1({}, this.fetchReqOption, request);
      }
      try {
        DataUtil.parse.parseJson(record);
      } catch (e) {
        record = [];
      }
      if (this.isEnableCache) {
        var requests = JSON.parse(request.data);
        if (requests.action === "insert" || requests.action === "remove") {
          var obj = { keys: [], results: [] };
          window.localStorage.setItem(this.guidId, JSON.stringify(obj));
        } else if (requests.action === "update") {
          var cachedItems = JSON.parse(window.localStorage.getItem(this.guidId));
          var data = cachedItems ? cachedItems.results[cachedItems.keys.indexOf(this.cacheQuery)] : null;
          if (data && data.result) {
            var cacheData = data.result;
            for (var i = 0; i < cacheData.length; i++) {
              if (cacheData[i][requests.keyColumn] === requests.key) {
                cacheData[i] = requests.value;
                window.localStorage.setItem(this.guidId, JSON.stringify(cachedItems));
                break;
              }
            }
          }
        }
      }
      record = this.adaptor.processResponse(DataUtil.parse.parseJson(record), this, null, request.fetchRequest, request, changes);
      this.fetchDeffered.resolve(record);
    };
    DataManager2.prototype.failureFunc = function(e) {
      if (this.isEnableCache) {
        this.cacheQuery = "";
      }
      this.fetchDeffered.reject([{ error: e }]);
    };
    DataManager2.prototype.dofetchRequest = function(res, fetchFunc, changes) {
      var _this = this;
      res = extend$1({}, {
        type: "POST",
        contentType: "application/json; charset=utf-8",
        processData: false
      }, res);
      this.fetchDeffered = new Deferred();
      if (!this.isCustomDataAdaptor(this.adaptor)) {
        var fetch_3 = new Fetch(res);
        fetch_3.beforeSend = function() {
          _this.beforeSend(fetch_3.fetchRequest, fetch_3);
        };
        fetch_3.onSuccess = this.successFunc.bind(this);
        fetch_3.onFailure = this.failureFunc.bind(this);
        fetch_3.send().catch(function(e) {
          return true;
        });
      } else {
        this.fetchReqOption = res;
        fetchFunc.call(this, {
          data: res.data,
          onSuccess: this.successFunc.bind(this),
          onFailure: this.failureFunc.bind(this),
          changes
        });
      }
      return this.fetchDeffered.promise;
    };
    DataManager2.prototype.clearPersistence = function() {
      window.removeEventListener("unload", this.setPersistData.bind(this));
      this.dataSource.enablePersistence = false;
      this.persistQuery = {};
      window.localStorage.setItem(this.dataSource.id, "[]");
    };
    return DataManager2;
  }()
);
var Deferred = (
  /** @class */
  /* @__PURE__ */ function() {
    function Deferred2() {
      var _this = this;
      this.promise = new Promise(function(resolve, reject) {
        _this.resolve = resolve;
        _this.reject = reject;
      });
      this.then = this.promise.then.bind(this.promise);
      this.catch = this.promise.catch.bind(this.promise);
    }
    return Deferred2;
  }()
);
var cssClass = {
  li: "e-list-item",
  ul: "e-list-parent e-ul",
  group: "e-list-group-item",
  icon: "e-list-icon",
  text: "e-list-text",
  check: "e-list-check",
  textContent: "e-text-content",
  hasChild: "e-has-child",
  level: "e-level",
  url: "e-list-url",
  disabled: "e-disabled",
  image: "e-list-img",
  iconWrapper: "e-icon-wrapper",
  anchorWrap: "e-anchor-wrap",
  navigable: "e-navigable"
};
var ListBase;
(function(ListBase2) {
  ListBase2.defaultMappedFields = {
    id: "id",
    text: "text",
    url: "url",
    value: "value",
    isChecked: "isChecked",
    enabled: "enabled",
    expanded: "expanded",
    selected: "selected",
    iconCss: "iconCss",
    child: "child",
    isVisible: "isVisible",
    hasChildren: "hasChildren",
    tooltip: "tooltip",
    htmlAttributes: "htmlAttributes",
    urlAttributes: "urlAttributes",
    imageAttributes: "imageAttributes",
    imageUrl: "imageUrl",
    groupBy: null,
    sortBy: null
  };
  var defaultAriaAttributes = {
    level: 1,
    listRole: "presentation",
    itemRole: "presentation",
    groupItemRole: "group",
    itemText: "list-item",
    wrapperRole: "presentation"
  };
  var defaultListBaseOptions = {
    showCheckBox: false,
    showIcon: false,
    enableHtmlSanitizer: false,
    expandCollapse: false,
    fields: ListBase2.defaultMappedFields,
    ariaAttributes: defaultAriaAttributes,
    listClass: "",
    itemClass: "",
    processSubChild: false,
    sortOrder: "None",
    template: null,
    groupTemplate: null,
    headerTemplate: null,
    expandIconClass: "e-icon-collapsible",
    moduleName: "list",
    expandIconPosition: "Right",
    itemNavigable: false
  };
  function createList(createElement2, dataSource, options, isSingleLevel, componentInstance) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var ariaAttributes = extend$1({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var type = typeofData(dataSource).typeof;
    if (type === "string" || type === "number") {
      return createListFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance);
    } else {
      return createListFromJson(createElement2, dataSource, options, ariaAttributes.level, isSingleLevel, componentInstance);
    }
  }
  ListBase2.createList = createList;
  function createListFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance) {
    var subChild = createListItemFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance);
    return generateUL(createElement2, subChild, null, options);
  }
  ListBase2.createListFromArray = createListFromArray;
  function createListItemFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance) {
    var subChild = [];
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    cssClass = getModuleClass(curOpt.moduleName);
    var id = generateId();
    for (var i = 0; i < dataSource.length; i++) {
      if (isNullOrUndefined(dataSource[i])) {
        continue;
      }
      var li = void 0;
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: dataSource[i],
          options: curOpt
        };
        curOpt.itemCreating(curData);
      }
      if (isSingleLevel) {
        li = generateSingleLevelLI(createElement2, dataSource[i], void 0, null, null, [], null, id, i, options);
      } else {
        li = generateLI(createElement2, dataSource[i], void 0, null, null, options, componentInstance);
      }
      if (curOpt.itemCreated && typeof curOpt.itemCreated === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: dataSource[i],
          item: li,
          options: curOpt
        };
        curOpt.itemCreated(curData);
      }
      subChild.push(li);
    }
    return subChild;
  }
  ListBase2.createListItemFromArray = createListItemFromArray;
  function createListItemFromJson(createElement2, dataSource, options, level, isSingleLevel, componentInstance) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    cssClass = getModuleClass(curOpt.moduleName);
    var fields = componentInstance && (componentInstance.getModuleName() === "listview" || componentInstance.getModuleName() === "multiselect") ? curOpt.fields : extend$1({}, ListBase2.defaultMappedFields, curOpt.fields);
    var ariaAttributes = extend$1({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var id;
    var checkboxElement = [];
    if (level) {
      ariaAttributes.level = level;
    }
    var child = [];
    var li;
    var anchorElement;
    if (dataSource && dataSource.length && !isNullOrUndefined(typeofData(dataSource).item) && !Object.prototype.hasOwnProperty.call(typeofData(dataSource).item, fields.id)) {
      id = generateId();
    }
    for (var i = 0; i < dataSource.length; i++) {
      var fieldData = getFieldValues(dataSource[i], fields);
      if (isNullOrUndefined(dataSource[i])) {
        continue;
      }
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: fieldData[fields.text],
          options: curOpt,
          fields
        };
        curOpt.itemCreating(curData);
      }
      var curItem = dataSource[i];
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        fieldData = getFieldValues(dataSource[i], fields);
      }
      if (Object.prototype.hasOwnProperty.call(fieldData, fields.id) && !isNullOrUndefined(fieldData[fields.id])) {
        id = fieldData[fields.id];
      }
      var innerEle = [];
      if (curOpt.showCheckBox) {
        if (curOpt.itemNavigable && (fieldData[fields.url] || fieldData[fields.urlAttributes])) {
          checkboxElement.push(createElement2("input", { className: cssClass.check, attrs: { type: "checkbox" } }));
        } else {
          innerEle.push(createElement2("input", { className: cssClass.check, attrs: { type: "checkbox" } }));
        }
      }
      if (isSingleLevel === true) {
        if (curOpt.showIcon && Object.prototype.hasOwnProperty.call(fieldData, fields.iconCss) && !isNullOrUndefined(fieldData[fields.iconCss])) {
          innerEle.push(createElement2("span", { className: cssClass.icon + " " + fieldData[fields.iconCss] }));
        }
        li = generateSingleLevelLI(createElement2, curItem, fieldData, fields, curOpt.itemClass, innerEle, Object.prototype.hasOwnProperty.call(curItem, "isHeader") && curItem.isHeader ? true : false, id, i, options);
        anchorElement = li.querySelector("." + cssClass.anchorWrap);
        if (Object.prototype.hasOwnProperty.call(fieldData, fields.tooltip)) {
          var tooltipText = fieldData[fields.tooltip];
          if (options && options.enableHtmlSanitizer) {
            tooltipText = SanitizeHtmlHelper.sanitize(tooltipText);
          } else {
            var tooltipTextElement = createElement2("span", { innerHTML: tooltipText });
            tooltipText = tooltipTextElement.innerText;
            tooltipTextElement = null;
          }
          li.setAttribute("title", tooltipText);
        }
        if (curOpt.itemNavigable && checkboxElement.length) {
          prepend(checkboxElement, li.firstElementChild);
        }
      } else {
        li = generateLI(createElement2, curItem, fieldData, fields, curOpt.itemClass, options, componentInstance);
        li.classList.add(cssClass.level + "-" + ariaAttributes.level);
        li.setAttribute("aria-level", ariaAttributes.level.toString());
        if (ariaAttributes.groupItemRole === "presentation" || ariaAttributes.itemRole === "presentation") {
          li.removeAttribute("aria-level");
        }
        anchorElement = li.querySelector("." + cssClass.anchorWrap);
        if (Object.prototype.hasOwnProperty.call(fieldData, fields.tooltip)) {
          var tooltipText = fieldData[fields.tooltip];
          if (options && options.enableHtmlSanitizer) {
            tooltipText = SanitizeHtmlHelper.sanitize(tooltipText);
          } else {
            var tooltipTextElement = createElement2("span", { innerHTML: tooltipText });
            tooltipText = tooltipTextElement.innerText;
            tooltipTextElement = null;
          }
          li.setAttribute("title", tooltipText);
        }
        if (Object.prototype.hasOwnProperty.call(fieldData, fields.htmlAttributes) && fieldData[fields.htmlAttributes]) {
          var htmlAttributes = fieldData[fields.htmlAttributes];
          if ("class" in htmlAttributes && typeof htmlAttributes["class"] === "string" && htmlAttributes["class"].trim() === "") {
            delete htmlAttributes["class"];
          }
          setAttribute(li, htmlAttributes);
        }
        if (Object.prototype.hasOwnProperty.call(fieldData, fields.enabled) && fieldData[fields.enabled] === false) {
          li.classList.add(cssClass.disabled);
        }
        if (Object.prototype.hasOwnProperty.call(fieldData, fields.isVisible) && fieldData[fields.isVisible] === false) {
          li.style.display = "none";
        }
        if (Object.prototype.hasOwnProperty.call(fieldData, fields.imageUrl) && !isNullOrUndefined(fieldData[fields.imageUrl]) && !curOpt.template) {
          var attr = { src: fieldData[fields.imageUrl], alt: !isNullOrUndefined(fieldData.name) ? "Displaying " + fieldData.name + " Image" : "Displaying Image" };
          merge(attr, fieldData[fields.imageAttributes]);
          var imageElemnt = createElement2("img", { className: cssClass.image, attrs: attr });
          if (anchorElement) {
            anchorElement.insertAdjacentElement("afterbegin", imageElemnt);
          } else {
            prepend([imageElemnt], li.firstElementChild);
          }
        }
        if (curOpt.showIcon && Object.prototype.hasOwnProperty.call(fieldData, fields.iconCss) && !isNullOrUndefined(fieldData[fields.iconCss]) && !curOpt.template) {
          var iconElement = createElement2("div", { className: cssClass.icon + " " + fieldData[fields.iconCss] });
          if (anchorElement) {
            anchorElement.insertAdjacentElement("afterbegin", iconElement);
          } else {
            prepend([iconElement], li.firstElementChild);
          }
        }
        if (innerEle.length) {
          prepend(innerEle, li.firstElementChild);
        }
        if (curOpt.itemNavigable && checkboxElement.length) {
          prepend(checkboxElement, li.firstElementChild);
        }
        processSubChild(createElement2, fieldData, fields, dataSource, curOpt, li, ariaAttributes.level);
      }
      if (anchorElement) {
        addClass([li], [cssClass.navigable]);
      }
      if (curOpt.itemCreated && typeof curOpt.itemCreated === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: fieldData[fields.text],
          item: li,
          options: curOpt,
          fields
        };
        curOpt.itemCreated(curData);
      }
      checkboxElement = [];
      child.push(li);
    }
    return child;
  }
  ListBase2.createListItemFromJson = createListItemFromJson;
  function createListFromJson(createElement2, dataSource, options, level, isSingleLevel, componentInstance) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var li = createListItemFromJson(createElement2, dataSource, options, level, isSingleLevel, componentInstance);
    return generateUL(createElement2, li, curOpt.listClass, options);
  }
  ListBase2.createListFromJson = createListFromJson;
  function getSiblingLI(elementArray, element2, isPrevious) {
    cssClass = getModuleClass(defaultListBaseOptions.moduleName);
    if (!elementArray || !elementArray.length) {
      return void 0;
    }
    var siblingLI;
    var liIndex;
    var liCollections = Array.prototype.slice.call(elementArray);
    if (element2) {
      liIndex = indexOf(element2, liCollections);
    } else {
      liIndex = isPrevious === true ? liCollections.length : -1;
    }
    siblingLI = liCollections[liIndex + (isPrevious === true ? -1 : 1)];
    while (siblingLI && (!isVisible(siblingLI) || siblingLI.classList.contains(cssClass.disabled))) {
      liIndex = liIndex + (isPrevious === true ? -1 : 1);
      siblingLI = liCollections[liIndex];
    }
    return siblingLI;
  }
  ListBase2.getSiblingLI = getSiblingLI;
  function indexOf(item, elementArray) {
    if (!elementArray || !item) {
      return void 0;
    } else {
      var liCollections = elementArray;
      liCollections = Array.prototype.slice.call(elementArray);
      return liCollections.indexOf(item);
    }
  }
  ListBase2.indexOf = indexOf;
  function groupDataSource(dataSource, fields, sortOrder) {
    if (sortOrder === void 0) {
      sortOrder = "None";
    }
    var curFields = extend$1({}, ListBase2.defaultMappedFields, fields);
    var cusQuery = new Query().group(curFields.groupBy);
    cusQuery = addSorting(sortOrder, "key", cusQuery);
    var ds = getDataSource(dataSource, cusQuery);
    dataSource = [];
    for (var j = 0; j < ds.length; j++) {
      var itemObj = ds[j].items;
      var grpItem = {};
      var hdr = "isHeader";
      grpItem[curFields.text] = ds[j].key;
      grpItem["" + hdr] = true;
      var newtext = curFields.text;
      if (newtext === "id") {
        newtext = "text";
        grpItem["" + newtext] = ds[j].key;
      }
      grpItem._id = "group-list-item-" + (ds[j].key ? ds[j].key.toString().trim() : "undefined");
      grpItem.items = itemObj;
      dataSource.push(grpItem);
      for (var k = 0; k < itemObj.length; k++) {
        dataSource.push(itemObj[k]);
      }
    }
    return dataSource;
  }
  ListBase2.groupDataSource = groupDataSource;
  function addSorting(sortOrder, sortBy, query) {
    if (query === void 0) {
      query = new Query();
    }
    if (sortOrder === "Ascending") {
      query.sortBy(sortBy, "ascending", true);
    } else if (sortOrder === "Descending") {
      query.sortBy(sortBy, "descending", true);
    } else {
      for (var i = 0; i < query.queries.length; i++) {
        if (query.queries[i].fn === "onSortBy") {
          query.queries.splice(i, 1);
        }
      }
    }
    return query;
  }
  ListBase2.addSorting = addSorting;
  function getDataSource(dataSource, query) {
    return new DataManager(dataSource).executeLocal(query);
  }
  ListBase2.getDataSource = getDataSource;
  function createJsonFromElement(element2, options) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var fields = extend$1({}, ListBase2.defaultMappedFields, curOpt.fields);
    var curEle = element2.cloneNode(true);
    var jsonAr = [];
    curEle.classList.add("json-parent");
    var childs = curEle.querySelectorAll(".json-parent>li");
    curEle.classList.remove("json-parent");
    for (var i = 0; i < childs.length; i++) {
      var li = childs[i];
      var anchor = li.querySelector("a");
      var ul = li.querySelector("ul");
      var json = {};
      var childNodes = anchor ? anchor.childNodes : li.childNodes;
      var keys2 = Object.keys(childNodes);
      for (var i_1 = 0; i_1 < childNodes.length; i_1++) {
        if (!childNodes[Number(keys2[i_1])].hasChildNodes()) {
          json[fields.text] = childNodes[Number(keys2[i_1])].textContent;
        }
      }
      var attributes_1 = getAllAttributes(li);
      if (attributes_1.id) {
        json[fields.id] = attributes_1.id;
        delete attributes_1.id;
      } else {
        json[fields.id] = generateId();
      }
      if (Object.keys(attributes_1).length) {
        json[fields.htmlAttributes] = attributes_1;
      }
      if (anchor) {
        attributes_1 = getAllAttributes(anchor);
        if (Object.keys(attributes_1).length) {
          json[fields.urlAttributes] = attributes_1;
        }
      }
      if (ul) {
        json[fields.child] = createJsonFromElement(ul, options);
      }
      jsonAr.push(json);
    }
    return jsonAr;
  }
  ListBase2.createJsonFromElement = createJsonFromElement;
  function typeofData(data) {
    var match = { typeof: null, item: null };
    for (var i = 0; i < data.length; i++) {
      if (!isNullOrUndefined(data[i])) {
        return match = { typeof: typeof data[i], item: data[i] };
      }
    }
    return match;
  }
  function setAttribute(element2, elementAttributes) {
    var attr = {};
    merge(attr, elementAttributes);
    if (attr.class) {
      addClass([element2], attr.class.split(" "));
      delete attr.class;
    }
    attributes(element2, attr);
  }
  function getAllAttributes(element2) {
    var attributes2 = {};
    var attr = element2.attributes;
    for (var index = 0; index < attr.length; index++) {
      attributes2[attr[index].nodeName] = attr[index].nodeValue;
    }
    return attributes2;
  }
  function renderContentTemplate(createElement2, template, dataSource, fields, options, componentInstance) {
    cssClass = getModuleClass(defaultListBaseOptions.moduleName);
    var ulElement = createElement2("ul", { className: cssClass.ul, attrs: { role: "presentation" } });
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var curFields = extend$1({}, ListBase2.defaultMappedFields, fields);
    var compiledString = compileTemplate(template);
    var liCollection = [];
    var value;
    var id = generateId();
    for (var i = 0; i < dataSource.length; i++) {
      var fieldData = getFieldValues(dataSource[i], curFields);
      var curItem = dataSource[i];
      var isHeader = curItem.isHeader;
      if (typeof dataSource[i] === "string" || typeof dataSource[i] === "number") {
        value = curItem;
      } else {
        value = fieldData[curFields.value];
      }
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        var curData = {
          dataSource,
          curData: curItem,
          text: value,
          options: curOpt,
          fields: curFields
        };
        curOpt.itemCreating(curData);
      }
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        fieldData = getFieldValues(dataSource[i], curFields);
        if (typeof dataSource[i] === "string" || typeof dataSource[i] === "number") {
          value = curItem;
        } else {
          value = fieldData[curFields.value];
        }
      }
      var li = createElement2("li", {
        id: id + "-" + i,
        className: isHeader ? cssClass.group : cssClass.li,
        attrs: { role: "presentation" }
      });
      if (isHeader) {
        if (typeof dataSource[i] === "string" || typeof dataSource[i] === "number") {
          li.innerText = curItem;
        } else {
          li.innerText = fieldData[curFields.text];
        }
      } else {
        var currentID = isHeader ? curOpt.groupTemplateID : curOpt.templateID;
        if (isHeader) {
          if (componentInstance && componentInstance.getModuleName() !== "listview") {
            var compiledElement = compiledString(curItem, componentInstance, "headerTemplate", currentID, !!curOpt.isStringTemplate, null, li);
            if (compiledElement) {
              append(compiledElement, li);
            }
          } else {
            append(compiledString(curItem, componentInstance, "headerTemplate", currentID, !!curOpt.isStringTemplate), li);
          }
        } else {
          if (componentInstance && componentInstance.getModuleName() !== "listview") {
            var compiledElement = compiledString(curItem, componentInstance, "template", currentID, !!curOpt.isStringTemplate, null, li);
            if (compiledElement) {
              append(compiledElement, li);
            }
          } else {
            append(compiledString(curItem, componentInstance, "template", currentID, !!curOpt.isStringTemplate), li);
          }
        }
        li.setAttribute("data-value", isNullOrUndefined(value) ? "null" : value);
        li.setAttribute("role", "option");
      }
      if (curOpt.itemCreated && typeof curOpt.itemCreated === "function") {
        var curData = {
          dataSource,
          curData: curItem,
          text: value,
          item: li,
          options: curOpt,
          fields: curFields
        };
        curOpt.itemCreated(curData);
      }
      liCollection.push(li);
    }
    append(liCollection, ulElement);
    return ulElement;
  }
  ListBase2.renderContentTemplate = renderContentTemplate;
  function renderGroupTemplate(groupTemplate, groupDataSource2, fields, headerItems, options, componentInstance) {
    var compiledString = compileTemplate(groupTemplate);
    var curFields = extend$1({}, ListBase2.defaultMappedFields, fields);
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var category = curFields.groupBy;
    for (var _i = 0, headerItems_1 = headerItems; _i < headerItems_1.length; _i++) {
      var header = headerItems_1[_i];
      var headerData = {};
      headerData["" + category] = header.textContent;
      header.innerHTML = "";
      if (componentInstance && componentInstance.getModuleName() !== "listview") {
        var compiledElement = compiledString(headerData, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate, null, header);
        if (compiledElement) {
          append(compiledElement, header);
        }
      } else {
        append(compiledString(headerData, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate), header);
      }
    }
    return headerItems;
  }
  ListBase2.renderGroupTemplate = renderGroupTemplate;
  function generateId() {
    return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);
  }
  ListBase2.generateId = generateId;
  function processSubChild(createElement2, fieldData, fields, ds, options, element2, level) {
    var subDS = fieldData[fields.child] || [];
    var hasChildren = fieldData[fields.hasChildren];
    if (subDS.length) {
      hasChildren = true;
      element2.classList.add(cssClass.hasChild);
      if (options.processSubChild) {
        var subLi = createListFromJson(createElement2, subDS, options, ++level);
        element2.appendChild(subLi);
      }
    }
    if (!!options.expandCollapse && hasChildren && !options.template) {
      element2.firstElementChild.classList.add(cssClass.iconWrapper);
      var expandElement = options.expandIconPosition === "Left" ? prepend : append;
      expandElement([createElement2("div", { className: "e-icons " + options.expandIconClass })], element2.querySelector("." + cssClass.textContent));
    }
  }
  function generateSingleLevelLI(createElement2, item, fieldData, fields, className, innerElements, grpLI, id, index, options) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var ariaAttributes = extend$1({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var text = item;
    var value = item;
    var dataSource;
    if (typeof item !== "string" && typeof item !== "number" && typeof item !== "boolean") {
      dataSource = item;
      text = typeof fieldData[fields.text] === "boolean" || typeof fieldData[fields.text] === "number" ? fieldData[fields.text] : fieldData[fields.text] || "";
      value = fieldData[fields.value];
    }
    var elementID;
    if (!isNullOrUndefined(dataSource) && !isNullOrUndefined(fieldData[fields.id]) && fieldData[fields.id] !== "") {
      elementID = id;
    } else {
      elementID = id + "-" + index;
    }
    var li = createElement2("li", {
      className: (grpLI === true ? cssClass.group : cssClass.li) + " " + (isNullOrUndefined(className) ? "" : className),
      id: elementID,
      attrs: ariaAttributes.groupItemRole !== "" && ariaAttributes.itemRole !== "" ? { role: grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole } : {}
    });
    if (dataSource && Object.prototype.hasOwnProperty.call(fieldData, fields.enabled) && fieldData[fields.enabled].toString() === "false") {
      li.classList.add(cssClass.disabled);
    }
    if (options && options.enableHtmlSanitizer) {
      text = SanitizeHtmlHelper.sanitize(text);
    }
    if (grpLI) {
      li.innerText = text;
    } else {
      li.setAttribute("data-value", isNullOrUndefined(value) ? "null" : value);
      li.setAttribute("role", "option");
      if (dataSource && Object.prototype.hasOwnProperty.call(fieldData, fields.htmlAttributes) && fieldData[fields.htmlAttributes]) {
        setAttribute(li, fieldData[fields.htmlAttributes]);
      }
      if (innerElements.length && !curOpt.itemNavigable) {
        append(innerElements, li);
      }
      if (dataSource && (fieldData[fields.url] || fieldData[fields.urlAttributes] && fieldData[fields.urlAttributes].href)) {
        li.appendChild(anchorTag(createElement2, dataSource, fields, text, innerElements, curOpt.itemNavigable));
      } else {
        if (innerElements.length && curOpt.itemNavigable) {
          append(innerElements, li);
        }
        li.appendChild(document.createTextNode(text));
      }
    }
    return li;
  }
  function getModuleClass(moduleName) {
    return {
      li: "e-" + moduleName + "-item",
      ul: "e-" + moduleName + "-parent e-ul",
      group: "e-" + moduleName + "-group-item",
      icon: "e-" + moduleName + "-icon",
      text: "e-" + moduleName + "-text",
      check: "e-" + moduleName + "-check",
      checked: "e-checked",
      selected: "e-selected",
      expanded: "e-expanded",
      textContent: "e-text-content",
      hasChild: "e-has-child",
      level: "e-level",
      url: "e-" + moduleName + "-url",
      collapsible: "e-icon-collapsible",
      disabled: "e-disabled",
      image: "e-" + moduleName + "-img",
      iconWrapper: "e-icon-wrapper",
      anchorWrap: "e-anchor-wrap",
      navigable: "e-navigable"
    };
  }
  function anchorTag(createElement2, dataSource, fields, text, innerElements, isFullNavigation) {
    var fieldData = getFieldValues(dataSource, fields);
    var attr = { href: fieldData[fields.url] };
    if (Object.prototype.hasOwnProperty.call(fieldData, fields.urlAttributes) && fieldData[fields.urlAttributes]) {
      merge(attr, fieldData[fields.urlAttributes]);
      attr.href = fieldData[fields.url] ? fieldData[fields.url] : fieldData[fields.urlAttributes].href;
    }
    var anchorTag2;
    if (!isFullNavigation) {
      anchorTag2 = createElement2("a", { className: cssClass.text + " " + cssClass.url, innerHTML: text });
    } else {
      anchorTag2 = createElement2("a", { className: cssClass.text + " " + cssClass.url });
      var anchorWrapper = createElement2("div", { className: cssClass.anchorWrap });
      if (innerElements && innerElements.length) {
        append(innerElements, anchorWrapper);
      }
      anchorWrapper.appendChild(document.createTextNode(text));
      append([anchorWrapper], anchorTag2);
    }
    setAttribute(anchorTag2, attr);
    return anchorTag2;
  }
  function generateLI(createElement2, item, fieldData, fields, className, options, componentInstance) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var ariaAttributes = extend$1({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var text = item;
    var uID;
    var grpLI;
    var dataSource;
    if (typeof item !== "string" && typeof item !== "number") {
      dataSource = item;
      text = fieldData[fields.text] || "";
      uID = isNullOrUndefined(fieldData["_id"]) ? fieldData[fields.id] : fieldData["_id"];
      grpLI = Object.prototype.hasOwnProperty.call(item, "isHeader") && item.isHeader ? true : false;
    }
    if (options && options.enableHtmlSanitizer) {
      text = SanitizeHtmlHelper.sanitize(text);
    }
    var li = createElement2("li", {
      className: (grpLI === true ? cssClass.group : cssClass.li) + " " + (isNullOrUndefined(className) ? "" : className),
      attrs: ariaAttributes.groupItemRole !== "" && ariaAttributes.itemRole !== "" ? { role: grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole } : {}
    });
    if (!isNullOrUndefined(uID) === true) {
      li.setAttribute("data-uid", uID);
    } else {
      li.setAttribute("data-uid", generateId());
    }
    if (grpLI && options && options.groupTemplate) {
      var compiledString = compileTemplate(options.groupTemplate);
      if (componentInstance && componentInstance.getModuleName() !== "listview") {
        var compiledElement = compiledString(item, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate, null, li);
        if (compiledElement) {
          append(compiledElement, li);
        }
      } else {
        append(compiledString(item, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate), li);
      }
    } else if (!grpLI && options && options.template) {
      var compiledString = compileTemplate(options.template);
      if (componentInstance && componentInstance.getModuleName() !== "listview") {
        var compiledElement = compiledString(item, componentInstance, "template", curOpt.templateID, !!curOpt.isStringTemplate, null, li);
        if (compiledElement) {
          append(compiledElement, li);
        }
      } else {
        append(compiledString(item, componentInstance, "template", curOpt.templateID, !!curOpt.isStringTemplate), li);
      }
    } else {
      var innerDiv = createElement2("div", {
        className: cssClass.textContent,
        attrs: ariaAttributes.wrapperRole !== "" ? { role: ariaAttributes.wrapperRole } : {}
      });
      if (dataSource && (fieldData[fields.url] || fieldData[fields.urlAttributes] && fieldData[fields.urlAttributes].href)) {
        innerDiv.appendChild(anchorTag(createElement2, dataSource, fields, text, null, curOpt.itemNavigable));
      } else {
        var element2 = createElement2("span", {
          className: cssClass.text,
          attrs: ariaAttributes.itemText !== "" ? { role: ariaAttributes.itemText } : {}
        });
        if (options && options.enableHtmlSanitizer) {
          element2.innerText = text;
        } else {
          element2.innerHTML = text;
        }
        innerDiv.appendChild(element2);
      }
      li.appendChild(innerDiv);
    }
    return li;
  }
  function generateUL(createElement2, liElement, className, options) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    var ariaAttributes = extend$1({}, defaultAriaAttributes, curOpt.ariaAttributes);
    cssClass = getModuleClass(curOpt.moduleName);
    var ulElement = createElement2("ul", {
      className: cssClass.ul + " " + (isNullOrUndefined(className) ? "" : className),
      attrs: ariaAttributes.listRole !== "" ? { role: ariaAttributes.listRole } : {}
    });
    append(liElement, ulElement);
    return ulElement;
  }
  ListBase2.generateUL = generateUL;
  function generateIcon(createElement2, liElement, className, options) {
    var curOpt = extend$1({}, defaultListBaseOptions, options);
    cssClass = getModuleClass(curOpt.moduleName);
    var expandElement = curOpt.expandIconPosition === "Left" ? prepend : append;
    expandElement([createElement2("div", {
      className: "e-icons " + curOpt.expandIconClass + " " + (isNullOrUndefined(className) ? "" : className)
    })], liElement.querySelector("." + cssClass.textContent));
    return liElement;
  }
  ListBase2.generateIcon = generateIcon;
})(ListBase || (ListBase = {}));
function getFieldValues(dataItem, fields) {
  var fieldData = {};
  if (isNullOrUndefined(dataItem) || typeof dataItem === "string" || typeof dataItem === "number" || !isNullOrUndefined(dataItem.isHeader)) {
    return dataItem;
  } else {
    for (var _i = 0, _a = Object.keys(fields); _i < _a.length; _i++) {
      var field = _a[_i];
      var dataField = fields["" + field];
      var value = !isNullOrUndefined(dataField) && typeof dataField === "string" ? getValue(dataField, dataItem) : void 0;
      if (!isNullOrUndefined(value)) {
        fieldData["" + dataField] = value;
      }
    }
  }
  return fieldData;
}
function compileTemplate(template) {
  if (template) {
    try {
      if (typeof template !== "function" && document.querySelector(template)) {
        return compile$1(document.querySelector(template).innerHTML.trim());
      } else {
        return compile$1(template);
      }
    } catch (e) {
      return compile$1(template);
    }
  }
  return void 0;
}
var elementRect;
var popupRect;
var element;
var parentDocument$1;
var fixedParent = false;
function calculateRelativeBasedPosition(anchor, element2) {
  var fixedElement = false;
  var anchorPos = { left: 0, top: 0 };
  var tempAnchor = anchor;
  if (!anchor || !element2) {
    return anchorPos;
  }
  if (isNullOrUndefined(element2.offsetParent) && element2.style.position === "fixed") {
    fixedElement = true;
  }
  while ((element2.offsetParent || fixedElement) && anchor && element2.offsetParent !== anchor) {
    anchorPos.left += anchor.offsetLeft;
    anchorPos.top += anchor.offsetTop;
    anchor = anchor.offsetParent;
  }
  anchor = tempAnchor;
  while ((element2.offsetParent || fixedElement) && anchor && element2.offsetParent !== anchor) {
    anchorPos.left -= anchor.scrollLeft;
    anchorPos.top -= anchor.scrollTop;
    anchor = anchor.parentElement;
  }
  return anchorPos;
}
function calculatePosition(currentElement, positionX, positionY, parentElement, targetValues) {
  popupRect = void 0;
  popupRect = targetValues;
  fixedParent = parentElement ? true : false;
  if (!currentElement) {
    return { left: 0, top: 0 };
  }
  if (!positionX) {
    positionX = "left";
  }
  if (!positionY) {
    positionY = "top";
  }
  parentDocument$1 = currentElement.ownerDocument;
  element = currentElement;
  var pos = { left: 0, top: 0 };
  return updatePosition(positionX.toLowerCase(), positionY.toLowerCase(), pos);
}
function setPosx(value, pos) {
  pos.left = value;
}
function setPosy(value, pos) {
  pos.top = value;
}
function updatePosition(posX, posY, pos) {
  elementRect = element.getBoundingClientRect();
  switch (posY + posX) {
    case "topcenter":
      setPosx(getElementHCenter(), pos);
      setPosy(getElementTop(), pos);
      break;
    case "topright":
      setPosx(getElementRight(), pos);
      setPosy(getElementTop(), pos);
      break;
    case "centercenter":
      setPosx(getElementHCenter(), pos);
      setPosy(getElementVCenter(), pos);
      break;
    case "centerright":
      setPosx(getElementRight(), pos);
      setPosy(getElementVCenter(), pos);
      break;
    case "centerleft":
      setPosx(getElementLeft(), pos);
      setPosy(getElementVCenter(), pos);
      break;
    case "bottomcenter":
      setPosx(getElementHCenter(), pos);
      setPosy(getElementBottom(), pos);
      break;
    case "bottomright":
      setPosx(getElementRight(), pos);
      setPosy(getElementBottom(), pos);
      break;
    case "bottomleft":
      setPosx(getElementLeft(), pos);
      setPosy(getElementBottom(), pos);
      break;
    default:
    case "topleft":
      setPosx(getElementLeft(), pos);
      setPosy(getElementTop(), pos);
      break;
  }
  element = null;
  return pos;
}
function getBodyScrollTop$1() {
  return parentDocument$1.documentElement.scrollTop || parentDocument$1.body.scrollTop;
}
function getBodyScrollLeft$1() {
  return parentDocument$1.documentElement.scrollLeft || parentDocument$1.body.scrollLeft;
}
function getElementBottom() {
  return fixedParent ? elementRect.bottom : elementRect.bottom + getBodyScrollTop$1();
}
function getElementVCenter() {
  return getElementTop() + elementRect.height / 2;
}
function getElementTop() {
  return fixedParent ? elementRect.top : elementRect.top + getBodyScrollTop$1();
}
function getElementLeft() {
  return elementRect.left + getBodyScrollLeft$1();
}
function getElementRight() {
  var popupWidth = element && ((element.classList.contains("e-date-wrapper") || element.classList.contains("e-datetime-wrapper")) && element.classList.contains("e-rtl") || element.classList.contains("e-ddl") && element.classList.contains("e-rtl") || element.classList.contains("e-date-range-wrapper")) ? popupRect ? popupRect.width : 0 : popupRect && elementRect.width >= popupRect.width ? popupRect.width : 0;
  if (element && element.classList.contains("e-rtl") && element.classList.contains("e-multiselect")) {
    popupWidth = popupRect.width;
  }
  return elementRect.right + getBodyScrollLeft$1() - popupWidth;
}
function getElementHCenter() {
  return getElementLeft() + elementRect.width / 2;
}
var parentDocument;
var targetContainer;
function fit(element2, viewPortElement, axis, position) {
  if (viewPortElement === void 0) {
    viewPortElement = null;
  }
  if (axis === void 0) {
    axis = { X: false, Y: false };
  }
  if (!axis.Y && !axis.X) {
    return { left: 0, top: 0 };
  }
  var elemData = element2.getBoundingClientRect();
  targetContainer = viewPortElement;
  parentDocument = element2.ownerDocument;
  if (!position) {
    position = calculatePosition(element2, "left", "top");
  }
  if (axis.X) {
    var containerWidth = targetContainer ? getTargetContainerWidth() : getViewPortWidth();
    var containerLeft = ContainerLeft();
    var containerRight = ContainerRight();
    var overLeft = containerLeft - position.left;
    var overRight = position.left + elemData.width - containerRight;
    if (elemData.width > containerWidth) {
      if (overLeft > 0 && overRight <= 0) {
        position.left = containerRight - elemData.width;
      } else if (overRight > 0 && overLeft <= 0) {
        position.left = containerLeft;
      } else {
        position.left = overLeft > overRight ? containerRight - elemData.width : containerLeft;
      }
    } else if (overLeft > 0) {
      position.left += overLeft;
    } else if (overRight > 0) {
      position.left -= overRight;
    }
  }
  if (axis.Y) {
    var containerHeight = targetContainer ? getTargetContainerHeight() : getViewPortHeight();
    var containerTop = ContainerTop();
    var containerBottom = ContainerBottom();
    var overTop = containerTop - position.top;
    var overBottom = position.top + elemData.height - containerBottom;
    if (elemData.height > containerHeight) {
      if (overTop > 0 && overBottom <= 0) {
        position.top = containerBottom - elemData.height;
      } else if (overBottom > 0 && overTop <= 0) {
        position.top = containerTop;
      } else {
        position.top = overTop > overBottom ? containerBottom - elemData.height : containerTop;
      }
    } else if (overTop > 0) {
      position.top += overTop;
    } else if (overBottom > 0) {
      position.top -= overBottom;
    }
  }
  return position;
}
function isCollide(element2, viewPortElement, x, y) {
  if (viewPortElement === void 0) {
    viewPortElement = null;
  }
  var elemOffset = calculatePosition(element2, "left", "top");
  if (x) {
    elemOffset.left = x;
  }
  if (y) {
    elemOffset.top = y;
  }
  var data = [];
  targetContainer = viewPortElement;
  parentDocument = element2.ownerDocument;
  var elementRect2 = element2.getBoundingClientRect();
  var top = elemOffset.top;
  var left = elemOffset.left;
  var right = elemOffset.left + elementRect2.width;
  var bottom = elemOffset.top + elementRect2.height;
  var yAxis = topCollideCheck(top, bottom);
  var xAxis = leftCollideCheck(left, right);
  if (yAxis.topSide) {
    data.push("top");
  }
  if (xAxis.rightSide) {
    data.push("right");
  }
  if (xAxis.leftSide) {
    data.push("left");
  }
  if (yAxis.bottomSide) {
    data.push("bottom");
  }
  return data;
}
function flip(element2, target, offsetX, offsetY, positionX, positionY, viewPortElement, axis, fixedParent2) {
  if (viewPortElement === void 0) {
    viewPortElement = null;
  }
  if (axis === void 0) {
    axis = { X: true, Y: true };
  }
  if (!target || !element2 || !positionX || !positionY || !axis.X && !axis.Y) {
    return;
  }
  var tEdge = {
    TL: null,
    TR: null,
    BL: null,
    BR: null
  }, eEdge = {
    TL: null,
    TR: null,
    BL: null,
    BR: null
    /* eslint-enable */
  };
  var elementRect2;
  if (window.getComputedStyle(element2).display === "none") {
    var oldVisibility = element2.style.visibility;
    element2.style.visibility = "hidden";
    element2.style.display = "block";
    elementRect2 = element2.getBoundingClientRect();
    element2.style.removeProperty("display");
    element2.style.visibility = oldVisibility;
  } else {
    elementRect2 = element2.getBoundingClientRect();
  }
  var pos = {
    posX: positionX,
    posY: positionY,
    offsetX,
    offsetY,
    position: { left: 0, top: 0 }
  };
  targetContainer = viewPortElement;
  parentDocument = target.ownerDocument;
  updateElementData(target, tEdge, pos, fixedParent2, elementRect2);
  setPosition(eEdge, pos, elementRect2);
  if (axis.X) {
    leftFlip(target, eEdge, tEdge, pos, elementRect2, true);
  }
  if (axis.Y && tEdge.TL.top > -1) {
    topFlip(target, eEdge, tEdge, pos, elementRect2, true);
  }
  setPopup(element2, pos, elementRect2);
}
function setPopup(element2, pos, elementRect2) {
  var left = 0;
  var top = 0;
  if (element2.offsetParent != null && (getComputedStyle(element2.offsetParent).position === "absolute" || getComputedStyle(element2.offsetParent).position === "relative")) {
    var data = calculatePosition(element2.offsetParent, "left", "top", false, elementRect2);
    left = data.left;
    top = data.top;
  }
  var scaleX = 1;
  var scaleY = 1;
  var tranformElement = getTransformElement(element2);
  if (tranformElement) {
    var transformStyle = getComputedStyle(tranformElement).transform;
    if (transformStyle !== "none") {
      var matrix = new DOMMatrix(transformStyle);
      scaleX = matrix.a;
      scaleY = matrix.d;
    }
    var zoomStyle = getComputedStyle(tranformElement).zoom;
    if (zoomStyle !== "none") {
      var bodyZoom = getZoomValue(document.body);
      scaleX = bodyZoom * scaleX;
      scaleY = bodyZoom * scaleY;
    }
  }
  element2.style.top = pos.position.top / scaleY + pos.offsetY - top / scaleY + "px";
  element2.style.left = pos.position.left / scaleX + pos.offsetX - left / scaleX + "px";
}
function getZoomValue(element2) {
  var zoomValue = getComputedStyle(element2).zoom;
  return parseFloat(zoomValue) || 1;
}
function getTransformElement(element2) {
  while (element2) {
    var transform = window.getComputedStyle(element2).transform;
    var zoom = getZoomValue(document.body);
    if (transform && transform !== "none" || zoom && zoom !== 1) {
      return element2;
    }
    if (element2 === document.body) {
      return null;
    }
    element2 = element2.offsetParent || element2.parentElement;
  }
  return null;
}
function updateElementData(target, edge, pos, fixedParent2, elementRect2) {
  pos.position = calculatePosition(target, pos.posX, pos.posY, fixedParent2, elementRect2);
  edge.TL = calculatePosition(target, "left", "top", fixedParent2, elementRect2);
  edge.TR = calculatePosition(target, "right", "top", fixedParent2, elementRect2);
  edge.BR = calculatePosition(target, "left", "bottom", fixedParent2, elementRect2);
  edge.BL = calculatePosition(target, "right", "bottom", fixedParent2, elementRect2);
}
function setPosition(eStatus, pos, elementRect2) {
  eStatus.TL = { top: pos.position.top + pos.offsetY, left: pos.position.left + pos.offsetX };
  eStatus.TR = { top: eStatus.TL.top, left: eStatus.TL.left + elementRect2.width };
  eStatus.BL = {
    top: eStatus.TL.top + elementRect2.height,
    left: eStatus.TL.left
  };
  eStatus.BR = {
    top: eStatus.TL.top + elementRect2.height,
    left: eStatus.TL.left + elementRect2.width
  };
}
function leftCollideCheck(left, right) {
  var leftSide = false, rightSide = false;
  if (left - getBodyScrollLeft() < ContainerLeft()) {
    leftSide = true;
  }
  if (right > ContainerRight()) {
    rightSide = true;
  }
  return { leftSide, rightSide };
}
function leftFlip(target, edge, tEdge, pos, elementRect2, deepCheck) {
  var collideSide = leftCollideCheck(edge.TL.left, edge.TR.left);
  if (tEdge.TL.left - getBodyScrollLeft() <= ContainerLeft()) {
    collideSide.leftSide = false;
  }
  if (tEdge.TR.left > ContainerRight()) {
    collideSide.rightSide = false;
  }
  if (collideSide.leftSide && !collideSide.rightSide || !collideSide.leftSide && collideSide.rightSide) {
    if (pos.posX === "right") {
      pos.posX = "left";
    } else {
      pos.posX = "right";
    }
    pos.offsetX = pos.offsetX + elementRect2.width;
    pos.offsetX = -1 * pos.offsetX;
    pos.position = calculatePosition(target, pos.posX, pos.posY, false);
    setPosition(edge, pos, elementRect2);
    if (deepCheck) {
      leftFlip(target, edge, tEdge, pos, elementRect2, false);
    }
  }
}
function topFlip(target, edge, tEdge, pos, elementRect2, deepCheck) {
  var collideSide = topCollideCheck(edge.TL.top, edge.BL.top);
  if (tEdge.TL.top - getBodyScrollTop() <= ContainerTop()) {
    collideSide.topSide = false;
  }
  if (tEdge.BL.top >= ContainerBottom() && target.getBoundingClientRect().bottom < window.innerHeight) {
    collideSide.bottomSide = false;
  }
  if (collideSide.topSide && !collideSide.bottomSide || !collideSide.topSide && collideSide.bottomSide) {
    if (pos.posY === "top") {
      pos.posY = "bottom";
    } else {
      pos.posY = "top";
    }
    pos.offsetY = pos.offsetY + elementRect2.height;
    pos.offsetY = -1 * pos.offsetY;
    pos.position = calculatePosition(target, pos.posX, pos.posY, false, elementRect2);
    setPosition(edge, pos, elementRect2);
    if (deepCheck) {
      topFlip(target, edge, tEdge, pos, elementRect2, false);
    }
  }
}
function topCollideCheck(top, bottom) {
  var topSide = false, bottomSide = false;
  if (top - getBodyScrollTop() < ContainerTop()) {
    topSide = true;
  }
  if (bottom > ContainerBottom()) {
    bottomSide = true;
  }
  return { topSide, bottomSide };
}
function getTargetContainerWidth() {
  return targetContainer.getBoundingClientRect().width;
}
function getTargetContainerHeight() {
  return targetContainer.getBoundingClientRect().height;
}
function getTargetContainerLeft() {
  return targetContainer.getBoundingClientRect().left;
}
function getTargetContainerTop() {
  return targetContainer.getBoundingClientRect().top;
}
function ContainerTop() {
  if (targetContainer) {
    return getTargetContainerTop();
  }
  return 0;
}
function ContainerLeft() {
  if (targetContainer) {
    return getTargetContainerLeft();
  }
  return 0;
}
function ContainerRight() {
  if (targetContainer) {
    return getBodyScrollLeft() + getTargetContainerLeft() + getTargetContainerWidth();
  }
  return getBodyScrollLeft() + getViewPortWidth();
}
function ContainerBottom() {
  if (targetContainer) {
    return getBodyScrollTop() + getTargetContainerTop() + getTargetContainerHeight();
  }
  return getBodyScrollTop() + getViewPortHeight();
}
function getBodyScrollTop() {
  return parentDocument.documentElement.scrollTop || parentDocument.body.scrollTop;
}
function getBodyScrollLeft() {
  return parentDocument.documentElement.scrollLeft || parentDocument.body.scrollLeft;
}
function getViewPortHeight() {
  return window.innerHeight;
}
function getViewPortWidth() {
  var windowWidth = window.innerWidth;
  var documentReact = document.documentElement.getBoundingClientRect();
  var offsetWidth = isNullOrUndefined(document.documentElement) ? 0 : documentReact.width;
  return windowWidth - (windowWidth - offsetWidth);
}
function destroy$1() {
  targetContainer = null;
  parentDocument = null;
}
var __extends$s = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$c = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var PositionData = (
  /** @class */
  function(_super) {
    __extends$s(PositionData2, _super);
    function PositionData2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$c([
      Property("left")
    ], PositionData2.prototype, "X", void 0);
    __decorate$c([
      Property("top")
    ], PositionData2.prototype, "Y", void 0);
    return PositionData2;
  }(ChildProperty)
);
var CLASSNAMES$1 = {
  ROOT: "e-popup",
  RTL: "e-rtl",
  OPEN: "e-popup-open",
  CLOSE: "e-popup-close"
};
var Popup = (
  /** @class */
  function(_super) {
    __extends$s(Popup2, _super);
    function Popup2(element2, options) {
      return _super.call(this, options, element2) || this;
    }
    Popup2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "width":
            setStyleAttribute(this.element, { "width": formatUnit(newProp.width) });
            break;
          case "height":
            setStyleAttribute(this.element, { "height": formatUnit(newProp.height) });
            break;
          case "zIndex":
            setStyleAttribute(this.element, { "zIndex": newProp.zIndex });
            break;
          case "enableRtl":
            this.setEnableRtl();
            break;
          case "position":
          case "relateTo":
            this.refreshPosition();
            break;
          case "offsetX": {
            var x = newProp.offsetX - oldProp.offsetX;
            this.element.style.left = (parseInt(this.element.style.left, 10) + x).toString() + "px";
            break;
          }
          case "offsetY": {
            var y = newProp.offsetY - oldProp.offsetY;
            this.element.style.top = (parseInt(this.element.style.top, 10) + y).toString() + "px";
            break;
          }
          case "content":
            this.setContent();
            break;
          case "actionOnScroll":
            if (newProp.actionOnScroll !== "none") {
              this.wireScrollEvents();
            } else {
              this.unwireScrollEvents();
            }
            break;
        }
      }
    };
    Popup2.prototype.getModuleName = function() {
      return "popup";
    };
    Popup2.prototype.resolveCollision = function() {
      this.checkCollision();
    };
    Popup2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Popup2.prototype.destroy = function() {
      if (this.element.classList.contains("e-popup-open")) {
        this.unwireEvents();
      }
      this.element.classList.remove(CLASSNAMES$1.ROOT, CLASSNAMES$1.RTL, CLASSNAMES$1.OPEN, CLASSNAMES$1.CLOSE);
      this.content = null;
      this.relateTo = null;
      destroy$1();
      _super.prototype.destroy.call(this);
    };
    Popup2.prototype.render = function() {
      this.element.classList.add(CLASSNAMES$1.ROOT);
      var styles = {};
      if (this.zIndex !== 1e3) {
        styles.zIndex = this.zIndex;
      }
      if (this.width !== "auto") {
        styles.width = formatUnit(this.width);
      }
      if (this.height !== "auto") {
        styles.height = formatUnit(this.height);
      }
      setStyleAttribute(this.element, styles);
      this.fixedParent = false;
      this.setEnableRtl();
      this.setContent();
    };
    Popup2.prototype.wireEvents = function() {
      if (Browser.isDevice) {
        EventHandler.add(window, "orientationchange", this.orientationOnChange, this);
      }
      if (this.actionOnScroll !== "none") {
        this.wireScrollEvents();
      }
    };
    Popup2.prototype.wireScrollEvents = function() {
      if (this.getRelateToElement()) {
        for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {
          var parent_1 = _a[_i];
          EventHandler.add(parent_1, "scroll", this.scrollRefresh, this);
        }
      }
    };
    Popup2.prototype.unwireEvents = function() {
      if (Browser.isDevice) {
        EventHandler.remove(window, "orientationchange", this.orientationOnChange);
      }
      if (this.actionOnScroll !== "none") {
        this.unwireScrollEvents();
      }
    };
    Popup2.prototype.unwireScrollEvents = function() {
      if (this.getRelateToElement()) {
        for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {
          var parent_2 = _a[_i];
          EventHandler.remove(parent_2, "scroll", this.scrollRefresh);
        }
      }
    };
    Popup2.prototype.getRelateToElement = function() {
      var relateToElement = this.relateTo === "" || isNullOrUndefined(this.relateTo) ? document.body : this.relateTo;
      this.setProperties({ relateTo: relateToElement }, true);
      return typeof this.relateTo === "string" ? document.querySelector(this.relateTo) : this.relateTo;
    };
    Popup2.prototype.scrollRefresh = function(e) {
      if (this.actionOnScroll === "reposition") {
        if (!isNullOrUndefined(this.element) && !(this.element.offsetParent === e.target || this.element.offsetParent && this.element.offsetParent.tagName === "BODY" && e.target.parentElement == null)) {
          this.refreshPosition();
        }
      } else if (this.actionOnScroll === "hide") {
        this.hide();
      }
      if (this.actionOnScroll !== "none") {
        if (this.getRelateToElement()) {
          var targetVisible = this.isElementOnViewport(this.getRelateToElement(), e.target);
          if (!targetVisible && !this.targetInvisibleStatus) {
            this.trigger("targetExitViewport");
            this.targetInvisibleStatus = true;
          } else if (targetVisible) {
            this.targetInvisibleStatus = false;
          }
        }
      }
    };
    Popup2.prototype.isElementOnViewport = function(relateToElement, scrollElement) {
      var scrollParents = this.getScrollableParent(relateToElement);
      for (var parent_3 = 0; parent_3 < scrollParents.length; parent_3++) {
        if (this.isElementVisible(relateToElement, scrollParents[parent_3])) {
          continue;
        } else {
          return false;
        }
      }
      return true;
    };
    Popup2.prototype.isElementVisible = function(relateToElement, scrollElement) {
      var rect = this.checkGetBoundingClientRect(relateToElement);
      if (!rect.height || !rect.width) {
        return false;
      }
      if (!isNullOrUndefined(this.checkGetBoundingClientRect(scrollElement))) {
        var parent_4 = scrollElement.getBoundingClientRect();
        return !(rect.bottom < parent_4.top) && (!(rect.bottom > parent_4.bottom) && (!(rect.right > parent_4.right) && !(rect.left < parent_4.left)));
      } else {
        var win = window;
        var windowView = {
          top: win.scrollY,
          left: win.scrollX,
          right: win.scrollX + win.outerWidth,
          bottom: win.scrollY + win.outerHeight
        };
        var off = calculatePosition(relateToElement);
        var ele = {
          top: off.top,
          left: off.left,
          right: off.left + rect.width,
          bottom: off.top + rect.height
        };
        var elementView = {
          top: windowView.bottom - ele.top,
          left: windowView.right - ele.left,
          bottom: ele.bottom - windowView.top,
          right: ele.right - windowView.left
        };
        return elementView.top > 0 && elementView.left > 0 && elementView.right > 0 && elementView.bottom > 0;
      }
    };
    Popup2.prototype.preRender = function() {
    };
    Popup2.prototype.setEnableRtl = function() {
      this.reposition();
      if (this.enableRtl) {
        this.element.classList.add(CLASSNAMES$1.RTL);
      } else {
        this.element.classList.remove(CLASSNAMES$1.RTL);
      }
    };
    Popup2.prototype.setContent = function() {
      if (!isNullOrUndefined(this.content)) {
        this.element.innerHTML = "";
        if (typeof this.content === "string") {
          this.element.textContent = this.content;
        } else {
          var relateToElem = this.getRelateToElement();
          var props = this.content.props;
          if (!relateToElem.classList.contains("e-dropdown-btn") || isNullOrUndefined(props)) {
            this.element.appendChild(this.content);
          }
        }
      }
    };
    Popup2.prototype.orientationOnChange = function() {
      var _this = this;
      setTimeout(function() {
        _this.refreshPosition();
      }, 200);
    };
    Popup2.prototype.refreshPosition = function(target, collision) {
      if (!isNullOrUndefined(target)) {
        this.checkFixedParent(target);
      }
      this.reposition();
      if (!collision) {
        this.checkCollision();
      }
    };
    Popup2.prototype.reposition = function() {
      var pos;
      var position;
      var relateToElement = this.getRelateToElement();
      if (typeof this.position.X === "number" && typeof this.position.Y === "number") {
        pos = { left: this.position.X, top: this.position.Y };
      } else if (typeof this.position.X === "string" && typeof this.position.Y === "number" || typeof this.position.X === "number" && typeof this.position.Y === "string") {
        var parentDisplay = void 0;
        var display = this.element.style.display;
        this.element.style.display = "block";
        if (this.element.classList.contains("e-dlg-modal")) {
          parentDisplay = this.element.parentElement.style.display;
          this.element.parentElement.style.display = "block";
        }
        position = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);
        if (typeof this.position.X === "string") {
          pos = { left: position.left, top: this.position.Y };
        } else {
          pos = { left: this.position.X, top: position.top };
        }
        this.element.style.display = display;
        if (this.element.classList.contains("e-dlg-modal")) {
          this.element.parentElement.style.display = parentDisplay;
        }
      } else if (relateToElement) {
        var height = this.element.clientHeight;
        var display = this.element.style.display;
        this.element.style.display = "block";
        pos = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY, height);
        this.element.style.display = display;
      } else {
        pos = { left: 0, top: 0 };
      }
      if (!isNullOrUndefined(pos)) {
        this.element.style.left = pos.left + "px";
        this.element.style.top = pos.top + "px";
      }
    };
    Popup2.prototype.checkGetBoundingClientRect = function(ele) {
      var eleRect;
      try {
        eleRect = ele.getBoundingClientRect();
        return eleRect;
      } catch (error) {
        return null;
      }
    };
    Popup2.prototype.getAnchorPosition = function(anchorEle, ele, position, offsetX, offsetY, height) {
      if (height === void 0) {
        height = 0;
      }
      var eleRect = this.checkGetBoundingClientRect(ele);
      var anchorRect = this.checkGetBoundingClientRect(anchorEle);
      if (isNullOrUndefined(eleRect) || isNullOrUndefined(anchorRect)) {
        return null;
      }
      var anchor = anchorEle;
      var anchorPos = { left: 0, top: 0 };
      if (ele.offsetParent && ele.offsetParent.tagName === "BODY" && anchorEle.tagName === "BODY") {
        anchorPos = calculatePosition(anchorEle);
      } else {
        if (ele.classList.contains("e-dlg-modal") && anchor.tagName !== "BODY") {
          ele = ele.parentElement;
        }
        anchorPos = calculateRelativeBasedPosition(anchor, ele);
      }
      switch (position.X) {
        default:
        case "left":
          break;
        case "center":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.left += window.innerWidth / 2 - eleRect.width / 2;
          } else if (this.targetType === "container") {
            anchorPos.left += anchorRect.width / 2 - eleRect.width / 2;
          } else {
            anchorPos.left += anchorRect.width / 2;
          }
          break;
        case "right":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.left += window.innerWidth - eleRect.width;
          } else if (this.targetType === "container") {
            var scaleX = 1;
            var tranformElement = getTransformElement(ele);
            if (tranformElement) {
              var transformStyle = getComputedStyle(tranformElement).transform;
              if (transformStyle !== "none") {
                var matrix = new DOMMatrix(transformStyle);
                scaleX = matrix.a;
              }
              var zoomStyle = getComputedStyle(tranformElement).zoom;
              if (zoomStyle !== "none") {
                var bodyZoom = getZoomValue(document.body);
                scaleX = bodyZoom * scaleX;
              }
            }
            anchorPos.left += (anchorRect.width - eleRect.width) / scaleX;
          } else {
            anchorPos.left += anchorRect.width;
          }
          break;
      }
      switch (position.Y) {
        default:
        case "top":
          break;
        case "center":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.top += window.innerHeight / 2 - eleRect.height / 2;
          } else if (this.targetType === "container") {
            anchorPos.top += anchorRect.height / 2 - eleRect.height / 2;
          } else {
            anchorPos.top += anchorRect.height / 2;
          }
          break;
        case "bottom":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.top += window.innerHeight - eleRect.height;
          } else if (this.targetType === "container" && !ele.classList.contains("e-dialog")) {
            anchorPos.top += anchorRect.height - eleRect.height;
          } else if (this.targetType === "container" && ele.classList.contains("e-dialog")) {
            anchorPos.top += anchorRect.height - height;
          } else {
            anchorPos.top += anchorRect.height;
          }
          break;
      }
      anchorPos.left += offsetX;
      anchorPos.top += offsetY;
      return anchorPos;
    };
    Popup2.prototype.callFlip = function(param) {
      var relateToElement = this.getRelateToElement();
      flip(this.element, relateToElement, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, param, this.fixedParent);
    };
    Popup2.prototype.callFit = function(param) {
      if (isCollide(this.element, this.viewPortElement).length !== 0) {
        if (isNullOrUndefined(this.viewPortElement)) {
          var data = fit(this.element, this.viewPortElement, param);
          if (param.X) {
            this.element.style.left = data.left + "px";
          }
          if (param.Y) {
            this.element.style.top = data.top + "px";
          }
        } else {
          var elementRect2 = this.checkGetBoundingClientRect(this.element);
          var viewPortRect = this.checkGetBoundingClientRect(this.viewPortElement);
          if (isNullOrUndefined(elementRect2) || isNullOrUndefined(viewPortRect)) {
            return null;
          }
          if (param && param.Y === true) {
            if (viewPortRect.top > elementRect2.top) {
              this.element.style.top = "0px";
            } else if (viewPortRect.bottom < elementRect2.bottom) {
              this.element.style.top = parseInt(this.element.style.top, 10) - (elementRect2.bottom - viewPortRect.bottom) + "px";
            }
          }
          if (param && param.X === true) {
            if (viewPortRect.right < elementRect2.right) {
              this.element.style.left = parseInt(this.element.style.left, 10) - (elementRect2.right - viewPortRect.right) + "px";
            } else if (viewPortRect.left > elementRect2.left) {
              this.element.style.left = parseInt(this.element.style.left, 10) + (viewPortRect.left - elementRect2.left) + "px";
            }
          }
        }
      }
    };
    Popup2.prototype.checkCollision = function() {
      var horz = this.collision.X;
      var vert = this.collision.Y;
      if (horz === "none" && vert === "none") {
        return;
      }
      if (horz === "flip" && vert === "flip") {
        this.callFlip({ X: true, Y: true });
      } else if (horz === "fit" && vert === "fit") {
        this.callFit({ X: true, Y: true });
      } else {
        if (horz === "flip") {
          this.callFlip({ X: true, Y: false });
        } else if (vert === "flip") {
          this.callFlip({ Y: true, X: false });
        }
        if (horz === "fit") {
          this.callFit({ X: true, Y: false });
        } else if (vert === "fit") {
          this.callFit({ X: false, Y: true });
        }
      }
    };
    Popup2.prototype.show = function(animationOptions, relativeElement) {
      var _this = this;
      this.wireEvents();
      if (this.zIndex === 1e3 || !isNullOrUndefined(relativeElement)) {
        var zIndexElement = isNullOrUndefined(relativeElement) ? this.element : relativeElement;
        this.zIndex = getZindexPartial(zIndexElement);
        setStyleAttribute(this.element, { "zIndex": this.zIndex });
      }
      animationOptions = !isNullOrUndefined(animationOptions) && typeof animationOptions === "object" ? animationOptions : this.showAnimation;
      if (this.collision.X !== "none" || this.collision.Y !== "none") {
        removeClass([this.element], CLASSNAMES$1.CLOSE);
        addClass([this.element], CLASSNAMES$1.OPEN);
        this.checkCollision();
        removeClass([this.element], CLASSNAMES$1.OPEN);
        addClass([this.element], CLASSNAMES$1.CLOSE);
      }
      if (!isNullOrUndefined(animationOptions)) {
        animationOptions.begin = function() {
          if (!_this.isDestroyed) {
            removeClass([_this.element], CLASSNAMES$1.CLOSE);
            addClass([_this.element], CLASSNAMES$1.OPEN);
          }
        };
        animationOptions.end = function() {
          if (!_this.isDestroyed) {
            _this.trigger("open");
          }
        };
        new Animation$1(animationOptions).animate(this.element);
      } else {
        removeClass([this.element], CLASSNAMES$1.CLOSE);
        addClass([this.element], CLASSNAMES$1.OPEN);
        this.trigger("open");
      }
    };
    Popup2.prototype.hide = function(animationOptions) {
      var _this = this;
      animationOptions = !isNullOrUndefined(animationOptions) && typeof animationOptions === "object" ? animationOptions : this.hideAnimation;
      if (!isNullOrUndefined(animationOptions)) {
        animationOptions.end = function() {
          if (!_this.isDestroyed) {
            removeClass([_this.element], CLASSNAMES$1.OPEN);
            addClass([_this.element], CLASSNAMES$1.CLOSE);
            _this.trigger("close");
          }
        };
        new Animation$1(animationOptions).animate(this.element);
      } else {
        removeClass([this.element], CLASSNAMES$1.OPEN);
        addClass([this.element], CLASSNAMES$1.CLOSE);
        this.trigger("close");
      }
      this.unwireEvents();
    };
    Popup2.prototype.getScrollableParent = function(element2) {
      this.checkFixedParent(element2);
      return getScrollableParent(element2, this.fixedParent);
    };
    Popup2.prototype.checkFixedParent = function(element2) {
      var parent = element2.parentElement;
      while (parent && parent.tagName !== "HTML") {
        var parentStyle = getComputedStyle(parent);
        if ((parentStyle.position === "fixed" || parentStyle.position === "sticky") && !isNullOrUndefined(this.element) && this.element.offsetParent && this.element.offsetParent.tagName === "BODY" && getComputedStyle(this.element.offsetParent).overflow !== "hidden") {
          this.element.style.top = window.scrollY > parseInt(this.element.style.top, 10) ? formatUnit(window.scrollY - parseInt(this.element.style.top, 10)) : formatUnit(parseInt(this.element.style.top, 10) - window.scrollY);
          this.element.style.position = "fixed";
          this.fixedParent = true;
        }
        parent = parent.parentElement;
        if (!isNullOrUndefined(this.element) && isNullOrUndefined(this.element.offsetParent) && parentStyle.position === "fixed" && this.element.style.position === "fixed") {
          this.fixedParent = true;
        }
      }
    };
    __decorate$c([
      Property("auto")
    ], Popup2.prototype, "height", void 0);
    __decorate$c([
      Property("auto")
    ], Popup2.prototype, "width", void 0);
    __decorate$c([
      Property(null)
    ], Popup2.prototype, "content", void 0);
    __decorate$c([
      Property("container")
    ], Popup2.prototype, "targetType", void 0);
    __decorate$c([
      Property(null)
    ], Popup2.prototype, "viewPortElement", void 0);
    __decorate$c([
      Property({ X: "none", Y: "none" })
    ], Popup2.prototype, "collision", void 0);
    __decorate$c([
      Property("")
    ], Popup2.prototype, "relateTo", void 0);
    __decorate$c([
      Complex({}, PositionData)
    ], Popup2.prototype, "position", void 0);
    __decorate$c([
      Property(0)
    ], Popup2.prototype, "offsetX", void 0);
    __decorate$c([
      Property(0)
    ], Popup2.prototype, "offsetY", void 0);
    __decorate$c([
      Property(1e3)
    ], Popup2.prototype, "zIndex", void 0);
    __decorate$c([
      Property(false)
    ], Popup2.prototype, "enableRtl", void 0);
    __decorate$c([
      Property("reposition")
    ], Popup2.prototype, "actionOnScroll", void 0);
    __decorate$c([
      Property(null)
    ], Popup2.prototype, "showAnimation", void 0);
    __decorate$c([
      Property(null)
    ], Popup2.prototype, "hideAnimation", void 0);
    __decorate$c([
      Event()
    ], Popup2.prototype, "open", void 0);
    __decorate$c([
      Event()
    ], Popup2.prototype, "close", void 0);
    __decorate$c([
      Event()
    ], Popup2.prototype, "targetExitViewport", void 0);
    Popup2 = __decorate$c([
      NotifyPropertyChanges
    ], Popup2);
    return Popup2;
  }(Component)
);
function getScrollableParent(element2, fixedParent2) {
  var eleStyle = getComputedStyle(element2);
  var scrollParents = [];
  var overflowRegex = /(auto|scroll)/;
  var parent = element2.parentElement;
  while (parent && parent.tagName !== "HTML") {
    var parentStyle = getComputedStyle(parent);
    if (!(eleStyle.position === "absolute" && parentStyle.position === "static") && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {
      scrollParents.push(parent);
    }
    parent = parent.parentElement;
  }
  if (!fixedParent2) {
    scrollParents.push(document);
  }
  return scrollParents;
}
function getZindexPartial(element2) {
  var parent = element2.parentElement;
  var parentZindex = [];
  while (parent) {
    if (parent.tagName !== "BODY") {
      var index = document.defaultView.getComputedStyle(parent, null).getPropertyValue("z-index");
      var position = document.defaultView.getComputedStyle(parent, null).getPropertyValue("position");
      if (index !== "auto" && position !== "static") {
        parentZindex.push(index);
      }
      parent = parent.parentElement;
    } else {
      break;
    }
  }
  var childrenZindex = [];
  for (var i = 0; i < document.body.children.length; i++) {
    if (!element2.isEqualNode(document.body.children[i])) {
      var index = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue("z-index");
      var position = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue("position");
      if (index !== "auto" && position !== "static") {
        childrenZindex.push(index);
      }
    }
  }
  childrenZindex.push("999");
  var siblingsZindex = [];
  if (!isNullOrUndefined(element2.parentElement) && element2.parentElement.tagName !== "BODY") {
    var childNodes = [].slice.call(element2.parentElement.children);
    for (var i = 0; i < childNodes.length; i++) {
      if (!element2.isEqualNode(childNodes[i])) {
        var index = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue("z-index");
        var position = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue("position");
        if (index !== "auto" && position !== "static") {
          siblingsZindex.push(index);
        }
      }
    }
  }
  var finalValue = parentZindex.concat(childrenZindex, siblingsZindex);
  var currentZindexValue = Math.max.apply(Math, finalValue) + 1;
  return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;
}
var elementClass = ["north-west", "north", "north-east", "west", "east", "south-west", "south", "south-east"];
var RESIZE_HANDLER = "e-resize-handle";
var FOCUSED_HANDLER = "e-focused-handle";
var DIALOG_RESIZABLE = "e-dlg-resizable";
var RESTRICT_LEFT = ["e-restrict-left"];
var RESIZE_WITHIN_VIEWPORT = "e-resize-viewport";
var dialogBorderResize = ["north", "west", "east", "south"];
var targetElement;
var selectedHandler;
var originalWidth = 0;
var originalHeight = 0;
var originalX = 0;
var originalY = 0;
var originalMouseX = 0;
var originalMouseY = 0;
var minHeight;
var maxHeight;
var minWidth;
var maxWidth;
var containerElement;
var resizeStart = null;
var resize = null;
var resizeEnd = null;
var resizeWestWidth;
var setLeft = true;
var previousWidth = 0;
var setWidth = true;
function createResize(args) {
  resizeStart = args.resizeBegin;
  resize = args.resizing;
  resizeEnd = args.resizeComplete;
  targetElement = getDOMElement(args.element);
  containerElement = getDOMElement(args.boundary);
  var directions = args.direction.split(" ");
  for (var i = 0; i < directions.length; i++) {
    if (dialogBorderResize.indexOf(directions[i]) >= 0 && directions[i]) {
      setBorderResizeElm(directions[i]);
    } else if (directions[i].trim() !== "") {
      var resizeHandler = createElement("div", { className: "e-icons " + RESIZE_HANDLER + " e-" + directions[i] });
      targetElement.appendChild(resizeHandler);
    }
  }
  minHeight = args.minHeight;
  minWidth = args.minWidth;
  maxWidth = args.maxWidth;
  maxHeight = args.maxHeight;
  if (args.proxy && args.proxy.element && args.proxy.element.classList.contains("e-dialog")) {
    wireEvents(args.proxy);
  } else {
    wireEvents();
  }
}
function setBorderResizeElm(direction) {
  calculateValues();
  var borderBottom = createElement("span", {
    attrs: {
      "unselectable": "on",
      "contenteditable": "false"
    }
  });
  borderBottom.setAttribute("class", "e-dialog-border-resize e-" + direction);
  if (direction === "south") {
    borderBottom.style.height = "2px";
    borderBottom.style.width = "100%";
    borderBottom.style.bottom = "0px";
    borderBottom.style.left = "0px";
  }
  if (direction === "north") {
    borderBottom.style.height = "2px";
    borderBottom.style.width = "100%";
    borderBottom.style.top = "0px";
    borderBottom.style.left = "0px";
  }
  if (direction === "east") {
    borderBottom.style.height = "100%";
    borderBottom.style.width = "2px";
    borderBottom.style.right = "0px";
    borderBottom.style.top = "0px";
  }
  if (direction === "west") {
    borderBottom.style.height = "100%";
    borderBottom.style.width = "2px";
    borderBottom.style.left = "0px";
    borderBottom.style.top = "0px";
  }
  targetElement.appendChild(borderBottom);
}
function getDOMElement(element2) {
  var domElement;
  if (!isNullOrUndefined(element2)) {
    if (typeof element2 === "string") {
      domElement = document.querySelector(element2);
    } else {
      domElement = element2;
    }
  }
  return domElement;
}
function wireEvents(args) {
  var context = args || this;
  var resizers = targetElement.querySelectorAll("." + RESIZE_HANDLER);
  for (var i = 0; i < resizers.length; i++) {
    selectedHandler = resizers[i];
    EventHandler.add(selectedHandler, "mousedown", onMouseDown, context);
    var eventName = Browser.info.name === "msie" ? "pointerdown" : "touchstart";
    EventHandler.add(selectedHandler, eventName, onTouchStart, context);
  }
  var borderResizers = targetElement.querySelectorAll(".e-dialog-border-resize");
  if (!isNullOrUndefined(borderResizers)) {
    for (var i = 0; i < borderResizers.length; i++) {
      selectedHandler = borderResizers[i];
      EventHandler.add(selectedHandler, "mousedown", onMouseDown, context);
      var eventName = Browser.info.name === "msie" ? "pointerdown" : "touchstart";
      EventHandler.add(selectedHandler, eventName, onTouchStart, context);
    }
  }
}
function getEventType(e) {
  return e.indexOf("mouse") > -1 ? "mouse" : "touch";
}
function onMouseDown(e) {
  e.preventDefault();
  targetElement = e.target.parentElement;
  calculateValues();
  originalMouseX = e.pageX;
  originalMouseY = e.pageY;
  e.target.classList.add(FOCUSED_HANDLER);
  if (!isNullOrUndefined(resizeStart)) {
    var proxy_1 = this;
    if (resizeStart(e, proxy_1) === true) {
      return;
    }
  }
  if (this.targetEle && targetElement && targetElement.querySelector("." + DIALOG_RESIZABLE)) {
    containerElement = this.target === "body" ? null : this.targetEle;
    maxWidth = this.targetEle.clientWidth;
    maxHeight = this.targetEle.clientHeight;
  }
  var target = isNullOrUndefined(containerElement) ? document : containerElement;
  EventHandler.add(target, "mousemove", onMouseMove, this);
  EventHandler.add(document, "mouseup", onMouseUp, this);
  for (var i = 0; i < RESTRICT_LEFT.length; i++) {
    if (targetElement.classList.contains(RESTRICT_LEFT[i])) {
      setLeft = false;
    } else {
      setLeft = true;
    }
  }
}
function onMouseUp(e) {
  var touchMoveEvent = Browser.info.name === "msie" ? "pointermove" : "touchmove";
  var touchEndEvent = Browser.info.name === "msie" ? "pointerup" : "touchend";
  var target = isNullOrUndefined(containerElement) ? document : containerElement;
  var eventName = Browser.info.name === "msie" ? "pointerdown" : "touchstart";
  EventHandler.remove(target, "mousemove", onMouseMove);
  EventHandler.remove(target, touchMoveEvent, onMouseMove);
  EventHandler.remove(target, eventName, onMouseMove);
  if (!isNullOrUndefined(document.body.querySelector("." + FOCUSED_HANDLER))) {
    document.body.querySelector("." + FOCUSED_HANDLER).classList.remove(FOCUSED_HANDLER);
  }
  if (!isNullOrUndefined(resizeEnd)) {
    var proxy_2 = this;
    resizeEnd(e, proxy_2);
  }
  EventHandler.remove(document, "mouseup", onMouseUp);
  EventHandler.remove(document, touchEndEvent, onMouseUp);
}
function calculateValues() {
  originalWidth = parseFloat(getComputedStyle(targetElement, null).getPropertyValue("width").replace("px", ""));
  originalHeight = parseFloat(getComputedStyle(targetElement, null).getPropertyValue("height").replace("px", ""));
  originalX = targetElement.getBoundingClientRect().left;
  originalY = targetElement.getBoundingClientRect().top;
}
function onTouchStart(e) {
  targetElement = e.target.parentElement;
  calculateValues();
  var dialogResizeElement = targetElement.classList.contains("e-dialog");
  if ((e.target.classList.contains(RESIZE_HANDLER) || e.target.classList.contains("e-dialog-border-resize")) && dialogResizeElement) {
    e.target.classList.add(FOCUSED_HANDLER);
  }
  var coordinates = e.touches ? e.changedTouches[0] : e;
  originalMouseX = coordinates.pageX;
  originalMouseY = coordinates.pageY;
  if (!isNullOrUndefined(resizeStart)) {
    var proxy_3 = this;
    if (resizeStart(e, proxy_3) === true) {
      return;
    }
  }
  var touchMoveEvent = Browser.info.name === "msie" ? "pointermove" : "touchmove";
  var touchEndEvent = Browser.info.name === "msie" ? "pointerup" : "touchend";
  var target = isNullOrUndefined(containerElement) ? document : containerElement;
  EventHandler.add(target, touchMoveEvent, onMouseMove, this);
  EventHandler.add(document, touchEndEvent, onMouseUp, this);
}
function onMouseMove(e) {
  if (e.target.classList.contains(RESIZE_HANDLER) && e.target.classList.contains(FOCUSED_HANDLER)) {
    selectedHandler = e.target;
  } else if (!isNullOrUndefined(document.body.querySelector("." + FOCUSED_HANDLER))) {
    selectedHandler = document.body.querySelector("." + FOCUSED_HANDLER);
  }
  if (!isNullOrUndefined(selectedHandler)) {
    var resizeTowards = "";
    for (var i = 0; i < elementClass.length; i++) {
      if (selectedHandler.classList.contains("e-" + elementClass[i])) {
        resizeTowards = elementClass[i];
      }
    }
    if (!isNullOrUndefined(resize)) {
      var proxy_4 = this;
      resize(e, proxy_4);
    }
    switch (resizeTowards) {
      case "south":
        resizeSouth(e);
        break;
      case "north":
        resizeNorth(e);
        break;
      case "west":
        resizeWest(e);
        break;
      case "east":
        resizeEast(e);
        break;
      case "south-east":
        resizeSouth(e);
        resizeEast(e);
        break;
      case "south-west":
        resizeSouth(e);
        resizeWest(e);
        break;
      case "north-east":
        resizeNorth(e);
        resizeEast(e);
        break;
      case "north-west":
        resizeNorth(e);
        resizeWest(e);
        break;
    }
  }
}
function getClientRectValues(element2) {
  return element2.getBoundingClientRect();
}
function resizeSouth(e) {
  var documentHeight = document.documentElement.clientHeight;
  var calculateValue = false;
  var coordinates = e.touches ? e.changedTouches[0] : e;
  var currentpageY = coordinates.pageY;
  var targetRectValues = getClientRectValues(targetElement);
  var containerRectValues;
  if (!isNullOrUndefined(containerElement)) {
    containerRectValues = getClientRectValues(containerElement);
  }
  if (!isNullOrUndefined(containerElement)) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && (documentHeight - currentpageY >= 0 || targetRectValues.top < 0)) {
    calculateValue = true;
  }
  var calculatedHeight = originalHeight + (currentpageY - originalMouseY);
  calculatedHeight = calculatedHeight > minHeight ? calculatedHeight : minHeight;
  var containerTop = 0;
  if (!isNullOrUndefined(containerElement)) {
    containerTop = containerRectValues.top;
  }
  var borderValue = isNullOrUndefined(containerElement) ? 0 : containerElement.offsetHeight - containerElement.clientHeight;
  var topWithoutborder = targetRectValues.top - containerTop - borderValue / 2;
  topWithoutborder = topWithoutborder < 0 ? 0 : topWithoutborder;
  if (targetRectValues.top > 0 && topWithoutborder + calculatedHeight > maxHeight) {
    calculateValue = false;
    if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {
      return;
    }
    targetElement.style.height = maxHeight - parseInt(topWithoutborder.toString(), 10) + "px";
    return;
  }
  var targetTop = 0;
  if (calculateValue) {
    if (targetRectValues.top < 0 && documentHeight + (targetRectValues.height + targetRectValues.top) > 0) {
      targetTop = targetRectValues.top;
      if (calculatedHeight + targetTop <= 30) {
        calculatedHeight = targetRectValues.height - (targetRectValues.height + targetRectValues.top) + 30;
      }
    }
    if (calculatedHeight + targetRectValues.top >= maxHeight) {
      targetElement.style.height = targetRectValues.height + (documentHeight - (targetRectValues.height + targetRectValues.top)) + "px";
    }
    var calculatedTop = isNullOrUndefined(containerElement) ? targetTop : topWithoutborder;
    if (calculatedHeight >= minHeight && calculatedHeight + calculatedTop <= maxHeight) {
      targetElement.style.height = calculatedHeight + "px";
    }
  }
}
function resizeNorth(e) {
  var calculateValue = false;
  var boundaryRectValues;
  var pageY = getEventType(e.type) === "mouse" ? e.pageY : e.touches[0].pageY;
  var targetRectValues = getClientRectValues(targetElement);
  var borderValue = isNullOrUndefined(containerElement) ? 0 : containerElement.offsetHeight - containerElement.clientHeight;
  if (!isNullOrUndefined(containerElement)) {
    boundaryRectValues = getClientRectValues(containerElement);
  }
  if (!isNullOrUndefined(containerElement) && targetRectValues.top - boundaryRectValues.top > 0) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && pageY > 0) {
    calculateValue = true;
  } else if (!isNullOrUndefined(containerElement) && Math.floor(targetRectValues.top - boundaryRectValues.top + targetRectValues.height + (boundaryRectValues.bottom - targetRectValues.bottom)) - borderValue <= maxHeight) {
    calculateValue = true;
  }
  var currentHeight = originalHeight - (pageY - originalMouseY);
  if (calculateValue) {
    if (currentHeight >= minHeight && currentHeight <= maxHeight) {
      var containerTop = 0;
      if (!isNullOrUndefined(containerElement)) {
        containerTop = boundaryRectValues.top;
      }
      var top_1 = originalY - containerTop + (pageY - originalMouseY);
      top_1 = top_1 > 0 ? top_1 : 1;
      targetElement.style.height = currentHeight + "px";
      targetElement.style.top = top_1 + "px";
    }
  }
}
function resizeWest(e) {
  var documentWidth = document.documentElement.clientWidth;
  var calculateValue = false;
  var rectValues;
  if (!isNullOrUndefined(containerElement)) {
    rectValues = getClientRectValues(containerElement);
  }
  var pageX = getEventType(e.type) === "mouse" ? e.pageX : e.touches[0].pageX;
  var targetRectValues = getClientRectValues(targetElement);
  var borderValue = isNullOrUndefined(containerElement) ? 0 : containerElement.offsetWidth - containerElement.clientWidth;
  var left = isNullOrUndefined(containerElement) ? 0 : rectValues.left;
  var containerWidth = isNullOrUndefined(containerElement) ? 0 : rectValues.width;
  if (isNullOrUndefined(resizeWestWidth)) {
    if (!isNullOrUndefined(containerElement)) {
      resizeWestWidth = targetRectValues.left - left - borderValue / 2 + targetRectValues.width;
      resizeWestWidth = resizeWestWidth + (containerWidth - borderValue - resizeWestWidth);
    } else {
      resizeWestWidth = documentWidth;
    }
  }
  if (!isNullOrUndefined(containerElement) && Math.floor(targetRectValues.left - rectValues.left + targetRectValues.width + (rectValues.right - targetRectValues.right)) - borderValue <= maxWidth) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && pageX >= 0) {
    calculateValue = true;
  }
  var calculatedWidth = originalWidth - (pageX - originalMouseX);
  if (setLeft) {
    calculatedWidth = calculatedWidth > resizeWestWidth ? resizeWestWidth : calculatedWidth;
  }
  if (calculateValue) {
    if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {
      var containerLeft = 0;
      if (!isNullOrUndefined(containerElement)) {
        containerLeft = rectValues.left;
      }
      var left_1 = originalX - containerLeft + (pageX - originalMouseX);
      left_1 = left_1 > 0 ? left_1 : 1;
      if (calculatedWidth !== previousWidth && setWidth) {
        targetElement.style.width = calculatedWidth + "px";
      }
      if (setLeft) {
        targetElement.style.left = left_1 + "px";
        if (left_1 === 1) {
          setWidth = false;
        } else {
          setWidth = true;
        }
      }
    }
  }
  previousWidth = calculatedWidth;
}
function resizeEast(e) {
  var documentWidth = document.documentElement.clientWidth;
  var calculateValue = false;
  var containerRectValues;
  if (!isNullOrUndefined(containerElement)) {
    containerRectValues = getClientRectValues(containerElement);
  }
  var coordinates = e.touches ? e.changedTouches[0] : e;
  var pageX = coordinates.pageX;
  var targetRectValues = getClientRectValues(targetElement);
  if (!isNullOrUndefined(containerElement) && (targetRectValues.left - containerRectValues.left + targetRectValues.width <= maxWidth || targetRectValues.right - containerRectValues.left >= targetRectValues.width)) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && documentWidth - pageX > 0) {
    calculateValue = true;
  }
  var calculatedWidth = originalWidth + (pageX - originalMouseX);
  var containerLeft = 0;
  if (!isNullOrUndefined(containerElement)) {
    containerLeft = containerRectValues.left;
  }
  if (targetRectValues.left - containerLeft + calculatedWidth > maxWidth) {
    calculateValue = false;
    if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {
      return;
    }
    targetElement.style.width = maxWidth - (targetRectValues.left - containerLeft) + "px";
  }
  if (calculateValue) {
    if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {
      targetElement.style.width = calculatedWidth + "px";
    }
  }
}
function setMinHeight(minimumHeight) {
  minHeight = minimumHeight;
}
function setMaxWidth(value) {
  maxWidth = value;
}
function setMaxHeight(value) {
  maxHeight = value;
}
function removeResize() {
  var handlers = targetElement.querySelectorAll("." + RESIZE_HANDLER);
  for (var i = 0; i < handlers.length; i++) {
    detach(handlers[i]);
  }
  var borderResizers = targetElement.querySelectorAll(".e-dialog-border-resize");
  if (!isNullOrUndefined(borderResizers)) {
    for (var i = 0; i < borderResizers.length; i++) {
      detach(borderResizers[i]);
    }
  }
}
function resizeDestroy() {
  targetElement = null;
  selectedHandler = null;
  containerElement = null;
  resizeWestWidth = null;
  resizeStart = null;
  resize = null;
  resizeEnd = null;
}
var __extends$r = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$b = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var ButtonProps = (
  /** @class */
  function(_super) {
    __extends$r(ButtonProps2, _super);
    function ButtonProps2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$b([
      Property(true)
    ], ButtonProps2.prototype, "isFlat", void 0);
    __decorate$b([
      Property()
    ], ButtonProps2.prototype, "buttonModel", void 0);
    __decorate$b([
      Property("Button")
    ], ButtonProps2.prototype, "type", void 0);
    __decorate$b([
      Event()
    ], ButtonProps2.prototype, "click", void 0);
    return ButtonProps2;
  }(ChildProperty)
);
var AnimationSettings = (
  /** @class */
  function(_super) {
    __extends$r(AnimationSettings2, _super);
    function AnimationSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$b([
      Property("Fade")
    ], AnimationSettings2.prototype, "effect", void 0);
    __decorate$b([
      Property(400)
    ], AnimationSettings2.prototype, "duration", void 0);
    __decorate$b([
      Property(0)
    ], AnimationSettings2.prototype, "delay", void 0);
    return AnimationSettings2;
  }(ChildProperty)
);
var ROOT$2 = "e-dialog";
var RTL$2 = "e-rtl";
var DLG_HEADER_CONTENT = "e-dlg-header-content";
var DLG_HEADER = "e-dlg-header";
var DLG_FOOTER_CONTENT = "e-footer-content";
var MODAL_DLG = "e-dlg-modal";
var DLG_CONTENT = "e-dlg-content";
var DLG_CLOSE_ICON = "e-icon-dlg-close";
var DLG_OVERLAY = "e-dlg-overlay";
var DLG_TARGET = "e-dlg-target";
var DLG_CONTAINER = "e-dlg-container";
var SCROLL_DISABLED = "e-scroll-disabled";
var DLG_PRIMARY_BUTTON = "e-primary";
var ICON$1 = "e-icons";
var POPUP_ROOT$1 = "e-popup";
var DEVICE$1 = "e-device";
var FULLSCREEN = "e-dlg-fullscreen";
var DLG_CLOSE_ICON_BTN = "e-dlg-closeicon-btn";
var DLG_HIDE = "e-popup-close";
var DLG_SHOW = "e-popup-open";
var DLG_UTIL_DEFAULT_TITLE = "Information";
var DLG_UTIL_ROOT = "e-scroll-disabled";
var DLG_UTIL_ALERT = "e-alert-dialog";
var DLG_UTIL_CONFIRM = "e-confirm-dialog";
var DLG_RESIZABLE = "e-dlg-resizable";
var DLG_RESTRICT_LEFT_VALUE = "e-restrict-left";
var DLG_RESTRICT_WIDTH_VALUE = "e-resize-viewport";
var DLG_REF_ELEMENT = "e-dlg-ref-element";
var DLG_USER_ACTION_CLOSED = "user action";
var DLG_CLOSE_ICON_CLOSED = "close icon";
var DLG_ESCAPE_CLOSED = "escape";
var DLG_OVERLAYCLICK_CLOSED = "overlayClick";
var DLG_DRAG = "e-draggable";
var Dialog = (
  /** @class */
  function(_super) {
    __extends$r(Dialog2, _super);
    function Dialog2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.needsID = true;
      return _this;
    }
    Dialog2.prototype.render = function() {
      this.initialize();
      this.initRender();
      this.wireEvents();
      if (this.width === "100%") {
        this.element.style.width = "";
      }
      if (this.minHeight !== "") {
        this.element.style.minHeight = formatUnit(this.minHeight);
      }
      if (this.enableResize) {
        this.setResize();
        if (this.isModal) {
          this.isModelResize = true;
        }
        if (this.animationSettings.effect === "None") {
          this.getMinHeight();
        }
      }
      this.renderComplete();
    };
    Dialog2.prototype.initializeValue = function() {
      this.dlgClosedBy = DLG_USER_ACTION_CLOSED;
    };
    Dialog2.prototype.preRender = function() {
      var _this = this;
      this.initializeValue();
      this.headerContent = null;
      this.allowMaxHeight = true;
      this.preventVisibility = true;
      this.clonedEle = this.element.cloneNode(true);
      this.closeIconClickEventHandler = function(event) {
        _this.dlgClosedBy = DLG_CLOSE_ICON_CLOSED;
        _this.hide(event);
      };
      this.dlgOverlayClickEventHandler = function(event) {
        _this.dlgClosedBy = DLG_OVERLAYCLICK_CLOSED;
        event.preventFocus = false;
        _this.trigger("overlayClick", event, function(overlayClickEventArgs) {
          if (!overlayClickEventArgs.preventFocus) {
            _this.focusContent();
          }
          _this.dlgClosedBy = DLG_USER_ACTION_CLOSED;
        });
      };
      var localeText = { close: "Close" };
      this.l10n = new L10n("dialog", localeText, this.locale);
      this.checkPositionData();
      if (isNullOrUndefined(this.target)) {
        var prevOnChange = this.isProtectedOnChange;
        this.isProtectedOnChange = true;
        this.target = document.body;
        this.isProtectedOnChange = prevOnChange;
      }
    };
    Dialog2.prototype.updatePersistData = function() {
      if (this.enablePersistence) {
        this.setProperties({
          width: parseFloat(this.element.style.width),
          height: parseFloat(this.element.style.height),
          position: { X: parseFloat(this.dragObj.element.style.left), Y: parseFloat(this.dragObj.element.style.top) }
        }, true);
      }
    };
    Dialog2.prototype.isNumberValue = function(value) {
      var isNumber = /^[-+]?\d*\.?\d+$/.test(value);
      return isNumber;
    };
    Dialog2.prototype.checkPositionData = function() {
      if (!isNullOrUndefined(this.position)) {
        if (!isNullOrUndefined(this.position.X) && typeof this.position.X !== "number") {
          var isNumber = this.isNumberValue(this.position.X);
          if (isNumber) {
            var prevOnChange = this.isProtectedOnChange;
            this.isProtectedOnChange = true;
            this.position.X = parseFloat(this.position.X);
            this.isProtectedOnChange = prevOnChange;
          }
        }
        if (!isNullOrUndefined(this.position.Y) && typeof this.position.Y !== "number") {
          var isNumber = this.isNumberValue(this.position.Y);
          if (isNumber) {
            var prevOnChange = this.isProtectedOnChange;
            this.isProtectedOnChange = true;
            this.position.Y = parseFloat(this.position.Y);
            this.isProtectedOnChange = prevOnChange;
          }
        }
      }
    };
    Dialog2.prototype.getEle = function(list, selector) {
      var element2 = void 0;
      for (var i = 0; i < list.length; i++) {
        if (list[i].classList.contains(selector)) {
          element2 = list[i];
          break;
        }
      }
      return element2;
    };
    Dialog2.prototype.getMinHeight = function() {
      var computedHeaderHeight = "0px";
      var computedFooterHeight = "0px";
      if (!isNullOrUndefined(this.element.querySelector("." + DLG_HEADER_CONTENT))) {
        computedHeaderHeight = getComputedStyle(this.headerContent).height;
      }
      var footerEle = this.getEle(this.element.children, DLG_FOOTER_CONTENT);
      if (!isNullOrUndefined(footerEle)) {
        computedFooterHeight = getComputedStyle(footerEle).height;
      }
      var headerHeight = parseInt(computedHeaderHeight.slice(0, computedHeaderHeight.indexOf("p")), 10);
      var footerHeight = parseInt(computedFooterHeight.slice(0, computedFooterHeight.indexOf("p")), 10);
      setMinHeight(headerHeight + 30 + (isNaN(footerHeight) ? 0 : footerHeight));
      return headerHeight + 30 + footerHeight;
    };
    Dialog2.prototype.onResizeStart = function(args, dialogObj) {
      dialogObj.trigger("resizeStart", args);
      if (!args.cancel && this.isModelResize && !isNullOrUndefined(this.dlgContainer) && this.dlgContainer.classList.contains("e-dlg-" + this.position.X + "-" + this.position.Y)) {
        this.setPopupPosition();
        this.dlgContainer.classList.remove("e-dlg-" + this.position.X + "-" + this.position.Y);
        var targetType = this.getTargetContainer(this.target);
        if (targetType instanceof Element) {
          var computedStyle = window.getComputedStyle(targetType);
          if (computedStyle.getPropertyValue("direction") === "rtl") {
            this.element.style.position = "absolute";
          } else {
            this.element.style.position = "relative";
          }
        } else {
          this.element.style.position = "relative";
        }
        if (this.element.classList.contains(DLG_RESTRICT_LEFT_VALUE)) {
          this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);
        }
        this.isModelResize = false;
      }
      return args.cancel;
    };
    Dialog2.prototype.onResizing = function(args, dialogObj) {
      dialogObj.trigger("resizing", args);
    };
    Dialog2.prototype.onResizeComplete = function(args, dialogObj) {
      dialogObj.trigger("resizeStop", args);
      this.updatePersistData();
    };
    Dialog2.prototype.setResize = function() {
      if (this.enableResize) {
        this.element.classList.add(DLG_RESIZABLE);
        var computedHeight = getComputedStyle(this.element).minHeight;
        var computedWidth = getComputedStyle(this.element).minWidth;
        var direction = "";
        for (var i = 0; i < this.resizeHandles.length; i++) {
          if (this.resizeHandles[i] === "All") {
            direction = "south north east west north-east north-west south-east south-west";
            break;
          } else {
            var directionValue = "";
            switch (this.resizeHandles[i].toString()) {
              case "SouthEast":
                directionValue = "south-east";
                break;
              case "SouthWest":
                directionValue = "south-west";
                break;
              case "NorthEast":
                directionValue = "north-east";
                break;
              case "NorthWest":
                directionValue = "north-west";
                break;
              default:
                directionValue = this.resizeHandles[i].toString();
                break;
            }
            direction += directionValue.toLocaleLowerCase() + " ";
          }
        }
        if (this.enableRtl && direction.trim() === "south-east") {
          direction = "south-west";
        } else if (this.enableRtl && direction.trim() === "south-west") {
          direction = "south-east";
        }
        if (this.isModal && this.enableRtl) {
          this.element.classList.add(DLG_RESTRICT_LEFT_VALUE);
        } else if (this.isModal && this.target === document.body) {
          this.element.classList.add(DLG_RESTRICT_WIDTH_VALUE);
        }
        createResize({
          element: this.element,
          direction,
          minHeight: parseInt(computedHeight.slice(0, computedWidth.indexOf("p")), 10),
          maxHeight: this.targetEle.clientHeight,
          minWidth: parseInt(computedWidth.slice(0, computedWidth.indexOf("p")), 10),
          maxWidth: this.targetEle.clientWidth,
          boundary: this.target === document.body ? null : this.targetEle,
          resizeBegin: this.onResizeStart.bind(this),
          resizeComplete: this.onResizeComplete.bind(this),
          resizing: this.onResizing.bind(this),
          proxy: this
        });
        this.wireWindowResizeEvent();
      } else {
        removeResize();
        this.unWireWindowResizeEvent();
        if (this.isModal) {
          this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);
        } else {
          this.element.classList.remove(DLG_RESTRICT_WIDTH_VALUE);
        }
        this.element.classList.remove(DLG_RESIZABLE);
      }
    };
    Dialog2.prototype.getFocusElement = function(target) {
      var value = 'input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]';
      var items = target.querySelectorAll(value);
      return { element: items[items.length - 1] };
    };
    Dialog2.prototype.keyDown = function(event) {
      var _this = this;
      if (event.keyCode === 9) {
        if (this.isModal) {
          var buttonObj = void 0;
          if (!isNullOrUndefined(this.btnObj)) {
            buttonObj = this.btnObj[this.btnObj.length - 1];
          }
          if (isNullOrUndefined(this.btnObj) && !isNullOrUndefined(this.ftrTemplateContent)) {
            buttonObj = this.getFocusElement(this.ftrTemplateContent);
          }
          if (isNullOrUndefined(this.btnObj) && isNullOrUndefined(this.ftrTemplateContent) && !isNullOrUndefined(this.contentEle)) {
            buttonObj = this.getFocusElement(this.contentEle);
          }
          if (!isNullOrUndefined(buttonObj) && document.activeElement === buttonObj.element && !event.shiftKey) {
            event.preventDefault();
            this.focusableElements(this.element).focus();
          }
          if (document.activeElement === this.focusableElements(this.element) && event.shiftKey) {
            event.preventDefault();
            if (!isNullOrUndefined(buttonObj)) {
              buttonObj.element.focus();
            }
          }
        }
      }
      var element2 = document.activeElement;
      var isTagName = ["input", "textarea"].indexOf(element2.tagName.toLowerCase()) > -1;
      var isContentEdit = false;
      if (!isTagName) {
        isContentEdit = element2.hasAttribute("contenteditable") && element2.getAttribute("contenteditable") === "true";
      }
      if (event.keyCode === 27 && this.closeOnEscape) {
        this.dlgClosedBy = DLG_ESCAPE_CLOSED;
        var query = document.querySelector(".e-popup-open:not(.e-dialog)");
        if (!(!isNullOrUndefined(query) && !query.classList.contains("e-toolbar-pop") && !query.classList.contains("e-slider-tooltip"))) {
          this.hide(event);
        }
      }
      if (event.keyCode === 13 && !event.ctrlKey && element2.tagName.toLowerCase() !== "textarea" && isTagName && !isNullOrUndefined(this.primaryButtonEle) || event.keyCode === 13 && event.ctrlKey && (element2.tagName.toLowerCase() === "textarea" || isContentEdit) && !isNullOrUndefined(this.primaryButtonEle)) {
        var buttonIndex_1;
        var firstPrimary = this.buttons.some(function(data, index) {
          buttonIndex_1 = index;
          var buttonModel = data.buttonModel;
          return !isNullOrUndefined(buttonModel) && buttonModel.isPrimary === true;
        });
        if (firstPrimary && typeof this.buttons[buttonIndex_1].click === "function" && !this.primaryButtonEle.disabled) {
          setTimeout(function() {
            _this.buttons[buttonIndex_1].click.call(_this, event);
          });
        }
      }
    };
    Dialog2.prototype.initialize = function() {
      if (!isNullOrUndefined(this.target)) {
        this.targetEle = typeof this.target === "string" ? document.querySelector(this.target) : this.target;
      }
      if (!this.isBlazorServerRender()) {
        addClass([this.element], ROOT$2);
      }
      if (Browser.isDevice) {
        addClass([this.element], DEVICE$1);
      }
      if (!this.isBlazorServerRender()) {
        this.setCSSClass();
      }
      this.setMaxHeight();
    };
    Dialog2.prototype.initRender = function() {
      var _this = this;
      this.initialRender = true;
      if (!this.isBlazorServerRender()) {
        attributes(this.element, { role: "dialog" });
      }
      if (this.zIndex === 1e3) {
        this.setzIndex(this.element, false);
        this.calculatezIndex = true;
      } else {
        this.calculatezIndex = false;
      }
      this.setTargetContent();
      if (this.header !== "" && !isNullOrUndefined(this.header)) {
        this.setHeader();
      }
      this.renderCloseIcon();
      this.setContent();
      if (this.footerTemplate !== "" && !isNullOrUndefined(this.footerTemplate)) {
        this.setFooterTemplate();
      } else if (!isNullOrUndefined(this.buttons[0]) && !isNullOrUndefined(this.buttons[0].buttonModel)) {
        this.setButton();
      }
      if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
        this.setAllowDragging();
      }
      attributes(this.element, { "aria-modal": this.isModal ? "true" : "false" });
      if (this.isModal) {
        this.setIsModal();
      }
      if (this.element.classList.contains(DLG_UTIL_ALERT) !== true && this.element.classList.contains(DLG_UTIL_CONFIRM) !== true && !isNullOrUndefined(this.element.parentElement)) {
        var parentEle = this.isModal ? this.dlgContainer.parentElement : this.element.parentElement;
        this.refElement = this.createElement("div", { className: DLG_REF_ELEMENT });
        parentEle.insertBefore(this.refElement, this.isModal ? this.dlgContainer : this.element);
      }
      if (!isNullOrUndefined(this.targetEle)) {
        if (this.isModal) {
          this.targetEle.appendChild(this.dlgContainer);
        } else {
          this.targetEle.appendChild(this.element);
        }
      }
      this.popupObj = new Popup(this.element, {
        height: this.height,
        width: this.width,
        zIndex: this.zIndex,
        relateTo: this.target,
        actionOnScroll: "none",
        enableRtl: this.enableRtl,
        // eslint-disable-next-line
        open: function(event) {
          var eventArgs = {
            container: _this.isModal ? _this.dlgContainer : _this.element,
            element: _this.element,
            target: _this.target,
            preventFocus: false
          };
          if (_this.enableResize) {
            _this.resetResizeIcon();
          }
          _this.trigger("open", eventArgs, function(openEventArgs) {
            if (!openEventArgs.preventFocus) {
              _this.focusContent();
            }
          });
        },
        // eslint-disable-next-line
        close: function(event) {
          if (_this.isModal) {
            addClass([_this.dlgOverlay], "e-fade");
          }
          _this.unBindEvent(_this.element);
          if (_this.isModal) {
            _this.dlgContainer.style.display = "none";
          }
          _this.trigger("close", _this.closeArgs);
          var activeEle = document.activeElement;
          if (!isNullOrUndefined(activeEle) && !isNullOrUndefined(activeEle.blur)) {
            activeEle.blur();
          }
          if (!isNullOrUndefined(_this.storeActiveElement) && !isNullOrUndefined(_this.storeActiveElement.focus)) {
            _this.storeActiveElement.focus();
          }
        }
      });
      this.positionChange();
      this.setEnableRTL();
      if (!this.isBlazorServerRender()) {
        addClass([this.element], DLG_HIDE);
        if (this.isModal) {
          this.setOverlayZindex();
        }
      }
      if (this.visible) {
        this.show();
        if (this.isModal) {
          var targetType = this.getTargetContainer(this.target);
          if (targetType instanceof Element) {
            var computedStyle = window.getComputedStyle(targetType);
            if (computedStyle.getPropertyValue("direction") === "rtl") {
              this.setPopupPosition();
            }
          }
        }
      } else {
        if (this.isModal) {
          this.dlgOverlay.style.display = "none";
        }
      }
      this.initialRender = false;
    };
    Dialog2.prototype.getTargetContainer = function(targetValue) {
      var targetElement2 = null;
      if (typeof targetValue === "string") {
        if (targetValue.startsWith("#")) {
          targetElement2 = document.getElementById(targetValue.substring(1));
        } else if (targetValue.startsWith(".")) {
          var elements = document.getElementsByClassName(targetValue.substring(1));
          targetElement2 = elements.length > 0 ? elements[0] : null;
        } else {
          if (!(targetValue instanceof HTMLElement) && targetValue !== document.body) {
            targetElement2 = document.querySelector(targetValue);
          }
        }
      } else if (targetValue instanceof HTMLElement) {
        targetElement2 = targetValue;
      }
      return targetElement2;
    };
    Dialog2.prototype.resetResizeIcon = function() {
      var dialogConHeight = this.getMinHeight();
      if (this.targetEle.offsetHeight < dialogConHeight) {
        var className = this.enableRtl ? "e-south-west" : "e-south-east";
        var resizeIcon = this.element.querySelector("." + className);
        if (!isNullOrUndefined(resizeIcon)) {
          resizeIcon.style.bottom = "-" + dialogConHeight.toString() + "px";
        }
      }
    };
    Dialog2.prototype.setOverlayZindex = function(zIndexValue) {
      var zIndex;
      if (isNullOrUndefined(zIndexValue)) {
        zIndex = parseInt(this.element.style.zIndex, 10) ? parseInt(this.element.style.zIndex, 10) : this.zIndex;
      } else {
        zIndex = zIndexValue;
      }
      this.dlgOverlay.style.zIndex = (zIndex - 1).toString();
      this.dlgContainer.style.zIndex = zIndex.toString();
    };
    Dialog2.prototype.positionChange = function() {
      if (this.isModal) {
        if (!isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y))) {
          this.setPopupPosition();
        } else if (!isNaN(parseFloat(this.position.X)) && isNaN(parseFloat(this.position.Y)) || isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y))) {
          this.setPopupPosition();
        } else {
          this.element.style.top = "0px";
          this.element.style.left = "0px";
          this.dlgContainer.classList.add("e-dlg-" + this.position.X + "-" + this.position.Y);
        }
      } else {
        this.setPopupPosition();
      }
    };
    Dialog2.prototype.setPopupPosition = function() {
      this.popupObj.setProperties({
        position: {
          X: this.position.X,
          Y: this.position.Y
        }
      });
    };
    Dialog2.prototype.setAllowDragging = function() {
      var _this = this;
      var handleContent = "." + DLG_HEADER_CONTENT;
      if (!this.element.classList.contains(DLG_DRAG)) {
        this.dragObj = new Draggable(this.element, {
          clone: false,
          isDragScroll: true,
          abort: ".e-dlg-closeicon-btn",
          handle: handleContent,
          dragStart: function(event) {
            _this.trigger("dragStart", event, function(dragEventArgs) {
            });
          },
          dragStop: function(event) {
            if (_this.isModal) {
              _this.IsDragStop = true;
              if (!isNullOrUndefined(_this.position)) {
                _this.dlgContainer.classList.remove("e-dlg-" + _this.position.X + "-" + _this.position.Y);
              }
              var targetType = _this.getTargetContainer(_this.target);
              if (targetType instanceof Element) {
                var computedStyle = window.getComputedStyle(targetType);
                if (computedStyle.getPropertyValue("direction") === "rtl") {
                  _this.element.style.position = "absolute";
                } else {
                  _this.element.style.position = "relative";
                }
              } else {
                _this.element.style.position = "relative";
              }
            }
            _this.trigger("dragStop", event);
            _this.isModelResize = false;
            _this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);
            _this.updatePersistData();
          },
          drag: function(event) {
            _this.trigger("drag", event);
          }
        });
        if (!isNullOrUndefined(this.targetEle)) {
          this.dragObj.dragArea = this.targetEle;
        }
      }
    };
    Dialog2.prototype.setButton = function() {
      if (!this.isBlazorServerRender()) {
        this.buttonContent = [];
        this.btnObj = [];
        for (var i = 0; i < this.buttons.length; i++) {
          if (isNullOrUndefined(this.buttons[i].buttonModel)) {
            continue;
          }
          var buttonType = !isNullOrUndefined(this.buttons[i].type) ? this.buttons[i].type.toLowerCase() : "button";
          var btn = this.createElement("button", { className: this.cssClass, attrs: { type: buttonType, tabindex: "0" } });
          this.buttonContent.push(btn.outerHTML);
        }
        this.setFooterTemplate();
      }
      var footerBtn;
      for (var i = 0, childNodes = this.element.children; i < childNodes.length; i++) {
        if (childNodes[i].classList.contains(DLG_FOOTER_CONTENT)) {
          footerBtn = childNodes[i].querySelectorAll("button");
        }
      }
      for (var i = 0; i < this.buttons.length; i++) {
        if (isNullOrUndefined(this.buttons[i].buttonModel)) {
          continue;
        }
        if (!this.isBlazorServerRender()) {
          this.btnObj[i] = new Button(this.buttons[i].buttonModel);
        }
        if (!isNullOrUndefined(this.ftrTemplateContent) && footerBtn.length > 0) {
          if (typeof this.buttons[i].click === "function") {
            EventHandler.add(footerBtn[i], "click", this.buttons[i].click, this);
          }
          if (typeof this.buttons[i].click === "object") {
            EventHandler.add(footerBtn[i], "click", this.buttonClickHandler.bind(this, i), this);
          }
        }
        if (!this.isBlazorServerRender() && !isNullOrUndefined(this.ftrTemplateContent)) {
          this.btnObj[i].appendTo(this.ftrTemplateContent.children[i]);
          if (this.buttons[i].isFlat) {
            this.btnObj[i].element.classList.add("e-flat");
          }
          this.primaryButtonEle = this.element.getElementsByClassName("e-primary")[0];
        }
      }
    };
    Dialog2.prototype.buttonClickHandler = function(index) {
      this.trigger("buttons[" + index + "].click", {});
    };
    Dialog2.prototype.setContent = function() {
      this.contentEle = this.createElement("div", { className: DLG_CONTENT, id: this.element.id + "_dialog-content" });
      if (this.headerEle) {
        attributes(this.element, { "aria-describedby": this.element.id + "_title " + this.element.id + "_dialog-content" });
      } else {
        attributes(this.element, { "aria-describedby": this.element.id + "_dialog-content" });
      }
      if (this.innerContentElement) {
        this.contentEle.appendChild(this.innerContentElement);
      } else if (!isNullOrUndefined(this.content) && this.content !== "" || !this.initialRender) {
        if (typeof this.content === "string" && true) {
          this.setTemplate(this.content, this.contentEle, "content");
        } else if (this.content instanceof HTMLElement) {
          this.contentEle.appendChild(this.content);
        } else {
          this.setTemplate(this.content, this.contentEle, "content");
        }
      }
      if (!isNullOrUndefined(this.headerContent)) {
        this.element.insertBefore(this.contentEle, this.element.children[1]);
      } else {
        this.element.insertBefore(this.contentEle, this.element.children[0]);
      }
      if (this.height === "auto") {
        if (!this.isBlazorServerRender() && Browser.isIE && this.element.style.width === "" && !isNullOrUndefined(this.width)) {
          this.element.style.width = formatUnit(this.width);
        }
        this.setMaxHeight();
      }
    };
    Dialog2.prototype.setTemplate = function(template, toElement, prop) {
      var templateFn;
      var templateProps;
      if (toElement.classList.contains(DLG_HEADER)) {
        templateProps = this.element.id + "header";
      } else if (toElement.classList.contains(DLG_FOOTER_CONTENT)) {
        templateProps = this.element.id + "footerTemplate";
      } else {
        templateProps = this.element.id + "content";
      }
      if (!isNullOrUndefined(template.outerHTML)) {
        toElement.appendChild(template);
      } else if (typeof template === "string" || typeof template !== "string" || isBlazor()) {
        if (typeof template === "string") {
          template = this.sanitizeHelper(template);
        }
        if (this.isVue || typeof template !== "string") {
          templateFn = compile$1(template);
        } else {
          toElement.innerHTML = template;
        }
      }
      var fromElements = [];
      if (!isNullOrUndefined(templateFn)) {
        var isString = true;
        for (var _i = 0, _a = templateFn({}, this, prop, templateProps, isString); _i < _a.length; _i++) {
          var item = _a[_i];
          fromElements.push(item);
        }
        append([].slice.call(fromElements), toElement);
      }
    };
    Dialog2.prototype.sanitizeHelper = function(value) {
      if (this.enableHtmlSanitizer) {
        var dialogItem = SanitizeHtmlHelper.beforeSanitize();
        var beforeEvent = {
          cancel: false,
          helper: null
        };
        extend$1(dialogItem, dialogItem, beforeEvent);
        this.trigger("beforeSanitizeHtml", dialogItem);
        if (dialogItem.cancel && !isNullOrUndefined(dialogItem.helper)) {
          value = dialogItem.helper(value);
        } else if (!dialogItem.cancel) {
          value = SanitizeHtmlHelper.serializeValue(dialogItem, value);
        }
      }
      return value;
    };
    Dialog2.prototype.setMaxHeight = function() {
      if (!this.allowMaxHeight) {
        return;
      }
      var display = this.element.style.display;
      this.element.style.display = "none";
      this.element.style.maxHeight = !isNullOrUndefined(this.target) && this.targetEle.offsetHeight < window.innerHeight ? this.targetEle.offsetHeight - 20 + "px" : window.innerHeight - 20 + "px";
      this.element.style.display = display;
      if (Browser.isIE && this.height === "auto" && !isNullOrUndefined(this.contentEle) && this.element.offsetHeight < this.contentEle.offsetHeight) {
        this.element.style.height = "inherit";
      }
    };
    Dialog2.prototype.setEnableRTL = function() {
      if (!this.isBlazorServerRender()) {
        if (this.enableRtl) {
          addClass([this.element], RTL$2);
        } else {
          removeClass([this.element], RTL$2);
        }
      }
      if (!isNullOrUndefined(this.element.querySelector(".e-resize-handle"))) {
        removeResize();
        this.setResize();
      }
    };
    Dialog2.prototype.setTargetContent = function() {
      var _this = this;
      if (isNullOrUndefined(this.content) || this.content === "") {
        var isContent = this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g, "") !== "";
        if (this.element.children.length > 0 || isContent) {
          this.innerContentElement = document.createDocumentFragment();
          [].slice.call(this.element.childNodes).forEach(function(el) {
            if (el.nodeType !== 8) {
              _this.innerContentElement.appendChild(el);
            }
          });
        }
      }
    };
    Dialog2.prototype.setHeader = function() {
      if (this.headerEle) {
        this.headerEle.innerHTML = "";
      } else {
        this.headerEle = this.createElement("div", { id: this.element.id + "_title", className: DLG_HEADER });
      }
      this.createHeaderContent();
      this.headerContent.appendChild(this.headerEle);
      this.setTemplate(this.header, this.headerEle, "header");
      attributes(this.element, { "aria-describedby": this.element.id + "_title" });
      attributes(this.element, { "aria-labelledby": this.element.id + "_dialog-header" });
      this.element.insertBefore(this.headerContent, this.element.children[0]);
      if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
        this.setAllowDragging();
      }
    };
    Dialog2.prototype.setFooterTemplate = function() {
      if (this.ftrTemplateContent) {
        this.ftrTemplateContent.innerHTML = "";
      } else {
        this.ftrTemplateContent = this.createElement("div", {
          className: DLG_FOOTER_CONTENT
        });
      }
      if (this.footerTemplate !== "" && !isNullOrUndefined(this.footerTemplate)) {
        this.setTemplate(this.footerTemplate, this.ftrTemplateContent, "footerTemplate");
      } else {
        this.ftrTemplateContent.innerHTML = this.buttonContent.join("");
      }
      this.element.appendChild(this.ftrTemplateContent);
    };
    Dialog2.prototype.createHeaderContent = function() {
      if (isNullOrUndefined(this.headerContent)) {
        this.headerContent = this.createElement("div", { id: this.element.id + "_dialog-header", className: DLG_HEADER_CONTENT });
      }
    };
    Dialog2.prototype.renderCloseIcon = function() {
      if (this.showCloseIcon) {
        this.closeIcon = this.createElement("button", { className: DLG_CLOSE_ICON_BTN, attrs: { type: "button" } });
        this.closeIconBtnObj = new Button({ cssClass: "e-flat", iconCss: DLG_CLOSE_ICON + " " + ICON$1 });
        this.closeIconTitle();
        if (!isNullOrUndefined(this.headerContent)) {
          prepend([this.closeIcon], this.headerContent);
        } else {
          this.createHeaderContent();
          prepend([this.closeIcon], this.headerContent);
          this.element.insertBefore(this.headerContent, this.element.children[0]);
        }
        this.closeIconBtnObj.appendTo(this.closeIcon);
      }
    };
    Dialog2.prototype.closeIconTitle = function() {
      this.l10n.setLocale(this.locale);
      var closeIconTitle = this.l10n.getConstant("close");
      this.closeIcon.setAttribute("title", closeIconTitle);
      this.closeIcon.setAttribute("aria-label", closeIconTitle);
    };
    Dialog2.prototype.setCSSClass = function(oldCSSClass) {
      if (oldCSSClass) {
        removeClass([this.element], oldCSSClass.split(" "));
        if (this.isModal && !isNullOrUndefined(this.dlgContainer)) {
          removeClass([this.dlgContainer], oldCSSClass.split(" "));
        }
      }
      if (this.cssClass) {
        addClass([this.element], this.cssClass.split(" "));
        if (this.isModal && !isNullOrUndefined(this.dlgContainer)) {
          addClass([this.dlgContainer], this.cssClass.split(" "));
        }
      }
    };
    Dialog2.prototype.setIsModal = function() {
      this.dlgContainer = this.createElement("div", { className: DLG_CONTAINER });
      this.setCSSClass();
      this.element.classList.remove(DLG_SHOW);
      this.element.parentNode.insertBefore(this.dlgContainer, this.element);
      this.dlgContainer.appendChild(this.element);
      addClass([this.element], MODAL_DLG);
      this.dlgOverlay = this.createElement("div", { className: DLG_OVERLAY });
      this.dlgOverlay.style.zIndex = (this.zIndex - 1).toString();
      this.dlgContainer.appendChild(this.dlgOverlay);
    };
    Dialog2.prototype.getValidFocusNode = function(items) {
      var node;
      for (var u = 0; u < items.length; u++) {
        node = items[u];
        if ((node.clientHeight > 0 || node.tagName.toLowerCase() === "a" && node.hasAttribute("href")) && node.tabIndex > -1 && !node.disabled && !this.disableElement(node, '[disabled],[aria-disabled="true"],[type="hidden"]')) {
          return node;
        } else {
          node = null;
        }
      }
      return node;
    };
    Dialog2.prototype.focusableElements = function(content2) {
      if (!isNullOrUndefined(content2)) {
        var value = 'input,select,textarea,button,a,[contenteditable="true"],[tabindex]';
        var items = content2.querySelectorAll(value);
        return this.getValidFocusNode(items);
      }
      return null;
    };
    Dialog2.prototype.getAutoFocusNode = function(container) {
      var node = container.querySelector("." + DLG_CLOSE_ICON_BTN);
      var value = "[autofocus]";
      var items = container.querySelectorAll(value);
      var validNode = this.getValidFocusNode(items);
      if (!isNullOrUndefined(validNode)) {
        node = validNode;
      } else {
        validNode = this.focusableElements(this.contentEle);
        if (!isNullOrUndefined(validNode)) {
          return node = validNode;
        } else if (!isNullOrUndefined(this.primaryButtonEle)) {
          return this.element.querySelector("." + DLG_PRIMARY_BUTTON);
        }
      }
      return node;
    };
    Dialog2.prototype.disableElement = function(element2, t) {
      var elementMatch = element2 ? element2.matches || element2.webkitMatchesSelector || element2.msGetRegionContent : null;
      if (elementMatch) {
        for (; element2; element2 = element2.parentNode) {
          if (element2 instanceof Element && elementMatch.call(element2, t)) {
            return element2;
          }
        }
      }
      return null;
    };
    Dialog2.prototype.focusContent = function() {
      var element2 = this.getAutoFocusNode(this.element);
      var node = !isNullOrUndefined(element2) ? element2 : this.element;
      var userAgent = Browser.userAgent;
      if (userAgent.indexOf("MSIE ") > 0 || userAgent.indexOf("Trident/") > 0) {
        this.element.focus();
      }
      node.focus();
      this.unBindEvent(this.element);
      this.bindEvent(this.element);
    };
    Dialog2.prototype.bindEvent = function(element2) {
      EventHandler.add(element2, "keydown", this.keyDown, this);
    };
    Dialog2.prototype.unBindEvent = function(element2) {
      EventHandler.remove(element2, "keydown", this.keyDown);
    };
    Dialog2.prototype.updateSanitizeContent = function() {
      if (!this.isBlazorServerRender()) {
        this.contentEle.innerHTML = this.sanitizeHelper(this.content);
      }
    };
    Dialog2.prototype.isBlazorServerRender = function() {
      return isBlazor();
    };
    Dialog2.prototype.getModuleName = function() {
      return "dialog";
    };
    Dialog2.prototype.onPropertyChanged = function(newProp, oldProp) {
      if (!this.element.classList.contains(ROOT$2)) {
        return;
      }
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "content":
            if (!isNullOrUndefined(this.content) && this.content !== "") {
              if (this.isBlazorServerRender()) {
                this.contentEle = this.element.querySelector(".e-dlg-content");
              }
              if (!isNullOrUndefined(this.contentEle) && this.contentEle.getAttribute("role") !== "dialog") {
                if (!this.isBlazorServerRender()) {
                  this.contentEle.innerHTML = "";
                }
                if (typeof this.content === "function") {
                  this.clearTemplate(["content"]);
                  detach(this.contentEle);
                  this.contentEle = null;
                  this.setContent();
                } else {
                  if (typeof this.content === "string") {
                    this.updateSanitizeContent();
                  } else {
                    this.contentEle.appendChild(this.content);
                  }
                }
                this.setMaxHeight();
              } else {
                this.setContent();
              }
            } else if (!isNullOrUndefined(this.contentEle)) {
              detach(this.contentEle);
              this.contentEle = null;
            }
            break;
          case "header":
            if (this.header === "" || isNullOrUndefined(this.header)) {
              if (this.headerEle) {
                detach(this.headerEle);
                this.headerEle = null;
              }
            } else {
              this.setHeader();
            }
            break;
          case "footerTemplate":
            if (this.footerTemplate === "" || isNullOrUndefined(this.footerTemplate)) {
              if (!this.ftrTemplateContent) {
                return;
              }
              detach(this.ftrTemplateContent);
              this.ftrTemplateContent = null;
              this.buttons = [{}];
            } else {
              this.setFooterTemplate();
              this.buttons = [{}];
            }
            break;
          case "showCloseIcon":
            if (this.element.getElementsByClassName(DLG_CLOSE_ICON).length > 0) {
              if (!this.showCloseIcon && (this.header === "" || isNullOrUndefined(this.header))) {
                detach(this.headerContent);
                this.headerContent = null;
              } else if (!this.showCloseIcon) {
                detach(this.closeIcon);
              }
            } else {
              this.renderCloseIcon();
              this.wireEvents();
            }
            break;
          case "locale":
            if (this.showCloseIcon) {
              this.closeIconTitle();
            }
            break;
          case "visible":
            if (this.visible) {
              this.show();
            } else {
              this.hide();
            }
            break;
          case "isModal":
            this.updateIsModal();
            break;
          case "height":
            setStyleAttribute(this.element, { "height": formatUnit(newProp.height) });
            this.updatePersistData();
            break;
          case "width":
            setStyleAttribute(this.element, { "width": formatUnit(newProp.width) });
            this.updatePersistData();
            break;
          case "zIndex":
            this.popupObj.zIndex = this.zIndex;
            if (this.isModal) {
              this.setOverlayZindex(this.zIndex);
            }
            if (this.element.style.zIndex !== this.zIndex.toString()) {
              this.calculatezIndex = false;
            }
            break;
          case "cssClass":
            this.setCSSClass(oldProp.cssClass);
            break;
          case "buttons": {
            this.unWireButtonEvents();
            this.destroyButtons();
            if (!isNullOrUndefined(this.ftrTemplateContent)) {
              detach(this.ftrTemplateContent);
              this.ftrTemplateContent = null;
            }
            this.footerTemplate = "";
            this.setButton();
            break;
          }
          case "allowDragging":
            if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
              this.setAllowDragging();
            } else {
              this.dragObj.destroy();
            }
            break;
          case "target":
            this.setTarget(newProp.target);
            break;
          case "position":
            this.checkPositionData();
            if (this.isModal) {
              var positionX = this.position.X;
              var positionY = this.position.Y;
              if (!isNullOrUndefined(oldProp.position)) {
                if (!isNullOrUndefined(oldProp.position.X)) {
                  positionX = oldProp.position.X;
                }
                if (!isNullOrUndefined(oldProp.position.Y)) {
                  positionY = oldProp.position.Y;
                }
              }
              if (this.dlgContainer.classList.contains("e-dlg-" + positionX + "-" + positionY)) {
                this.dlgContainer.classList.remove("e-dlg-" + positionX + "-" + positionY);
              }
            }
            this.positionChange();
            this.updatePersistData();
            break;
          case "enableRtl":
            this.setEnableRTL();
            break;
          case "enableResize":
            this.setResize();
            this.isModelResize = this.enableResize && this.isModal;
            if (this.enableResize && this.dialogOpen) {
              this.resetResizeIcon();
            }
            break;
          case "minHeight":
            if (this.minHeight !== "") {
              this.element.style.minHeight = formatUnit(this.minHeight);
            }
            break;
        }
      }
    };
    Dialog2.prototype.setTarget = function(target) {
      this.popupObj.relateTo = target;
      this.target = target;
      this.targetEle = typeof this.target === "string" ? document.querySelector(this.target) : this.target;
      if (this.dragObj) {
        this.dragObj.dragArea = this.targetEle;
      }
      this.setMaxHeight();
      if (this.isModal) {
        this.updateIsModal();
      }
      if (this.enableResize) {
        this.setResize();
      }
      if (!isNullOrUndefined(this.targetEle)) {
        if (this.isModal && !isNullOrUndefined(this.dlgContainer)) {
          this.targetEle.appendChild(this.dlgContainer);
        } else if (!isNullOrUndefined(this.element)) {
          this.targetEle.appendChild(this.element);
        }
      }
    };
    Dialog2.prototype.updateIsModal = function() {
      this.element.setAttribute("aria-modal", this.isModal ? "true" : "false");
      if (this.isModal) {
        if (isNullOrUndefined(this.dlgOverlay)) {
          this.setIsModal();
          this.element.style.top = "0px";
          this.element.style.left = "0px";
          if (!isNullOrUndefined(this.targetEle)) {
            this.targetEle.appendChild(this.dlgContainer);
          }
        }
      } else {
        removeClass([this.element], MODAL_DLG);
        removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        detach(this.dlgOverlay);
        while (this.dlgContainer.firstChild) {
          this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild, this.dlgContainer);
        }
        this.dlgContainer.parentElement.removeChild(this.dlgContainer);
      }
      if (this.visible) {
        this.show();
      }
      this.positionChange();
      if (this.isModal && this.dlgOverlay) {
        EventHandler.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this);
      }
    };
    Dialog2.prototype.setzIndex = function(zIndexElement, setPopupZindex) {
      var prevOnChange = this.isProtectedOnChange;
      this.isProtectedOnChange = true;
      var currentzIndex = getZindexPartial(zIndexElement);
      this.zIndex = currentzIndex > this.zIndex ? currentzIndex : this.zIndex;
      this.isProtectedOnChange = prevOnChange;
      if (setPopupZindex) {
        this.popupObj.zIndex = this.zIndex;
      }
    };
    Dialog2.prototype.windowResizeHandler = function() {
      setMaxWidth(this.targetEle.clientWidth);
      setMaxHeight(this.targetEle.clientHeight);
      this.setMaxHeight();
    };
    Dialog2.prototype.getPersistData = function() {
      return this.addOnPersist(["width", "height", "position"]);
    };
    Dialog2.prototype.removeAllChildren = function(element2) {
      while (element2.children[0]) {
        this.removeAllChildren(element2.children[0]);
        element2.removeChild(element2.children[0]);
      }
    };
    Dialog2.prototype.destroy = function() {
      if (this.isDestroyed) {
        return;
      }
      var classArray = [RTL$2, MODAL_DLG, DLG_RESIZABLE, DLG_RESTRICT_LEFT_VALUE, FULLSCREEN, DEVICE$1];
      var attrs = ["role", "aria-modal", "aria-labelledby", "aria-describedby", "aria-grabbed", "tabindex", "style"];
      removeClass([this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);
      if (!isNullOrUndefined(this.element) && this.element.classList.contains(FULLSCREEN)) {
        removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
      }
      if (this.isModal) {
        removeClass([!isNullOrUndefined(this.targetEle) ? this.targetEle : document.body], SCROLL_DISABLED);
      }
      this.unWireEvents();
      this.unWireButtonEvents();
      this.destroyButtons();
      if (!isNullOrUndefined(this.closeIconBtnObj)) {
        this.closeIconBtnObj.destroy();
      }
      if (!isNullOrUndefined(this.dragObj)) {
        this.dragObj.destroy();
      }
      if (!isNullOrUndefined(this.popupObj.element) && this.popupObj.element.classList.contains(POPUP_ROOT$1)) {
        this.popupObj.destroy();
      }
      removeClass([this.element], classArray);
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        removeClass([this.element], this.cssClass.split(" "));
      }
      if (!isNullOrUndefined(this.refElement) && !isNullOrUndefined(this.refElement.parentElement)) {
        this.refElement.parentElement.insertBefore(this.isModal ? this.dlgContainer : this.element, this.refElement);
        detach(this.refElement);
        this.refElement = void 0;
      }
      if (this.isModal) {
        detach(this.dlgOverlay);
        this.dlgContainer.parentNode.insertBefore(this.element, this.dlgContainer);
        detach(this.dlgContainer);
      }
      this.element.innerHTML = this.clonedEle.innerHTML;
      for (var i = 0; i < attrs.length; i++) {
        this.element.removeAttribute(attrs[i]);
      }
      this.ftrTemplateContent = null;
      this.headerContent = null;
      if (!this.isReact && !this.isVue && !isNullOrUndefined(this.contentEle)) {
        this.removeAllChildren(this.contentEle);
      }
      this.contentEle = null;
      resizeDestroy();
      _super.prototype.destroy.call(this);
      if (this.isReact) {
        this.clearTemplate();
      }
    };
    Dialog2.prototype.wireWindowResizeEvent = function() {
      this.boundWindowResizeHandler = this.windowResizeHandler.bind(this);
      window.addEventListener("resize", this.boundWindowResizeHandler);
    };
    Dialog2.prototype.unWireWindowResizeEvent = function() {
      window.removeEventListener("resize", this.boundWindowResizeHandler);
      this.boundWindowResizeHandler = null;
    };
    Dialog2.prototype.wireEvents = function() {
      if (this.showCloseIcon) {
        EventHandler.add(this.closeIcon, "click", this.closeIconClickEventHandler, this);
      }
      if (this.isModal && this.dlgOverlay) {
        EventHandler.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this);
      }
    };
    Dialog2.prototype.unWireEvents = function() {
      if (this.showCloseIcon) {
        EventHandler.remove(this.closeIcon, "click", this.closeIconClickEventHandler);
      }
      if (this.isModal) {
        EventHandler.remove(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler);
      }
    };
    Dialog2.prototype.refreshPosition = function() {
      this.popupObj.refreshPosition();
      if (this.element.classList.contains(MODAL_DLG)) {
        this.positionChange();
      }
    };
    Dialog2.prototype.getDimension = function() {
      var dialogWidth = this.element.offsetWidth;
      var dialogHeight = this.element.offsetHeight;
      return { width: dialogWidth, height: dialogHeight };
    };
    Dialog2.prototype.show = function(isFullScreen) {
      var _this = this;
      if (!this.element.classList.contains(ROOT$2)) {
        return;
      }
      if (!this.element.classList.contains(DLG_SHOW) || !isNullOrUndefined(isFullScreen)) {
        if (!isNullOrUndefined(isFullScreen)) {
          this.fullScreen(isFullScreen);
        }
        var eventArgs_1 = {
          cancel: false,
          element: this.element,
          container: this.isModal ? this.dlgContainer : this.element,
          target: this.target,
          maxHeight: this.element.style.maxHeight
        };
        this.trigger("beforeOpen", eventArgs_1, function(beforeOpenArgs) {
          if (!beforeOpenArgs.cancel) {
            if (_this.element.style.maxHeight !== eventArgs_1.maxHeight) {
              _this.allowMaxHeight = false;
              _this.element.style.maxHeight = eventArgs_1.maxHeight;
            }
            if (_this.enableResize && _this.boundWindowResizeHandler == null && !_this.initialRender) {
              _this.wireWindowResizeEvent();
            }
            _this.storeActiveElement = document.activeElement;
            _this.element.tabIndex = -1;
            if (_this.isModal && !isNullOrUndefined(_this.dlgOverlay)) {
              _this.dlgOverlay.style.display = "block";
              _this.dlgContainer.style.display = "flex";
              removeClass([_this.dlgOverlay], "e-fade");
              if (!isNullOrUndefined(_this.targetEle)) {
                if (_this.targetEle === document.body) {
                  _this.dlgContainer.style.position = "fixed";
                } else {
                  _this.dlgContainer.style.position = "absolute";
                }
                _this.dlgOverlay.style.position = "absolute";
                var targetType = _this.getTargetContainer(_this.target);
                if (targetType instanceof Element) {
                  var computedStyle = window.getComputedStyle(targetType);
                  if (computedStyle.getPropertyValue("direction") === "rtl") {
                    _this.element.style.position = "absolute";
                  } else {
                    _this.element.style.position = "relative";
                  }
                } else {
                  _this.element.style.position = "relative";
                }
                addClass([_this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);
              } else {
                addClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
              }
            }
            var openAnimation = {
              name: _this.animationSettings.effect === "None" && animationMode === "Enable" ? "ZoomIn" : _this.animationSettings.effect + "In",
              duration: _this.animationSettings.duration,
              delay: _this.animationSettings.delay
            };
            var zIndexElement = _this.isModal ? _this.element.parentElement : _this.element;
            if (_this.calculatezIndex) {
              _this.setzIndex(zIndexElement, true);
              setStyleAttribute(_this.element, { "zIndex": _this.zIndex });
              if (_this.isModal) {
                _this.setOverlayZindex(_this.zIndex);
              }
            }
            _this.animationSettings.effect === "None" && animationMode === "Enable" ? _this.popupObj.show(openAnimation) : _this.animationSettings.effect === "None" ? _this.popupObj.show() : _this.popupObj.show(openAnimation);
            if (_this.isModal) {
              var targetType = _this.getTargetContainer(_this.target);
              if (targetType instanceof Element) {
                var computedStyle = window.getComputedStyle(targetType);
                if (computedStyle.getPropertyValue("direction") === "rtl" && !_this.IsDragStop) {
                  _this.setPopupPosition();
                }
              }
            }
            _this.dialogOpen = true;
            var prevOnChange = _this.isProtectedOnChange;
            _this.isProtectedOnChange = true;
            _this.visible = true;
            _this.preventVisibility = true;
            _this.isProtectedOnChange = prevOnChange;
          }
        });
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Dialog2.prototype.hide = function(event) {
      var _this = this;
      if (!this.element.classList.contains(ROOT$2)) {
        return;
      }
      if (this.preventVisibility) {
        var eventArgs = {
          cancel: false,
          isInteracted: event ? true : false,
          element: this.element,
          target: this.target,
          container: this.isModal ? this.dlgContainer : this.element,
          event,
          closedBy: this.dlgClosedBy
        };
        this.closeArgs = eventArgs;
        this.trigger("beforeClose", eventArgs, function(beforeCloseArgs) {
          if (!beforeCloseArgs.cancel) {
            if (_this.enableResize) {
              _this.unWireWindowResizeEvent();
            }
            var closeAnimation = {
              name: _this.animationSettings.effect === "None" && animationMode === "Enable" ? "ZoomOut" : _this.animationSettings.effect + "Out",
              duration: _this.animationSettings.duration,
              delay: _this.animationSettings.delay
            };
            if (_this.animationSettings.effect === "None" && animationMode === "Enable") ;
            else if (_this.animationSettings.effect === "None") {
              _this.popupObj.hide();
            } else {
              _this.popupObj.hide(closeAnimation);
            }
            setTimeout(function() {
              if (_this.isModal) {
                if (!isNullOrUndefined(_this.targetEle) && _this.targetEle.classList.contains(DLG_TARGET) && _this.targetEle.classList.contains(SCROLL_DISABLED)) {
                  removeClass([_this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);
                }
              }
              if (document.body.classList.contains(DLG_TARGET) && document.body.classList.contains(SCROLL_DISABLED)) {
                removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
              }
            }, _this.animationSettings.duration + _this.animationSettings.delay);
            _this.dialogOpen = false;
            var prevOnChange = _this.isProtectedOnChange;
            _this.isProtectedOnChange = true;
            _this.visible = false;
            _this.preventVisibility = false;
            _this.isProtectedOnChange = prevOnChange;
          }
          _this.dlgClosedBy = DLG_USER_ACTION_CLOSED;
        });
      }
    };
    Dialog2.prototype.fullScreen = function(args) {
      this.element.offsetTop;
      this.element.offsetLeft;
      if (args) {
        if (!this.isModal) {
          this.element.style.top = document.scrollingElement.scrollTop + "px";
        }
        addClass([this.element], FULLSCREEN);
        var display = this.element.style.display;
        this.element.style.display = "none";
        this.element.style.maxHeight = !isNullOrUndefined(this.target) ? this.targetEle.offsetHeight + "px" : window.innerHeight + "px";
        this.element.style.display = display;
        addClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        if (this.allowDragging && !isNullOrUndefined(this.dragObj)) {
          this.dragObj.destroy();
        }
      } else {
        removeClass([this.element], FULLSCREEN);
        removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
          this.setAllowDragging();
        }
      }
      return args;
    };
    Dialog2.prototype.getButtons = function(index) {
      if (!isNullOrUndefined(index)) {
        return this.btnObj[index];
      }
      return this.btnObj;
    };
    Dialog2.prototype.unWireButtonEvents = function() {
      if (this.buttons.length > 0 && this.footerTemplate === "" && this.ftrTemplateContent) {
        for (var i = 0; i < this.buttons.length; i++) {
          if (this.buttons[i].click && typeof this.buttons[i].click === "function" && this.ftrTemplateContent.children[i]) {
            EventHandler.remove(this.ftrTemplateContent.children[i], "click", this.buttons[i].click);
          }
        }
      }
    };
    Dialog2.prototype.destroyButtons = function() {
      if (!isNullOrUndefined(this.btnObj)) {
        for (var i = 0; i < this.btnObj.length; i++) {
          if (this.btnObj[i] && !this.btnObj[i].isDestroyed) {
            this.btnObj[i].destroy();
          }
        }
      }
    };
    __decorate$b([
      Property("")
    ], Dialog2.prototype, "content", void 0);
    __decorate$b([
      Property(true)
    ], Dialog2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$b([
      Property(false)
    ], Dialog2.prototype, "enablePersistence", void 0);
    __decorate$b([
      Property(false)
    ], Dialog2.prototype, "showCloseIcon", void 0);
    __decorate$b([
      Property(false)
    ], Dialog2.prototype, "isModal", void 0);
    __decorate$b([
      Property("")
    ], Dialog2.prototype, "header", void 0);
    __decorate$b([
      Property(true)
    ], Dialog2.prototype, "visible", void 0);
    __decorate$b([
      Property(false)
    ], Dialog2.prototype, "enableResize", void 0);
    __decorate$b([
      Property(["South-East"])
    ], Dialog2.prototype, "resizeHandles", void 0);
    __decorate$b([
      Property("auto")
    ], Dialog2.prototype, "height", void 0);
    __decorate$b([
      Property("")
    ], Dialog2.prototype, "minHeight", void 0);
    __decorate$b([
      Property("100%")
    ], Dialog2.prototype, "width", void 0);
    __decorate$b([
      Property("")
    ], Dialog2.prototype, "cssClass", void 0);
    __decorate$b([
      Property(1e3)
    ], Dialog2.prototype, "zIndex", void 0);
    __decorate$b([
      Property(null)
    ], Dialog2.prototype, "target", void 0);
    __decorate$b([
      Property("")
    ], Dialog2.prototype, "footerTemplate", void 0);
    __decorate$b([
      Property(false)
    ], Dialog2.prototype, "allowDragging", void 0);
    __decorate$b([
      Collection([{}], ButtonProps)
    ], Dialog2.prototype, "buttons", void 0);
    __decorate$b([
      Property(true)
    ], Dialog2.prototype, "closeOnEscape", void 0);
    __decorate$b([
      Complex({}, AnimationSettings)
    ], Dialog2.prototype, "animationSettings", void 0);
    __decorate$b([
      Complex({ X: "center", Y: "center" }, PositionData)
    ], Dialog2.prototype, "position", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "created", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "open", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "beforeSanitizeHtml", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "beforeOpen", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "close", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "beforeClose", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "dragStart", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "dragStop", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "drag", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "overlayClick", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "resizeStart", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "resizing", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "resizeStop", void 0);
    __decorate$b([
      Event()
    ], Dialog2.prototype, "destroyed", void 0);
    Dialog2 = __decorate$b([
      NotifyPropertyChanges
    ], Dialog2);
    return Dialog2;
  }(Component)
);
var DialogUtility;
(function(DialogUtility2) {
  function alert2(args) {
    var dialogElement = createElement("div", { "className": DLG_UTIL_ALERT });
    document.body.appendChild(dialogElement);
    var alertDialogObj;
    var okButtonModel = [{
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    }];
    if (typeof args === "string") {
      alertDialogObj = createDialog({
        content: args,
        position: { X: "center", Y: "top" },
        isModal: true,
        header: DLG_UTIL_DEFAULT_TITLE,
        buttons: okButtonModel
      }, dialogElement);
    } else {
      alertDialogObj = createDialog(alertOptions(args), dialogElement);
    }
    alertDialogObj.close = function() {
      if (args && args.close) {
        args.close.apply(alertDialogObj);
      }
      alertDialogObj.destroy();
      if (alertDialogObj.element.classList.contains("e-dlg-modal")) {
        alertDialogObj.element.parentElement.remove();
        alertDialogObj.target.classList.remove(DLG_UTIL_ROOT);
      } else {
        alertDialogObj.element.remove();
      }
    };
    return alertDialogObj;
  }
  DialogUtility2.alert = alert2;
  function confirm(args) {
    var dialogElement = createElement("div", { "className": DLG_UTIL_CONFIRM });
    document.body.appendChild(dialogElement);
    var confirmDialogObj;
    var okCancelButtonModel = [{
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    }, {
      buttonModel: { content: "Cancel" },
      click: function() {
        this.hide();
      }
    }];
    if (typeof args === "string") {
      confirmDialogObj = createDialog({
        position: { X: "center", Y: "top" },
        content: args,
        isModal: true,
        header: DLG_UTIL_DEFAULT_TITLE,
        buttons: okCancelButtonModel
      }, dialogElement);
    } else {
      confirmDialogObj = createDialog(confirmOptions(args), dialogElement);
    }
    confirmDialogObj.close = function() {
      if (args && args.close) {
        args.close.apply(confirmDialogObj);
      }
      confirmDialogObj.destroy();
      if (confirmDialogObj.element.classList.contains("e-dlg-modal")) {
        confirmDialogObj.element.parentElement.remove();
        confirmDialogObj.target.classList.remove(DLG_UTIL_ROOT);
      } else {
        confirmDialogObj.element.remove();
      }
    };
    return confirmDialogObj;
  }
  DialogUtility2.confirm = confirm;
  function createDialog(options, element2) {
    var dialogObject = new Dialog(options);
    dialogObject.appendTo(element2);
    return dialogObject;
  }
  function alertOptions(option) {
    var options = {};
    options.buttons = [];
    options = formOptions(options, option);
    options = setAlertButtonModel(options, option);
    return options;
  }
  function confirmOptions(option) {
    var options = {};
    options.buttons = [];
    options = formOptions(options, option);
    options = setConfirmButtonModel(options, option);
    return options;
  }
  function formOptions(options, option) {
    options.header = !isNullOrUndefined(option.title) ? option.title : null;
    options.content = !isNullOrUndefined(option.content) ? option.content : "";
    options.isModal = !isNullOrUndefined(option.isModal) ? option.isModal : true;
    options.showCloseIcon = !isNullOrUndefined(option.showCloseIcon) ? option.showCloseIcon : false;
    options.allowDragging = !isNullOrUndefined(option.isDraggable) ? option.isDraggable : false;
    options.closeOnEscape = !isNullOrUndefined(option.closeOnEscape) ? option.closeOnEscape : false;
    options.position = !isNullOrUndefined(option.position) ? option.position : { X: "center", Y: "top" };
    options.animationSettings = !isNullOrUndefined(option.animationSettings) ? option.animationSettings : { effect: "Fade", duration: 400, delay: 0 };
    options.cssClass = !isNullOrUndefined(option.cssClass) ? option.cssClass : "";
    options.zIndex = !isNullOrUndefined(option.zIndex) ? option.zIndex : 1e3;
    options.open = !isNullOrUndefined(option.open) ? option.open : null;
    options.width = !isNullOrUndefined(option.width) ? option.width : "auto";
    options.height = !isNullOrUndefined(option.height) ? option.height : "auto";
    return options;
  }
  function setAlertButtonModel(options, option) {
    var alertButtonModel = [{
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    }];
    if (!isNullOrUndefined(option.okButton)) {
      options.buttons[0] = formButtonModel(options.buttons[0], option.okButton, alertButtonModel[0]);
    } else {
      options.buttons = alertButtonModel;
    }
    return options;
  }
  function setConfirmButtonModel(options, option) {
    var okButtonModel = {
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    };
    var cancelButtonModel = {
      buttonModel: { content: "Cancel" },
      click: function() {
        this.hide();
      }
    };
    if (!isNullOrUndefined(option.okButton)) {
      options.buttons[0] = formButtonModel(options.buttons[0], option.okButton, okButtonModel);
    } else {
      options.buttons[0] = okButtonModel;
    }
    if (!isNullOrUndefined(option.cancelButton)) {
      options.buttons[1] = formButtonModel(options.buttons[1], option.cancelButton, cancelButtonModel);
    } else {
      options.buttons[1] = cancelButtonModel;
    }
    return options;
  }
  function formButtonModel(buttonModel, option, buttonPropModel) {
    var buttonProps = buttonPropModel;
    if (!isNullOrUndefined(option.text)) {
      buttonProps.buttonModel.content = option.text;
    }
    if (!isNullOrUndefined(option.icon)) {
      buttonProps.buttonModel.iconCss = option.icon;
    }
    if (!isNullOrUndefined(option.cssClass)) {
      buttonProps.buttonModel.cssClass = option.cssClass;
    }
    if (!isNullOrUndefined(option.click)) {
      buttonProps.click = option.click;
    }
    if (!isNullOrUndefined(option.isFlat)) {
      buttonProps.isFlat = option.isFlat;
    }
    return buttonProps;
  }
})(DialogUtility || (DialogUtility = {}));
var __extends$q = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$a = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var TOUCHEND_HIDE_DELAY = 1500;
var TAPHOLD_THRESHOLD = 500;
var SHOW_POINTER_TIP_GAP = 0;
var HIDE_POINTER_TIP_GAP = 8;
var MOUSE_TRAIL_GAP = 2;
var POINTER_ADJUST = 2;
var ROOT$1 = "e-tooltip";
var RTL$1 = "e-rtl";
var DEVICE = "e-bigger";
var ICON = "e-icons";
var CLOSE$1 = "e-tooltip-close";
var TOOLTIP_WRAP = "e-tooltip-wrap";
var CONTENT = "e-tip-content";
var ARROW_TIP = "e-arrow-tip";
var ARROW_TIP_OUTER = "e-arrow-tip-outer";
var ARROW_TIP_INNER = "e-arrow-tip-inner";
var TIP_BOTTOM = "e-tip-bottom";
var TIP_TOP = "e-tip-top";
var TIP_LEFT = "e-tip-left";
var TIP_RIGHT = "e-tip-right";
var POPUP_ROOT = "e-popup";
var POPUP_OPEN = "e-popup-open";
var POPUP_CLOSE = "e-popup-close";
var POPUP_LIB = "e-lib";
var HIDE_POPUP = "e-hidden";
var POPUP_CONTAINER = "e-tooltip-popup-container";
var Animation = (
  /** @class */
  function(_super) {
    __extends$q(Animation2, _super);
    function Animation2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$a([
      Property({ effect: "FadeIn", duration: 150, delay: 0 })
    ], Animation2.prototype, "open", void 0);
    __decorate$a([
      Property({ effect: "FadeOut", duration: 150, delay: 0 })
    ], Animation2.prototype, "close", void 0);
    return Animation2;
  }(ChildProperty)
);
var Tooltip = (
  /** @class */
  function(_super) {
    __extends$q(Tooltip2, _super);
    function Tooltip2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.mouseMoveEvent = null;
      _this.mouseMoveTarget = null;
      _this.containerElement = null;
      _this.isBodyContainer = true;
      return _this;
    }
    Tooltip2.prototype.initialize = function() {
      this.formatPosition();
      addClass([this.element], ROOT$1);
    };
    Tooltip2.prototype.formatPosition = function() {
      var _a, _b;
      if (!this.position) {
        return;
      }
      if (this.position.indexOf("Top") === 0 || this.position.indexOf("Bottom") === 0) {
        _a = this.position.split(/(?=[A-Z])/), this.tooltipPositionY = _a[0], this.tooltipPositionX = _a[1];
      } else {
        _b = this.position.split(/(?=[A-Z])/), this.tooltipPositionX = _b[0], this.tooltipPositionY = _b[1];
      }
    };
    Tooltip2.prototype.renderArrow = function() {
      this.setTipClass(this.position);
      var tip = this.createElement("div", { className: ARROW_TIP + " " + this.tipClass });
      tip.appendChild(this.createElement("div", { className: ARROW_TIP_OUTER + " " + this.tipClass }));
      tip.appendChild(this.createElement("div", { className: ARROW_TIP_INNER + " " + this.tipClass }));
      this.tooltipEle.appendChild(tip);
    };
    Tooltip2.prototype.setTipClass = function(position) {
      if (position.indexOf("Right") === 0) {
        this.tipClass = TIP_LEFT;
      } else if (position.indexOf("Bottom") === 0) {
        this.tipClass = TIP_TOP;
      } else if (position.indexOf("Left") === 0) {
        this.tipClass = TIP_RIGHT;
      } else {
        this.tipClass = TIP_BOTTOM;
      }
    };
    Tooltip2.prototype.renderPopup = function(target) {
      var elePos = this.mouseTrail ? { top: 0, left: 0 } : this.getTooltipPosition(target);
      this.tooltipEle.classList.remove(POPUP_LIB);
      this.popupObj = new Popup(this.tooltipEle, {
        height: this.height,
        width: this.width,
        position: { X: elePos.left, Y: elePos.top },
        enableRtl: this.enableRtl,
        open: this.openPopupHandler.bind(this),
        close: this.closePopupHandler.bind(this)
      });
    };
    Tooltip2.prototype.getScalingFactor = function(target) {
      if (!target) {
        return { x: 1, y: 1 };
      }
      var scalingFactors = { x: 1, y: 1 };
      var elementsWithTransform = target.closest('[style*="transform: scale"]');
      if (elementsWithTransform && elementsWithTransform !== this.tooltipEle && elementsWithTransform.contains(this.tooltipEle)) {
        var computedStyle = window.getComputedStyle(elementsWithTransform);
        var transformValue = computedStyle.getPropertyValue("transform");
        var matrixValues = transformValue.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);
        scalingFactors.x = matrixValues[0];
        scalingFactors.y = matrixValues[3];
      }
      return scalingFactors;
    };
    Tooltip2.prototype.getTooltipPosition = function(target) {
      this.tooltipEle.style.display = "block";
      var parentWithZoomStyle = this.element.closest('[style*="zoom"]');
      if (parentWithZoomStyle) {
        if (!parentWithZoomStyle.contains(this.tooltipEle)) {
          this.tooltipEle.style.zoom = getComputedStyle(parentWithZoomStyle).zoom;
        }
      }
      var pos = calculatePosition(target, this.tooltipPositionX, this.tooltipPositionY, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());
      var scalingFactors = this.getScalingFactor(target);
      var offsetPos = this.calculateTooltipOffset(this.position, scalingFactors.x, scalingFactors.y);
      var collisionPosition = this.calculateElementPosition(pos, offsetPos);
      var collisionLeft = collisionPosition[0];
      var collisionTop = collisionPosition[1];
      var elePos = this.collisionFlipFit(target, collisionLeft, collisionTop);
      elePos.left = elePos.left / scalingFactors.x;
      elePos.top = elePos.top / scalingFactors.y;
      this.tooltipEle.style.display = "";
      return elePos;
    };
    Tooltip2.prototype.windowResize = function() {
      this.reposition(this.findTarget());
    };
    Tooltip2.prototype.reposition = function(target) {
      if (this.popupObj && target) {
        var elePos = this.getTooltipPosition(target);
        this.popupObj.position = { X: elePos.left, Y: elePos.top };
        this.popupObj.dataBind();
      }
    };
    Tooltip2.prototype.openPopupHandler = function() {
      if (!this.mouseTrail && this.needTemplateReposition()) {
        this.reposition(this.findTarget());
      }
      this.trigger("afterOpen", this.tooltipEventArgs);
      this.tooltipEventArgs = null;
    };
    Tooltip2.prototype.closePopupHandler = function() {
      if (this.isReact && !(this.opensOn === "Click" || typeof this.content === "function")) {
        this.clearTemplate(["content"]);
      }
      this.clear();
      var tooltipAfterCloseEventArgs = {
        type: this.tooltipEventArgs.event ? this.tooltipEventArgs.event.type : null,
        cancel: false,
        target: this.tooltipEventArgs.target,
        event: this.tooltipEventArgs.event ? this.tooltipEventArgs.event : null,
        element: this.tooltipEle,
        isInteracted: !isNullOrUndefined(this.tooltipEventArgs.event)
      };
      this.trigger("afterClose", tooltipAfterCloseEventArgs);
      tooltipAfterCloseEventArgs = null;
    };
    Tooltip2.prototype.calculateTooltipOffset = function(position, xScalingFactor, yScalingFactor) {
      if (xScalingFactor === void 0) {
        xScalingFactor = 1;
      }
      if (yScalingFactor === void 0) {
        yScalingFactor = 1;
      }
      var pos = { top: 0, left: 0 };
      var tipWidth;
      var tipHeight;
      var tooltipEleWidth;
      var tooltipEleHeight;
      var arrowEle;
      var tipAdjust;
      var tipHeightAdjust;
      var tipWidthAdjust;
      if (xScalingFactor !== 1 || yScalingFactor !== 1) {
        var tooltipEleRect = this.tooltipEle.getBoundingClientRect();
        var arrowEleRect = void 0;
        tooltipEleWidth = Math.round(tooltipEleRect.width);
        tooltipEleHeight = Math.round(tooltipEleRect.height);
        arrowEle = select("." + ARROW_TIP, this.tooltipEle);
        if (arrowEle) {
          arrowEleRect = arrowEle.getBoundingClientRect();
        }
        tipWidth = arrowEle ? Math.round(arrowEleRect.width) : 0;
        tipHeight = arrowEle ? Math.round(arrowEleRect.height) : 0;
        tipAdjust = this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP;
        tipHeightAdjust = tipHeight / 2 + POINTER_ADJUST + (tooltipEleHeight - this.tooltipEle.clientHeight * yScalingFactor);
        tipWidthAdjust = tipWidth / 2 + POINTER_ADJUST + (tooltipEleWidth - this.tooltipEle.clientWidth * xScalingFactor);
      } else {
        tooltipEleWidth = this.tooltipEle.offsetWidth;
        tooltipEleHeight = this.tooltipEle.offsetHeight;
        arrowEle = select("." + ARROW_TIP, this.tooltipEle);
        tipWidth = arrowEle ? arrowEle.offsetWidth : 0;
        tipHeight = arrowEle ? arrowEle.offsetHeight : 0;
        tipAdjust = this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP;
        tipHeightAdjust = tipHeight / 2 + POINTER_ADJUST + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight);
        tipWidthAdjust = tipWidth / 2 + POINTER_ADJUST + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth);
      }
      if (this.mouseTrail) {
        tipAdjust += MOUSE_TRAIL_GAP;
      }
      switch (position) {
        case "RightTop":
          pos.left += tipWidth + tipAdjust;
          pos.top -= tooltipEleHeight - tipHeightAdjust;
          break;
        case "RightCenter":
          pos.left += tipWidth + tipAdjust;
          pos.top -= tooltipEleHeight / 2;
          break;
        case "RightBottom":
          pos.left += tipWidth + tipAdjust;
          pos.top -= tipHeightAdjust;
          break;
        case "BottomRight":
          pos.top += tipHeight + tipAdjust;
          pos.left -= tipWidthAdjust;
          break;
        case "BottomCenter":
          pos.top += tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth / 2;
          break;
        case "BottomLeft":
          pos.top += tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth - tipWidthAdjust;
          break;
        case "LeftBottom":
          pos.left -= tipWidth + tooltipEleWidth + tipAdjust;
          pos.top -= tipHeightAdjust;
          break;
        case "LeftCenter":
          pos.left -= tipWidth + tooltipEleWidth + tipAdjust;
          pos.top -= tooltipEleHeight / 2;
          break;
        case "LeftTop":
          pos.left -= tipWidth + tooltipEleWidth + tipAdjust;
          pos.top -= tooltipEleHeight - tipHeightAdjust;
          break;
        case "TopLeft":
          pos.top -= tooltipEleHeight + tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth - tipWidthAdjust;
          break;
        case "TopRight":
          pos.top -= tooltipEleHeight + tipHeight + tipAdjust;
          pos.left -= tipWidthAdjust;
          break;
        default:
          pos.top -= tooltipEleHeight + tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth / 2;
          break;
      }
      pos.left += this.offsetX;
      pos.top += this.offsetY;
      return pos;
    };
    Tooltip2.prototype.updateTipPosition = function(position) {
      var selEle = selectAll("." + ARROW_TIP + ",." + ARROW_TIP_OUTER + ",." + ARROW_TIP_INNER, this.tooltipEle);
      var removeList = [TIP_BOTTOM, TIP_TOP, TIP_LEFT, TIP_RIGHT];
      removeClass(selEle, removeList);
      this.setTipClass(position);
      addClass(selEle, this.tipClass);
    };
    Tooltip2.prototype.adjustArrow = function(target, position, tooltipPositionX, tooltipPositionY) {
      var arrowEle = select("." + ARROW_TIP, this.tooltipEle);
      if (this.showTipPointer === false || arrowEle === null) {
        return;
      }
      this.updateTipPosition(position);
      var leftValue;
      var topValue;
      this.tooltipEle.style.display = "block";
      var tooltipWidth = this.tooltipEle.clientWidth;
      var tooltipHeight = this.tooltipEle.clientHeight;
      var arrowInnerELe = select("." + ARROW_TIP_INNER, this.tooltipEle);
      var tipWidth = arrowEle.offsetWidth;
      var tipHeight = arrowEle.offsetHeight;
      this.tooltipEle.style.display = "";
      if (this.tipClass === TIP_BOTTOM || this.tipClass === TIP_TOP) {
        if (this.tipClass === TIP_BOTTOM) {
          topValue = "99.9%";
          arrowInnerELe.style.top = "-" + (tipHeight - 2) + "px";
        } else {
          topValue = -(tipHeight - 1) + "px";
          arrowInnerELe.style.top = "-" + (tipHeight - 6) + "px";
        }
        if (target) {
          var tipPosExclude = tooltipPositionX !== "Center" || tooltipWidth > target.offsetWidth || this.mouseTrail;
          if (tipPosExclude && tooltipPositionX === "Left" || !tipPosExclude && this.tipPointerPosition === "End") {
            leftValue = tooltipWidth - tipWidth - POINTER_ADJUST + "px";
          } else if (tipPosExclude && tooltipPositionX === "Right" || !tipPosExclude && this.tipPointerPosition === "Start") {
            leftValue = POINTER_ADJUST + "px";
          } else if (tipPosExclude && (this.tipPointerPosition === "End" || this.tipPointerPosition === "Start")) {
            leftValue = this.tipPointerPosition === "End" ? target.offsetWidth + (this.tooltipEle.offsetWidth - target.offsetWidth) / 2 - tipWidth / 2 - POINTER_ADJUST + "px" : (this.tooltipEle.offsetWidth - target.offsetWidth) / 2 - tipWidth / 2 + POINTER_ADJUST + "px";
          } else {
            leftValue = tooltipWidth / 2 - tipWidth / 2 + "px";
          }
        }
      } else {
        if (this.tipClass === TIP_RIGHT) {
          leftValue = "99.9%";
          arrowInnerELe.style.left = "-" + (tipWidth - 2) + "px";
        } else {
          leftValue = -(tipWidth - 1) + "px";
          arrowInnerELe.style.left = -tipWidth + (tipWidth - 2) + "px";
        }
        var tipPosExclude = tooltipPositionY !== "Center" || tooltipHeight > target.offsetHeight || this.mouseTrail;
        if (tipPosExclude && tooltipPositionY === "Top" || !tipPosExclude && this.tipPointerPosition === "End") {
          topValue = tooltipHeight - tipHeight - POINTER_ADJUST + "px";
        } else if (tipPosExclude && tooltipPositionY === "Bottom" || !tipPosExclude && this.tipPointerPosition === "Start") {
          topValue = POINTER_ADJUST + "px";
        } else {
          topValue = tooltipHeight / 2 - tipHeight / 2 + "px";
        }
      }
      arrowEle.style.top = topValue;
      arrowEle.style.left = leftValue;
    };
    Tooltip2.prototype.renderContent = function(target) {
      var _this = this;
      var tooltipContent = select("." + CONTENT, this.tooltipEle);
      if (this.cssClass) {
        addClass([this.tooltipEle], this.cssClass.split(" "));
      }
      if (target && !isNullOrUndefined(target.getAttribute("title"))) {
        target.setAttribute("data-content", target.getAttribute("title"));
        target.removeAttribute("title");
      }
      if (!isNullOrUndefined(this.content)) {
        tooltipContent.innerHTML = "";
        if (this.content instanceof HTMLElement) {
          tooltipContent.appendChild(this.content);
        } else if (typeof this.content === "string") {
          if (this.isAngular) {
            this.setProperties({ content: SanitizeHtmlHelper.sanitize(this.content) }, true);
          } else {
            this.content = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(this.content) : this.content;
          }
          if (this.enableHtmlParse) {
            var tempFunction = compile$1(this.content);
            var tempArr = tempFunction({}, this, "content", this.element.id + "content", void 0, void 0, tooltipContent, this.root);
            if (tempArr) {
              append(tempArr, tooltipContent);
            }
          } else {
            tooltipContent["textContent"] = this.content;
          }
        } else {
          var templateFunction = compile$1(this.content);
          var tempArr = templateFunction({}, this, "content", this.element.id + "content", void 0, void 0, tooltipContent);
          if (tempArr) {
            if (this.isAngular) {
              setTimeout(function() {
                _this.reposition(target);
              }, 1);
            }
            append(tempArr, tooltipContent);
          }
          this.renderReactTemplates();
        }
      } else {
        if (target && !isNullOrUndefined(target.getAttribute("data-content"))) {
          tooltipContent.innerHTML = target.getAttribute("data-content");
        }
      }
    };
    Tooltip2.prototype.renderCloseIcon = function() {
      if (!this.isSticky) {
        var existingCloseIcon = this.tooltipEle.querySelector("." + ICON + "." + CLOSE$1);
        if (existingCloseIcon) {
          remove(existingCloseIcon);
        }
        return;
      }
      var tipClose = this.createElement("div", { className: ICON + " " + CLOSE$1, attrs: { role: "button", "aria-label": "Press escape to close the Tooltip" } });
      this.tooltipEle.appendChild(tipClose);
      EventHandler.add(tipClose, Browser.touchStartEvent, this.onStickyClose, this);
    };
    Tooltip2.prototype.addDescribedBy = function(target, id) {
      var describedby = (target.getAttribute("aria-describedby") || "").split(/\s+/);
      if (describedby.indexOf(id) < 0) {
        describedby.push(id);
      }
      attributes(target, { "aria-describedby": describedby.join(" ").trim(), "data-tooltip-id": id });
    };
    Tooltip2.prototype.removeDescribedBy = function(target) {
      var id = target.getAttribute("data-tooltip-id");
      var describedby = (target.getAttribute("aria-describedby") || "").split(/\s+/);
      var index = describedby.indexOf(id);
      if (index !== -1) {
        describedby.splice(index, 1);
      }
      target.removeAttribute("data-tooltip-id");
      var orgdescribedby = describedby.join(" ").trim();
      if (orgdescribedby) {
        target.setAttribute("aria-describedby", orgdescribedby);
      } else {
        target.removeAttribute("aria-describedby");
      }
    };
    Tooltip2.prototype.tapHoldHandler = function(evt) {
      clearTimeout(this.autoCloseTimer);
      this.targetHover(evt.originalEvent);
    };
    Tooltip2.prototype.touchEndHandler = function() {
      var _this = this;
      if (this.isSticky) {
        return;
      }
      var close = function() {
        _this.close();
      };
      this.autoCloseTimer = setTimeout(close, TOUCHEND_HIDE_DELAY);
    };
    Tooltip2.prototype.targetClick = function(e) {
      var target;
      if (this.target) {
        target = closest(e.target, this.target);
      } else {
        target = this.element;
      }
      if (isNullOrUndefined(target)) {
        return;
      }
      var mouseEvent = e;
      if (target.getAttribute("data-tooltip-id") === null) {
        if (!(mouseEvent.type === "mousedown" && mouseEvent.button === 2)) {
          this.targetHover(e);
        }
      } else if (!this.isSticky) {
        this.hideTooltip(this.animation.close, e, target);
      }
    };
    Tooltip2.prototype.targetHover = function(e) {
      var target;
      if (this.target) {
        target = closest(e.target, this.target);
      } else {
        target = this.element;
      }
      if (isNullOrUndefined(target) || target.getAttribute("data-tooltip-id") !== null && this.closeDelay === 0) {
        return;
      }
      if (!isNullOrUndefined(this.tooltipEle) && this.tooltipEle.getAttribute("e-animation-id")) {
        Animation$1.stop(this.tooltipEle);
        this.clear();
      }
      var targetList = [].slice.call(selectAll('[data-tooltip-id= "' + this.ctrlId + '_content"]', document));
      for (var _i = 0, targetList_1 = targetList; _i < targetList_1.length; _i++) {
        var target_1 = targetList_1[_i];
        this.restoreElement(target_1);
      }
      this.showTooltip(target, this.animation.open, e);
    };
    Tooltip2.prototype.mouseMoveBeforeOpen = function(e) {
      this.mouseMoveEvent = e;
    };
    Tooltip2.prototype.mouseMoveBeforeRemove = function() {
      if (this.mouseMoveTarget) {
        EventHandler.remove(this.mouseMoveTarget, "mousemove touchstart", this.mouseMoveBeforeOpen);
      }
    };
    Tooltip2.prototype.showTooltip = function(target, showAnimation, e) {
      var _this = this;
      clearTimeout(this.showTimer);
      clearTimeout(this.hideTimer);
      if (this.openDelay && this.mouseTrail) {
        this.mouseMoveBeforeRemove();
        this.mouseMoveTarget = target;
        EventHandler.add(this.mouseMoveTarget, "mousemove touchstart", this.mouseMoveBeforeOpen, this);
      }
      this.tooltipEventArgs = {
        type: e ? e.type : null,
        cancel: false,
        target,
        event: e ? e : null,
        element: this.tooltipEle,
        isInteracted: !isNullOrUndefined(e)
      };
      var observeCallback = function(beforeRenderArgs) {
        _this.beforeRenderCallback(beforeRenderArgs, target, e, showAnimation);
      };
      this.trigger("beforeRender", this.tooltipEventArgs, observeCallback.bind(this));
    };
    Tooltip2.prototype.beforeRenderCallback = function(beforeRenderArgs, target, e, showAnimation) {
      if (beforeRenderArgs.cancel) {
        this.isHidden = true;
        this.clear();
        this.mouseMoveBeforeRemove();
      } else {
        this.isHidden = false;
        if (isNullOrUndefined(this.tooltipEle)) {
          this.ctrlId = this.element.getAttribute("id") ? getUniqueID(this.element.getAttribute("id")) : getUniqueID("tooltip");
          this.tooltipEle = this.createElement("div", {
            className: TOOLTIP_WRAP + " " + POPUP_ROOT + " " + POPUP_LIB,
            attrs: {
              role: "tooltip",
              "aria-hidden": "false",
              "id": this.ctrlId + "_content"
            }
          });
          this.tooltipEle.style.width = formatUnit(this.width);
          this.tooltipEle.style.height = formatUnit(this.height);
          this.tooltipEle.style.position = "absolute";
          this.tooltipBeforeRender(target, this);
          this.tooltipAfterRender(target, e, showAnimation, this);
        } else {
          if (target) {
            this.adjustArrow(target, this.position, this.tooltipPositionX, this.tooltipPositionY);
            this.addDescribedBy(target, this.ctrlId + "_content");
            this.renderContent(target);
            Animation$1.stop(this.tooltipEle);
            this.reposition(target);
            this.tooltipAfterRender(target, e, showAnimation, this);
          }
        }
      }
    };
    Tooltip2.prototype.appendContainer = function(ctrlObj) {
      if (typeof this.container == "string") {
        if (this.container === "body") {
          this.containerElement = document.body;
        } else {
          this.isBodyContainer = false;
          this.containerElement = select(this.container, document);
        }
      } else if (this.container instanceof HTMLElement) {
        this.containerElement = this.container;
        this.isBodyContainer = this.containerElement.tagName === "BODY";
      }
      if (!this.isBodyContainer) {
        addClass([this.containerElement], POPUP_CONTAINER);
      }
      this.containerElement.appendChild(ctrlObj.tooltipEle);
    };
    Tooltip2.prototype.tooltipBeforeRender = function(target, ctrlObj) {
      if (target) {
        if (Browser.isDevice) {
          addClass([ctrlObj.tooltipEle], DEVICE);
        }
        if (ctrlObj.width !== "auto") {
          ctrlObj.tooltipEle.style.maxWidth = formatUnit(ctrlObj.width);
        }
        ctrlObj.tooltipEle.appendChild(ctrlObj.createElement("div", { className: CONTENT }));
        this.appendContainer(ctrlObj);
        removeClass([ctrlObj.tooltipEle], HIDE_POPUP);
        ctrlObj.addDescribedBy(target, ctrlObj.ctrlId + "_content");
        ctrlObj.renderContent(target);
        addClass([ctrlObj.tooltipEle], POPUP_OPEN);
        if (ctrlObj.showTipPointer) {
          ctrlObj.renderArrow();
        }
        ctrlObj.renderCloseIcon();
        ctrlObj.renderPopup(target);
        ctrlObj.adjustArrow(target, ctrlObj.position, ctrlObj.tooltipPositionX, ctrlObj.tooltipPositionY);
        Animation$1.stop(ctrlObj.tooltipEle);
        ctrlObj.reposition(target);
      }
    };
    Tooltip2.prototype.tooltipAfterRender = function(target, e, showAnimation, ctrlObj) {
      if (target) {
        removeClass([ctrlObj.tooltipEle], POPUP_OPEN);
        addClass([ctrlObj.tooltipEle], POPUP_CLOSE);
        ctrlObj.tooltipEventArgs = {
          type: e ? e.type : null,
          cancel: false,
          target,
          event: e ? e : null,
          element: ctrlObj.tooltipEle,
          isInteracted: !isNullOrUndefined(e)
        };
        if (ctrlObj.needTemplateReposition() && !ctrlObj.mouseTrail && (showAnimation.effect === "None" || showAnimation.effect === "FadeIn" || // eslint-disable-next-line @typescript-eslint/no-explicit-any
        this.isReact && typeof ctrlObj.content != "string")) {
          ctrlObj.tooltipEle.style.display = "none";
        }
        var observeCallback = function(observedArgs) {
          ctrlObj.beforeOpenCallback(observedArgs, target, showAnimation, e);
        };
        ctrlObj.trigger("beforeOpen", ctrlObj.tooltipEventArgs, observeCallback.bind(ctrlObj));
      }
    };
    Tooltip2.prototype.beforeOpenCallback = function(observedArgs, target, showAnimation, e) {
      var _this = this;
      if (observedArgs.cancel) {
        this.isHidden = true;
        this.clear();
        this.mouseMoveBeforeRemove();
        this.restoreElement(target);
      } else {
        var openAnimation_1 = {
          name: showAnimation.effect === "None" && animationMode === "Enable" ? "FadeIn" : this.animation.open.effect,
          duration: showAnimation.duration,
          delay: showAnimation.delay,
          timingFunction: "easeOut"
        };
        if (showAnimation.effect === "None") {
          openAnimation_1 = void 0;
        }
        if (this.openDelay > 0) {
          var show = function() {
            if (_this.mouseTrail) {
              EventHandler.add(target, "mousemove touchstart mouseenter", _this.onMouseMove, _this);
            }
            if (_this.popupObj) {
              _this.popupObj.show(openAnimation_1, target);
              if (_this.mouseMoveEvent && _this.mouseTrail) {
                _this.onMouseMove(_this.mouseMoveEvent);
              }
            }
          };
          this.showTimer = setTimeout(show, this.openDelay);
        } else {
          if (this.popupObj) {
            this.popupObj.show(openAnimation_1, target);
          }
        }
      }
      if (e) {
        this.wireMouseEvents(e, target);
      }
    };
    Tooltip2.prototype.needTemplateReposition = function() {
      var tooltip = this;
      return !isNullOrUndefined(tooltip.viewContainerRef) && typeof tooltip.viewContainerRef !== "string" || this.isReact;
    };
    Tooltip2.prototype.checkCollision = function(target, x, y) {
      var elePos = {
        left: x,
        top: y,
        position: this.position,
        horizontal: this.tooltipPositionX,
        vertical: this.tooltipPositionY
      };
      var affectedPos = isCollide(this.tooltipEle, this.checkCollideTarget(), x, y);
      if (affectedPos.length > 0) {
        elePos.horizontal = affectedPos.indexOf("left") >= 0 ? "Right" : affectedPos.indexOf("right") >= 0 ? "Left" : this.tooltipPositionX;
        elePos.vertical = affectedPos.indexOf("top") >= 0 ? "Bottom" : affectedPos.indexOf("bottom") >= 0 ? "Top" : this.tooltipPositionY;
      }
      return elePos;
    };
    Tooltip2.prototype.calculateElementPosition = function(pos, offsetPos) {
      return [
        this.isBodyContainer ? pos.left + offsetPos.left : pos.left - this.containerElement.getBoundingClientRect().left + offsetPos.left + window.pageXOffset + this.containerElement.scrollLeft,
        this.isBodyContainer ? pos.top + offsetPos.top : pos.top - this.containerElement.getBoundingClientRect().top + offsetPos.top + window.pageYOffset + this.containerElement.scrollTop
      ];
    };
    Tooltip2.prototype.collisionFlipFit = function(target, x, y) {
      var elePos = this.checkCollision(target, x, y);
      var newpos = elePos.position;
      if (this.tooltipPositionY !== elePos.vertical) {
        newpos = this.position.indexOf("Bottom") === 0 || this.position.indexOf("Top") === 0 ? elePos.vertical + this.tooltipPositionX : this.tooltipPositionX + elePos.vertical;
      }
      if (this.tooltipPositionX !== elePos.horizontal) {
        if (newpos.indexOf("Left") === 0) {
          elePos.vertical = newpos === "LeftTop" || newpos === "LeftCenter" ? "Top" : "Bottom";
          newpos = elePos.vertical + "Left";
        }
        if (newpos.indexOf("Right") === 0) {
          elePos.vertical = newpos === "RightTop" || newpos === "RightCenter" ? "Top" : "Bottom";
          newpos = elePos.vertical + "Right";
        }
        elePos.horizontal = this.tooltipPositionX;
      }
      this.tooltipEventArgs = {
        type: null,
        cancel: false,
        target,
        event: null,
        element: this.tooltipEle,
        collidedPosition: newpos
      };
      this.trigger("beforeCollision", this.tooltipEventArgs);
      if (this.tooltipEventArgs.cancel) {
        newpos = this.position;
      } else {
        var elePosVertical = elePos.vertical;
        var elePosHorizontal = elePos.horizontal;
        if (elePos.position !== newpos) {
          var pos = calculatePosition(target, elePosHorizontal, elePosVertical, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());
          this.adjustArrow(target, newpos, elePosHorizontal, elePosVertical);
          var scalingFactors = this.getScalingFactor(target);
          var offsetPos = this.calculateTooltipOffset(newpos, scalingFactors.x, scalingFactors.y);
          offsetPos.top -= this.getOffSetPosition("TopBottom", newpos, this.offsetY);
          offsetPos.left -= this.getOffSetPosition("RightLeft", newpos, this.offsetX);
          elePos.position = newpos;
          var elePosition = this.calculateElementPosition(pos, offsetPos);
          elePos.left = elePosition[0];
          elePos.top = elePosition[1];
        } else {
          this.adjustArrow(target, newpos, elePosHorizontal, elePosVertical);
        }
      }
      var eleOffset = { left: elePos.left, top: elePos.top };
      var position = this.isBodyContainer ? fit(this.tooltipEle, this.checkCollideTarget(), { X: true, Y: this.windowCollision }, eleOffset) : eleOffset;
      this.tooltipEle.style.display = "block";
      var arrowEle = select("." + ARROW_TIP, this.tooltipEle);
      if (this.showTipPointer && arrowEle != null && (newpos.indexOf("Bottom") === 0 || newpos.indexOf("Top") === 0)) {
        var arrowleft = parseInt(arrowEle.style.left, 10) - (position.left - elePos.left);
        if (arrowleft < 0) {
          arrowleft = 0;
        } else if (arrowleft + arrowEle.offsetWidth > this.tooltipEle.clientWidth) {
          arrowleft = this.tooltipEle.clientWidth - arrowEle.offsetWidth;
        }
        arrowEle.style.left = arrowleft.toString() + "px";
      }
      this.tooltipEle.style.display = "";
      eleOffset.left = position.left;
      eleOffset.top = position.top;
      return eleOffset;
    };
    Tooltip2.prototype.getOffSetPosition = function(positionString, newPos, offsetType) {
      return positionString.indexOf(this.position.split(/(?=[A-Z])/)[0]) !== -1 && positionString.indexOf(newPos.split(/(?=[A-Z])/)[0]) !== -1 ? 2 * offsetType : 0;
    };
    Tooltip2.prototype.checkCollideTarget = function() {
      return !this.windowCollision && this.target ? this.element : null;
    };
    Tooltip2.prototype.hideTooltip = function(hideAnimation, e, targetElement2) {
      var _this = this;
      if (this.closeDelay > 0) {
        clearTimeout(this.hideTimer);
        clearTimeout(this.showTimer);
        var hide = function() {
          if (_this.closeDelay && _this.tooltipEle && _this.isTooltipOpen) {
            return;
          }
          _this.tooltipHide(hideAnimation, e, targetElement2);
        };
        this.hideTimer = setTimeout(hide, this.closeDelay);
      } else {
        this.tooltipHide(hideAnimation, e, targetElement2);
      }
    };
    Tooltip2.prototype.tooltipHide = function(hideAnimation, e, targetElement2) {
      var _this = this;
      var target;
      if (e) {
        target = this.target ? targetElement2 || e.target : this.element;
      } else {
        target = select('[data-tooltip-id= "' + this.ctrlId + '_content"]', document);
      }
      this.tooltipEventArgs = {
        type: e ? e.type : null,
        cancel: false,
        target,
        event: e ? e : null,
        element: this.tooltipEle,
        isInteracted: !isNullOrUndefined(e)
      };
      this.trigger("beforeClose", this.tooltipEventArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          _this.mouseMoveBeforeRemove();
          _this.popupHide(hideAnimation, target, e);
        } else {
          _this.isHidden = false;
        }
      });
    };
    Tooltip2.prototype.popupHide = function(hideAnimation, target, e) {
      if (target && e) {
        this.restoreElement(target);
      }
      this.isHidden = true;
      var closeAnimation = {
        name: hideAnimation.effect === "None" && animationMode === "Enable" ? "FadeOut" : this.animation.close.effect,
        duration: hideAnimation.duration,
        delay: hideAnimation.delay,
        timingFunction: "easeIn"
      };
      if (hideAnimation.effect === "None") {
        closeAnimation = void 0;
      }
      if (this.popupObj) {
        this.popupObj.hide(closeAnimation);
      }
    };
    Tooltip2.prototype.restoreElement = function(target) {
      this.unwireMouseEvents(target);
      if (!isNullOrUndefined(target.getAttribute("data-content"))) {
        target.setAttribute("title", target.getAttribute("data-content"));
        target.removeAttribute("data-content");
      }
      this.removeDescribedBy(target);
    };
    Tooltip2.prototype.clear = function() {
      var target = this.findTarget();
      if (target) {
        this.restoreElement(target);
      }
      if (this.tooltipEle) {
        removeClass([this.tooltipEle], POPUP_CLOSE);
        addClass([this.tooltipEle], POPUP_OPEN);
      }
      if (this.isHidden) {
        if (this.popupObj) {
          this.popupObj.destroy();
        }
        if (this.tooltipEle) {
          remove(this.tooltipEle);
        }
        this.tooltipEle = null;
        this.popupObj = null;
      }
    };
    Tooltip2.prototype.tooltipHover = function() {
      if (this.tooltipEle) {
        this.isTooltipOpen = true;
      }
    };
    Tooltip2.prototype.tooltipMouseOut = function(e) {
      this.isTooltipOpen = false;
      this.hideTooltip(this.animation.close, e, this.findTarget());
    };
    Tooltip2.prototype.onMouseOut = function(e) {
      var enteredElement = e.relatedTarget;
      if (enteredElement && !this.mouseTrail) {
        var checkForTooltipElement = closest(enteredElement, "." + TOOLTIP_WRAP + "." + POPUP_LIB + "." + POPUP_ROOT);
        if (checkForTooltipElement) {
          EventHandler.add(checkForTooltipElement, "mouseleave", this.tooltipElementMouseOut, this);
        } else {
          this.hideTooltip(this.animation.close, e, this.findTarget());
          if (this.closeDelay === 0 && (this.animation.close.effect === "None" || this.isReact && typeof this.content != "string")) {
            this.clear();
          }
        }
      } else {
        this.hideTooltip(this.animation.close, e, this.findTarget());
        this.clear();
      }
      if (this.popupObj && !this.popupObj.element.classList.contains(POPUP_OPEN)) {
        this.clear();
      }
    };
    Tooltip2.prototype.tooltipElementMouseOut = function(e) {
      this.hideTooltip(this.animation.close, e, this.findTarget());
      EventHandler.remove(this.element, "mouseleave", this.tooltipElementMouseOut);
      this.clear();
    };
    Tooltip2.prototype.onStickyClose = function() {
      this.close();
    };
    Tooltip2.prototype.onMouseMove = function(event) {
      var eventPageX = 0;
      var eventPageY = 0;
      if (event.type.indexOf("touch") > -1) {
        event.preventDefault();
        eventPageX = event.touches[0].pageX;
        eventPageY = event.touches[0].pageY;
      } else {
        eventPageX = event.pageX;
        eventPageY = event.pageY;
      }
      if (isNullOrUndefined(this.tooltipEle)) {
        return;
      }
      Animation$1.stop(this.tooltipEle);
      removeClass([this.tooltipEle], POPUP_CLOSE);
      addClass([this.tooltipEle], POPUP_OPEN);
      this.adjustArrow(event.target, this.position, this.tooltipPositionX, this.tooltipPositionY);
      var scalingFactors = this.getScalingFactor(event.target);
      var pos = this.calculateTooltipOffset(this.position, scalingFactors.x, scalingFactors.y);
      var x = eventPageX + pos.left + this.offsetX;
      var y = eventPageY + pos.top + this.offsetY;
      var elePos = this.checkCollision(event.target, x, y);
      if (this.tooltipPositionX !== elePos.horizontal || this.tooltipPositionY !== elePos.vertical) {
        var newpos = this.position.indexOf("Bottom") === 0 || this.position.indexOf("Top") === 0 ? elePos.vertical + elePos.horizontal : elePos.horizontal + elePos.vertical;
        elePos.position = newpos;
        this.adjustArrow(event.target, elePos.position, elePos.horizontal, elePos.vertical);
        var colpos = this.calculateTooltipOffset(elePos.position, scalingFactors.x, scalingFactors.y);
        elePos.left = eventPageX + colpos.left - this.offsetX;
        elePos.top = eventPageY + colpos.top - this.offsetY;
      }
      this.tooltipEle.style.left = elePos.left + "px";
      this.tooltipEle.style.top = elePos.top + "px";
    };
    Tooltip2.prototype.keyDown = function(event) {
      if (this.tooltipEle && event.keyCode === 27) {
        this.close();
      }
    };
    Tooltip2.prototype.touchEnd = function(e) {
      if (this.tooltipEle && closest(e.target, "." + ROOT$1) === null && !this.isSticky) {
        this.close();
      }
    };
    Tooltip2.prototype.scrollHandler = function(e) {
      if (this.tooltipEle && !this.isSticky) {
        if (!closest(e.target, "." + TOOLTIP_WRAP + "." + POPUP_LIB + "." + POPUP_ROOT) && !this.isSticky) {
          this.close();
        }
      }
    };
    Tooltip2.prototype.render = function() {
      this.initialize();
      this.wireEvents(this.opensOn);
      this.renderComplete();
    };
    Tooltip2.prototype.preRender = function() {
      this.tipClass = TIP_BOTTOM;
      this.tooltipPositionX = "Center";
      this.tooltipPositionY = "Top";
      this.isHidden = true;
    };
    Tooltip2.prototype.wireEvents = function(trigger) {
      var triggerList = this.getTriggerList(trigger);
      for (var _i = 0, triggerList_1 = triggerList; _i < triggerList_1.length; _i++) {
        var opensOn = triggerList_1[_i];
        if (opensOn === "Custom") {
          return;
        }
        if (opensOn === "Focus") {
          this.wireFocusEvents();
        }
        if (opensOn === "Click") {
          EventHandler.add(this.element, Browser.touchStartEvent, this.targetClick, this);
        }
        if (opensOn === "Hover") {
          if (Browser.isDevice) {
            this.touchModule = new Touch(this.element, {
              tapHoldThreshold: TAPHOLD_THRESHOLD,
              tapHold: this.tapHoldHandler.bind(this)
            });
            EventHandler.add(this.element, Browser.touchEndEvent, this.touchEndHandler, this);
          } else {
            EventHandler.add(this.element, "mouseover", this.targetHover, this);
          }
        }
      }
      this.windowResizeBound = this.windowResize.bind(this);
      this.keyDownBound = this.keyDown.bind(this);
      this.touchEndBound = this.touchEnd.bind(this);
      this.scrollWheelBound = this.scrollHandler.bind(this);
      document.addEventListener("wheel", this.scrollWheelBound);
      document.addEventListener("scroll", this.scrollWheelBound);
      document.addEventListener("touchend", this.touchEndBound);
      document.addEventListener("keydown", this.keyDownBound);
      window.addEventListener("resize", this.windowResizeBound);
    };
    Tooltip2.prototype.getTriggerList = function(trigger) {
      if (!trigger) {
        return [];
      }
      if (trigger === "Auto") {
        trigger = Browser.isDevice ? "Hover" : "Hover Focus";
      }
      return trigger.split(" ");
    };
    Tooltip2.prototype.wireFocusEvents = function() {
      if (!isNullOrUndefined(this.target)) {
        var targetList = [].slice.call(selectAll(this.target, this.element));
        this.targetsList = targetList;
        if (!isNullOrUndefined(this.targetsList) && this.targetsList.length > 0) {
          for (var _i = 0, targetList_2 = targetList; _i < targetList_2.length; _i++) {
            var target = targetList_2[_i];
            EventHandler.add(target, "focus", this.targetHover, this);
          }
        } else {
          EventHandler.add(this.element, "focusin", this.targetHover, this);
        }
      } else {
        EventHandler.add(this.element, "focusin", this.targetHover, this);
      }
    };
    Tooltip2.prototype.wireMouseEvents = function(e, target) {
      if (this.tooltipEle) {
        if (!this.isSticky) {
          if (e.type === "focus") {
            EventHandler.add(target, "blur", this.onMouseOut, this);
          }
          if (e.type === "focusin") {
            EventHandler.add(target, "focusout", this.onMouseOut, this);
          }
          if (e.type === "mouseover") {
            EventHandler.add(target, "mouseleave", this.onMouseOut, this);
          }
          if (this.closeDelay) {
            EventHandler.add(this.tooltipEle, "mouseenter", this.tooltipHover, this);
            EventHandler.add(this.tooltipEle, "mouseleave", this.tooltipMouseOut, this);
          }
        }
        if (this.mouseTrail && this.openDelay === 0) {
          EventHandler.add(target, "mousemove touchstart mouseenter", this.onMouseMove, this);
        }
      }
    };
    Tooltip2.prototype.unwireEvents = function(trigger) {
      var triggerList = this.getTriggerList(trigger);
      for (var _i = 0, triggerList_2 = triggerList; _i < triggerList_2.length; _i++) {
        var opensOn = triggerList_2[_i];
        if (opensOn === "Custom") {
          return;
        }
        if (opensOn === "Focus") {
          this.unwireFocusEvents();
        }
        if (opensOn === "Click") {
          EventHandler.remove(this.element, Browser.touchStartEvent, this.targetClick);
        }
        if (opensOn === "Hover") {
          if (Browser.isDevice) {
            if (this.touchModule) {
              this.touchModule.destroy();
            }
            EventHandler.remove(this.element, Browser.touchEndEvent, this.touchEndHandler);
          } else {
            EventHandler.remove(this.element, "mouseover", this.targetHover);
          }
        }
      }
      document.removeEventListener("touchend", this.touchEndBound);
      this.touchEndBound = null;
      document.removeEventListener("wheel", this.scrollWheelBound);
      document.removeEventListener("scroll", this.scrollWheelBound);
      this.scrollWheelBound = null;
      window.removeEventListener("resize", this.windowResizeBound);
      this.windowResizeBound = null;
      document.removeEventListener("keydown", this.keyDownBound);
      this.keyDownBound = null;
    };
    Tooltip2.prototype.unwireFocusEvents = function() {
      if (!isNullOrUndefined(this.target)) {
        var targetList = [].slice.call(selectAll(this.target, this.element));
        if (!isNullOrUndefined(this.targetsList) && this.targetsList.length > 0) {
          for (var _i = 0, targetList_3 = targetList; _i < targetList_3.length; _i++) {
            var target = targetList_3[_i];
            EventHandler.remove(target, "focus", this.targetHover);
          }
        } else {
          EventHandler.remove(this.element, "focusin", this.targetHover);
        }
      } else {
        EventHandler.remove(this.element, "focusin", this.targetHover);
      }
    };
    Tooltip2.prototype.unwireMouseEvents = function(target) {
      if (!this.isSticky) {
        var triggerList = this.getTriggerList(this.opensOn);
        for (var _i = 0, triggerList_3 = triggerList; _i < triggerList_3.length; _i++) {
          var opensOn = triggerList_3[_i];
          if (opensOn === "Focus") {
            EventHandler.remove(target, "blur", this.onMouseOut);
            EventHandler.remove(target, "focusout", this.onMouseOut);
          }
          if (opensOn === "Hover" && !Browser.isDevice) {
            EventHandler.remove(target, "mouseleave", this.onMouseOut);
          }
        }
        if (this.closeDelay) {
          EventHandler.remove(target, "mouseenter", this.tooltipHover);
          EventHandler.remove(target, "mouseleave", this.tooltipMouseOut);
        }
      }
      if (this.mouseTrail) {
        EventHandler.remove(target, "mousemove touchstart mouseenter", this.onMouseMove);
      }
    };
    Tooltip2.prototype.findTarget = function() {
      var target = select('[data-tooltip-id= "' + this.ctrlId + '_content"]', document);
      return target;
    };
    Tooltip2.prototype.getModuleName = function() {
      return "tooltip";
    };
    Tooltip2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Tooltip2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var targetElement2 = this.findTarget();
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "width":
            if (this.tooltipEle && targetElement2) {
              this.tooltipEle.style.width = this.tooltipEle.style.maxWidth = formatUnit(newProp.width);
              this.reposition(targetElement2);
            }
            break;
          case "height":
            if (this.tooltipEle && targetElement2) {
              this.tooltipEle.style.height = formatUnit(newProp.height);
              this.reposition(targetElement2);
            }
            break;
          case "content":
            if (this.tooltipEle) {
              this.renderContent();
            }
            break;
          case "opensOn":
            this.unwireEvents(oldProp.opensOn);
            this.wireEvents(newProp.opensOn);
            break;
          case "position":
            this.formatPosition();
            if (this.tooltipEle && targetElement2) {
              var arrowInnerELe = select("." + ARROW_TIP_INNER, this.tooltipEle);
              if (arrowInnerELe) {
                arrowInnerELe.style.top = arrowInnerELe.style.left = null;
              }
              this.reposition(targetElement2);
            }
            break;
          case "tipPointerPosition":
            if (this.tooltipEle && targetElement2) {
              this.reposition(targetElement2);
            }
            break;
          case "offsetX":
            if (this.tooltipEle) {
              var x = newProp.offsetX - oldProp.offsetX;
              this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + x).toString() + "px";
            }
            break;
          case "offsetY":
            if (this.tooltipEle) {
              var y = newProp.offsetY - oldProp.offsetY;
              this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + y).toString() + "px";
            }
            break;
          case "cssClass":
            if (this.tooltipEle) {
              if (oldProp.cssClass) {
                removeClass([this.tooltipEle], oldProp.cssClass.split(" "));
              }
              if (newProp.cssClass) {
                addClass([this.tooltipEle], newProp.cssClass.split(" "));
              }
            }
            break;
          case "enableRtl":
            if (this.tooltipEle) {
              if (this.enableRtl) {
                addClass([this.tooltipEle], RTL$1);
              } else {
                removeClass([this.tooltipEle], RTL$1);
              }
            }
            break;
          case "isSticky":
            if (this.tooltipEle && targetElement2) {
              this.renderCloseIcon();
              this.reposition(targetElement2);
            }
            break;
          case "container":
            if (!isNullOrUndefined(this.containerElement)) {
              removeClass([this.containerElement], POPUP_CONTAINER);
            }
            this.container = newProp.container;
            if (this.tooltipEle && targetElement2) {
              this.appendContainer(this);
              this.reposition(targetElement2);
            }
        }
      }
    };
    Tooltip2.prototype.open = function(element2, animation) {
      if (isNullOrUndefined(animation)) {
        animation = this.animation.open;
      }
      if (isNullOrUndefined(element2)) {
        element2 = this.element;
      }
      if (element2.style.display === "none") {
        return;
      }
      this.showTooltip(element2, animation);
    };
    Tooltip2.prototype.close = function(animation) {
      if (!animation) {
        animation = this.animation.close;
      }
      this.hideTooltip(animation);
    };
    Tooltip2.prototype.refresh = function(target) {
      if (this.tooltipEle) {
        this.renderContent(target);
      }
      if (this.popupObj && target) {
        this.reposition(target);
      }
      if (!isNullOrUndefined(this.targetsList) && !isNullOrUndefined(this.target)) {
        var target_2 = selectAll(this.target, this.element);
        if (target_2.length !== this.targetsList.length) {
          this.unwireEvents(this.opensOn);
          this.wireEvents(this.opensOn);
        }
      }
    };
    Tooltip2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      if (this.tooltipEle) {
        remove(this.tooltipEle);
      }
      if (this.popupObj) {
        this.popupObj.destroy();
      }
      destroy$1();
      removeClass([this.element], ROOT$1);
      this.unwireEvents(this.opensOn);
      this.unwireMouseEvents(this.element);
      this.tooltipEle = null;
      this.popupObj = null;
      var currentTarget = selectAll('[data-tooltip-id= "' + this.ctrlId + '_content"]', this.element);
      for (var _i = 0, currentTarget_1 = currentTarget; _i < currentTarget_1.length; _i++) {
        var target = currentTarget_1[_i];
        this.restoreElement(target);
      }
      this.containerElement = null;
      this.tipClass = null;
      this.tooltipPositionX = null;
      this.tooltipPositionY = null;
      this.ctrlId = null;
      this.tooltipEventArgs = null;
      this.touchModule = null;
      this.mouseMoveEvent = null;
      this.mouseMoveTarget = null;
      this.containerElement = null;
      this.targetsList = null;
    };
    __decorate$a([
      Property("auto")
    ], Tooltip2.prototype, "width", void 0);
    __decorate$a([
      Property("auto")
    ], Tooltip2.prototype, "height", void 0);
    __decorate$a([
      Property()
    ], Tooltip2.prototype, "content", void 0);
    __decorate$a([
      Property("body")
    ], Tooltip2.prototype, "container", void 0);
    __decorate$a([
      Property()
    ], Tooltip2.prototype, "target", void 0);
    __decorate$a([
      Property("TopCenter")
    ], Tooltip2.prototype, "position", void 0);
    __decorate$a([
      Property(0)
    ], Tooltip2.prototype, "offsetX", void 0);
    __decorate$a([
      Property(0)
    ], Tooltip2.prototype, "offsetY", void 0);
    __decorate$a([
      Property(true)
    ], Tooltip2.prototype, "showTipPointer", void 0);
    __decorate$a([
      Property(true)
    ], Tooltip2.prototype, "enableHtmlParse", void 0);
    __decorate$a([
      Property(false)
    ], Tooltip2.prototype, "windowCollision", void 0);
    __decorate$a([
      Property("Auto")
    ], Tooltip2.prototype, "tipPointerPosition", void 0);
    __decorate$a([
      Property("Auto")
    ], Tooltip2.prototype, "opensOn", void 0);
    __decorate$a([
      Property(false)
    ], Tooltip2.prototype, "mouseTrail", void 0);
    __decorate$a([
      Property(false)
    ], Tooltip2.prototype, "isSticky", void 0);
    __decorate$a([
      Complex({}, Animation)
    ], Tooltip2.prototype, "animation", void 0);
    __decorate$a([
      Property(0)
    ], Tooltip2.prototype, "openDelay", void 0);
    __decorate$a([
      Property(0)
    ], Tooltip2.prototype, "closeDelay", void 0);
    __decorate$a([
      Property()
    ], Tooltip2.prototype, "cssClass", void 0);
    __decorate$a([
      Property(true)
    ], Tooltip2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$a([
      Property("")
    ], Tooltip2.prototype, "htmlAttributes", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "beforeRender", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "beforeOpen", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "afterOpen", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "beforeClose", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "afterClose", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "beforeCollision", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "created", void 0);
    __decorate$a([
      Event()
    ], Tooltip2.prototype, "destroyed", void 0);
    Tooltip2 = __decorate$a([
      NotifyPropertyChanges
    ], Tooltip2);
    return Tooltip2;
  }(Component)
);
var globalTimeOut = {};
var DEFT_MAT_WIDTH = 30;
var DEFT_MAT3_WIDTH = 30;
var DEFT_FAB_WIDTH = 30;
var DEFT_FLUENT_WIDTH = 30;
var DEFT_FLUENT2_WIDTH = 30;
var DEFT_BOOT_WIDTH = 30;
var DEFT_BOOT4_WIDTH = 36;
var DEFT_BOOT5_WIDTH = 36;
var CLS_SHOWSPIN = "e-spin-show";
var CLS_HIDESPIN = "e-spin-hide";
var CLS_MATERIALSPIN = "e-spin-material";
var CLS_MATERIAL3SPIN = "e-spin-material3";
var CLS_TAILWIND3SPIN = "e-spin-tailwind3";
var CLS_FABRICSPIN = "e-spin-fabric";
var CLS_FLUENTSPIN = "e-spin-fluent";
var CLS_FLUENT2SPIN = "e-spin-fluent2";
var CLS_TAILWINDSPIN = "e-spin-tailwind";
var CLS_BOOTSPIN = "e-spin-bootstrap";
var CLS_BOOT4SPIN = "e-spin-bootstrap4";
var CLS_BOOT5SPIN = "e-spin-bootstrap5";
var CLS_HIGHCONTRASTSPIN = "e-spin-high-contrast";
var CLS_SPINWRAP = "e-spinner-pane";
var CLS_SPININWRAP = "e-spinner-inner";
var CLS_SPINCIRCLE = "e-path-circle";
var CLS_SPINARC = "e-path-arc";
var CLS_SPINLABEL = "e-spin-label";
var CLS_SPINTEMPLATE = "e-spin-template";
var spinTemplate = null;
var spinCSSClass = null;
function createSpinner(args, internalCreateElement) {
  var _a;
  if (!args.target) {
    return;
  }
  var radius;
  var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
  var container = create_spinner_container(args.target, makeElement);
  if (!isNullOrUndefined(args.cssClass)) {
    var classNames2 = args.cssClass.split(" ").filter(function(className) {
      return className.trim() !== "";
    });
    (_a = container.wrap.classList).add.apply(_a, classNames2);
  }
  if (!isNullOrUndefined(args.template) || !isNullOrUndefined(spinTemplate)) {
    var template = !isNullOrUndefined(args.template) ? args.template : spinTemplate;
    container.wrap.classList.add(CLS_SPINTEMPLATE);
    replaceContent(container.wrap, template, spinCSSClass);
  } else {
    var theme = !isNullOrUndefined(args.type) ? args.type : getTheme(container.wrap);
    var width = !isNullOrUndefined(args.width) ? args.width : void 0;
    radius = calculateRadius(width, theme);
    setTheme(theme, container.wrap, radius, makeElement);
    if (!isNullOrUndefined(args.label)) {
      createLabel(container.inner_wrap, args.label, makeElement);
    }
  }
  container.wrap.classList.add(CLS_HIDESPIN);
  container = null;
}
function createLabel(container, label, makeElement) {
  var labelEle = makeElement("div", {});
  labelEle.classList.add(CLS_SPINLABEL);
  labelEle.innerHTML = label;
  container.appendChild(labelEle);
  return labelEle;
}
function createMaterialSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Material", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_MATERIALSPIN);
  mat_calculate_attributes(radius, container, "Material", CLS_MATERIALSPIN);
}
function createTailwind3Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Tailwind3", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_TAILWIND3SPIN);
  mat_calculate_attributes(radius, container, "Tailwind3", CLS_TAILWIND3SPIN);
}
function createMaterial3Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Material3", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_MATERIAL3SPIN);
  mat_calculate_attributes(radius, container, "Material3", CLS_MATERIAL3SPIN);
}
function createBootstrap4Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Bootstrap4", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_BOOT4SPIN);
  mat_calculate_attributes(radius, container, "Bootstrap4", CLS_BOOT4SPIN);
}
function createBootstrap5Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Bootstrap5", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_BOOT5SPIN);
  mat_calculate_attributes(radius, container, "Bootstrap5", CLS_BOOT5SPIN);
}
function startMatAnimate(container, uniqueID2, radius) {
  var globalObject = {};
  var timeOutVar = 0;
  globalTimeOut["" + uniqueID2].timeOut = 0;
  globalObject["" + uniqueID2] = globalVariables(uniqueID2, radius, 0, 0);
  var spinnerInfo = { uniqueID: uniqueID2, container, globalInfo: globalObject, timeOutVar };
  animateMaterial(spinnerInfo);
}
function createFabricSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Fabric", radius };
  create_fabric_element(container, uniqueID2, CLS_FABRICSPIN);
  fb_calculate_attributes(radius, container, CLS_FABRICSPIN);
}
function createFluentSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Fluent", radius };
  create_fabric_element(container, uniqueID2, CLS_FLUENTSPIN);
  fb_calculate_attributes(radius, container, CLS_FLUENTSPIN);
}
function createFluent2Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Fluent2", radius };
  create_fabric_element(container, uniqueID2, CLS_FLUENT2SPIN);
  fb_calculate_attributes(radius, container, CLS_FLUENT2SPIN);
}
function createTailwindSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Tailwind", radius };
  create_fabric_element(container, uniqueID2, CLS_TAILWINDSPIN);
  fb_calculate_attributes(radius, container, CLS_TAILWINDSPIN);
}
function createHighContrastSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "HighContrast", radius };
  create_fabric_element(container, uniqueID2, CLS_HIGHCONTRASTSPIN);
  fb_calculate_attributes(radius, container, CLS_HIGHCONTRASTSPIN);
}
function getTheme(container) {
  var theme = window.getComputedStyle(container, ":after").getPropertyValue("content");
  return theme.replace(/['"]+/g, "");
}
function setTheme(theme, container, radius, makeElement) {
  var innerContainer = container.querySelector("." + CLS_SPININWRAP);
  var svg = innerContainer.querySelector("svg");
  if (!isNullOrUndefined(svg)) {
    innerContainer.removeChild(svg);
  }
  switch (theme) {
    case "Material":
      createMaterialSpinner(innerContainer, radius, makeElement);
      break;
    case "Material3":
      createMaterial3Spinner(innerContainer, radius, makeElement);
      break;
    case "Fabric":
      createFabricSpinner(innerContainer, radius);
      break;
    case "Fluent":
      createFluentSpinner(innerContainer, radius);
      break;
    case "Fluent2":
      createFluent2Spinner(innerContainer, radius);
      break;
    case "Bootstrap":
      createBootstrapSpinner(innerContainer, radius);
      break;
    case "HighContrast":
      createHighContrastSpinner(innerContainer, radius);
      break;
    case "Bootstrap4":
      createBootstrap4Spinner(innerContainer, radius, makeElement);
      break;
    case "Bootstrap5":
      createBootstrap5Spinner(innerContainer, radius, makeElement);
      break;
    case "Tailwind":
    case "Tailwind-dark":
      createTailwindSpinner(innerContainer, radius);
      break;
    case "Tailwind3":
      createTailwind3Spinner(innerContainer, radius, makeElement);
      break;
  }
}
function createBootstrapSpinner(innerContainer, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Bootstrap", radius };
  create_bootstrap_element(innerContainer, uniqueID2);
  boot_calculate_attributes(innerContainer, radius);
}
function create_bootstrap_element(innerContainer, uniqueID2, makeElement) {
  var svgBoot = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  var viewBoxValue = 64;
  var trans = 32;
  var defaultRadius = 2;
  svgBoot.setAttribute("id", uniqueID2);
  svgBoot.setAttribute("class", CLS_BOOTSPIN);
  svgBoot.setAttribute("viewBox", "0 0 " + viewBoxValue + " " + viewBoxValue);
  innerContainer.insertBefore(svgBoot, innerContainer.firstChild);
  for (var item = 0; item <= 7; item++) {
    var bootCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    bootCircle.setAttribute("class", CLS_SPINCIRCLE + "_" + item);
    bootCircle.setAttribute("r", defaultRadius + "");
    bootCircle.setAttribute("transform", "translate(" + trans + "," + trans + ")");
    svgBoot.appendChild(bootCircle);
  }
}
function boot_calculate_attributes(innerContainer, radius) {
  var svg = innerContainer.querySelector("svg.e-spin-bootstrap");
  var x = 0;
  var y = 0;
  var rad = 24;
  svg.style.width = svg.style.height = radius + "px";
  var startArc = 90;
  for (var item = 0; item <= 7; item++) {
    var start = defineArcPoints(x, y, rad, startArc);
    var circleEle = svg.querySelector("." + CLS_SPINCIRCLE + "_" + item);
    circleEle.setAttribute("cx", start.x + "");
    circleEle.setAttribute("cy", start.y + "");
    startArc = startArc >= 360 ? 0 : startArc;
    startArc = startArc + 45;
  }
}
function generateSeries(begin, stop) {
  var series = [];
  var start = begin;
  var end = stop;
  var increment = false;
  var count = 1;
  formSeries(start);
  function formSeries(i) {
    series.push(i);
    if (i !== end || count === 1) {
      if (i <= start && i > 1 && !increment) {
        i = parseFloat((i - 0.2).toFixed(2));
      } else if (i === 1) {
        i = 7;
        i = parseFloat((i + 0.2).toFixed(2));
        increment = true;
      } else if (i < 8 && increment) {
        i = parseFloat((i + 0.2).toFixed(2));
        if (i === 8) {
          increment = false;
        }
      } else if (i <= 8 && !increment) {
        i = parseFloat((i - 0.2).toFixed(2));
      }
      ++count;
      formSeries(i);
    }
  }
  return series;
}
function animateBootstrap(innerContainer) {
  var svg = innerContainer.querySelector("svg.e-spin-bootstrap");
  var id = svg.getAttribute("id");
  for (var i = 1; i <= 8; i++) {
    var circleEle = innerContainer.getElementsByClassName("e-path-circle_" + (i === 8 ? 0 : i))[0];
    rotation(circleEle, i, i, generateSeries(i, i), id);
  }
  function rotation(circle, start, end, series, id2) {
    var count = 0;
    boot_animate(start);
    function boot_animate(radius) {
      if (globalTimeOut["" + id2].isAnimate) {
        ++count;
        circle.setAttribute("r", radius + "");
        if (count >= series.length) {
          count = 0;
        }
        globalTimeOut[id2].timeOut = setTimeout(boot_animate.bind(null, series[count]), 18);
      }
    }
  }
}
function replaceContent(container, template, cssClass2) {
  if (!isNullOrUndefined(cssClass2)) {
    container.classList.add(cssClass2);
  }
  var inner = container.querySelector(".e-spinner-inner");
  inner.innerHTML = template;
}
function calculateRadius(width, theme) {
  var defaultSize;
  switch (theme) {
    case "Material":
      defaultSize = DEFT_MAT_WIDTH;
      break;
    case "Material3":
      defaultSize = DEFT_MAT3_WIDTH;
      break;
    case "Fabric":
      defaultSize = DEFT_FAB_WIDTH;
      break;
    case "Tailwind":
    case "Tailwind-dark":
    case "Tailwind3":
      defaultSize = DEFT_FAB_WIDTH;
      break;
    case "Fluent":
      defaultSize = DEFT_FLUENT_WIDTH;
      break;
    case "Fluent2":
      defaultSize = DEFT_FLUENT2_WIDTH;
      break;
    case "Bootstrap4":
      defaultSize = DEFT_BOOT4_WIDTH;
      break;
    case "Bootstrap5":
      defaultSize = DEFT_BOOT5_WIDTH;
      break;
    default:
      defaultSize = DEFT_BOOT_WIDTH;
  }
  width = width ? parseFloat(width + "") : defaultSize;
  return theme === "Bootstrap" ? width : width / 2;
}
function globalVariables(id, radius, count, previousId) {
  return {
    radius,
    count,
    previousId
  };
}
function random_generator() {
  var random = "";
  var combine = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  for (var i = 0; i < 5; i++) {
    random += combine.charAt(Math.floor(Math.random() * combine.length));
  }
  return random;
}
function create_fabric_element(innerCon, uniqueID2, themeClass, makeElement) {
  var svgFabric = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svgFabric.setAttribute("id", uniqueID2);
  svgFabric.setAttribute("class", themeClass);
  var fabricCirclePath = document.createElementNS("http://www.w3.org/2000/svg", "path");
  fabricCirclePath.setAttribute("class", CLS_SPINCIRCLE);
  var fabricCircleArc = document.createElementNS("http://www.w3.org/2000/svg", "path");
  fabricCircleArc.setAttribute("class", CLS_SPINARC);
  innerCon.insertBefore(svgFabric, innerCon.firstChild);
  svgFabric.appendChild(fabricCirclePath);
  svgFabric.appendChild(fabricCircleArc);
}
function create_material_element(innerContainer, uniqueID2, makeElement, cls) {
  var svgMaterial = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  var matCirclePath = document.createElementNS("http://www.w3.org/2000/svg", "path");
  svgMaterial.setAttribute("class", cls);
  svgMaterial.setAttribute("id", uniqueID2);
  matCirclePath.setAttribute("class", CLS_SPINCIRCLE);
  innerContainer.insertBefore(svgMaterial, innerContainer.firstChild);
  svgMaterial.appendChild(matCirclePath);
}
function create_spinner_container(target, makeElement) {
  var spinnerContainer = makeElement("div", {});
  var spinnerInnerContainer = makeElement("div", {});
  spinnerContainer.classList.add(CLS_SPINWRAP);
  spinnerInnerContainer.classList.add(CLS_SPININWRAP);
  spinnerInnerContainer.setAttribute("aria-disabled", "true");
  target.appendChild(spinnerContainer);
  spinnerContainer.appendChild(spinnerInnerContainer);
  return { wrap: spinnerContainer, inner_wrap: spinnerInnerContainer };
}
function animateMaterial(spinnerInfo) {
  var start = 1;
  var end = 149;
  var duration = 1333;
  var max = 75;
  createCircle(start, end, easeAnimation, duration, spinnerInfo.globalInfo[spinnerInfo.uniqueID].count, max, spinnerInfo);
  spinnerInfo.globalInfo[spinnerInfo.uniqueID].count = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].count % 4;
}
function createCircle(start, end, easing, duration, count, max, spinnerInfo) {
  var id = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId;
  var startTime = (/* @__PURE__ */ new Date()).getTime();
  var change = end - start;
  var diameter = getSize(spinnerInfo.globalInfo[spinnerInfo.uniqueID].radius * 2 + "");
  var strokeSize = getStrokeSize(diameter);
  var rotate = -90 * (spinnerInfo.globalInfo[spinnerInfo.uniqueID].count || 0);
  mat_animation(spinnerInfo);
  function mat_animation(spinnerInfo2) {
    var currentTime = Math.max(0, Math.min((/* @__PURE__ */ new Date()).getTime() - startTime, duration));
    updatePath(easing(currentTime, start, change, duration), spinnerInfo2.container);
    if (id === spinnerInfo2.globalInfo[spinnerInfo2.uniqueID].previousId && currentTime < duration) {
      globalTimeOut[spinnerInfo2.uniqueID].timeOut = setTimeout(mat_animation.bind(null, spinnerInfo2), 1);
    } else {
      animateMaterial(spinnerInfo2);
    }
  }
  function updatePath(value, container) {
    if (!isNullOrUndefined(container.querySelector("svg.e-spin-material")) || !isNullOrUndefined(container.querySelector("svg.e-spin-material3")) || !isNullOrUndefined(container.querySelector("svg.e-spin-tailwind3"))) {
      var svg = void 0;
      if (!isNullOrUndefined(container.querySelector("svg.e-spin-material")) && !isNullOrUndefined(container.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))) {
        svg = container.querySelector("svg.e-spin-material");
      } else if (!isNullOrUndefined(container.querySelector("svg.e-spin-material3")) && !isNullOrUndefined(container.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))) {
        svg = container.querySelector("svg.e-spin-material3");
      } else if (!isNullOrUndefined(container.querySelector("svg.e-spin-tailwind3")) && !isNullOrUndefined(container.querySelector("svg.e-spin-tailwind3").querySelector("path.e-path-circle"))) {
        svg = container.querySelector("svg.e-spin-tailwind3");
      }
      if (!isNullOrUndefined(svg)) {
        var path = svg.querySelector("path.e-path-circle");
        path.setAttribute("stroke-dashoffset", getDashOffset(diameter, strokeSize, value, max) + "");
        path.setAttribute("transform", "rotate(" + rotate + " " + diameter / 2 + " " + diameter / 2 + ")");
      }
    }
  }
}
function mat_calculate_attributes(radius, container, type, cls) {
  var diameter = radius * 2;
  var svg = container.querySelector("svg." + cls);
  var path = svg.querySelector("path.e-path-circle");
  var strokeSize = getStrokeSize(diameter);
  var transformOrigin = diameter / 2 + "px";
  svg.setAttribute("viewBox", "0 0 " + diameter + " " + diameter);
  svg.style.width = svg.style.height = diameter + "px";
  svg.style.transformOrigin = transformOrigin + " " + transformOrigin + " " + transformOrigin;
  path.setAttribute("d", drawArc(diameter, strokeSize));
  if (type === "Material" || type === "Material3" || type === "Fluent2" || type === "Tailwind3") {
    path.setAttribute("stroke-width", strokeSize + "");
    path.setAttribute("stroke-dasharray", (diameter - strokeSize) * Math.PI * 0.75 + "");
    path.setAttribute("stroke-dashoffset", getDashOffset(diameter, strokeSize, 1, 75) + "");
  }
}
function getSize(value) {
  var parsed = parseFloat(value);
  return parsed;
}
function drawArc(diameter, strokeSize) {
  var radius = diameter / 2;
  var offset = strokeSize / 2;
  return "M" + radius + "," + offset + "A" + (radius - offset) + "," + (radius - offset) + " 0 1 1 " + offset + "," + radius;
}
function getStrokeSize(diameter) {
  return 10 / 100 * diameter;
}
function getDashOffset(diameter, strokeSize, value, max) {
  return (diameter - strokeSize) * Math.PI * (3 * max / 100 - value / 100);
}
function easeAnimation(current, start, change, duration) {
  var timestamp = (current /= duration) * current;
  var timecount = timestamp * current;
  return start + change * (6 * timecount * timestamp + -15 * timestamp * timestamp + 10 * timecount);
}
function fb_calculate_attributes(radius, innerConainer, trgClass) {
  var centerX = radius;
  var centerY = radius;
  var diameter = radius * 2;
  var startArc = 315;
  var endArc = 45;
  var svg = innerConainer.querySelector("." + trgClass);
  var circle = svg.querySelector(".e-path-circle");
  var path = svg.querySelector(".e-path-arc");
  var transformOrigin = diameter / 2 + "px";
  circle.setAttribute("d", defineCircle(centerX, centerY, radius));
  path.setAttribute("d", defineArc(centerX, centerY, radius, startArc, endArc));
  svg.setAttribute("viewBox", "0 0 " + diameter + " " + diameter);
  svg.style.transformOrigin = transformOrigin + " " + transformOrigin + " " + transformOrigin;
  svg.style.width = svg.style.height = diameter + "px";
}
function defineArcPoints(centerX, centerY, radius, angle) {
  var radians = (angle - 90) * Math.PI / 180;
  return {
    x: centerX + radius * Math.cos(radians),
    y: centerY + radius * Math.sin(radians)
  };
}
function defineArc(x, y, radius, startArc, endArc) {
  var start = defineArcPoints(x, y, radius, endArc);
  var end = defineArcPoints(x, y, radius, startArc);
  var d = [
    "M",
    start.x,
    start.y,
    "A",
    radius,
    radius,
    0,
    0,
    0,
    end.x,
    end.y
  ].join(" ");
  return d;
}
function defineCircle(x, y, radius) {
  var d = [
    "M",
    x,
    y,
    "m",
    -radius,
    0,
    "a",
    radius,
    radius,
    0,
    1,
    0,
    radius * 2,
    0,
    "a",
    radius,
    radius,
    0,
    1,
    0,
    -radius * 2,
    0
  ].join(" ");
  return d;
}
function showSpinner(container) {
  showHideSpinner(container, false);
  container = null;
}
function showHideSpinner(container, isHide) {
  var spinnerWrap;
  if (container) {
    if (container.classList.contains(CLS_SPINWRAP)) {
      spinnerWrap = container;
    } else {
      var spinWrapCollection = container.querySelectorAll("." + CLS_SPINWRAP);
      if (Browser.isIE) {
        for (var i = 0; i < spinWrapCollection.length; i++) {
          if (spinWrapCollection[i].parentElement && spinWrapCollection[i].parentElement === container) {
            spinnerWrap = spinWrapCollection[i];
            break;
          }
        }
      } else {
        spinnerWrap = Array.from(spinWrapCollection).find(function(wrap2) {
          return wrap2.parentElement === container;
        }) || null;
      }
    }
  }
  if (container && spinnerWrap) {
    var inner = spinnerWrap.querySelector("." + CLS_SPININWRAP);
    var spinCheck = isHide ? !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) && !spinnerWrap.classList.contains(CLS_HIDESPIN) : !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) && !spinnerWrap.classList.contains(CLS_SHOWSPIN);
    if (spinCheck) {
      var svgEle = spinnerWrap.querySelector("svg");
      if (isNullOrUndefined(svgEle)) {
        return;
      }
      var id = svgEle.getAttribute("id");
      globalTimeOut["" + id].isAnimate = !isHide;
      switch (globalTimeOut["" + id].type) {
        case "Material":
        case "Material3":
        case "Tailwind3":
          if (isHide) {
            clearTimeout(globalTimeOut[id].timeOut);
          } else {
            startMatAnimate(inner, id, globalTimeOut[id].radius);
          }
          break;
        case "Bootstrap":
          if (isHide) {
            clearTimeout(globalTimeOut[id].timeOut);
          } else {
            animateBootstrap(inner);
          }
          break;
      }
    }
    if (isHide) {
      classList(spinnerWrap, [CLS_HIDESPIN], [CLS_SHOWSPIN]);
    } else {
      classList(spinnerWrap, [CLS_SHOWSPIN], [CLS_HIDESPIN]);
    }
    container = null;
  }
}
function hideSpinner(container) {
  showHideSpinner(container, true);
  container = null;
}
var CLASSNAMES = {
  RTL: "e-rtl",
  DISABLE: "e-disabled",
  INPUT: "e-input",
  TEXTAREA: "e-multi-line-input",
  INPUTGROUP: "e-input-group",
  FLOATINPUT: "e-float-input",
  FLOATLINE: "e-float-line",
  FLOATTEXT: "e-float-text",
  FLOATTEXTCONTENT: "e-float-text-content",
  CLEARICON: "e-clear-icon",
  CLEARICONHIDE: "e-clear-icon-hide",
  LABELTOP: "e-label-top",
  LABELBOTTOM: "e-label-bottom",
  NOFLOATLABEL: "e-no-float-label",
  INPUTCUSTOMTAG: "e-input-custom-tag",
  FLOATCUSTOMTAG: "e-float-custom-tag"
};
var containerAttributes = ["title", "style", "class"];
var Input;
(function(Input2) {
  var isBindClearAction = true;
  function createInput(args, internalCreateElement) {
    args.element.__eventHandlers = {};
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var inputObject2 = { container: null, buttons: [], clearButton: null };
    args.floatLabelType;
    isBindClearAction = args.bindClearAction;
    if (isNullOrUndefined(args.floatLabelType) || args.floatLabelType === "Never") {
      inputObject2.container = createInputContainer(args, CLASSNAMES.INPUTGROUP, CLASSNAMES.INPUTCUSTOMTAG, "span", makeElement);
      args.element.parentNode.insertBefore(inputObject2.container, args.element);
      addClass([args.element], CLASSNAMES.INPUT);
      inputObject2.container.appendChild(args.element);
    } else {
      createFloatingInput(args, inputObject2, makeElement);
    }
    bindInitialEvent(args);
    if (!isNullOrUndefined(args.properties) && !isNullOrUndefined(args.properties.showClearButton) && args.properties.showClearButton) {
      setClearButton(args.properties.showClearButton, args.element, inputObject2, true, makeElement);
      inputObject2.clearButton.setAttribute("role", "button");
      if (inputObject2.container.classList.contains(CLASSNAMES.FLOATINPUT)) {
        addClass([inputObject2.container], CLASSNAMES.INPUTGROUP);
      }
    }
    if (!isNullOrUndefined(args.buttons)) {
      for (var i = 0; i < args.buttons.length; i++) {
        inputObject2.buttons.push(appendSpan(args.buttons[i], inputObject2.container, makeElement));
      }
    }
    if (!isNullOrUndefined(args.element) && args.element.tagName === "TEXTAREA") {
      addClass([inputObject2.container], CLASSNAMES.TEXTAREA);
    }
    validateInputType(inputObject2.container, args.element);
    inputObject2 = setPropertyValue(args, inputObject2);
    createSpanElement(inputObject2.container, makeElement);
    return inputObject2;
  }
  Input2.createInput = createInput;
  function bindFocusEventHandler(args) {
    var parent = getParentNode(args.element);
    if (parent.classList.contains("e-input-group") || parent.classList.contains("e-outline") || parent.classList.contains("e-filled")) {
      parent.classList.add("e-input-focus");
    }
    if (args.floatLabelType !== "Never") {
      setTimeout(function() {
        Input2.calculateWidth(args.element, parent);
      }, 80);
    }
  }
  function bindBlurEventHandler(args) {
    var parent = getParentNode(args.element);
    if (parent.classList.contains("e-input-group") || parent.classList.contains("e-outline") || parent.classList.contains("e-filled")) {
      parent.classList.remove("e-input-focus");
    }
    if (args.floatLabelType !== "Never") {
      setTimeout(function() {
        Input2.calculateWidth(args.element, parent);
      }, 80);
    }
  }
  function bindInputEventHandler(args) {
    checkInputValue(args.floatLabelType, args.element);
  }
  function bindInitialEvent(args) {
    checkInputValue(args.floatLabelType, args.element);
    var focusHandler2 = function() {
      return bindFocusEventHandler(args);
    };
    var blurHandler2 = function() {
      return bindBlurEventHandler(args);
    };
    var inputHandler2 = function() {
      return bindInputEventHandler(args);
    };
    args.element.addEventListener("focus", focusHandler2);
    args.element.addEventListener("blur", blurHandler2);
    args.element.addEventListener("input", inputHandler2);
    args.element.__eventHandlers["inputFocusHandler"] = { focusHandler: focusHandler2 };
    args.element.__eventHandlers["inputBlurHandler"] = { blurHandler: blurHandler2 };
    args.element.__eventHandlers["inputHandler"] = { inputHandler: inputHandler2 };
  }
  Input2.bindInitialEvent = bindInitialEvent;
  function unbindInitialEvent(args) {
    if (!isNullOrUndefined(args.element)) {
      if (!isNullOrUndefined(args.element.__eventHandlers)) {
        if (!isNullOrUndefined(args.element.__eventHandlers["inputFocusHandler"]) && !isNullOrUndefined(args.element.__eventHandlers["inputBlurHandler"]) && !isNullOrUndefined(args.element.__eventHandlers["inputHandler"])) {
          var focusHandler_1 = args.element.__eventHandlers["inputFocusHandler"].focusHandler;
          var blurHandler_1 = args.element.__eventHandlers["inputBlurHandler"].blurHandler;
          var inputHandler_1 = args.element.__eventHandlers["inputHandler"].inputHandler;
          args.element.removeEventListener("focus", focusHandler_1);
          args.element.removeEventListener("blur", blurHandler_1);
          args.element.removeEventListener("input", inputHandler_1);
          delete args.element.__eventHandlers["inputFocusHandler"];
          delete args.element.__eventHandlers["inputBlurHandler"];
          delete args.element.__eventHandlers["inputHandler"];
        }
      }
    }
  }
  function checkInputValue(floatLabelType, inputElement) {
    var inputValue = inputElement.value;
    var inputParent = inputElement.parentElement;
    var grandParent = inputParent && inputParent.parentElement;
    if (inputValue !== "" && !isNullOrUndefined(inputValue)) {
      if (inputParent && inputParent.classList.contains("e-input-group")) {
        inputParent.classList.add("e-valid-input");
      } else if (grandParent && grandParent.classList.contains("e-input-group")) {
        grandParent.classList.add("e-valid-input");
      }
    } else if (floatLabelType !== "Always") {
      if (inputParent && inputParent.classList.contains("e-input-group")) {
        inputParent.classList.remove("e-valid-input");
      } else if (grandParent && grandParent.classList.contains("e-input-group")) {
        grandParent.classList.remove("e-valid-input");
      }
    }
  }
  function _focusFn() {
    var label = getParentNode(this).getElementsByClassName("e-float-text")[0];
    if (!isNullOrUndefined(label)) {
      addClass([label], CLASSNAMES.LABELTOP);
      if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {
        removeClass([label], CLASSNAMES.LABELBOTTOM);
      }
    }
  }
  function _blurFn() {
    var parent = getParentNode(this);
    if (parent.getElementsByTagName("textarea")[0] ? parent.getElementsByTagName("textarea")[0].value === "" : parent.getElementsByTagName("input")[0].value === "") {
      var label = parent.getElementsByClassName("e-float-text")[0];
      if (!isNullOrUndefined(label)) {
        if (label.classList.contains(CLASSNAMES.LABELTOP)) {
          removeClass([label], CLASSNAMES.LABELTOP);
        }
        addClass([label], CLASSNAMES.LABELBOTTOM);
      }
    }
  }
  function wireFloatingEvents(element2) {
    element2.addEventListener("focus", _focusFn);
    element2.addEventListener("blur", _blurFn);
  }
  Input2.wireFloatingEvents = wireFloatingEvents;
  function unwireFloatingEvents(element2) {
    if (!isNullOrUndefined(element2)) {
      element2.removeEventListener("focus", _focusFn);
      element2.removeEventListener("blur", _blurFn);
    }
  }
  function inputEventHandler(args) {
    validateLabel(args.element, args.floatLabelType);
  }
  function blurEventHandler(args) {
    validateLabel(args.element, args.floatLabelType);
  }
  function createFloatingInput(args, inputObject2, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    if (args.floatLabelType === "Auto") {
      wireFloatingEvents(args.element);
    }
    if (isNullOrUndefined(inputObject2.container)) {
      inputObject2.container = createInputContainer(args, CLASSNAMES.FLOATINPUT, CLASSNAMES.FLOATCUSTOMTAG, "div", makeElement);
      inputObject2.container.classList.add(CLASSNAMES.INPUTGROUP);
      if (args.element.parentNode) {
        args.element.parentNode.insertBefore(inputObject2.container, args.element);
      }
    } else {
      if (!isNullOrUndefined(args.customTag)) {
        inputObject2.container.classList.add(CLASSNAMES.FLOATCUSTOMTAG);
      }
      inputObject2.container.classList.add(CLASSNAMES.FLOATINPUT);
    }
    var floatLinelement = makeElement("span", { className: CLASSNAMES.FLOATLINE });
    var floatLabelElement = makeElement("label", { className: CLASSNAMES.FLOATTEXT });
    if (!isNullOrUndefined(args.element.id) && args.element.id !== "") {
      floatLabelElement.id = "label_" + args.element.id.replace(/ /g, "_");
      attributes(args.element, { "aria-labelledby": floatLabelElement.id });
    }
    if (!isNullOrUndefined(args.element.placeholder) && args.element.placeholder !== "") {
      floatLabelElement.innerText = encodePlaceHolder(args.element.placeholder);
      args.element.removeAttribute("placeholder");
    }
    if (!isNullOrUndefined(args.properties) && !isNullOrUndefined(args.properties.placeholder) && args.properties.placeholder !== "") {
      floatLabelElement.innerText = encodePlaceHolder(args.properties.placeholder);
    }
    if (!floatLabelElement.innerText) {
      inputObject2.container.classList.add(CLASSNAMES.NOFLOATLABEL);
    }
    if (inputObject2.container.classList.contains("e-float-icon-left")) {
      var inputWrap = inputObject2.container.querySelector(".e-input-in-wrap");
      inputWrap.appendChild(args.element);
      inputWrap.appendChild(floatLinelement);
      inputWrap.appendChild(floatLabelElement);
    } else {
      inputObject2.container.appendChild(args.element);
      inputObject2.container.appendChild(floatLinelement);
      inputObject2.container.appendChild(floatLabelElement);
    }
    updateLabelState(args.element.value, floatLabelElement);
    if (args.floatLabelType === "Always") {
      if (floatLabelElement.classList.contains(CLASSNAMES.LABELBOTTOM)) {
        removeClass([floatLabelElement], CLASSNAMES.LABELBOTTOM);
      }
      addClass([floatLabelElement], CLASSNAMES.LABELTOP);
    }
    if (args.floatLabelType === "Auto") {
      var inputFloatHandler = function() {
        return inputEventHandler(args);
      };
      var blurFloatHandler = function() {
        return blurEventHandler(args);
      };
      args.element.addEventListener("input", inputFloatHandler);
      args.element.addEventListener("blur", blurFloatHandler);
      args.element.__eventHandlers["floatInputHandler"] = { inputFloatHandler };
      args.element.__eventHandlers["floatBlurHandler"] = { blurFloatHandler };
    } else {
      unWireFloatLabelEvents(args);
    }
    if (!isNullOrUndefined(args.element.getAttribute("id"))) {
      floatLabelElement.setAttribute("for", args.element.getAttribute("id"));
    }
  }
  function unWireFloatLabelEvents(args) {
    if (!isNullOrUndefined(args.element) && !isNullOrUndefined(args.element.__eventHandlers) && !isNullOrUndefined(args.element.__eventHandlers["floatInputHandler"]) && !isNullOrUndefined(args.element.__eventHandlers["floatBlurHandler"])) {
      var inputFloatHandler = args.element.__eventHandlers["floatInputHandler"].inputFloatHandler;
      var blurFloatHandler = args.element.__eventHandlers["floatBlurHandler"].blurFloatHandler;
      args.element.removeEventListener("input", inputFloatHandler);
      args.element.removeEventListener("blur", blurFloatHandler);
      delete args.element.__eventHandlers["floatInputHandler"];
      delete args.element.__eventHandlers["floatBlurHandler"];
    }
  }
  function checkFloatLabelType(type, container) {
    if (type === "Always" && container.classList.contains("e-outline")) {
      container.classList.add("e-valid-input");
    }
  }
  function setPropertyValue(args, inputObject2) {
    if (!isNullOrUndefined(args.properties)) {
      for (var _i = 0, _a = Object.keys(args.properties); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "cssClass":
            setCssClass(args.properties.cssClass, [inputObject2.container]);
            checkFloatLabelType(args.floatLabelType, inputObject2.container);
            break;
          case "enabled":
            setEnabled(args.properties.enabled, args.element, args.floatLabelType, inputObject2.container);
            break;
          case "enableRtl":
            setEnableRtl(args.properties.enableRtl, [inputObject2.container]);
            break;
          case "placeholder":
            setPlaceholder(args.properties.placeholder, args.element);
            break;
          case "readonly":
            setReadonly(args.properties.readonly, args.element);
            break;
        }
      }
    }
    return inputObject2;
  }
  function updateIconState(value, button, readonly) {
    if (!isNullOrUndefined(button)) {
      if (value && !readonly) {
        removeClass([button], CLASSNAMES.CLEARICONHIDE);
      } else {
        addClass([button], CLASSNAMES.CLEARICONHIDE);
      }
    }
  }
  function updateLabelState(value, label, element2) {
    if (element2 === void 0) {
      element2 = null;
    }
    if (value) {
      addClass([label], CLASSNAMES.LABELTOP);
      if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {
        removeClass([label], CLASSNAMES.LABELBOTTOM);
      }
    } else {
      var isNotFocused = element2 != null ? element2 !== document.activeElement : true;
      if (isNotFocused) {
        if (label.classList.contains(CLASSNAMES.LABELTOP)) {
          removeClass([label], CLASSNAMES.LABELTOP);
        }
        addClass([label], CLASSNAMES.LABELBOTTOM);
      }
    }
  }
  function getParentNode(element2) {
    var parentNode = isNullOrUndefined(element2.parentNode) ? element2 : element2.parentNode;
    if (parentNode && parentNode.classList.contains("e-input-in-wrap")) {
      parentNode = parentNode.parentNode;
    }
    return parentNode;
  }
  function createClearButton(element2, inputObject2, initial, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var button = makeElement("span", { className: CLASSNAMES.CLEARICON });
    var container = inputObject2.container;
    if (!isNullOrUndefined(initial)) {
      container.appendChild(button);
    } else {
      var baseElement = inputObject2.container.classList.contains(CLASSNAMES.FLOATINPUT) ? inputObject2.container.querySelector("." + CLASSNAMES.FLOATTEXT) : element2;
      baseElement.insertAdjacentElement("afterend", button);
    }
    addClass([button], CLASSNAMES.CLEARICONHIDE);
    wireClearBtnEvents(element2, button);
    button.setAttribute("aria-label", "close");
    return button;
  }
  function clickHandler(event, element2, button) {
    if (!(element2.classList.contains(CLASSNAMES.DISABLE) || element2.readOnly)) {
      event.preventDefault();
      if (element2 !== document.activeElement) {
        element2.focus();
      }
      element2.value = "";
      addClass([button], CLASSNAMES.CLEARICONHIDE);
    }
  }
  function inputHandler(element2, button) {
    updateIconState(element2.value, button);
  }
  function focusHandler(element2, button) {
    updateIconState(element2.value, button, element2.readOnly);
  }
  function blurHandler(element2, button) {
    setTimeout(function() {
      if (!isNullOrUndefined(button)) {
        addClass([button], CLASSNAMES.CLEARICONHIDE);
        button = !isNullOrUndefined(element2) && element2.classList.contains("e-combobox") ? null : button;
      }
    }, 200);
  }
  function wireClearBtnEvents(element2, button, container) {
    if (isBindClearAction === void 0 || isBindClearAction) {
      var clickHandlerEvent = function(e) {
        return clickHandler(e, element2, button);
      };
      button.addEventListener("click", clickHandlerEvent);
      element2.__eventHandlers["clearClickHandler"] = { clickHandlerEvent };
    }
    var inputHandlerEvent = function() {
      return inputHandler(element2, button);
    };
    var focusHandlerEvent = function() {
      return focusHandler(element2, button);
    };
    var blurHandlerEvent = function() {
      return blurHandler(element2, button);
    };
    element2.addEventListener("input", inputHandlerEvent);
    element2.addEventListener("focus", focusHandlerEvent);
    element2.addEventListener("blur", blurHandlerEvent);
    element2.__eventHandlers["clearInputHandler"] = { inputHandlerEvent };
    element2.__eventHandlers["clearFocusHandler"] = { focusHandlerEvent };
    element2.__eventHandlers["clearBlurHandler"] = { blurHandlerEvent };
  }
  Input2.wireClearBtnEvents = wireClearBtnEvents;
  function unWireClearBtnEvents(element2, button) {
    if (!isNullOrUndefined(element2) && !isNullOrUndefined(element2.__eventHandlers)) {
      if (!isNullOrUndefined(element2.__eventHandlers["clearClickHandler"])) {
        var clickHandlerEvent = element2.__eventHandlers["clearClickHandler"].clickHandlerEvent;
        if (isBindClearAction === void 0 || isBindClearAction) {
          if (!isNullOrUndefined(button)) {
            button.removeEventListener("click", clickHandlerEvent);
          }
        }
        delete element2.__eventHandlers["clearClickHandler"];
      }
      if (!isNullOrUndefined(element2.__eventHandlers["clearInputHandler"]) && !isNullOrUndefined(element2.__eventHandlers["clearFocusHandler"]) && !isNullOrUndefined(element2.__eventHandlers["clearBlurHandler"])) {
        var inputHandlerEvent = element2.__eventHandlers["clearInputHandler"].inputHandlerEvent;
        var focusHandlerEvent = element2.__eventHandlers["clearFocusHandler"].focusHandlerEvent;
        var blurHandlerEvent = element2.__eventHandlers["clearBlurHandler"].blurHandlerEvent;
        element2.removeEventListener("input", inputHandlerEvent);
        element2.removeEventListener("focus", focusHandlerEvent);
        element2.removeEventListener("blur", blurHandlerEvent);
        delete element2.__eventHandlers["clearInputHandler"];
        delete element2.__eventHandlers["clearFocusHandler"];
        delete element2.__eventHandlers["clearBlurHandler"];
      }
    }
  }
  function destroy2(args, button) {
    if (button === void 0) {
      button = null;
    }
    unbindInitialEvent(args);
    if (args.floatLabelType === "Auto") {
      unWireFloatLabelEvents(args);
    }
    if (args.properties.showClearButton) {
      unWireClearBtnEvents(args.element, button);
    }
    if (!isNullOrUndefined(args.buttons)) {
      _internalRipple(false, null, args.buttons);
    }
    unwireFloatingEvents(args.element);
    if (!isNullOrUndefined(args.element)) {
      delete args.element.__eventHandlers;
      if (args.element.classList.contains(CLASSNAMES.INPUT)) {
        args.element.classList.remove(CLASSNAMES.INPUT);
      }
    }
  }
  Input2.destroy = destroy2;
  function validateLabel(element2, floatLabelType) {
    var parent = getParentNode(element2);
    if (parent.classList.contains(CLASSNAMES.FLOATINPUT) && floatLabelType === "Auto") {
      var label = getParentNode(element2).getElementsByClassName("e-float-text")[0];
      updateLabelState(element2.value, label, element2);
    }
  }
  function createInputContainer(args, className, tagClass, tag, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var container;
    if (!isNullOrUndefined(args.customTag)) {
      container = makeElement(args.customTag, { className });
      container.classList.add(tagClass);
    } else {
      container = makeElement(tag, { className });
    }
    container.classList.add("e-control-wrapper");
    return container;
  }
  function encodePlaceHolder(placeholder) {
    var result = "";
    if (!isNullOrUndefined(placeholder) && placeholder !== "") {
      var spanEle = document.createElement("span");
      spanEle.innerHTML = '<input  placeholder="' + placeholder + '"/>';
      var hiddenInput = spanEle.children[0];
      result = hiddenInput.placeholder;
    }
    return result;
  }
  function setValue2(value, element2, floatLabelType, clearButton) {
    element2.value = value;
    if (floatLabelType !== "Never") {
      calculateWidth(element2, element2.parentElement);
    }
    if (!isNullOrUndefined(floatLabelType) && floatLabelType === "Auto") {
      validateLabel(element2, floatLabelType);
    }
    if (!isNullOrUndefined(clearButton) && clearButton) {
      var parentElement = getParentNode(element2);
      if (!isNullOrUndefined(parentElement)) {
        var button = parentElement.getElementsByClassName(CLASSNAMES.CLEARICON)[0];
        if (!isNullOrUndefined(button)) {
          if (element2.value && !isNullOrUndefined(parentElement) && parentElement.classList.contains("e-input-focus")) {
            removeClass([button], CLASSNAMES.CLEARICONHIDE);
          } else {
            addClass([button], CLASSNAMES.CLEARICONHIDE);
          }
        }
      }
    }
    checkInputValue(floatLabelType, element2);
  }
  Input2.setValue = setValue2;
  function setCssClass(cssClass2, elements, oldClass) {
    if (!isNullOrUndefined(oldClass) && oldClass !== "") {
      removeClass(elements, oldClass.split(" "));
    }
    if (!isNullOrUndefined(cssClass2) && cssClass2 !== "") {
      addClass(elements, cssClass2.split(" "));
    }
  }
  Input2.setCssClass = setCssClass;
  function calculateWidth(element2, container, moduleName) {
    if (moduleName !== "multiselect" && !_isElementVisible(element2)) {
      return;
    }
    var elementWidth = moduleName === "multiselect" ? element2 : element2.clientWidth - parseInt(getComputedStyle(element2, null).getPropertyValue("padding-left"), 10);
    if (!isNullOrUndefined(container) && !isNullOrUndefined(container.getElementsByClassName("e-float-text-content")[0])) {
      if (container.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")) {
        container.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow");
      }
      if (elementWidth < container.getElementsByClassName("e-float-text-content")[0].clientWidth || elementWidth === container.getElementsByClassName("e-float-text-content")[0].clientWidth) {
        container.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow");
      }
    }
  }
  Input2.calculateWidth = calculateWidth;
  function setWidth2(width, container) {
    if (typeof width === "number") {
      container.style.width = formatUnit(width);
    } else if (typeof width === "string") {
      container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);
    }
    calculateWidth(container.firstChild, container);
  }
  Input2.setWidth = setWidth2;
  function setPlaceholder(placeholder, element2) {
    placeholder = encodePlaceHolder(placeholder);
    var parentElement = getParentNode(element2);
    if (parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {
      if (!isNullOrUndefined(placeholder) && placeholder !== "") {
        var floatTextContent = parentElement.getElementsByClassName("e-float-text-content")[0];
        if (floatTextContent && floatTextContent.children[0]) {
          floatTextContent.children[0].textContent = placeholder;
        } else {
          parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = placeholder;
        }
        parentElement.classList.remove(CLASSNAMES.NOFLOATLABEL);
        element2.removeAttribute("placeholder");
      } else {
        parentElement.classList.add(CLASSNAMES.NOFLOATLABEL);
        var floatTextContent = parentElement.getElementsByClassName("e-float-text-content")[0];
        if (floatTextContent) {
          floatTextContent.children[0].textContent = "";
        } else {
          parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = "";
        }
      }
    } else {
      if (!isNullOrUndefined(placeholder) && placeholder !== "") {
        attributes(element2, { "placeholder": placeholder });
      } else {
        element2.removeAttribute("placeholder");
      }
    }
  }
  Input2.setPlaceholder = setPlaceholder;
  function setReadonly(isReadonly, element2, floatLabelType) {
    if (isReadonly) {
      attributes(element2, { readonly: "" });
    } else {
      element2.removeAttribute("readonly");
    }
    if (!isNullOrUndefined(floatLabelType)) {
      validateLabel(element2, floatLabelType);
    }
  }
  Input2.setReadonly = setReadonly;
  function setEnableRtl(isRtl, elements) {
    if (isRtl) {
      addClass(elements, CLASSNAMES.RTL);
    } else {
      removeClass(elements, CLASSNAMES.RTL);
    }
  }
  Input2.setEnableRtl = setEnableRtl;
  function setEnabled(isEnable, element2, floatLabelType, inputContainer) {
    var disabledAttrs = { "disabled": "", "aria-disabled": "true" };
    var considerWrapper = isNullOrUndefined(inputContainer) ? false : true;
    if (isEnable) {
      element2.classList.remove(CLASSNAMES.DISABLE);
      removeAttributes(disabledAttrs, element2);
      if (considerWrapper) {
        removeClass([inputContainer], CLASSNAMES.DISABLE);
      }
    } else {
      element2.classList.add(CLASSNAMES.DISABLE);
      addAttributes(disabledAttrs, element2);
      if (considerWrapper) {
        addClass([inputContainer], CLASSNAMES.DISABLE);
      }
    }
    if (!isNullOrUndefined(floatLabelType)) {
      validateLabel(element2, floatLabelType);
    }
  }
  Input2.setEnabled = setEnabled;
  function setClearButton(isClear, element2, inputObject2, initial, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    if (isClear) {
      inputObject2.clearButton = createClearButton(element2, inputObject2, initial, makeElement);
    } else {
      remove(inputObject2.clearButton);
      inputObject2.clearButton = null;
    }
  }
  Input2.setClearButton = setClearButton;
  function removeAttributes(attrs, element2) {
    for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {
      var key = _a[_i];
      var parentElement = getParentNode(element2);
      if (key === "disabled") {
        element2.classList.remove(CLASSNAMES.DISABLE);
      }
      if (key === "disabled" && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {
        parentElement.classList.remove(CLASSNAMES.DISABLE);
      }
      if (key === "placeholder" && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {
        parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = "";
      } else {
        element2.removeAttribute(key);
      }
    }
  }
  Input2.removeAttributes = removeAttributes;
  function addAttributes(attrs, element2) {
    for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {
      var key = _a[_i];
      var parentElement = getParentNode(element2);
      if (key === "disabled") {
        element2.classList.add(CLASSNAMES.DISABLE);
      }
      if (key === "disabled" && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {
        parentElement.classList.add(CLASSNAMES.DISABLE);
      }
      if (key === "placeholder" && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {
        parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = attrs["" + key];
      } else {
        element2.setAttribute(key, attrs["" + key]);
      }
    }
  }
  Input2.addAttributes = addAttributes;
  function removeFloating(input) {
    var container = input.container;
    if (!isNullOrUndefined(container) && container.classList.contains(CLASSNAMES.FLOATINPUT)) {
      var inputEle = container.querySelector("textarea") ? container.querySelector("textarea") : container.querySelector("input");
      var placeholder = container.querySelector("." + CLASSNAMES.FLOATTEXT).textContent;
      var clearButton = container.querySelector(".e-clear-icon") !== null;
      detach(container.querySelector("." + CLASSNAMES.FLOATLINE));
      detach(container.querySelector("." + CLASSNAMES.FLOATTEXT));
      classList(container, [CLASSNAMES.INPUTGROUP], [CLASSNAMES.FLOATINPUT]);
      unwireFloatingEvents(inputEle);
      attributes(inputEle, { "placeholder": placeholder });
      inputEle.classList.add(CLASSNAMES.INPUT);
      if (!clearButton && inputEle.tagName === "INPUT") {
        inputEle.removeAttribute("required");
      }
    }
  }
  Input2.removeFloating = removeFloating;
  function addFloating(input, type, placeholder, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var container = closest(input, "." + CLASSNAMES.INPUTGROUP);
    var customTag = container.tagName;
    customTag = customTag !== "DIV" && customTag !== "SPAN" ? customTag : null;
    var args = {
      element: input,
      floatLabelType: type,
      customTag,
      properties: { placeholder }
    };
    if (type !== "Never") {
      var iconEle = container.querySelector(".e-clear-icon");
      var inputObj = { container };
      input.classList.remove(CLASSNAMES.INPUT);
      createFloatingInput(args, inputObj, makeElement);
      createSpanElement(inputObj.container, makeElement);
      calculateWidth(args.element, inputObj.container);
      var isPrependIcon = container.classList.contains("e-float-icon-left");
      if (isNullOrUndefined(iconEle)) {
        if (isPrependIcon) {
          var inputWrap = container.querySelector(".e-input-in-wrap");
          iconEle = inputWrap.querySelector(".e-input-group-icon");
        } else {
          iconEle = container.querySelector(".e-input-group-icon");
        }
      }
      if (isNullOrUndefined(iconEle)) {
        if (isPrependIcon) {
          iconEle = container.querySelector(".e-input-group-icon");
        }
      } else {
        var floatLine = container.querySelector("." + CLASSNAMES.FLOATLINE);
        var floatText = container.querySelector("." + CLASSNAMES.FLOATTEXT);
        var wrapper = isPrependIcon ? container.querySelector(".e-input-in-wrap") : container;
        wrapper.insertBefore(input, iconEle);
        wrapper.insertBefore(floatLine, iconEle);
        wrapper.insertBefore(floatText, iconEle);
      }
    } else {
      unWireFloatLabelEvents(args);
    }
    checkFloatLabelType(type, input.parentElement);
  }
  Input2.addFloating = addFloating;
  function createSpanElement(inputObject2, makeElement) {
    if (inputObject2.classList.contains("e-outline") && inputObject2.getElementsByClassName("e-float-text")[0]) {
      var labelSpanElement = makeElement("span", { className: CLASSNAMES.FLOATTEXTCONTENT });
      labelSpanElement.innerHTML = inputObject2.getElementsByClassName("e-float-text")[0].innerHTML;
      inputObject2.getElementsByClassName("e-float-text")[0].innerHTML = "";
      inputObject2.getElementsByClassName("e-float-text")[0].appendChild(labelSpanElement);
    }
  }
  Input2.createSpanElement = createSpanElement;
  function setRipple(isRipple, inputObj) {
    for (var i = 0; i < inputObj.length; i++) {
      _internalRipple(isRipple, inputObj[parseInt(i.toString(), 10)].container);
    }
  }
  Input2.setRipple = setRipple;
  function _internalRipple(isRipple, container, button) {
    var argsButton = [];
    argsButton.push(button);
    var buttons = isNullOrUndefined(button) ? container.querySelectorAll(".e-input-group-icon") : argsButton;
    if (isRipple && buttons.length > 0) {
      for (var index = 0; index < buttons.length; index++) {
        buttons[parseInt(index.toString(), 10)].addEventListener("mousedown", _onMouseDownRipple, false);
        buttons[parseInt(index.toString(), 10)].addEventListener("mouseup", _onMouseUpRipple, false);
      }
    } else if (buttons.length > 0) {
      for (var index = 0; index < buttons.length; index++) {
        buttons[parseInt(index.toString(), 10)].removeEventListener("mousedown", _onMouseDownRipple, this);
        buttons[parseInt(index.toString(), 10)].removeEventListener("mouseup", _onMouseUpRipple, this);
      }
    }
  }
  function _onMouseRipple(container, button) {
    if (!container.classList.contains("e-disabled") && !container.querySelector("input").readOnly) {
      button.classList.add("e-input-btn-ripple");
    }
  }
  function _isElementVisible(element2) {
    if (!element2) {
      return false;
    }
    var currentElement = element2;
    while (currentElement && currentElement !== document.body) {
      var style = window.getComputedStyle(currentElement);
      if (style.display === "none") {
        return false;
      }
      currentElement = currentElement.parentElement;
    }
    return true;
  }
  function _onMouseDownRipple() {
    var ele = this;
    var parentEle = this.parentElement;
    while (!parentEle.classList.contains("e-input-group")) {
      parentEle = parentEle.parentElement;
    }
    _onMouseRipple(parentEle, ele);
  }
  function _onMouseUpRipple() {
    var ele = this;
    setTimeout(function() {
      ele.classList.remove("e-input-btn-ripple");
    }, 500);
  }
  function createIconEle(iconClass, makeElement) {
    var button = makeElement("span", { className: iconClass });
    button.classList.add("e-input-group-icon");
    return button;
  }
  function addIcon(position, icons, container, input, internalCreate) {
    var result = typeof icons === "string" ? icons.split(",") : icons;
    if (position.toLowerCase() === "append") {
      for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {
        var icon = result_1[_i];
        appendSpan(icon, container, internalCreate);
      }
    } else {
      for (var _a = 0, result_2 = result; _a < result_2.length; _a++) {
        var icon = result_2[_a];
        prependSpan(icon, container, input, internalCreate);
      }
    }
    if (container.getElementsByClassName("e-input-group-icon")[0] && container.getElementsByClassName("e-float-text-overflow")[0]) {
      container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
    }
  }
  Input2.addIcon = addIcon;
  function prependSpan(iconClass, container, inputElement, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var button = createIconEle(iconClass, makeElement);
    container.classList.add("e-float-icon-left");
    var innerWrapper = container.querySelector(".e-input-in-wrap");
    if (isNullOrUndefined(innerWrapper)) {
      innerWrapper = makeElement("span", { className: "e-input-in-wrap" });
      inputElement.parentNode.insertBefore(innerWrapper, inputElement);
      var result = container.querySelectorAll(inputElement.tagName + " ~ *");
      innerWrapper.appendChild(inputElement);
      for (var i = 0; i < result.length; i++) {
        var element2 = result[parseInt(i.toString(), 10)];
        var parentElement = innerWrapper.parentElement;
        if (!element2.classList.contains("e-float-line") || !(parentElement && parentElement.classList.contains("e-filled")) && parentElement) {
          innerWrapper.appendChild(element2);
        }
      }
    }
    innerWrapper.parentNode.insertBefore(button, innerWrapper);
    _internalRipple(true, container, button);
    return button;
  }
  Input2.prependSpan = prependSpan;
  function appendSpan(iconClass, container, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var button = createIconEle(iconClass, makeElement);
    var wrap2 = container.classList.contains("e-float-icon-left") ? container.querySelector(".e-input-in-wrap") : container;
    wrap2.appendChild(button);
    _internalRipple(true, container, button);
    return button;
  }
  Input2.appendSpan = appendSpan;
  function validateInputType(containerElement2, input) {
    if (input.type === "hidden") {
      containerElement2.classList.add("e-hidden");
    } else if (containerElement2.classList.contains("e-hidden")) {
      containerElement2.classList.remove("e-hidden");
    }
  }
  Input2.validateInputType = validateInputType;
  function updateHTMLAttributesToElement(htmlAttributes, element2) {
    if (!isNullOrUndefined(htmlAttributes)) {
      for (var _i = 0, _a = Object.keys(htmlAttributes); _i < _a.length; _i++) {
        var key = _a[_i];
        if (containerAttributes.indexOf(key) < 0) {
          element2.setAttribute(key, htmlAttributes["" + key]);
        }
      }
    }
  }
  Input2.updateHTMLAttributesToElement = updateHTMLAttributesToElement;
  function updateCssClass(newClass, oldClass, container) {
    setCssClass(getInputValidClassList(newClass), [container], getInputValidClassList(oldClass));
  }
  Input2.updateCssClass = updateCssClass;
  function getInputValidClassList(inputClassName) {
    var result = inputClassName;
    if (!isNullOrUndefined(inputClassName) && inputClassName !== "") {
      result = inputClassName.replace(/\s+/g, " ").trim();
    }
    return result;
  }
  Input2.getInputValidClassList = getInputValidClassList;
  function updateHTMLAttributesToWrapper(htmlAttributes, container) {
    if (!isNullOrUndefined(htmlAttributes)) {
      for (var _i = 0, _a = Object.keys(htmlAttributes); _i < _a.length; _i++) {
        var key = _a[_i];
        if (containerAttributes.indexOf(key) > -1) {
          if (key === "class") {
            var updatedClassValues = this.getInputValidClassList(htmlAttributes["" + key]);
            if (updatedClassValues !== "") {
              addClass([container], updatedClassValues.split(" "));
            }
          } else if (key === "style") {
            var setStyle = container.getAttribute(key);
            setStyle = !isNullOrUndefined(setStyle) ? setStyle + htmlAttributes["" + key] : htmlAttributes["" + key];
            container.setAttribute(key, setStyle);
          } else {
            container.setAttribute(key, htmlAttributes["" + key]);
          }
        }
      }
    }
  }
  Input2.updateHTMLAttributesToWrapper = updateHTMLAttributesToWrapper;
  function isBlank(inputString) {
    return !inputString || /^\s*$/.test(inputString);
  }
  Input2.isBlank = isBlank;
})(Input || (Input = {}));
var __extends$p = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$9 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CONTROL = "e-control";
var ROOT = "e-sidebar";
var DOCKER = "e-dock";
var CLOSE = "e-close";
var OPEN = "e-open";
var TRASITION = "e-transition";
var DEFAULTBACKDROP = "e-sidebar-overlay";
var RTL = "e-rtl";
var RIGHT = "e-right";
var LEFT = "e-left";
var OVER = "e-over";
var PUSH = "e-push";
var SLIDE = "e-slide";
var VISIBILITY = "e-visibility";
var DISPLAY = "e-sidebar-display";
var MAINCONTENTANIMATION = "e-content-animation";
var DISABLEANIMATION = "e-disable-animation";
var CONTEXT = "e-sidebar-context";
var SIDEBARABSOLUTE = "e-sidebar-absolute";
var Sidebar = (
  /** @class */
  function(_super) {
    __extends$p(Sidebar2, _super);
    function Sidebar2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.documentClickContext = _this.documentclickHandler.bind(_this);
      return _this;
    }
    Sidebar2.prototype.preRender = function() {
      this.setWidth();
    };
    Sidebar2.prototype.render = function() {
      this.initialize();
      this.wireEvents();
      this.renderComplete();
    };
    Sidebar2.prototype.initialize = function() {
      this.setTarget();
      this.addClass();
      this.setZindex();
      if (this.enableDock) {
        this.setDock();
      }
      if (this.isOpen) {
        this.show();
        this.firstRender = true;
      } else {
        this.setMediaQuery();
      }
      this.checkType(true);
      this.setType(this.type);
      this.setCloseOnDocumentClick();
      this.setEnableRTL();
      if (Browser.isDevice) {
        this.windowWidth = window.innerWidth;
      }
    };
    Sidebar2.prototype.setEnableRTL = function() {
      (this.enableRtl ? addClass : removeClass)([this.element], RTL);
    };
    Sidebar2.prototype.setTarget = function() {
      this.targetEle = this.element.nextElementSibling;
      this.sidebarEleCopy = this.element.cloneNode(true);
      if (typeof this.target === "string") {
        this.setProperties({ target: document.querySelector(this.target) }, true);
      }
      if (this.target) {
        this.target.insertBefore(this.element, this.target.children[0]);
        addClass([this.element], SIDEBARABSOLUTE);
        addClass([this.target], CONTEXT);
        this.targetEle = this.getTargetElement();
      }
    };
    Sidebar2.prototype.getTargetElement = function() {
      var siblingElement = this.element.nextElementSibling;
      while (!isNullOrUndefined(siblingElement)) {
        if (!siblingElement.classList.contains(ROOT)) {
          break;
        }
        siblingElement = siblingElement.nextElementSibling;
      }
      return siblingElement;
    };
    Sidebar2.prototype.setCloseOnDocumentClick = function() {
      if (this.closeOnDocumentClick) {
        document.addEventListener("mousedown", this.documentClickContext);
        document.addEventListener("touchstart", this.documentClickContext);
      } else {
        document.removeEventListener("mousedown", this.documentClickContext);
        document.removeEventListener("touchstart", this.documentClickContext);
      }
    };
    Sidebar2.prototype.setWidth = function() {
      if (this.enableDock && this.position === "Left") {
        setStyleAttribute(this.element, { "width": this.setDimension(this.dockSize) });
      } else if (this.enableDock && this.position === "Right") {
        setStyleAttribute(this.element, { "width": this.setDimension(this.dockSize) });
      } else if (!this.enableDock) {
        setStyleAttribute(this.element, { "width": this.setDimension(this.width) });
      }
    };
    Sidebar2.prototype.setDimension = function(width) {
      if (typeof width === "number") {
        width = formatUnit(width);
      } else if (typeof width === "string") {
        width = width.match(/px|%|em/) ? width : formatUnit(width);
      } else {
        width = "100%";
      }
      return width;
    };
    Sidebar2.prototype.setZindex = function() {
      setStyleAttribute(this.element, { "z-index": "" + this.zIndex });
    };
    Sidebar2.prototype.addClass = function() {
      if (this.element.tagName === "EJS-SIDEBAR") {
        addClass([this.element], DISPLAY);
      }
      var classELement = document.querySelector(".e-main-content");
      if (!isNullOrUndefined(classELement || this.targetEle)) {
        addClass([classELement || this.targetEle], [MAINCONTENTANIMATION]);
      }
      this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : null;
      if (!this.enableDock && this.type !== "Auto") {
        addClass([this.element], [VISIBILITY]);
      }
      removeClass([this.element], [OPEN, CLOSE, RIGHT, LEFT, SLIDE, PUSH, OVER]);
      this.element.classList.add(ROOT);
      addClass([this.element], this.position === "Right" ? RIGHT : LEFT);
      if (this.enableDock) {
        addClass([this.element], DOCKER);
      }
      if (!isNullOrUndefined(this.tabIndex)) {
        this.element.setAttribute("tabindex", this.tabIndex);
      }
      if (this.type === "Auto" && !Browser.isDevice && this.checkMediaQuery()) {
        this.show();
      } else if (!this.isOpen) {
        addClass([this.element], [CLOSE, DISABLEANIMATION]);
      }
    };
    Sidebar2.prototype.checkType = function(val) {
      if (!(this.type === "Push" || this.type === "Over" || this.type === "Slide")) {
        this.type = "Auto";
      } else {
        if (!this.element.classList.contains(CLOSE) && !val) {
          this.hide();
        }
      }
    };
    Sidebar2.prototype.transitionEnd = function(e) {
      this.setDock();
      if (!isNullOrUndefined(e) && !this.firstRender) {
        this.triggerChange();
      }
      this.firstRender = false;
      EventHandler.remove(this.element, "transitionend", this.transitionEnd);
    };
    Sidebar2.prototype.destroyBackDrop = function() {
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      if (this.target && this.showBackdrop && sibling && !isNullOrUndefined(this.defaultBackdropDiv)) {
        removeClass([this.defaultBackdropDiv], DEFAULTBACKDROP);
      } else if (this.showBackdrop && this.modal) {
        this.modal.style.display = "none";
        this.modal.outerHTML = "";
        this.modal = null;
      }
    };
    Sidebar2.prototype.hide = function(e) {
      var _this = this;
      var closeArguments = {
        model: this,
        element: this.element,
        cancel: false,
        isInteracted: !isNullOrUndefined(e),
        event: e || null
      };
      this.trigger("close", closeArguments, function(observedcloseArgs) {
        if (!observedcloseArgs.cancel) {
          if (_this.element.classList.contains(CLOSE)) {
            return;
          }
          if (_this.element.classList.contains(OPEN) && !_this.animate) {
            _this.triggerChange();
          }
          addClass([_this.element], CLOSE);
          removeClass([_this.element], OPEN);
          setStyleAttribute(_this.element, { "width": formatUnit(_this.enableDock ? _this.dockSize : _this.width) });
          _this.setType(_this.type);
          var sibling = document.querySelector(".e-main-content") || _this.targetEle;
          if (!_this.enableDock && sibling) {
            sibling.style.transform = "translateX(0px)";
            sibling.style[_this.position === "Left" ? "marginLeft" : "marginRight"] = "0px";
          }
          _this.destroyBackDrop();
          _this.setAnimation();
          if (_this.type === "Slide") {
            document.body.classList.remove("e-sidebar-overflow");
          }
          _this.setProperties({ isOpen: false }, true);
          if (_this.enableDock) {
            setTimeout(function() {
              return _this.setTimeOut();
            }, 50);
          }
          EventHandler.add(_this.element, "transitionend", _this.transitionEnd, _this);
        }
      });
    };
    Sidebar2.prototype.setTimeOut = function() {
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      var elementWidth = this.element.getBoundingClientRect().width;
      if (this.element.classList.contains(OPEN) && sibling && !(this.type === "Over" && this.enableDock)) {
        if (this.position === "Left") {
          sibling.style.marginLeft = this.setDimension(this.width === "auto" ? elementWidth : this.width);
        } else {
          sibling.style.marginRight = this.setDimension(this.width === "auto" ? elementWidth : this.width);
        }
      } else if (this.element.classList.contains(CLOSE) && sibling) {
        if (this.position === "Left") {
          sibling.style.marginLeft = this.setDimension(this.dockSize === "auto" ? elementWidth : this.dockSize);
        } else {
          sibling.style.marginRight = this.setDimension(this.dockSize === "auto" ? elementWidth : this.dockSize);
        }
      }
    };
    Sidebar2.prototype.show = function(e) {
      var _this = this;
      var openArguments = {
        model: this,
        element: this.element,
        cancel: false,
        isInteracted: !isNullOrUndefined(e),
        event: e || null
      };
      this.trigger("open", openArguments, function(observedopenArgs) {
        if (!observedopenArgs.cancel) {
          removeClass([_this.element], [VISIBILITY, DISABLEANIMATION]);
          if (_this.element.classList.contains(OPEN)) {
            return;
          }
          if (_this.element.classList.contains(CLOSE) && !_this.animate) {
            _this.triggerChange();
          }
          addClass([_this.element], [OPEN, TRASITION]);
          setStyleAttribute(_this.element, { "transform": "" });
          removeClass([_this.element], CLOSE);
          setStyleAttribute(_this.element, { "width": formatUnit(_this.width) });
          _this.setType(_this.type);
          _this.createBackDrop();
          _this.setAnimation();
          if (_this.type === "Slide") {
            document.body.classList.add("e-sidebar-overflow");
          }
          _this.setProperties({ isOpen: true }, true);
          EventHandler.add(_this.element, "transitionend", _this.transitionEnd, _this);
        }
      });
    };
    Sidebar2.prototype.setAnimation = function() {
      if (this.animate) {
        removeClass([this.element], DISABLEANIMATION);
      } else {
        addClass([this.element], DISABLEANIMATION);
      }
    };
    Sidebar2.prototype.triggerChange = function() {
      var changeArguments = { name: "change", element: this.element };
      this.trigger("change", changeArguments);
    };
    Sidebar2.prototype.setDock = function() {
      if (this.enableDock && this.position === "Left" && !this.getState()) {
        setStyleAttribute(this.element, { "transform": "translateX(-100%) translateX(" + this.setDimension(this.dockSize) + ")" });
      } else if (this.enableDock && this.position === "Right" && !this.getState()) {
        setStyleAttribute(this.element, { "transform": "translateX(100%) translateX(-" + this.setDimension(this.dockSize) + ")" });
      }
      if (this.element.classList.contains(CLOSE) && this.enableDock) {
        setStyleAttribute(this.element, { "width": this.setDimension(this.dockSize) });
      }
    };
    Sidebar2.prototype.createBackDrop = function() {
      if (this.target && this.showBackdrop && this.getState()) {
        var targetString = this.target;
        var sibling = document.querySelector(".e-main-content") || this.targetEle;
        this.defaultBackdropDiv = this.createElement("div");
        addClass([this.defaultBackdropDiv], DEFAULTBACKDROP);
        setStyleAttribute(this.defaultBackdropDiv, { height: targetString.style.height });
        sibling.appendChild(this.defaultBackdropDiv);
      } else if (this.showBackdrop && !this.modal && this.getState()) {
        this.modal = this.createElement("div");
        this.modal.className = DEFAULTBACKDROP;
        this.modal.style.display = "block";
        document.body.appendChild(this.modal);
      }
    };
    Sidebar2.prototype.getPersistData = function() {
      return this.addOnPersist(["type", "position", "isOpen"]);
    };
    Sidebar2.prototype.getModuleName = function() {
      return "sidebar";
    };
    Sidebar2.prototype.toggle = function() {
      if (this.element.classList.contains(OPEN)) {
        this.hide();
      } else {
        this.show();
      }
    };
    Sidebar2.prototype.getState = function() {
      return this.element.classList.contains(OPEN) ? true : false;
    };
    Sidebar2.prototype.setMediaQuery = function() {
      if (this.mediaQuery) {
        var media = false;
        if (typeof this.mediaQuery === "string") {
          media = window.matchMedia(this.mediaQuery).matches;
        } else {
          media = this.mediaQuery.matches;
        }
        if (media && this.windowWidth !== window.innerWidth) {
          this.show();
        } else if (this.getState() && this.windowWidth !== window.innerWidth) {
          this.hide();
        }
      }
    };
    Sidebar2.prototype.checkMediaQuery = function() {
      if (isNullOrUndefined(this.mediaQuery)) {
        return true;
      }
      return typeof this.mediaQuery === "string" ? window.matchMedia(this.mediaQuery).matches : this.mediaQuery.matches;
    };
    Sidebar2.prototype.resize = function() {
      if (!isNullOrUndefined(this.width) && this.width !== "auto" && typeof this.width === "string" && !this.width.includes("px")) {
        this.setType(this.type);
      }
      if (this.type === "Auto") {
        if (Browser.isDevice) {
          addClass([this.element], OVER);
        } else {
          addClass([this.element], PUSH);
        }
      }
      this.setMediaQuery();
      if (Browser.isDevice) {
        this.windowWidth = window.innerWidth;
      }
    };
    Sidebar2.prototype.documentclickHandler = function(e) {
      if (closest(e.target, "." + CONTROL + "." + ROOT)) {
        return;
      }
      this.hide(e);
    };
    Sidebar2.prototype.enableGestureHandler = function(args) {
      if (!this.isOpen && this.position === "Left" && args.swipeDirection === "Right" && (args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {
        this.show();
      } else if (this.isOpen && this.position === "Left" && args.swipeDirection === "Left") {
        this.hide(args.originalEvent);
      } else if (this.isOpen && this.position === "Right" && args.swipeDirection === "Right") {
        this.hide(args.originalEvent);
      } else if (!this.isOpen && this.position === "Right" && args.swipeDirection === "Left" && (window.innerWidth - args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {
        this.show();
      }
    };
    Sidebar2.prototype.setEnableGestures = function() {
      if (this.enableGestures) {
        this.mainContentEle = new Touch(document.body, { swipe: this.enableGestureHandler.bind(this) });
        this.sidebarEle = new Touch(this.element, { swipe: this.enableGestureHandler.bind(this) });
      } else {
        if (this.mainContentEle && this.sidebarEle) {
          this.mainContentEle.destroy();
          this.sidebarEle.destroy();
        }
      }
    };
    Sidebar2.prototype.wireEvents = function() {
      this.setEnableGestures();
      EventHandler.add(window, "resize", this.resize, this);
    };
    Sidebar2.prototype.unWireEvents = function() {
      EventHandler.remove(window, "resize", this.resize);
      EventHandler.remove(document, "mousedown touchstart", this.documentclickHandler);
      if (this.mainContentEle) {
        this.mainContentEle.destroy();
      }
      if (this.sidebarEle) {
        this.sidebarEle.destroy();
      }
    };
    Sidebar2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      var isRendered = this.isServerRendered;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "isOpen":
            if (this.isOpen) {
              this.show();
            } else {
              this.hide();
            }
            break;
          case "width":
            this.setWidth();
            if (!this.getState()) {
              this.setDock();
            }
            break;
          case "animate":
            this.setAnimation();
            break;
          case "type":
            this.checkType(false);
            removeClass([this.element], [VISIBILITY]);
            this.addClass();
            addClass([this.element], this.type === "Auto" ? Browser.isDevice ? ["e-over"] : ["e-push"] : ["e-" + this.type.toLowerCase()]);
            break;
          case "position":
            this.element.style.transform = "";
            this.setDock();
            if (sibling) {
              sibling.style[this.position === "Left" ? "marginRight" : "marginLeft"] = "0px";
            }
            if (this.position === "Right") {
              removeClass([this.element], LEFT);
              addClass([this.element], RIGHT);
            } else {
              removeClass([this.element], RIGHT);
              addClass([this.element], LEFT);
            }
            this.setType(this.type);
            break;
          case "showBackdrop":
            if (this.showBackdrop) {
              this.createBackDrop();
            } else {
              if (this.modal) {
                this.modal.style.display = "none";
                this.modal.outerHTML = "";
                this.modal = null;
              }
            }
            break;
          case "target":
            if (typeof this.target === "string") {
              this.setProperties({ target: document.querySelector(this.target) }, true);
            }
            if (isNullOrUndefined(this.target)) {
              removeClass([this.element], SIDEBARABSOLUTE);
              removeClass([oldProp.target], CONTEXT);
              setStyleAttribute(sibling, { "margin-left": 0, "margin-right": 0 });
              document.body.insertAdjacentElement("afterbegin", this.element);
            }
            this.isServerRendered = false;
            _super.prototype.refresh.call(this);
            this.isServerRendered = isRendered;
            break;
          case "closeOnDocumentClick":
            this.setCloseOnDocumentClick();
            break;
          case "enableDock":
            if (!this.getState()) {
              this.setDock();
            }
            break;
          case "zIndex":
            this.setZindex();
            break;
          case "mediaQuery":
            this.setMediaQuery();
            break;
          case "enableGestures":
            this.setEnableGestures();
            break;
          case "enableRtl":
            this.setEnableRTL();
            break;
        }
      }
    };
    Sidebar2.prototype.setType = function(type) {
      var elementWidth = this.element.getBoundingClientRect().width;
      this.setZindex();
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      if (sibling) {
        sibling.style.transform = "translateX(0px)";
        if (!Browser.isDevice && this.type !== "Auto" && !(this.type === "Over" && this.enableDock)) {
          sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = "0px";
        }
      }
      var margin = this.position === "Left" ? elementWidth + "px" : elementWidth + "px";
      var eleWidth = this.position === "Left" ? elementWidth : -elementWidth;
      removeClass([this.element], [PUSH, OVER, SLIDE]);
      switch (type) {
        case "Push":
          addClass([this.element], [PUSH]);
          if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {
            sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = margin;
          }
          break;
        case "Slide":
          addClass([this.element], [SLIDE]);
          if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {
            sibling.style.transform = "translateX(" + eleWidth + "px)";
          }
          break;
        case "Over":
          addClass([this.element], [OVER]);
          if (this.enableDock && (this.element.classList.contains(CLOSE) || this.isOpen)) {
            if (sibling) {
              sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = this.setDimension(this.dockSize);
            }
          }
          break;
        case "Auto":
          addClass([this.element], [TRASITION]);
          if (Browser.isDevice) {
            if (sibling && this.enableDock && !this.getState()) {
              sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = margin;
              addClass([this.element], PUSH);
            } else {
              addClass([this.element], OVER);
            }
          } else {
            addClass([this.element], PUSH);
            if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {
              sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = margin;
            }
          }
          this.createBackDrop();
      }
    };
    Sidebar2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      if (this.target) {
        removeClass([this.target], CONTEXT);
      }
      this.destroyBackDrop();
      if (this.element) {
        removeClass([this.element], [OPEN, CLOSE, PUSH, SLIDE, OVER, LEFT, RIGHT, TRASITION, DISABLEANIMATION]);
        removeClass([this.element], SIDEBARABSOLUTE);
        this.element.style.width = "";
        this.element.style.zIndex = "";
        this.element.style.transform = "";
        if (!isNullOrUndefined(this.sidebarEleCopy.getAttribute("tabindex"))) {
          this.element.setAttribute("tabindex", this.tabIndex);
        } else {
          this.element.removeAttribute("tabindex");
        }
      }
      this.windowWidth = null;
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      if (!isNullOrUndefined(sibling)) {
        sibling.style.margin = "";
        sibling.style.transform = "";
      }
      this.unWireEvents();
    };
    __decorate$9([
      Property("auto")
    ], Sidebar2.prototype, "dockSize", void 0);
    __decorate$9([
      Property(null)
    ], Sidebar2.prototype, "mediaQuery", void 0);
    __decorate$9([
      Property(false)
    ], Sidebar2.prototype, "enableDock", void 0);
    __decorate$9([
      Property("en-US")
    ], Sidebar2.prototype, "locale", void 0);
    __decorate$9([
      Property(false)
    ], Sidebar2.prototype, "enablePersistence", void 0);
    __decorate$9([
      Property(true)
    ], Sidebar2.prototype, "enableGestures", void 0);
    __decorate$9([
      Property(false)
    ], Sidebar2.prototype, "isOpen", void 0);
    __decorate$9([
      Property(false)
    ], Sidebar2.prototype, "enableRtl", void 0);
    __decorate$9([
      Property(true)
    ], Sidebar2.prototype, "animate", void 0);
    __decorate$9([
      Property("auto")
    ], Sidebar2.prototype, "height", void 0);
    __decorate$9([
      Property(false)
    ], Sidebar2.prototype, "closeOnDocumentClick", void 0);
    __decorate$9([
      Property("Left")
    ], Sidebar2.prototype, "position", void 0);
    __decorate$9([
      Property(null)
    ], Sidebar2.prototype, "target", void 0);
    __decorate$9([
      Property(false)
    ], Sidebar2.prototype, "showBackdrop", void 0);
    __decorate$9([
      Property("Auto")
    ], Sidebar2.prototype, "type", void 0);
    __decorate$9([
      Property("auto")
    ], Sidebar2.prototype, "width", void 0);
    __decorate$9([
      Property(1e3)
    ], Sidebar2.prototype, "zIndex", void 0);
    __decorate$9([
      Event()
    ], Sidebar2.prototype, "created", void 0);
    __decorate$9([
      Event()
    ], Sidebar2.prototype, "close", void 0);
    __decorate$9([
      Event()
    ], Sidebar2.prototype, "open", void 0);
    __decorate$9([
      Event()
    ], Sidebar2.prototype, "change", void 0);
    __decorate$9([
      Event()
    ], Sidebar2.prototype, "destroyed", void 0);
    Sidebar2 = __decorate$9([
      NotifyPropertyChanges
    ], Sidebar2);
    return Sidebar2;
  }(Component)
);
var __extends$o = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var SidebarComponent = (
  /** @class */
  function(_super) {
    __extends$o(SidebarComponent2, _super);
    function SidebarComponent2(props) {
      var _this = _super.call(this, props) || this;
      _this.initRenderCalled = false;
      _this.checkInjectedModules = true;
      _this.statelessTemplateProps = null;
      _this.templateProps = null;
      _this.immediateRender = true;
      _this.isReactMock = true;
      _this.portals = [];
      return _this;
    }
    SidebarComponent2.prototype.render = function() {
      this.isReactMock = false;
      if ((this.element && !this.initRenderCalled || this.refreshing) && !this.isReactForeceUpdate) {
        _super.prototype.render.call(this);
        this.initRenderCalled = true;
      } else {
        return React.createElement("div", this.getDefaultAttributes(), [].concat(this.props.children, this.portals));
      }
    };
    return SidebarComponent2;
  }(Sidebar)
);
applyMixins(SidebarComponent, [ComponentBase, React.Component]);
const MobileSidebar = () => {
  let sidebar;
  const toggleSidebar = () => {
    if (sidebar) {
      console.log("Waiting 500ms before toggling sidebar...");
      setTimeout(() => {
        sidebar.toggle();
      }, 500);
    } else {
      console.warn("Sidebar reference is not available.");
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "mobile-sidebar wrapper", children: [
    /* @__PURE__ */ jsxs("header", { children: [
      /* @__PURE__ */ jsxs(Link, { to: "/", children: [
        /* @__PURE__ */ jsx(
          "img",
          {
            src: "/assets/icons/cosmos.png",
            alt: "Logo",
            className: "size-[30px]"
          }
        ),
        /* @__PURE__ */ jsx("h1", { children: "THE AKS" })
      ] }),
      /* @__PURE__ */ jsx("button", { onClick: toggleSidebar, children: /* @__PURE__ */ jsx("img", { src: "/assets/icons/menu.svg", alt: "menu", className: "size-7" }) })
    ] }),
    /* @__PURE__ */ jsx(
      SidebarComponent,
      {
        width: 270,
        ref: (Sidebar2) => sidebar = Sidebar2,
        created: () => {
          if (sidebar) {
            console.log("Sidebar created, hiding it by default.");
            sidebar.hide();
          }
        },
        closeOnDocumentClick: true,
        showBackdrop: true,
        type: "over",
        children: /* @__PURE__ */ jsx(NavItems, { handleClick: toggleSidebar })
      }
    )
  ] });
};
const Header = ({ title, description, createText, createUrl }) => {
  const location2 = useLocation();
  console.log("Current Path:", location2.pathname);
  if (createText && !createUrl || !createText && createUrl) {
    console.warn("Both 'createText' and 'createUrl' should be provided together.");
  }
  return /* @__PURE__ */ jsxs("header", { className: "header", children: [
    /* @__PURE__ */ jsxs("article", { children: [
      /* @__PURE__ */ jsx(
        "h1",
        {
          className: cn(
            "text-gray-700",
            location2.pathname === "/" ? "text-2xl md:text-4 font-bold" : "text-xl md:text-2xl font-semibold"
          ),
          children: title
        }
      ),
      /* @__PURE__ */ jsx(
        "p",
        {
          className: cn(
            "text-gray-100 font-normal",
            location2.pathname === "/" ? "text-base md:text-lg" : "text-sm md:text-lg"
          ),
          children: description
        }
      )
    ] }),
    createText && createUrl && /* @__PURE__ */ jsx(Link, { to: createUrl, children: /* @__PURE__ */ jsxs(
      ButtonComponent,
      {
        type: "button",
        className: "button-class !bg-primary-100 !h-10 !w-30 md:w-[240px]",
        children: [
          /* @__PURE__ */ jsx("img", { src: "/assets/icons/plus.svg", alt: "plus", className: "size-5" }),
          /* @__PURE__ */ jsx("span", { className: "p-16-semibold text-white", children: createText })
        ]
      }
    ) })
  ] });
};
const StatsCard = ({ headerTitle, total, img, ctaUrl }) => {
  return /* @__PURE__ */ jsx(Link, { to: ctaUrl, className: "stats-card border-white/10 hover:-translate-y-1 hover:border-blue-500/30 hover:shadow-[0_2px_8px_rgba(59,130,246,0.2)] transition", children: /* @__PURE__ */ jsxs("article", { children: [
    /* @__PURE__ */ jsx("h3", { className: "text-base font-large", children: headerTitle }),
    /* @__PURE__ */ jsxs("div", { className: "content", children: [
      /* @__PURE__ */ jsx("div", { className: "flex flex-col gap-4", children: /* @__PURE__ */ jsx("h2", { className: "text-4xl font-semibold", children: total }) }),
      /* @__PURE__ */ jsx(
        "img",
        {
          src: `/assets/icons/${img}.png`,
          className: "xl:w-30 w-40 h-40 md:h-32 md:w-30 xl:h-full",
          alt: img ? `${headerTitle} icon` : "Missing Icon",
          onError: (e) => e.currentTarget.src = "/assets/icons/default.png"
        }
      )
    ] })
  ] }) });
};
const API_URL$4 = "http://backend:5000Auth";
const axiosInstance = axios.create({
  baseURL: API_URL$4
});
axiosInstance.interceptors.request.use(
  (config2) => {
    const token = localStorage.getItem("token");
    if (token) {
      config2.headers.Authorization = `Bearer ${token}`;
    }
    return config2;
  },
  (error) => {
    return Promise.reject(error);
  }
);
axiosInstance.interceptors.response.use(
  (response) => response,
  // Simply return the response if successful
  async (error) => {
    var _a;
    if (((_a = error.response) == null ? void 0 : _a.status) === 401) {
      localStorage.removeItem("token");
      window.location.href = "/login";
    }
    return Promise.reject(error);
  }
);
const API_URL$3 = "http://backend:5000Category";
const getAllCategories = async () => {
  log("getAllCategories", "Fetching all categories");
  try {
    const response = await axios.get(`${API_URL$3}/Get`);
    log("getAllCategories → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error fetching categories:", error);
    throw error;
  }
};
const getCategoriesCount = async () => {
  log("getCategoriesCount", "Fetching category count");
  try {
    const response = await axios.get(`${API_URL$3}/Get/count`);
    log("getCategoriesCount → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error fetching category count:", error);
    throw error;
  }
};
const getCategoryName = async (categoryId) => {
  log("getCategoryName", `Fetching category name for ID: ${categoryId}`);
  try {
    const response = await axios.get(`${API_URL$3}/${categoryId}/name`);
    log("getCategoryName → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error fetching category name:", error);
    throw error;
  }
};
const addCategory = async (categoryData) => {
  log("addCategory", categoryData);
  try {
    const response = await axiosInstance.post(`${API_URL$3}/Add`, categoryData);
    log("addCategory → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error adding category:", error);
    throw error;
  }
};
const updateCategoryById = async (categoryId, categoryData) => {
  log("updateCategoryById", { categoryId, categoryData });
  try {
    const response = await axiosInstance.put(`${API_URL$3}/Update-by-ID/${categoryId}`, categoryData);
    log("updateCategoryById → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error updating category:", error);
    throw error;
  }
};
const deleteCategoryById = async (categoryId) => {
  log("deleteCategoryById", `Deleting category with ID: ${categoryId}`);
  try {
    const response = await axiosInstance.delete(`${API_URL$3}/Delete-by-ID/${categoryId}`);
    log("deleteCategoryById → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error deleting category:", error);
    throw error;
  }
};
const API_URL$2 = "http://backend:5000Category";
const CategoryCount = () => {
  const [categoryCount, setCount] = useState(0);
  useEffect(() => {
    const fetchCount = async () => {
      const Count = await getCategoriesCount();
      setCount(Count.totalCategories);
    };
    fetchCount();
  }, []);
  console.log("Current category count:", categoryCount);
  return categoryCount;
};
const getCategoryNameById = async (categoryId) => {
  try {
    const response = await axios.get(`${API_URL$2}/${categoryId}/name`);
    console.log("API RESPONSE:", response);
    return response.data;
  } catch (error) {
    console.error("Error fetching category name by ID:", error);
    throw error;
  }
};
const useCategoryName = (categoryId) => {
  const [categoryName, setCategoryName] = useState("");
  const [error, setError] = useState(null);
  useEffect(() => {
    const fetchCategory = async () => {
      try {
        const response = await getCategoryName(categoryId);
        console.log("Fetched category name:", response);
        await delay(300);
        setCategoryName(response);
      } catch (err) {
        console.error("Error fetching category name:", err);
        setError("Failed to load category");
      }
    };
    if (categoryId) {
      fetchCategory();
    }
  }, [categoryId]);
  return { categoryName, error };
};
const useCategories = () => {
  const [categories, setCategories] = useState([]);
  const [error, setError] = useState(null);
  useEffect(() => {
    const fetchCategories = async () => {
      try {
        const data = await getAllCategories();
        console.log("Fetched categories:", data);
        await delay(300);
        setCategories(data);
      } catch (err) {
        console.error("Error loading categories:", err);
        setError("Failed to load categories");
      }
    };
    fetchCategories();
  }, []);
  return { categories, error };
};
const useUpdateCategory = () => {
  const [loading, setLoading] = useState(false);
  const updateCategory = async (categoryId, categoryData) => {
    setLoading(true);
    try {
      const result = await updateCategoryById(categoryId, categoryData);
      console.log(`Updated category ${categoryId}:`, result);
      await delay(300);
      return result;
    } finally {
      setLoading(false);
    }
  };
  return { updateCategory, loading };
};
const useDeleteCategory = () => {
  const [loading, setLoading] = useState(false);
  const deleteCategory = async (categoryId) => {
    setLoading(true);
    try {
      const result = await deleteCategoryById(categoryId);
      console.log(`Deleted category ${categoryId}:`, result);
      await delay(300);
      return result;
    } finally {
      setLoading(false);
    }
  };
  return { deleteCategory, loading };
};
const useAddCategory = () => {
  const [loading, setLoading] = useState(false);
  const addNewCategory = async (categoryData) => {
    setLoading(true);
    try {
      const result = await addCategory(categoryData);
      console.log("Added new category:", result);
      await delay(300);
      return result;
    } finally {
      setLoading(false);
    }
  };
  return { addNewCategory, loading };
};
const ProductCard = ({ product }) => {
  const { categoryName } = useCategoryName(product.categoryId);
  console.log("CATEGORY NAME :", categoryName);
  return (
    // Product card container wrapped with a Link to the product's details page
    /* @__PURE__ */ jsxs(Link, { to: `/product/${product.id}`, className: "product-card ", children: [
      /* @__PURE__ */ jsx(
        "img",
        {
          src: product.imageUrl || "/assets/images/cardProduct.png",
          alt: product.imageUrl || "Product image"
        }
      ),
      /* @__PURE__ */ jsxs("article", { children: [
        /* @__PURE__ */ jsx("h2", { children: product.name }),
        /* @__PURE__ */ jsx("figure", { children: /* @__PURE__ */ jsx("figcaption", { children: product.description }) }),
        /* @__PURE__ */ jsxs("div", { className: "text-sm text-gray-600", children: [
          "Category: ",
          categoryName || "N/A"
        ] })
      ] }),
      /* @__PURE__ */ jsx("div", { className: "flex mt-5 pl-[-18px] pr-3.5 pb-5", children: /* @__PURE__ */ jsx(ChipListComponent, { id: "product-chip", children: /* @__PURE__ */ jsxs(ChipsDirective, { children: [
        /* @__PURE__ */ jsx(ChipDirective, { text: `Created On: ${formatDate(product.createdAt)}` }),
        /* @__PURE__ */ jsx(ChipDirective, { text: `Updated On: ${formatDate(product.updatedAt)}` }),
        /* @__PURE__ */ jsx(ChipDirective, { text: `Stock: ${product.stockQuantity}` })
      ] }) }) }),
      /* @__PURE__ */ jsx("article", { className: "productCard-pill", children: product.price })
    ] })
  );
};
const UserNavItems = () => {
  const { authData, logout } = useContext(AuthContext);
  const [imageUrl, setImageUrl] = useState("");
  const navigate = useNavigate();
  const handleLogout = () => {
    logout();
    console.log("Logging out...");
    navigate("/log-in");
  };
  useEffect(() => {
    if (authData) {
      switch (authData.role) {
        case "ADMIN":
          setImageUrl("/assets/icons/admin.png");
          break;
        default:
          setImageUrl("/assets/icons/customer.png");
      }
    }
  }, [authData]);
  return /* @__PURE__ */ jsxs("section", { className: "nav-items", children: [
    /* @__PURE__ */ jsxs(Link, { to: "/dashboard", className: "link-logo", children: [
      /* @__PURE__ */ jsx("img", { src: "/assets/icons/cosmos.png", alt: "Logo", className: "size-[30px]" }),
      /* @__PURE__ */ jsx("h1", { children: "COSMOS" })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "container", children: [
      /* @__PURE__ */ jsx("nav", { children: userSidebarItems.map(({ id, href, icon, label }) => /* @__PURE__ */ jsx(NavLink, { to: href, children: ({ isActive }) => /* @__PURE__ */ jsxs("div", { className: cn("group nav-item", {
        "bg-primary-100 !text-white": isActive
        // Style active link differently
      }), children: [
        /* @__PURE__ */ jsx(
          "img",
          {
            src: icon,
            alt: label,
            className: `group-hover:brightness-0 size-0 group-hover:invert ${isActive ? "brightness-0 invert" : "text-dark-200"}`
          }
        ),
        label
      ] }) }, id)) }),
      /* @__PURE__ */ jsxs("footer", { className: "nav-footer", children: [
        authData ? /* @__PURE__ */ jsxs(Fragment, { children: [
          /* @__PURE__ */ jsx(
            "img",
            {
              src: imageUrl || "/assets/icons/default.png",
              alt: authData.username || "User Profile",
              className: "user-profile-img"
            }
          ),
          /* @__PURE__ */ jsxs("article", { children: [
            /* @__PURE__ */ jsx("h2", { children: authData.username }),
            /* @__PURE__ */ jsx("p", { children: authData.role })
          ] })
        ] }) : /* @__PURE__ */ jsx("p", { children: "SIGN IN" }),
        /* @__PURE__ */ jsx(
          "button",
          {
            onClick: handleLogout,
            className: "cursor-pointer",
            children: /* @__PURE__ */ jsx(
              "img",
              {
                src: "/assets/icons/logout.svg",
                alt: "Logout",
                className: "size-6"
              }
            )
          }
        )
      ] })
    ] })
  ] });
};
const Loader = () => {
  return /* @__PURE__ */ jsx("div", { className: "flex justify-center items-center h-full", children: /* @__PURE__ */ jsx("div", { className: "spinner-border animate-spin inline-block w-16 h-16 border-4 border-solid rounded-full border-t-transparent border-primary-600", role: "status", children: /* @__PURE__ */ jsx("span", { className: "visually-hidden", children: "Loading..." }) }) });
};
const LoadingScreen = ({ onComplete }) => {
  const [text, setText] = useState("");
  const fullText = "COSMOS";
  useEffect(() => {
    let index = 0;
    const interval = setInterval(() => {
      setText(fullText.substring(0, index));
      index++;
      if (index > fullText.length) {
        clearInterval(interval);
        setTimeout(() => {
          onComplete();
        }, 100);
      }
    }, 200);
    return () => clearInterval(interval);
  }, [onComplete]);
  return /* @__PURE__ */ jsxs("div", { className: "fixed inset-0 z-50 bg-white text-gray-600 flex flex-col items-center justify-center", children: [
    /* @__PURE__ */ jsxs("div", { className: "mb-4 text-4xl font-mono font-bold", children: [
      text,
      " ",
      /* @__PURE__ */ jsx("span", { className: "animate-blink ml-1 text-gray-800", children: "|" })
    ] }),
    /* @__PURE__ */ jsx("div", { className: "w-[200px] h-[2px] rounded relative overflow-hidden", children: /* @__PURE__ */ jsx("div", { className: "w-[40%] h-full shadow-[0_0_15px_#3b82f6] text-primary-100 animate-loading-bar" }) })
  ] });
};
const LogIn = () => {
  const {
    login
  } = useAuth();
  const [username, setUsername] = useState("");
  const [password, setPassword] = useState("");
  const [loading, setLoading] = useState(false);
  const [showSplash, setShowSplash] = useState(false);
  const [errorMessage, setErrorMessage] = useState("");
  const navigate = useNavigate();
  const handleLogin = async () => {
    if (!username || !password) {
      setErrorMessage("Please enter both username and password.");
      return;
    }
    setLoading(true);
    try {
      await login(username, password);
      console.log("Login Successful! ✅");
      setShowSplash(true);
      setTimeout(() => {
        setShowSplash(false);
        navigate("/dashboard");
      }, 2e3);
    } catch (error) {
      console.error("Login failed:", error);
      setErrorMessage("Invalid username or password. Please try again.");
    } finally {
      setLoading(false);
    }
  };
  const handleRegister = async () => {
    navigate("/register");
  };
  if (showSplash) {
    return /* @__PURE__ */ jsx(LoadingScreen, {
      onComplete: () => {
      }
    });
  }
  return /* @__PURE__ */ jsx("main", {
    className: "auth",
    children: /* @__PURE__ */ jsx("section", {
      className: "size-full glassmorphism flex-center px-6",
      children: /* @__PURE__ */ jsx("div", {
        className: "sign-in-card",
        children: /* @__PURE__ */ jsx("header", {
          className: "header",
          children: /* @__PURE__ */ jsx("section", {
            className: "mt-2.5 wrapper-md",
            children: /* @__PURE__ */ jsx("form", {
              className: "product-form",
              children: /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("input", {
                  type: "text",
                  value: username,
                  id: "username",
                  onChange: (e) => setUsername(e.target.value),
                  placeholder: "Username",
                  className: "form-input placeholder:Text-gray-100"
                }), /* @__PURE__ */ jsx("input", {
                  type: "password",
                  id: "password",
                  value: password,
                  onChange: (e) => setPassword(e.target.value),
                  placeholder: "Password",
                  className: "form-input placeholder:Text-gray-100"
                }), errorMessage && /* @__PURE__ */ jsx("p", {
                  className: "text-red-500 text-xs mt-2",
                  children: errorMessage
                }), /* @__PURE__ */ jsx(ButtonComponent, {
                  type: "button",
                  className: "button-class !bg-primary-100 !h-11 !w-full md:w-[240px]",
                  onClick: handleLogin,
                  disabled: loading,
                  children: /* @__PURE__ */ jsx("span", {
                    className: "p-16-semibold text-white",
                    children: loading ? "Logging in..." : "SIGN IN"
                  })
                }), /* @__PURE__ */ jsx(ButtonComponent, {
                  type: "button",
                  className: "button-class !bg-primary-100 !h-11 !w-full md:w-[240px]",
                  onClick: handleRegister,
                  children: /* @__PURE__ */ jsx("span", {
                    className: "p-16-semibold text-white",
                    children: "REGISTER"
                  })
                })]
              })
            })
          })
        })
      })
    })
  });
};
const logIn = withComponentProps(LogIn);
const route1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: logIn
}, Symbol.toStringTag, { value: "Module" }));
const Register = () => {
  const [username, setUsername] = useState("");
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [role, setRole] = useState("");
  const [loading, setLoading] = useState(false);
  const [errorMessage, setErrorMessage] = useState(null);
  const navigate = useNavigate();
  const handleLogin = async () => {
    navigate("/");
  };
  const handleRegister = async () => {
    if (!username || !email || !password || !role) {
      setErrorMessage("All fields are required.");
      return;
    }
    setLoading(true);
    setErrorMessage(null);
    try {
      await registerUser({
        username,
        email,
        password,
        role
      });
      console.log("Registration successful! ✅");
      alert("Registration successful! Please log in.");
      navigate("/log-in");
    } catch (error) {
      console.error("Registration failed:", error);
      setErrorMessage("Registration failed. Please try again.");
    } finally {
      setLoading(false);
    }
  };
  return /* @__PURE__ */ jsx("main", {
    className: "auth",
    children: /* @__PURE__ */ jsx("section", {
      className: "size-full glassmorphism flex-center px-6",
      children: /* @__PURE__ */ jsx("div", {
        className: "sign-in-card",
        children: /* @__PURE__ */ jsx("header", {
          className: "header",
          children: /* @__PURE__ */ jsx("section", {
            className: "mt-2.5 wrapper-md",
            children: /* @__PURE__ */ jsx("form", {
              className: "product-form",
              children: /* @__PURE__ */ jsxs("div", {
                children: [/* @__PURE__ */ jsx("input", {
                  type: "text",
                  value: username,
                  id: "username",
                  onChange: (e) => setUsername(e.target.value),
                  placeholder: "Username",
                  className: "form-input placeholder:Text-gray-100"
                }), /* @__PURE__ */ jsx("input", {
                  type: "email",
                  value: email,
                  id: "email",
                  onChange: (e) => setEmail(e.target.value),
                  placeholder: "E-mail",
                  className: "form-input placeholder:Text-gray-100"
                }), /* @__PURE__ */ jsx("input", {
                  type: "password",
                  id: "password",
                  value: password,
                  onChange: (e) => setPassword(e.target.value),
                  placeholder: "Password",
                  className: "form-input placeholder:Text-gray-100"
                }), /* @__PURE__ */ jsxs("select", {
                  id: "role",
                  value: role,
                  onChange: (e) => setRole(e.target.value),
                  className: "form-input placeholder:Text-gray-100",
                  children: [/* @__PURE__ */ jsx("option", {
                    value: "",
                    disabled: true,
                    children: "Select Role"
                  }), roles.map((r) => /* @__PURE__ */ jsx("option", {
                    value: r,
                    children: r
                  }, r))]
                }), errorMessage && /* @__PURE__ */ jsx("p", {
                  className: "text-red-500 text-xs mt-2",
                  children: errorMessage
                }), /* @__PURE__ */ jsx(ButtonComponent, {
                  type: "button",
                  className: "button-class !bg-primary-100 !h-11 !w-full md:w-[240px]",
                  onClick: handleRegister,
                  disabled: loading,
                  children: /* @__PURE__ */ jsx("span", {
                    className: "p-16-semibold text-white",
                    children: loading ? "Registering..." : "REGISTER"
                  })
                }), /* @__PURE__ */ jsx(ButtonComponent, {
                  type: "button",
                  className: "button-class !bg-primary-100 !h-11 !w-full md:w-[240px] ",
                  onClick: handleLogin,
                  children: /* @__PURE__ */ jsx("span", {
                    className: "p-16-semibold text-white",
                    children: "SIGN IN"
                  })
                })]
              })
            })
          })
        })
      })
    })
  });
};
const register = withComponentProps(Register);
const route2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: register
}, Symbol.toStringTag, { value: "Module" }));
const Home = () => {
  return /* @__PURE__ */ jsx("div", {
    className: "!bg-white"
  });
};
const home = withComponentProps(Home);
const route3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: home
}, Symbol.toStringTag, { value: "Module" }));
const AdminLayout = () => {
  if (typeof window === "undefined") {
    return null;
  }
  const authData = JSON.parse(localStorage.getItem("authData") || "null");
  if (!authData) {
    return /* @__PURE__ */ jsx(Navigate, {
      to: "/log-in",
      replace: true
    });
  }
  if (authData.role !== "ADMIN") {
    return /* @__PURE__ */ jsx(Navigate, {
      to: "/user-dashboard",
      replace: true
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "admin-layout",
    children: [/* @__PURE__ */ jsx(MobileSidebar, {}), /* @__PURE__ */ jsx("aside", {
      className: "w-full max-w-[270px] hidden lg:block",
      children: /* @__PURE__ */ jsx(SidebarComponent, {
        width: 270,
        enableGestures: false,
        children: /* @__PURE__ */ jsx(NavItems, {})
      })
    }), /* @__PURE__ */ jsx("aside", {
      className: "children",
      children: /* @__PURE__ */ jsx(Outlet, {})
    })]
  });
};
const adminLayout = withComponentProps(AdminLayout);
const route4 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: adminLayout
}, Symbol.toStringTag, { value: "Module" }));
const API_URL$1 = "http://backend:5000Product";
const getAllProducts = async () => {
  log("getAllProducts", "Fetching all products");
  const response = await axios.get(`${API_URL$1}/Get`);
  log("getAllProducts → Response", response.data);
  await delay(300);
  return response.data;
};
const getTotalProductsCount = async () => {
  log("getTotalProductsCount", "Fetching total product count");
  const response = await axios.get(`${API_URL$1}/Get/count`);
  log("getTotalProductsCount → Response", response.data);
  await delay(300);
  return response.data.totalProducts;
};
const getProductByName = async (name) => {
  log("getProductByName", `Fetching product by name: ${name}`);
  try {
    const response = await axios.get(`${API_URL$1}/by-name/${name}`);
    log("getProductByName → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error fetching product by name:", error);
    throw error;
  }
};
const getProductById = async (productId) => {
  log("getProductById", `Fetching product by ID: ${productId}`);
  try {
    const response = await axios.get(`${API_URL$1}/by-Id/${productId}`);
    log("getProductById → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error fetching product by Id:", error);
    throw error;
  }
};
const getProductsByCategoryId = async (categoryId) => {
  log("getProductsByCategoryId", `Fetching products for category ID: ${categoryId}`);
  try {
    const response = await axios.get(`${API_URL$1}/by-category/${categoryId}`);
    log("getProductsByCategoryId → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error fetching products by category ID:", error);
    throw error;
  }
};
const createProduct$1 = async (product) => {
  log("createProduct", product);
  const response = await axiosInstance.post(`${API_URL$1}/Add`, product);
  log("createProduct → Response", response.data);
  await delay(300);
  return response.data;
};
const updateProductById = async (productId, product) => {
  log("updateProductById", { productId, product });
  try {
    const response = await axiosInstance.put(`${API_URL$1}/Update-by-ID/${productId}`, product);
    log("updateProductById → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error updating product:", error);
    throw error;
  }
};
const deleteProductById = async (id) => {
  log("deleteProductById", `Deleting product with ID: ${id}`);
  try {
    const response = await axiosInstanceaxios.delete(`${API_URL$1}/Delete-by-ID/${id}`);
    log("deleteProductById → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error deleting product:", error);
    throw error;
  }
};
const ProductCount = () => {
  const [productCount, setCount] = useState(0);
  useEffect(() => {
    const fetchCount = async () => {
      const count = await getTotalProductsCount();
      console.log("Fetched total product count:", count);
      setCount(count);
    };
    fetchCount();
  }, []);
  return productCount;
};
const AllProducts = () => {
  const [products, setProducts] = useState([]);
  const [error, setError] = useState(null);
  useEffect(() => {
    const fetchProducts = async () => {
      try {
        const data = await getAllProducts();
        console.log("Fetched all products:", data);
        await delay(300);
        setProducts(data);
      } catch (err) {
        console.error("Failed to load products", err);
        setError("Failed to load products");
      }
    };
    fetchProducts();
  }, []);
  return { products, error };
};
const useProductById = (productId) => {
  const [product, setProduct] = useState(null);
  const [error, setError] = useState(null);
  useEffect(() => {
    const fetchProduct = async () => {
      try {
        const data = await getProductById(productId);
        console.log(`Fetched product ${productId}:`, data);
        setProduct(data);
      } catch (err) {
        console.error("Failed to load product", err);
        setError("Failed to load product");
      }
    };
    if (productId) {
      fetchProduct();
    }
  }, [productId]);
  return { product, error };
};
const useDeleteProduct = () => {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(false);
  const deleteProduct = async (id) => {
    setLoading(true);
    setError(null);
    try {
      await deleteProductById(id);
      console.log(`Deleted product ${id}`);
      await delay(300);
      setSuccess(true);
    } catch (err) {
      console.error("Failed to delete product", err);
      setError("Failed to delete product.");
    } finally {
      setLoading(false);
    }
  };
  return { deleteProduct, loading, error, success };
};
const useGetProductByName = (name) => {
  const [product, setProduct] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const fetchProduct = async () => {
    setLoading(true);
    try {
      const data = await getProductByName(name);
      console.log("Fetched product by name:", data);
      await delay(300);
      setProduct(data);
      setError(null);
    } catch (err) {
      console.error("Failed to fetch product by name", err);
      setError("Failed to fetch product.");
      setProduct(null);
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    if (name) fetchProduct();
  }, [name]);
  return { product, loading, error, refetch: fetchProduct };
};
const useGetProductsByCategoryId = (categoryId) => {
  const [products, setProducts] = useState([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const fetchProducts = async () => {
    if (categoryId === null) return;
    setLoading(true);
    try {
      const data = await getProductsByCategoryId(categoryId);
      console.log(`Fetched products for category ${categoryId}:`, data);
      await delay(300);
      setProducts(data);
      setError(null);
    } catch (err) {
      console.error("Failed to fetch products by category ID", err);
      setError("Failed to fetch products.");
      setProducts([]);
    } finally {
      setLoading(false);
    }
  };
  useEffect(() => {
    fetchProducts();
  }, [categoryId]);
  return { products, loading, error, refetch: fetchProducts };
};
const API_URL = "http://backend:5000User";
const getAllUsers = async () => {
  log("getAllUsers", "Fetching all users");
  try {
    const response = await axios.get(`${API_URL}/Get`);
    log("getAllUsers → Response", response.data);
    await delay(300);
    return response.data;
  } catch (error) {
    console.error("Error fetching users:", error);
    throw error;
  }
};
const getUsersCount = async () => {
  log("getUsersCount", "Fetching total user count");
  try {
    const response = await axios.get(`${API_URL}/Get/count`);
    log("getUsersCount → Response", response.data);
    await delay(300);
    return response.data.totalUsers;
  } catch (error) {
    console.error("Error fetching user count:", error);
    throw error;
  }
};
const UserCount = () => {
  const [userCount, setCount] = useState(0);
  useEffect(() => {
    const fetchCount = async () => {
      try {
        const Count = await getUsersCount();
        console.log("Fetched user count:", Count);
        setCount(Count);
      } catch (error) {
        console.error("Error fetching user count:", error);
      }
    };
    fetchCount();
  }, []);
  return userCount;
};
const AllUsersData = () => {
  const [users, setUsers] = useState([]);
  const [error, setError] = useState(null);
  useEffect(() => {
    const fetchUsers = async () => {
      try {
        const data = await getAllUsers();
        console.log("Fetched all users:", data);
        await delay(300);
        setUsers(data);
      } catch (err) {
        console.error("Error fetching users:", err);
        setError("Failed to load users");
      }
    };
    fetchUsers();
  }, []);
  return { users, error };
};
const Dashboard = () => {
  const categoryCount = CategoryCount();
  const productCount = ProductCount();
  const userCount = UserCount();
  const {
    products,
    error,
    isLoading
  } = AllProducts();
  const {
    authData
  } = useAuth();
  const [currentPage, setCurrentPage] = useState(1);
  const itemsPerPage = 8;
  const totalPages = Math.ceil(products.length / itemsPerPage);
  const paginatedProducts = products.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
  if (!authData) {
    return /* @__PURE__ */ jsx(Navigate, {
      to: "/"
    });
  }
  if (isLoading) {
    return /* @__PURE__ */ jsx(Loader, {});
  }
  if (error) {
    return /* @__PURE__ */ jsxs("div", {
      children: ["Error loading products: ", error.message]
    });
  }
  return /* @__PURE__ */ jsxs("main", {
    className: "dashboard wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: `Welcome ${(authData == null ? void 0 : authData.username) ?? "Guest"} 👋🏼`,
      description: "Welcome to the dashboard"
    }), /* @__PURE__ */ jsx("section", {
      className: "flex flex-col gap-6",
      children: /* @__PURE__ */ jsxs("div", {
        className: "grid grid-cols-1 md:grid-cols-3 gap-6 w-full",
        children: [/* @__PURE__ */ jsx(StatsCard, {
          headerTitle: "Total Products",
          total: productCount,
          img: "products",
          ctaUrl: "/all-product"
        }), /* @__PURE__ */ jsx(StatsCard, {
          headerTitle: "Total Categories",
          total: categoryCount,
          img: "categories",
          ctaUrl: "/all-categories"
        }), /* @__PURE__ */ jsx(StatsCard, {
          headerTitle: "Total Customers",
          total: userCount,
          img: "customer1",
          ctaUrl: "/all-users"
        })]
      })
    }), /* @__PURE__ */ jsx("section", {
      className: "flex flex-col gap-6",
      children: /* @__PURE__ */ jsxs("section", {
        className: "container",
        children: [/* @__PURE__ */ jsx("h1", {
          className: "text-xl font-semibold text-dark-100",
          children: "PRODUCTS"
        }), /* @__PURE__ */ jsx("div", {
          className: "grid grid-cols-1 md:grid-cols-4 gap-6 w-full",
          children: paginatedProducts.length ? paginatedProducts.map((product) => /* @__PURE__ */ jsx(ProductCard, {
            product
          }, product.id)) : /* @__PURE__ */ jsx("p", {
            children: "No products found."
          })
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center items-center gap-4 mt-6",
          children: [/* @__PURE__ */ jsx("button", {
            onClick: () => setCurrentPage((prev) => Math.max(prev - 1, 1)),
            disabled: currentPage === 1,
            className: "px-4 py-2 bg-gray-300 rounded disabled:opacity-50",
            children: "Prev"
          }), /* @__PURE__ */ jsxs("span", {
            children: ["Page ", currentPage, " of ", totalPages]
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setCurrentPage((prev) => Math.min(prev + 1, totalPages)),
            disabled: currentPage === totalPages,
            className: "px-4 py-2 bg-gray-300 rounded disabled:opacity-50",
            children: "Next"
          })]
        })]
      })
    })]
  });
};
const dashboard = withComponentProps(Dashboard);
const route5 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: dashboard
}, Symbol.toStringTag, { value: "Module" }));
var __extends$n = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var ColumnDirective = (
  /** @class */
  function(_super) {
    __extends$n(ColumnDirective2, _super);
    function ColumnDirective2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnDirective2.moduleName = "column";
    ColumnDirective2.complexTemplate = { "filter.itemTemplate": "filter.itemTemplate" };
    return ColumnDirective2;
  }(ComplexBase)
);
var ColumnsDirective = (
  /** @class */
  function(_super) {
    __extends$n(ColumnsDirective2, _super);
    function ColumnsDirective2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ColumnsDirective2.propertyName = "columns";
    ColumnsDirective2.moduleName = "columns";
    return ColumnsDirective2;
  }(ComplexBase)
);
var ValueFormatter = (
  /** @class */
  function() {
    function ValueFormatter2(cultureName) {
      this.intl = new Internationalization();
      if (!isNullOrUndefined(cultureName)) {
        this.intl.culture = cultureName;
      }
    }
    ValueFormatter2.prototype.getFormatFunction = function(format) {
      if (!isNullOrUndefined(format) && (format.type === "dateTime" || format.type === "datetime" || format.type === "date" || format.type === "time")) {
        return this.intl.getDateFormat(format);
      } else {
        return this.intl.getNumberFormat(format);
      }
    };
    ValueFormatter2.prototype.getParserFunction = function(format) {
      if (format.type) {
        return this.intl.getDateParser(format);
      } else {
        return this.intl.getNumberParser(format);
      }
    };
    ValueFormatter2.prototype.fromView = function(value, format, type) {
      if ((type === "date" || type === "datetime" || type === "number") && !isNullOrUndefined(format)) {
        return format(value);
      } else {
        return value;
      }
    };
    ValueFormatter2.prototype.toView = function(value, format) {
      var result = value;
      if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {
        result = format(value);
      }
      return result;
    };
    ValueFormatter2.prototype.setCulture = function(cultureName) {
      if (!isNullOrUndefined(cultureName)) {
        setCulture(cultureName);
      }
    };
    return ValueFormatter2;
  }()
);
var __extends$m = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$8 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Column = (
  /** @class */
  function() {
    function Column2(options, parent) {
      var _this = this;
      this.disableHtmlEncode = true;
      this.allowSorting = true;
      this.allowResizing = true;
      this.allowFiltering = true;
      this.allowGrouping = true;
      this.allowReordering = true;
      this.showColumnMenu = true;
      this.enableGroupByFormat = false;
      this.allowEditing = true;
      this.filter = {};
      this.showInColumnChooser = true;
      this.edit = {};
      this.allowSearching = true;
      this.autoFit = false;
      this.sortDirection = "Descending";
      this.getEditTemplate = function() {
        return _this.editTemplateFn;
      };
      this.getFilterTemplate = function() {
        return _this.filterTemplateFn;
      };
      this.templateOptions = { enableAriaLabel: true };
      merge(this, options);
      this.parent = parent;
      if (this.type === "none") {
        this.type = null;
      } else if (this.type) {
        this.type = typeof this.type === "string" ? this.type.toLowerCase() : void 0;
      }
      if (this.editType) {
        this.editType = this.editType.toLowerCase();
      }
      if (isNullOrUndefined(this.uid)) {
        this.uid = getUid("grid-column");
      }
      var valueFormatter = new ValueFormatter();
      if (options.format && (options.format.skeleton || options.format.format && typeof options.format.format === "string")) {
        this.setFormatter(valueFormatter.getFormatFunction(extend$1({}, options.format)));
        this.setParser(valueFormatter.getParserFunction(options.format));
      }
      this.toJSON = function() {
        var col = {};
        var skip = [
          "filter",
          "dataSource",
          "headerText",
          "template",
          "headerTemplate",
          "edit",
          "editTemplate",
          "filterTemplate",
          "commandsTemplate",
          "parent"
        ];
        var keys2 = Object.keys(_this);
        for (var i = 0; i < keys2.length; i++) {
          if (keys2[parseInt(i.toString(), 10)] === "columns") {
            col[keys2[parseInt(i.toString(), 10)]] = [];
            for (var j = 0; j < _this[keys2[parseInt(i.toString(), 10)]].length; j++) {
              col[keys2[parseInt(i.toString(), 10)]].push(_this[keys2[parseInt(i.toString(), 10)]][parseInt(j.toString(), 10)].toJSON());
            }
          } else if (skip.indexOf(keys2[parseInt(i.toString(), 10)]) < 0) {
            col[keys2[parseInt(i.toString(), 10)]] = _this[keys2[parseInt(i.toString(), 10)]];
          }
        }
        return col;
      };
      if (!this.field) {
        this.allowFiltering = false;
        this.allowGrouping = false;
        this.allowSorting = false;
        if (this.columns) {
          this.allowResizing = this.columns.some(function(col) {
            return col.allowResizing;
          });
        }
      }
      if (this.commands && !this.textAlign) {
        this.textAlign = "Right";
      }
      if (this.template || this.commandsTemplate) {
        this.templateFn = templateCompiler(this.template || this.commandsTemplate);
      }
      if (this.headerTemplate) {
        this.headerTemplateFn = templateCompiler(this.headerTemplate);
      }
      if (!isNullOrUndefined(this.filter) && this.filter.itemTemplate) {
        this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);
      }
      if (this.editTemplate) {
        this.editTemplateFn = templateCompiler(this.editTemplate);
      }
      if (this.filterTemplate) {
        this.filterTemplateFn = templateCompiler(this.filterTemplate);
      }
      if (this.isForeignColumn() && (isNullOrUndefined(this.editType) || this.editType === "dropdownedit" || this.editType === "defaultedit")) {
        this.editType = "dropdownedit";
        if (this.edit.params && this.edit.params.dataSource) {
          this.edit.params.ddEditedData = true;
        }
        this.edit.params = extend$1({
          dataSource: this.dataSource,
          query: new Query(),
          fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }
        }, this.edit.params);
      }
      if (this.sortComparer) {
        var a_1 = this.sortComparer;
        this.sortComparer = function(x, y, xObj, yObj) {
          if (typeof a_1 === "string") {
            a_1 = getObject(a_1, window);
          }
          if (_this.sortDirection === "Descending") {
            var z = x;
            x = y;
            y = z;
            var obj = xObj;
            xObj = yObj;
            yObj = obj;
          }
          return a_1(x, y, xObj, yObj);
        };
      }
      if (!this.sortComparer && this.isForeignColumn()) {
        this.sortComparer = function(x, y) {
          x = getObject(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);
          y = getObject(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);
          return _this.sortDirection === "Descending" ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);
        };
      }
    }
    Column2.prototype.getSortDirection = function() {
      return this.sortDirection;
    };
    Column2.prototype.setSortDirection = function(direction) {
      this.sortDirection = direction;
    };
    Column2.prototype.getFreezeTableName = function() {
      return this.freezeTable;
    };
    Column2.prototype.setProperties = function(column) {
      var keys2 = Object.keys(column);
      var _loop_1 = function(i2) {
        if (keys2[parseInt(i2.toString(), 10)] === "columns") {
          var cols_1 = column[keys2[parseInt(i2.toString(), 10)]];
          var _loop_2 = function(j2) {
            this_1.columns.find(function(col) {
              return col.field === cols_1[parseInt(j2.toString(), 10)].field;
            }).setProperties(cols_1[parseInt(j2.toString(), 10)]);
          };
          for (var j = 0; j < cols_1.length; j++) {
            _loop_2(j);
          }
        } else {
          this_1[keys2[parseInt(i2.toString(), 10)]] = column[keys2[parseInt(i2.toString(), 10)]];
        }
        if (this_1.parent && this_1.parent.isReact) {
          if (keys2[parseInt(i2.toString(), 10)] === "template") {
            this_1.templateFn = templateCompiler(column[keys2[parseInt(i2.toString(), 10)]]);
            this_1.parent.refreshReactColumnTemplateByUid(this_1.uid, true);
          } else if (keys2[parseInt(i2.toString(), 10)] === "headerTemplate") {
            this_1.headerTemplateFn = templateCompiler(column[keys2[parseInt(i2.toString(), 10)]]);
            this_1.parent.refreshReactHeaderTemplateByUid(this_1.uid);
          } else if (keys2[parseInt(i2.toString(), 10)] === "editTemplate") {
            this_1.editTemplateFn = templateCompiler(column[keys2[parseInt(i2.toString(), 10)]]);
          } else if (keys2[parseInt(i2.toString(), 10)] === "filterTemplate") {
            this_1.filterTemplateFn = templateCompiler(column[keys2[parseInt(i2.toString(), 10)]]);
          } else if (keys2[parseInt(i2.toString(), 10)] === "commandsTemplate") {
            this_1.templateFn = templateCompiler(column[keys2[parseInt(i2.toString(), 10)]]);
          }
        }
      };
      var this_1 = this;
      for (var i = 0; i < keys2.length; i++) {
        _loop_1(i);
      }
    };
    Column2.prototype.isForeignColumn = function() {
      return !!(this.dataSource && this.foreignKeyValue);
    };
    Column2.prototype.getFormatter = function() {
      return this.formatFn;
    };
    Column2.prototype.setFormatter = function(value) {
      this.formatFn = value;
    };
    Column2.prototype.getParser = function() {
      return this.parserFn;
    };
    Column2.prototype.setParser = function(value) {
      this.parserFn = value;
    };
    Column2.prototype.getColumnTemplate = function() {
      return this.templateFn;
    };
    Column2.prototype.getHeaderTemplate = function() {
      return this.headerTemplateFn;
    };
    Column2.prototype.getFilterItemTemplate = function() {
      return this.fltrTemplateFn;
    };
    Column2.prototype.getDomSetter = function() {
      return this.disableHtmlEncode ? "textContent" : "innerHTML";
    };
    return Column2;
  }()
);
(function() {
  function CommandColumnModel() {
  }
  __decorate$8([
    Property()
  ], CommandColumnModel.prototype, "title", void 0);
  __decorate$8([
    Property()
  ], CommandColumnModel.prototype, "type", void 0);
  __decorate$8([
    Property()
  ], CommandColumnModel.prototype, "buttonOption", void 0);
  return CommandColumnModel;
})();
var GridColumn = (
  /** @class */
  function(_super) {
    __extends$m(GridColumn2, _super);
    function GridColumn2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$8([
      Property(null)
    ], GridColumn2.prototype, "columns", void 0);
    return GridColumn2;
  }(Column)
);
(function(_super) {
  __extends$m(StackedColumn, _super);
  function StackedColumn() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  return StackedColumn;
})(GridColumn);
var load = "load";
var rowDataBound = "rowDataBound";
var queryCellInfo = "queryCellInfo";
var headerCellInfo = "headerCellInfo";
var actionBegin = "actionBegin";
var actionComplete = "actionComplete";
var actionFailure = "actionFailure";
var dataBound = "dataBound";
var rowSelecting = "rowSelecting";
var rowSelected = "rowSelected";
var rowDeselecting = "rowDeselecting";
var rowDeselected = "rowDeselected";
var cellSelecting = "cellSelecting";
var cellSelected = "cellSelected";
var cellDeselecting = "cellDeselecting";
var cellDeselected = "cellDeselected";
var columnSelecting = "columnSelecting";
var columnSelected = "columnSelected";
var columnDeselecting = "columnDeselecting";
var columnDeselected = "columnDeselected";
var columnDragStart = "columnDragStart";
var columnDrag = "columnDrag";
var columnDrop = "columnDrop";
var beforePrint = "beforePrint";
var printComplete = "printComplete";
var detailDataBound = "detailDataBound";
var batchAdd = "batchAdd";
var batchCancel = "batchCancel";
var batchDelete = "batchDelete";
var recordDoubleClick = "recordDoubleClick";
var recordClick = "recordClick";
var beforeDataBound = "beforeDataBound";
var beforeOpenAdaptiveDialog = "beforeOpenAdaptiveDialog";
var resizeStop = "resizeStop";
var checkBoxChange = "checkBoxChange";
var beforeCopy = "beforeCopy";
var beforePaste = "beforePaste";
var beforeAutoFill = "beforeAutoFill";
var filterChoiceRequest = "filterchoicerequest";
var filterAfterOpen = "filterAfterOpen";
var filterBeforeOpen = "filterBeforeOpen";
var filterSearchBegin = "filterSearchBegin";
var initialLoad = "initial-load";
var initialEnd = "initial-end";
var dataReady = "data-ready";
var contentReady = "content-ready";
var uiUpdate = "ui-update";
var onEmpty = "on-empty";
var inBoundModelChanged = "inbound-model-changed";
var modelChanged = "model-changed";
var colGroupRefresh = "colgroup-refresh";
var headerRefreshed = "header-refreshed";
var pageComplete = "paging-complete";
var searchComplete = "searching-complete";
var groupComplete = "grouping-complete";
var groupAggregates = "group-aggregates";
var refreshFooterRenderer = "refresh-footer-rendered";
var refreshAggregateCell = "refresh-aggregate-cell";
var rowSelectionComplete = "rowselected";
var cellSelectionComplete = "cellselected";
var destroyAutoFillElements = "destroy-autofill-elements";
var beforeCellFocused = "beforecellfocused";
var cellFocused = "cellfocused";
var keyPressed = "key-pressed";
var click = "click";
var destroy = "destroy";
var columnVisibilityChanged = "column-visible-changed";
var scroll = "scroll";
var columnWidthChanged = "column-width-changed";
var columnPositionChanged = "column-position-changed";
var rowsAdded = "rows-added";
var rowsRemoved = "rows-removed";
var columnDragStop = "column-drag-stop";
var headerDrop = "header-drop";
var dataSourceModified = "datasource-modified";
var refreshComplete = "refresh-complete";
var dblclick = "dblclick";
var toolbarRefresh = "toolbar-refresh";
var bulkSave = "bulk-save";
var autoCol = "auto-col";
var tooltipDestroy = "tooltip-destroy";
var updateData = "update-data";
var preventBatch = "prevent-batch";
var crudAction = "crud-Action";
var addDeleteAction = "add-delete-Action";
var doubleTap = "double-tap";
var freezeRender = "freezerender";
var filterDialogCreated = "filterDialogCreated";
var filterMenuClose = "filter-menu-close";
var initForeignKeyColumn = "initForeignKeyColumn";
var getForeignKeyData = "getForeignKeyData";
var generateQuery = "generateQuery";
var showEmptyGrid = "showEmptyGrid";
var foreignKeyData = "foreignKeyData";
var dataStateChange = "dataStateChange";
var dataSourceChanged = "dataSourceChanged";
var rtlUpdated = "rtl-updated";
var beforeFragAppend = "beforeFragAppend";
var textWrapRefresh = "textWrapRefresh";
var recordAdded = "recordAdded";
var cancelBegin = "cancel-Begin";
var editNextValCell = "editNextValCell";
var hierarchyPrint = "hierarchyprint";
var expandChildGrid = "expandchildgrid";
var printGridInit = "printGrid-Init";
var rowPositionChanged = "row-position-changed";
var partialRefresh = "partial-refresh";
var selectVirtualRow = "select-virtual-Row";
var columnsPrepared = "columns-prepared";
var cBoxFltrBegin = "cbox-filter-begin";
var cBoxFltrComplete = "cbox-filter-complete";
var fltrPrevent = "filter-Prevent";
var filterCboxValue = "filter-cbox-value";
var restoreFocus = "restore-Focus";
var detailIndentCellInfo = "detail-indentcell-info";
var virtaulCellFocus = "virtaul-cell-focus";
var virtualScrollEdit = "virtual-scroll-edit";
var editReset = "edit-reset";
var getVirtualData = "get-virtual-data";
var refreshInfiniteModeBlocks = "refresh-infinite-mode-blocks";
var resetInfiniteBlocks = "reset-infinite-blocks";
var infiniteScrollHandler = "infinite-scroll-handler";
var infinitePageQuery = "infinite-page-query";
var infiniteShowHide = "infinite-show-hide";
var appendInfiniteContent = "append-infinite-content";
var removeInfiniteRows = "remove-infinite-rows";
var setInfiniteCache = "set-infinite-cache";
var infiniteEditHandler = "infinite-edit-handler";
var closeFilterDialog = "close-filter-dialog";
var resetColumns = "reset-columns";
var setGroupCache = "group-cache";
var lazyLoadScrollHandler = "lazy-load-scroll-handler";
var groupCollapse = "group-collapse";
var beforeCheckboxRenderer = "beforeCheckboxRenderer";
var refreshHandlers = "refreshResizeHandlers";
var setFreezeSelection = "set-freeze-selection";
var beforeRefreshOnDataChange = "before-refresh-on-data-change";
var immutableBatchCancel = "immutable-batch-cancel";
var checkScrollReset = "check-scroll-reset";
var preventFrozenScrollRefresh = "prevent-frozen-scroll-refresh";
var refreshInfiniteCurrentViewData = "refresh-infinite-current-view-data";
var filterDialogClose = "filter-dialog-close";
var refreshCustomFilterOkBtn = "refresh-cutsom-filter-ok-button";
var refreshCustomFilterClearBtn = "refresh-cutsom-filter-clear-button";
var renderResponsiveCmenu = "render-responsive-cmenu";
var filterCmenuSelect = "filter-cmenu-select";
var customFilterClose = "custom-filter-close";
var setFullScreenDialog = "set-fullscreen-dialog";
var refreshExpandandCollapse = "refresh-Expand-and-Collapse";
var rowModeChange = "row-mode-change";
var enterKeyHandler = "enter-key-handler";
var setVirtualPageQuery = "set-virtual-page-query";
var pagerRefresh = "pager-refresh";
var closeEdit = "close-edit";
var resetVirtualFocus = "reset-virtual-focus";
var beforeCheckboxRendererQuery = "before-checkbox-renderer-query";
var destroyChildGrid = "destroy-child-grid";
var stickyScrollComplete = "sticky-scroll-complete";
var refreshInfinitePersistSelection = "refresh-infinite-persist-selection";
var afterFilterColumnMenuClose = "after-filter-column-menu-close";
var beforeCheckboxfilterRenderer = "beforeCheckboxfilterRenderer";
var commandColumnDestroy = "commandColumnDestroy";
var batchCnfrmDlgCancel = "cancelcnfrmDlg";
var refreshFrozenPosition = "refresh-Frozen-Position";
var refreshResizePosition = "refresh-Resize-Position";
var refreshSplitFrozenColumn = "refresh-Split-Frozen-Column";
var renderResponsiveChangeAction = "render-Responsive-Change-Action";
var renderResponsiveColumnChooserDiv = "render-Responsive-Column-Chooser-Div";
var showAddNewRowFocus = "show-Add-New-Row-Focus";
var lastRowCellBorderUpdated = "last-rowcell-border-updated";
var destroyEditForm = "destroy-edit-form";
var detachDetailTemplate = "detach-detail-template";
var CellType;
(function(CellType2) {
  CellType2[CellType2["Data"] = 0] = "Data";
  CellType2[CellType2["Header"] = 1] = "Header";
  CellType2[CellType2["Summary"] = 2] = "Summary";
  CellType2[CellType2["GroupSummary"] = 3] = "GroupSummary";
  CellType2[CellType2["CaptionSummary"] = 4] = "CaptionSummary";
  CellType2[CellType2["Filter"] = 5] = "Filter";
  CellType2[CellType2["Indent"] = 6] = "Indent";
  CellType2[CellType2["GroupCaption"] = 7] = "GroupCaption";
  CellType2[CellType2["GroupCaptionEmpty"] = 8] = "GroupCaptionEmpty";
  CellType2[CellType2["Expand"] = 9] = "Expand";
  CellType2[CellType2["HeaderIndent"] = 10] = "HeaderIndent";
  CellType2[CellType2["StackedHeader"] = 11] = "StackedHeader";
  CellType2[CellType2["DetailHeader"] = 12] = "DetailHeader";
  CellType2[CellType2["DetailExpand"] = 13] = "DetailExpand";
  CellType2[CellType2["CommandColumn"] = 14] = "CommandColumn";
  CellType2[CellType2["DetailFooterIntent"] = 15] = "DetailFooterIntent";
  CellType2[CellType2["RowDragIcon"] = 16] = "RowDragIcon";
  CellType2[CellType2["RowDragHIcon"] = 17] = "RowDragHIcon";
})(CellType || (CellType = {}));
var RenderType;
(function(RenderType2) {
  RenderType2[RenderType2["Header"] = 0] = "Header";
  RenderType2[RenderType2["Content"] = 1] = "Content";
  RenderType2[RenderType2["Summary"] = 2] = "Summary";
})(RenderType || (RenderType = {}));
var ToolbarItem;
(function(ToolbarItem2) {
  ToolbarItem2[ToolbarItem2["Add"] = 0] = "Add";
  ToolbarItem2[ToolbarItem2["Edit"] = 1] = "Edit";
  ToolbarItem2[ToolbarItem2["Update"] = 2] = "Update";
  ToolbarItem2[ToolbarItem2["Delete"] = 3] = "Delete";
  ToolbarItem2[ToolbarItem2["Cancel"] = 4] = "Cancel";
  ToolbarItem2[ToolbarItem2["Print"] = 5] = "Print";
  ToolbarItem2[ToolbarItem2["Search"] = 6] = "Search";
  ToolbarItem2[ToolbarItem2["ColumnChooser"] = 7] = "ColumnChooser";
  ToolbarItem2[ToolbarItem2["PdfExport"] = 8] = "PdfExport";
  ToolbarItem2[ToolbarItem2["ExcelExport"] = 9] = "ExcelExport";
  ToolbarItem2[ToolbarItem2["CsvExport"] = 10] = "CsvExport";
  ToolbarItem2[ToolbarItem2["WordExport"] = 11] = "WordExport";
})(ToolbarItem || (ToolbarItem = {}));
var ResponsiveDialogAction;
(function(ResponsiveDialogAction2) {
  ResponsiveDialogAction2[ResponsiveDialogAction2["isEdit"] = 0] = "isEdit";
  ResponsiveDialogAction2[ResponsiveDialogAction2["isAdd"] = 1] = "isAdd";
  ResponsiveDialogAction2[ResponsiveDialogAction2["isSort"] = 2] = "isSort";
  ResponsiveDialogAction2[ResponsiveDialogAction2["isFilter"] = 3] = "isFilter";
  ResponsiveDialogAction2[ResponsiveDialogAction2["isColMenu"] = 4] = "isColMenu";
  ResponsiveDialogAction2[ResponsiveDialogAction2["isColumnChooser"] = 5] = "isColumnChooser";
})(ResponsiveDialogAction || (ResponsiveDialogAction = {}));
var ResponsiveToolbarAction;
(function(ResponsiveToolbarAction2) {
  ResponsiveToolbarAction2[ResponsiveToolbarAction2["isInitial"] = 0] = "isInitial";
  ResponsiveToolbarAction2[ResponsiveToolbarAction2["isSearch"] = 1] = "isSearch";
})(ResponsiveToolbarAction || (ResponsiveToolbarAction = {}));
var Data = (
  /** @class */
  function() {
    function Data2(parent, serviceLocator) {
      this.dataState = { isPending: false, resolver: null, group: [] };
      this.foreignKeyDataState = { isPending: false, resolver: null };
      this.parent = parent;
      this.serviceLocator = serviceLocator;
      this.initDataManager();
      if (this.parent.isDestroyed || this.getModuleName() === "foreignKey") {
        return;
      }
      this.parent.on(rowsAdded, this.addRows, this);
      this.parent.on(rowPositionChanged, this.reorderRows, this);
      this.parent.on(rowsRemoved, this.removeRows, this);
      this.parent.on(dataSourceModified, this.initDataManager, this);
      this.parent.on(destroy, this.destroy, this);
      this.parent.on(updateData, this.crudActions, this);
      this.parent.on(addDeleteAction, this.getData, this);
      this.parent.on(autoCol, this.refreshFilteredCols, this);
      this.parent.on(columnsPrepared, this.refreshFilteredCols, this);
    }
    Data2.prototype.reorderRows = function(e) {
      if (this.parent.getDataModule().isRemote()) {
        this.parent.getCurrentViewRecords().splice(e.toIndex, 0, this.parent.getCurrentViewRecords().splice(e.fromIndex, 1)[0]);
      } else {
        this.dataManager.dataSource.json.splice(e.toIndex, 0, this.dataManager.dataSource.json.splice(e.fromIndex, 1)[0]);
      }
    };
    Data2.prototype.getModuleName = function() {
      return "data";
    };
    Data2.prototype.initDataManager = function() {
      var gObj = this.parent;
      this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource : isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource);
      if (gObj.isAngular && !(gObj.query instanceof Query)) {
        gObj.setProperties({ query: new Query() }, true);
      } else {
        this.isQueryInvokedFromData = true;
        if (!(gObj.query instanceof Query)) {
          gObj.query = new Query();
        }
      }
    };
    Data2.prototype.generateQuery = function(skipPage, isAutoCompleteCall) {
      var gObj = this.parent;
      var query = !isNullOrUndefined(gObj.getQuery()) ? gObj.getQuery().clone() : new Query();
      if (this.parent.columnQueryMode === "ExcludeHidden") {
        query.select(this.parent.getColumns().filter(function(column) {
          return !(column.isPrimaryKey !== true && column.visible === false || column.field === void 0);
        }).map(function(column) {
          return column.field;
        }));
      } else if (this.parent.columnQueryMode === "Schema") {
        var selectQueryFields = [];
        var columns = this.parent.columns;
        for (var i = 0; i < columns.length; i++) {
          selectQueryFields.push(columns[parseInt(i.toString(), 10)].field);
        }
        query.select(selectQueryFields);
      }
      this.filterQuery(query);
      this.searchQuery(query);
      this.aggregateQuery(query);
      this.sortQuery(query);
      if (isGroupAdaptive(this.parent)) {
        this.virtualGroupPageQuery(query);
      } else {
        this.pageQuery(query, skipPage);
      }
      if (isNullOrUndefined(isAutoCompleteCall) || !isAutoCompleteCall) {
        this.groupQuery(query);
      }
      return query;
    };
    Data2.prototype.aggregateQuery = function(query) {
      var rows = this.parent.aggregates;
      for (var i = 0; i < rows.length; i++) {
        var row2 = rows[parseInt(i.toString(), 10)];
        for (var j = 0; j < row2.columns.length; j++) {
          var cols = row2.columns[parseInt(j.toString(), 10)];
          var types = cols.type instanceof Array ? cols.type : [cols.type];
          for (var k = 0; k < types.length; k++) {
            query.aggregate(types[parseInt(k.toString(), 10)].toLowerCase(), cols.field);
          }
        }
      }
      return query;
    };
    Data2.prototype.virtualGroupPageQuery = function(query) {
      var fName = "fn";
      if (query.queries.length) {
        for (var i = 0; i < query.queries.length; i++) {
          if (query.queries[parseInt(i.toString(), 10)]["" + fName] === "onPage") {
            query.queries.splice(i, 1);
          }
        }
      }
      return query;
    };
    Data2.prototype.pageQuery = function(query, skipPage) {
      var gObj = this.parent;
      var fName = "fn";
      var args = { query, skipPage: false };
      gObj.notify(setVirtualPageQuery, args);
      if (args.skipPage) {
        return query;
      }
      if ((gObj.allowPaging || gObj.enableVirtualization || gObj.enableInfiniteScrolling) && skipPage !== true) {
        gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);
        if (gObj.pageSettings.pageCount <= 0) {
          gObj.pageSettings.pageCount = 8;
        }
        if (gObj.pageSettings.pageSize <= 0) {
          gObj.pageSettings.pageSize = 12;
        }
        if (query.queries.length) {
          for (var i = 0; i < query.queries.length; i++) {
            if (query.queries[parseInt(i.toString(), 10)]["" + fName] === "onPage") {
              query.queries.splice(i, 1);
            }
          }
        }
        if (!isNullOrUndefined(gObj.infiniteScrollModule) && gObj.enableInfiniteScrolling) {
          this.parent.notify(infinitePageQuery, query);
        } else {
          query.page(gObj.pageSettings.currentPage, gObj.allowPaging && gObj.pagerModule && (gObj.pagerModule.pagerObj.isAllPage && !gObj.isManualRefresh) && (!this.dataManager.dataSource.offline && !(this.dataManager.adaptor instanceof RemoteSaveAdaptor)) ? null : gObj.pageSettings.pageSize);
        }
      }
      return query;
    };
    Data2.prototype.groupQuery = function(query) {
      var gObj = this.parent;
      if (gObj.allowGrouping && gObj.groupSettings.columns.length) {
        if (this.parent.groupSettings.enableLazyLoading) {
          query.lazyLoad.push({ key: "isLazyLoad", value: this.parent.groupSettings.enableLazyLoading });
        }
        var columns = gObj.groupSettings.columns;
        for (var i = 0, len = columns.length; i < len; i++) {
          var column = this.getColumnByField(columns[parseInt(i.toString(), 10)]);
          if (!column) {
            this.parent.log("initial_action", { moduleName: "group", columnName: columns[parseInt(i.toString(), 10)] });
          }
          var isGrpFmt = column.enableGroupByFormat;
          var format = column.format;
          if (isGrpFmt) {
            query.group(columns[parseInt(i.toString(), 10)], this.formatGroupColumn.bind(this), format);
          } else {
            query.group(columns[parseInt(i.toString(), 10)], null);
          }
        }
      }
      return query;
    };
    Data2.prototype.sortQuery = function(query) {
      var gObj = this.parent;
      if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {
        var columns = gObj.sortSettings.columns;
        var sortGrp = [];
        for (var i = columns.length - 1; i > -1; i--) {
          var col = this.getColumnByField(columns[parseInt(i.toString(), 10)].field);
          if (col) {
            col.setSortDirection(columns[parseInt(i.toString(), 10)].direction);
          } else {
            this.parent.log("initial_action", { moduleName: "sort", columnName: columns[parseInt(i.toString(), 10)].field });
            return query;
          }
          var fn = columns[parseInt(i.toString(), 10)].direction;
          if (col.sortComparer) {
            this.parent.log("grid_sort_comparer");
            fn = !this.isRemote() ? col.sortComparer.bind(col) : columns[parseInt(i.toString(), 10)].direction;
          }
          if (gObj.groupSettings.columns.indexOf(columns[parseInt(i.toString(), 10)].field) === -1) {
            if (col.isForeignColumn() || col.sortComparer) {
              query.sortByForeignKey(col.field, fn, void 0, columns[parseInt(i.toString(), 10)].direction.toLowerCase());
            } else {
              query.sortBy(col.field, fn);
            }
          } else {
            sortGrp.push({ direction: fn, field: col.field });
          }
        }
        for (var i = 0, len = sortGrp.length; i < len; i++) {
          if (typeof sortGrp[parseInt(i.toString(), 10)].direction === "string") {
            query.sortBy(sortGrp[parseInt(i.toString(), 10)].field, sortGrp[parseInt(i.toString(), 10)].direction);
          } else {
            var col = this.getColumnByField(sortGrp[parseInt(i.toString(), 10)].field);
            query.sortByForeignKey(sortGrp[parseInt(i.toString(), 10)].field, sortGrp[parseInt(i.toString(), 10)].direction, void 0, col.getSortDirection().toLowerCase());
          }
        }
      }
      return query;
    };
    Data2.prototype.searchQuery = function(query, fcolumn, isForeignKey) {
      var sSettings = this.parent.searchSettings;
      var fields = !isNullOrUndefined(sSettings.fields) && sSettings.fields.length ? sSettings.fields : this.getSearchColumnFieldNames();
      var predicateList = [];
      var needForeignKeySearch = false;
      if (!isNullOrUndefined(this.parent.searchSettings.key) && this.parent.searchSettings.key.length) {
        needForeignKeySearch = this.parent.getForeignKeyColumns().some(function(col) {
          return fields.indexOf(col.field) > -1;
        });
        var adaptor = !isForeignKey ? this.dataManager.adaptor : fcolumn.dataSource.adaptor;
        if (needForeignKeySearch || adaptor.getModuleName && adaptor.getModuleName() === "ODataV4Adaptor") {
          fields = isForeignKey ? [fcolumn.foreignKeyValue] : fields;
          for (var i = 0; i < fields.length; i++) {
            var column = isForeignKey ? fcolumn : this.getColumnByField(fields[parseInt(i.toString(), 10)]);
            if (column.isForeignColumn() && !isForeignKey) {
              predicateList = this.fGeneratePredicate(column, predicateList);
            } else {
              predicateList.push(new Predicate$1(fields[parseInt(i.toString(), 10)], sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));
            }
          }
          var predList = Predicate$1.or(predicateList);
          predList.key = sSettings.key;
          query.where(predList);
        } else {
          query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);
        }
      }
      return query;
    };
    Data2.prototype.filterQuery = function(query, column, skipFoerign) {
      var gObj = this.parent;
      var predicateList = [];
      var foreignColumn = this.parent.getForeignKeyColumns();
      var foreignColEmpty;
      if (gObj.allowFiltering && gObj.filterSettings.columns.length) {
        var columns = column ? column : gObj.filterSettings.columns;
        var colType = {};
        for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {
          var col = _a[_i];
          colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;
        }
        var foreignCols = [];
        var defaultFltrCols = [];
        for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {
          var col = columns_1[_b];
          var gridColumn = col.isForeignKey ? gObj.getColumnByUid(col.uid) : gObj.getColumnByField(col.field);
          if (isNullOrUndefined(col.type) && gridColumn && (gridColumn.type === "date" || gridColumn.type === "datetime" || gridColumn.type === "dateonly")) {
            col.type = col.isForeignKey ? gObj.getColumnByUid(col.uid).type : gObj.getColumnByField(col.field).type;
          }
          if (col.isForeignKey) {
            foreignCols.push(col);
          } else {
            defaultFltrCols.push(col);
          }
        }
        if (defaultFltrCols.length) {
          for (var i = 0, len = defaultFltrCols.length; i < len; i++) {
            defaultFltrCols[parseInt(i.toString(), 10)].uid = defaultFltrCols[parseInt(i.toString(), 10)].uid || this.parent.grabColumnByFieldFromAllCols(defaultFltrCols[parseInt(i.toString(), 10)].field, defaultFltrCols[parseInt(i.toString(), 10)].isForeignKey).uid;
          }
          var excelPredicate = CheckBoxFilterBase.getPredicate(defaultFltrCols);
          for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {
            var prop = _d[_c];
            predicateList.push(excelPredicate["" + prop]);
          }
        }
        if (foreignCols.length) {
          for (var _e = 0, foreignCols_1 = foreignCols; _e < foreignCols_1.length; _e++) {
            var col = foreignCols_1[_e];
            col.uid = col.uid || this.parent.grabColumnByFieldFromAllCols(col.field, col.isForeignKey).uid;
            var column_1 = this.parent.grabColumnByUidFromAllCols(col.uid);
            if (!column_1) {
              this.parent.log("initial_action", { moduleName: "filter", columnName: col.field });
            }
            if (column_1.isForeignColumn() && getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {
              if (!column_1.columnData.length) {
                foreignColEmpty = true;
              }
              predicateList = this.fGeneratePredicate(column_1, predicateList);
            } else {
              var excelPredicate = CheckBoxFilterBase.getPredicate(columns);
              for (var _f = 0, _g = Object.keys(excelPredicate); _f < _g.length; _f++) {
                var prop = _g[_f];
                predicateList.push(excelPredicate["" + prop]);
              }
            }
          }
        }
        if (predicateList.length && !foreignColEmpty) {
          query.where(Predicate$1.and(predicateList));
        } else {
          this.parent.notify(showEmptyGrid, {});
        }
      }
      return query;
    };
    Data2.prototype.fGeneratePredicate = function(col, predicateList) {
      var fPredicate = {};
      if (col) {
        this.parent.notify(generateQuery, { predicate: fPredicate, column: col });
        if (fPredicate.predicate.predicates.length) {
          predicateList.push(fPredicate.predicate);
        }
      }
      return predicateList;
    };
    Data2.prototype.getData = function(args, query) {
      var _this = this;
      if (args === void 0) {
        args = { requestType: "" };
      }
      var key = this.getKey(args.foreignKeyData && Object.keys(args.foreignKeyData).length ? args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());
      this.parent.log("datasource_syntax_mismatch", { dataState: this.parent });
      if (this.parent.dataSource && "result" in this.parent.dataSource) {
        var def = this.eventPromise(args, query, key);
        return def.promise;
      } else {
        var crud = void 0;
        switch (args.requestType) {
          case "delete":
            query = query ? query : this.generateQuery();
            var len = Object.keys(args.data).length;
            if (len === 1) {
              crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);
            } else {
              var changes = {
                addedRecords: [],
                deletedRecords: [],
                changedRecords: []
              };
              changes.deletedRecords = args.data;
              crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());
            }
            break;
          case "save":
            query = query ? query : this.generateQuery();
            args.index = isNullOrUndefined(args.index) ? 0 : args.index;
            crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);
            break;
        }
        var promise = "promise";
        args["" + promise] = crud;
        if (crud && !Array.isArray(crud) && !crud.hasOwnProperty("deletedRecords")) {
          return crud.then(function() {
            return _this.insert(query, args);
          });
        } else {
          return this.insert(query, args);
        }
      }
    };
    Data2.prototype.insert = function(query, args) {
      if (args.requestType === "save") {
        args.query = query;
        this.parent.notify(recordAdded, args);
      }
      return this.executeQuery(query);
    };
    Data2.prototype.executeQuery = function(query) {
      var _this = this;
      if (this.dataManager.ready) {
        var deferred_1 = new Deferred();
        var ready = this.dataManager.ready;
        ready.then(function() {
          _this.dataManager.executeQuery(query).then(function(result) {
            deferred_1.resolve(result);
          });
        }).catch(function(e) {
          deferred_1.reject(e);
        });
        return deferred_1.promise;
      } else {
        return this.dataManager.executeQuery(query);
      }
    };
    Data2.prototype.formatGroupColumn = function(value, field) {
      var serviceLocator = this.serviceLocator;
      var column = this.getColumnByField(field);
      var date = value;
      if (!column.type) {
        column.type = date.getDay ? date.getHours() > 0 || date.getMinutes() > 0 || date.getSeconds() > 0 || date.getMilliseconds() > 0 ? "datetime" : "date" : typeof value;
      }
      if (isNullOrUndefined(column.getFormatter())) {
        setFormatter(serviceLocator, column);
      }
      var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());
      return formatVal;
    };
    Data2.prototype.crudActions = function(args) {
      var query = this.generateQuery();
      var promise = null;
      var pr = "promise";
      var key = this.getKey(args.foreignKeyData && Object.keys(args.foreignKeyData).length ? args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());
      if (this.parent.dataSource && "result" in this.parent.dataSource) {
        this.eventPromise(args, query, key);
      }
      switch (args.requestType) {
        case "save":
          promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);
          break;
      }
      args["" + pr] = promise ? promise : args["" + pr];
      this.parent.notify(crudAction, args);
    };
    Data2.prototype.saveChanges = function(changes, key, original, query) {
      if (query === void 0) {
        query = this.generateQuery();
      }
      query.requiresCount();
      if ("result" in this.parent.dataSource) {
        var deff = new Deferred();
        var args = {
          requestType: "batchsave",
          changes,
          key,
          query,
          endEdit: deff.resolve
        };
        this.setState({ isPending: true, resolver: deff.resolve });
        this.parent.trigger(dataSourceChanged, args);
        return deff.promise;
      } else {
        var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);
        return promise;
      }
    };
    Data2.prototype.getKey = function(keys2) {
      if (keys2 && keys2.length) {
        return keys2[0];
      }
      return void 0;
    };
    Data2.prototype.isRemote = function() {
      return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== void 0 && this.dataManager.dataSource.url !== "";
    };
    Data2.prototype.addRows = function(e) {
      for (var i = e.records.length; i > 0; i--) {
        if (this.parent.dataSource instanceof DataManager && this.dataManager.dataSource.offline) {
          this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);
        } else if (!this.parent.getDataModule().isRemote() && !isNullOrUndefined(this.parent.dataSource) && !this.parent.dataSource.result) {
          this.parent.dataSource["splice"](e.toIndex, 0, e.records[i - 1]);
        }
      }
    };
    Data2.prototype.removeRows = function(e) {
      var json = this.dataManager.dataSource.json;
      if (this.parent.dataSource instanceof DataManager && this.dataManager.dataSource.offline) {
        this.dataManager.dataSource.json = json.filter(function(value) {
          return e.records.indexOf(value) === -1;
        });
      } else if (!this.parent.getDataModule().isRemote() && !isNullOrUndefined(this.parent.dataSource) && !this.parent.dataSource.result) {
        this.parent.dataSource = json.filter(function(value) {
          return e.records.indexOf(value) === -1;
        });
      }
    };
    Data2.prototype.getColumnByField = function(field) {
      var col;
      return this.parent.columnModel.some(function(column) {
        col = column;
        return column.field === field;
      }) && col;
    };
    Data2.prototype.destroy = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.off(rowsAdded, this.addRows);
      this.parent.off(rowsRemoved, this.removeRows);
      this.parent.off(dataSourceModified, this.initDataManager);
      this.parent.off(destroy, this.destroy);
      this.parent.off(updateData, this.crudActions);
      this.parent.off(addDeleteAction, this.getData);
      this.parent.off(autoCol, this.refreshFilteredCols);
      this.parent.off(columnsPrepared, this.refreshFilteredCols);
    };
    Data2.prototype.getState = function() {
      return this.dataState;
    };
    Data2.prototype.setState = function(state) {
      return this.dataState = state;
    };
    Data2.prototype.getForeignKeyDataState = function() {
      return this.foreignKeyDataState;
    };
    Data2.prototype.setForeignKeyDataState = function(state) {
      this.foreignKeyDataState = state;
    };
    Data2.prototype.getStateEventArgument = function(query) {
      var adaptr = new UrlAdaptor();
      var dm = new DataManager({ url: "", adaptor: new UrlAdaptor() });
      var state = adaptr.processQuery(dm, query);
      var data = JSON.parse(state.data);
      return extend$1(data, state.pvtData);
    };
    Data2.prototype.eventPromise = function(args, query, key) {
      var _this = this;
      var dataArgs = args;
      var state = this.getStateEventArgument(query);
      var def = new Deferred();
      var deff = new Deferred();
      if ((args.requestType !== void 0 || this.parent.groupSettings.disablePageWiseAggregates && query.queries.some(function(query2) {
        return query2.fn === "onGroup";
      })) && this.dataState.isDataChanged !== false) {
        state.action = args;
        if (args.requestType === "save" || args.requestType === "delete" || args.requestType === "batchsave") {
          var editArgs_1 = args;
          editArgs_1.key = key;
          var promise = "promise";
          editArgs_1["" + promise] = deff.promise;
          editArgs_1.state = state;
          this.setState({ isPending: true, resolver: deff.resolve });
          dataArgs.endEdit = deff.resolve;
          dataArgs.cancelEdit = deff.reject;
          this.parent.trigger(dataSourceChanged, editArgs_1);
          deff.promise.then(function() {
            _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });
            if (editArgs_1.requestType === "save") {
              _this.parent.notify(recordAdded, editArgs_1);
            }
            _this.parent.trigger(dataStateChange, state);
          }).catch(function() {
            return void 0;
          });
        } else {
          this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });
          this.parent.trigger(dataStateChange, state);
        }
      } else {
        this.setState({});
        def.resolve(this.parent.dataSource);
      }
      return def;
    };
    Data2.prototype.getSearchColumnFieldNames = function() {
      var colFieldNames = [];
      var columns = this.parent.getColumns();
      for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {
        var col = columns_2[_i];
        if (col.allowSearching && !isNullOrUndefined(col.field)) {
          colFieldNames.push(col.field);
        }
      }
      return colFieldNames;
    };
    Data2.prototype.refreshFilteredCols = function() {
      if (this.parent.allowFiltering && this.parent.filterSettings.columns.length) {
        refreshFilteredColsUid(this.parent, this.parent.filterSettings.columns);
      }
    };
    return Data2;
  }()
);
var Row = (
  /** @class */
  function() {
    function Row2(options, parent) {
      merge(this, options);
      this.parent = parent;
    }
    Row2.prototype.clone = function() {
      var row2 = new Row2({});
      merge(row2, this);
      row2.cells = this.cells.map(function(cell) {
        return cell.clone();
      });
      return row2;
    };
    Row2.prototype.setRowValue = function(data) {
      if (!this.parent) {
        return;
      }
      var key = this.data[this.parent.getPrimaryKeyFieldNames()[0]];
      this.parent.setRowData(key, data);
    };
    Row2.prototype.setCellValue = function(field, value) {
      if (!this.parent) {
        return;
      }
      var isValDiff = !(this.data["" + field].toString() === value.toString());
      if (isValDiff) {
        var pKeyField = this.parent.getPrimaryKeyFieldNames()[0];
        var key = this.data["" + pKeyField];
        this.parent.setCellValue(key, field, value);
        this.makechanges(pKeyField, this.data);
      } else {
        return;
      }
    };
    Row2.prototype.makechanges = function(key, data) {
      if (!this.parent) {
        return;
      }
      var gObj = this.parent;
      var dataManager = gObj.getDataModule().dataManager;
      dataManager.update(key, data);
    };
    return Row2;
  }()
);
var Cell = (
  /** @class */
  function() {
    function Cell2(options) {
      this.isSpanned = false;
      this.isRowSpanned = false;
      merge(this, options);
    }
    Cell2.prototype.clone = function() {
      var cell = new Cell2({});
      merge(cell, this);
      return cell;
    };
    return Cell2;
  }()
);
var CellMergeRender = (
  /** @class */
  function() {
    function CellMergeRender2(serviceLocator, parent) {
      this.serviceLocator = serviceLocator;
      this.parent = parent;
    }
    CellMergeRender2.prototype.render = function(cellArgs, row2, i, td) {
      var cellRendererFact = this.serviceLocator.getService("cellRendererFactory");
      var cellRenderer = cellRendererFact.getCellRenderer(row2.cells[parseInt(i.toString(), 10)].cellType || CellType.Data);
      var colSpan = row2.cells[parseInt(i.toString(), 10)].cellSpan ? row2.cells[parseInt(i.toString(), 10)].cellSpan : cellArgs.colSpan ? cellArgs.colSpan + i <= row2.cells.length ? cellArgs.colSpan : row2.cells.length - i : 1;
      var rowSpan = cellArgs.rowSpan;
      var visible = 0;
      var spannedCell;
      if (row2.index > 0) {
        var rowsObject = this.parent.getRowsObject();
        var cells = this.parent.groupSettings.columns.length > 0 && !rowsObject[row2.index - 1].isDataRow ? rowsObject[row2.index].cells : rowsObject[row2.index - 1].cells;
        var targetCell_1 = row2.cells[parseInt(i.toString(), 10)];
        var uid_1 = "uid";
        spannedCell = cells.filter(function(cell) {
          return cell.column.uid === targetCell_1.column["" + uid_1];
        })[0];
      }
      var colSpanLen = spannedCell && spannedCell.colSpanRange > 1 && spannedCell.rowSpanRange > 1 ? spannedCell.colSpanRange : colSpan;
      for (var j = i + 1; j < i + colSpanLen && j < row2.cells.length; j++) {
        if (row2.cells[parseInt(j.toString(), 10)].visible === false) {
          visible++;
        } else {
          row2.cells[parseInt(j.toString(), 10)].isSpanned = true;
        }
      }
      if (visible > 0) {
        for (var j = i + colSpan; j < i + colSpan + visible && j < row2.cells.length; j++) {
          row2.cells[parseInt(j.toString(), 10)].isSpanned = true;
        }
        if (i + colSpan + visible >= row2.cells.length) {
          colSpan -= i + colSpan + visible - row2.cells.length;
        }
      }
      if (row2.cells[parseInt(i.toString(), 10)].cellSpan) {
        row2.data[cellArgs.column.field] = row2.cells[parseInt(i.toString(), 10)].spanText;
        td = cellRenderer.render(row2.cells[parseInt(i.toString(), 10)], row2.data, { "index": !isNullOrUndefined(row2.index) ? row2.index.toString() : "" });
      }
      if (colSpan > 1) {
        attributes(td, { "colSpan": colSpan.toString(), "aria-colSpan": colSpan.toString() });
      }
      if (rowSpan > 1) {
        attributes(td, { "rowspan": rowSpan.toString(), "aria-rowspan": rowSpan.toString() });
        row2.cells[parseInt(i.toString(), 10)].isRowSpanned = true;
        row2.cells[parseInt(i.toString(), 10)].rowSpanRange = Number(rowSpan);
        if (colSpan > 1) {
          row2.cells[parseInt(i.toString(), 10)].colSpanRange = Number(colSpan);
        }
      }
      if (row2.index > 0 && spannedCell.rowSpanRange > 1) {
        row2.cells[parseInt(i.toString(), 10)].isSpanned = true;
        row2.cells[parseInt(i.toString(), 10)].rowSpanRange = Number(spannedCell.rowSpanRange - 1);
        row2.cells[parseInt(i.toString(), 10)].colSpanRange = spannedCell.rowSpanRange > 0 ? spannedCell.colSpanRange : 1;
      }
      if (this.parent.enableColumnVirtualization && !row2.cells[parseInt(i.toString(), 10)].cellSpan && !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {
        this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);
      }
      return td;
    };
    CellMergeRender2.prototype.backupMergeCells = function(fName, data, span) {
      this.setMergeCells(this.generteKey(fName, data), span);
    };
    CellMergeRender2.prototype.generteKey = function(fname, data) {
      return fname + "__" + data.toString();
    };
    CellMergeRender2.prototype.splitKey = function(key) {
      return key.split("__");
    };
    CellMergeRender2.prototype.containsKey = function(fname, data) {
      return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));
    };
    CellMergeRender2.prototype.getMergeCells = function() {
      return this.parent.mergeCells;
    };
    CellMergeRender2.prototype.setMergeCells = function(key, span) {
      this.parent.mergeCells["" + key] = span;
    };
    CellMergeRender2.prototype.updateVirtualCells = function(rows) {
      var mCells = this.getMergeCells();
      for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {
        var key = _a[_i];
        var value = mCells["" + key];
        var merge2 = this.splitKey(key);
        var columnIndex = this.getIndexFromAllColumns(merge2[0]);
        var vColumnIndices = this.parent.getColumnIndexesInView();
        var span = value - (vColumnIndices[0] - columnIndex);
        if (columnIndex < vColumnIndices[0] && span > 1) {
          for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {
            var row2 = rows_1[_b];
            if (row2.data[merge2[0]].toString() === merge2[1].toString()) {
              row2.cells[0].cellSpan = span;
              row2.cells[0].spanText = merge2[1];
              break;
            }
          }
        }
      }
      return rows;
    };
    CellMergeRender2.prototype.getIndexFromAllColumns = function(field) {
      var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function(item, index2) {
        if (item.field === field) {
          return index2;
        }
        return void 0;
      })[0];
      return index;
    };
    return CellMergeRender2;
  }()
);
var rowCell = "e-rowcell";
var gridHeader = "e-gridheader";
var gridContent = "e-gridcontent";
var gridFooter = "e-gridfooter";
var headerContent = "e-headercontent";
var movableContent = "e-movablecontent";
var movableHeader = "e-movableheader";
var content = "e-content";
var table = "e-table";
var row = "e-row";
var gridChkBox = "e-gridchkbox";
var editedRow = "e-editedrow";
var addedRow = "e-addedrow";
var changedRecords = "changedRecords";
var addedRecords = "addedRecords";
var deletedRecords = "deletedRecords";
var leftRight = "Left-Right";
var frozenRight = "frozen-right";
var ariaColIndex = "aria-colindex";
var ariaRowIndex = "aria-rowindex";
var tbody = "tbody";
var colGroup = "colgroup";
var create = "created";
var initialFrozenColumnIndex = "initialFrozenColumnIndex";
var RowRenderer = (
  /** @class */
  function() {
    function RowRenderer2(serviceLocator, cellType, parent) {
      this.isSpan = false;
      this.cellType = cellType;
      this.serviceLocator = serviceLocator;
      this.parent = parent;
      this.element = this.parent.createElement("tr", { attrs: { role: "row" } });
    }
    RowRenderer2.prototype.render = function(row2, columns, attributes2, rowTemplate, cloneNode) {
      return this.refreshRow(row2, columns, attributes2, rowTemplate, cloneNode);
    };
    RowRenderer2.prototype.refresh = function(row2, columns, isChanged, attributes2, rowTemplate) {
      var _this = this;
      if (isChanged) {
        row2.data = extendObjWithFn({}, row2.changes);
        this.refreshMergeCells(row2);
      }
      var node = this.parent.element.querySelector("[data-uid=" + row2.uid + "]");
      var tr = this.refreshRow(row2, columns, attributes2, rowTemplate, null, isChanged);
      var cells = [].slice.call(tr.cells);
      var tempCells = [].slice.call(node.querySelectorAll(".e-templatecell"));
      if (this.parent.isReact && tempCells.length) {
        var _loop_1 = function(col2) {
          if (col2.template) {
            setTimeout(function() {
              _this.parent.refreshReactColumnTemplateByUid(col2.uid, true);
            }, 0);
            return "break";
          }
        };
        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {
          var col = columns_1[_i];
          var state_1 = _loop_1(col);
          if (state_1 === "break")
            break;
        }
      }
      var attr = [].slice.call(tr.attributes);
      attr.map(function(item) {
        node.setAttribute(item["name"], item["value"]);
      });
      node.innerHTML = "";
      for (var _a = 0, cells_1 = cells; _a < cells_1.length; _a++) {
        var cell = cells_1[_a];
        node.appendChild(cell);
      }
    };
    RowRenderer2.prototype.refreshRow = function(row2, columns, attributes$1, rowTemplate, cloneNode, isEdit) {
      var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();
      var rowArgs = { data: row2.data };
      var cellArgs = { data: row2.data };
      var chekBoxEnable = this.parent.getColumns().filter(function(col) {
        return col.type === "checkbox" && col.field;
      })[0];
      var value = false;
      var isFrozen = this.parent.isFrozenGrid();
      var isFirstVisibleCell = true;
      if (chekBoxEnable) {
        value = getObject(chekBoxEnable.field, rowArgs.data);
      }
      var selIndex = this.parent.getSelectedRowIndexes();
      if (row2.isDataRow) {
        row2.isSelected = selIndex.indexOf(row2.index) > -1 || value;
      }
      if (row2.isDataRow && this.parent.isCheckBoxSelection && this.parent.checkAllRows === "Check" && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {
        row2.isSelected = true;
        if (selIndex.indexOf(row2.index) === -1) {
          selIndex.push(row2.index);
        }
      }
      this.buildAttributeFromRow(tr, row2);
      attributes(tr, extend$1({}, attributes$1, {}));
      setStyleAndAttributes(tr, row2.attributes);
      var cellRendererFact = this.serviceLocator.getService("cellRendererFactory");
      var _loop_2 = function(i2, len2) {
        var cell = row2.cells[parseInt(i2.toString(), 10)];
        cell.isSelected = row2.isSelected;
        cell.isColumnSelected = cell.column.isSelected;
        var cellRenderer = cellRendererFact.getCellRenderer(row2.cells[parseInt(i2.toString(), 10)].cellType || CellType.Data);
        var attrs = { "index": !isNullOrUndefined(row2.index) ? row2.index.toString() : "" };
        if (row2.isExpand && row2.cells[parseInt(i2.toString(), 10)].cellType === CellType.DetailExpand) {
          attrs["class"] = this_1.parent.isPrinting ? "e-detailrowcollapse" : "e-detailrowexpand";
        }
        var isGroupFirstCell = !this_1.parent.enableRtl && this_1.parent.groupSettings && isFirstVisibleCell && this_1.parent.groupSettings.columns.length && (this_1.parent.gridLines === "Vertical" || this_1.parent.gridLines === "Both");
        var td2 = cellRenderer.render(row2.cells[parseInt(i2.toString(), 10)], row2.data, attrs, row2.isExpand, isEdit);
        if (row2.cells[parseInt(i2.toString(), 10)].cellType !== CellType.Filter) {
          if (row2.cells[parseInt(i2.toString(), 10)].cellType === CellType.Data || row2.cells[parseInt(i2.toString(), 10)].cellType === CellType.CommandColumn) {
            if (cell.visible && isGroupFirstCell) {
              td2.classList.add("e-grid-group-first-cell");
              isFirstVisibleCell = false;
            }
            var isReactChild2 = this_1.parent.parentDetails && this_1.parent.parentDetails.parentInstObj && this_1.parent.parentDetails.parentInstObj.isReact;
            var isReactPrintGrid = this_1.parent.printGridParent && this_1.parent.printGridParent.isReact;
            if ((this_1.parent.isReact && this_1.parent.requireTemplateRef || isReactChild2 && this_1.parent.parentDetails.parentInstObj.requireTemplateRef || isReactPrintGrid && this_1.parent.printGridParent.requireTemplateRef) && cell.isTemplate) {
              var thisRef_1 = this_1;
              thisRef_1.parent.renderTemplates(function() {
                if (typeof cell.column.template !== "string") {
                  var ariaAttr = td2.getAttribute("aria-label");
                  td2.setAttribute("aria-label", td2.innerText + ariaAttr);
                }
                thisRef_1.parent.trigger(queryCellInfo, extend$1(cellArgs, {
                  cell: td2,
                  column: cell.column,
                  colSpan: 1,
                  rowSpan: 1,
                  foreignKeyData: row2.cells[parseInt(i2.toString(), 10)].foreignKeyData,
                  requestType: thisRef_1.parent.requestTypeAction
                }));
              });
            } else {
              this_1.parent.trigger(queryCellInfo, extend$1(cellArgs, {
                cell: td2,
                column: cell.column,
                colSpan: 1,
                rowSpan: 1,
                foreignKeyData: row2.cells[parseInt(i2.toString(), 10)].foreignKeyData,
                requestType: this_1.parent.requestTypeAction
              }));
            }
            var isRowSpanned = false;
            if (row2.index > 0 && (this_1.isSpan || this_1.parent.isSpan && isEdit)) {
              var rowsObject = this_1.parent.getRowsObject();
              var prevRowCells = this_1.parent.groupSettings.columns.length > 0 && !rowsObject[row2.index - 1].isDataRow ? rowsObject[row2.index].cells : rowsObject[row2.index - 1].cells;
              var uid_1 = "uid";
              var prevRowCell = prevRowCells.filter(function(cell2) {
                return cell2.column.uid === row2.cells[parseInt(i2.toString(), 10)].column["" + uid_1];
              })[0];
              isRowSpanned = prevRowCell.isRowSpanned ? prevRowCell.isRowSpanned : prevRowCell.rowSpanRange > 1;
            }
            if (cellArgs.rowSpan > 1 || cellArgs.colSpan > 1) {
              this_1.resetrowSpanvalue(this_1.parent.frozenRows > row2.index ? this_1.parent.frozenRows : this_1.parent.currentViewData.length, cellArgs, row2.index);
              if (cellArgs.column.visible === false) {
                cellArgs.colSpan = 1;
              } else {
                if (isFrozen) {
                  var columns_2 = this_1.parent.getColumns();
                  var right = this_1.parent.getFrozenRightColumnsCount();
                  var left = this_1.parent.getFrozenLeftCount();
                  var movableCount = columns_2.length - right;
                  var cellIdx = cellArgs.column.index;
                  if (left > cellIdx && left < cellIdx + cellArgs.colSpan) {
                    var colSpan = cellIdx + cellArgs.colSpan - left;
                    cellArgs.colSpan = cellArgs.colSpan - colSpan;
                  } else if (movableCount <= cellIdx && columns_2.length < cellIdx + cellArgs.colSpan) {
                    var colSpan = cellIdx + cellArgs.colSpan - columns_2.length;
                    cellArgs.colSpan = cellArgs.colSpan - colSpan;
                  } else if (cellArgs.column.freeze === "Fixed") {
                    var colSpan = 1;
                    var index = cellIdx;
                    for (var j2 = index + 1; j2 < index + cellArgs.colSpan; j2++) {
                      if (columns_2[parseInt(j2.toString(), 10)].freeze === "Fixed") {
                        colSpan++;
                      } else {
                        break;
                      }
                    }
                    cellArgs.colSpan = colSpan;
                  } else if (movableCount > cellIdx && movableCount < cellIdx + cellArgs.colSpan) {
                    var colSpan = cellIdx + cellArgs.colSpan - movableCount;
                    cellArgs.colSpan = cellArgs.colSpan - colSpan;
                  }
                }
              }
            }
            if (cellArgs.colSpan > 1 || row2.cells[parseInt(i2.toString(), 10)].cellSpan > 1 || cellArgs.rowSpan > 1 || isRowSpanned) {
              this_1.parent.isSpan = true;
              this_1.isSpan = true;
              var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);
              td2 = cellMerge.render(cellArgs, row2, i2, td2);
              if (isFrozen) {
                resetColandRowSpanStickyPosition(this_1.parent, cellArgs.column, td2, cellArgs.colSpan);
              }
            }
          }
          if ((cell.cellType === CellType.Header || cell.cellType === CellType.StackedHeader) && isGroupFirstCell && (cell.visible || cell.cellType === CellType.StackedHeader)) {
            var visibleColumns = this_1.parent.getVisibleColumns();
            var field = "field";
            var type = "type";
            if (cell.column["" + type] && cell.column["" + type] === "checkbox" || cell.cellType === CellType.Header && cell.column["" + field] && visibleColumns.length && visibleColumns[0].field === cell.column["" + field] || cell.cellType === CellType.StackedHeader) {
              td2.classList.add("e-grid-group-first-cell");
              isFirstVisibleCell = false;
            }
          }
          if (cell.cellType === CellType.Header && (row2.cells[parseInt(i2.toString(), 10)].colSpan > 1 || row2.cells[parseInt(i2.toString(), 10)].rowSpan > 1)) {
            var cellMerge = new CellMergeRender(this_1.serviceLocator, this_1.parent);
            td2 = cellMerge.render(row2.cells[parseInt(i2.toString(), 10)], row2, i2, td2);
          }
          if (this_1.isSpan) {
            var rowsObject = this_1.parent.getRowsObject();
            var isRtl = this_1.parent.enableRtl;
            if (rowsObject[row2.index - 1]) {
              var prevRowCells = rowsObject[row2.index - 1].cells;
              var prevRowCell = prevRowCells[i2 - 1];
              var currentRowCell = prevRowCells[parseInt(i2.toString(), 10)];
              var nextRowCell = prevRowCells[i2 + 1];
              var direction = prevRowCells[parseInt(i2.toString(), 10)].column.freeze;
              if (prevRowCell && (prevRowCell.isRowSpanned || prevRowCell.rowSpanRange > 1) && prevRowCell.visible) {
                if (!isRtl && (!currentRowCell.isRowSpanned || prevRowCell.rowSpanRange > currentRowCell.rowSpanRange)) {
                  td2.classList.add("e-rowcell-firstchild");
                }
                if (isFrozen) {
                  if (prevRowCell.column.freeze === "Fixed" && direction === "Fixed") {
                    td2.classList.add(isRtl ? "e-removefreezerightborder" : "e-removefreezeleftborder");
                  } else if (!isRtl && i2 === 1 && direction === "Left") {
                    td2.classList.add("e-addfreezefirstchildborder");
                  }
                }
              }
              if (nextRowCell && (nextRowCell.isRowSpanned || nextRowCell.rowSpanRange > 1) && nextRowCell.visible) {
                if (isRtl && (!currentRowCell.isRowSpanned || nextRowCell.rowSpanRange > currentRowCell.rowSpanRange)) {
                  td2.classList.add("e-rowcell-lastchild");
                }
                if (isFrozen && nextRowCell.column.freeze === "Fixed" && direction === "Fixed" && cellArgs.colSpan < 2) {
                  td2.classList.add(isRtl ? "e-removefreezeleftborder" : "e-removefreezerightborder");
                }
              }
            }
          }
          if (cellArgs.rowSpan > 1 && this_1.parent.currentViewData.length - row2.index === cellArgs.rowSpan) {
            td2.classList.add("e-row-span-lastrowcell");
          }
          if (!row2.cells[parseInt(i2.toString(), 10)].isSpanned) {
            tr.appendChild(td2);
          }
        }
      };
      var this_1 = this;
      for (var i = 0, len = row2.cells.length; i < len; i++) {
        _loop_2(i);
      }
      var emptyColspan = 0;
      if (this.parent.groupSettings.columns.length && this.parent.getFrozenLeftColumnsCount()) {
        if (tr.classList.contains("e-groupcaptionrow")) {
          var freezeCells = [].slice.call(tr.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));
          if (freezeCells.length) {
            removeClass(freezeCells, ["e-leftfreeze", "e-unfreeze", "e-rightfreeze", "e-fixedfreeze", "e-freezerightborder", "e-freezeleftborder"]);
          }
          if (tr.querySelector(".e-summarycell")) {
            groupCaptionRowLeftRightPos(tr, this.parent);
          } else {
            for (var j = 0; j < tr.childNodes.length; j++) {
              var td = tr.childNodes[parseInt(j.toString(), 10)];
              td.classList.add("e-leftfreeze");
              applyStickyLeftRightPosition(td, j * 30, this.parent.enableRtl, "Left");
              if (td.classList.contains("e-groupcaption")) {
                var oldColspan = parseInt(td.getAttribute("colspan"), 10);
                var colspan = resetColspanGroupCaption(this.parent, j);
                td.setAttribute("colspan", colspan.toString());
                emptyColspan = oldColspan - colspan;
              }
            }
            if (emptyColspan) {
              var td = this.parent.createElement("TD", {
                className: "e-groupcaption",
                attrs: { colspan: emptyColspan.toString(), id: this.parent.element.id + "captioncell", tabindex: "-1" }
              });
              tr.appendChild(td);
            }
          }
        }
        if ((tr.querySelectorAll(".e-leftfreeze").length || tr.classList.contains("e-columnheader")) && (tr.querySelectorAll(".e-indentcell").length || tr.querySelectorAll(".e-grouptopleftcell").length)) {
          var td = tr.querySelectorAll(".e-indentcell, .e-grouptopleftcell");
          for (var i = 0; i < td.length; i++) {
            td[parseInt(i.toString(), 10)].classList.add("e-leftfreeze");
            applyStickyLeftRightPosition(td[parseInt(i.toString(), 10)], i * 30, this.parent.enableRtl, "Left");
          }
        }
      }
      var args = { row: tr, rowHeight: this.parent.rowHeight };
      if (row2.isDataRow) {
        var eventArg_1 = extend$1(rowArgs, args);
        eventArg_1.isSelectable = true;
        var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;
        var cellTemplate = eventArg_1.row.querySelectorAll(".e-templatecell");
        if ((this.parent.isReact && this.parent.requireTemplateRef || isReactChild && this.parent.parentDetails.parentInstObj.requireTemplateRef) && cellTemplate.length) {
          var thisRef_2 = this;
          thisRef_2.parent.renderTemplates(function() {
            thisRef_2.parent.trigger(rowDataBound, eventArg_1);
            if (!eventArg_1.isSelectable) {
              row2.isSelectable = eventArg_1.isSelectable;
              thisRef_2.disableRowSelection(thisRef_2, row2, args, eventArg_1);
            }
          });
        } else {
          this.parent.trigger(rowDataBound, eventArg_1);
        }
        row2.isSelectable = eventArg_1.isSelectable;
        var isDraggable = this.parent.isRowDragable();
        if (this.parent.allowPaging && this.parent.selectionSettings.persistSelection) {
          var primaryKey_1 = this.parent.getPrimaryKeyFieldNames()[0];
          var pKey_1 = row2.data ? row2.data["" + primaryKey_1] : null;
          var SelectedRecords = eventArg_1.isSelectable ? this.parent.partialSelectedRecords : this.parent.disableSelectedRecords;
          if (!SelectedRecords.some(function(data) {
            return data["" + primaryKey_1] === pKey_1;
          })) {
            SelectedRecords.push(row2.data);
          }
        }
        if (!eventArg_1.isSelectable) {
          this.disableRowSelection(this, row2, args, eventArg_1);
        }
        if (this.parent.childGrid || isDraggable || this.parent.detailTemplate) {
          var td = tr.querySelectorAll(".e-rowcell:not(.e-hide)")[0];
          if (td) {
            td.classList.add("e-detailrowvisible");
          }
        }
      }
      if (this.parent.enableVirtualization) {
        rowArgs.rowHeight = this.parent.rowHeight;
      }
      if (rowArgs.rowHeight) {
        tr.style.height = rowArgs.rowHeight + "px";
      } else if (this.parent.rowHeight && (tr.querySelector(".e-headercell") || tr.querySelector(".e-groupcaption"))) {
        tr.style.height = this.parent.rowHeight + "px";
      }
      if (row2.cssClass) {
        tr.classList.add(row2.cssClass);
      }
      if (row2.lazyLoadCssClass) {
        tr.classList.add(row2.lazyLoadCssClass);
      }
      if (this.parent.rowRenderingMode === "Vertical" && this.parent.allowTextWrap && (this.parent.textWrapSettings.wrapMode === "Header" || this.parent.textWrapSettings.wrapMode === "Both")) {
        tr.classList.add("e-verticalwrap");
      }
      var vFTable = this.parent.enableColumnVirtualization;
      if (!vFTable && this.parent.aggregates.length && this.parent.element.scrollHeight > this.parent.height) {
        for (var i = 0; i < this.parent.aggregates.length; i++) {
          var property = "properties";
          var column = "columns";
          if (this.parent.aggregates[parseInt(i.toString(), 10)]["" + property]["" + column][0].footerTemplate) {
            var summarycell = [].slice.call(tr.getElementsByClassName("e-summarycell"));
            if (summarycell.length) {
              var lastSummaryCell = summarycell[summarycell.length - 1];
              addClass([lastSummaryCell], ["e-lastsummarycell"]);
              var firstSummaryCell = summarycell[0];
              addClass([firstSummaryCell], ["e-firstsummarycell"]);
            }
          }
        }
      }
      return tr;
    };
    RowRenderer2.prototype.resetrowSpanvalue = function(rowCount, cellArgs, rowIndex) {
      if (rowCount > rowIndex && rowCount < rowIndex + cellArgs.rowSpan) {
        var rowSpan = rowIndex + cellArgs.rowSpan - rowCount;
        cellArgs.rowSpan = cellArgs.rowSpan - rowSpan;
      }
    };
    RowRenderer2.prototype.disableRowSelection = function(thisRef, row2, args, eventArg) {
      var selIndex = this.parent.getSelectedRowIndexes();
      this.parent.selectionModule.isPartialSelection = true;
      row2.isSelected = false;
      var selRowIndex = selIndex.indexOf(row2.index);
      if (selRowIndex > -1) {
        selIndex.splice(selRowIndex, 1);
      }
      var chkBox = args.row.querySelectorAll(".e-rowcell.e-gridchkbox");
      var isDrag = eventArg.row.querySelector(".e-rowdragdrop");
      var cellIdx = thisRef.parent.groupSettings.columns.length + (isDrag || thisRef.parent.isDetail() ? 1 : 0);
      for (var i = 0; i < chkBox.length; i++) {
        chkBox[parseInt(i.toString(), 10)].firstElementChild.classList.add("e-checkbox-disabled");
        chkBox[parseInt(i.toString(), 10)].querySelector(".e-frame").classList.remove("e-check");
      }
      if (row2.cells.length) {
        for (var i = cellIdx; i < row2.cells.length; i++) {
          var cell = eventArg.row.querySelector('.e-rowcell[aria-colindex="' + (row2.cells[parseInt(i.toString(), 10)].index + 1) + '"]');
          if (cell) {
            removeClass([cell], ["e-selectionbackground", "e-active"]);
          }
        }
      }
      if (isDrag) {
        removeClass([isDrag], ["e-selectionbackground", "e-active"]);
      }
    };
    RowRenderer2.prototype.refreshMergeCells = function(row2) {
      for (var _i = 0, _a = row2.cells; _i < _a.length; _i++) {
        var cell = _a[_i];
        cell.isSpanned = false;
      }
      return row2;
    };
    RowRenderer2.prototype.buildAttributeFromRow = function(tr, row$1) {
      var attr = {};
      var prop = { "dataUID": "data-uid", "ariaSelected": "aria-selected" };
      var classes = [];
      if (row$1.isDataRow) {
        classes.push(row);
      }
      if (row$1.isAltRow) {
        classes.push("e-altrow");
      }
      if (row$1.isCaptionRow) {
        classes.push("e-groupcaptionrow");
      }
      if (row$1.isAggregateRow && row$1.parentUid) {
        classes.push("e-groupfooterrow");
      }
      if (!isNullOrUndefined(row$1.index)) {
        attr[ariaRowIndex] = row$1.index + 1;
      }
      if (row$1.rowSpan) {
        attr.rowSpan = row$1.rowSpan;
      }
      if (row$1.uid) {
        attr[prop.dataUID] = row$1.uid;
      }
      if (row$1.isSelected) {
        attr[prop.ariaSelected] = true;
      }
      if (row$1.visible === false) {
        classes.push("e-hide");
      }
      attr.class = classes;
      setStyleAndAttributes(tr, attr);
    };
    return RowRenderer2;
  }()
);
var RowModelGenerator = (
  /** @class */
  function() {
    function RowModelGenerator2(parent) {
      this.parent = parent;
    }
    RowModelGenerator2.prototype.generateRows = function(data, args) {
      var rows = [];
      var startIndex = this.parent.enableVirtualization && args ? args.startIndex : 0;
      startIndex = this.parent.enableInfiniteScrolling && args ? this.getInfiniteIndex(args) : startIndex;
      if (this.parent.enableImmutableMode && args && args.startIndex) {
        startIndex = args.startIndex;
      }
      for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {
        rows[parseInt(i.toString(), 10)] = this.generateRow(data[parseInt(i.toString(), 10)], startIndex);
      }
      return rows;
    };
    RowModelGenerator2.prototype.ensureColumns = function() {
      var cols = [];
      if (this.parent.detailTemplate || this.parent.childGrid) {
        var args = {};
        this.parent.notify(detailIndentCellInfo, args);
        cols.push(this.generateCell(args, null, CellType.DetailExpand));
      }
      if (this.parent.isRowDragable()) {
        cols.push(this.generateCell({}, null, CellType.RowDragIcon));
      }
      return cols;
    };
    RowModelGenerator2.prototype.generateRow = function(data, index, cssClass2, indent, pid, tIndex, parentUid) {
      var options = {};
      options.foreignKeyData = {};
      options.uid = getUid("grid-row");
      options.data = data;
      options.index = index;
      options.indent = indent;
      options.tIndex = tIndex;
      options.isDataRow = true;
      options.parentGid = pid;
      options.parentUid = parentUid;
      if (this.parent.isPrinting) {
        if (this.parent.hierarchyPrintMode === "All") {
          options.isExpand = true;
        } else if (this.parent.hierarchyPrintMode === "Expanded" && this.parent.expandedRows && this.parent.expandedRows[parseInt(index.toString(), 10)]) {
          options.isExpand = this.parent.expandedRows[parseInt(index.toString(), 10)].isExpand;
        }
      }
      options.cssClass = cssClass2;
      options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;
      options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;
      options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;
      this.refreshForeignKeyRow(options);
      var cells = this.ensureColumns();
      var row2 = new Row(options, this.parent);
      row2.cells = this.parent.getFrozenMode() === "Right" ? this.generateCells(options).concat(cells) : cells.concat(this.generateCells(options));
      return row2;
    };
    RowModelGenerator2.prototype.refreshForeignKeyRow = function(options) {
      var foreignKeyColumns = this.parent.getForeignKeyColumns();
      for (var i = 0; i < foreignKeyColumns.length; i++) {
        setValue(foreignKeyColumns[parseInt(i.toString(), 10)].field, getForeignData(foreignKeyColumns[parseInt(i.toString(), 10)], options.data), options.foreignKeyData);
      }
    };
    RowModelGenerator2.prototype.generateCells = function(options) {
      var dummies = this.parent.getColumns();
      var tmp = [];
      for (var i = 0; i < dummies.length; i++) {
        tmp.push(this.generateCell(dummies[parseInt(i.toString(), 10)], options.uid, isNullOrUndefined(dummies[parseInt(i.toString(), 10)].commands) ? void 0 : CellType.CommandColumn, null, i, options.foreignKeyData));
      }
      return tmp;
    };
    RowModelGenerator2.prototype.generateCell = function(column, rowId, cellType, colSpan, oIndex, foreignKeyData2) {
      var opt = {
        "visible": column.visible,
        "isDataCell": !isNullOrUndefined(column.field || column.template),
        "isTemplate": !isNullOrUndefined(column.template),
        "rowID": rowId,
        "column": column,
        "cellType": !isNullOrUndefined(cellType) ? cellType : CellType.Data,
        "colSpan": colSpan,
        "commands": column.commands,
        "isForeignKey": column.isForeignColumn && column.isForeignColumn(),
        "foreignKeyData": column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData2)
      };
      if (opt.isDataCell || opt.column.type === "checkbox" || opt.commands) {
        opt.index = oIndex;
      }
      return new Cell(opt);
    };
    RowModelGenerator2.prototype.refreshRows = function(input) {
      for (var i = 0; i < input.length; i++) {
        this.refreshForeignKeyRow(input[parseInt(i.toString(), 10)]);
        input[parseInt(i.toString(), 10)].cells = this.generateCells(input[parseInt(i.toString(), 10)]);
      }
      return input;
    };
    RowModelGenerator2.prototype.getInfiniteIndex = function(args) {
      return args.requestType === "infiniteScroll" || args.requestType === "delete" || args.action === "add" ? isNullOrUndefined(args.startIndex) ? args["index"] : args.startIndex : 0;
    };
    return RowModelGenerator2;
  }()
);
var __extends$l = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var SummaryModelGenerator = (
  /** @class */
  function() {
    function SummaryModelGenerator2(parent) {
      this.parent = parent;
    }
    SummaryModelGenerator2.prototype.getData = function() {
      var _this = this;
      var rows = [];
      var row2 = this.parent.aggregates.slice();
      for (var i = 0; i < row2.length; i++) {
        var columns = row2[parseInt(i.toString(), 10)].columns.filter(function(column) {
          return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate) || _this.columnSelector(column);
        });
        if (columns.length) {
          rows.push({ columns });
        }
      }
      return rows;
    };
    SummaryModelGenerator2.prototype.columnSelector = function(column) {
      return column.footerTemplate !== void 0;
    };
    SummaryModelGenerator2.prototype.getColumns = function(start) {
      var columns = [];
      if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid)) {
        columns.push(new Column({}));
      }
      if (this.parent.allowGrouping) {
        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {
          columns.push(new Column({}));
        }
      }
      if (this.parent.isRowDragable() && !start) {
        columns.push(new Column({}));
      }
      columns.push.apply(columns, this.parent.getColumns());
      return columns;
    };
    SummaryModelGenerator2.prototype.generateRows = function(input, args, start, end, columns) {
      if (input.length === 0) {
        if (args === void 0 || !(args.count || args.loadSummaryOnEmpty)) {
          return [];
        }
      }
      var data = this.buildSummaryData(input, args);
      var rows = [];
      var row2 = this.getData();
      for (var i = 0; i < row2.length; i++) {
        rows.push(this.getGeneratedRow(row2[parseInt(i.toString(), 10)], data[parseInt(i.toString(), 10)], args ? args.level : void 0, start, end, args ? args.parentUid : void 0, columns));
      }
      return rows;
    };
    SummaryModelGenerator2.prototype.getGeneratedRow = function(summaryRow, data, raw, start, end, parentUid, columns) {
      var tmp = [];
      var indents = this.getIndentByLevel();
      var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);
      var indentLength = this.parent.getIndentCount();
      if (this.parent.groupSettings.columns.length && this.parent.allowRowDragAndDrop) {
        indents.push("e-indentcelltop");
      } else if (this.parent.isRowDragable() && !start) {
        indents = ["e-indentcelltop"];
      }
      var values = columns ? columns : this.getColumns(start);
      for (var i = 0; i < values.length; i++) {
        tmp.push(this.getGeneratedCell(values[parseInt(i.toString(), 10)], summaryRow, i >= indentLength ? this.getCellType() : i === 0 && this.parent.childGrid ? CellType.DetailFooterIntent : CellType.Indent, indents[parseInt(i.toString(), 10)], isDetailGridAlone));
      }
      var row2 = new Row({ data, attributes: { class: "e-summaryrow" } });
      row2.cells = tmp;
      row2.uid = getUid("grid-row");
      row2.parentUid = parentUid;
      row2.isAggregateRow = true;
      row2.visible = tmp.some(function(cell) {
        return cell.isDataCell && cell.visible;
      });
      return row2;
    };
    SummaryModelGenerator2.prototype.getGeneratedCell = function(column, summaryRow, cellType, indent, isDetailGridAlone) {
      var sColumn = summaryRow.columns.filter(function(scolumn) {
        return scolumn.columnName === column.field;
      })[0];
      var attrs = {
        "e-mappinguid": column.uid,
        index: column.index
      };
      if (column.textAlign) {
        var alignmentClassMap = { right: "e-rightalign", left: "e-leftalign", center: "e-centeralign", justify: "e-justifyalign" };
        if (alignmentClassMap[column.textAlign.toLowerCase()]) {
          attrs.class = alignmentClassMap[column.textAlign.toLowerCase()];
        }
      }
      if (indent) {
        attrs.class = indent;
      }
      if (isNullOrUndefined(indent) && isDetailGridAlone) {
        attrs.class = "e-detailindentcelltop";
      }
      var opt = {
        "visible": column.visible,
        "isDataCell": !isNullOrUndefined(sColumn),
        "isTemplate": sColumn && !isNullOrUndefined(sColumn.footerTemplate || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),
        "column": sColumn || {},
        "attributes": attrs,
        "cellType": cellType
      };
      opt.column.headerText = column.headerText;
      return new Cell(opt);
    };
    SummaryModelGenerator2.prototype.buildSummaryData = function(data, args) {
      var dummy = [];
      var summaryRows = this.getData();
      var single = {};
      for (var i = 0; i < summaryRows.length; i++) {
        single = {};
        var column = summaryRows[parseInt(i.toString(), 10)].columns;
        for (var j = 0; j < column.length; j++) {
          single = this.setTemplate(column[parseInt(j.toString(), 10)], args && args.aggregates ? args : data, single);
        }
        dummy.push(single);
      }
      return dummy;
    };
    SummaryModelGenerator2.prototype.getIndentByLevel = function() {
      return this.parent.groupSettings.columns.map(function() {
        return "e-indentcelltop";
      });
    };
    SummaryModelGenerator2.prototype.setTemplate = function(column, data, single) {
      var types = column.type;
      var helper = {};
      var formatFn = column.getFormatter() || /* @__PURE__ */ function() {
        return function(a) {
          return a;
        };
      }();
      var group = data;
      if (!(types instanceof Array)) {
        types = [column.type];
      }
      for (var i = 0; i < types.length; i++) {
        var key = column.field + " - " + types[parseInt(i.toString(), 10)].toLowerCase();
        var disp = column.columnName;
        var disablePageWiseAggregatesGroup = this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length && group.items ? true : false;
        var val = (types[parseInt(i.toString(), 10)] !== "Custom" || disablePageWiseAggregatesGroup) && group.aggregates && key in group.aggregates ? group.aggregates["" + key] : calculateAggregate(types[parseInt(i.toString(), 10)], group.aggregates ? group : data, column, this.parent);
        single["" + disp] = single["" + disp] || {};
        single["" + disp]["" + key] = val;
        single["" + disp][types[parseInt(i.toString(), 10)]] = !isNullOrUndefined(val) ? formatFn(val) : " ";
        if (group.field) {
          single["" + disp].field = group.field;
          single["" + disp].key = group.key;
        }
      }
      helper.format = column.getFormatter();
      column.setTemplate(helper);
      return single;
    };
    SummaryModelGenerator2.prototype.getCellType = function() {
      return CellType.Summary;
    };
    return SummaryModelGenerator2;
  }()
);
var GroupSummaryModelGenerator = (
  /** @class */
  function(_super) {
    __extends$l(GroupSummaryModelGenerator2, _super);
    function GroupSummaryModelGenerator2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    GroupSummaryModelGenerator2.prototype.columnSelector = function(column) {
      return column.groupFooterTemplate !== void 0;
    };
    GroupSummaryModelGenerator2.prototype.getIndentByLevel = function(level) {
      if (level === void 0) {
        level = this.parent.groupSettings.columns.length;
      }
      if (this.parent.allowRowDragAndDrop && this.parent.groupSettings.columns.length) {
        level -= 1;
      }
      return this.parent.groupSettings.columns.map(function(v, indx) {
        return indx <= level - 1 ? "" : "e-indentcelltop";
      });
    };
    GroupSummaryModelGenerator2.prototype.getCellType = function() {
      return CellType.GroupSummary;
    };
    return GroupSummaryModelGenerator2;
  }(SummaryModelGenerator)
);
var CaptionSummaryModelGenerator = (
  /** @class */
  function(_super) {
    __extends$l(CaptionSummaryModelGenerator2, _super);
    function CaptionSummaryModelGenerator2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    CaptionSummaryModelGenerator2.prototype.columnSelector = function(column) {
      return column.groupCaptionTemplate !== void 0;
    };
    CaptionSummaryModelGenerator2.prototype.getData = function() {
      var initVal = { columns: [] };
      return [_super.prototype.getData.call(this).reduce(function(prev, cur) {
        prev.columns = prev.columns.concat(cur.columns);
        return prev;
      }, initVal)];
    };
    CaptionSummaryModelGenerator2.prototype.isEmpty = function() {
      return (this.getData()[0].columns || []).length === 0;
    };
    CaptionSummaryModelGenerator2.prototype.getCellType = function() {
      return CellType.CaptionSummary;
    };
    return CaptionSummaryModelGenerator2;
  }(SummaryModelGenerator)
);
var __extends$k = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var GroupModelGenerator = (
  /** @class */
  function(_super) {
    __extends$k(GroupModelGenerator2, _super);
    function GroupModelGenerator2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.rows = [];
      _this.index = 0;
      _this.infiniteChildCount = 0;
      _this.renderInfiniteAgg = true;
      _this.parent = parent;
      _this.summaryModelGen = new GroupSummaryModelGenerator(parent);
      _this.captionModelGen = new CaptionSummaryModelGenerator(parent);
      return _this;
    }
    GroupModelGenerator2.prototype.generateRows = function(data, args) {
      if (this.parent.groupSettings.columns.length === 0) {
        return _super.prototype.generateRows.call(this, data, args);
      }
      this.isInfiniteScroll = args.requestType === "infiniteScroll";
      this.rows = [];
      this.index = this.parent.enableVirtualization || this.isInfiniteScroll ? args.startIndex : 0;
      for (var i = 0, len = data.length; i < len; i++) {
        this.infiniteChildCount = 0;
        this.renderInfiniteAgg = true;
        this.getGroupedRecords(0, data[parseInt(i.toString(), 10)], data.level, i, void 0, this.rows.length);
      }
      this.index = 0;
      if (this.parent.isCollapseStateEnabled()) {
        this.ensureRowVisibility();
      }
      return this.rows;
    };
    GroupModelGenerator2.prototype.getGroupedRecords = function(index, data, raw, parentid, childId, tIndex, parentUid) {
      var _a;
      var level = raw;
      if (isNullOrUndefined(data.items)) {
        if (isNullOrUndefined(data.GroupGuid)) {
          this.rows = this.rows.concat(this.generateDataRows(data, index, parentid, this.rows.length, parentUid));
        } else {
          for (var j = 0, len = data.length; j < len; j++) {
            this.getGroupedRecords(index, data[parseInt(j.toString(), 10)], data.level, parentid, index, this.rows.length, parentUid);
          }
        }
      } else {
        var preCaption = void 0;
        var captionRow = this.generateCaptionRow(data, index, parentid, childId, tIndex, parentUid);
        if (this.isInfiniteScroll) {
          preCaption = this.getPreCaption(index, captionRow.data.key);
        }
        if (!preCaption) {
          this.rows = this.rows.concat(captionRow);
        } else {
          captionRow.uid = preCaption.uid;
        }
        if (data.items && data.items.length) {
          this.getGroupedRecords(index + 1, data.items, data.items.level, parentid, index + 1, this.rows.length, captionRow.uid);
        }
        if (this.parent.aggregates.length && this.isRenderAggregate(captionRow)) {
          var rowCnt = this.rows.length;
          (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level, parentUid: captionRow.uid }));
          for (var i = rowCnt - 1; i >= 0; i--) {
            if (this.rows[parseInt(i.toString(), 10)].isCaptionRow) {
              this.rows[parseInt(i.toString(), 10)].aggregatesCount = this.rows.length - rowCnt;
            } else if (!this.rows[parseInt(i.toString(), 10)].isCaptionRow && !this.rows[parseInt(i.toString(), 10)].isDataRow) {
              break;
            }
          }
        }
        if (preCaption) {
          this.setInfiniteRowVisibility(preCaption);
        }
      }
    };
    GroupModelGenerator2.prototype.isRenderAggregate = function(data) {
      if (this.parent.enableInfiniteScrolling) {
        if (!this.renderInfiniteAgg) {
          return false;
        }
        this.getPreCaption(data.indent, data.data.key);
        this.renderInfiniteAgg = data.data.count === this.infiniteChildCount;
        return this.renderInfiniteAgg;
      }
      return !this.parent.enableInfiniteScrolling;
    };
    GroupModelGenerator2.prototype.getPreCaption = function(indent, key) {
      var rowObj = this.parent.getRowsObject().concat(this.rows);
      var preCap;
      this.infiniteChildCount = 0;
      var i = rowObj.length;
      while (i--) {
        if (rowObj[parseInt(i.toString(), 10)].isCaptionRow && rowObj[parseInt(i.toString(), 10)].indent === indent) {
          var groupKey = rowObj[parseInt(i.toString(), 10)].data.key;
          if (groupKey && groupKey.toString() === key.toString() && groupKey instanceof Date || groupKey === key) {
            preCap = rowObj[parseInt(i.toString(), 10)];
          }
        }
        if (rowObj[parseInt(i.toString(), 10)].indent === indent || rowObj[parseInt(i.toString(), 10)].indent < indent) {
          break;
        }
        if (rowObj[parseInt(i.toString(), 10)].indent === indent + 1) {
          this.infiniteChildCount++;
        }
      }
      return preCap;
    };
    GroupModelGenerator2.prototype.getCaptionRowCells = function(field, indent, data) {
      var cells = [];
      var visibles = [];
      var column = this.parent.getColumnByField(field);
      var indexes = this.parent.getColumnIndexesInView();
      if (this.parent.enableColumnVirtualization) {
        column = this.parent.columns.filter(function(c) {
          return c.field === field;
        })[0];
      }
      var groupedLen = this.parent.groupSettings.columns.length;
      var gObj = this.parent;
      if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {
        for (var i = 0; i < indent; i++) {
          cells.push(this.generateIndentCell());
        }
        cells.push(this.generateCell({}, null, CellType.Expand));
      }
      indent = this.parent.enableColumnVirtualization ? 1 : this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) - indent + (this.parent.getVisibleColumns().length ? -1 : 0);
      if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {
        var captionCells = this.captionModelGen.generateRows(data)[0];
        extend$1(data, captionCells.data);
        var cIndex_1 = 0;
        captionCells.cells.some(function(cell, index) {
          cIndex_1 = index;
          return cell.visible && cell.isDataCell;
        });
        visibles = captionCells.cells.slice(cIndex_1).filter(function(cell) {
          return cell.visible;
        });
        if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {
          visibles = visibles.slice(1);
        }
        if (this.parent.getVisibleColumns().length === 1) {
          visibles = [];
        }
        indent = indent - visibles.length;
      }
      var cols = !this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns();
      var wFlag = true;
      for (var j = 0; j < cols.length; j++) {
        var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;
        if (tmpFlag) {
          wFlag = false;
        }
        var cellType = !this.parent.enableColumnVirtualization || tmpFlag ? CellType.GroupCaption : CellType.GroupCaptionEmpty;
        indent = this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;
        if (gObj.isRowDragable()) {
          indent++;
        }
        cells.push(this.generateCell(column, null, cellType, indent));
      }
      cells.push.apply(cells, visibles);
      return cells;
    };
    GroupModelGenerator2.prototype.generateCaptionRow = function(data, indent, parentID, childID, tIndex, parentUid) {
      var options = {};
      var records = "records";
      var col = this.parent.getColumnByField(data.field);
      options.data = extend$1({}, data);
      if (col) {
        options.data.field = data.field;
      }
      options.isDataRow = false;
      options.isExpand = !this.parent.groupSettings.enableLazyLoading && !this.parent.isCollapseStateEnabled();
      options.parentGid = parentID;
      options.childGid = childID;
      options.tIndex = tIndex;
      options.isCaptionRow = true;
      options.parentUid = parentUid;
      options.gSummary = !isNullOrUndefined(data.items["" + records]) ? data.items["" + records].length : data.items.length;
      options.uid = getUid("grid-row");
      var row2 = new Row(options);
      row2.indent = indent;
      this.getForeignKeyData(row2);
      row2.cells = this.getCaptionRowCells(data.field, indent, row2.data);
      return row2;
    };
    GroupModelGenerator2.prototype.getForeignKeyData = function(row2) {
      var data = row2.data;
      var col = this.parent.getColumnByField(data.field);
      if (col && col.isForeignColumn && col.isForeignColumn()) {
        var fkValue = isNullOrUndefined(data.key) ? "" : col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col);
        setValue("foreignKey", fkValue, row2.data);
      }
    };
    GroupModelGenerator2.prototype.generateDataRows = function(data, indent, childID, tIndex, parentUid) {
      var rows = [];
      var indexes = this.parent.getColumnIndexesInView();
      for (var i = 0, len = data.length; i < len; i++, tIndex++) {
        rows[parseInt(i.toString(), 10)] = this.generateRow(data[parseInt(i.toString(), 10)], this.index, i ? void 0 : "e-firstchildrow", indent, childID, tIndex, parentUid);
        for (var j = 0; j < indent; j++) {
          if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {
            continue;
          }
          rows[parseInt(i.toString(), 10)].cells.unshift(this.generateIndentCell());
        }
        this.index++;
      }
      return rows;
    };
    GroupModelGenerator2.prototype.generateIndentCell = function() {
      return this.generateCell({}, null, CellType.Indent);
    };
    GroupModelGenerator2.prototype.refreshRows = function(input) {
      var indexes = this.parent.getColumnIndexesInView();
      for (var i = 0; i < input.length; i++) {
        if (input[parseInt(i.toString(), 10)].isDataRow) {
          input[parseInt(i.toString(), 10)].cells = this.generateCells(input[parseInt(i.toString(), 10)]);
          for (var j = 0; j < input[parseInt(i.toString(), 10)].indent; j++) {
            if (this.parent.enableColumnVirtualization && indexes.indexOf(input[parseInt(i.toString(), 10)].indent) === -1) {
              continue;
            }
            input[parseInt(i.toString(), 10)].cells.unshift(this.generateIndentCell());
          }
        } else {
          var cRow = this.generateCaptionRow(input[parseInt(i.toString(), 10)].data, input[parseInt(i.toString(), 10)].indent);
          input[parseInt(i.toString(), 10)].cells = cRow.cells;
        }
      }
      return input;
    };
    GroupModelGenerator2.prototype.setInfiniteRowVisibility = function(caption) {
      if (!caption.isExpand || caption.visible === false) {
        for (var _i = 0, _a = this.rows; _i < _a.length; _i++) {
          var row2 = _a[_i];
          if (row2.parentUid === caption.uid) {
            row2.visible = false;
            if (row2.isCaptionRow) {
              this.setInfiniteRowVisibility(row2);
            }
          }
        }
      }
    };
    GroupModelGenerator2.prototype.ensureRowVisibility = function() {
      for (var i = 0; i < this.rows.length; i++) {
        var row2 = this.rows[parseInt(i.toString(), 10)];
        if (!row2.isCaptionRow) {
          continue;
        }
        for (var j = i + 1; j < this.rows.length; j++) {
          var childRow = this.rows[parseInt(j.toString(), 10)];
          if (row2.uid === childRow.parentUid) {
            this.rows[parseInt(j.toString(), 10)].visible = row2.isExpand;
          }
        }
      }
    };
    return GroupModelGenerator2;
  }(RowModelGenerator)
);
var ContentRender = (
  /** @class */
  function() {
    function ContentRender2(parent, serviceLocator) {
      var _this = this;
      this.rows = [];
      this.freezeRows = [];
      this.movableRows = [];
      this.freezeRowElements = [];
      this.currentInfo = {};
      this.prevCurrentView = [];
      this.isLoaded = true;
      this.drop = function(e) {
        _this.parent.notify(columnDrop, { target: e.target, droppedElement: e.droppedElement });
        remove(e.droppedElement);
      };
      this.infiniteCache = {};
      this.visibleRows = [];
      this.visibleFrozenRows = [];
      this.rightFreezeRows = [];
      this.isAddRows = false;
      this.isInfiniteFreeze = false;
      this.useGroupCache = false;
      this.tempFreezeRows = [];
      this.rafCallback = function(args) {
        var arg = args;
        return function() {
          _this.ariaService.setBusy(_this.getPanel().querySelector("." + content), false);
          if (_this.parent.isDestroyed) {
            return;
          }
          var rows = _this.rows.slice(0);
          if (_this.parent.enableInfiniteScrolling) {
            if (_this.parent.groupSettings.enableLazyLoading) {
              for (var i = 0; i < _this.visibleRows.length; i++) {
                _this.setRowsInLazyGroup(_this.visibleRows[parseInt(i.toString(), 10)], i);
              }
            }
            rows = _this.parent.getRowsObject();
            var prevPage = arg.prevPage;
            if (_this.parent.infiniteScrollSettings.enableCache && prevPage) {
              var maxBlock = _this.parent.infiniteScrollSettings.maxBlocks;
              rows = [];
              var rowIdx = parseInt(_this.rowElements[0].getAttribute("aria-rowindex"), 10);
              var startIdx = Math.ceil(rowIdx / _this.parent.pageSettings.pageSize);
              for (var i = 0, count = startIdx; i < maxBlock; i++, count++) {
                if (_this.infiniteCache[parseInt(count.toString(), 10)]) {
                  rows = rows.concat(_this.infiniteCache[parseInt(count.toString(), 10)]);
                }
              }
            }
          }
          _this.parent.notify(contentReady, { rows, args: arg });
          if (_this.parent.editSettings.showAddNewRow && _this.parent.addNewRowFocus) {
            _this.parent.notify(showAddNewRowFocus, {});
            _this.parent.addNewRowFocus = false;
          }
          if (_this.parent.autoFit) {
            _this.parent.preventAdjustColumns();
          }
          if (!_this.parent.isInitialLoad) {
            _this.parent.focusModule.setFirstFocusableTabIndex();
          }
          if (_this.isLoaded) {
            _this.parent.isManualRefresh = false;
            if (_this.parent.enableInfiniteScrolling && _this.parent.groupSettings.enableLazyLoading && args.requestType === "sorting") {
              _this.parent.infiniteScrollModule["groupCaptionAction"] = void 0;
            }
            var isReactChild = _this.parent.parentDetails && _this.parent.parentDetails.parentInstObj && _this.parent.parentDetails.parentInstObj.isReact;
            if ((_this.parent.isReact || isReactChild) && _this.parent.element.querySelectorAll(".e-templatecell").length) {
              var thisRef_1 = _this;
              thisRef_1.parent.renderTemplates(function() {
                thisRef_1.parent.trigger(dataBound, {}, function() {
                  if (thisRef_1.parent.allowTextWrap) {
                    thisRef_1.parent.notify(freezeRender, { case: "textwrap" });
                  }
                });
              });
            } else {
              _this.parent.trigger(dataBound, {}, function() {
                if (_this.parent.allowTextWrap) {
                  _this.parent.notify(freezeRender, { case: "textwrap" });
                }
              });
            }
            if (_this.parent.allowTextWrap && _this.parent.height === "auto") {
              if (_this.parent.getContentTable().scrollHeight > _this.parent.getContent().clientHeight) {
                _this.parent.scrollModule.setPadding();
              } else {
                _this.parent.scrollModule.removePadding();
              }
            }
          }
          if (arg) {
            var action = (arg.requestType || "").toLowerCase() + "-complete";
            _this.parent.notify(action, arg);
            if (args.requestType === "batchsave") {
              args.cancel = false;
              _this.parent.trigger(actionComplete, args);
            }
          }
          if (_this.isLoaded) {
            _this.parent.hideSpinner();
          }
        };
      };
      this.parent = parent;
      this.serviceLocator = serviceLocator;
      this.widthService = serviceLocator.getService("widthService");
      this.ariaService = this.serviceLocator.getService("ariaService");
      this.parent.enableDeepCompare = this.parent.getDataModule().isRemote();
      this.generator = this.getModelGenerator();
      if (this.parent.isDestroyed) {
        return;
      }
      if (!this.parent.enableColumnVirtualization && !this.parent.enableVirtualization && !this.parent.groupSettings.enableLazyLoading) {
        this.parent.on(columnVisibilityChanged, this.setVisible, this);
      }
      this.parent.on(colGroupRefresh, this.colGroupRefresh, this);
      this.parent.on(uiUpdate, this.enableAfterRender, this);
      this.parent.on(refreshInfiniteModeBlocks, this.refreshContentRows, this);
      this.parent.on(beforeCellFocused, this.beforeCellFocused, this);
      this.parent.on(destroy, this.droppableDestroy, this);
    }
    ContentRender2.prototype.beforeCellFocused = function(e) {
      if (e.byKey && (e.keyArgs.action === "upArrow" || e.keyArgs.action === "downArrow")) {
        this.pressedKey = e.keyArgs.action;
      } else {
        this.pressedKey = void 0;
      }
    };
    ContentRender2.prototype.renderPanel = function() {
      var gObj = this.parent;
      var div = this.parent.element.querySelector("." + gridContent);
      if (div) {
        this.ariaService.setOptions(this.parent.element.querySelector("." + content), { busy: false });
        this.setPanel(div);
        return;
      }
      div = this.parent.createElement("div", { className: gridContent });
      var innerDiv = this.parent.createElement("div", {
        className: content
      });
      this.ariaService.setOptions(innerDiv, { busy: false });
      if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid()) {
        this.renderHorizontalScrollbar(div);
        innerDiv.classList.add("e-virtual-content");
      }
      div.appendChild(innerDiv);
      this.setPanel(div);
      gObj.element.appendChild(div);
    };
    ContentRender2.prototype.renderHorizontalScrollbar = function(element2) {
      var parent = this.parent.createElement("div", { className: "e-movablescrollbar" });
      var child = this.parent.createElement("div", { className: "e-movablechild" });
      var scrollbarHeight = getScrollBarWidth().toString();
      this.setScrollbarHeight(child, scrollbarHeight);
      this.setScrollbarHeight(parent, scrollbarHeight);
      parent.appendChild(child);
      element2.appendChild(parent);
    };
    ContentRender2.prototype.setScrollbarHeight = function(ele, height) {
      ele.style.minHeight = height + "px";
      ele.style.maxHeight = height + "px";
    };
    ContentRender2.prototype.renderTable = function() {
      var contentDiv = this.getPanel();
      var virtualTable = contentDiv.querySelector(".e-virtualtable");
      var virtualTrack = contentDiv.querySelector(".e-virtualtrack");
      if (this.parent.enableVirtualization && !isNullOrUndefined(virtualTable) && !isNullOrUndefined(virtualTrack)) {
        remove(virtualTable);
        remove(virtualTrack);
      }
      contentDiv.appendChild(this.createContentTable("_content_table"));
      this.setTable(contentDiv.querySelector("." + table));
      if (this.parent.selectionSettings.type === "Multiple") {
        this.ariaService.setOptions(this.parent.element, {
          multiselectable: true
        });
      }
      this.initializeContentDrop();
      if (this.parent.frozenRows) {
        this.parent.getHeaderContent().classList.add("e-frozenhdr");
      }
    };
    ContentRender2.prototype.createContentTable = function(id) {
      var innerDiv = this.getPanel().firstElementChild;
      if (this.getTable()) {
        remove(this.getTable());
      }
      var table$1 = innerDiv.querySelector("." + table) ? innerDiv.querySelector("." + table) : this.parent.createElement("table", {
        className: table,
        attrs: {
          role: "presentation",
          id: this.parent.element.id + id
        }
      });
      table$1.style.cssText = "border-collapse: separate; border-spacing: .25px;";
      this.setColGroup(this.parent.getHeaderTable().querySelector(colGroup).cloneNode(true));
      table$1.appendChild(this.getColGroup());
      table$1.appendChild(this.parent.createElement(tbody, { attrs: { role: "rowgroup" } }));
      innerDiv.appendChild(table$1);
      return innerDiv;
    };
    ContentRender2.prototype.refreshContentRows = function(args) {
      var _this = this;
      if (args === void 0) {
        args = {};
      }
      var gObj = this.parent;
      if (gObj.currentViewData.length === 0) {
        return;
      }
      if (gObj.editSettings && gObj.editModule && gObj.editSettings.mode === "Batch" && gObj.editModule.formObj && gObj.editSettings.showConfirmDialog === false) {
        gObj.editModule.destroyForm();
      }
      var dataSource = this.currentMovableRows || gObj.currentViewData;
      var isReact = gObj.isReact && !isNullOrUndefined(gObj.rowTemplate);
      var isReactPrintGrid = this.parent.printGridParent && this.parent.printGridParent.isReact;
      var frag = isReact || isReactPrintGrid ? gObj.createElement(tbody, { attrs: { role: "rowgroup" } }) : document.createDocumentFragment();
      if (!this.initialPageRecords) {
        this.initialPageRecords = extend$1([], dataSource);
      }
      var hdrfrag = isReact ? gObj.createElement(tbody, { attrs: { role: "rowgroup" } }) : document.createDocumentFragment();
      var refFrag;
      var refHdrfrag;
      if ((gObj.isReact || isReactPrintGrid) && gObj.rowTemplate) {
        refFrag = frag;
        refHdrfrag = hdrfrag;
      }
      var columns = gObj.getColumns();
      var tr;
      var hdrTbody;
      var trElement;
      var row2 = new RowRenderer(this.serviceLocator, null, this.parent);
      var isInfiniteScroll = this.parent.enableInfiniteScrolling && args.requestType === "infiniteScroll";
      var isColumnVirtualInfiniteProcess = this.isInfiniteColumnvirtualization() && args.requestType !== "virtualscroll";
      var infiniteDetail = gObj.enableInfiniteScrolling && (gObj.childGrid || gObj.detailTemplate) ? true : false;
      var infiniteDetailModified = infiniteDetail && (args.action === "add" && args.requestType === "save" || args.requestType === "delete");
      if (infiniteDetailModified) {
        args.startIndex = 0;
        gObj.notify(detachDetailTemplate, {});
      }
      if (!(isInfiniteScroll && (gObj.childGrid || gObj.detailTemplate) && !gObj.infiniteScrollSettings.enableCache)) {
        if (infiniteDetail) {
          this.parent.infiniteScrollModule.infiniteDetailDestroy = true;
        }
        gObj.notify(destroyChildGrid, isInfiniteScroll && (gObj.childGrid || gObj.detailTemplate) && gObj.infiniteScrollSettings.enableCache ? args : {});
      }
      this.rowElements = [];
      this.rows = [];
      this.tempFreezeRows = [];
      var tableName;
      var isGroupFrozenHdr = this.parent.frozenRows && this.parent.groupSettings.columns.length ? true : false;
      if (isGroupAdaptive(gObj)) {
        if (["sorting", "filtering", "searching", "grouping", "ungrouping", "reorder", "save", "delete"].some(function(value) {
          return args.requestType === value;
        })) {
          this.emptyVcRows();
        }
      }
      var modelData;
      modelData = this.checkCache(modelData, args);
      if (!this.isAddRows && !this.useGroupCache) {
        modelData = this.generator.generateRows(dataSource, args);
      }
      this.setGroupCache(modelData, args);
      this.parent.notify(setInfiniteCache, { isInfiniteScroll, modelData, args });
      var registeredTemplates = this.parent.registeredTemplate;
      if (!(args.requestType === "infiniteScroll" && !this.parent.infiniteScrollSettings.enableCache) && registeredTemplates && registeredTemplates.template && !args.isFrozen && true) {
        var templatetoclear = [];
        for (var i = 0; i < registeredTemplates.template.length; i++) {
          for (var j = 0; j < registeredTemplates.template[parseInt(i.toString(), 10)].rootNodes.length; j++) {
            if (isNullOrUndefined(registeredTemplates.template[parseInt(i.toString(), 10)].rootNodes[parseInt(j.toString(), 10)].parentNode)) {
              templatetoclear.push(registeredTemplates.template[parseInt(i.toString(), 10)]);
            }
          }
        }
        this.parent.destroyTemplate(["template"], templatetoclear);
      }
      if ((this.parent.isReact || this.parent.isVue) && !(args.requestType === "infiniteScroll" && !this.parent.infiniteScrollSettings.enableCache) && !args.isFrozen) {
        var templates = [
          this.parent.isVue ? "template" : "columnTemplate",
          "rowTemplate",
          "detailTemplate",
          "captionTemplate",
          "commandsTemplate",
          "groupFooterTemplate",
          "groupCaptionTemplate"
        ];
        if (args.requestType === "infiniteScroll" && this.parent.infiniteScrollSettings.enableCache) {
          templates = [
            this.parent.isVue ? "template" : "columnTemplate",
            "commandsTemplate"
          ];
        }
        clearReactVueTemplates(this.parent, templates);
      }
      if (this.parent.enableColumnVirtualization) {
        var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);
        cellMerge.updateVirtualCells(modelData);
      }
      this.tbody = this.getTable().querySelector(tbody);
      var startIndex = 0;
      var blockLoad = true;
      if (isGroupAdaptive(gObj) && gObj.vcRows.length) {
        var top_1 = "top";
        var scrollTop = !isNullOrUndefined(args.virtualInfo.offsets) ? args.virtualInfo.offsets.top : !isNullOrUndefined(args.scrollTop) ? args.scrollTop["" + top_1] : 0;
        if (scrollTop !== 0) {
          var offsets_1 = gObj.vGroupOffsets;
          var bSize = gObj.pageSettings.pageSize / 2;
          var values = Object.keys(offsets_1).map(function(key) {
            return offsets_1["" + key];
          });
          for (var m = 0; m < values.length; m++) {
            if (scrollTop < values[parseInt(m.toString(), 10)]) {
              if (!isNullOrUndefined(args.virtualInfo) && args.virtualInfo.direction === "up") {
                startIndex = m > 0 ? (m - 1) * bSize : m * bSize;
                break;
              } else {
                startIndex = m * bSize;
                if (this.parent.contentModule.isEndBlock(m) || this.parent.contentModule.isEndBlock(m + 1)) {
                  args.virtualInfo.blockIndexes = [m, m + 1];
                }
                break;
              }
            }
          }
          if (Math.round(scrollTop + this.contentPanel.firstElementChild.offsetHeight) >= this.contentPanel.firstElementChild.scrollHeight && !args.rowObject) {
            blockLoad = false;
          }
        }
      }
      var isVFFrozenOnly = gObj.frozenRows && this.parent.enableVirtualization && args.requestType === "reorder";
      if (gObj.frozenRows && args.requestType === "virtualscroll" && args.virtualInfo.sentinelInfo.axis === "X" || isVFFrozenOnly) {
        var bIndex = args.virtualInfo.blockIndexes;
        var page = args.virtualInfo.page;
        args.virtualInfo.blockIndexes = [1, 2];
        if (isVFFrozenOnly) {
          args.virtualInfo.page = 1;
        }
        var data = isVFFrozenOnly ? this.initialPageRecords : dataSource;
        var mhdrData = this.vgenerator.generateRows(data, args);
        mhdrData.splice(this.parent.frozenRows);
        for (var i = 0; i < this.parent.frozenRows; i++) {
          tr = row2.render(mhdrData[parseInt(i.toString(), 10)], columns);
          addFixedColumnBorder(tr);
          hdrfrag.appendChild(tr);
        }
        args.virtualInfo.blockIndexes = bIndex;
        args.virtualInfo.page = page;
        if (isVFFrozenOnly && args.virtualInfo.page === 1) {
          modelData.splice(0, this.parent.frozenRows);
        }
      }
      this.virtualFrozenHdrRefresh(hdrfrag, modelData, row2, args, dataSource, columns);
      if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {
        (this.parent.enableVirtualization ? this.parent.lazyLoadRender : this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage] = [];
      }
      if (this.parent.enableInfiniteScrolling && this.parent.groupSettings.enableLazyLoading && args.requestType === "delete" || infiniteDetailModified) {
        this.visibleRows = [];
      }
      var _loop_1 = function(i2, len2) {
        this_1.rows.push(modelData[parseInt(i2.toString(), 10)]);
        if (this_1.parent.groupSettings.enableLazyLoading && !this_1.useGroupCache && this_1.parent.groupSettings.columns.length) {
          (this_1.parent.enableVirtualization ? this_1.parent.lazyLoadRender : this_1.parent.contentModule).refRowsObj[this_1.parent.pageSettings.currentPage].push(modelData[parseInt(i2.toString(), 10)]);
          this_1.setRowsInLazyGroup(modelData[parseInt(i2.toString(), 10)], i2);
          if (isNullOrUndefined(modelData[parseInt(i2.toString(), 10)].indent)) {
            return "continue";
          }
        }
        this_1.setInfiniteVisibleRows(args, modelData[parseInt(i2.toString(), 10)]);
        if (isGroupAdaptive(gObj) && args.virtualInfo && args.virtualInfo.blockIndexes && this_1.rowElements.length >= args.virtualInfo.blockIndexes.length * this_1.parent.contentModule.getBlockSize() && blockLoad) {
          this_1.parent.currentViewData["records"] = this_1.rows.map(function(m2) {
            return m2.data;
          });
          return "break";
        }
        if (!gObj.rowTemplate) {
          tr = row2.render(modelData[parseInt(i2.toString(), 10)], columns);
          addFixedColumnBorder(tr);
          var isVFreorder = this_1.ensureFrozenHeaderRender(args);
          if (gObj.frozenRows && (i2 < gObj.frozenRows || isGroupFrozenHdr) && !isInfiniteScroll && args.requestType !== "virtualscroll" && isVFreorder && this_1.ensureVirtualFrozenHeaderRender(args)) {
            hdrfrag.appendChild(tr);
          } else {
            frag.appendChild(tr);
          }
          var rowIdx = parseInt(tr.getAttribute("aria-rowindex"), 10) - 1;
          if (rowIdx + 1 === gObj.frozenRows) {
            isGroupFrozenHdr = false;
          }
          if (modelData[parseInt(i2.toString(), 10)].isExpand) {
            gObj.notify(expandChildGrid, tr.cells[gObj.groupSettings.columns.length]);
          }
        } else {
          var rowTemplateID = gObj.element.id + "rowTemplate";
          var elements = void 0;
          if (gObj.isReact || isReactPrintGrid) {
            var isHeader = gObj.frozenRows && i2 < gObj.frozenRows;
            var copied = extend$1({ index: i2 }, dataSource[parseInt(i2.toString(), 10)]);
            gObj.getRowTemplate()(copied, gObj, "rowTemplate", rowTemplateID, null, null, isHeader ? hdrfrag : frag);
            if (gObj.requireTemplateRef) {
              var thisRef_2 = this_1;
              thisRef_2.parent.renderTemplates(function() {
                if (gObj.frozenRows && i2 < gObj.frozenRows) {
                  tr = refHdrfrag.childNodes[parseInt(i2.toString(), 10)];
                } else {
                  trElement = refFrag.childNodes[parseInt(i2.toString(), 10)];
                }
                var arg2 = {
                  data: modelData[parseInt(i2.toString(), 10)].data,
                  row: trElement ? trElement : tr
                };
                thisRef_2.parent.trigger(rowDataBound, arg2);
                if (modelData[parseInt(i2.toString(), 10)].isDataRow || thisRef_2.parent.enableVirtualization && thisRef_2.parent.groupSettings.enableLazyLoading) {
                  thisRef_2.rowElements.push(arg2.row);
                }
                thisRef_2.ariaService.setOptions(thisRef_2.parent.element, {
                  colcount: gObj.getColumns().length.toString()
                });
                if (i2 === modelData.length - 1) {
                  refFrag = null;
                  refHdrfrag = null;
                }
              });
              return "continue";
            }
          } else {
            elements = gObj.getRowTemplate()(extend$1({ index: i2 }, dataSource[parseInt(i2.toString(), 10)]), gObj, "rowTemplate", rowTemplateID, void 0, void 0, void 0, this_1.parent["root"]);
          }
          if (!gObj.isReact && elements[0].tagName === "TBODY") {
            for (var j2 = 0; j2 < elements.length; j2++) {
              var isTR = elements[parseInt(j2.toString(), 10)].nodeName.toLowerCase() === "tr";
              if (isTR || elements[parseInt(j2.toString(), 10)].querySelectorAll && elements[parseInt(j2.toString(), 10)].querySelectorAll("tr").length) {
                tr = isTR ? elements[parseInt(j2.toString(), 10)] : elements[parseInt(j2.toString(), 10)].querySelector("tr");
              }
            }
            if (gObj.frozenRows && i2 < gObj.frozenRows) {
              hdrfrag.appendChild(tr);
            } else {
              frag.appendChild(tr);
            }
          } else {
            if (gObj.frozenRows && i2 < gObj.frozenRows) {
              tr = !gObj.isReact ? appendChildren(hdrfrag, elements) : hdrfrag.lastElementChild;
            } else {
              if (!gObj.isReact) {
                tr = appendChildren(frag, elements);
              }
              trElement = gObj.isReact ? frag.lastElementChild : tr.lastElementChild;
            }
          }
          var arg = { data: modelData[parseInt(i2.toString(), 10)].data, row: trElement ? trElement : tr };
          this_1.parent.trigger(rowDataBound, arg);
        }
        if (modelData[parseInt(i2.toString(), 10)].isDataRow || this_1.parent.enableVirtualization && this_1.parent.groupSettings.enableLazyLoading) {
          if (!isNullOrUndefined(gObj.rowTemplate) && (gObj.isAngular || gObj.isVue3 || gObj.isVue)) {
            this_1.rowElements.push(trElement ? trElement : tr);
          } else {
            this_1.rowElements.push(tr);
          }
        }
        this_1.ariaService.setOptions(this_1.parent.element, { colcount: gObj.getColumns().length.toString() });
      };
      var this_1 = this;
      for (var i = startIndex, len = modelData.length; i < len; i++) {
        var state_1 = _loop_1(i);
        if (state_1 === "break")
          break;
      }
      var isReactChild = gObj.parentDetails && gObj.parentDetails.parentInstObj && gObj.parentDetails.parentInstObj.isReact;
      if ((gObj.isReact || isReactChild) && !gObj.requireTemplateRef) {
        gObj.renderTemplates();
      }
      if (this.parent.enableInfiniteScrolling && this.parent.groupSettings.enableLazyLoading) {
        this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage] = this.parent.contentModule["groupCache"][this.parent.pageSettings.currentPage];
      }
      if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {
        this.parent.notify(refreshExpandandCollapse, {
          rows: (this.parent.enableVirtualization ? this.parent.lazyLoadRender : this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]
        });
      }
      gObj.removeMaskRow();
      this.parent.notify("removeGanttShimmer", { requestType: "hideShimmer" });
      if (gObj.frozenRows && args.requestType !== "virtualscroll" && !isInfiniteScroll && this.ensureVirtualFrozenHeaderRender(args) || args.requestType === "virtualscroll" && args.virtualInfo.sentinelInfo && args.virtualInfo.sentinelInfo.axis === "X") {
        hdrTbody = gObj.getHeaderTable().querySelector(tbody);
        if (isReact) {
          var parentTable = hdrTbody.parentElement;
          remove(hdrTbody);
          parentTable.appendChild(hdrfrag);
        } else {
          hdrTbody.innerHTML = "";
          hdrTbody.appendChild(hdrfrag);
        }
        if (!gObj.isInitialLoad) {
          gObj.scrollModule.setHeight();
        }
      }
      args.rows = this.rows.slice(0);
      getUpdateUsingRaf(function() {
        _this.parent.notify(beforeFragAppend, args);
        if (!_this.parent.enableVirtualization && (!_this.parent.enableColumnVirtualization || isColumnVirtualInfiniteProcess) && !isInfiniteScroll) {
          if (!gObj.isReact) {
            _this.tbody.innerHTML = "";
          }
          if (!isNullOrUndefined(_this.tbody.parentElement)) {
            remove(_this.tbody);
          } else {
            remove(gObj.getContentTable().querySelector(tbody));
          }
          _this.tbody = _this.parent.createElement(tbody, { attrs: { role: "rowgroup" } });
        }
        if (gObj.rowTemplate) {
          updateBlazorTemplate(gObj.element.id + "rowTemplate");
        }
        if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && (_this.parent.enableInfiniteScrolling && !_this.isInfiniteColumnvirtualization() || isColumnVirtualInfiniteProcess)) {
          _this.isAddRows = false;
          _this.parent.notify(removeInfiniteRows, { args });
          _this.parent.notify(appendInfiniteContent, {
            tbody: _this.tbody,
            frag,
            args,
            rows: _this.rows,
            rowElements: _this.rowElements,
            visibleRows: _this.visibleRows,
            tableName
          });
          if (_this.isInfiniteColumnvirtualization() && _this.parent.isFrozenGrid()) {
            var virtualTable = _this.parent.getContent().querySelector(".e-virtualtable");
            var transform = getTransformValues(virtualTable);
            _this.parent.contentModule.resetStickyLeftPos(transform.width);
            _this.widthService.refreshFrozenScrollbar();
          }
        } else {
          _this.useGroupCache = false;
          _this.appendContent(_this.tbody, frag, args);
        }
        if (_this.parent.editSettings.showAddNewRow && (_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling)) {
          var newRow = _this.parent.element.querySelector(".e-addrow-removed");
          if (newRow) {
            remove(newRow);
          }
        }
        var startAdd = !_this.parent.element.querySelector("." + addedRow);
        if (_this.parent.editSettings.showAddNewRow && _this.parent.editSettings.mode === "Normal") {
          if (startAdd) {
            if (_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling) {
              _this.parent.isAddNewRow = true;
            }
            _this.parent.isEdit = false;
            _this.parent.addRecord();
          }
          if (startAdd || (_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling) && ["sorting", "filtering", "searching", "grouping", "ungrouping", "reorder"].some(function(value) {
            return args.requestType === value;
          })) {
            _this.parent.notify(showAddNewRowFocus, {});
          }
        }
        if (_this.parent.getVisibleFrozenRightCount() && _this.parent.getContent() && getScrollWidth(_this.parent) > 0) {
          _this.parent.element.classList.add("e-right-shadow");
        }
        frag = null;
      }, this.rafCallback(extend$1({}, args)));
    };
    ContentRender2.prototype.isInfiniteColumnvirtualization = function() {
      return this.parent.enableColumnVirtualization && this.parent.enableInfiniteScrolling;
    };
    ContentRender2.prototype.enableCacheOnInfiniteColumnVirtual = function() {
      return this.isInfiniteColumnvirtualization() && this.parent.infiniteScrollSettings.enableCache;
    };
    ContentRender2.prototype.emptyVcRows = function() {
      this.parent.vcRows = [];
      this.parent.vRows = [];
    };
    ContentRender2.prototype.appendContent = function(tbody2, frag, args, tableName) {
      var isReact = this.parent.isReact && !isNullOrUndefined(this.parent.rowTemplate);
      if (isReact) {
        this.getTable().appendChild(frag);
      } else {
        tbody2.appendChild(frag);
        this.getTable().appendChild(tbody2);
      }
      if (this.parent.rowRenderingMode === "Vertical" && this.parent.allowTextWrap && (this.parent.textWrapSettings.wrapMode === "Header" || this.parent.textWrapSettings.wrapMode === "Both")) {
        var cells = tbody2.querySelectorAll("td");
        for (var i = 0; i < cells.length; i++) {
          var headerCellHeight = parseFloat(document.defaultView.getComputedStyle(cells[parseInt(i.toString(), 10)], "::before").getPropertyValue("height"));
          var cellHeight = cells[parseInt(i.toString(), 10)].offsetHeight;
          if (headerCellHeight > cellHeight) {
            cells[parseInt(i.toString(), 10)].style.height = headerCellHeight + "px";
            cells[parseInt(i.toString(), 10)].style.boxSizing = "content-box";
          }
        }
      }
      if (this.parent.getVisibleFrozenLeftCount() && this.parent.enableColumnVirtualization) {
        this.widthService.refreshFrozenScrollbar();
      }
    };
    ContentRender2.prototype.setRowsInLazyGroup = function(row2, index) {
      if (this.parent.groupSettings.enableLazyLoading && !this.useGroupCache && this.parent.groupSettings.columns.length) {
        (this.parent.enableVirtualization ? this.parent.lazyLoadRender : this.parent.contentModule).maintainRows(row2, index);
      }
    };
    ContentRender2.prototype.setGroupCache = function(data, args) {
      if (!this.useGroupCache && this.parent.groupSettings.enableLazyLoading) {
        this.parent.notify(setGroupCache, { args, data });
      }
    };
    ContentRender2.prototype.ensureFrozenHeaderRender = function(args) {
      return !(this.parent.enableVirtualization && (args.requestType === "reorder" || args.requestType === "refresh") || this.parent.infiniteScrollSettings.enableCache && this.parent.frozenRows && this.parent.infiniteScrollModule.requestType === "delete" && this.parent.pageSettings.currentPage !== 1);
    };
    ContentRender2.prototype.ensureVirtualFrozenHeaderRender = function(args) {
      return !(this.parent.enableVirtualization && args.requestType === "delete");
    };
    ContentRender2.prototype.checkCache = function(modelData, args) {
      if (this.parent.infiniteScrollSettings.enableCache && args.requestType === "infiniteScroll") {
        this.isAddRows = !isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]);
        if (this.isAddRows) {
          var data = this.infiniteCache[this.parent.pageSettings.currentPage];
          modelData = this.parent.pageSettings.currentPage === 1 ? data.slice(this.parent.frozenRows) : data;
        }
        return modelData;
      }
      if (this.parent.groupSettings.enableLazyLoading && this.parent.groupSettings.columns.length && (args.requestType === "paging" || args.requestType === "columnstate" || args.requestType === "reorder" || args.requestType === "virtualscroll") && (this.parent.enableVirtualization ? this.parent.lazyLoadRender : this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]) {
        if (!this.parent.enableVirtualization) {
          this.useGroupCache = true;
        }
        return this.parent.enableVirtualization ? this.parent.getRowsObject() : this.parent.contentModule.initialGroupRows(args.requestType === "reorder");
      }
      return null;
    };
    ContentRender2.prototype.setInfiniteVisibleRows = function(args, data) {
      if (this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && !(this.isInfiniteColumnvirtualization() && args.requestType === "virtualscroll")) {
        this.visibleRows.push(data);
      }
    };
    ContentRender2.prototype.getCurrentBlockInfiniteRecords = function() {
      var data = [];
      if (this.parent.infiniteScrollSettings.enableCache) {
        if (!Object.keys(this.infiniteCache).length) {
          return [];
        }
        var rows = this.parent.getRows();
        var index = parseInt(rows[this.parent.frozenRows].getAttribute(ariaRowIndex), 10) - 1;
        var first = Math.ceil((index + 1) / this.parent.pageSettings.pageSize);
        index = parseInt(rows[rows.length - 1].getAttribute(ariaRowIndex), 10) - 1;
        var last = Math.ceil((index + (rows.length ? 1 : 0)) / this.parent.pageSettings.pageSize);
        for (var i = first; i <= last; i++) {
          data = !data.length ? this.infiniteCache[parseInt(i.toString(), 10)] : data.concat(this.infiniteCache[parseInt(i.toString(), 10)]);
        }
        if (this.parent.frozenRows && this.parent.pageSettings.currentPage > 1) {
          data = this.infiniteCache[1].slice(0, this.parent.frozenRows).concat(data);
        }
      }
      return data;
    };
    ContentRender2.prototype.getReorderedRows = function(args) {
      return this.parent.contentModule.getReorderedFrozenRows(args);
    };
    ContentRender2.prototype.virtualFrozenHdrRefresh = function(hdrfrag, modelData, row2, args, dataSource, columns) {
      if (this.parent.frozenRows && this.parent.enableVirtualization && (args.requestType === "reorder" || args.requestType === "refresh")) {
        var tr = void 0;
        var fhdrData = this.getReorderedRows(args);
        for (var i = 0; i < fhdrData.length; i++) {
          tr = row2.render(fhdrData[parseInt(i.toString(), 10)], columns);
          hdrfrag.appendChild(tr);
        }
        if (args.virtualInfo.page === 1) {
          modelData.splice(0, this.parent.frozenRows);
        }
      }
    };
    ContentRender2.prototype.getInfiniteRows = function() {
      var rows = [];
      if (this.parent.enableInfiniteScrolling) {
        if (this.parent.infiniteScrollSettings.enableCache) {
          var keys2 = Object.keys(this.infiniteCache);
          for (var i = 0; i < keys2.length; i++) {
            rows = rows.concat(this.infiniteCache[keys2[parseInt(i.toString(), 10)]]);
          }
        } else {
          rows = this.visibleRows;
        }
      }
      return rows;
    };
    ContentRender2.prototype.getInfiniteMovableRows = function() {
      var infiniteCacheRows = this.getCurrentBlockInfiniteRecords();
      var infiniteRows = this.parent.enableInfiniteScrolling ? infiniteCacheRows.length ? infiniteCacheRows : this.visibleRows : [];
      return infiniteRows;
    };
    ContentRender2.prototype.getPanel = function() {
      return this.contentPanel;
    };
    ContentRender2.prototype.setPanel = function(panel) {
      this.contentPanel = panel;
    };
    ContentRender2.prototype.getTable = function() {
      return this.contentTable;
    };
    ContentRender2.prototype.setTable = function(table2) {
      this.contentTable = table2;
    };
    ContentRender2.prototype.getRows = function() {
      var infiniteRows = this.getInfiniteRows();
      return infiniteRows.length ? infiniteRows : this.rows;
    };
    ContentRender2.prototype.getRowElements = function() {
      return this.rowElements;
    };
    ContentRender2.prototype.setRowElements = function(elements) {
      this.rowElements = elements;
    };
    ContentRender2.prototype.getColGroup = function() {
      return this.colgroup;
    };
    ContentRender2.prototype.setColGroup = function(colGroup2) {
      if (!isNullOrUndefined(colGroup2)) {
        colGroup2.id = "content-" + colGroup2.id;
      }
      return this.colgroup = colGroup2;
    };
    ContentRender2.prototype.setVisible = function(columns) {
      var gObj = this.parent;
      var rows = this.getRows();
      var testRow;
      rows.some(function(r) {
        if (r.isDataRow) {
          testRow = r;
        }
        return r.isDataRow;
      });
      var needFullRefresh = true;
      if (!gObj.groupSettings.columns.length && testRow) {
        needFullRefresh = false;
      }
      var tr = gObj.getDataRows();
      var args = {};
      var infiniteData = this.infiniteRowVisibility();
      var contentrows = infiniteData ? infiniteData : this.rows.filter(function(row2) {
        return !row2.isDetailRow;
      });
      for (var c = 0, clen = columns.length; c < clen; c++) {
        var column = columns[parseInt(c.toString(), 10)];
        var idx = this.parent.getNormalizedColumnIndex(column.uid);
        var colIdx = this.parent.getColumnIndexByUid(column.uid);
        var displayVal = column.visible === true ? "" : "none";
        if (idx !== -1 && testRow && idx < testRow.cells.length) {
          setStyleAttribute(this.getColGroup().childNodes[parseInt(idx.toString(), 10)], { "display": displayVal });
        }
        if (!needFullRefresh) {
          this.setDisplayNone(tr, colIdx, displayVal, contentrows);
        }
        if (!this.parent.invokedFromMedia && column.hideAtMedia) {
          this.parent.updateMediaColumns(column);
        }
        this.parent.invokedFromMedia = false;
      }
      if (needFullRefresh) {
        this.refreshContentRows({ requestType: "refresh" });
      } else {
        this.parent.notify(partialRefresh, { rows: contentrows, args });
        if (this.parent.editSettings.showAddNewRow && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {
          this.parent.notify(showAddNewRowFocus, {});
        }
      }
    };
    ContentRender2.prototype.setDisplayNone = function(tr, idx, displayVal, rows) {
      setDisplayValue(tr, idx, displayVal, rows, this.parent, this.parent.isRowDragable());
      this.parent.notify(infiniteShowHide, { visible: displayVal, index: idx, isFreeze: this.isInfiniteFreeze });
    };
    ContentRender2.prototype.infiniteRowVisibility = function(isFreeze) {
      var infiniteData;
      if (this.parent.enableInfiniteScrolling) {
        this.isInfiniteFreeze = isFreeze;
        if (this.parent.infiniteScrollSettings.enableCache) {
          infiniteData = this.getCurrentBlockInfiniteRecords();
        } else {
          infiniteData = isFreeze ? this.visibleFrozenRows : this.visibleRows;
        }
      }
      return infiniteData;
    };
    ContentRender2.prototype.colGroupRefresh = function() {
      if (this.getColGroup()) {
        var colGroup2 = this.getHeaderColGroup();
        this.getTable().replaceChild(colGroup2, this.getColGroup());
        this.setColGroup(colGroup2);
      }
    };
    ContentRender2.prototype.getHeaderColGroup = function() {
      return this.parent.element.querySelector("." + gridHeader).querySelector(colGroup + ":not(.e-masked-colgroup)").cloneNode(true);
    };
    ContentRender2.prototype.initializeContentDrop = function() {
      var gObj = this.parent;
      this.droppable = new Droppable(gObj.element, {
        accept: ".e-dragclone",
        drop: this.drop
      });
    };
    ContentRender2.prototype.droppableDestroy = function() {
      if (this.droppable && !this.droppable.isDestroyed) {
        this.droppable.destroy();
      }
    };
    ContentRender2.prototype.canSkip = function(column, row2, index) {
      return isNullOrUndefined(row2) || //(1)
      isNullOrUndefined(column.visible) || //(2)
      row2.cells[parseInt(index.toString(), 10)].visible === column.visible;
    };
    ContentRender2.prototype.getModelGenerator = function() {
      return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);
    };
    ContentRender2.prototype.renderEmpty = function(tbody$1) {
      this.getTable().appendChild(tbody$1);
      if (this.parent.frozenRows) {
        this.parent.getHeaderContent().querySelector(tbody).innerHTML = "";
      }
    };
    ContentRender2.prototype.setSelection = function(uid2, set, clearAll) {
      this.parent.notify(setFreezeSelection, { uid: uid2, set, clearAll });
      var row2 = this.getRows().filter(function(row3) {
        return clearAll || uid2 === row3.uid;
      });
      for (var j = 0; j < row2.length; j++) {
        row2[parseInt(j.toString(), 10)].isSelected = set;
        var cells = row2[parseInt(j.toString(), 10)].cells;
        for (var k = 0; k < cells.length; k++) {
          cells[parseInt(k.toString(), 10)].isSelected = set;
        }
      }
    };
    ContentRender2.prototype.getRowByIndex = function(index) {
      index = this.getInfiniteRowIndex(index);
      return !isNullOrUndefined(index) ? this.parent.getDataRows()[parseInt(index.toString(), 10)] : void 0;
    };
    ContentRender2.prototype.getInfiniteRowIndex = function(index) {
      if (this.parent.infiniteScrollSettings.enableCache && !isNullOrUndefined(index)) {
        var fRows = this.parent.frozenRows;
        var idx = fRows > index ? 0 : fRows;
        var firstRowIndex = parseInt(this.parent.getRows()[parseInt(idx.toString(), 10)].getAttribute(ariaRowIndex), 10) - 1;
        index = fRows > index ? index : index - firstRowIndex + fRows;
      }
      return index;
    };
    ContentRender2.prototype.getVirtualRowIndex = function(index) {
      return index;
    };
    ContentRender2.prototype.enableAfterRender = function(e) {
      if (e.module === "group" && e.enable) {
        this.generator = this.getModelGenerator();
      }
    };
    ContentRender2.prototype.setRowObjects = function(rows) {
      this.rows = rows;
    };
    ContentRender2.prototype.immutableModeRendering = function(args) {
      var _this = this;
      if (args === void 0) {
        args = {};
      }
      var gObj = this.parent;
      gObj.hideSpinner();
      var key = gObj.getPrimaryKeyFieldNames()[0];
      var oldKeys = {};
      var newKeys = {};
      var newRowObjs = [];
      var oldIndexes = {};
      var oldRowObjs = gObj.getRowsObject().slice();
      var batchChangeKeys = this.getBatchEditedRecords(key, oldRowObjs);
      var newIndexes = {};
      var hasBatch = Object.keys(batchChangeKeys).length !== 0;
      if (gObj.getContent().querySelector(".e-emptyrow") || args.requestType === "reorder" || this.parent.groupSettings.columns.length) {
        this.refreshContentRows(args);
      } else {
        if (gObj.currentViewData.length === 0) {
          return;
        }
        var oldRowElements = {};
        var tbody$1 = gObj.createElement(tbody, { attrs: { role: "rowgroup" } });
        var dataSource = gObj.currentViewData;
        var trs = [].slice.call(this.getTable().querySelector(tbody).children);
        if (this.prevCurrentView.length) {
          var prevLen = this.prevCurrentView.length;
          var currentLen = dataSource.length;
          if (prevLen === currentLen) {
            for (var i = 0; i < currentLen; i++) {
              if (this.parent.editSettings.mode === "Batch" && trs[parseInt(i.toString(), 10)].classList.contains("e-insertedrow")) {
                trs.splice(i, 1);
                --i;
                continue;
              }
              newKeys[dataSource[parseInt(i.toString(), 10)]["" + key]] = oldKeys[this.prevCurrentView[parseInt(i.toString(), 10)]["" + key]] = i;
              newIndexes[parseInt(i.toString(), 10)] = dataSource[parseInt(i.toString(), 10)]["" + key];
              oldRowElements[oldRowObjs[parseInt(i.toString(), 10)].uid] = trs[parseInt(i.toString(), 10)];
              oldIndexes[parseInt(i.toString(), 10)] = this.prevCurrentView[parseInt(i.toString(), 10)]["" + key];
            }
          } else {
            for (var i = 0; i < currentLen; i++) {
              newKeys[dataSource[parseInt(i.toString(), 10)]["" + key]] = i;
              newIndexes[parseInt(i.toString(), 10)] = dataSource[parseInt(i.toString(), 10)]["" + key];
            }
            for (var i = 0; i < prevLen; i++) {
              if (this.parent.editSettings.mode === "Batch" && trs[parseInt(i.toString(), 10)].classList.contains("e-insertedrow")) {
                trs.splice(i, 1);
                --i;
                continue;
              }
              oldRowElements[oldRowObjs[parseInt(i.toString(), 10)].uid] = trs[parseInt(i.toString(), 10)];
              oldKeys[this.prevCurrentView[parseInt(i.toString(), 10)]["" + key]] = i;
              oldIndexes[parseInt(i.toString(), 10)] = this.prevCurrentView[parseInt(i.toString(), 10)]["" + key];
            }
          }
        }
        for (var i = 0; i < dataSource.length; i++) {
          var oldIndex = oldKeys[dataSource[parseInt(i.toString(), 10)]["" + key]];
          if (!isNullOrUndefined(oldIndex)) {
            var isEqual = false;
            if (this.parent.enableDeepCompare) {
              isEqual = this.objectEqualityChecker(this.prevCurrentView[parseInt(oldIndex.toString(), 10)], dataSource[parseInt(i.toString(), 10)]);
            }
            var tr = oldRowElements[oldRowObjs[parseInt(oldIndex.toString(), 10)].uid];
            newRowObjs.push(oldRowObjs[parseInt(oldIndex.toString(), 10)]);
            if (this.rowElements[parseInt(oldIndex.toString(), 10)] && this.rowElements[parseInt(oldIndex.toString(), 10)].getAttribute("data-uid") === newRowObjs[parseInt(i.toString(), 10)].uid && (hasBatch && isNullOrUndefined(batchChangeKeys[newIndexes[parseInt(i.toString(), 10)]]) || !hasBatch && (isEqual || this.prevCurrentView[parseInt(oldIndex.toString(), 10)] === dataSource[parseInt(i.toString(), 10)]))) {
              if (oldIndex !== i) {
                this.refreshImmutableContent(i, tr, newRowObjs[parseInt(i.toString(), 10)]);
              }
              tbody$1.appendChild(tr);
              continue;
            }
            if (hasBatch && !isNullOrUndefined(batchChangeKeys[newIndexes[parseInt(i.toString(), 10)]]) || !this.parent.enableDeepCompare && dataSource[parseInt(i.toString(), 10)] !== this.prevCurrentView[parseInt(oldIndex.toString(), 10)] || this.parent.enableDeepCompare && !isEqual) {
              oldRowObjs[parseInt(oldIndex.toString(), 10)].setRowValue(dataSource[parseInt(i.toString(), 10)]);
            }
            tbody$1.appendChild(tr);
            this.refreshImmutableContent(i, tr, newRowObjs[parseInt(i.toString(), 10)]);
          } else {
            var row2 = new RowRenderer(this.serviceLocator, null, gObj);
            var args_1 = { startIndex: i };
            var modelData = this.generator.generateRows([dataSource[parseInt(i.toString(), 10)]], args_1);
            newRowObjs.push(modelData[0]);
            var tr = row2.render(modelData[0], gObj.getColumns());
            tbody$1.appendChild(tr);
            this.refreshImmutableContent(i, tr, newRowObjs[parseInt(i.toString(), 10)]);
          }
        }
        this.rows = newRowObjs;
        this.rowElements = [].slice.call(tbody$1.children);
        remove(this.getTable().querySelector(tbody));
        this.getTable().appendChild(tbody$1);
        this.parent.trigger(dataBound, {}, function() {
          if (_this.parent.allowTextWrap) {
            _this.parent.notify(freezeRender, { case: "textwrap" });
          }
        });
        if (args) {
          var action = (args.requestType || "").toLowerCase() + "-complete";
          this.parent.notify(action, args);
        }
      }
    };
    ContentRender2.prototype.objectEqualityChecker = function(old, next) {
      var keys2 = Object.keys(old);
      var isEqual = true;
      for (var i = 0; i < keys2.length; i++) {
        if (old[keys2[parseInt(i.toString(), 10)]] !== next[keys2[parseInt(i.toString(), 10)]]) {
          var isDate = old[keys2[parseInt(i.toString(), 10)]] instanceof Date && next[keys2[parseInt(i.toString(), 10)]] instanceof Date;
          if (!isDate || old[keys2[parseInt(i.toString(), 10)]].getTime() !== next[keys2[parseInt(i.toString(), 10)]].getTime()) {
            isEqual = false;
            break;
          }
        }
      }
      return isEqual;
    };
    ContentRender2.prototype.getBatchEditedRecords = function(primaryKey, rows) {
      var keys2 = {};
      var changes = this.parent.getBatchChanges();
      var changedRecords2 = [];
      var addedRecords2 = [];
      if (Object.keys(changes).length) {
        changedRecords2 = changes.changedRecords;
        addedRecords2 = changes.addedRecords;
      }
      var args = { cancel: false };
      this.parent.notify(immutableBatchCancel, { rows, args });
      if (addedRecords2.length) {
        if (this.parent.editSettings.newRowPosition === "Bottom") {
          rows.splice(rows.length - 1, addedRecords2.length);
        } else {
          if (!args.cancel) {
            rows.splice(0, addedRecords2.length);
          }
        }
      }
      for (var i = 0; i < changedRecords2.length; i++) {
        keys2[changedRecords2[parseInt(i.toString(), 10)]["" + primaryKey]] = i;
      }
      return keys2;
    };
    ContentRender2.prototype.refreshImmutableContent = function(index, tr, row2) {
      row2.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;
      if (row2.isAltRow) {
        tr.classList.add("e-altrow");
      } else {
        tr.classList.remove("e-altrow");
      }
      row2.index = index;
      row2.edit = void 0;
      row2.isDirty = false;
      tr.setAttribute(ariaRowIndex, (index + 1).toString());
      this.updateCellIndex(tr, index);
    };
    ContentRender2.prototype.updateCellIndex = function(rowEle, index) {
      for (var i = 0; i < rowEle.cells.length; i++) {
        rowEle.cells[parseInt(i.toString(), 10)].setAttribute("index", index.toString());
      }
    };
    return ContentRender2;
  }()
);
var HeaderRender = (
  /** @class */
  function() {
    function HeaderRender2(parent, serviceLocator) {
      var _this = this;
      this.frzIdx = 0;
      this.notfrzIdx = 0;
      this.isFirstCol = false;
      this.isReplaceDragEle = true;
      this.helper = function(e) {
        var gObj = _this.parent;
        var target = _this.draggable.currentStateTarget;
        var parentEle = parentsUntil(target, "e-headercell");
        if (!(gObj.allowReordering || gObj.allowGrouping) || !isNullOrUndefined(parentEle) && parentEle.getElementsByClassName("e-checkselectall").length > 0) {
          return false;
        }
        var visualElement = _this.parent.createElement("div", { className: "e-cloneproperties e-dragclone e-headerclone" });
        var element2 = target.classList.contains("e-headercell") ? target : parentEle;
        if (!element2 || !gObj.allowReordering && element2.classList.contains("e-stackedheadercell")) {
          return false;
        }
        var height = element2.offsetHeight;
        var headercelldiv = element2.querySelector(".e-headercelldiv") || element2.querySelector(".e-stackedheadercelldiv");
        var col;
        if (headercelldiv) {
          if (element2.querySelector(".e-stackedheadercelldiv")) {
            col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);
          } else {
            col = gObj.getColumnByUid(headercelldiv.getAttribute("e-mappinguid"));
          }
          _this.column = col;
          if (_this.column.lockColumn) {
            return false;
          }
          visualElement.setAttribute("e-mappinguid", _this.column.uid);
        }
        if (col && !isNullOrUndefined(col.headerTemplate)) {
          if (!isNullOrUndefined(col.headerTemplate)) {
            var colIndex = gObj.getColumnIndexByField(col.field);
            var result = col.getHeaderTemplate()(extend$1({ "index": colIndex }, col), gObj, "headerTemplate", null, null, null, null, gObj.root);
            var isReactCompiler = gObj.isReact && typeof col.headerTemplate !== "string";
            var isReactChild = gObj.parentDetails && gObj.parentDetails.parentInstObj && gObj.parentDetails.parentInstObj.isReact;
            if (isReactCompiler || isReactChild) {
              gObj.renderTemplates();
            }
            appendChildren(visualElement, result);
          } else {
            visualElement.innerHTML = col.headerTemplate;
          }
          if (!isNullOrUndefined(visualElement.firstChild) && visualElement.firstChild.nodeType === 1) {
            visualElement.firstChild.style.pointerEvents = "none";
          }
        } else {
          visualElement.innerHTML = headercelldiv ? col.headerText : element2.firstElementChild.innerHTML;
        }
        visualElement.style.width = element2.offsetWidth + "px";
        visualElement.style.height = element2.offsetHeight + "px";
        visualElement.style.lineHeight = (height - 6).toString() + "px";
        gObj.element.appendChild(visualElement);
        return visualElement;
      };
      this.dragStart = function(e) {
        var gObj = _this.parent;
        gObj.element.querySelector(".e-gridpopup").style.display = "none";
        gObj.notify(columnDragStart, { target: _this.draggable.currentStateTarget, column: _this.column, event: e.event });
      };
      this.drag = function(e) {
        var gObj = _this.parent;
        var target = e.target;
        if (target) {
          var closest$1 = closest(target, ".e-grid");
          var cloneElement = _this.parent.element.querySelector(".e-cloneproperties");
          if (!closest$1 || closest$1.getAttribute("id") !== gObj.element.getAttribute("id")) {
            classList(cloneElement, ["e-notallowedcur"], ["e-defaultcur"]);
            if (gObj.allowReordering) {
              gObj.element.querySelector(".e-reorderuparrow").style.display = "none";
              gObj.element.querySelector(".e-reorderdownarrow").style.display = "none";
            }
            if (!gObj.groupSettings.allowReordering) {
              return;
            }
          }
          gObj.notify(columnDrag, { target: e.target, column: _this.column, event: e.event });
        }
      };
      this.dragStop = function(e) {
        var gObj = _this.parent;
        var cancel;
        gObj.element.querySelector(".e-gridpopup").style.display = "none";
        if (!parentsUntil(e.target, "e-headercell") && !parentsUntil(e.target, "e-groupdroparea") || !gObj.allowReordering && parentsUntil(e.target, "e-headercell") || !e.helper.getAttribute("e-mappinguid") && parentsUntil(e.target, "e-groupdroparea")) {
          remove(e.helper);
          cancel = true;
        }
        gObj.notify(columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel });
      };
      this.drop = function(e) {
        var gObj = _this.parent;
        var uid2 = e.droppedElement.getAttribute("e-mappinguid");
        var closest$1 = closest(e.target, ".e-grid");
        remove(e.droppedElement);
        if (closest$1 && closest$1.getAttribute("id") !== gObj.element.getAttribute("id") || !(gObj.allowReordering || gObj.allowGrouping)) {
          return;
        }
        gObj.notify(headerDrop, { target: e.target, uid: uid2, droppedElement: e.droppedElement });
      };
      this.parent = parent;
      this.serviceLocator = serviceLocator;
      this.ariaService = this.serviceLocator.getService("ariaService");
      this.widthService = this.serviceLocator.getService("widthService");
      if (this.parent.isDestroyed) {
        return;
      }
      if (!this.parent.enableColumnVirtualization) {
        this.parent.on(columnVisibilityChanged, this.setVisible, this);
      }
      this.parent.on(columnPositionChanged, this.colPosRefresh, this);
      this.parent.on(initialEnd, this.renderCustomToolbar, this);
      if (this.parent.rowRenderingMode === "Vertical") {
        this.parent.on(uiUpdate, this.updateCustomResponsiveToolbar, this);
      }
    }
    HeaderRender2.prototype.renderPanel = function() {
      var div = this.parent.element.querySelector("." + gridHeader);
      var isRendered = div != null;
      div = isRendered ? div : this.parent.createElement("div", { className: "e-gridheader" });
      var innerDiv = isRendered ? div.querySelector("." + headerContent) : this.parent.createElement("div", { className: headerContent });
      this.toggleStackClass(div);
      div.appendChild(innerDiv);
      this.setPanel(div);
      if (!isRendered) {
        this.parent.element.appendChild(div);
      }
    };
    HeaderRender2.prototype.renderTable = function() {
      var headerDiv = this.getPanel();
      headerDiv.appendChild(this.createHeaderTable());
      this.setTable(headerDiv.querySelector("." + table));
      this.initializeHeaderDrag();
      this.initializeHeaderDrop();
      this.parent.notify(headerRefreshed, { rows: this.rows });
    };
    HeaderRender2.prototype.getPanel = function() {
      return this.headerPanel;
    };
    HeaderRender2.prototype.setPanel = function(panel) {
      this.headerPanel = panel;
    };
    HeaderRender2.prototype.getTable = function() {
      return this.headerTable;
    };
    HeaderRender2.prototype.setTable = function(table2) {
      this.headerTable = table2;
    };
    HeaderRender2.prototype.getColGroup = function() {
      return this.colgroup;
    };
    HeaderRender2.prototype.setColGroup = function(colGroup2) {
      return this.colgroup = colGroup2;
    };
    HeaderRender2.prototype.getRows = function() {
      var table2 = this.getTable();
      return table2.tHead.rows;
    };
    HeaderRender2.prototype.createHeaderTable = function() {
      var table2 = this.createTable();
      var innerDiv = this.getPanel().querySelector("." + headerContent);
      innerDiv.appendChild(table2);
      return innerDiv;
    };
    HeaderRender2.prototype.createHeader = function(tableEle, tableName) {
      var gObj = this.parent;
      if (this.getTable()) {
        remove(this.getTable());
      }
      var table$1 = this.parent.createElement("table", { className: table, attrs: { role: "presentation" } });
      table$1.style.cssText = "border-collapse: separate; border-spacing: .25px;";
      var findHeaderRow = this.createHeaderContent(tableName);
      var thead = findHeaderRow.thead;
      var tbody$1 = this.parent.createElement(tbody, { className: this.parent.frozenRows || (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.showAddNewRow ? "" : "e-hide", attrs: { role: "rowgroup" } });
      this.caption = this.parent.createElement("caption", { innerHTML: this.parent.element.id + "_header_table", className: "e-hide" });
      var colGroup$1 = this.parent.createElement(colGroup);
      var rowBody = this.parent.createElement("tr", { attrs: { role: "row" }, className: (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.showAddNewRow ? "e-hide" : "" });
      var bodyCell;
      var rows = this.rows = findHeaderRow.rows;
      for (var i = 0, len = rows.length; i < len; i++) {
        for (var j = 0, len_1 = rows[parseInt(i.toString(), 10)].cells.length; j < len_1; j++) {
          bodyCell = this.parent.createElement("td");
          rowBody.appendChild(bodyCell);
        }
      }
      if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {
        table$1.classList.add("e-sortfilter");
      }
      this.updateColGroup(colGroup$1);
      tbody$1.appendChild(rowBody);
      table$1.appendChild(this.setColGroup(colGroup$1));
      table$1.appendChild(thead);
      table$1.appendChild(tbody$1);
      table$1.appendChild(this.caption);
      return table$1;
    };
    HeaderRender2.prototype.createTable = function(tableEle) {
      if (tableEle === void 0) {
        tableEle = null;
      }
      return this.createHeader(tableEle);
    };
    HeaderRender2.prototype.createHeaderContent = function(tableName) {
      var gObj = this.parent;
      var columns = gObj.getColumns();
      var thead = this.parent.createElement("thead", { attrs: { "role": "rowgroup" } });
      var colHeader = this.parent.createElement("tr", { className: "e-columnheader", attrs: { role: "row" } });
      var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);
      rowRenderer.element = colHeader;
      var rows = [];
      var headerRow;
      this.colDepth = measureColumnDepth(gObj.columns);
      for (var i = 0, len = this.colDepth; i < len; i++) {
        rows[parseInt(i.toString(), 10)] = this.generateRow(i);
        rows[parseInt(i.toString(), 10)].cells = [];
      }
      rows = this.ensureColumns(rows);
      rows = this.getHeaderCells(rows, tableName);
      if (gObj.isRowDragable() && this.parent.getFrozenMode() === "Right") {
        for (var i = 0, len = rows.length; i < len; i++) {
          rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.RowDragHIcon));
        }
      }
      var headerTemplateColumn = columns.filter(function(a) {
        return a.headerTemplate;
      });
      if (headerTemplateColumn.length && (this.parent.isReact || this.parent.isVue)) {
        clearReactVueTemplates(this.parent, ["headerTemplate"]);
      }
      for (var i = 0, len = this.colDepth; i < len; i++) {
        headerRow = rowRenderer.render(rows[parseInt(i.toString(), 10)], columns);
        if (this.parent.rowHeight && headerRow.querySelector(".e-headercell")) {
          headerRow.style.height = this.parent.rowHeight + "px";
        }
        addFixedColumnBorder(headerRow);
        thead.appendChild(headerRow);
      }
      var findHeaderRow = {
        thead,
        rows
      };
      return findHeaderRow;
    };
    HeaderRender2.prototype.updateColGroup = function(colGroup$1) {
      var cols = this.parent.getColumns();
      var col;
      var indexes = this.parent.getColumnIndexesInView();
      colGroup$1.id = this.parent.element.id + colGroup;
      if (this.parent.allowGrouping) {
        for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {
          if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {
            continue;
          }
          col = this.parent.createElement("col", { className: "e-group-intent" });
          colGroup$1.appendChild(col);
        }
      }
      if (this.parent.detailTemplate || this.parent.childGrid) {
        col = this.parent.createElement("col", { className: "e-detail-intent" });
        colGroup$1.appendChild(col);
      }
      if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== "Right") {
        col = this.parent.createElement("col", { className: "e-drag-intent" });
        colGroup$1.appendChild(col);
      }
      for (var i = 0, len = cols.length; i < len; i++) {
        col = this.parent.createElement("col");
        if (cols[parseInt(i.toString(), 10)].visible === false) {
          setStyleAttribute(col, { "display": "none" });
        }
        colGroup$1.appendChild(col);
      }
      if (this.parent.isRowDragable() && this.parent.getFrozenMode() === "Right") {
        col = this.parent.createElement("col", { className: "e-drag-intent" });
        colGroup$1.appendChild(col);
      }
      return colGroup$1;
    };
    HeaderRender2.prototype.ensureColumns = function(rows) {
      var gObj = this.parent;
      var indexes = this.parent.getColumnIndexesInView();
      for (var i = 0, len = rows.length; i < len; i++) {
        if (gObj.allowGrouping) {
          for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {
            if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {
              continue;
            }
            rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.HeaderIndent));
          }
        }
        if (gObj.detailTemplate || gObj.childGrid) {
          var args = {};
          this.parent.notify(detailIndentCellInfo, args);
          rows[parseInt(i.toString(), 10)].cells.push(this.generateCell(args, CellType.DetailHeader));
        }
        if (gObj.isRowDragable() && this.parent.getFrozenMode() !== "Right") {
          rows[parseInt(i.toString(), 10)].cells.push(this.generateCell({}, CellType.RowDragHIcon));
        }
      }
      return rows;
    };
    HeaderRender2.prototype.getHeaderCells = function(rows, tableName) {
      var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector("thead");
      var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns(this.parent.enablePersistence) : this.parent.columns;
      this.frzIdx = 0;
      this.notfrzIdx = 0;
      if (this.parent.lockcolPositionCount) {
        for (var i = 0; i < (!isNullOrUndefined(cols) ? cols.length : 0); i++) {
          this.lockColsRendered = false;
          rows = this.appendCells(cols[parseInt(i.toString(), 10)], rows, 0, i === 0, false, i === cols.length - 1, thead, tableName, false);
        }
      }
      for (var i = 0, len = !isNullOrUndefined(cols) ? cols.length : 0; i < len; i++) {
        this.notfrzIdx = 0;
        this.lockColsRendered = true;
        rows = this.appendCells(cols[parseInt(i.toString(), 10)], rows, 0, i === 0, false, i === len - 1, thead, tableName, false);
      }
      return rows;
    };
    HeaderRender2.prototype.appendCells = function(cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable, tableName, isStackLastCol) {
      var lastCol = isLastCol ? isStackLastCol ? "e-laststackcell" : "e-lastcell" : "";
      var isLockColumn = !this.parent.lockcolPositionCount || cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered;
      if (!cols.columns) {
        if (isLockColumn) {
          rows[parseInt(index.toString(), 10)].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? "" : isFirstCol ? "e-firstcell" : "") + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));
        }
        if (this.parent.lockcolPositionCount) {
          if (this.frzIdx + this.notfrzIdx < this.parent.frozenColumns && (cols.lockColumn && !this.lockColsRendered || !cols.lockColumn && this.lockColsRendered)) {
            this.frzIdx++;
          } else {
            this.notfrzIdx++;
          }
        } else {
          this.frzIdx++;
        }
      } else {
        this.isFirstCol = false;
        var colSpan = this.getCellCnt(cols, 0);
        if (colSpan) {
          var stackedLockColsCount = this.getStackedLockColsCount(cols, 0);
          var isStackedLockColumn = this.parent.lockcolPositionCount === 0 || !this.lockColsRendered && stackedLockColsCount !== 0 || this.lockColsRendered && colSpan - stackedLockColsCount !== 0;
          if (isStackedLockColumn) {
            rows[parseInt(index.toString(), 10)].cells.push(new Cell({
              cellType: CellType.StackedHeader,
              column: cols,
              colSpan: this.getColSpan(colSpan, stackedLockColsCount),
              className: isFirstObj ? "" : isFirstCol ? "e-firstcell" : ""
            }));
          }
        }
        if (this.parent.lockcolPositionCount && !this.lockColsRendered) {
          for (var i = 0; i < cols.columns.length; i++) {
            rows = this.appendCells(cols.columns[parseInt(i.toString(), 10)], rows, index + 1, isFirstObj, i === 0, i === cols.columns.length - 1 && isLastCol, isMovable, tableName, false);
          }
        }
        if (this.lockColsRendered) {
          for (var i = 0, len = cols.columns.length; i < len; i++) {
            isFirstObj = isFirstObj && i === 0;
            var isFirstCol_1 = this.isFirstCol = cols.columns[parseInt(i.toString(), 10)].visible && !isFirstObj;
            var isLaststackedCol = i === len - 1 && isLastCol;
            rows = this.appendCells(cols.columns[parseInt(i.toString(), 10)], rows, index + 1, isFirstObj, isFirstCol_1 && !isLaststackedCol, isLaststackedCol, isMovable, tableName, true);
          }
        }
      }
      return rows;
    };
    HeaderRender2.prototype.getStackedLockColsCount = function(col, lockColsCount) {
      if (col.columns) {
        for (var i = 0; i < col.columns.length; i++) {
          lockColsCount = this.getStackedLockColsCount(col.columns[parseInt(i.toString(), 10)], lockColsCount);
        }
      } else if (col.lockColumn) {
        lockColsCount++;
      }
      return lockColsCount;
    };
    HeaderRender2.prototype.getColSpan = function(colSpan, stackedLockColsCount) {
      colSpan = !this.lockColsRendered ? stackedLockColsCount : colSpan - stackedLockColsCount;
      return colSpan;
    };
    HeaderRender2.prototype.generateRow = function(index) {
      return new Row({});
    };
    HeaderRender2.prototype.generateCell = function(column, cellType, rowSpan, className, rowIndex, colIndex) {
      var opt = {
        "visible": column.visible,
        "isDataCell": false,
        "isTemplate": !isNullOrUndefined(column.headerTemplate),
        "rowID": "",
        "column": column,
        "cellType": cellType,
        "rowSpan": rowSpan,
        "className": className,
        "index": rowIndex,
        "colIndex": colIndex
      };
      if (!opt.rowSpan || opt.rowSpan < 2) {
        delete opt.rowSpan;
      }
      return new Cell(opt);
    };
    HeaderRender2.prototype.setVisible = function(columns) {
      var gObj = this.parent;
      var displayVal;
      var idx;
      for (var c = 0, clen = columns.length; c < clen; c++) {
        var column = columns[parseInt(c.toString(), 10)];
        idx = gObj.getNormalizedColumnIndex(column.uid);
        displayVal = column.visible ? "" : "none";
        setStyleAttribute(this.getColGroup().children[parseInt(idx.toString(), 10)], { "display": displayVal });
        if (gObj.editSettings.showAddNewRow && gObj.element.querySelector(".e-addedrow")) {
          setStyleAttribute(gObj.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(idx.toString(), 10)], { "display": displayVal });
        }
      }
      this.refreshUI();
      if (this.parent.editSettings.showAddNewRow) {
        this.parent.isAddNewRow = true;
      }
    };
    HeaderRender2.prototype.colPosRefresh = function() {
      this.refreshUI();
    };
    HeaderRender2.prototype.refreshUI = function() {
      var headerDiv = this.getPanel();
      this.toggleStackClass(headerDiv);
      var table2 = this.getTable();
      var tableName = void 0;
      if (table2) {
        remove(table2);
        if (this.parent.editSettings.showAddNewRow && !this.parent.isAddNewRow && table2.querySelector(".e-addedrow") && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {
          table2.querySelector(".e-addedrow").classList.add("e-addrow-removed");
          this.parent.isAddNewRow = true;
        }
        table2.removeChild(table2.firstChild);
        table2.removeChild(table2.childNodes[0]);
        var colGroup$1 = this.parent.createElement(colGroup);
        var findHeaderRow = this.createHeaderContent(tableName);
        this.rows = findHeaderRow.rows;
        table2.insertBefore(findHeaderRow.thead, table2.firstChild);
        this.updateColGroup(colGroup$1);
        table2.insertBefore(this.setColGroup(colGroup$1), table2.firstChild);
        this.appendContent(table2);
        this.parent.notify(colGroupRefresh, {});
        this.widthService.setWidthToColumns();
        this.parent.updateDefaultCursor();
        this.initializeHeaderDrag();
        var rows = [].slice.call(headerDiv.querySelectorAll("tr.e-columnheader"));
        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {
          var row2 = rows_1[_i];
          var gCells = [].slice.call(row2.getElementsByClassName("e-grouptopleftcell"));
          if (gCells.length) {
            gCells[gCells.length - 1].classList.add("e-lastgrouptopleftcell");
          }
        }
        this.parent.notify(headerRefreshed, { rows: this.rows });
        if (this.parent.enableColumnVirtualization && parentsUntil(table2, movableHeader)) {
          this.parent.notify(headerRefreshed, { rows: this.rows, args: { isFrozen: false, isXaxis: true } });
        }
        if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === "Header") {
          wrap(rows, true);
        }
      }
      var firstHeaderCell = this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");
      if (!isNullOrUndefined(firstHeaderCell)) {
        firstHeaderCell.tabIndex = 0;
      }
    };
    HeaderRender2.prototype.toggleStackClass = function(div) {
      var column = this.parent.columns;
      var stackedHdr = !isNullOrUndefined(column) ? column.some(function(column2) {
        return !isNullOrUndefined(column2.columns);
      }) : false;
      if (stackedHdr) {
        div.classList.add("e-stackedheader");
      } else {
        div.classList.remove("e-stackedheader");
      }
    };
    HeaderRender2.prototype.appendContent = function(table2) {
      this.getPanel().querySelector("." + headerContent).appendChild(table2);
    };
    HeaderRender2.prototype.getCellCnt = function(col, cnt) {
      if (col.columns) {
        for (var i = 0, len = col.columns.length; i < len; i++) {
          cnt = this.getCellCnt(col.columns[parseInt(i.toString(), 10)], cnt);
        }
      } else {
        if (col.visible) {
          cnt++;
        }
      }
      return cnt;
    };
    HeaderRender2.prototype.initializeHeaderDrag = function() {
      var gObj = this.parent;
      if (!(this.parent.allowReordering || this.parent.allowGrouping && this.parent.groupSettings.showDropArea)) {
        return;
      }
      this.draggable = new Draggable(gObj.getHeaderContent(), {
        dragTarget: ".e-headercell",
        distance: 5,
        helper: this.helper,
        dragStart: this.dragStart,
        drag: this.drag,
        dragStop: this.dragStop,
        abort: ".e-rhandler",
        isReplaceDragEle: this.isReplaceDragEle
      });
      this.parent.on(destroy, this.droppableDestroy, this);
    };
    HeaderRender2.prototype.initializeHeaderDrop = function() {
      var gObj = this.parent;
      this.droppable = new Droppable(gObj.getHeaderContent(), {
        accept: ".e-dragclone",
        drop: this.drop
      });
      this.parent.on(destroy, this.droppableDestroy, this);
    };
    HeaderRender2.prototype.droppableDestroy = function() {
      if (this.droppable && !this.droppable.isDestroyed) {
        this.droppable.destroy();
      }
      if (this.draggable && !this.draggable.isDestroyed) {
        this.draggable.destroy();
      }
    };
    HeaderRender2.prototype.renderCustomToolbar = function() {
      var _this = this;
      var gObj = this.parent;
      if (gObj.rowRenderingMode === "Vertical" && !gObj.toolbar && (gObj.allowSorting || gObj.allowFiltering && gObj.filterSettings.type !== "FilterBar")) {
        var div = gObj.createElement("div", { className: "e-res-toolbar e-toolbar" });
        var toolbarItems = gObj.createElement("div", { className: "e-toolbar-items" });
        var toolbarLeft = gObj.createElement("div", { className: "e-toolbar-left" });
        var count = this.parent.allowFiltering && this.parent.allowSorting ? 2 : 1;
        for (var i = 0; i < count; i++) {
          var toolbarItem = gObj.createElement("div", { className: "e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align" });
          var cls = count === 1 ? this.parent.allowSorting ? "sort" : "filter" : i === 1 ? "sort" : "filter";
          var button = gObj.createElement("button", { className: "e-tbar-btn e-control e-btn e-lib e-icon-btn" });
          var span = gObj.createElement("span", { className: "e-btn-icon e-res" + cls + "-icon e-icons" });
          button.appendChild(span);
          var btnObj = new Button({
            cssClass: this.parent.cssClass ? this.parent.cssClass : ""
          });
          btnObj.appendTo(button);
          button.onclick = function(e) {
            if (e.target.classList.contains("e-ressort-btn") || e.target.classList.contains("e-ressort-icon") || e.target.querySelector(".e-ressort-icon")) {
              _this.parent.showResponsiveCustomSort();
            } else {
              _this.parent.showResponsiveCustomFilter();
            }
          };
          toolbarItem.appendChild(button);
          toolbarLeft.appendChild(toolbarItem);
        }
        toolbarItems.appendChild(toolbarLeft);
        div.appendChild(toolbarItems);
        gObj.element.insertBefore(div, this.parent.element.querySelector("." + gridHeader));
      } else {
        if (gObj.enableAdaptiveUI && !gObj.toolbar) {
          gObj.getContent().classList.add("e-responsive-header");
        }
      }
    };
    HeaderRender2.prototype.updateCustomResponsiveToolbar = function(args) {
      var resToolbar = this.parent.element.querySelector(".e-responsive-toolbar");
      if (args.module === "toolbar") {
        if (resToolbar) {
          remove(resToolbar);
        } else {
          this.renderCustomToolbar();
        }
      }
    };
    return HeaderRender2;
  }()
);
var CellRenderer = (
  /** @class */
  function() {
    function CellRenderer2(parent, locator) {
      this.localizer = locator.getService("localization");
      this.formatter = locator.getService("valueFormatter");
      this.parent = parent;
      this.element = this.parent.createElement("TD", { className: rowCell, attrs: { role: "gridcell", tabindex: "-1" } });
      this.rowChkBox = this.parent.createElement("input", { className: "e-checkselect", attrs: { "type": "checkbox", "aria-label": this.localizer.getConstant("SelectRow") } });
    }
    CellRenderer2.prototype.getGui = function() {
      return "";
    };
    CellRenderer2.prototype.format = function(column, value, data) {
      if (!isNullOrUndefined(column.format)) {
        if (column.type === "number" && isNaN(parseInt(value, 10))) {
          value = null;
        }
        if (column.type === "dateonly" && typeof value === "string" && value) {
          var arr = value.split(/[^0-9.]/);
          value = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));
        }
        value = this.formatter.toView(value, column.getFormatter());
      }
      return isNullOrUndefined(value) ? "" : value.toString();
    };
    CellRenderer2.prototype.evaluate = function(node, cell, data, attributes2, fData, isEdit) {
      var _a;
      var result;
      if (cell.column.template) {
        var isReactCompiler = this.parent.isReact && typeof cell.column.template !== "string" && !(cell.column.template.prototype && cell.column.template.prototype.CSPTemplate);
        var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;
        var isReactPrintGrid = this.parent.printGridParent && this.parent.printGridParent.isReact;
        var literals_1 = ["index"];
        var dummyData = extendObjWithFn({}, data, (_a = {}, _a[foreignKeyData] = fData, _a.column = cell.column, _a));
        var templateID = this.parent.element.id + cell.column.uid;
        var str = "isStringTemplate";
        if (isReactCompiler || isReactChild || isReactPrintGrid) {
          var copied = { "index": attributes2[literals_1[0]] };
          cell.column.getColumnTemplate()(extend$1(copied, dummyData), this.parent, "columnTemplate", templateID, this.parent["" + str], null, node);
        } else {
          result = cell.column.getColumnTemplate()(extend$1({ "index": attributes2[literals_1[0]] }, dummyData), this.parent, "template", templateID, this.parent["" + str], void 0, void 0, this.parent["root"]);
        }
        if (!isReactCompiler && !isReactChild && !isReactPrintGrid) {
          appendChildren(node, result);
        }
        this.parent.notify("template-result", { template: result });
        result = null;
        if (cell.column.templateOptions.enableAriaLabel) {
          node.setAttribute("aria-label", node.innerText + this.localizer.getConstant("TemplateCell") + this.localizer.getConstant("ColumnHeader") + cell.column.headerText);
        }
        return false;
      }
      return true;
    };
    CellRenderer2.prototype.invokeFormatter = function(column, value, data) {
      if (!isNullOrUndefined(column.formatter)) {
        if (doesImplementInterface(column.formatter, "getValue")) {
          var formatter = column.formatter;
          value = new formatter().getValue(column, data);
        } else if (typeof column.formatter === "function") {
          value = column.formatter(column, data);
        } else {
          value = column.formatter.getValue(column, data);
        }
      }
      return value;
    };
    CellRenderer2.prototype.render = function(cell, data, attributes2, isExpand, isEdit) {
      return this.refreshCell(cell, data, attributes2, isEdit);
    };
    CellRenderer2.prototype.refreshTD = function(td, cell, data, attributes2) {
      var isEdit = this.parent.editSettings.mode === "Batch" && td.classList.contains("e-editedbatchcell");
      if (this.parent.isReact) {
        var cellIndex = td.cellIndex;
        var parentRow = td.parentElement;
        remove(td);
        var newTD = this.refreshCell(cell, data, attributes2, isEdit);
        this.cloneAttributes(newTD, td);
        if (parentRow.cells.length !== cellIndex - 1) {
          parentRow.insertBefore(newTD, parentRow.cells[parseInt(cellIndex.toString(), 10)]);
        } else {
          parentRow.appendChild(newTD);
        }
      } else {
        var node = this.refreshCell(cell, data, attributes2, isEdit);
        td.innerHTML = "";
        var arialabelText = node.getAttribute("aria-label");
        arialabelText ? td.setAttribute("aria-label", arialabelText) : null;
        var elements = [].slice.call(node.childNodes);
        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
          var elem = elements_1[_i];
          td.appendChild(elem);
        }
      }
    };
    CellRenderer2.prototype.cloneAttributes = function(target, source) {
      var attrs = source.attributes;
      var i = attrs.length;
      var attr;
      while (i--) {
        attr = attrs[parseInt(i.toString(), 10)];
        target.setAttribute(attr.name, attr.value);
      }
    };
    CellRenderer2.prototype.refreshCell = function(cell, data, attributes2, isEdit) {
      var _a;
      var node = this.element.cloneNode();
      var column = cell.column;
      var fData;
      if (cell.isForeignKey) {
        fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : "", _a);
      }
      var innerHtml = this.getGui();
      var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) : this.getValue(column.field, data, column);
      if ((column.type === "date" || column.type === "datetime") && !isNullOrUndefined(value)) {
        value = new Date(value);
      }
      if (column.type === "dateonly" && !isNullOrUndefined(value) && typeof value === "string") {
        var arr = value.split(/[^0-9.]/);
        value = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));
      }
      value = this.format(column, value, data);
      innerHtml = value.toString();
      if (column.type === "boolean" && !column.displayAsCheckBox) {
        var localeStr = value !== "true" && value !== "false" ? null : value === "true" ? "True" : "False";
        innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;
      }
      var fromFormatter = this.invokeFormatter(column, value, data);
      innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? "" : fromFormatter.toString() : innerHtml;
      if (this.evaluate(node, cell, data, attributes2, fData, isEdit) && column.type !== "checkbox") {
        this.appendHtml(node, this.parent.sanitize(innerHtml), column.getDomSetter ? column.getDomSetter() : "innerHTML");
      } else if (column.type === "checkbox") {
        node.classList.add(gridChkBox);
        if (this.parent.selectionSettings.persistSelection) {
          value = value === "true";
        } else {
          value = false;
        }
        var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: " " });
        if (this.parent.cssClass) {
          addClass([checkWrap], [this.parent.cssClass]);
        }
        this.rowChkBox.id = "checkbox-" + cell.rowID;
        checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);
        node.appendChild(checkWrap);
      }
      if (this.parent.checkAllRows === "Check" && this.parent.enableVirtualization) {
        cell.isSelected = true;
      }
      this.setAttributes(node, cell, attributes2);
      if (column.type === "boolean" && column.displayAsCheckBox) {
        var checked = isNaN(parseInt(value.toString(), 10)) ? value === "true" : parseInt(value.toString(), 10) > 0;
        var checkWrap = createCheckBox(this.parent.createElement, false, { checked, label: " " });
        node.innerHTML = "";
        node.classList.add("e-gridchkbox-cell");
        checkWrap.classList.add("e-checkbox-disabled");
        if (this.parent.cssClass) {
          addClass([checkWrap], [this.parent.cssClass]);
        }
        node.appendChild(checkWrap);
      }
      if (node.classList.contains("e-summarycell") && !data.key) {
        var uid2 = node.getAttribute("e-mappinguid");
        column = this.parent.getColumnByUid(uid2);
        node.setAttribute("aria-label", innerHtml + this.localizer.getConstant("ColumnHeader") + cell.column.headerText);
      }
      if (this.parent.isFrozenGrid() && (!data || data && !data.key)) {
        addStickyColumnPosition(this.parent, column, node);
      }
      return node;
    };
    CellRenderer2.prototype.appendHtml = function(node, innerHtml, property) {
      if (property === void 0) {
        property = "innerHTML";
      }
      node["" + property] = innerHtml;
      return node;
    };
    CellRenderer2.prototype.setAttributes = function(node, cell, attributes2) {
      var column = cell.column;
      this.buildAttributeFromCell(node, cell, column.type === "checkbox");
      setStyleAndAttributes(node, attributes2);
      setStyleAndAttributes(node, cell.attributes);
      if (column.customAttributes) {
        setStyleAndAttributes(node, column.customAttributes);
      }
      if (this.parent.rowRenderingMode === "Vertical") {
        setStyleAndAttributes(node, { "data-cell": column.headerText });
      }
      if (column.textAlign) {
        var alignmentClassMap = { right: "e-rightalign", left: "e-leftalign", center: "e-centeralign", justify: "e-justifyalign" };
        if (alignmentClassMap[column.textAlign.toLowerCase()]) {
          node.classList.add(alignmentClassMap[column.textAlign.toLowerCase()]);
        }
      }
      if (column.clipMode === "Clip" || !column.clipMode && this.parent.clipMode === "Clip") {
        node.classList.add("e-gridclip");
      } else if (column.clipMode === "EllipsisWithTooltip" || !column.clipMode && this.parent.clipMode === "EllipsisWithTooltip" && !(this.parent.allowTextWrap && (this.parent.textWrapSettings.wrapMode === "Content" || this.parent.textWrapSettings.wrapMode === "Both"))) {
        if (column.type !== "checkbox") {
          node.classList.add("e-ellipsistooltip");
        }
      }
    };
    CellRenderer2.prototype.buildAttributeFromCell = function(node, cell, isCheckBoxType) {
      var attr = {};
      var classes = [];
      if (cell.colSpan) {
        attr.colSpan = cell.colSpan;
      }
      if (cell.rowSpan) {
        attr.rowSpan = cell.rowSpan;
      }
      if (cell.isTemplate) {
        classes.push("e-templatecell");
      }
      if (cell.isSelected) {
        classes.push.apply(classes, ["e-selectionbackground", "e-active"]);
        if (isCheckBoxType) {
          node.querySelector(".e-frame").classList.add("e-check");
        }
      }
      if (cell.isColumnSelected) {
        classes.push.apply(classes, ["e-columnselection"]);
      }
      if (cell.cellType === CellType.Header) {
        attr[ariaColIndex] = cell.colIndex + 1;
      } else if (!isNullOrUndefined(cell.index)) {
        attr[ariaColIndex] = cell.index + 1;
      }
      if (!cell.visible) {
        classes.push("e-hide");
      }
      attr.class = classes;
      setStyleAndAttributes(node, attr);
    };
    CellRenderer2.prototype.getValue = function(field, data, column) {
      return column.valueAccessor(field, data, column);
    };
    return CellRenderer2;
  }()
);
var AriaService = (
  /** @class */
  function() {
    function AriaService2() {
    }
    AriaService2.prototype.setOptions = function(target, options) {
      var props = Object.keys(options);
      for (var i = 0; i < props.length; i++) {
        setStateAndProperties(target, config[props[parseInt(i.toString(), 10)]], options[props[parseInt(i.toString(), 10)]]);
      }
    };
    AriaService2.prototype.setExpand = function(target, expand) {
      setStateAndProperties(target, config.expand, expand);
    };
    AriaService2.prototype.setSort = function(target, direction) {
      setStateAndProperties(target, config.sort, direction, typeof direction === "boolean");
    };
    AriaService2.prototype.setBusy = function(target, isBusy) {
      setStateAndProperties(target, config.busy, isBusy);
      setStateAndProperties(target, config.invalid, null, true);
    };
    AriaService2.prototype.setGrabbed = function(target, isGrabbed, remove2) {
      setStateAndProperties(target, config.grabbed, isGrabbed, remove2);
    };
    AriaService2.prototype.setDropTarget = function(target, isTarget) {
      setStateAndProperties(target, config.dropeffect, "copy", !isTarget);
    };
    return AriaService2;
  }()
);
function setStateAndProperties(target, attribute, value, remove2) {
  if (remove2 && target) {
    target.removeAttribute(attribute);
    return;
  }
  if (target) {
    target.setAttribute(attribute, value);
  }
}
var config = {
  expand: "aria-expanded",
  role: "role",
  datarole: "data-role",
  selected: "aria-selected",
  multiselectable: "aria-multiselectable",
  sort: "aria-sort",
  busy: "aria-busy",
  invalid: "aria-invalid",
  grabbed: "aria-grabbed",
  dropeffect: "aria-dropeffect",
  haspopup: "aria-haspopup",
  level: "aria-level",
  colcount: "aria-colcount",
  rowcount: "aria-rowcount"
};
var __extends$j = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var HeaderCellRenderer = (
  /** @class */
  function(_super) {
    __extends$j(HeaderCellRenderer2, _super);
    function HeaderCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TH", { className: "e-headercell", attrs: { tabindex: "-1", role: "columnheader" } });
      _this.ariaService = new AriaService();
      _this.hTxtEle = _this.parent.createElement("span", { className: "e-headertext" });
      _this.sortEle = _this.parent.createElement("div", { className: "e-sortfilterdiv e-icons", attrs: { "aria-hidden": "true" } });
      _this.gui = _this.parent.createElement("div");
      _this.chkAllBox = _this.parent.createElement("input", { className: "e-checkselectall", attrs: { "type": "checkbox", "aria-label": _this.localizer.getConstant("SelectAllCheckbox") } });
      return _this;
    }
    HeaderCellRenderer2.prototype.getGui = function() {
      return this.gui.cloneNode();
    };
    HeaderCellRenderer2.prototype.render = function(cell, data, attributes2) {
      var node = this.element.cloneNode();
      var fltrMenuEle = this.parent.createElement("div", { className: "e-filtermenudiv e-icons e-icon-filter", attrs: { "aria-hidden": "true" } });
      return this.prepareHeader(cell, node, fltrMenuEle);
    };
    HeaderCellRenderer2.prototype.refresh = function(cell, node) {
      this.clean(node);
      var fltrMenuEle = this.parent.createElement("div", { className: "e-filtermenudiv e-icons e-icon-filter", attrs: { "aria-hidden": "true" } });
      return this.prepareHeader(cell, node, fltrMenuEle);
    };
    HeaderCellRenderer2.prototype.clean = function(node) {
      node.innerHTML = "";
    };
    HeaderCellRenderer2.prototype.prepareHeader = function(cell, node, fltrMenuEle) {
      var column = cell.column;
      var ariaAttr = {};
      var elementDesc = "";
      var innerDIV = this.getGui();
      var hValueAccer;
      attributes(innerDIV, {
        "e-mappinguid": column.uid,
        "class": "e-headercelldiv"
      });
      if (!isNullOrUndefined(column.headerValueAccessor)) {
        hValueAccer = this.getValue(column.headerText, column);
      }
      if (this.parent.rowHeight && this.parent.allowSorting && column.allowSorting && !isNullOrUndefined(column.field)) {
        node.classList.add("e-sort-icon");
      }
      if (column.type !== "checkbox") {
        var value = column.headerText;
        if (!isNullOrUndefined(hValueAccer)) {
          value = hValueAccer;
        }
        var headerText = this.hTxtEle.cloneNode();
        headerText[column.getDomSetter()] = this.parent.sanitize(value);
        innerDIV.appendChild(headerText);
      } else {
        column.editType = "booleanedit";
        var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: " " });
        this.chkAllBox.id = "checkbox-" + column.uid;
        checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);
        if (this.parent.cssClass) {
          addClass([checkAllWrap], [this.parent.cssClass]);
        }
        innerDIV.appendChild(checkAllWrap);
        innerDIV.classList.add("e-headerchkcelldiv");
      }
      this.buildAttributeFromCell(node, cell);
      this.appendHtml(node, innerDIV);
      node.appendChild(this.sortEle.cloneNode());
      if (this.parent.allowFiltering && this.parent.filterSettings.type !== "FilterBar" && (column.allowFiltering && !isNullOrUndefined(column.field)) && !(this.parent.showColumnMenu && column.showColumnMenu)) {
        attributes(fltrMenuEle, {
          "e-mappinguid": "e-flmenu-" + column.uid
        });
        elementDesc = elementDesc.length ? elementDesc + ". " + this.localizer.getConstant("FilterDescription") : this.localizer.getConstant("FilterDescription");
        node.classList.add("e-fltr-icon");
        var matchFlColumns = [];
        if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {
          var foreignColumn = this.parent.getForeignKeyColumns();
          for (var index = 0; index < this.parent.columns.length; index++) {
            for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {
              if (this.parent.filterSettings.columns[parseInt(count.toString(), 10)].field === column.field || foreignColumn.length && column.foreignKeyValue === this.parent.filterSettings.columns[parseInt(count.toString(), 10)].field) {
                fltrMenuEle.classList.add("e-filtered");
                matchFlColumns.push(column.field);
                break;
              }
            }
          }
        }
        node.appendChild(fltrMenuEle.cloneNode());
      }
      if (cell.className) {
        node.classList.add(cell.className);
      }
      if (column.customAttributes) {
        setStyleAndAttributes(node, column.customAttributes);
      }
      if (this.parent.allowSorting && column.allowSorting) {
        ariaAttr.sort = "none";
        elementDesc = elementDesc.length ? elementDesc + ". " + this.localizer.getConstant("SortDescription") : this.localizer.getConstant("SortDescription");
      }
      if (this.parent.allowGrouping && column.allowGrouping || this.parent.allowReordering && column.allowReordering) {
        ariaAttr.grabbed = false;
        elementDesc = elementDesc.length ? elementDesc + ". " + this.localizer.getConstant("GroupDescription") : this.localizer.getConstant("GroupDescription");
      }
      if (this.parent.showColumnMenu && column.type !== "checkbox" && !column.template) {
        elementDesc = elementDesc.length ? elementDesc + ". " + this.localizer.getConstant("ColumnMenuDescription") : this.localizer.getConstant("ColumnMenuDescription");
      }
      node = this.extendPrepareHeader(column, node);
      var result;
      var gridObj = this.parent;
      var colIndex = gridObj.getColumnIndexByField(column.field);
      if (!isNullOrUndefined(column.headerTemplate)) {
        var headerTempID = gridObj.element.id + column.uid + "headerTemplate";
        var str = "isStringTemplate";
        var col = column;
        var isReactCompiler = this.parent.isReact && typeof column.headerTemplate !== "string" && !(column.headerTemplate.prototype && column.headerTemplate.prototype.CSPTemplate);
        var isReactChild_1 = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;
        var isReactPrintGrid = this.parent.printGridParent && this.parent.printGridParent.isReact;
        if (isReactCompiler || isReactChild_1 || isReactPrintGrid) {
          var copied = { "index": colIndex };
          node.firstElementChild.innerHTML = "";
          column.getHeaderTemplate()(extend$1(copied, col), gridObj, "headerTemplate", headerTempID, this.parent["" + str], null, node.firstElementChild);
          this.parent.renderTemplates();
        } else {
          result = column.getHeaderTemplate()(extend$1({ "index": colIndex }, col), gridObj, "headerTemplate", headerTempID, this.parent["" + str], void 0, void 0, this.parent["root"]);
          node.firstElementChild.innerHTML = "";
          appendChildren(node.firstElementChild, result);
        }
      }
      this.ariaService.setOptions(node, ariaAttr);
      if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {
        var alignment = column.headerTextAlign || column.textAlign;
        if (alignment.toLowerCase() === "right" || alignment.toLowerCase() === "left") {
          node.classList.add(alignment.toLowerCase() === "right" ? "e-rightalign" : "e-leftalign");
        } else if (alignment.toLowerCase() === "center") {
          node.classList.add("e-centeralign");
        } else if (alignment.toLowerCase() === "justify") {
          node.classList.add("e-justifyalign");
        }
      }
      if (column.clipMode === "Clip" || !column.clipMode && this.parent.clipMode === "Clip") {
        node.classList.add("e-gridclip");
      } else if ((column.clipMode === "EllipsisWithTooltip" || !column.clipMode && this.parent.clipMode === "EllipsisWithTooltip") && !(gridObj.allowTextWrap && (gridObj.textWrapSettings.wrapMode === "Header" || gridObj.textWrapSettings.wrapMode === "Both"))) {
        if (column.type !== "checkbox") {
          node.classList.add("e-ellipsistooltip");
        }
      }
      if (elementDesc) {
        var titleElem = this.parent.createElement("span", { id: "headerTitle-" + column.uid, innerHTML: elementDesc });
        titleElem.style.display = "none";
        node.appendChild(titleElem);
        node.setAttribute("aria-describedby", titleElem.id);
      }
      node.setAttribute("aria-rowspan", (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());
      node.setAttribute("aria-colspan", "1");
      var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;
      if ((this.parent.isReact && this.parent.requireTemplateRef || isReactChild && this.parent.parentDetails.parentInstObj.requireTemplateRef) && !isNullOrUndefined(column.headerTemplate)) {
        var thisRef_1 = this;
        thisRef_1.parent.renderTemplates(function() {
          thisRef_1.parent.trigger(headerCellInfo, { cell, node });
        });
      } else {
        this.parent.trigger(headerCellInfo, { cell, node });
      }
      if (this.parent.isFrozenGrid()) {
        addStickyColumnPosition(this.parent, column, node);
      }
      return node;
    };
    HeaderCellRenderer2.prototype.getValue = function(field, column) {
      return column.headerValueAccessor(field, column);
    };
    HeaderCellRenderer2.prototype.extendPrepareHeader = function(column, node) {
      if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {
        var element2 = this.parent.createElement("div", { className: "e-icons e-columnmenu", attrs: { "aria-hidden": "true" } });
        var matchFilteredColumns = [];
        if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {
          for (var i = 0; i < this.parent.columns.length; i++) {
            for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {
              if (this.parent.filterSettings.columns[parseInt(j.toString(), 10)].field === column.field) {
                element2.classList.add("e-filtered");
                matchFilteredColumns.push(column.field);
                break;
              }
            }
          }
        }
        node.classList.add("e-fltr-icon");
        node.appendChild(element2);
      }
      if (this.parent.allowResizing) {
        var handler = this.parent.createElement("div");
        handler.className = column.allowResizing ? "e-rhandler e-rcursor" : "e-rsuppress";
        node.appendChild(handler);
      }
      return node;
    };
    HeaderCellRenderer2.prototype.appendHtml = function(node, innerHtml) {
      node.appendChild(innerHtml);
      return node;
    };
    return HeaderCellRenderer2;
  }(CellRenderer)
);
var __extends$i = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var StackedHeaderCellRenderer = (
  /** @class */
  function(_super) {
    __extends$i(StackedHeaderCellRenderer2, _super);
    function StackedHeaderCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TH", {
        className: "e-headercell e-stackedheadercell",
        attrs: {
          tabindex: "-1",
          role: "columnheader"
        }
      });
      return _this;
    }
    StackedHeaderCellRenderer2.prototype.render = function(cell, data, attributes2) {
      var node = this.element.cloneNode();
      var div = this.parent.createElement("div", {
        className: "e-stackedheadercelldiv",
        attrs: { "e-mappinguid": cell.column.uid }
      });
      var column = cell.column;
      node.appendChild(div);
      if (!isNullOrUndefined(column.headerTemplate)) {
        appendChildren(div, column.getHeaderTemplate()(column, this.parent, "headerTemplate", null, null, null, null, this.parent.root));
      } else {
        this.appendHtml(div, this.parent.sanitize(column.headerText), column.getDomSetter());
      }
      if (cell.column.toolTip) {
        node.setAttribute("title", cell.column.toolTip);
      }
      if (column.clipMode === "Clip" || !column.clipMode && this.parent.clipMode === "Clip") {
        node.classList.add("e-gridclip");
      } else if (column.clipMode === "EllipsisWithTooltip" || !column.clipMode && this.parent.clipMode === "EllipsisWithTooltip") {
        node.classList.add("e-ellipsistooltip");
      }
      if (!isNullOrUndefined(cell.column.textAlign)) {
        var alignmentClassMap = { right: "e-rightalign", left: "e-leftalign", center: "e-centeralign", justify: "e-justifyalign" };
        if (alignmentClassMap[cell.column.textAlign.toLowerCase()]) {
          node.classList.add(alignmentClassMap[cell.column.textAlign.toLowerCase()]);
        }
      }
      if (cell.column.customAttributes) {
        setStyleAndAttributes(node, cell.column.customAttributes);
      }
      node.setAttribute("colspan", cell.colSpan.toString());
      node.setAttribute("aria-colspan", cell.colSpan.toString());
      node.setAttribute("aria-rowspan", "1");
      if (this.parent.allowResizing) {
        var handler = this.parent.createElement("div");
        handler.className = cell.column.allowResizing ? "e-rhandler e-rcursor" : "e-rsuppress";
        node.appendChild(handler);
      }
      if (cell.className) {
        node.classList.add(cell.className);
      }
      this.parent.trigger(headerCellInfo, { cell, node });
      if (frozenDirection(column) === "Left") {
        node.classList.add("e-leftfreeze");
        if (column.border === "Left") {
          node.classList.add("e-freezeleftborder");
        }
        if (column.index === 0) {
          applyStickyLeftRightPosition(node, this.parent.getIndentCount() * 30, this.parent.enableRtl, "Left");
        } else {
          var cols = this.parent.getColumns();
          var width = this.parent.getIndentCount() * 30;
          for (var i = 0; i < cols.length; i++) {
            if (column.index < cols[parseInt(i.toString(), 10)].index) {
              break;
            }
            if (cols[parseInt(i.toString(), 10)].visible) {
              width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
            }
          }
          applyStickyLeftRightPosition(node, width, this.parent.enableRtl, "Left");
        }
      } else if (frozenDirection(column) === "Right") {
        node.classList.add("e-rightfreeze");
        var cols = this.parent.getColumns();
        var width = this.parent.getFrozenMode() === "Right" && this.parent.isRowDragable() ? 30 : 0;
        for (var i = cols.length - 1; i >= 0; i--) {
          if (isChildColumn(column, cols[parseInt(i.toString(), 10)].uid) || column.index > cols[parseInt(i.toString(), 10)].index) {
            break;
          }
          if (cols[parseInt(i.toString(), 10)].visible) {
            width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
          }
        }
        applyStickyLeftRightPosition(node, width, this.parent.enableRtl, "Right");
        if (column.border === "Right") {
          node.classList.add("e-freezerightborder");
        }
      } else if (frozenDirection(column) === "Fixed") {
        node.classList.add("e-fixedfreeze");
        var cols = this.parent.getColumns();
        var width = 0;
        if (this.parent.getVisibleFrozenLeftCount()) {
          width = this.parent.getIndentCount() * 30;
        } else if (this.parent.getFrozenMode() === "Right") {
          width = this.parent.groupSettings.columns.length * 30;
        }
        for (var i = 0; i < cols.length; i++) {
          if (column.index > cols[parseInt(i.toString(), 10)].index) {
            if (cols[parseInt(i.toString(), 10)].freeze === "Left" || cols[parseInt(i.toString(), 10)].isFrozen || cols[parseInt(i.toString(), 10)].freeze === "Fixed") {
              if (cols[parseInt(i.toString(), 10)].visible) {
                width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
              }
            }
          }
        }
        applyStickyLeftRightPosition(node, width - 1, this.parent.enableRtl, "Left");
        width = this.parent.getFrozenMode() === "Right" && this.parent.isRowDragable() ? 30 : 0;
        for (var i = cols.length - 1; i >= 0; i--) {
          if (column.index < cols[parseInt(i.toString(), 10)].index) {
            if (isChildColumn(column, cols[parseInt(i.toString(), 10)].uid) || column.index > cols[parseInt(i.toString(), 10)].index) {
              break;
            }
            if (cols[parseInt(i.toString(), 10)].freeze === "Right" || cols[parseInt(i.toString(), 10)].freeze === "Fixed") {
              if (cols[parseInt(i.toString(), 10)].visible) {
                width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
              }
            }
          }
        }
        applyStickyLeftRightPosition(node, width - 1, this.parent.enableRtl, "Right");
      } else {
        node.classList.add("e-unfreeze");
      }
      return node;
    };
    return StackedHeaderCellRenderer2;
  }(CellRenderer)
);
var __extends$h = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var IndentCellRenderer = (
  /** @class */
  function(_super) {
    __extends$h(IndentCellRenderer2, _super);
    function IndentCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TD", { className: "e-indentcell" });
      return _this;
    }
    IndentCellRenderer2.prototype.render = function(cell, data) {
      var node = this.element.cloneNode();
      setStyleAndAttributes(node, cell.attributes);
      return node;
    };
    return IndentCellRenderer2;
  }(CellRenderer)
);
var __extends$g = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var GroupCaptionCellRenderer = (
  /** @class */
  function(_super) {
    __extends$g(GroupCaptionCellRenderer2, _super);
    function GroupCaptionCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.cellUid = 0;
      _this.element = _this.parent.createElement("TD", {
        className: "e-groupcaption",
        attrs: { id: _this.parent.element.id + "captioncell", tabindex: "-1" }
      });
      return _this;
    }
    GroupCaptionCellRenderer2.prototype.render = function(cell, data) {
      this.element.id = this.parent.element.id + "captioncell" + this.cellUid++;
      var node = this.element.cloneNode();
      var gObj = this.parent;
      var column = cell.column;
      var domSetter = column.getDomSetter ? column.getDomSetter() : "innerHTML";
      var result;
      var fKeyValue;
      var gTemplateValue;
      data.headerText = cell.column.headerText;
      if (cell.isForeignKey) {
        fKeyValue = this.format(cell.column, cell.column.valueAccessor("foreignKey", data, cell.column));
      }
      var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key : this.format(cell.column, cell.column.valueAccessor("key", data, cell.column));
      for (var j = 0; j < gObj.aggregates.length; j++) {
        var _loop_1 = function(i2) {
          if (gObj.getVisibleColumns()[0].field === gObj.aggregates[parseInt(j.toString(), 10)].columns[parseInt(i2.toString(), 10)].field && gObj.aggregates[parseInt(j.toString(), 10)].columns[parseInt(i2.toString(), 10)].groupCaptionTemplate) {
            var gCaptionTemp = gObj.aggregates[parseInt(j.toString(), 10)].columns[parseInt(i2.toString(), 10)].groupCaptionTemplate;
            if (typeof gCaptionTemp === "string" && gCaptionTemp.includes("$")) {
              gTemplateValue = gObj.aggregates[parseInt(j.toString(), 10)].columns[parseInt(i2.toString(), 10)].groupCaptionTemplate.split("$")[0] + data[gObj.getVisibleColumns()[0].field][gObj.aggregates[parseInt(j.toString(), 10)].columns[parseInt(i2.toString(), 10)].type] + gObj.aggregates[parseInt(j.toString(), 10)].columns[parseInt(i2.toString(), 10)].groupCaptionTemplate.split("}")[1];
            } else {
              var column_1 = gObj.aggregates[parseInt(j.toString(), 10)].columns[parseInt(i2.toString(), 10)];
              var tempObj = column_1.getTemplate(CellType.CaptionSummary);
              var tempID2 = "";
              if (!isNullOrUndefined(tempObj)) {
                var tempValue_1 = tempObj.fn(data[column_1.columnName], this_1.parent, tempObj.property, tempID2);
                var isReactPrintGrid2 = this_1.parent.printGridParent && this_1.parent.printGridParent.isReact;
                if ((this_1.parent.isReact || isReactPrintGrid2) && typeof column_1.groupCaptionTemplate !== "string") {
                  this_1.parent.renderTemplates(function() {
                    if (tempValue_1 && tempValue_1.length) {
                      if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {
                        node.appendChild(tempValue_1[0]);
                      } else {
                        node.innerText += " " + tempValue_1[0].textContent;
                      }
                    }
                  });
                } else {
                  if (tempValue_1 && tempValue_1.length) {
                    if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {
                      gTemplateValue = tempValue_1;
                    } else {
                      gTemplateValue = tempValue_1[0].textContent;
                    }
                  }
                }
              }
            }
            return "break";
          }
        };
        var this_1 = this;
        for (var i = 0; i < gObj.aggregates[parseInt(j.toString(), 10)].columns.length; i++) {
          var state_1 = _loop_1(i);
          if (state_1 === "break")
            break;
        }
      }
      if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {
        var isReactCompiler = this.parent.isReact && typeof gObj.groupSettings.captionTemplate !== "string" && !(gObj.groupSettings.captionTemplate.prototype && gObj.groupSettings.captionTemplate.prototype.CSPTemplate);
        var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isReact;
        var isReactPrintGrid = this.parent.printGridParent && this.parent.printGridParent.isReact;
        if (isReactCompiler || isReactChild || isReactPrintGrid) {
          var tempID = gObj.element.id + "captionTemplate";
          var groupKey = "groupKey";
          var key = "key";
          data["" + groupKey] = data["" + key];
          templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent, "captionTemplate", tempID, null, null, node);
          this.parent.renderTemplates();
        } else if (this.parent.isVue || gObj.parentDetails && gObj.parentDetails.parentInstObj && gObj.parentDetails.parentInstObj.isVue) {
          result = templateCompiler(gObj.groupSettings.captionTemplate)(data, this.parent, "captionTemplate", null, null, null, null, gObj.root);
        } else {
          result = templateCompiler(gObj.groupSettings.captionTemplate)(data);
        }
        if (!isReactCompiler && !isReactChild && !isReactPrintGrid) {
          appendChildren(node, result);
          if (gTemplateValue && gTemplateValue.length && gTemplateValue[0].textContent) {
            node.appendChild(gTemplateValue[0]);
          }
        }
      } else {
        if (gObj.groupSettings.enableLazyLoading) {
          node["" + domSetter] = this.parent.sanitize(cell.column.headerText) + ": " + this.parent.sanitize(value) + (gTemplateValue ? "   " + gTemplateValue : "");
        } else {
          node["" + domSetter] = this.parent.sanitize(cell.column.headerText) + ": " + this.parent.sanitize(value) + " - " + data.count + " " + (data.count < 2 ? this.localizer.getConstant("Item") : this.localizer.getConstant("Items")) + (gTemplateValue ? "   " + gTemplateValue : "");
        }
      }
      node.setAttribute("colspan", cell.colSpan.toString());
      node.setAttribute("aria-label", node.innerHTML + this.localizer.getConstant("GroupCaption"));
      node.setAttribute("title", node.textContent);
      return node;
    };
    return GroupCaptionCellRenderer2;
  }(CellRenderer)
);
var GroupCaptionEmptyCellRenderer = (
  /** @class */
  function(_super) {
    __extends$g(GroupCaptionEmptyCellRenderer2, _super);
    function GroupCaptionEmptyCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TD", { className: "e-groupcaption" });
      return _this;
    }
    GroupCaptionEmptyCellRenderer2.prototype.render = function(cell, data) {
      var node = this.element.cloneNode();
      node.innerHTML = "&nbsp;";
      node.setAttribute("colspan", cell.colSpan.toString());
      return node;
    };
    return GroupCaptionEmptyCellRenderer2;
  }(CellRenderer)
);
var __extends$f = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var ExpandCellRenderer = (
  /** @class */
  function(_super) {
    __extends$f(ExpandCellRenderer2, _super);
    function ExpandCellRenderer2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    ExpandCellRenderer2.prototype.render = function(cell, data, attr, isExpand) {
      var node = this.element.cloneNode();
      node.setAttribute("ej-mappingname", data.field);
      node.setAttribute("ej-mappingvalue", data.key);
      node.setAttribute("aria-expanded", isExpand ? "true" : "false");
      node.setAttribute("tabindex", "-1");
      if (this.parent.infiniteScrollSettings && this.parent.infiniteScrollSettings.enableCache && !this.parent.groupSettings.enableLazyLoading) {
        cell.cellType = CellType.Indent;
        node.className = isExpand ? "e-recordplusexpand e-disablepointer" : "e-recordpluscollapse e-disablepointer";
      } else {
        node.className = isExpand ? "e-recordplusexpand" : "e-recordpluscollapse";
        node.appendChild(this.parent.createElement("a", {
          className: isExpand ? "e-icons e-gdiagonaldown e-icon-gdownarrow" : "e-icons e-gnextforward e-icon-grightarrow",
          attrs: { href: "#", "title": isExpand ? this.localizer.getConstant("Expanded") : this.localizer.getConstant("Collapsed") }
        }));
      }
      return node;
    };
    return ExpandCellRenderer2;
  }(IndentCellRenderer)
);
var __extends$e = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var HeaderIndentCellRenderer = (
  /** @class */
  function(_super) {
    __extends$e(HeaderIndentCellRenderer2, _super);
    function HeaderIndentCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TH", { className: "e-grouptopleftcell" });
      return _this;
    }
    HeaderIndentCellRenderer2.prototype.render = function(cell, data) {
      var node = this.element.cloneNode();
      node.appendChild(this.parent.createElement("div", { className: "e-headercelldiv e-emptycell", innerHTML: "" }));
      return node;
    };
    return HeaderIndentCellRenderer2;
  }(CellRenderer)
);
var __extends$d = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var DetailHeaderIndentCellRenderer = (
  /** @class */
  function(_super) {
    __extends$d(DetailHeaderIndentCellRenderer2, _super);
    function DetailHeaderIndentCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TH", { className: "e-detailheadercell" });
      return _this;
    }
    DetailHeaderIndentCellRenderer2.prototype.render = function(cell, data) {
      var node = this.element.cloneNode();
      node.appendChild(this.parent.createElement("div", { className: "e-emptycell" }));
      return node;
    };
    return DetailHeaderIndentCellRenderer2;
  }(CellRenderer)
);
var __extends$c = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var DetailExpandCellRenderer = (
  /** @class */
  function(_super) {
    __extends$c(DetailExpandCellRenderer2, _super);
    function DetailExpandCellRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TD", {
        className: "e-detailrowcollapse",
        attrs: { "aria-expanded": "false", tabindex: "-1" }
      });
      return _this;
    }
    DetailExpandCellRenderer2.prototype.render = function(cell, data, attributes2) {
      var node = this.element.cloneNode();
      if (attributes2 && !isNullOrUndefined(attributes2["class"])) {
        node.className = "";
        node.className = attributes2["class"];
        node.appendChild(this.parent.createElement("a", { className: "e-icons e-dtdiagonaldown e-icon-gdownarrow", attrs: {
          href: "#",
          "title": this.localizer.getConstant("Expanded")
        } }));
      } else {
        node.appendChild(this.parent.createElement("a", { className: "e-icons e-dtdiagonalright e-icon-grightarrow", attrs: {
          href: "#",
          "title": this.localizer.getConstant("Collapsed")
        } }));
      }
      if (cell.isSelected) {
        node.classList.add("e-selectionbackground", "e-active");
      }
      return node;
    };
    return DetailExpandCellRenderer2;
  }(CellRenderer)
);
var __extends$b = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var RowDragDropRenderer = (
  /** @class */
  function(_super) {
    __extends$b(RowDragDropRenderer2, _super);
    function RowDragDropRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TD", {
        className: "e-rowdragdrop e-rowdragdropcell",
        attrs: { tabindex: "-1", role: "gridcell" }
      });
      return _this;
    }
    RowDragDropRenderer2.prototype.render = function(cell, data) {
      var nodeElement = this.element.cloneNode();
      nodeElement.appendChild(this.parent.createElement("div", {
        className: "e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",
        attrs: { "aria-hidden": "true" }
      }));
      if (cell.isSelected) {
        nodeElement.classList.add("e-selectionbackground");
        nodeElement.classList.add("e-active");
      }
      if (this.parent.getVisibleFrozenRightCount() || this.parent.getVisibleFrozenLeftCount()) {
        nodeElement.classList.add("e-leftfreeze");
        var width = this.parent.getFrozenMode() === "Right" ? 0 : this.parent.groupSettings.columns.length * 30;
        applyStickyLeftRightPosition(nodeElement, width, this.parent.enableRtl, this.parent.getFrozenMode() === "Right" ? "Right" : "Left");
      }
      return nodeElement;
    };
    return RowDragDropRenderer2;
  }(CellRenderer)
);
var __extends$a = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var RowDragDropHeaderRenderer = (
  /** @class */
  function(_super) {
    __extends$a(RowDragDropHeaderRenderer2, _super);
    function RowDragDropHeaderRenderer2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.element = _this.parent.createElement("TH", { className: "e-rowdragheader" });
      return _this;
    }
    RowDragDropHeaderRenderer2.prototype.render = function(cell, data) {
      var node = this.element.cloneNode();
      node.appendChild(createElement("div", { className: "e-emptycell" }));
      if (this.parent.getVisibleFrozenRightCount() || this.parent.getVisibleFrozenLeftCount()) {
        node.classList.add("e-leftfreeze");
        var width = this.parent.getFrozenMode() === "Right" ? 0 : this.parent.groupSettings.columns.length * 30;
        applyStickyLeftRightPosition(node, width, this.parent.enableRtl, this.parent.getFrozenMode() === "Right" ? "Right" : "Left");
      }
      return node;
    };
    return RowDragDropHeaderRenderer2;
  }(CellRenderer)
);
var Render = (
  /** @class */
  function() {
    function Render2(parent, locator) {
      this.emptyGrid = false;
      this.counter = 0;
      this.parent = parent;
      this.locator = locator;
      this.data = new Data(parent, locator);
      this.l10n = locator.getService("localization");
      this.ariaService = this.locator.getService("ariaService");
      this.renderer = this.locator.getService("rendererFactory");
      this.addEventListener();
    }
    Render2.prototype.render = function() {
      var gObj = this.parent;
      this.headerRenderer = this.renderer.getRenderer(RenderType.Header);
      this.contentRenderer = this.renderer.getRenderer(RenderType.Content);
      this.headerRenderer.renderPanel();
      this.contentRenderer.renderPanel();
      if (gObj.getColumns().length) {
        this.isLayoutRendered = true;
        this.headerRenderer.renderTable();
        this.contentRenderer.renderTable();
        this.emptyRow(false);
      }
      this.parent.scrollModule.setWidth();
      this.parent.scrollModule.setHeight();
      if (this.parent.height !== "auto") {
        this.parent.scrollModule.setPadding();
      }
      this.refreshDataManager();
    };
    Render2.prototype.refresh = function(e) {
      var _this = this;
      if (e === void 0) {
        e = { requestType: "refresh" };
      }
      var gObj = this.parent;
      gObj.notify(e.requestType + "-begin", e);
      gObj.trigger(actionBegin, e, function(args) {
        if (args === void 0) {
          args = { requestType: "refresh" };
        }
        if (args.cancel) {
          gObj.notify(cancelBegin, args);
          if (args.action === "clearFilter" && _this.parent.filterSettings.type === "Menu") {
            _this.parent.filterSettings.columns[_this.parent.filterModule.filterObjIndex] = _this.parent.filterModule.prevFilterObject;
            var iconClass = _this.parent.showColumnMenu && _this.parent.filterModule["column"].showColumnMenu ? ".e-columnmenu" : ".e-icon-filter";
            var col = _this.parent.element.querySelector('[e-mappinguid="' + _this.parent.filterModule["column"].uid + '"]').parentElement;
            var flIcon = col.querySelector(iconClass);
            if (!isNullOrUndefined(_this.parent.filterModule.prevFilterObject)) {
              flIcon.classList.add("e-filtered");
            }
          }
          if (args.action === "clear-filter" && (_this.parent.filterSettings.type === "CheckBox" || _this.parent.filterSettings.type === "Excel")) {
            _this.parent.filterSettings.columns = _this.parent.filterModule.checkboxPrevFilterObject;
          }
          if (args.requestType === "grouping") {
            var index = gObj.groupSettings.columns.indexOf(args.columnName);
            if (index !== -1) {
              gObj.setProperties({ groupSettings: { Columns: gObj.groupSettings.columns.splice(index, 1) } }, true);
              gObj.setProperties({ sortSettings: { Columns: gObj.sortSettings.columns.splice(index, 1) } }, true);
              var column = gObj.getColumnByField(args.columnName);
              var headerCell = gObj.getColumnHeaderByField(column.field);
              column.visible = !isNullOrUndefined(headerCell) && !headerCell.classList.contains("e-hide");
            }
          }
          return;
        }
        _this.parent.notify(destroyEditForm, args);
        if (args.requestType === "virtualscroll" && (_this.parent.getDataModule().isRemote() || "result" in _this.parent.dataSource) && args.virtualInfo && args.virtualInfo.direction === "down") {
          _this.parent.contentModule.prevInfo = args.virtualInfo;
        }
        if (_this.parent.groupModule && args.preventFocusOnGroup) {
          _this.parent.groupModule.preventFocusOnGroup = args.preventFocusOnGroup;
        }
        if (gObj.allowSelection && (args.action === "clearFilter" || args.action === "clear-filter" || args.requestType === "searching" && args.searchString === "" || args.action === "add")) {
          gObj.selectionModule["rmtHdrChkbxClicked"] = false;
          if (gObj.selectionModule.isPartialSelection) {
            gObj.selectionModule["isHdrSelectAllClicked"] = false;
          }
        }
        if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && (args.action === "add" && args.requestType === "save") && gObj.pagerModule.pagerObj.checkAll) {
          gObj.setProperties({ pageSettings: { pageSize: gObj.pageSettings.pageSize + 1 } }, true);
        }
        if (args.requestType === "delete" && gObj.allowPaging) {
          var dataLength = args.data.length;
          var count = gObj.pageSettings.totalRecordsCount - dataLength;
          var currentViewData = gObj.getCurrentViewRecords().length;
          if (!(currentViewData - dataLength) && count && (gObj.pageSettings.currentPage - 1) * gObj.pageSettings.pageSize === count || count && count <= dataLength) {
            gObj.prevPageMoving = true;
            gObj.setProperties({
              pageSettings: {
                totalRecordsCount: count,
                currentPage: Math.ceil(count / gObj.pageSettings.pageSize)
              }
            }, true);
            gObj.pagerModule.pagerObj.totalRecordsCount = count;
          }
        }
        if (args.requestType === "reorder" && _this.parent.dataSource && "result" in _this.parent.dataSource) {
          _this.contentRenderer.refreshContentRows(args);
        } else if ((args.requestType === "paging" || args.requestType === "columnstate" || args.requestType === "reorder") && _this.parent.groupSettings.enableLazyLoading && _this.parent.groupSettings.columns.length && (_this.parent.enableVirtualization ? _this.parent.lazyLoadRender : _this.parent.contentModule).getGroupCache()[_this.parent.pageSettings.currentPage]) {
          _this.contentRenderer.refreshContentRows(args);
        } else {
          _this.refreshDataManager(args);
        }
      });
    };
    Render2.prototype.resetTemplates = function() {
      var gObj = this.parent;
      var gridColumns = gObj.getColumns();
      if (gObj.detailTemplate) {
        var detailTemplateID = gObj.element.id + "detailTemplate";
        blazorTemplates["" + detailTemplateID] = [];
        resetBlazorTemplate(detailTemplateID);
      }
      if (gObj.groupSettings.captionTemplate) {
        resetBlazorTemplate(gObj.element.id + "captionTemplate");
      }
      if (gObj.rowTemplate) {
        resetBlazorTemplate(gObj.element.id + "rowTemplate");
      }
      if (gObj.toolbarTemplate) {
        resetBlazorTemplate(gObj.element.id + "toolbarTemplate");
      }
      if (gObj.pageSettings.template) {
        resetBlazorTemplate(gObj.element.id + "_template");
      }
      for (var i = 0; i < gridColumns.length; i++) {
        if (gridColumns[parseInt(i.toString(), 10)].template) {
          blazorTemplates[gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid] = [];
          resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid);
        }
        if (gridColumns[parseInt(i.toString(), 10)].headerTemplate) {
          resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + "headerTemplate");
        }
        if (gridColumns[parseInt(i.toString(), 10)].filterTemplate) {
          resetBlazorTemplate(gObj.element.id + gridColumns[parseInt(i.toString(), 10)].uid + "filterTemplate");
        }
      }
      var guid = "guid";
      for (var k = 0; k < gObj.aggregates.length; k++) {
        for (var j = 0; j < gObj.aggregates[parseInt(k.toString(), 10)].columns.length; j++) {
          if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].footerTemplate) {
            var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)]["" + guid] + "footerTemplate";
            resetBlazorTemplate(tempID);
          }
          if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupFooterTemplate) {
            var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)]["" + guid] + "groupFooterTemplate";
            resetBlazorTemplate(tempID);
          }
          if (gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)].groupCaptionTemplate) {
            var tempID = gObj.element.id + gObj.aggregates[parseInt(k.toString(), 10)].columns[parseInt(j.toString(), 10)]["" + guid] + "groupCaptionTemplate";
            resetBlazorTemplate(tempID);
          }
        }
      }
    };
    Render2.prototype.refreshComplete = function(e) {
      this.parent.trigger(actionComplete, e);
    };
    Render2.prototype.refreshDataManager = function(args) {
      var _this = this;
      if (args === void 0) {
        args = {};
      }
      var gObj = this.parent;
      var maskRow = gObj.loadingIndicator.indicatorType === "Shimmer" && args.requestType !== "virtualscroll" && args.requestType !== "infiniteScroll" || (args.requestType === "virtualscroll" || args.requestType === "infiniteScroll") && gObj.enableVirtualMaskRow;
      if (args.requestType !== "virtualscroll" && !args.isCaptionCollapse && !maskRow) {
        this.parent.showSpinner();
      }
      if (maskRow) {
        gObj.showMaskRow(args.requestType === "virtualscroll" ? args.virtualInfo.sentinelInfo.axis : args.requestType === "infiniteScroll" ? args.direction : void 0);
      }
      this.parent.notify(resetInfiniteBlocks, args);
      this.emptyGrid = false;
      var dataManager;
      var isFActon = this.isNeedForeignAction();
      this.ariaService.setBusy(this.parent.getContent().querySelector("." + content), true);
      if (isFActon) {
        var deffered = new Deferred();
        dataManager = this.getFData(deffered, args);
      }
      if (!dataManager) {
        if (gObj.allowPaging && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pageSettings && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && gObj.pagerModule.pagerObj.isAllPage) {
          gObj.pagerModule.pagerObj.isAllPage = void 0;
        }
        dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());
      } else {
        dataManager = dataManager.then(function(e) {
          var query = _this.data.generateQuery().requiresCount();
          if (_this.emptyGrid) {
            var def = new Deferred();
            def.resolve({ result: [], count: 0 });
            return def.promise;
          }
          return _this.data.getData(args, query);
        });
      }
      var foreignKeyColumns = this.parent.getForeignKeyColumns();
      var foreignKeyLength = foreignKeyColumns.length;
      if (this.parent.columnQueryMode === "ExcludeHidden" && foreignKeyLength) {
        foreignKeyLength = foreignKeyColumns.filter(function(col) {
          return col.visible !== false;
        }).length;
      }
      if (foreignKeyLength && (!isFActon || this.parent.searchSettings.key.length)) {
        var deffered_1 = new Deferred();
        dataManager = dataManager.then(function(e) {
          _this.parent.notify(getForeignKeyData, { dataManager, result: e, promise: deffered_1, action: args });
          return deffered_1.promise;
        });
      }
      if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {
        dataManager = dataManager.then(function(e) {
          return _this.validateGroupRecords(e);
        });
      }
      dataManager.then(function(e) {
        return _this.dataManagerSuccess(e, args);
      }).catch(function(e) {
        return _this.dataManagerFailure(e, args);
      });
    };
    Render2.prototype.getFData = function(deferred, args) {
      this.parent.notify(getForeignKeyData, { isComplex: true, promise: deferred, action: args });
      return deferred.promise;
    };
    Render2.prototype.isNeedForeignAction = function() {
      var gObj = this.parent;
      return !!(gObj.allowFiltering && gObj.filterSettings.columns.length || !isNullOrUndefined(gObj.searchSettings.key) && gObj.searchSettings.key.length) && this.foreignKey(this.parent.getForeignKeyColumns());
    };
    Render2.prototype.foreignKey = function(columns) {
      var _this = this;
      return columns.some(function(col) {
        var fbool = false;
        fbool = _this.parent.filterSettings.columns.some(function(value) {
          return col.uid === value.uid;
        });
        return !!(fbool || _this.parent.searchSettings.key.length);
      });
    };
    Render2.prototype.sendBulkRequest = function(args) {
      var _this = this;
      args.requestType = "batchsave";
      var gObj = this.parent;
      if (gObj.allowPaging && gObj.pageSettings.pageSizes && gObj.pagerModule.pagerObj.isAllPage && gObj.pagerModule.pagerObj.checkAll) {
        var dataLength = args["changes"].addedRecords.length;
        if (dataLength) {
          gObj.setProperties({ pageSettings: { pageSize: gObj.pageSettings.pageSize + dataLength } }, true);
        }
      }
      if (gObj.allowPaging && (args.changes.addedRecords.length || args.changes.deletedRecords.length || args.changes.changedRecords.length) && gObj.pageSettings && gObj.pageSettings.pageSizes && gObj.pagerModule && gObj.pagerModule.pagerObj && !gObj.getDataModule().dataManager.dataSource.offline && gObj.pagerModule.pagerObj.isAllPage) {
        gObj.pagerModule.pagerObj.isAllPage = void 0;
      }
      var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);
      var query = this.data.generateQuery().requiresCount();
      if (this.data.dataManager.dataSource.offline) {
        this.refreshDataManager({ requestType: "batchsave" });
        return;
      } else {
        promise.then(function(e) {
          _this.data.getData(args, query).then(function(e2) {
            return _this.dmSuccess(e2, args);
          }).catch(function(e2) {
            return _this.dmFailure(e2, args);
          });
        }).catch(function(e) {
          return _this.dmFailure(e, args);
        });
      }
    };
    Render2.prototype.dmSuccess = function(e, args) {
      this.dataManagerSuccess(e, args);
    };
    Render2.prototype.dmFailure = function(e, args) {
      this.dataManagerFailure(e, args);
    };
    Render2.prototype.renderEmptyRow = function() {
      this.emptyRow(true);
    };
    Render2.prototype.emptyRow = function(isTrigger) {
      var gObj = this.parent;
      var tbody$1 = this.contentRenderer.getTable().querySelector(tbody);
      if (!isNullOrUndefined(tbody$1)) {
        remove(tbody$1);
      }
      tbody$1 = this.parent.createElement(tbody, { attrs: { role: "rowgroup" } });
      var spanCount = gObj.allowRowDragAndDrop && isNullOrUndefined(gObj.rowDropSettings.targetID) ? 1 : 0;
      if (gObj.detailTemplate || gObj.childGrid) {
        ++spanCount;
      }
      var className = gObj.editSettings.showAddNewRow && gObj.editSettings.newRowPosition === "Bottom" ? "e-emptyrow e-show-added-row" : "e-emptyrow";
      var tr = this.parent.createElement("tr", { className, attrs: { role: "row" } });
      var td;
      if (gObj.emptyRecordTemplate) {
        var emptyRecordTemplateID = gObj.element.id + "emptyRecordTemplate";
        td = this.parent.createElement("td", { attrs: { colspan: (gObj.getVisibleColumns().length + spanCount + gObj.groupSettings.columns.length).toString() } });
        if (gObj.isVue || gObj.parentDetails && gObj.parentDetails.parentInstObj && gObj.parentDetails.parentInstObj.isVue) {
          td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, "emptyRecordTemplate", emptyRecordTemplateID, void 0, void 0, void 0, this.parent["root"])[1]);
        } else {
          td.appendChild(gObj.getEmptyRecordTemplate()(gObj.dataSource, gObj, "emptyRecordTemplate", emptyRecordTemplateID, void 0, void 0, void 0, this.parent["root"])[0]);
        }
        if (gObj.isReact) {
          this.parent.renderTemplates();
        }
      } else {
        td = this.parent.createElement("td", {
          innerHTML: this.l10n.getConstant("EmptyRecord"),
          attrs: { colspan: (gObj.getVisibleColumns().length + spanCount + (!isNullOrUndefined(gObj.groupSettings.columns) ? gObj.groupSettings.columns.length : 0)).toString() }
        });
      }
      if (gObj.isFrozenGrid()) {
        td.classList.add("e-leftfreeze");
        td.style.left = "0px";
      }
      if (gObj.frozenRows && gObj.element.querySelector(".e-frozenrow-border")) {
        this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty");
      }
      tr.appendChild(td);
      tbody$1.appendChild(tr);
      this.contentRenderer.renderEmpty(tbody$1);
      if (isTrigger) {
        if (!this.parent.isInitialLoad) {
          this.parent.focusModule.setFirstFocusableTabIndex();
        }
        this.parent.trigger(dataBound, {});
        this.parent.notify(onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });
        if (gObj.editSettings.showAddNewRow) {
          gObj.addRecord();
          this.parent.notify(showAddNewRowFocus, {});
        }
      }
    };
    Render2.prototype.dynamicColumnChange = function() {
      if (this.parent.getCurrentViewRecords().length) {
        this.updateColumnType(this.parent.getCurrentViewRecords()[0]);
      }
    };
    Render2.prototype.updateColumnType = function(record) {
      var columns = this.parent.getColumns();
      var value;
      var cFormat = "customFormat";
      var equalTo = "equalTo";
      var data = record && record.items ? record.items[0] : record;
      var fmtr = this.locator.getService("valueFormatter");
      for (var i = 0, len = columns.length; i < len; i++) {
        value = getObject(columns[parseInt(i.toString(), 10)].field || "", data);
        if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)]["" + cFormat])) {
          columns[parseInt(i.toString(), 10)].format = columns[parseInt(i.toString(), 10)]["" + cFormat];
        }
        if (!isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules) && !isNullOrUndefined(columns[parseInt(i.toString(), 10)].validationRules["" + equalTo])) {
          columns[parseInt(i.toString(), 10)].validationRules["" + equalTo][0] = this.parent.element.id + columns[parseInt(i.toString(), 10)].validationRules["" + equalTo][0];
        }
        if (columns[parseInt(i.toString(), 10)].isForeignColumn() && columns[parseInt(i.toString(), 10)].columnData) {
          value = getObject(columns[parseInt(i.toString(), 10)].foreignKeyValue || "", columns[parseInt(i.toString(), 10)].columnData[0]);
        }
        if (!isNullOrUndefined(value)) {
          this.isColTypeDef = true;
          if (!columns[parseInt(i.toString(), 10)].type) {
            columns[parseInt(i.toString(), 10)].type = value.getDay ? value.getHours() > 0 || value.getMinutes() > 0 || value.getSeconds() > 0 || value.getMilliseconds() > 0 ? "datetime" : "date" : typeof value;
          }
        } else {
          columns[parseInt(i.toString(), 10)].type = columns[parseInt(i.toString(), 10)].type || null;
        }
        var valueFormatter = new ValueFormatter();
        if (columns[parseInt(i.toString(), 10)].format && (columns[parseInt(i.toString(), 10)].format.skeleton || columns[parseInt(i.toString(), 10)].format.format && typeof columns[parseInt(i.toString(), 10)].format.format === "string")) {
          columns[parseInt(i.toString(), 10)].setFormatter(valueFormatter.getFormatFunction(extend$1({}, columns[parseInt(i.toString(), 10)].format)));
          columns[parseInt(i.toString(), 10)].setParser(valueFormatter.getParserFunction(columns[parseInt(i.toString(), 10)].format));
        }
        if (typeof columns[parseInt(i.toString(), 10)].format === "string") {
          setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);
        } else if (!columns[parseInt(i.toString(), 10)].format && columns[parseInt(i.toString(), 10)].type === "number") {
          columns[parseInt(i.toString(), 10)].setParser(fmtr.getParserFunction({ format: "n2" }));
        }
        if (columns[parseInt(i.toString(), 10)].type === "dateonly" && !columns[parseInt(i.toString(), 10)].format) {
          columns[parseInt(i.toString(), 10)].format = "yMd";
          setFormatter(this.locator, columns[parseInt(i.toString(), 10)]);
        }
      }
    };
    Render2.prototype.dataManagerSuccess = function(e, args) {
      var _this = this;
      var gObj = this.parent;
      this.contentRenderer = this.renderer.getRenderer(RenderType.Content);
      this.headerRenderer = this.renderer.getRenderer(RenderType.Header);
      e.actionArgs = args;
      var detailGrid = gObj.childGrid || gObj.detailTemplate ? true : false;
      var isInfiniteDelete = this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && !gObj.groupSettings.enableLazyLoading && (args.requestType === "delete" && !detailGrid || args.requestType === "save" && this.parent.infiniteScrollModule.requestType === "add" && !(gObj.sortSettings.columns.length || gObj.filterSettings.columns.length || this.parent.groupSettings.columns.length || gObj.searchSettings.key || detailGrid));
      gObj.trigger(beforeDataBound, e, function(dataArgs) {
        if (dataArgs.cancel) {
          return;
        }
        dataArgs.result = isNullOrUndefined(dataArgs.result) ? [] : dataArgs.result;
        var len = Object.keys(dataArgs.result).length;
        if (_this.parent.isDestroyed) {
          return;
        }
        if (!gObj.getColumns().length && !len && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {
          gObj.hideSpinner();
          return;
        }
        if (_this.isInfiniteEnd(args) && !len) {
          _this.parent.notify(infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });
          return;
        }
        _this.parent.isEdit = false;
        _this.parent.notify(editReset, {});
        _this.parent.notify(tooltipDestroy, {});
        if (args && !((args.requestType === "infiniteScroll" || args.requestType === "delete" || args.action === "add") && gObj.enableInfiniteScrolling)) {
          _this.parent.notify(commandColumnDestroy, { type: "refreshCommandColumn" });
        }
        _this.contentRenderer.prevCurrentView = !isNullOrUndefined(_this.parent.currentViewData) && _this.parent.currentViewData.slice();
        gObj.currentViewData = dataArgs.result;
        gObj.notify(refreshInfiniteCurrentViewData, { args, data: dataArgs.result });
        if (dataArgs.count && !gObj.allowPaging && (gObj.enableVirtualization || gObj.enableInfiniteScrolling)) {
          gObj.totalDataRecordsCount = dataArgs.count;
        }
        if (!len && dataArgs.count && gObj.allowPaging && args && args.requestType !== "delete") {
          if (_this.parent.groupSettings.enableLazyLoading && (args.requestType === "grouping" || args.requestType === "ungrouping")) {
            _this.parent.notify(groupComplete, args);
          }
          gObj.prevPageMoving = true;
          gObj.pageSettings.totalRecordsCount = dataArgs.count;
          if (args.requestType !== "paging") {
            gObj.pageSettings.currentPage = Math.ceil(dataArgs.count / gObj.pageSettings.pageSize);
          }
          gObj.dataBind();
          return;
        }
        if ((!gObj.getColumns().length && len || !_this.isLayoutRendered) && !isGroupAdaptive(gObj)) {
          gObj.removeMaskRow();
          _this.updatesOnInitialRender(dataArgs);
        }
        if (!_this.isColTypeDef && gObj.getCurrentViewRecords()) {
          if (_this.data.dataManager.dataSource.offline && gObj.dataSource && gObj.dataSource.length) {
            _this.updateColumnType(gObj.dataSource[0]);
          } else {
            _this.updateColumnType(gObj.getCurrentViewRecords()[0]);
          }
        }
        if (!_this.parent.isInitialLoad && _this.parent.groupSettings.disablePageWiseAggregates && !_this.parent.groupSettings.columns.length) {
          dataArgs.result = _this.parent.dataSource instanceof Array ? _this.parent.dataSource : _this.parent.currentViewData;
        }
        if ((_this.parent.isReact || _this.parent.isVue) && !isNullOrUndefined(args) && args.requestType !== "infiniteScroll" && !args.isFrozen) {
          clearReactVueTemplates(_this.parent, ["footerTemplate"]);
        }
        if (_this.parent.isAngular && _this.parent.allowGrouping && _this.parent.groupSettings.captionTemplate && !(!isNullOrUndefined(args) && args.requestType === "infiniteScroll")) {
          _this.parent.destroyTemplate(["groupSettings_captionTemplate"]);
        }
        _this.parent.notify(dataReady, extend$1({ count: dataArgs.count, result: dataArgs.result, aggregates: dataArgs.aggregates, loadSummaryOnEmpty: false }, args));
        if ((gObj.groupSettings.columns.length || args && args.requestType === "ungrouping") && (args && args.requestType !== "filtering")) {
          _this.headerRenderer.refreshUI();
        }
        if (len) {
          if (isGroupAdaptive(gObj)) {
            var content$1 = "content";
            args.scrollTop = { top: _this.contentRenderer["" + content$1].scrollTop };
          }
          if (!isInfiniteDelete) {
            if (_this.parent.enableImmutableMode) {
              _this.contentRenderer.immutableModeRendering(args);
            } else {
              _this.contentRenderer.refreshContentRows(args);
            }
          } else {
            _this.parent.notify(infiniteEditHandler, { e: args, result: e.result, count: e.count, agg: e.aggregates });
          }
        } else {
          if (args && args.isCaptionCollapse) {
            return;
          }
          if (!gObj.getColumns().length) {
            gObj.element.innerHTML = "";
            alert(_this.l10n.getConstant("EmptyDataSourceError"));
            return;
          }
          _this.contentRenderer.setRowElements([]);
          _this.contentRenderer.setRowObjects([]);
          _this.ariaService.setBusy(_this.parent.getContent().querySelector("." + content), false);
          gObj.removeMaskRow();
          _this.renderEmptyRow();
          if (gObj.enableColumnVirtualization && !len) {
            _this.parent.notify(contentReady, { rows: gObj.getRowsObject(), args: {} });
          }
          if (args) {
            var action = (args.requestType || "").toLowerCase() + "-complete";
            _this.parent.notify(action, args);
            if (args.requestType === "batchsave") {
              args.cancel = false;
              args.rows = [];
              args.isFrozen = !args.isFrozen;
              _this.parent.trigger(actionComplete, args);
            }
          }
          if (_this.parent.autoFit) {
            _this.parent.preventAdjustColumns();
          }
          _this.parent.hideSpinner();
        }
        _this.parent.notify(toolbarRefresh, {});
        _this.setRowCount(_this.parent.getCurrentViewRecords().length);
        if ("query" in e) {
          _this.parent.getDataModule().isQueryInvokedFromData = false;
        }
      });
    };
    Render2.prototype.dataManagerFailure = function(e, args) {
      if (!isNullOrUndefined(this.parent.contentModule)) {
        this.ariaService.setOptions(this.parent.getContent().querySelector("." + content), { busy: false, invalid: true });
        this.setRowCount(1);
      }
      this.parent.trigger(actionFailure, e && e.error ? e : { error: e });
      this.parent.hideSpinner();
      this.parent.removeMaskRow();
      if (args.requestType === "save" || args.requestType === "delete" || args.name === "bulk-save") {
        return;
      }
      this.parent.currentViewData = [];
      this.renderEmptyRow();
      if (!this.parent.isInitialLoad) {
        this.parent.focusModule.setFirstFocusableTabIndex();
      }
      this.parent.log("actionfailure", { error: e });
    };
    Render2.prototype.setRowCount = function(dataRowCount) {
      this.ariaService.setOptions(this.parent.element, {
        rowcount: dataRowCount ? dataRowCount.toString() : "1"
      });
    };
    Render2.prototype.isInfiniteEnd = function(args) {
      return this.parent.enableInfiniteScrolling && !this.parent.infiniteScrollSettings.enableCache && args.requestType === "delete";
    };
    Render2.prototype.updatesOnInitialRender = function(e) {
      this.isLayoutRendered = true;
      var isEmptyCol = false;
      if (this.parent.columns.length < 1) {
        this.buildColumns(e.result[0]);
        isEmptyCol = true;
      }
      prepareColumns(this.parent.columns, null, this.parent);
      if (isEmptyCol) {
        this.parent.notify(refreshSplitFrozenColumn, {});
      }
      this.headerRenderer.renderTable();
      this.contentRenderer.renderTable();
      this.parent.isAutoGen = true;
      this.parent.notify(autoCol, {});
    };
    Render2.prototype.iterateComplexColumns = function(obj, field, split) {
      var keys2 = Object.keys(obj);
      for (var i = 0; i < keys2.length; i++) {
        var childKeys = typeof obj[keys2[parseInt(i.toString(), 10)]] === "object" && obj[keys2[parseInt(i.toString(), 10)]] && !(obj[keys2[parseInt(i.toString(), 10)]] instanceof Date) ? Object.keys(obj[keys2[parseInt(i.toString(), 10)]]) : [];
        if (childKeys.length) {
          this.iterateComplexColumns(obj[keys2[parseInt(i.toString(), 10)]], field + (keys2[parseInt(i.toString(), 10)] + "."), split);
        } else {
          split[this.counter] = field + keys2[parseInt(i.toString(), 10)];
          this.counter++;
        }
      }
    };
    Render2.prototype.buildColumns = function(record) {
      var cols = [];
      var complexCols = {};
      this.iterateComplexColumns(record, "", complexCols);
      var columns = Object.keys(complexCols).filter(function(e) {
        return complexCols["" + e] !== "BlazId";
      }).map(function(field) {
        return complexCols["" + field];
      });
      for (var i = 0, len = columns.length; i < len; i++) {
        cols[parseInt(i.toString(), 10)] = { "field": columns[parseInt(i.toString(), 10)] };
        if (this.parent.enableColumnVirtualization) {
          cols[parseInt(i.toString(), 10)].width = !isNullOrUndefined(cols[parseInt(i.toString(), 10)].width) ? cols[parseInt(i.toString(), 10)].width : 200;
        }
      }
      this.parent.setProperties({ "columns": cols }, true);
    };
    Render2.prototype.instantiateRenderer = function() {
      this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));
      this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));
      var cellrender = this.locator.getService("cellRendererFactory");
      cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.RowDragHIcon, new RowDragDropHeaderRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.DetailFooterIntent, new IndentCellRenderer(this.parent, this.locator));
      cellrender.addCellRenderer(CellType.RowDragIcon, new RowDragDropRenderer(this.parent, this.locator));
    };
    Render2.prototype.addEventListener = function() {
      var _this = this;
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.on(initialLoad, this.instantiateRenderer, this);
      this.parent.on("refreshdataSource", this.dataManagerSuccess, this);
      this.parent.on(modelChanged, this.refresh, this);
      this.parent.on(refreshComplete, this.refreshComplete, this);
      this.parent.on(bulkSave, this.sendBulkRequest, this);
      this.parent.on(showEmptyGrid, function() {
        _this.emptyGrid = true;
      }, this);
      this.parent.on(autoCol, this.dynamicColumnChange, this);
    };
    Render2.prototype.validateGroupRecords = function(e) {
      var _this = this;
      var index = e.result.length - 1;
      if (index < 0) {
        return Promise.resolve(e);
      }
      var group0 = e.result[0];
      var groupN = e.result[parseInt(index.toString(), 10)];
      var predicate = [];
      var addWhere = function(input) {
        var groups2 = [group0, groupN];
        for (var i2 = 0; i2 < groups2.length; i2++) {
          predicate.push(new Predicate$1("field", "==", groups2[parseInt(i2.toString(), 10)].field).and(_this.getPredicate("key", "equal", groups2[parseInt(i2.toString(), 10)].key)));
        }
        input.where(Predicate$1.or(predicate));
      };
      var query = new Query();
      addWhere(query);
      var curDm = new DataManager(e.result);
      var curFilter = curDm.executeLocal(query);
      var newQuery = this.data.generateQuery(true);
      var rPredicate = [];
      if (this.data.isRemote()) {
        var groups = [group0, groupN];
        for (var i = 0; i < groups.length; i++) {
          rPredicate.push(this.getPredicate(groups[parseInt(i.toString(), 10)].field, "equal", groups[parseInt(i.toString(), 10)].key));
        }
        newQuery.where(Predicate$1.or(rPredicate));
      } else {
        addWhere(newQuery);
      }
      var deferred = new Deferred();
      this.data.getData({}, newQuery).then(function(r) {
        _this.updateGroupInfo(curFilter, r.result);
        deferred.resolve(e);
      }).catch(function(e2) {
        return deferred.reject(e2);
      });
      return deferred.promise;
    };
    Render2.prototype.getPredicate = function(key, operator, value) {
      if (value instanceof Date) {
        return getDatePredicate({ field: key, operator, value });
      }
      return new Predicate$1(key, operator, value);
    };
    Render2.prototype.updateGroupInfo = function(current, untouched) {
      var dm = new DataManager(untouched);
      var elements = current;
      for (var i = 0; i < elements.length; i++) {
        var updatedGroup = dm.executeLocal(new Query().where(new Predicate$1("field", "==", elements[parseInt(i.toString(), 10)].field).and(this.getPredicate("key", "equal", elements[parseInt(i.toString(), 10)].key))))[0];
        if (!isNullOrUndefined(updatedGroup)) {
          elements[parseInt(i.toString(), 10)].count = updatedGroup.count;
          var itemGroup = elements[parseInt(i.toString(), 10)].items;
          var updatedGroupItem = updatedGroup.items;
          if (itemGroup.GroupGuid) {
            elements[parseInt(i.toString(), 10)].items = this.updateGroupInfo(elements[parseInt(i.toString(), 10)].items, updatedGroup.items);
          }
          var rows = this.parent.aggregates;
          for (var j = 0; j < rows.length; j++) {
            var row2 = rows[parseInt(j.toString(), 10)];
            for (var k = 0; k < row2.columns.length; k++) {
              var column = row2.columns[parseInt(k.toString(), 10)];
              var types = column.type instanceof Array ? column.type : [column.type];
              for (var l = 0; l < types.length; l++) {
                var key = column.field + " - " + types[parseInt(l.toString(), 10)].toLowerCase();
                var data = itemGroup.level ? updatedGroupItem.records : updatedGroup.items;
                var context = this.parent;
                if (types[parseInt(l.toString(), 10)] === "Custom") {
                  var data_1 = itemGroup.level ? updatedGroupItem : updatedGroup;
                  var temp = column.customAggregate;
                  if (typeof temp === "string") {
                    temp = getValue(temp, window);
                  }
                  elements[parseInt(i.toString(), 10)].aggregates["" + key] = temp ? temp.call(context, data_1, row2.columns[parseInt(k.toString(), 10)]) : "";
                } else {
                  elements[parseInt(i.toString(), 10)].aggregates["" + key] = DataUtil.aggregates[types[parseInt(l.toString(), 10)].toLowerCase()](data, row2.columns[parseInt(k.toString(), 10)].field);
                }
              }
            }
          }
        }
      }
      return current;
    };
    return Render2;
  }()
);
var CellRendererFactory = (
  /** @class */
  function() {
    function CellRendererFactory2() {
      this.cellRenderMap = {};
    }
    CellRendererFactory2.prototype.addCellRenderer = function(name, type) {
      name = typeof name === "string" ? name : getEnumValue(CellType, name);
      if (isNullOrUndefined(this.cellRenderMap["" + name])) {
        this.cellRenderMap["" + name] = type;
      }
    };
    CellRendererFactory2.prototype.getCellRenderer = function(name) {
      name = typeof name === "string" ? name : getEnumValue(CellType, name);
      if (isNullOrUndefined(this.cellRenderMap["" + name])) {
        throw "The cellRenderer " + name + " is not found";
      } else {
        return this.cellRenderMap["" + name];
      }
    };
    return CellRendererFactory2;
  }()
);
var ResponsiveDialogRenderer = (
  /** @class */
  function() {
    function ResponsiveDialogRenderer2(parent, serviceLocator) {
      this.sortedCols = [];
      this.sortPredicate = [];
      this.isCustomDialog = false;
      this.parent = parent;
      this.serviceLocator = serviceLocator;
      this.addEventListener();
    }
    ResponsiveDialogRenderer2.prototype.addEventListener = function() {
      this.evtHandlers = [
        { event: filterDialogClose, handler: this.closeCustomDialog },
        { event: refreshCustomFilterOkBtn, handler: this.refreshCustomFilterOkBtn },
        { event: renderResponsiveCmenu, handler: this.renderResponsiveContextMenu },
        { event: filterCmenuSelect, handler: this.renderCustomFilterDiv },
        { event: customFilterClose, handler: this.customExFilterClose },
        { event: refreshCustomFilterClearBtn, handler: this.refreshCustomFilterClearBtn }
      ];
      addRemoveEventListener(this.parent, this.evtHandlers, true, this);
      this.onActionCompleteFn = this.editComplate.bind(this);
      this.parent.addEventListener(actionComplete, this.onActionCompleteFn);
    };
    ResponsiveDialogRenderer2.prototype.customExFilterClose = function() {
      this.isCustomDlgRender = false;
    };
    ResponsiveDialogRenderer2.prototype.renderCustomFilterDiv = function() {
      var header = this.customResponsiveDlg.element.querySelector(".e-dlg-header-content");
      var title = header.querySelector(".e-dlg-custom-header");
      var closeBtn = header.querySelector(".e-dlg-closeicon-btn");
      this.isCustomDlgRender = true;
      this.parent.filterModule.filterModule.closeDialog();
      this.saveBtn.element.style.display = "";
      this.refreshCustomFilterOkBtn({ disabled: false });
      this.backBtn.element.style.display = "none";
      closeBtn.style.display = "";
      title.innerHTML = this.parent.localeObj.getConstant("CustomFilter");
      var content2 = this.customResponsiveDlg.element.querySelector(".e-dlg-content");
      this.customExcelFilterParent = this.parent.createElement("div", { className: "e-xl-customfilterdiv e-default-filter" });
      content2.appendChild(this.customExcelFilterParent);
    };
    ResponsiveDialogRenderer2.prototype.renderResponsiveContextMenu = function(args) {
      if (this.action === ResponsiveDialogAction.isFilter) {
        var content2 = this.customResponsiveDlg.element.querySelector(".e-dlg-content");
        var header = this.customResponsiveDlg.element.querySelector(".e-dlg-header-content");
        var closeBtn = header.querySelector(".e-dlg-closeicon-btn");
        var text = header.querySelector(".e-dlg-custom-header");
        if (args.isOpen) {
          content2.firstChild.style.display = "none";
          content2.appendChild(args.target);
          closeBtn.style.display = "none";
          this.saveBtn.element.style.display = "none";
          this.filterClearBtn.element.style.display = "none";
          text.innerHTML = args.header;
          var backBtn = this.parent.createElement("button");
          var span = this.parent.createElement("span", { className: "e-btn-icon e-resfilterback e-icons" });
          backBtn.appendChild(span);
          this.backBtn = new Button({
            cssClass: this.parent.cssClass ? "e-res-back-btn " + this.parent.cssClass : "e-res-back-btn"
          });
          this.backBtn.appendTo(backBtn);
          text.parentElement.insertBefore(backBtn, text);
        } else if (this.backBtn && !this.isCustomDlgRender) {
          content2.firstChild.style.display = "";
          remove(this.backBtn.element);
          closeBtn.style.display = "";
          this.saveBtn.element.style.display = "";
          if (this.isFiltered) {
            this.filterClearBtn.element.style.display = "";
          }
          text.innerHTML = this.getHeaderTitle({ action: ResponsiveDialogAction.isFilter }, args.col);
        }
      }
    };
    ResponsiveDialogRenderer2.prototype.refreshCustomFilterClearBtn = function(args) {
      if (this.filterClearBtn) {
        this.isFiltered = args.isFiltered;
        this.filterClearBtn.element.style.display = args.isFiltered ? "" : "none";
      }
    };
    ResponsiveDialogRenderer2.prototype.refreshCustomFilterOkBtn = function(args) {
      if (this.saveBtn) {
        this.saveBtn.disabled = args.disabled;
      }
      if (this.parent.columnChooserModule && this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn) {
        this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled = args.disabled;
      }
    };
    ResponsiveDialogRenderer2.prototype.columnMenuResponsiveContent = function(str, locale, disabled) {
      var cDiv = this.parent.createElement("div", { className: "e-responsivecoldiv e-responsive" + str.toLowerCase() + "div" + (disabled ? " e-disabled" : "") });
      var span = this.parent.createElement("span", { className: "e-icons e-res" + str.toLowerCase() + "-icon e-btn-icon" });
      var icon = this.parent.createElement("span", { innerHTML: locale, className: "e-rescolumn-menu e-res-header-text" });
      cDiv.appendChild(span);
      cDiv.appendChild(icon);
      this.customColumnDiv.appendChild(cDiv);
    };
    ResponsiveDialogRenderer2.prototype.renderResponsiveContent = function(col, column) {
      var _this = this;
      var gObj = this.parent;
      var isColumnChooser = this.action === ResponsiveDialogAction.isColumnChooser;
      if (col || isColumnChooser) {
        this.filterParent = this.parent.createElement("div", {
          className: (isColumnChooser ? "e-maincolumnchooserdiv " : "") + "e-mainfilterdiv e-default-filter",
          id: (isColumnChooser ? "columchooser" : col.uid) + "-main-filter"
        });
        return this.filterParent;
      } else {
        this.customColumnDiv = gObj.createElement("div", { className: "columndiv columnmenudiv" });
        this.customColumnDiv.style.width = "100%";
        if (this.parent.showColumnMenu && this.parent.rowRenderingMode === "Horizontal" && this.action === ResponsiveDialogAction.isColMenu) {
          this.columnMenuResponsiveContent("AutoFitAll", gObj.localeObj.getConstant("AutoFitAll"));
          this.columnMenuResponsiveContent("AutoFit", gObj.localeObj.getConstant("AutoFit"));
          if (column.allowGrouping && gObj.allowGrouping) {
            this.columnMenuResponsiveContent("Group", gObj.localeObj.getConstant("Group"), gObj.groupSettings.columns.indexOf(column.field) >= 0);
            this.columnMenuResponsiveContent("UnGroup", gObj.localeObj.getConstant("Ungroup"), gObj.groupSettings.columns.indexOf(column.field) < 0);
          }
          if (column.allowSorting && gObj.allowSorting) {
            var direction = "None";
            var sortColumns = this.parent.sortSettings.columns;
            for (var i = 0; i < sortColumns.length; i++) {
              if (sortColumns[parseInt(i.toString(), 10)].field === column.field) {
                direction = sortColumns[parseInt(i.toString(), 10)].direction;
                break;
              }
            }
            this.columnMenuResponsiveContent("ascending", gObj.localeObj.getConstant("SortAscending"), direction === "Ascending");
            this.columnMenuResponsiveContent("descending", gObj.localeObj.getConstant("SortDescending"), direction === "Descending");
          }
          if (gObj.showColumnChooser) {
            this.columnMenuResponsiveContent("Column", gObj.localeObj.getConstant("Columnchooser"));
          }
          if (column.allowFiltering && gObj.allowFiltering) {
            this.columnMenuResponsiveContent("Filter", gObj.localeObj.getConstant("FilterMenu"));
          }
        } else {
          var cols = gObj.getColumns();
          var sortBtnParent = gObj.createElement("div", { className: "e-ressortbutton-parent" });
          var filteredCols = [];
          var isSort = this.action === ResponsiveDialogAction.isSort;
          var isFilter = this.action === ResponsiveDialogAction.isFilter;
          if (isFilter) {
            for (var i = 0; i < gObj.filterSettings.columns.length; i++) {
              filteredCols.push(gObj.filterSettings.columns[parseInt(i.toString(), 10)].field);
            }
          }
          for (var i = 0; i < cols.length; i++) {
            if (!cols[parseInt(i.toString(), 10)].visible || !cols[parseInt(i.toString(), 10)].allowSorting && isSort || !cols[parseInt(i.toString(), 10)].allowFiltering && isFilter) {
              continue;
            }
            var cDiv = gObj.createElement("div", { className: "e-responsivecoldiv" });
            cDiv.setAttribute("data-e-mappingname", cols[parseInt(i.toString(), 10)].field);
            cDiv.setAttribute("data-e-mappinguid", cols[parseInt(i.toString(), 10)].uid);
            var span = gObj.createElement("span", { innerHTML: cols[parseInt(i.toString(), 10)].headerText, className: "e-res-header-text" });
            cDiv.appendChild(span);
            this.customColumnDiv.appendChild(cDiv);
            if (isSort) {
              var fields = this.getSortedFieldsAndDirections("field");
              var index = fields.indexOf(cols[parseInt(i.toString(), 10)].field);
              var button = gObj.createElement("button", { id: gObj.element.id + cols[parseInt(i.toString(), 10)].field + "sortbutton" });
              var clone = sortBtnParent.cloneNode();
              clone.appendChild(button);
              cDiv.appendChild(clone);
              var btnObj = new Button({
                cssClass: this.parent.cssClass ? "e-ressortbutton " + this.parent.cssClass : "e-ressortbutton"
              });
              btnObj.appendTo(button);
              var buttonInnerText = void 0;
              if (!isNullOrUndefined(this.parent.sortSettings.columns[parseInt(index.toString(), 10)])) {
                buttonInnerText = this.parent.sortSettings.columns[parseInt(index.toString(), 10)].direction === "Ascending" ? this.parent.localeObj.getConstant("AscendingText") : this.parent.localeObj.getConstant("DescendingText");
              }
              button.innerHTML = index > -1 ? buttonInnerText : this.parent.localeObj.getConstant("NoneText");
              button.onclick = function(e) {
                _this.sortButtonClickHandler(e.target);
              };
            }
            if (isFilter && filteredCols.indexOf(cols[parseInt(i.toString(), 10)].field) > -1) {
              var divIcon = gObj.createElement("div", { className: "e-icons e-res-icon e-filtersetdiv" });
              var iconSpan = gObj.createElement("span", { className: "e-icons e-res-icon e-filterset" });
              iconSpan.setAttribute("colType", cols[parseInt(i.toString(), 10)].type);
              divIcon.appendChild(iconSpan);
              cDiv.appendChild(divIcon);
            }
          }
        }
        EventHandler.add(this.customColumnDiv, Browser.isDevice ? "touchend" : "click", this.customFilterColumnClickHandler, this);
        return this.customColumnDiv;
      }
    };
    ResponsiveDialogRenderer2.prototype.getSortedFieldsAndDirections = function(name) {
      var fields = [];
      for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {
        fields.push(this.parent.sortSettings.columns[parseInt(i.toString(), 10)]["" + name]);
      }
      return fields;
    };
    ResponsiveDialogRenderer2.prototype.sortButtonClickHandler = function(target) {
      if (target) {
        var columndiv = parentsUntil(target, "e-responsivecoldiv");
        var field = columndiv.getAttribute("data-e-mappingname");
        if (!this.parent.allowMultiSorting) {
          this.sortPredicate = [];
          this.sortedCols = [];
          this.isSortApplied = false;
          this.resetSortButtons(target);
        }
        var txt = target.textContent;
        var directionTxt = txt === this.parent.localeObj.getConstant("NoneText") ? this.parent.localeObj.getConstant("AscendingText") : txt === this.parent.localeObj.getConstant("AscendingText") ? this.parent.localeObj.getConstant("DescendingText") : this.parent.localeObj.getConstant("NoneText");
        var direction = directionTxt === this.parent.localeObj.getConstant("AscendingText") ? "Ascending" : directionTxt === this.parent.localeObj.getConstant("DescendingText") ? "Descending" : "None";
        target.innerHTML = directionTxt;
        this.setSortedCols(field, direction);
      }
    };
    ResponsiveDialogRenderer2.prototype.resetSortButtons = function(target) {
      var buttons = [].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton"));
      for (var i = 0; i < buttons.length; i++) {
        if (buttons[parseInt(i.toString(), 10)] !== target) {
          buttons[parseInt(i.toString(), 10)].innerHTML = this.parent.localeObj.getConstant("NoneText");
        }
      }
    };
    ResponsiveDialogRenderer2.prototype.setSortedCols = function(field, direction) {
      var fields = this.getCurrentSortedFields();
      var index = fields.indexOf(field);
      if (this.parent.allowMultiSorting && index > -1) {
        this.sortedCols.splice(index, 1);
        this.sortPredicate.splice(index, 1);
      }
      this.isSortApplied = true;
      if (direction !== "None") {
        this.sortedCols.push(field);
        this.sortPredicate.push({ field, direction });
      }
    };
    ResponsiveDialogRenderer2.prototype.getCurrentSortedFields = function() {
      var fields = [];
      for (var i = 0; i < this.sortedCols.length; i++) {
        fields.push(this.sortedCols[parseInt(i.toString(), 10)]);
      }
      return fields;
    };
    ResponsiveDialogRenderer2.prototype.customFilterColumnClickHandler = function(e) {
      var gObj = this.parent;
      var target = e.target;
      if (parentsUntil(target, "columnmenudiv") && this.action === ResponsiveDialogAction.isColMenu && !parentsUntil(target, "e-disabled")) {
        var column = this.menuCol ? this.menuCol : this.filteredCol;
        if (parentsUntil(target, "e-responsiveautofitalldiv")) {
          gObj.autoFitColumns([]);
          this.closeCustomFilter();
        } else if (parentsUntil(target, "e-responsiveautofitdiv")) {
          gObj.autoFitColumns(column.field);
          this.closeCustomFilter();
        } else if (parentsUntil(target, "e-responsivegroupdiv")) {
          gObj.groupColumn(column.field);
          this.closeCustomFilter();
        } else if (parentsUntil(target, "e-responsiveungroupdiv")) {
          gObj.ungroupColumn(column.field);
          this.closeCustomFilter();
        } else if (parentsUntil(target, "e-responsiveascendingdiv")) {
          gObj.sortColumn(column.field, "Ascending");
          this.closeCustomFilter();
        } else if (parentsUntil(target, "e-responsivedescendingdiv")) {
          gObj.sortColumn(column.field, "Descending");
          this.closeCustomFilter();
        } else if (parentsUntil(target, "e-responsivecolumndiv")) {
          gObj.notify(renderResponsiveChangeAction, { action: 5 });
          gObj.showResponsiveCustomColumnChooser();
        } else if (parentsUntil(target, "e-responsivefilterdiv")) {
          gObj.notify(renderResponsiveChangeAction, { action: 3 });
          this.isRowResponsive = true;
          this.isCustomDialog = false;
          if (gObj.filterModule) {
            gObj.filterModule.responsiveDialogRenderer.showResponsiveDialog(column);
          }
        }
        e.preventDefault();
      }
      if (this.action !== ResponsiveDialogAction.isFilter) {
        return;
      }
      if (gObj.filterSettings.type !== "FilterBar") {
        if (target.classList.contains("e-responsivecoldiv") || target.parentElement.classList.contains("e-responsivecoldiv")) {
          var field = target.getAttribute("data-e-mappingname");
          if (!field) {
            field = target.parentElement.getAttribute("data-e-mappingname");
          }
          if (field) {
            var col = gObj.getColumnByField(field);
            this.isRowResponsive = true;
            this.showResponsiveDialog(col);
          }
        } else if (target.classList.contains("e-filterset") || target.parentElement.classList.contains("e-filtersetdiv")) {
          var colDiv = parentsUntil(target, "e-responsivecoldiv");
          if (colDiv) {
            var field = colDiv.getAttribute("data-e-mappingname");
            var col = gObj.getColumnByField(field);
            if (col.filter.type === "Menu" || !col.filter.type && gObj.filterSettings.type === "Menu") {
              this.isDialogClose = true;
            }
            this.parent.filterModule.filterModule.clearCustomFilter(col);
            this.removeCustomDlgFilterEle(target);
          }
        }
      }
    };
    ResponsiveDialogRenderer2.prototype.showResponsiveDialog = function(col, column) {
      if (this.isCustomDialog && this.action === ResponsiveDialogAction.isFilter && !this.isRowResponsive || column && this.action === ResponsiveDialogAction.isColMenu) {
        this.menuCol = column;
        this.renderCustomFilterDialog(null, column);
      } else {
        this.filteredCol = col;
        this.renderResponsiveDialog(col);
        if (this.parent.enableAdaptiveUI && col) {
          this.parent.filterModule.setFilterModel(col);
          this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(col, void 0));
        }
        if (this.action === ResponsiveDialogAction.isColumnChooser) {
          this.parent.notify(renderResponsiveColumnChooserDiv, { action: "open" });
        }
        if (this.action === ResponsiveDialogAction.isSort) {
          var args = {
            cancel: false,
            dialogObj: this.customResponsiveDlg,
            requestType: "beforeOpenAptiveSortDialog"
          };
          this.parent.trigger(beforeOpenAdaptiveDialog, args);
          if (args.cancel) {
            return;
          }
        }
        this.customResponsiveDlg.show(true);
        this.customResponsiveDlg.element.style.maxHeight = "100%";
        this.setTopToChildDialog(this.customResponsiveDlg.element);
        if (this.parent.enableAdaptiveUI && this.parent.filterSettings && (this.parent.filterSettings.type === "CheckBox" || this.parent.filterSettings.type === "Excel") && this.parent.filterSettings.enableInfiniteScrolling && this.parent.filterSettings.loadingIndicator === "Shimmer") {
          var filterBase = this.parent.filterSettings.type === "CheckBox" ? this.parent.filterModule.filterModule.checkBoxBase : this.parent.filterModule.filterModule.excelFilterBase;
          filterBase.showMask();
        }
      }
    };
    ResponsiveDialogRenderer2.prototype.setTopToChildDialog = function(dialogEle) {
      var child = dialogEle.querySelector(".e-dialog");
      if (child) {
        var top_1 = dialogEle.querySelector(".e-dlg-header-content").getBoundingClientRect().height;
        child.style.top = top_1 + "px";
      }
    };
    ResponsiveDialogRenderer2.prototype.renderCustomFilterDialog = function(col, column) {
      var gObj = this.parent;
      var isColMenu = this.action === ResponsiveDialogAction.isColMenu;
      if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === "FilterBar") {
        return;
      }
      var colMenu = isColMenu ? "e-customcolumnmenudiv " : "";
      var outerDiv = this.parent.createElement("div", {
        id: gObj.element.id + (isColMenu ? "customcolumnmenu" : "customfilter"),
        className: this.parent.cssClass ? colMenu + "e-customfilterdiv e-responsive-dialog " + this.parent.cssClass : colMenu + "e-customfilterdiv e-responsive-dialog"
      });
      this.parent.element.appendChild(outerDiv);
      this.customFilterDlg = this.getDialogOptions(col, true, null, column);
      var args = {
        cancel: false,
        dialogObj: this.customFilterDlg,
        requestType: "beforeOpenAptiveFilterDialog"
      };
      this.parent.trigger(beforeOpenAdaptiveDialog, args);
      if (args.cancel) {
        return;
      }
      this.customFilterDlg.appendTo(outerDiv);
      this.customFilterDlg.show(true);
      this.customFilterDlg.element.style.maxHeight = "100%";
    };
    ResponsiveDialogRenderer2.prototype.getDialogOptions = function(col, isCustomFilter, id, column) {
      var options = new Dialog({
        isModal: true,
        showCloseIcon: id === "columnchooser" && this.parent.columnChooserSettings.headerTemplate && !this.parent.enableColumnVirtualization ? false : true,
        closeOnEscape: false,
        locale: this.parent.locale,
        target: this.parent.adaptiveDlgTarget ? this.parent.adaptiveDlgTarget : document.body,
        visible: false,
        enableRtl: this.parent.enableRtl,
        content: this.renderResponsiveContent(col, column),
        open: this.dialogOpen.bind(this),
        created: this.dialogCreated.bind(this),
        close: this.beforeDialogClose.bind(this),
        width: "100%",
        height: "100%",
        animationSettings: { effect: "None" },
        cssClass: this.parent.cssClass ? this.parent.cssClass : ""
      });
      var isStringTemplate = "isStringTemplate";
      options["" + isStringTemplate] = true;
      if (isCustomFilter) {
        options.header = this.renderResponsiveHeader(col, void 0, true);
        var colMenu = this.action === ResponsiveDialogAction.isColMenu ? "e-customcolumnmenu " : "";
        options.cssClass = colMenu + "e-customfilter";
      } else {
        options.header = this.renderResponsiveHeader(col);
        options.cssClass = this.parent.rowRenderingMode === "Vertical" && this.action === ResponsiveDialogAction.isFilter ? "e-res" + id + " e-row-responsive-filter" : "e-res" + id;
      }
      return options;
    };
    ResponsiveDialogRenderer2.prototype.renderResponsiveDialog = function(col) {
      var gObj = this.parent;
      if (this.action === ResponsiveDialogAction.isFilter && gObj.filterSettings.type === "FilterBar") {
        return;
      }
      var id = this.action === ResponsiveDialogAction.isFilter ? "filter" : "sort";
      id = this.action === ResponsiveDialogAction.isColumnChooser ? "columnchooser" : id;
      var outerDiv = this.parent.createElement("div", {
        id: gObj.element.id + "responsive" + id,
        className: this.parent.cssClass ? "e-res" + id + "div e-responsive-dialog " + this.parent.cssClass : "e-res" + id + "div e-responsive-dialog"
      });
      this.parent.element.appendChild(outerDiv);
      this.customResponsiveDlg = this.getDialogOptions(col, false, id);
      this.customResponsiveDlg.appendTo(outerDiv);
    };
    ResponsiveDialogRenderer2.prototype.dialogCreated = function() {
      addBiggerDialog(this.parent);
    };
    ResponsiveDialogRenderer2.prototype.dialogOpen = function() {
      if (this.action === ResponsiveDialogAction.isSort && this.parent.allowMultiSorting) {
        for (var i = 0; i < this.parent.sortSettings.columns.length; i++) {
          this.sortedCols.push(this.parent.sortSettings.columns[parseInt(i.toString(), 10)].field);
          var sortField = this.parent.sortSettings.columns[parseInt(i.toString(), 10)].field;
          var sortDirection = this.parent.sortSettings.columns[parseInt(i.toString(), 10)].direction;
          this.sortPredicate.push({ field: sortField, direction: sortDirection });
        }
      }
    };
    ResponsiveDialogRenderer2.prototype.beforeDialogClose = function(args) {
      this.isDialogClose = args.element && !args.element.querySelector(".e-xl-customfilterdiv") && args.element.classList.contains("e-resfilterdiv");
      if (this.action === ResponsiveDialogAction.isFilter) {
        if (args.element.classList.contains("e-resfilterdiv")) {
          this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender);
        } else if (args.element.classList.contains("e-customfilterdiv")) {
          this.closeCustomFilter();
        }
        if (this.parent.rowRenderingMode === "Horizontal" && this.parent.showColumnMenu) {
          this.parent.notify(renderResponsiveChangeAction, { action: 4 });
          var custom = document.querySelector(".e-resfilter");
          if (custom) {
            remove(custom);
          }
        }
      } else if (this.action === ResponsiveDialogAction.isSort) {
        this.closeCustomDialog();
      } else if (this.action === ResponsiveDialogAction.isColMenu) {
        this.closeCustomFilter();
        var custom = document.querySelector(".e-rescolummenu");
        if (custom) {
          remove(custom);
        }
      } else if (this.action === ResponsiveDialogAction.isColumnChooser) {
        this.parent.notify(renderResponsiveColumnChooserDiv, { action: "clear" });
        var custom = document.querySelector(".e-rescolumnchooser");
        if (custom) {
          remove(custom);
        }
        if (this.parent.rowRenderingMode === "Horizontal" && this.parent.showColumnMenu) {
          this.parent.notify(renderResponsiveChangeAction, { action: 4 });
        }
        this.isCustomDialog = false;
        this.isDialogClose = false;
      }
      this.parent.off(enterKeyHandler, this.keyHandler);
    };
    ResponsiveDialogRenderer2.prototype.sortColumn = function() {
      if (!this.isSortApplied) {
        this.closeCustomDialog();
        return;
      }
      if (this.sortPredicate.length) {
        this.parent.setProperties({ sortSettings: { columns: [] } }, true);
      }
      for (var i = 0; i < this.sortPredicate.length; i++) {
        this.parent.sortColumn(this.sortPredicate[parseInt(i.toString(), 10)].field, this.sortPredicate[parseInt(i.toString(), 10)].direction, this.parent.allowMultiSorting);
      }
      if (!this.sortPredicate.length) {
        this.parent.clearSorting();
      }
      this.closeCustomDialog();
    };
    ResponsiveDialogRenderer2.prototype.getHeaderTitle = function(args, col) {
      var gObj = this.parent;
      var title;
      if (this.action === ResponsiveDialogAction.isEdit) {
        title = gObj.localeObj.getConstant("EditFormTitle") + args.primaryKeyValue[0];
      } else if (this.action === ResponsiveDialogAction.isAdd) {
        title = gObj.localeObj.getConstant("AddFormTitle");
      } else if (this.action === ResponsiveDialogAction.isFilter) {
        title = col ? col.headerText || col.field : gObj.localeObj.getConstant("FilterTitle");
      } else if (this.action === ResponsiveDialogAction.isSort) {
        title = gObj.localeObj.getConstant("Sort");
      } else if (this.action === ResponsiveDialogAction.isColMenu) {
        title = gObj.localeObj.getConstant("ColumnMenu");
      } else if (this.action === ResponsiveDialogAction.isColumnChooser) {
        title = gObj.localeObj.getConstant("ChooseColumns");
      }
      return title;
    };
    ResponsiveDialogRenderer2.prototype.getDialogName = function(action) {
      var name;
      if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {
        name = "dialogEdit_wrapper_title";
      } else if (action === ResponsiveDialogAction.isFilter) {
        name = "responsive_filter_dialog_wrapper";
      } else if (action === ResponsiveDialogAction.isColumnChooser) {
        name = "responsive_column_chooser_dialog_wrapper";
      }
      return name;
    };
    ResponsiveDialogRenderer2.prototype.getButtonText = function(action) {
      var text;
      if (action === ResponsiveDialogAction.isAdd || action === ResponsiveDialogAction.isEdit) {
        text = "Save";
      } else if (action === ResponsiveDialogAction.isFilter || this.action === ResponsiveDialogAction.isSort || action === ResponsiveDialogAction.isColumnChooser || this.action === ResponsiveDialogAction.isColumnChooser) {
        text = "OKButton";
      }
      return text;
    };
    ResponsiveDialogRenderer2.prototype.renderResponsiveHeader = function(col, args, isCustomFilter) {
      var _this = this;
      var gObj = this.parent;
      gObj.on(enterKeyHandler, this.keyHandler, this);
      var id = gObj.element.id + this.getDialogName(this.action);
      if (this.parent.columnChooserSettings.headerTemplate && !this.parent.enableColumnVirtualization && this.getHeaderTitle(args, col) === gObj.localeObj.getConstant("ChooseColumns")) {
        var headerTempteElement = this.parent.columnChooserModule.renderHeader();
        return headerTempteElement;
      }
      var header = gObj.createElement("div", { className: "e-res-custom-element" });
      var titleDiv = gObj.createElement("div", { className: "e-dlg-custom-header", id });
      titleDiv.innerHTML = this.getHeaderTitle(args, col);
      header.appendChild(titleDiv);
      var saveBtn = gObj.createElement("button");
      if (!isCustomFilter) {
        this.saveBtn = new Button({
          cssClass: this.parent.cssClass ? "e-primary e-flat e-res-apply-btn " + this.parent.cssClass : "e-primary e-flat e-res-apply-btn"
        });
        saveBtn.innerHTML = gObj.localeObj.getConstant(this.getButtonText(this.action));
        this.saveBtn.appendTo(saveBtn);
        saveBtn.onclick = function(e) {
          _this.dialogHdrBtnClickHandler();
        };
      }
      var isSort = this.action === ResponsiveDialogAction.isSort;
      var isFilter = this.action === ResponsiveDialogAction.isFilter;
      if (isFilter || isSort) {
        var id_1 = isSort ? "sort" : "filter";
        var clearBtn = gObj.createElement("button");
        this.filterClearBtn = new Button({
          cssClass: this.parent.cssClass ? "e-primary e-flat e-res-" + id_1 + "-clear-btn " + this.parent.cssClass : "e-primary e-flat e-res-" + id_1 + "-clear-btn"
        });
        if (isFilter) {
          var span = gObj.createElement("span", { className: "e-btn-icon e-icon-filter-clear e-icons" });
          clearBtn.appendChild(span);
        } else {
          clearBtn.innerHTML = gObj.localeObj.getConstant("Clear");
        }
        header.appendChild(clearBtn);
        this.filterClearBtn.appendTo(clearBtn);
        clearBtn.onclick = function(e) {
          if (parentsUntil(e.target, "e-customfilter")) {
            _this.parent.filterModule.clearFiltering();
            _this.removeCustomDlgFilterEle();
          } else {
            if (isFilter) {
              _this.filterClear();
            } else {
              _this.resetSortButtons();
              _this.sortedCols = [];
              _this.sortPredicate = [];
              _this.isSortApplied = true;
            }
          }
        };
        header.appendChild(clearBtn);
      }
      if (!isCustomFilter) {
        header.appendChild(saveBtn);
      }
      return header;
    };
    ResponsiveDialogRenderer2.prototype.filterClear = function() {
      this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol);
      this.parent.filterModule.filterModule.closeResponsiveDialog();
    };
    ResponsiveDialogRenderer2.prototype.removeCustomFilterElement = function() {
      var elem = document.getElementById(this.parent.element.id + "customcolumnmenu");
      if (elem) {
        remove(elem);
        var custom = document.querySelector(".e-customfilter");
        if (custom) {
          remove(custom);
        }
      }
      var custommenu = document.querySelector(".e-rescolumnchooser");
      if (custommenu) {
        remove(custommenu);
      }
    };
    ResponsiveDialogRenderer2.prototype.hideResponsiveColumnChooser = function() {
      var columnChooserElement = document.querySelector(".e-rescolumnchooser");
      if (columnChooserElement) {
        remove(columnChooserElement);
        this.isCustomDialog = false;
        this.isDialogClose = false;
      }
    };
    ResponsiveDialogRenderer2.prototype.dialogHdrBtnClickHandler = function() {
      if (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd) {
        this.parent.endEdit();
      } else if (this.action === ResponsiveDialogAction.isFilter) {
        this.parent.filterModule.filterModule.applyCustomFilter({ col: this.filteredCol, isCustomFilter: this.isCustomDlgRender });
        this.removeCustomFilterElement();
      } else if (this.action === ResponsiveDialogAction.isSort) {
        this.sortColumn();
        this.removeCustomFilterElement();
      } else if (this.action === ResponsiveDialogAction.isColumnChooser) {
        this.parent.notify(renderResponsiveColumnChooserDiv, { action: "confirm" });
        this.removeCustomFilterElement();
        this.isCustomDialog = false;
        this.isDialogClose = false;
      }
    };
    ResponsiveDialogRenderer2.prototype.closeCustomDialog = function() {
      if (this.isCustomDlgRender) {
        var mainfilterdiv = this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");
        remove(mainfilterdiv);
        return;
      }
      this.isRowResponsive = false;
      this.isCustomDlgRender = false;
      this.destroyCustomFilterDialog();
    };
    ResponsiveDialogRenderer2.prototype.destroyCustomFilterDialog = function() {
      if (!this.customResponsiveDlg) {
        return;
      }
      var elem = document.getElementById(this.customResponsiveDlg.element.id);
      if (this.customResponsiveDlg && !this.customResponsiveDlg.isDestroyed && elem) {
        this.customResponsiveDlg.destroy();
        remove(elem);
      }
      this.closeCustomFilter();
      if (this.action === ResponsiveDialogAction.isSort) {
        this.sortPredicate = [];
        this.sortedCols = [];
        this.isSortApplied = false;
      }
    };
    ResponsiveDialogRenderer2.prototype.closeCustomFilter = function() {
      if (!this.isDialogClose && this.customFilterDlg) {
        var customEle = document.getElementById(this.customFilterDlg.element.id);
        if (this.customFilterDlg && !this.customFilterDlg.isDestroyed && customEle) {
          this.customFilterDlg.destroy();
          remove(customEle);
        }
      }
      this.isCustomDialog = false;
      this.isDialogClose = false;
    };
    ResponsiveDialogRenderer2.prototype.removeCustomDlgFilterEle = function(target) {
      if (target) {
        if (target.parentElement.classList.contains("e-filtersetdiv")) {
          remove(target.parentElement);
        } else {
          remove(target);
        }
      } else {
        var child = this.customColumnDiv.children;
        for (var i = 0; i < child.length; i++) {
          target = child[parseInt(i.toString(), 10)].querySelector(".e-filtersetdiv");
          if (target) {
            remove(target);
            i--;
          }
        }
      }
    };
    ResponsiveDialogRenderer2.prototype.keyHandler = function(e) {
      if (e.keyCode === 13 && (this.action === ResponsiveDialogAction.isFilter && e.target.classList.contains("e-searchinput") || (this.action === ResponsiveDialogAction.isEdit || this.action === ResponsiveDialogAction.isAdd))) {
        this.dialogHdrBtnClickHandler();
      }
    };
    ResponsiveDialogRenderer2.prototype.editComplate = function(args) {
      if (args.requestType === "save" || args.requestType === "cancel") {
        this.parent.off(enterKeyHandler, this.keyHandler);
      }
    };
    ResponsiveDialogRenderer2.prototype.removeEventListener = function() {
      if (this.customColumnDiv) {
        EventHandler.remove(this.customColumnDiv, Browser.isDevice ? "touchend" : "click", this.customFilterColumnClickHandler);
      }
      addRemoveEventListener(this.parent, this.evtHandlers, true, this);
      this.parent.removeEventListener(actionComplete, this.onActionCompleteFn);
    };
    return ResponsiveDialogRenderer2;
  }()
);
var ServiceLocator = (
  /** @class */
  function() {
    function ServiceLocator2() {
      this.services = {};
    }
    ServiceLocator2.prototype.register = function(name, type) {
      if (isNullOrUndefined(this.services["" + name])) {
        this.services["" + name] = type;
      }
    };
    ServiceLocator2.prototype.getService = function(name) {
      if (isNullOrUndefined(this.services["" + name])) {
        throw "The service " + name + " is not registered";
      }
      return this.services["" + name];
    };
    ServiceLocator2.prototype.registerAdaptiveService = function(type, isAdaptiveUI, action) {
      if (isAdaptiveUI) {
        type.responsiveDialogRenderer = new ResponsiveDialogRenderer(type.parent, type.serviceLocator);
        type.responsiveDialogRenderer.action = action;
      } else {
        if (type.responsiveDialogRenderer) {
          type.responsiveDialogRenderer.removeEventListener();
          type.responsiveDialogRenderer = void 0;
        }
      }
    };
    return ServiceLocator2;
  }()
);
var RendererFactory = (
  /** @class */
  function() {
    function RendererFactory2() {
      this.rendererMap = {};
    }
    RendererFactory2.prototype.addRenderer = function(name, type) {
      var rName = getEnumValue(RenderType, name);
      if (isNullOrUndefined(this.rendererMap["" + rName])) {
        this.rendererMap["" + rName] = type;
      }
    };
    RendererFactory2.prototype.getRenderer = function(name) {
      var rName = getEnumValue(RenderType, name);
      if (isNullOrUndefined(this.rendererMap["" + rName])) {
        throw "The renderer " + rName + " is not found";
      } else {
        return this.rendererMap["" + rName];
      }
    };
    return RendererFactory2;
  }()
);
var ColumnWidthService = (
  /** @class */
  function() {
    function ColumnWidthService2(parent) {
      this.parent = parent;
    }
    ColumnWidthService2.prototype.setWidthToColumns = function() {
      var i = 0;
      var indexes = this.parent.getColumnIndexesInView();
      var wFlag = true;
      var totalColumnsWidth = 0;
      if (this.parent.allowGrouping) {
        for (var len = this.parent.groupSettings.columns.length; i < len; i++) {
          if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {
            wFlag = false;
            continue;
          }
          this.setColumnWidth(new Column({ width: "30px" }), i);
        }
      }
      if (this.parent.detailTemplate || this.parent.childGrid) {
        this.setColumnWidth(new Column({ width: "30px" }), i);
        i++;
      }
      if (this.parent.isRowDragable() && this.parent.getFrozenMode() !== "Right") {
        this.setColumnWidth(new Column({ width: "30px" }), i);
        i++;
      }
      var columns = this.parent.getColumns();
      for (var j = 0; j < columns.length; j++) {
        this.setColumnWidth(columns[parseInt(j.toString(), 10)], wFlag && this.parent.enableColumnVirtualization ? void 0 : j + i);
      }
      if (this.parent.isRowDragable() && this.parent.getFrozenMode() === "Right") {
        this.setColumnWidth(new Column({ width: "30px" }), this.parent.groupSettings.columns.length + columns.length);
      }
      totalColumnsWidth = this.getTableWidth(this.parent.getColumns());
      if (totalColumnsWidth !== "auto") {
        if (this.parent.width !== "auto" && this.parent.width.toString().indexOf("%") === -1) {
          this.setMinwidthBycalculation(totalColumnsWidth);
        }
        var maxWidthColumns = columns.filter(function(a) {
          return !isNullOrUndefined(a.maxWidth);
        });
        var header = this.parent.getHeaderTable();
        var content2 = this.parent.getContentTable();
        if (this.parent.allowResizing && this.parent.element.getBoundingClientRect().width > totalColumnsWidth && maxWidthColumns.length === columns.length && header && content2) {
          addClass([header, content2], ["e-tableborder"]);
        }
      }
    };
    ColumnWidthService2.prototype.setMinwidthBycalculation = function(tWidth) {
      var _this = this;
      var difference = 0;
      var collection = this.parent.getColumns().filter(function(a) {
        if (_this.parent.allowResizing) {
          return (isNullOrUndefined(a.width) || a.width === "auto") && isNullOrUndefined(a.maxWidth);
        } else {
          return isNullOrUndefined(a.width) || a.width === "auto";
        }
      });
      if (collection.length) {
        if (!isNullOrUndefined(this.parent.width) && this.parent.width !== "auto" && typeof this.parent.width === "string" && this.parent.width.indexOf("%") === -1) {
          difference = parseInt(this.parent.width, 10) - tWidth;
        } else {
          difference = this.parent.element.getBoundingClientRect().width - tWidth;
        }
        var tmWidth = 0;
        for (var _i = 0, collection_1 = collection; _i < collection_1.length; _i++) {
          var cols = collection_1[_i];
          tmWidth += !isNullOrUndefined(cols.minWidth) ? typeof cols.minWidth === "string" ? parseInt(cols.minWidth, 10) : cols.minWidth : 0;
        }
        for (var i = 0; i < collection.length; i++) {
          if (tWidth === 0 && this.parent.allowResizing && this.isWidthUndefined() && i !== collection.length - 1) {
            this.setUndefinedColumnWidth(collection);
          }
          var index = this.parent.getColumnIndexByField(collection[parseInt(i.toString(), 10)].field) + this.parent.getIndentCount();
          if (tWidth !== 0 && difference < tmWidth) {
            this.setWidth(collection[parseInt(i.toString(), 10)].minWidth, index);
          } else if (tWidth !== 0 && difference > tmWidth) {
            this.setWidth("", index, true);
          }
        }
      }
    };
    ColumnWidthService2.prototype.setUndefinedColumnWidth = function(collection) {
      for (var k = 0; k < collection.length; k++) {
        if (k !== collection.length - 1) {
          collection[parseInt(k.toString(), 10)].width = 200;
          this.setWidth(200, this.parent.getColumnIndexByField(collection[parseInt(k.toString(), 10)].field));
        }
      }
    };
    ColumnWidthService2.prototype.setColumnWidth = function(column, index, module) {
      if (this.parent.getColumns().length < 1) {
        return;
      }
      var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;
      var cWidth = this.getWidth(column);
      var tgridWidth = this.getTableWidth(this.parent.getColumns());
      if (cWidth !== null) {
        this.setWidth(cWidth, columnIndex);
        if (this.parent.width !== "auto" && this.parent.width.toString().indexOf("%") === -1 && tgridWidth !== "auto") {
          this.setMinwidthBycalculation(tgridWidth);
        }
        if (this.parent.allowResizing && (module === "resize" || this.parent.getFrozenColumns())) {
          var contentTable = this.parent.getContentTable();
          this.setWidthToTable(this.parent.getFrozenColumns() && contentTable.style.width.indexOf("px") === -1 && tgridWidth < contentTable.clientWidth);
        }
        this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column, module });
      }
    };
    ColumnWidthService2.prototype.setWidth = function(width, index, clear) {
      if (this.parent.groupSettings.columns.length > index && ispercentageWidth(this.parent) && !(this.parent.resizeModule && this.parent.resizeModule.resizeProcess)) {
        var elementWidth = this.parent.element.offsetWidth;
        width = (30 / elementWidth * 100).toFixed(1) + "%";
      }
      var header = this.parent.getHeaderTable();
      var content2 = this.parent.getContentTable();
      var fWidth = formatUnit(width);
      var headerCol = header.querySelector(colGroup).children[parseInt(index.toString(), 10)];
      if (headerCol && !clear) {
        headerCol.style.width = fWidth;
      } else if (headerCol && clear) {
        headerCol.style.width = "";
      }
      var contentCol = content2.querySelector(colGroup).children[parseInt(index.toString(), 10)];
      if (contentCol && !clear) {
        contentCol.style.width = fWidth;
      } else if (contentCol && clear) {
        contentCol.style.width = "";
      }
      if (!this.parent.enableColumnVirtualization && this.parent.isEdit) {
        var edit = this.parent.element.querySelectorAll(".e-table.e-inline-edit");
        var editTableCol = [];
        for (var i = 0; i < edit.length; i++) {
          if (parentsUntil(edit[parseInt(i.toString(), 10)], "e-grid").id === this.parent.element.id) {
            for (var j = 0; j < edit[parseInt(i.toString(), 10)].querySelector("colgroup").children.length; j++) {
              editTableCol.push(edit[parseInt(i.toString(), 10)].querySelector("colgroup").children[parseInt(j.toString(), 10)]);
            }
          }
        }
        if (edit.length && editTableCol.length && editTableCol[parseInt(index.toString(), 10)]) {
          editTableCol[parseInt(index.toString(), 10)].style.width = fWidth;
        }
      }
      if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization) {
        this.refreshFrozenScrollbar();
      }
    };
    ColumnWidthService2.prototype.refreshFrozenScrollbar = function() {
      var args = { cancel: false };
      this.parent.notify(preventFrozenScrollRefresh, args);
      if (args.cancel) {
        return;
      }
      var scrollWidth2 = getScrollBarWidth();
      var movableScrollbar = this.parent.element.querySelector(".e-movablescrollbar");
      var movableWidth = this.parent.getContent().firstElementChild.getBoundingClientRect().width;
      if (this.parent.enableColumnVirtualization) {
        var placeHolder = this.parent.getContent().querySelector(".e-virtualtrack");
        if (placeHolder) {
          movableWidth = placeHolder.scrollWidth;
        }
      }
      if (this.parent.height !== "auto") {
        movableWidth = movableWidth + scrollWidth2;
      }
      movableScrollbar.firstElementChild.style.width = movableWidth + "px";
    };
    ColumnWidthService2.prototype.getSiblingsHeight = function(element2) {
      var previous = this.getHeightFromDirection(element2, "previous");
      var next = this.getHeightFromDirection(element2, "next");
      return previous + next;
    };
    ColumnWidthService2.prototype.getHeightFromDirection = function(element2, direction) {
      var sibling = element2[direction + "ElementSibling"];
      var result = 0;
      var classList2 = [gridHeader, gridFooter, "e-groupdroparea", "e-gridpager", "e-toolbar", "e-temp-toolbar"];
      while (sibling) {
        if (classList2.some(function(value) {
          return sibling.classList.contains(value);
        })) {
          result += sibling.offsetHeight;
        }
        sibling = sibling[direction + "ElementSibling"];
      }
      return result;
    };
    ColumnWidthService2.prototype.isWidthUndefined = function() {
      var isWidUndefCount = this.parent.getColumns().filter(function(col) {
        return isNullOrUndefined(col.width) && isNullOrUndefined(col.minWidth);
      }).length;
      return this.parent.getColumns().length === isWidUndefCount;
    };
    ColumnWidthService2.prototype.getWidth = function(column) {
      if (this.parent.allowResizing && isNullOrUndefined(column.width)) {
        if (isNullOrUndefined(column.minWidth) && isNullOrUndefined(column.maxWidth) && !this.isWidthUndefined()) {
          column.width = 200;
        } else if (column.maxWidth) {
          column.width = column.maxWidth;
        }
      }
      if (!column.width) {
        return null;
      }
      var width = parseInt(column.width.toString(), 10);
      if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {
        return column.minWidth;
      } else if (column.maxWidth && width > parseInt(column.maxWidth.toString(), 10)) {
        return column.maxWidth;
      } else {
        return column.width;
      }
    };
    ColumnWidthService2.prototype.getTableWidth = function(columns, resetIndentWidth) {
      var tWidth = 0;
      var isAutoColumn = false;
      for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {
        var column = columns_1[_i];
        if (column.visible !== false) {
          var cWidth = this.getWidth(column);
          if (column.width === "auto" || !column.width) {
            if (this.parent.allowResizing && !resetIndentWidth) {
              if (!column.maxWidth) {
                isAutoColumn = true;
              }
            } else {
              cWidth = 0;
            }
          }
          if (cWidth !== null) {
            tWidth += parseInt(cWidth.toString(), 10);
          }
        }
      }
      tWidth = isAutoColumn ? "auto" : tWidth;
      return tWidth;
    };
    ColumnWidthService2.prototype.setWidthToTable = function(isMaxWidth) {
      var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));
      if (this.parent.detailTemplate || this.parent.childGrid) {
        this.setColumnWidth(new Column({ width: "30px" }));
      }
      tWidth = this.isAutoResize() || tWidth === "auto" || isMaxWidth ? "100%" : tWidth;
      this.parent.getHeaderTable().style.width = tWidth;
      this.parent.getContentTable().style.width = tWidth;
      var edit = this.parent.element.querySelector(".e-table.e-inline-edit");
      if (edit) {
        edit.style.width = tWidth;
      }
    };
    ColumnWidthService2.prototype.isAutoResize = function() {
      return this.parent.allowResizing && this.parent.resizeSettings.mode === "Auto";
    };
    return ColumnWidthService2;
  }()
);
var __extends$9 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var FocusStrategy = (
  /** @class */
  function() {
    function FocusStrategy2(parent) {
      this.currentInfo = {};
      this.oneTime = true;
      this.swap = {};
      this.isInfiniteScroll = false;
      this.virtualSelectionInfo = {};
      this.forget = false;
      this.skipFocus = true;
      this.focusByClick = false;
      this.firstHeaderCellClick = false;
      this.prevIndexes = {};
      this.refMatrix = this.refreshMatrix(true);
      this.actions = ["downArrow", "upArrow"];
      this.isVirtualScroll = false;
      this.groupedFrozenRow = 0;
      this.parent = parent;
      this.rowModelGen = new RowModelGenerator(this.parent);
      this.addEventListener();
    }
    FocusStrategy2.prototype.focusCheck = function(e) {
      var target = e.target;
      this.focusByClick = true;
      this.firstHeaderCellClick = true;
      this.skipFocus = target.classList.contains("e-grid");
    };
    FocusStrategy2.prototype.onFocus = function(e) {
      if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization || this.parent.element.querySelector(".e-masked-table") || !this.parent.isInitialLoad && e && e.target === this.parent.element && this.parent.element.querySelector(".e-spin-show")) {
        return;
      }
      this.setActive(!this.parent.enableHeaderFocus && this.parent.frozenRows === 0);
      if (!this.parent.enableHeaderFocus && !this.parent.getCurrentViewRecords().length && (this.parent.editSettings.mode !== "Batch" || this.parent.editSettings.mode === "Batch" && this.parent.editModule && !this.parent.editModule.getBatchChanges()[addedRecords].length)) {
        this.getContent().matrix.generate(this.rowModelGen.generateRows({ rows: [new Row({ isDataRow: true })] }), this.getContent().selector, false);
      }
      var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator(), this.active);
      this.getContent().matrix.select(current[0], current[1]);
      if (this.skipFocus && !(e && e.target === this.parent.element)) {
        this.focus(e);
        this.skipFocus = false;
      }
    };
    FocusStrategy2.prototype.passiveFocus = function(e) {
      if (this.parent.isDestroyed) {
        return;
      }
      var firstHeaderCell = this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");
      if (e.target === firstHeaderCell && e.relatedTarget && !parentsUntil(e.relatedTarget, "e-grid") && !this.firstHeaderCellClick) {
        var firstHeaderCellIndex = [0, 0];
        if (this.active.matrix.matrix[firstHeaderCellIndex[0]][firstHeaderCellIndex[1]] === 0) {
          firstHeaderCellIndex = findCellIndex(this.active.matrix.matrix, firstHeaderCellIndex, true);
        }
        this.active.matrix.current = firstHeaderCellIndex;
        this.currentInfo.element = e.target;
        this.currentInfo.elementToFocus = e.target;
        if (this.currentInfo.element.querySelector(".e-checkselectall")) {
          this.removeFocus();
          this.addFocus(this.getContent().getFocusInfo(), e);
        } else {
          addClass([this.currentInfo.element], ["e-focused", "e-focus"]);
        }
      }
      this.firstHeaderCellClick = false;
      if (e.target && e.target.classList.contains("e-detailcell")) {
        this.currentInfo.skipAction = false;
        addClass([this.currentInfo.element], ["e-focused", "e-focus"]);
      }
    };
    FocusStrategy2.prototype.onBlur = function(e) {
      if (this.parent.allowPaging && this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")) {
        this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");
      }
      var isGantt = parentsUntil(e.target, "e-gantt") && e.target.classList.contains("e-rowcell") && (!isNullOrUndefined(e.target.nextElementSibling) && e.target.nextElementSibling.classList.contains("e-rowcell")) ? true : false;
      if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, ".e-grid") || closest(e.relatedTarget, ".e-grid-popup")) && !(this.parent.element.classList.contains("e-childgrid") && !this.parent.element.matches(":focus-within"))) && !(!isGantt && isNullOrUndefined(e.relatedTarget) && parseInt(e.target.getAttribute("aria-colindex"), 10) - 1 === 0 && parseInt(e.target.getAttribute("index"), 10) === 0) && !(!isGantt && isNullOrUndefined(e.relatedTarget) && !closest(document.activeElement, ".e-grid") && !isNullOrUndefined(e["sourceCapabilities"]))) {
        return;
      }
      this.removeFocus();
      this.skipFocus = true;
      this.currentInfo.skipAction = false;
      this.setLastContentCellTabIndex();
      this.setFirstFocusableTabIndex();
      this.firstHeaderCellClick = false;
    };
    FocusStrategy2.prototype.setFirstFocusableTabIndex = function() {
      var gObj = this.parent;
      gObj.element.tabIndex = -1;
      if (gObj.allowGrouping && gObj.groupSettings.showDropArea) {
        var groupModule = gObj.groupModule;
        var focusableGroupedItems = groupModule.getFocusableGroupedItems();
        if (focusableGroupedItems.length > 0) {
          groupModule.element.tabIndex = -1;
          focusableGroupedItems[0].tabIndex = 0;
        } else {
          groupModule.element.tabIndex = 0;
        }
        return;
      }
      if (gObj.toolbar || gObj.toolbarTemplate) {
        var toolbarElement = gObj.toolbarModule.element;
        var focusableToolbarItems = this.parent.toolbarModule.getFocusableToolbarItems();
        if (focusableToolbarItems.length > 0 && focusableToolbarItems[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")) {
          toolbarElement.tabIndex = -1;
          focusableToolbarItems[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex = 0;
        } else {
          toolbarElement.tabIndex = 0;
        }
        return;
      }
      if (gObj.getColumns().length) {
        var firstHeaderCell = gObj.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");
        firstHeaderCell.tabIndex = 0;
        this.setActive(false);
        if (!isNullOrUndefined(this.active) && (isNullOrUndefined(this.active.target) || !this.active.target.classList.contains("e-columnmenu"))) {
          var firstHeaderCellIndex = [0, 0];
          if (this.active.matrix.matrix[firstHeaderCellIndex[0]][firstHeaderCellIndex[1]] === 0) {
            firstHeaderCellIndex = findCellIndex(this.active.matrix.matrix, firstHeaderCellIndex, true);
          }
          this.active.matrix.current = firstHeaderCellIndex;
        }
        return;
      }
    };
    FocusStrategy2.prototype.setLastContentCellTabIndex = function() {
      var contentTable = this.parent.getContentTable();
      if (contentTable.rows[contentTable.rows.length - 1]) {
        var lastCell = contentTable.rows[contentTable.rows.length - 1].lastElementChild;
        lastCell.tabIndex = 0;
      }
    };
    FocusStrategy2.prototype.onClick = function(e, force, isFocusFirstCell) {
      if (parentsUntil(e.target, "e-filterbarcell") && (parentsUntil(e.target, "e-multiselect") || e.target.classList.contains("e-input-group-icon"))) {
        return;
      }
      var isContent = !isNullOrUndefined(closest(e.target, "." + gridContent));
      var isHeader = !isNullOrUndefined(closest(e.target, "." + gridHeader));
      isContent = isContent && isHeader ? !isContent : isContent;
      if (!isContent && isNullOrUndefined(closest(e.target, "." + gridHeader)) || e.target.classList.contains(content) || e.target.classList.contains(headerContent) || !isNullOrUndefined(closest(e.target, ".e-unboundcell")) && !force) {
        return;
      }
      this.setActive(isContent);
      var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };
      this.parent.notify(beforeCellFocused, beforeArgs);
      if (beforeArgs.cancel || closest(e.target, ".e-inline-edit") && (!this.parent.editSettings.showAddNewRow && (this.parent.editSettings.showAddNewRow && !this.parent.element.querySelector(".e-editedrow")))) {
        return;
      }
      this.setActive(isContent);
      if (this.getContent()) {
        var returnVal = this.getContent().onClick(e, force);
        if (returnVal === false) {
          return;
        }
        this.focus();
        if (this.currentInfo.element.classList.contains("e-rowcell") && e.type && e.type === "click" && !isFocusFirstCell) {
          addClass([this.currentInfo.element], ["e-focused", "e-focus"]);
        }
        if (isFocusFirstCell && e && e.target) {
          addClass([e.target], ["e-focused", "e-focus"]);
        }
      }
    };
    FocusStrategy2.prototype.handleFilterNavigation = function(e, inputSelector, buttonSelector) {
      if (e.target === document.querySelector(inputSelector) && e.key === "Tab" && e.shiftKey) {
        e.preventDefault();
        document.querySelector(buttonSelector).focus();
      } else if (e.target === document.querySelector(buttonSelector) && e.key === "Tab" && !e.shiftKey && document.activeElement === document.querySelector(buttonSelector)) {
        e.preventDefault();
        document.querySelector(inputSelector).focus();
      }
    };
    FocusStrategy2.prototype.onKeyPress = function(e) {
      if (this.content && this.content.target) {
        this.content.target = null;
      }
      if (this.parent.allowPaging) {
        var pagerElement = this.parent.pagerModule.pagerObj.element;
        var focusablePagerElements = this.parent.pagerModule.pagerObj.getFocusablePagerElements(pagerElement, []);
        if (this.parent.childGrid && !parentsUntil(e.target, "e-gridpager") && this.allowToPaging(e) && focusablePagerElements.length) {
          focusablePagerElements[0].tabIndex = 0;
        }
        if (this.parent.pagerModule.pagerObj.checkPagerHasFocus()) {
          if (e.action === "shiftTab" && focusablePagerElements.length && focusablePagerElements[0] === e.target) {
            this.setActive(true);
            var lastHeaderCellIndex = [
              this.active.matrix.matrix.length - 1,
              this.active.matrix.matrix[this.active.matrix.matrix.length - 1].length - 1
            ];
            if (this.active.matrix.matrix[lastHeaderCellIndex[0]][lastHeaderCellIndex[1]] === 0) {
              lastHeaderCellIndex = findCellIndex(this.active.matrix.matrix, lastHeaderCellIndex, false);
            }
            this.active.matrix.current = this.parent.editSettings.mode === "Batch" ? this.isValidBatchEditCell(lastHeaderCellIndex) ? lastHeaderCellIndex : this.findBatchEditCell(lastHeaderCellIndex, false) : lastHeaderCellIndex;
            e.preventDefault();
            this.focus(e);
            return;
          }
          if (!(e.action === "tab" && this.parent.element.classList.contains("e-childgrid") && (!this.parent.pageSettings.pageSizes && focusablePagerElements.length && focusablePagerElements[focusablePagerElements.length - 1] === e.target || this.parent.pagerModule.pagerObj.getDropDownPage() === e.target))) {
            this.parent.pagerModule.pagerObj.changePagerFocus(e);
            return;
          } else {
            var parentCell = parentsUntil(this.parent.element, "e-detailcell");
            removeClass([this.parent.element], ["e-focus"]);
            removeClass([parentCell], ["e-focused"]);
            parentCell.tabIndex = -1;
          }
        }
        if (this.parent.pagerModule.pagerObj.element.tabIndex === 0 && (e.keyCode === 38 || e.shiftKey && e.keyCode === 9)) {
          e.preventDefault();
          this.focus(e);
          return;
        } else if (this.parent.pagerModule.pagerObj.element.tabIndex === 0 && e.keyCode === 9) {
          e.preventDefault();
          this.parent.pagerModule.pagerObj.setPagerFocus();
          return;
        }
        if (this.parent.pagerModule.pagerObj.checkFirstPagerFocus()) {
          var lastRow = this.getContent().matrix.rows;
          var lastColumn = this.getContent().matrix.columns;
          this.getContent().matrix.current = [lastRow, lastColumn];
        }
      }
      if (this.parent.filterSettings.type === "Excel") {
        this.handleFilterNavigation(e, ".e-excelfilter .e-menu-item:not(.e-disabled)", ".e-excelfilter .e-footer-content button:nth-child(2)");
      }
      if (this.parent.filterSettings.type === "CheckBox") {
        var focusedColumn = this.parent.getColumnByUid(this.focusedColumnUid);
        var focusTarget = focusedColumn && focusedColumn.filter && focusedColumn.filter.hideSearchbox ? ".e-chk-hidden" : ".e-searchinput.e-input";
        this.handleFilterNavigation(e, focusTarget, ".e-checkboxfilter .e-footer-content button:nth-child(2)");
      }
      if (this.parent.filterSettings.type === "Menu") {
        this.handleFilterNavigation(e, ".e-flmenu .e-input-group.e-popup-flmenu", ".e-flmenu .e-footer-content button:nth-child(2)");
      }
      if (this.parent.showColumnChooser) {
        this.handleFilterNavigation(e, ".e-ccdlg .e-ccsearch.e-cc.e-input", ".e-ccdlg .e-footer-content button:nth-child(2)");
      }
      if (this.skipOn(e)) {
        return;
      }
      if (e.target && parentsUntil(e.target, "e-gridcontent")) {
        var rows = [].slice.call(this.parent.getContentTable().rows);
        var lastCell = rows[rows.length - 1].lastElementChild;
        if (e.target === lastCell) {
          this.setActive(true);
          this.setLastContentCellActive();
        }
      }
      if (e.action === "shiftTab" && e.target && (e.target === this.parent.element || parentsUntil(e.target, "e-toolbar") || parentsUntil(e.target, "e-groupdroparea"))) {
        if (e.target === this.parent.element) {
          if (this.parent.element.classList.contains("e-childgrid")) {
            this.focusOutFromChildGrid(e);
          }
          return;
        }
        if (parentsUntil(e.target, "e-groupdroparea")) {
          if (this.parent.element.classList.contains("e-childgrid")) {
            e.preventDefault();
            this.parent.element.focus();
          }
          return;
        }
        if (parentsUntil(e.target, "e-toolbar")) {
          if (this.parent.allowGrouping && this.parent.groupSettings.showDropArea) {
            var groupModule = this.parent.groupModule;
            var focusableGroupedItems = groupModule.getFocusableGroupedItems();
            e.preventDefault();
            if (focusableGroupedItems.length > 0) {
              focusableGroupedItems[focusableGroupedItems.length - 1].focus();
            } else {
              groupModule.element.focus();
            }
          } else if (this.parent.element.classList.contains("e-childgrid")) {
            e.preventDefault();
            this.parent.element.focus();
          }
          return;
        }
      }
      var focusFirstHeaderCell = false;
      if (e.action === "tab" && e.target && (e.target === this.parent.element || parentsUntil(e.target, "e-toolbar") || parentsUntil(e.target, "e-groupdroparea"))) {
        if (this.parent.allowGrouping && this.parent.groupSettings.showDropArea && (e.target === this.parent.element || e.target.classList.contains("e-groupdroparea"))) {
          var groupModule = this.parent.groupModule;
          var focusableGroupedItems = groupModule.getFocusableGroupedItems();
          if (focusableGroupedItems.length > 0) {
            e.preventDefault();
            focusableGroupedItems[0].focus();
            return;
          }
          if (!e.target.classList.contains("e-groupdroparea")) {
            e.preventDefault();
            groupModule.element.focus();
            return;
          }
        }
        if ((this.parent.toolbar || this.parent.toolbarTemplate) && (e.target === this.parent.element || parentsUntil(e.target, "e-groupdroparea") || e.target.classList.contains("e-toolbar"))) {
          var toolbarElement = this.parent.toolbarModule.element;
          var focusableToolbarItems = this.parent.toolbarModule.getFocusableToolbarItems();
          if (focusableToolbarItems.length > 0) {
            e.preventDefault();
            focusableToolbarItems[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();
            return;
          }
          if (!e.target.classList.contains("e-toolbar")) {
            e.preventDefault();
            toolbarElement.focus();
            return;
          }
        }
        if (e.target === this.parent.element || parentsUntil(e.target, "e-toolbar") || parentsUntil(e.target, "e-groupdroparea")) {
          focusFirstHeaderCell = true;
        }
      }
      if (focusFirstHeaderCell) {
        if (this.parent.allowGrouping && !isNullOrUndefined(this.parent.groupSettings.columns) && this.parent.groupSettings.columns.length === this.parent.columns.length) {
          this.setActive(true);
        } else {
          this.setActive(false);
        }
        this.active.matrix.current = [0, -1];
      }
      this.activeKey = e.action;
      var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };
      this.parent.notify(beforeCellFocused, beforeArgs);
      if (beforeArgs.cancel) {
        return;
      }
      var bValue = this.getContent().matrix.current;
      var prevBatchValue = this.active && this.active.matrix.current ? [this.active.matrix.current[0], this.active.matrix.current[1]] : void 0;
      this.currentInfo.outline = true;
      var swapInfo = this.getContent().jump(e.action, bValue);
      this.swap = swapInfo;
      if (swapInfo.swap && !(this.parent.editSettings.mode === "Batch" && (e.action === "tab" || e.action === "shiftTab"))) {
        this.setActive(!swapInfo.toHeader);
        this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);
        this.prevIndexes = {};
      }
      this.setActiveByKey(e.action, this.getContent());
      var returnVal = this.content.lastIdxCell ? false : this.getContent().onKeyPress(e);
      if (e.target && parentsUntil(e.target, "e-gridheader")) {
        if (e.action === "tab" && bValue.toString() === this.active.matrix.current.toString()) {
          var nextHeaderCellIndex = findCellIndex(this.active.matrix.matrix, this.active.matrix.current, true);
          var lastHeaderCellIndex = [
            this.active.matrix.matrix.length - 1,
            this.active.matrix.matrix[this.active.matrix.matrix.length - 1].length - 1
          ];
          if (this.active.matrix.matrix[lastHeaderCellIndex[0]][lastHeaderCellIndex[1]] === 0) {
            lastHeaderCellIndex = findCellIndex(this.active.matrix.matrix, lastHeaderCellIndex, false);
          }
          var nextCell = getValue(nextHeaderCellIndex[0] + ".cells." + nextHeaderCellIndex[1], this.active.matrix.getRowsFromIndex(nextHeaderCellIndex[0], this.active));
          if (nextCell && nextCell.getBoundingClientRect().width === 0 && this.active.matrix.matrix.length - 1 === nextHeaderCellIndex[0]) {
            lastHeaderCellIndex = this.active.matrix.nextVisibleCellFocus(nextHeaderCellIndex[0], nextHeaderCellIndex[1], e.action, this.active.keyActions[e.action], this.active, this.active.matrix.current[1]);
          }
          if (this.active.matrix.current.toString() === lastHeaderCellIndex.toString() && this.content.matrix.matrix.length) {
            returnVal = true;
            this.setActive(true);
            var firstContentCellIndex = [0, 0];
            if (this.parent.allowPaging && this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")) {
              this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden", "true");
            }
            if (this.active.matrix.matrix[firstContentCellIndex[0]][firstContentCellIndex[1]] === 0) {
              firstContentCellIndex = findCellIndex(this.active.matrix.matrix, [0, 0], true);
            }
            var firstCell = getValue(firstContentCellIndex[0] + ".cells." + firstContentCellIndex[1], this.active.matrix.getRowsFromIndex(firstContentCellIndex[0], this.active));
            if (firstCell && firstCell.getBoundingClientRect().width === 0) {
              firstContentCellIndex = this.active.matrix.nextVisibleCellFocus(firstContentCellIndex[0], firstContentCellIndex[1], e.action, this.active.keyActions[e.action], this.active, this.active.matrix.current[1]);
            }
            this.active.matrix.current = this.parent.editSettings.mode === "Batch" ? this.isValidBatchEditCell(firstContentCellIndex) ? firstContentCellIndex : this.findBatchEditCell(firstContentCellIndex, true) : firstContentCellIndex;
            if (this.parent.enableVirtualization && !this.parent.enableColumnVirtualization && this.parent.contentModule.prevInfo.blockIndexes[0] !== 1) {
              e.preventDefault();
              this.removeFocus();
              var virtual = this.parent.contentModule;
              virtual.firstCellFocus = true;
              virtual.content.scrollTop = 0;
              return;
            }
          } else if (this.active.matrix.current.toString() !== nextHeaderCellIndex.toString()) {
            this.active.matrix.current = nextHeaderCellIndex;
          }
        }
        if (e.action === "shiftTab" && bValue.toString() === this.active.matrix.current.toString()) {
          var previousCellIndex = findCellIndex(this.active.matrix.matrix, this.active.matrix.current, false);
          var prevCell = getValue(previousCellIndex[0] + ".cells." + previousCellIndex[1], this.active.matrix.getRowsFromIndex(previousCellIndex[0], this.active));
          if (prevCell && prevCell.getBoundingClientRect().width === 0 && previousCellIndex[0] === 0) {
            previousCellIndex = this.active.matrix.nextVisibleCellFocus(previousCellIndex[0], previousCellIndex[1], e.action, this.active.keyActions[e.action], this.active, this.active.matrix.current[1]);
          }
          if (previousCellIndex.toString() === this.active.matrix.current.toString()) {
            this.focusOutFromHeader(e);
            return;
          }
          if (this.active.matrix.current.toString() !== previousCellIndex.toString() && !returnVal) {
            returnVal = true;
            var prevCell_1 = getValue(previousCellIndex[0] + ".cells." + previousCellIndex[1], this.active.matrix.getRowsFromIndex(previousCellIndex[0], this.active));
            if (prevCell_1 && prevCell_1.getBoundingClientRect().width === 0 && previousCellIndex[0] === 0) {
              previousCellIndex = this.active.matrix.nextVisibleCellFocus(previousCellIndex[0], previousCellIndex[1], e.action, this.active.keyActions[e.action], this.active, this.active.matrix.current[1]);
            }
            this.active.matrix.current = previousCellIndex;
          }
        }
      }
      if (e.target && parentsUntil(e.target, "e-gridcontent")) {
        if (this.parent.allowPaging && this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")) {
          this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");
        }
        if (this.parent.editSettings.mode === "Batch" && (e.action === "tab" || e.action === "shiftTab")) {
          this.active.matrix.current = this.findBatchEditCell(prevBatchValue, e.action === "tab" ? true : false);
          if (e.action === "tab" && prevBatchValue.toString() === this.active.matrix.current.toString()) {
            this.parent.editModule.editModule.addBatchRow = true;
          }
        }
        if (e.action === "shiftTab" && bValue.toString() === this.active.matrix.current.toString()) {
          if (this.parent.allowGrouping && !isNullOrUndefined(this.parent.groupSettings.columns) && this.parent.groupSettings.columns.length === this.parent.columns.length) {
            this.focusOutFromHeader(e);
            return;
          }
          var firstContentCellIndex = [0, 0];
          if (this.active.matrix.matrix[firstContentCellIndex[0]][firstContentCellIndex[1]] === 0) {
            firstContentCellIndex = findCellIndex(this.active.matrix.matrix, [0, 0], true);
          }
          var firstCell = getValue(firstContentCellIndex[0] + ".cells." + firstContentCellIndex[1], this.active.matrix.getRowsFromIndex(firstContentCellIndex[0], this.active));
          if (firstCell && firstCell.getBoundingClientRect().width === 0) {
            firstContentCellIndex = this.active.matrix.nextVisibleCellFocus(firstContentCellIndex[0], firstContentCellIndex[1], e.action, this.active.keyActions[e.action], this.active, this.active.matrix.current[1]);
          }
          if (!returnVal && (firstContentCellIndex.toString() === this.active.matrix.current.toString() || this.parent.editSettings.mode === "Batch" && prevBatchValue.toString() === this.active.matrix.current.toString())) {
            returnVal = true;
            this.setActive(false);
            this.setLastContentCellActive();
          }
        }
      }
      if (returnVal === false) {
        this.clearIndicator();
        if (e.action === "shiftTab" && bValue.toString() === [0, 0].toString()) {
          this.parent.element.tabIndex = -1;
        }
        if (this.parent.allowPaging && !this.parent.pagerModule.pagerObj.checkPagerHasFocus() && this.allowToPaging(e) && bValue.toString() !== [0, 0].toString()) {
          e.preventDefault();
          if (e.keyCode === 40) {
            this.parent.pagerModule.pagerObj.setPagerContainerFocus();
            return;
          } else if (e.keyCode === 9) {
            this.parent.pagerModule.pagerObj.setPagerFocus();
            return;
          }
        }
        if (this.parent.element.classList.contains("e-childgrid")) {
          this.focusOutFromChildGrid(e);
        }
        return;
      }
      this.header.action = e.action;
      this.header.currentTarget = null;
      this.header.focusType = "key";
      if (e.target && parentsUntil(e.target, "e-fltrtemp") && (e.action === "tab" || e.action === "shiftTab")) {
        var target = e.target;
        var focusElement = [].slice.call(closest(target, "th").querySelectorAll(".e-fltrtemp-focus"));
        if (focusElement.length) {
          var elementIndex = focusElement.indexOf(target);
          var resetActive = e.action === "tab" && elementIndex < focusElement.length - 1 || e.action === "shiftTab" && elementIndex > 0 ? true : false;
          if (resetActive) {
            this.setActive(false);
            this.active.matrix.current = bValue;
            this.active.currentTarget = target;
          }
        }
      }
      if (focusFirstHeaderCell && parentsUntil(this.active.getTable(), "e-gridheader") && e.target && e.target.id === this.parent.element.id + "_searchbar") {
        this.parent.searchModule.headerFocus = true;
      }
      e.preventDefault();
      this.focus(e);
    };
    FocusStrategy2.prototype.isValidBatchEditCell = function(cellIndex) {
      var cell = this.active.getTable().rows[cellIndex[0]].cells[cellIndex[1]];
      var tr = closest(cell, "tr");
      var cellColIndex = parseInt(cell.getAttribute("aria-colindex"), 10) - 1;
      var cellCol = this.parent.getColumns()[parseInt(cellColIndex.toString(), 10)];
      if (this.active.matrix.matrix[cellIndex[0]][cellIndex[1]] === 1 && (!tr.classList.contains("e-row") || (tr.classList.contains("e-insertedrow") || !cellCol.isPrimaryKey) && cellCol.allowEditing)) {
        return true;
      }
      return false;
    };
    FocusStrategy2.prototype.findBatchEditCell = function(currentCellIndex, next, limitRow) {
      var cellIndex = currentCellIndex;
      var tempCellIndex = currentCellIndex;
      var cellIndexObtain = false;
      while (!cellIndexObtain) {
        var prevTempCellIndex = tempCellIndex;
        tempCellIndex = findCellIndex(this.active.matrix.matrix, tempCellIndex, next);
        var tempCell = getValue(tempCellIndex[0] + ".cells." + tempCellIndex[1], this.active.getTable().rows);
        if (tempCell && tempCell.getBoundingClientRect().width === 0) {
          tempCellIndex = this.active.matrix.nextVisibleCellFocus(tempCellIndex[0], tempCellIndex[1], this.activeKey, this.active.keyActions[this.activeKey], this.active, this.active.matrix.current[1]);
        }
        if (prevTempCellIndex.toString() === tempCellIndex.toString() || limitRow && prevTempCellIndex[0] !== tempCellIndex[0]) {
          cellIndexObtain = true;
          continue;
        }
        if (this.isValidBatchEditCell(tempCellIndex)) {
          cellIndex = tempCellIndex;
          cellIndexObtain = true;
        }
      }
      return cellIndex;
    };
    FocusStrategy2.prototype.setLastContentCellActive = function() {
      var lastContentCellIndex = [
        this.active.matrix.matrix.length - 1,
        this.active.matrix.matrix[this.active.matrix.matrix.length - 1].length - 1
      ];
      if (this.active.matrix.matrix[lastContentCellIndex[0]][lastContentCellIndex[1]] === 0) {
        lastContentCellIndex = findCellIndex(this.active.matrix.matrix, lastContentCellIndex, false);
      }
      var lastCell = getValue(lastContentCellIndex[0] + ".cells." + lastContentCellIndex[1], this.active.matrix.getRowsFromIndex(lastContentCellIndex[0], this.active));
      if (lastCell && lastCell.getBoundingClientRect().width === 0) {
        lastContentCellIndex = this.active.matrix.nextVisibleCellFocus(lastContentCellIndex[0], lastContentCellIndex[1], this.activeKey, this.active.keyActions[this.activeKey], this.active, this.active.matrix.current[1]);
      }
      this.active.matrix.current = lastContentCellIndex;
    };
    FocusStrategy2.prototype.focusOutFromChildGrid = function(e) {
      var parentTable = parentsUntil(this.parent.element, "e-table");
      var parentGrid = parentsUntil(parentTable, "e-grid").ej2_instances[0];
      var parentCell = parentsUntil(this.parent.element, "e-detailcell");
      var uid2 = parentsUntil(this.parent.element, "e-detailrow").getAttribute("data-uid");
      var parentRows = [].slice.call(parentGrid.getContentTable().rows);
      var parentRowIndex = parentRows.map(function(m) {
        return m.getAttribute("data-uid");
      }).indexOf(uid2);
      if (e.action === "tab" && parentRowIndex >= parentRows.length - 1) {
        return;
      }
      removeClass([this.parent.element], ["e-focus"]);
      removeClass([parentCell], ["e-focused"]);
      parentCell.tabIndex = -1;
      e.preventDefault();
      var nextFocusCell;
      parentGrid.focusModule.removeFocus();
      if (e.action === "shiftTab") {
        var previousRow = parentRows[parentRowIndex - 1];
        var rowCells = previousRow.cells;
        for (var i = rowCells.length - 1; i >= 0; i--) {
          nextFocusCell = rowCells[parseInt(i.toString(), 10)];
          if (!nextFocusCell.classList.contains("e-hide")) {
            parentGrid.focusModule.active.matrix.current = [parentRowIndex - 1, i];
            break;
          }
        }
      } else {
        nextFocusCell = parentRows[parentRowIndex + 1].cells[0];
        parentGrid.focusModule.active.matrix.current = [parentRowIndex + 1, 0];
      }
      parentGrid.focusModule.currentInfo.element = nextFocusCell;
      parentGrid.focusModule.currentInfo.elementToFocus = nextFocusCell;
      addClass([nextFocusCell], ["e-focused", "e-focus"]);
      nextFocusCell.tabIndex = 0;
      nextFocusCell.focus();
    };
    FocusStrategy2.prototype.focusOutFromHeader = function(e) {
      this.removeFocus();
      if (this.parent.toolbar || this.parent.toolbarTemplate) {
        var toolbarElement = this.parent.toolbarModule.element;
        var focusableToolbarItems = this.parent.toolbarModule.getFocusableToolbarItems();
        e.preventDefault();
        if (focusableToolbarItems.length > 0) {
          focusableToolbarItems[focusableToolbarItems.length - 1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();
        } else {
          toolbarElement.focus();
        }
        return;
      }
      if (this.parent.allowGrouping && this.parent.groupSettings.showDropArea) {
        var groupModule = this.parent.groupModule;
        var focusableGroupedItems = groupModule.getFocusableGroupedItems();
        e.preventDefault();
        if (focusableGroupedItems.length > 0) {
          focusableGroupedItems[focusableGroupedItems.length - 1].focus();
        } else {
          groupModule.element.focus();
        }
        return;
      }
      if (this.parent.element.classList.contains("e-childgrid")) {
        e.preventDefault();
        this.parent.element.focus();
      }
    };
    FocusStrategy2.prototype.allowToPaging = function(e) {
      if (this.parent.editSettings.mode === "Batch" && this.parent.editSettings.allowAdding && e.keyCode !== 40) {
        return false;
      }
      return true;
    };
    FocusStrategy2.prototype.skipOn = function(e) {
      var target = e.target;
      if (!target) {
        return false;
      }
      if (!this.parent.isEdit && target && target.closest(".e-unboundcell") && this.currentInfo.skipAction && (e.action === "shiftTab" && this.commandColumnFocusElement(target.closest(".e-unboundcell"), false) === target || e.action === "tab" && this.commandColumnFocusElement(target.closest(".e-unboundcell"), true) === target)) {
        return this.currentInfo.skipAction = false;
      }
      if (this.currentInfo.skipAction) {
        this.clearIndicator();
        return true;
      }
      if (["pageUp", "pageDown", "altDownArrow"].indexOf(e.action) > -1) {
        this.clearIndicator();
        return true;
      }
      if (this.parent.allowGrouping) {
        var focusableGroupedItems = this.parent.groupModule.getFocusableGroupedItems();
        if (parentsUntil(e.target, "e-groupheadercell") && !(e.target === focusableGroupedItems[0] && e.action === "shiftTab" || e.target === focusableGroupedItems[focusableGroupedItems.length - 1] && e.action === "tab")) {
          return true;
        }
      }
      if (this.parent.toolbar || this.parent.toolbarTemplate) {
        var toolbarElement = this.parent.toolbarModule.element;
        var focusableToolbarItems = toolbarElement.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");
        if (parentsUntil(e.target, "e-toolbar-item") && !(focusableToolbarItems.length > 0 && (parentsUntil(e.target, "e-toolbar-item") === focusableToolbarItems[0] && e.action === "shiftTab" || parentsUntil(e.target, "e-toolbar-item") === focusableToolbarItems[focusableToolbarItems.length - 1] && e.action === "tab"))) {
          return true;
        }
      }
      var th = closest(target, "th") && !closest(target, "th").tabIndex;
      if (e.target.classList.contains("e-filterbaroperator") && (e.keyCode === 13 || e.keyCode === 27)) {
        var inputTarget = closest(e.target, ".e-filterbarcell");
        inputTarget.querySelector("input").focus();
      }
      var addNewRow = this.parent.editSettings.showAddNewRow && closest(document.activeElement, ".e-addedrow") !== null;
      if (th && closest(document.activeElement, ".e-filterbarcell") !== null || addNewRow) {
        this.removeFocus();
      }
      var filterCell = closest(document.activeElement, ".e-filterbarcell") !== null;
      if (this.parent.enableHeaderFocus && filterCell) {
        var matrix = this.active.matrix;
        var current = matrix.current;
        filterCell = matrix.matrix[current[0]].lastIndexOf(1) !== current[1];
      }
      if (this.parent.isEdit && (e.action === "tab" || e.action === "shiftTab") && this.parent.editSettings.mode === "Normal" && !this.parent.editSettings.showAddNewRow && !isNullOrUndefined(parentsUntil(target, "e-addedrow"))) {
        var inputElements = this.parent.editModule.formObj.element.querySelectorAll('input:not([type="hidden"],.e-numeric-hidden,.e-disabled), select:not([aria-hidden="true"]), button:not(.e-hide), textarea:not(.e-hide,.e-disabled,[disabled])');
        var inputTarget = target.classList.contains("e-ddl") ? target.querySelector("input") : target;
        var firstEditCell = e.action === "tab" && inputTarget === inputElements[inputElements.length - 1];
        var lastEditCell = e.action === "shiftTab" && inputTarget === inputElements[0];
        if (firstEditCell || lastEditCell) {
          e.preventDefault();
          var focusElement = inputElements[firstEditCell ? 0 : inputElements.length - 1];
          focusElement = focusElement.parentElement.classList.contains("e-ddl") ? focusElement.parentElement : focusElement;
          focusElement.focus();
        }
      }
      return e.action === "delete" || this.parent.editSettings.mode !== "Batch" && (this.parent.isEdit && (!this.parent.editSettings.showAddNewRow || this.parent.editSettings.showAddNewRow && (!isNullOrUndefined(this.parent.element.querySelector(".e-editedrow")) || !isNullOrUndefined(parentsUntil(target, "e-addedrow")) && !isNullOrUndefined(closest(e.target, "input")) && !isNullOrUndefined(document.querySelector(".e-popup-open")) || !isNullOrUndefined(parentsUntil(target, "e-addedrow")) && (target && !target.querySelector(".e-cancel-icon")) && !isNullOrUndefined(parentsUntil(target, "e-unboundcell")))) || ["insert", "f2"].indexOf(e.action) > -1) || (filterCell && this.parent.enableHeaderFocus || (filterCell || addNewRow) && e.action !== "tab" && e.action !== "shiftTab" || closest(document.activeElement, "#" + this.parent.element.id + "_searchbar") !== null && [
        "enter",
        "leftArrow",
        "rightArrow",
        "shiftLeft",
        "shiftRight",
        "ctrlPlusA"
      ].indexOf(e.action) > -1) || closest(target, "." + gridContent) === null && closest(target, "." + gridHeader) === null && !(e.target === this.parent.element || parentsUntil(e.target, "e-toolbar") || parentsUntil(e.target, "e-groupdroparea")) || e.action === "space" && (!target.classList.contains(gridChkBox) && closest(target, "." + gridChkBox) === null && closest(target, ".e-headerchkcelldiv") === null) || closest(target, ".e-filter-popup") !== null;
    };
    FocusStrategy2.prototype.focusVirtualElement = function(e) {
      var _this = this;
      if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) {
        var data = { virtualData: {}, isAdd: false, isCancel: false };
        this.parent.notify(getVirtualData, data);
        var isKeyFocus = this.actions.some(function(value) {
          return value === _this.activeKey;
        });
        var isSelected = this.parent.contentModule ? this.parent.contentModule.selectedRowIndex > -1 : false;
        if (data.isAdd || Object.keys(data.virtualData).length || isKeyFocus || data.isCancel || isSelected) {
          this.parent.notify(resetVirtualFocus, { isCancel: false });
          data.isCancel = false;
          if (this.parent.enableVirtualization && !this.parent.selectVirtualRowOnAdd && (!e || e && e.action !== "ctrlHome" && e.action !== "ctrlEnd") || !this.parent.enableVirtualization) {
            this.parent.contentModule.selectedRowIndex = -1;
          }
          this.parent.selectVirtualRowOnAdd = false;
          if (isKeyFocus) {
            this.activeKey = this.empty;
            this.parent.notify("virtaul-key-handler", e);
          }
          this.currentInfo.elementToFocus.focus({ preventScroll: true });
        } else {
          if (this.isVirtualScroll || this.isInfiniteScroll) {
            this.currentInfo.elementToFocus.focus({ preventScroll: true });
          } else {
            this.currentInfo.elementToFocus.focus();
          }
        }
      }
      this.isVirtualScroll = this.isInfiniteScroll = false;
    };
    FocusStrategy2.prototype.getFocusedElement = function() {
      return this.currentInfo.elementToFocus;
    };
    FocusStrategy2.prototype.getContent = function() {
      return this.active || this.content;
    };
    FocusStrategy2.prototype.setActive = function(content2) {
      this.active = content2 ? this.content : this.header;
    };
    FocusStrategy2.prototype.setFocusedElement = function(element2, e) {
      var _this = this;
      this.currentInfo.elementToFocus = element2;
      setTimeout(function() {
        if (!isNullOrUndefined(_this.currentInfo.elementToFocus)) {
          var filterMenuElement = isNullOrUndefined(_this.parent.element.querySelector(".e-flmenu")) ? document.querySelector(".e-grid-popup .e-flmenu") : _this.parent.element.querySelector(".e-flmenu");
          if ((_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling) && isNullOrUndefined(filterMenuElement)) {
            _this.focusVirtualElement(e);
          } else if (isNullOrUndefined(filterMenuElement) || parentsUntil(document.activeElement, "e-flmenu-valuediv") !== filterMenuElement.querySelector(".e-flmenu-valuediv")) {
            _this.currentInfo.elementToFocus.focus();
          }
        }
      }, 0);
    };
    FocusStrategy2.prototype.focus = function(e) {
      this.parent.notify(virtaulCellFocus, e);
      this.removeFocus();
      this.addFocus(this.getContent().getFocusInfo(), e);
    };
    FocusStrategy2.prototype.removeFocus = function(e) {
      if (!this.currentInfo.element) {
        return;
      }
      if (this.parent.isReact && !this.parent.isEdit && this.currentInfo.element.classList.contains("e-rowcell") && !this.currentInfo.element.parentElement && !(this.parent.allowGrouping && !isNullOrUndefined(this.parent.groupSettings.columns) && this.parent.groupSettings.columns.length) && this.parent.getRowByIndex(this.prevIndexes.rowIndex)) {
        var cellElem = this.parent.getCellFromIndex(this.prevIndexes.rowIndex, this.prevIndexes.cellIndex);
        this.currentInfo.element = cellElem ? cellElem : this.currentInfo.element;
      }
      removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ["e-focused", "e-focus"]);
      this.currentInfo.element.tabIndex = -1;
    };
    FocusStrategy2.prototype.addOutline = function() {
      var info = this.getContent().getFocusInfo();
      if (info.element) {
        addClass([info.element], ["e-focused"]);
        addClass([info.elementToFocus], ["e-focus"]);
      }
    };
    FocusStrategy2.prototype.focusHeader = function() {
      this.setActive(false);
      this.resetFocus();
    };
    FocusStrategy2.prototype.focusContent = function() {
      this.setActive(true);
      this.resetFocus();
    };
    FocusStrategy2.prototype.resetFocus = function() {
      var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());
      this.getContent().matrix.select(current[0], current[1]);
      this.focus();
    };
    FocusStrategy2.prototype.addFocus = function(info, e) {
      this.currentInfo = info;
      this.currentInfo.outline = info.outline && (!isNullOrUndefined(e) || this.isVirtualScroll);
      if (this.isInfiniteScroll) {
        this.currentInfo.outline = true;
      }
      if (!info.element) {
        return;
      }
      var isFocused = info.elementToFocus.classList.contains("e-focus");
      if (isFocused) {
        return;
      }
      if (this.currentInfo.outline) {
        addClass([info.element], ["e-focused"]);
      }
      addClass([info.elementToFocus], ["e-focus"]);
      info.element.tabIndex = 0;
      if (!isFocused) {
        this.setFocusedElement(info.elementToFocus, e);
      }
      this.parent.notify(cellFocused, {
        element: info.elementToFocus,
        parent: info.element,
        indexes: this.getContent().matrix.current,
        byKey: !isNullOrUndefined(e),
        byClick: isNullOrUndefined(e),
        keyArgs: e,
        isJump: this.swap.swap,
        container: this.getContent().getInfo(e),
        outline: !isNullOrUndefined(e),
        swapInfo: this.swap
      });
      var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];
      this.prevIndexes = { rowIndex, cellIndex };
      this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;
      this.focusByClick = false;
    };
    FocusStrategy2.prototype.refreshMatrix = function(content2) {
      var _this = this;
      return function(e) {
        if (content2 && !_this.content) {
          _this.content = new ContentFocus(_this.parent);
        }
        if (!content2 && !_this.header) {
          _this.header = new HeaderFocus(_this.parent);
        }
        var cFocus = content2 ? _this.content : _this.header;
        var frozenRow = _this.parent.frozenRows;
        var batchLen = 0;
        if (frozenRow && _this.parent.editSettings.mode === "Batch") {
          batchLen = _this.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length + _this.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length;
        }
        if (!isNullOrUndefined(_this.parent.groupSettings.columns) && _this.parent.groupSettings.columns.length && frozenRow && content2) {
          frozenRow = 0;
          for (var i = 0; i < e.rows.length; i++) {
            frozenRow++;
            if (e.rows[parseInt(i.toString(), 10)].index + 1 === _this.parent.frozenRows) {
              break;
            }
          }
          _this.groupedFrozenRow = frozenRow;
        }
        var rows = content2 ? e.rows.slice(frozenRow + batchLen) : e.rows;
        var updateRow = content2 ? e.rows.slice(0, frozenRow + batchLen) : e.rows;
        if (_this.parent.isCollapseStateEnabled() && content2) {
          rows = rows.filter(function(x) {
            return x.visible !== false;
          });
        }
        var isRowTemplate = !isNullOrUndefined(_this.parent.rowTemplate);
        if (frozenRow && (_this.parent.editSettings.mode === "Batch" && content2 && (e.name === "batchDelete" || e.name === "batchAdd" || e.name === "batchCancel" || e.args && e.args.requestType === "batchsave") || e.args && (e.args.requestType === "delete" || e.args.requestType === "save"))) {
          var matrixcs = _this.header.matrix.matrix;
          var hdrLen = _this.parent.headerModule.rows.length;
          matrixcs.splice(hdrLen, matrixcs.length - hdrLen);
        }
        var matrix = cFocus.matrix.generate(updateRow, cFocus.selector, isRowTemplate);
        cFocus.matrix.generate(rows, cFocus.selector, isRowTemplate);
        var isScroll = _this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling;
        if (_this.parent.editSettings.showAddNewRow && content2 && _this.header && _this.header.matrix && (!isScroll || isScroll && _this.parent.isAddNewRow)) {
          var tempMatrix = _this.header.matrix.matrix;
          var lastRowHeaderIdx = _this.parent.allowFiltering && _this.parent.filterSettings.type === "FilterBar" ? 2 : 1;
          cFocus.matrix.rows = _this.parent.frozenRows && _this.parent.editSettings.newRowPosition === "Top" ? cFocus.matrix.rows : ++cFocus.matrix.rows;
          if (_this.parent.editSettings.newRowPosition === "Top") {
            (_this.parent.frozenRows || isScroll ? matrix : cFocus.matrix.matrix).unshift(_this.refreshAddNewRowMatrix(tempMatrix[tempMatrix.length - lastRowHeaderIdx]));
          } else {
            cFocus.matrix.matrix.push(_this.refreshAddNewRowMatrix(tempMatrix[tempMatrix.length - lastRowHeaderIdx]));
          }
          _this.parent.isAddNewRow = false;
        }
        if (!(_this.parent.isFrozenGrid() && (e.args && (e.args.requestType === "sorting" || e.args.requestType === "batchsave" || e.args.requestType === "paging"))) || frozenRow && _this.parent.editSettings.mode === "Batch" && content2 && (e.name === "batchDelete" || e.name === "batchAdd" || e.name === "batchCancel" || e.args.requestType === "batchsave")) {
          cFocus.generateRows(updateRow, {
            matrix,
            handlerInstance: _this.header
          });
        }
        if (!Browser.isDevice && e && e.args) {
          if (!_this.focusByClick && e.args.requestType === "paging" && !_this.parent.pagerModule.pagerObj.checkPagerHasFocus()) {
            _this.skipFocus = false;
            _this.parent.element.focus();
          }
          if (e.args.requestType === "grouping") {
            _this.skipFocus = true;
          }
        }
        if (e && e.args && e.args.requestType === "virtualscroll") {
          if (_this.currentInfo.uid) {
            var index_1;
            var bool = e.rows.some(function(row2, i2) {
              index_1 = i2;
              return row2.uid === _this.currentInfo.uid;
            });
            if (bool) {
              _this.content.matrix.current[0] = index_1;
              _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;
              var frzLeftCount = _this.parent.getVisibleFrozenLeftCount();
              var frzRightCount = _this.parent.getVisibleFrozenRightCount();
              if (_this.parent.enableColumnVirtualization && !(frzLeftCount && frzRightCount) && _this.parent.isFrozenGrid() && e.args.virtualInfo.direction === "right") {
                _this.content.matrix.current[1] = _this.content.matrix.current[1] - (frzLeftCount + (frzRightCount ? frzRightCount + 1 : 0));
              }
              var isGroup = _this.parent.allowGrouping && _this.parent.groupSettings.columns.length ? true : false;
              if (isGroup) {
                _this.content.matrix.current[1] = _this.prevIndexes.cellIndex;
                if (_this.virtualSelectionInfo.isPending) {
                  _this.content.matrix.current[0] = _this.virtualSelectionInfo.direction === "downArrow" ? _this.content.matrix.current[0] + 1 : _this.content.matrix.current[0] - 1;
                }
              }
              var focusElement = _this.getContent().getFocusInfo().elementToFocus;
              if (focusElement) {
                var cellPosition = focusElement.getBoundingClientRect();
                var gridPosition = _this.parent.element.getBoundingClientRect();
                var freezeLeftColWidth = 0;
                var freezeRightColWidth = 0;
                if (_this.parent.enableColumnVirtualization && !(frzLeftCount && frzRightCount) && _this.parent.isFrozenGrid() && e.args.virtualInfo.direction === "right") {
                  if (frzLeftCount) {
                    freezeLeftColWidth = _this.parent.leftrightColumnWidth("left");
                  } else {
                    freezeRightColWidth = _this.parent.leftrightColumnWidth("right");
                  }
                }
                if (cellPosition.top >= 0 && cellPosition.left >= 0 && cellPosition.right - freezeLeftColWidth - freezeRightColWidth <= Math.min(gridPosition.right, window.innerWidth || document.documentElement.clientWidth) + freezeRightColWidth && cellPosition.bottom <= Math.min(gridPosition.bottom, window.innerHeight || document.documentElement.clientHeight) || isGroup) {
                  _this.isVirtualScroll = true;
                  _this.focus(isGroup && _this.virtualSelectionInfo.isPending ? _this.virtualSelectionInfo.event : void 0);
                }
              }
            }
          } else if (e.args.focusElement && e.args.focusElement.classList.contains("e-filtertext")) {
            var focusElement = _this.parent.element.querySelector("#" + e.args.focusElement.id);
            if (focusElement) {
              focusElement.focus();
            }
          }
          _this.virtualSelectionInfo = {};
        }
        if (e && e.args && e.args.requestType === "infiniteScroll") {
          _this.isInfiniteScroll = true;
        }
      };
    };
    FocusStrategy2.prototype.refreshAddNewRowMatrix = function(matrix) {
      var cols = this.parent.getColumns();
      var indent = this.parent.getIndentCount();
      for (var i = indent; i < matrix.length - 1; i++) {
        if (cols[i - indent] && cols[i - indent].visible && cols[i - indent].allowEditing) {
          matrix[parseInt(i.toString(), 10)] = 1;
        } else {
          matrix[parseInt(i.toString(), 10)] = 0;
        }
      }
      return matrix;
    };
    FocusStrategy2.prototype.addEventListener = function() {
      var _this = this;
      if (this.parent.isDestroyed) {
        return;
      }
      EventHandler.add(this.parent.element, "mousedown", this.focusCheck, this);
      EventHandler.add(this.parent.element, "touchstart", this.focusCheck, this);
      EventHandler.add(this.parent.element, "focus", this.onFocus, this);
      this.parent.element.addEventListener("focus", this.passiveHandler = function(e) {
        return _this.passiveFocus(e);
      }, true);
      EventHandler.add(this.parent.element, "focusout", this.onBlur, this);
      this.evtHandlers = [
        { event: keyPressed, handler: this.onKeyPress },
        { event: click, handler: this.onClick },
        { event: contentReady, handler: this.refMatrix },
        { event: partialRefresh, handler: this.refMatrix },
        { event: refreshExpandandCollapse, handler: this.refMatrix },
        { event: showAddNewRowFocus, handler: this.showAddNewRowFocus },
        { event: headerRefreshed, handler: this.refreshMatrix() },
        { event: closeEdit, handler: this.restoreFocus },
        { event: restoreFocus, handler: this.restoreFocus },
        { event: "start-edit", handler: this.clearIndicator },
        { event: "start-add", handler: this.clearIndicator },
        { event: "sorting-complete", handler: this.restoreFocus },
        { event: "filtering-complete", handler: this.filterfocus },
        { event: "custom-filter-close", handler: this.filterfocus },
        { event: "grouping-complete", handler: this.restoreFocusWithAction },
        { event: "ungrouping-complete", handler: this.restoreFocusWithAction },
        { event: batchAdd, handler: this.refMatrix },
        { event: batchCancel, handler: this.refMatrix },
        { event: batchDelete, handler: this.refMatrix },
        { event: detailDataBound, handler: this.refMatrix },
        { event: onEmpty, handler: this.refMatrix },
        { event: cellFocused, handler: this.internalCellFocus }
      ];
      addRemoveEventListener(this.parent, this.evtHandlers, true, this);
    };
    FocusStrategy2.prototype.showAddNewRowFocus = function() {
      if (this.parent.editSettings.showAddNewRow) {
        var startIdx = this.parent.editSettings.newRowPosition === "Top" ? 0 : this.content.matrix.matrix.length - 1;
        var startCellIdx = this.parent.getIndentCount();
        if (this.parent.editSettings.newRowPosition === "Top" && (this.parent.frozenRows || this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {
          var headrIdx = this.header.matrix.matrix.length - (this.groupedFrozenRow ? this.groupedFrozenRow : this.parent.frozenRows);
          startCellIdx = this.findNextCellFocus(this.header.matrix.matrix[headrIdx - 1], startCellIdx);
          this.header.matrix.current = [headrIdx - 1, startCellIdx];
          this.active = this.header;
        } else {
          startCellIdx = this.findNextCellFocus(this.content.matrix.matrix[parseInt(startIdx.toString(), 10)], startCellIdx);
          this.content.matrix.current = [startIdx, startCellIdx];
          this.active = this.content;
        }
        var addedrow = this.parent.element.querySelector(".e-addedrow");
        if (addedrow && addedrow.querySelectorAll("tr") && addedrow.querySelector("tr").cells[parseInt(startCellIdx.toString(), 10)].querySelector("input")) {
          addedrow.querySelector("tr").cells[parseInt(startCellIdx.toString(), 10)].querySelector("input").select();
        }
      }
    };
    FocusStrategy2.prototype.findNextCellFocus = function(matrix, cellIndex) {
      for (var i = cellIndex; i < matrix.length; i++) {
        if (matrix[parseInt(i.toString(), 10)] === 1) {
          return i;
        }
      }
      return cellIndex;
    };
    FocusStrategy2.prototype.filterfocus = function() {
      if (this.parent.filterSettings.type !== "FilterBar") {
        this.removeFocus();
        this.restoreFocus();
      }
    };
    FocusStrategy2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      EventHandler.remove(this.parent.element, "mousedown", this.focusCheck);
      EventHandler.remove(this.parent.element, "touchstart", this.focusCheck);
      EventHandler.remove(this.parent.element, "focus", this.onFocus);
      EventHandler.remove(this.parent.element, "focusout", this.onBlur);
      this.parent.element.removeEventListener("focus", this.passiveHandler, true);
      addRemoveEventListener(this.parent, this.evtHandlers, false);
    };
    FocusStrategy2.prototype.destroy = function() {
      this.removeEventListener();
    };
    FocusStrategy2.prototype.restoreFocus = function(arg) {
      if (arg && arg.requestType === "sorting" && isNullOrUndefined(arg.target)) {
        return;
      }
      var groupModule = this.parent.groupModule;
      if (this.parent.allowGrouping && groupModule && (groupModule.groupSortFocus || groupModule.groupTextFocus)) {
        groupModule.groupSortFocus = false;
        groupModule.groupTextFocus = false;
        return;
      }
      this.firstHeaderCellClick = true;
      this.addFocus(this.getContent().getFocusInfo());
      var requestTypes = ["add", "save", "delete", "cancel", "batchsave", "batchDelete", "batchCancel"];
      var focusInfo = this.getContent().getFocusInfo();
      if (arg && requestTypes.indexOf(arg.requestType) > -1 && focusInfo && focusInfo.elementToFocus && focusInfo.elementToFocus.matches(".e-rowcell.e-focus")) {
        addClass([focusInfo.elementToFocus], ["e-focused", "e-focus"]);
      }
    };
    FocusStrategy2.prototype.restoreFocusWithAction = function(e) {
      if (!this.parent.enableInfiniteScrolling && !(this.parent.groupModule && this.parent.groupModule.preventFocusOnGroup)) {
        var matrix = this.getContent().matrix;
        var current = matrix.current;
        switch (e.requestType) {
          case "grouping":
          case "ungrouping":
            current[1] = current.length && !this.parent.groupSettings.showGroupedColumn && !isNullOrUndefined(matrix.matrix[current[0]]) ? matrix.matrix[current[0]].indexOf(1) : e.requestType === "grouping" ? current[1] + 1 : current[1] - 1;
            break;
        }
        this.getContent().matrix.current = current;
        this.prevIndexes = { rowIndex: current[0], cellIndex: current[1] };
        var groupModule = this.parent.groupModule;
        if (this.parent.allowGrouping && groupModule && groupModule.groupCancelFocus) {
          var focusableGroupedItems = groupModule.getFocusableGroupedItems();
          if (focusableGroupedItems.length) {
            if (focusableGroupedItems[0].parentElement.getAttribute("ej-mappingname") === e.columnName) {
              focusableGroupedItems[3].focus();
            } else {
              focusableGroupedItems[0].focus();
            }
          } else {
            groupModule.element.focus();
          }
          groupModule.groupCancelFocus = false;
          return;
        }
        this.addFocus(this.getContent().getFocusInfo());
      }
    };
    FocusStrategy2.prototype.clearIndicator = function() {
      if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {
        return;
      }
      removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ["e-focus", "e-focused"]);
    };
    FocusStrategy2.prototype.getPrevIndexes = function() {
      var forget = this.forget;
      this.forget = false;
      return forget || !Object.keys(this.prevIndexes).length ? { rowIndex: null, cellIndex: null } : this.prevIndexes;
    };
    FocusStrategy2.prototype.forgetPrevious = function() {
      this.forget = true;
    };
    FocusStrategy2.prototype.setActiveByKey = function(action, active) {
      if (this.parent.frozenRows === 0) {
        return;
      }
      var info;
      var actions = {
        "home": function() {
          return { toHeader: !info.isContent, toFrozen: true };
        },
        "end": function() {
          return { toHeader: !info.isContent, toFrozen: false };
        },
        "ctrlHome": function() {
          return { toHeader: true, toFrozen: false };
        },
        "ctrlEnd": function() {
          return { toHeader: false, toFrozen: false };
        }
      };
      if (!(action in actions)) {
        return;
      }
      info = active.getInfo();
      var swap = actions["" + action]();
      this.setActive(!swap.toHeader);
      this.getContent().matrix.current = active.matrix.current;
    };
    FocusStrategy2.prototype.internalCellFocus = function(e) {
      if (!(e.byKey && e.container.isContent && (e.keyArgs.action === "enter" && e.parent.classList.contains("e-detailcell") || (e.keyArgs.action === "tab" || e.keyArgs.action === "shiftTab") && e.parent.classList.contains("e-unboundcell")))) {
        return;
      }
      this.clearIndicator();
      var focusEle;
      if (e.parent && e.parent.closest(".e-unboundcell") && e.keyArgs.action === "shiftTab") {
        focusEle = this.commandColumnFocusElement(e.parent, true);
      } else {
        focusEle = this.getContent().getFocusable(this.getFocusedElement());
      }
      this.setFocusedElement(focusEle);
      this.currentInfo.skipAction = true;
    };
    FocusStrategy2.prototype.commandColumnFocusElement = function(cell, isLast) {
      var commandButtons = cell.querySelectorAll("button:not(.e-hide)");
      return isLast ? commandButtons[commandButtons.length - 1] : commandButtons[0];
    };
    return FocusStrategy2;
  }()
);
var Matrix = (
  /** @class */
  function() {
    function Matrix2() {
      this.matrix = [];
      this.current = [];
    }
    Matrix2.prototype.set = function(rowIndex, columnIndex, allow) {
      rowIndex = Math.max(0, Math.min(rowIndex, this.rows));
      columnIndex = Math.max(0, Math.min(columnIndex, this.columns));
      this.matrix[parseInt(rowIndex.toString(), 10)] = this.matrix[parseInt(rowIndex.toString(), 10)] || [];
      this.matrix[parseInt(rowIndex.toString(), 10)][parseInt(columnIndex.toString(), 10)] = allow ? 1 : 0;
    };
    Matrix2.prototype.get = function(rowIndex, columnIndex, navigator2, action, validator, active) {
      var tmp = columnIndex;
      if (rowIndex + navigator2[0] < 0) {
        return [rowIndex, columnIndex];
      }
      rowIndex = Math.max(0, Math.min(rowIndex + navigator2[0], this.rows));
      var emptyTable = true;
      if (isNullOrUndefined(this.matrix[parseInt(rowIndex.toString(), 10)])) {
        return null;
      }
      columnIndex = Math.max(0, Math.min(columnIndex + navigator2[1], this.matrix[parseInt(rowIndex.toString(), 10)].length - 1));
      if (tmp + navigator2[1] > this.matrix[parseInt(rowIndex.toString(), 10)].length - 1 && validator(rowIndex, columnIndex, action)) {
        return [rowIndex, tmp];
      }
      var first = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
      columnIndex = first === null ? tmp : first;
      var val = getValue(rowIndex + "." + columnIndex, this.matrix);
      if (rowIndex === this.rows && (action === "downArrow" || action === "enter")) {
        navigator2[0] = -1;
      }
      var cell;
      if (active) {
        var rows = this.getRowsFromIndex(rowIndex, active);
        cell = getValue(rowIndex + ".cells." + columnIndex, rows);
      }
      if (cell && cell.getBoundingClientRect().width === 0) {
        var current = this.nextVisibleCellFocus(rowIndex, columnIndex, action, navigator2, active, tmp);
        rowIndex = current[0];
        columnIndex = current[1];
      }
      if (first === null) {
        for (var i = 0; i < this.rows; i++) {
          if (this.matrix[parseInt(i.toString(), 10)].some(function(v) {
            return v === 1;
          })) {
            emptyTable = false;
            break;
          }
        }
        if (emptyTable) {
          rowIndex = this.current.length ? this.current[0] : 0;
          return [rowIndex, columnIndex];
        }
      }
      return this.inValid(val) || !validator(rowIndex, columnIndex, action) ? this.get(rowIndex, tmp, navigator2, action, validator) : [rowIndex, columnIndex];
    };
    Matrix2.prototype.getRowsFromIndex = function(rowIndex, active) {
      return active.getTable().rows[parseInt(rowIndex.toString(), 10)].classList.contains("e-addedrow") ? active.getTable().rows[parseInt(rowIndex.toString(), 10)].querySelector("table").rows : active.getTable().rows;
    };
    Matrix2.prototype.nextVisibleCellFocus = function(rowIndex, columnIndex, action, navigator2, active, tmp) {
      var rows = this.getRowsFromIndex(rowIndex, active);
      var cell = getValue(rowIndex + ".cells." + columnIndex, rows);
      var rowMatrix = active.matrix.matrix;
      var maxRow = rowMatrix.length - 1;
      var isTab = action === "tab";
      var isShiftTab = action === "shiftTab";
      var skipAction = action === "enter" || action === "shiftEnter" || action === "downArrow" || action === "upArrow";
      if (skipAction) {
        return [rowIndex, columnIndex];
      }
      while (cell && cell.getBoundingClientRect().width === 0) {
        if (isTab && rowIndex === maxRow && columnIndex === rowMatrix[parseInt(rowIndex.toString(), 10)].lastIndexOf(1) || isShiftTab && rowIndex === 0 && columnIndex === rowMatrix[parseInt(rowIndex.toString(), 10)].indexOf(1)) {
          columnIndex = tmp;
          return [rowIndex, columnIndex];
        }
        if (isTab) {
          if (columnIndex === rowMatrix[parseInt(rowIndex.toString(), 10)].lastIndexOf(1)) {
            rowIndex++;
            columnIndex = rowMatrix[parseInt(rowIndex.toString(), 10)].indexOf(1);
            columnIndex = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
            rows = this.getRowsFromIndex(rowIndex, active);
          } else {
            columnIndex++;
            columnIndex = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
          }
        } else if (isShiftTab) {
          if (columnIndex === rowMatrix[parseInt(rowIndex.toString(), 10)].indexOf(1)) {
            rowIndex--;
            columnIndex = rowMatrix[parseInt(rowIndex.toString(), 10)].lastIndexOf(1);
            columnIndex = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
            rows = this.getRowsFromIndex(rowIndex, active);
          } else {
            columnIndex--;
            columnIndex = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
          }
        } else if (action === "rightArrow" || action === "shiftRight") {
          if (columnIndex === rowMatrix[parseInt(rowIndex.toString(), 10)].lastIndexOf(1)) {
            columnIndex = tmp;
          } else {
            columnIndex++;
            columnIndex = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
          }
        } else if (action === "leftArrow" || action === "shiftLeft") {
          if (columnIndex === rowMatrix[parseInt(rowIndex.toString(), 10)].indexOf(1)) {
            columnIndex = tmp;
          } else {
            columnIndex--;
            columnIndex = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
          }
        } else if (action === null) {
          columnIndex++;
          columnIndex = this.first(this.matrix[parseInt(rowIndex.toString(), 10)], columnIndex, navigator2, true, action);
        }
        cell = getValue(rowIndex + ".cells." + columnIndex, rows);
      }
      return [rowIndex, columnIndex];
    };
    Matrix2.prototype.first = function(vector, index, navigator2, moveTo, action) {
      if ((index < 0 || index === vector.length) && this.inValid(vector[parseInt(index.toString(), 10)]) && (action !== "upArrow" && action !== "downArrow") || !vector.some(function(v) {
        return v === 1;
      })) {
        return null;
      }
      return !this.inValid(vector[parseInt(index.toString(), 10)]) ? index : this.first(vector, ["upArrow", "downArrow", "shiftUp", "shiftDown", "enter", "shiftEnter"].indexOf(action) !== -1 ? moveTo ? 0 : ++index : index + navigator2[1], navigator2, false, action);
    };
    Matrix2.prototype.select = function(rowIndex, columnIndex) {
      rowIndex = Math.max(0, Math.min(rowIndex, this.rows));
      columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[parseInt(rowIndex.toString(), 10)].length - 1));
      this.current = [rowIndex, columnIndex];
    };
    Matrix2.prototype.generate = function(rows, selector, isRowTemplate) {
      this.rows = rows.length - 1;
      this.matrix = [];
      for (var i = 0; i < rows.length; i++) {
        var cells = rows[parseInt(i.toString(), 10)].cells.filter(function(c) {
          return c.isSpanned !== true;
        });
        this.columns = Math.max(cells.length - 1, this.columns | 0);
        var incrementNumber = 0;
        for (var j = 0; j < cells.length; j++) {
          if (cells[parseInt(j.toString(), 10)].column && cells[parseInt(j.toString(), 10)].column.columns) {
            incrementNumber = this.columnsCount(cells[parseInt(j.toString(), 10)].column.columns, incrementNumber);
          } else {
            incrementNumber++;
          }
          this.set(i, j, rows[parseInt(i.toString(), 10)].visible === false ? false : selector(rows[parseInt(i.toString(), 10)], cells[parseInt(j.toString(), 10)], isRowTemplate));
        }
        this.columns = Math.max(incrementNumber - 1, this.columns | 0);
      }
      return this.matrix;
    };
    Matrix2.prototype.columnsCount = function(rowColumns, currentColumnCount) {
      var columns = rowColumns;
      var incrementNumber = currentColumnCount;
      for (var i = 0; i < columns.length; i++) {
        if (columns[parseInt(i.toString(), 10)].columns) {
          incrementNumber = this.columnsCount(columns[parseInt(i.toString(), 10)].columns, incrementNumber);
        } else {
          incrementNumber++;
        }
      }
      return incrementNumber;
    };
    Matrix2.prototype.inValid = function(value) {
      return value === 0 || value === void 0;
    };
    return Matrix2;
  }()
);
var ContentFocus = (
  /** @class */
  function() {
    function ContentFocus2(parent) {
      var _this = this;
      this.matrix = new Matrix();
      this.lastIdxCell = false;
      this.parent = parent;
      this.keyActions = {
        "rightArrow": [0, 1],
        "tab": [0, 1],
        "leftArrow": [0, -1],
        "shiftTab": [0, -1],
        "upArrow": [-1, 0],
        "downArrow": [1, 0],
        "shiftUp": [-1, 0],
        "shiftDown": [1, 0],
        "shiftRight": [0, 1],
        "shiftLeft": [0, -1],
        "enter": [1, 0],
        "shiftEnter": [-1, 0]
      };
      this.indexesByKey = function(action) {
        var opt = {
          "home": [_this.matrix.current[0], -1, 0, 1],
          "end": [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],
          "ctrlHome": [0, -1, 0, 1],
          "ctrlEnd": [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]
        };
        return opt["" + action] || null;
      };
    }
    ContentFocus2.prototype.getTable = function() {
      return this.parent.getContentTable();
    };
    ContentFocus2.prototype.onKeyPress = function(e) {
      var isMacLike = /(Mac)/i.test(navigator.platform);
      if (isMacLike && e.metaKey) {
        if (e.action === "home") {
          e.action = "ctrlHome";
        } else if (e.action === "end") {
          e.action = "ctrlEnd";
        } else if (["downArrow", "upArrow", "leftArrow", "rightArrow"].indexOf(e.action) !== -1) {
          return;
        }
      }
      var navigators = this.keyActions[e.action];
      var current = this.getCurrentFromAction(e.action, navigators, e.action in this.keyActions, e);
      if (!current) {
        return;
      }
      if ((["tab", "shiftTab"].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString() || this.parent.allowPaging && !this.parent.pagerModule.pagerObj.checkPagerHasFocus() && this.matrix.current[0] === this.matrix.rows && (this.parent.editSettings.mode === "Batch" && this.parent.editSettings.allowAdding && e.keyCode === 40 || e.keyCode === 40)) {
        if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() || current.toString() === [0, 0].toString() || this.matrix.current[0] === this.matrix.rows && this.matrix.current.toString() === current.toString() || this.parent.allowGrouping && this.parent.infiniteScrollSettings.enableCache && current.toString() === [0, 1].toString()) {
          return false;
        } else {
          current = this.editNextRow(current[0], current[1], e.action);
        }
      }
      this.matrix.select(current[0], current[1]);
    };
    ContentFocus2.prototype.editNextRow = function(rowIndex, cellIndex, action) {
      var gObj = this.parent;
      var editNextRow = gObj.editSettings.allowNextRowEdit && (gObj.isEdit || gObj.isLastCellPrimaryKey);
      var visibleIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[0].field);
      var row2 = this.getTable().rows[parseInt(rowIndex.toString(), 10)];
      var cell = gObj.editSettings.showAddNewRow && row2.classList.contains("e-addedrow") ? row2.querySelectorAll("td:not(.e-editcell)")[parseInt(cellIndex.toString(), 10)] : row2.cells[parseInt(cellIndex.toString(), 10)];
      if (action === "tab" && editNextRow) {
        rowIndex++;
        var index = this.getTable().rows[parseInt(rowIndex.toString(), 10)].getElementsByClassName("e-indentcell").length + this.getTable().rows[parseInt(rowIndex.toString(), 10)].getElementsByClassName("e-detailrowcollapse").length;
        cellIndex = visibleIndex + index;
      }
      if (action === "shiftTab" && editNextRow) {
        rowIndex--;
        cellIndex = gObj.getColumnIndexByField(gObj.getVisibleColumns()[gObj.getVisibleColumns().length - 1].field);
      }
      return !cell.classList.contains(rowCell) && !cell.classList.contains("e-headercell") && !cell.classList.contains("e-groupcaption") && !cell.classList.contains("e-filterbarcell") ? this.editNextRow(rowIndex, cellIndex, action) : [rowIndex, cellIndex];
    };
    ContentFocus2.prototype.getCurrentFromAction = function(action, navigator2, isPresent, e) {
      if (navigator2 === void 0) {
        navigator2 = [0, 0];
      }
      if (!isPresent && !this.indexesByKey(action) || this.matrix.current.length === 0) {
        return null;
      }
      if (!this.shouldFocusChange(e)) {
        return this.matrix.current;
      }
      var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator2), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];
      if (this.parent.allowGrouping && !isNullOrUndefined(this.parent.groupSettings.columns) && this.parent.groupSettings.columns.length && this.parent.aggregates.length && action === "enter") {
        for (var i = rowIndex; i < this.matrix.matrix.length; i++) {
          var row2 = this.getTable().rows[i + 1];
          if (row2 && row2.cells[parseInt(cellIndex.toString(), 10)] && row2.cells[parseInt(cellIndex.toString(), 10)].classList.contains("e-rowcell")) {
            return [i + 1, cellIndex];
          }
          if (i === this.matrix.matrix.length - 1) {
            return [rowIndex, cellIndex];
          }
        }
      }
      if (action === "ctrlEnd" || action === "end") {
        var lastContentCellIndex = [
          this.matrix.matrix.length - 1,
          this.matrix.matrix[this.matrix.matrix.length - 1].length - 1
        ];
        if (action === "end") {
          lastContentCellIndex = [rowIndex, this.matrix.matrix[parseInt(rowIndex.toString(), 10)].length - 1];
        }
        if (this.matrix.matrix[lastContentCellIndex[0]][lastContentCellIndex[1]] === 0) {
          lastContentCellIndex = findCellIndex(this.matrix.matrix, lastContentCellIndex, false);
        }
        rowIndex = lastContentCellIndex[0];
        cellIndex = lastContentCellIndex[1] + 1;
      }
      var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator(), this);
      return current;
    };
    ContentFocus2.prototype.checkRowCellFocus = function(target) {
      return target.classList.contains(rowCell) ? target.classList.contains("e-focused") : true;
    };
    ContentFocus2.prototype.onClick = function(e, force) {
      var target = e.target;
      this.target = target;
      target = target.classList.contains(rowCell) ? target : closest(target, "td");
      target = target ? target : closest(e.target, "td.e-detailrowcollapse") || closest(e.target, "td.e-detailrowexpand");
      target = closest(e.target, "td.e-detailcell") ? isNullOrUndefined(closest(closest(e.target, ".e-grid"), "td.e-detailcell")) ? null : target : target;
      target = target && closest(target, "table").classList.contains(table) ? target : null;
      if (!target) {
        return false;
      }
      var rowIdx = target.parentElement.rowIndex;
      if (this.parent.editSettings.showAddNewRow && parentsUntil(target, "e-addedrow")) {
        rowIdx = parentsUntil(target, "e-addedrow").rowIndex;
      }
      var _a = [rowIdx, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];
      var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];
      var val = getValue(rowIndex + "." + cellIndex, this.matrix.matrix);
      if (this.matrix.inValid(val) || !force && oRowIndex === rowIndex && oCellIndex === cellIndex && this.checkRowCellFocus(target) || !parentsUntil(e.target, rowCell) && !parentsUntil(e.target, "e-groupcaption") && !parentsUntil(e.target, "e-recordpluscollapse") && !parentsUntil(e.target, "e-recordplusexpand") && !parentsUntil(e.target, "e-detailrowcollapse") && !parentsUntil(e.target, "e-detailrowexpand") && !parentsUntil(e.target, "e-templatecell")) {
        return false;
      }
      this.matrix.select(rowIndex, cellIndex);
    };
    ContentFocus2.prototype.getFocusInfo = function() {
      var info = {};
      var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;
      this.matrix.current = [rowIndex, cellIndex];
      var row2 = this.getTable().rows[parseInt(rowIndex.toString(), 10)];
      info.element = !isNullOrUndefined(row2) ? this.parent.editSettings.showAddNewRow && row2.classList.contains("e-addedrow") ? row2.querySelectorAll("td:not(.e-editcell)")[parseInt(cellIndex.toString(), 10)] : row2.cells[parseInt(cellIndex.toString(), 10)] : null;
      if (!info.element) {
        return info;
      }
      info.elementToFocus = (!info.element.classList.contains("e-unboundcell") || this.parent.editSettings.showAddNewRow && info.element.classList.contains("e-unboundcell") && parentsUntil(info.element, "e-addedrow")) && !info.element.classList.contains("e-detailcell") ? this.getFocusable(info.element) : info.element;
      info.elementToFocus = info.element.classList.contains("e-detailcell") && info.element.querySelector(".e-childgrid") ? info.element.querySelector(".e-childgrid") : info.elementToFocus;
      if (this.parent.editSettings.mode === "Batch" && this.parent.isEdit && info.elementToFocus.tagName.toLowerCase() === "input" && info.elementToFocus.classList.contains("e-dropdownlist")) {
        info.elementToFocus = info.elementToFocus.parentElement;
      }
      info.outline = true;
      info.uid = info.element.parentElement.getAttribute("data-uid");
      return info;
    };
    ContentFocus2.prototype.getFocusable = function(element2) {
      var query = 'button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';
      var isTemplate = !isNullOrUndefined(closest(element2, ".e-templatecell"));
      if (this.parent.isEdit) {
        var commandCellQuery = this.parent.editSettings.showAddNewRow && parentsUntil(element2, "e-addedrow") ? ", button:not(.e-hide)" : "";
        query = 'input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea' + commandCellQuery;
      }
      var child = [].slice.call(element2.querySelectorAll(query));
      if (element2.classList.contains("e-fltrtemp")) {
        var focusElement = [].slice.call(element2.querySelectorAll(".e-fltrtemp-focus"));
        if (this.focusType === "click" && this.target && this.target.classList.contains("e-fltrtemp-focus")) {
          return this.target;
        } else if (this.focusType === "key" && focusElement.length && (this.action === "tab" || this.action === "shiftTab")) {
          var elementIndex = focusElement.indexOf(this.currentTarget);
          return elementIndex === -1 ? focusElement[this.action === "tab" ? 0 : focusElement.length - 1] : focusElement[this.action === "tab" ? elementIndex + 1 : elementIndex - 1];
        }
      }
      return child.length ? isTemplate && child.length > 1 && !(this.parent.editSettings.mode === "Batch" && this.parent.isEdit && this.target) ? this.target ? this.target : element2 : child[0] : element2;
    };
    ContentFocus2.prototype.selector = function(row2, cell, isRowTemplate) {
      var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];
      return (row2.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate) || row2.isDataRow && cell.cellType === CellType.DetailExpand && isNullOrUndefined(cell.visible) || !row2.isDataRow && types.indexOf(cell.cellType) > -1 && !((cell.cellType === CellType.GroupSummary || cell.cellType === CellType.CaptionSummary) && !(cell.isDataCell && cell.visible)) || cell.column && cell.visible && cell.column.type === "checkbox" || cell.cellType === CellType.CommandColumn || row2.isDataRow && isRowTemplate) && !(row2.edit === "delete" && row2.isDirty);
    };
    ContentFocus2.prototype.nextRowFocusValidate = function(index) {
      var lastIndex = index;
      for (var i = index, len = this.matrix.rows; i <= len; i++) {
        if (this.matrix.matrix[parseInt(index.toString(), 10)].indexOf(1) === -1) {
          index = index + 1;
        } else {
          return index;
        }
      }
      this.lastIdxCell = true;
      return lastIndex;
    };
    ContentFocus2.prototype.previousRowFocusValidate = function(index) {
      var firstIndex = index;
      for (var i = index, len = 0; i >= len; i--) {
        if (this.matrix.matrix[parseInt(index.toString(), 10)].indexOf(1) === -1) {
          index = index - 1;
          if (index < 0) {
            this.lastIdxCell = true;
            return firstIndex;
          }
        } else {
          return index;
        }
      }
      return firstIndex;
    };
    ContentFocus2.prototype.jump = function(action, current) {
      this.lastIdxCell = false;
      var enterFrozen = this.parent.frozenRows !== 0 && action === "shiftEnter";
      var headerSwap = (action === "upArrow" || enterFrozen) && current[0] === 0;
      if (this.matrix.matrix[current[0]]) {
        if (action === "tab" && this.matrix.matrix.length && current[1] === this.matrix.matrix[current[0]].lastIndexOf(1) && this.matrix.matrix.length - 1 !== current[0]) {
          this.matrix.current[0] = this.nextRowFocusValidate(this.matrix.current[0] + 1);
          this.matrix.current[1] = -1;
        }
      }
      if (action === "shiftTab" && current[0] !== 0 && this.matrix.matrix[current[0]].indexOf(1) === current[1]) {
        this.matrix.current[0] = this.previousRowFocusValidate(this.matrix.current[0] - 1);
        this.matrix.current[1] = this.matrix.matrix[current[0]].length;
      }
      var isHeaderFocus = false;
      var row$1 = parentsUntil(document.activeElement, "e-addedrow") && this.parent.editSettings.showAddNewRow ? parentsUntil(document.activeElement, "e-addedrow") : document.activeElement.parentElement;
      if ((this.parent.enableVirtualization || this.parent.infiniteScrollSettings.enableCache) && !isNullOrUndefined(row$1) && row$1.classList.contains(row)) {
        var rowIndex = parseInt(row$1.getAttribute(ariaRowIndex), 10) - 1;
        isHeaderFocus = rowIndex > 0;
      }
      var info = {
        swap: !isHeaderFocus ? (action === "upArrow" || enterFrozen) && current[0] === 0 : false,
        toHeader: headerSwap
      };
      return info;
    };
    ContentFocus2.prototype.getNextCurrent = function(previous, swap, active, action) {
      if (previous === void 0) {
        previous = [];
      }
      var current = [];
      if (action === "rightArrow" || action === "tab") {
        current[0] = previous[0];
        current[1] = -1;
      }
      if (action === "downArrow" || action === "enter") {
        current[0] = -1;
        current[1] = previous[1];
      }
      return current;
    };
    ContentFocus2.prototype.generateRows = function(rows, optionals) {
      var _a;
      var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;
      var len = handlerInstance.matrix.matrix.length;
      var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === "FilterBar" ? len + 1 : len;
      handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen);
      handlerInstance.matrix.rows = defaultLen;
      (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);
      handlerInstance.matrix.rows += matrix.length;
    };
    ContentFocus2.prototype.getInfo = function(e) {
      var info = this.getFocusInfo();
      var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];
      var isData = info.element.classList.contains(rowCell);
      var isSelectable = isData || e && e.action !== "enter" && (info.element.classList.contains("e-detailrowcollapse") || info.element.classList.contains("e-detailrowexpand"));
      var _b = [
        Math.min(parseInt(info.element.parentElement.getAttribute(ariaRowIndex), 10) - 1, rIndex),
        Math.min(parseInt(info.element.getAttribute(ariaColIndex), 10) - 1, cIndex)
      ], rowIndex = _b[0], cellIndex = _b[1];
      if (this.parent.allowGrouping && this.parent.groupSettings.enableLazyLoading && isData) {
        rowIndex = this.parent.getDataRows().indexOf(info.element.parentElement);
      }
      if (this.parent.enableVirtualization && this.parent.groupSettings.columns.length) {
        rowIndex = rIndex;
        cellIndex = cIndex;
      }
      if (this.parent.editSettings.showAddNewRow && this.parent.editSettings.newRowPosition === "Top" && !this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling && e && e.action === "downArrow") {
        rowIndex++;
      }
      return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable };
    };
    ContentFocus2.prototype.validator = function() {
      var table2 = this.getTable();
      return function(rowIndex, cellIndex, action) {
        if (!isNullOrUndefined(table2.rows[parseInt(rowIndex.toString(), 10)])) {
          var cell = void 0;
          cellIndex = table2.querySelector(".e-emptyrow") ? 0 : cellIndex;
          if (table2.rows[parseInt(rowIndex.toString(), 10)].cells[0].classList.contains("e-editcell")) {
            cell = table2.rows[parseInt(rowIndex.toString(), 10)].cells[0].querySelectorAll("td")[parseInt(cellIndex.toString(), 10)];
          } else {
            cell = table2.rows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)];
          }
          var isCellWidth = cell.getBoundingClientRect().width !== 0;
          if (action === "enter" || action === "shiftEnter") {
            return isCellWidth && cell.classList.contains(rowCell);
          }
          if ((action === "shiftUp" || action === "shiftDown") && cell.classList.contains(rowCell)) {
            return isCellWidth;
          } else if (action !== "shiftUp" && action !== "shiftDown") {
            return isCellWidth;
          }
        }
        return false;
      };
    };
    ContentFocus2.prototype.shouldFocusChange = function(e) {
      var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;
      if (rIndex < 0 || cIndex < 0) {
        return true;
      }
      var cell = getValue(rIndex + ".cells." + cIndex, this.getTable().rows);
      if (!cell) {
        return true;
      }
      return e.action === "enter" || e.action === "shiftEnter" ? cell.classList.contains(rowCell) && !cell.classList.contains("e-unboundcell") || cell.classList.contains("e-editedbatchcell") && !cell.classList.contains("e-detailcell") : true;
    };
    ContentFocus2.prototype.getGridSeletion = function() {
      return this.parent.allowSelection && this.parent.selectionSettings.allowColumnSelection;
    };
    return ContentFocus2;
  }()
);
var HeaderFocus = (
  /** @class */
  function(_super) {
    __extends$9(HeaderFocus2, _super);
    function HeaderFocus2(parent) {
      return _super.call(this, parent) || this;
    }
    HeaderFocus2.prototype.getTable = function() {
      return this.parent.getHeaderTable();
    };
    HeaderFocus2.prototype.onClick = function(e) {
      this.focusType = "click";
      var target = e.target;
      this.target = target;
      target = target.classList.contains("e-headercell") ? target : closest(target, "th");
      if (!target && (this.parent.frozenRows !== 0 || (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.parent.editSettings.showAddNewRow)) {
        target = e.target.classList.contains(rowCell) ? e.target : closest(e.target, "td");
      }
      if (e.target.classList.contains("e-columnheader") || e.target.querySelector(".e-stackedheadercell")) {
        return false;
      }
      if (!target) {
        return;
      }
      var rowIdx = target.parentElement.rowIndex;
      if (this.parent.editSettings.showAddNewRow && parentsUntil(target, "e-addedrow")) {
        rowIdx = parentsUntil(target, "e-addedrow").rowIndex;
      }
      var _a = [rowIdx, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];
      var val = getValue(rowIndex + "." + cellIndex, this.matrix.matrix);
      if (this.matrix.inValid(val)) {
        return false;
      }
      this.matrix.select(rowIdx, target.cellIndex);
    };
    HeaderFocus2.prototype.getFocusInfo = function() {
      var info = {};
      var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;
      var row2 = this.getTable().rows[parseInt(rowIndex.toString(), 10)];
      info.element = !isNullOrUndefined(row2) ? this.parent.editSettings.showAddNewRow && row2.classList.contains("e-addedrow") ? row2.querySelectorAll("td:not(.e-editcell)")[parseInt(cellIndex.toString(), 10)] : row2.cells[parseInt(cellIndex.toString(), 10)] : null;
      if (!isNullOrUndefined(info.element)) {
        info.elementToFocus = this.getFocusable(info.element);
        info.outline = !info.element.classList.contains("e-filterbarcell");
      }
      return info;
    };
    HeaderFocus2.prototype.selector = function(row2, cell) {
      return cell.visible && (cell.column.field !== void 0 || cell.isTemplate || !isNullOrUndefined(cell.column.template) || !isNullOrUndefined(cell.column.commands) || cell.column.type === "checkbox") || cell.cellType === CellType.StackedHeader;
    };
    HeaderFocus2.prototype.jump = function(action, current) {
      var enterFrozen = this.parent.frozenRows !== 0 && action === "enter";
      var isLastCell;
      var lastRow;
      if (this.parent.enableHeaderFocus && action === "tab") {
        lastRow = this.matrix.matrix.length - 1 === current[0];
        isLastCell = current[1] === this.matrix.matrix[current[0]].lastIndexOf(1);
        if (isLastCell) {
          if (!lastRow) {
            this.matrix.current[0] = this.matrix.current[0] + 1;
          } else {
            this.matrix.current[0] = 0;
          }
          this.matrix.current[1] = -1;
        }
      }
      return {
        swap: (action === "downArrow" || enterFrozen) && current[0] === this.matrix.matrix.length - 1 || action === "tab" && lastRow && isLastCell
      };
    };
    HeaderFocus2.prototype.getNextCurrent = function(previous, swap, active, action) {
      if (previous === void 0) {
        previous = [];
      }
      var current1 = [];
      if (action === "rightArrow" || action === "shiftRight" && this.getGridSeletion() || action === "tab") {
        current1[0] = previous[0];
        current1[1] = -1;
      }
      if (action === "upArrow" || action === "shiftEnter") {
        current1[0] = this.matrix.matrix.length;
        current1[1] = previous[1];
      }
      return current1;
    };
    HeaderFocus2.prototype.generateRows = function(rows) {
      var length = this.matrix.matrix.length;
      if (this.parent.allowFiltering && this.parent.filterSettings.type === "FilterBar") {
        this.matrix.rows = ++this.matrix.rows;
        var cells = rows[0].cells;
        var incrementNumber = 0;
        for (var i = 0; i < cells.length; i++) {
          if (cells[parseInt(i.toString(), 10)].column && cells[parseInt(i.toString(), 10)].column.columns) {
            incrementNumber = this.checkFilterColumn(cells[parseInt(i.toString(), 10)].column.columns, length, incrementNumber);
          } else {
            this.matrix.set(length, incrementNumber, cells[parseInt(i.toString(), 10)].visible && cells[parseInt(i.toString(), 10)].column.allowFiltering !== false);
            incrementNumber++;
          }
        }
      }
    };
    HeaderFocus2.prototype.checkFilterColumn = function(rowColumns, rowIndex, columnIndex) {
      var columns = rowColumns;
      var incrementNumber = columnIndex;
      for (var i = 0; i < columns.length; i++) {
        if (columns[parseInt(i.toString(), 10)].columns) {
          incrementNumber = this.checkFilterColumn(columns[parseInt(i.toString(), 10)].columns, rowIndex, incrementNumber);
        } else {
          this.matrix.set(rowIndex, incrementNumber, columns[parseInt(i.toString(), 10)].visible && columns[parseInt(i.toString(), 10)].allowFiltering !== false);
          incrementNumber++;
        }
      }
      return incrementNumber;
    };
    HeaderFocus2.prototype.getInfo = function(e) {
      return extend$1(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });
    };
    HeaderFocus2.prototype.validator = function() {
      return function() {
        return true;
      };
    };
    HeaderFocus2.prototype.shouldFocusChange = function(e) {
      var _a = this.matrix.current, rowIndex = _a[0], columnIndex = _a[1];
      if (rowIndex < 0 || columnIndex < 0) {
        return true;
      }
      var cell = getValue(rowIndex + ".cells." + columnIndex, this.getTable().rows);
      if (!cell) {
        return true;
      }
      return e.action === "enter" || e.action === "altDownArrow" ? !cell.classList.contains("e-headercell") : true;
    };
    HeaderFocus2.prototype.getHeaderType = function() {
      return "HeaderFocus";
    };
    return HeaderFocus2;
  }(ContentFocus)
);
var __extends$8 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$7 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var PageSettings = (
  /** @class */
  function(_super) {
    __extends$8(PageSettings2, _super);
    function PageSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$7([
      Property(12)
    ], PageSettings2.prototype, "pageSize", void 0);
    __decorate$7([
      Property(8)
    ], PageSettings2.prototype, "pageCount", void 0);
    __decorate$7([
      Property(1)
    ], PageSettings2.prototype, "currentPage", void 0);
    __decorate$7([
      Property()
    ], PageSettings2.prototype, "totalRecordsCount", void 0);
    __decorate$7([
      Property(false)
    ], PageSettings2.prototype, "enableQueryString", void 0);
    __decorate$7([
      Property(false)
    ], PageSettings2.prototype, "pageSizes", void 0);
    __decorate$7([
      Property(null)
    ], PageSettings2.prototype, "template", void 0);
    return PageSettings2;
  }(ChildProperty)
);
var __extends$7 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$6 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var ColumnChooserSettings = (
  /** @class */
  function(_super) {
    __extends$7(ColumnChooserSettings2, _super);
    function ColumnChooserSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$6([
      Property("startsWith")
    ], ColumnChooserSettings2.prototype, "operator", void 0);
    __decorate$6([
      Property(false)
    ], ColumnChooserSettings2.prototype, "ignoreAccent", void 0);
    __decorate$6([
      Property(null)
    ], ColumnChooserSettings2.prototype, "headerTemplate", void 0);
    __decorate$6([
      Property(null)
    ], ColumnChooserSettings2.prototype, "template", void 0);
    __decorate$6([
      Property(null)
    ], ColumnChooserSettings2.prototype, "footerTemplate", void 0);
    __decorate$6([
      Property(true)
    ], ColumnChooserSettings2.prototype, "enableSearching", void 0);
    __decorate$6([
      Property(null)
    ], ColumnChooserSettings2.prototype, "renderCustomColumnChooser", void 0);
    return ColumnChooserSettings2;
  }(ChildProperty)
);
var Selection = (
  /** @class */
  function() {
    function Selection2(parent, selectionSettings, locator) {
      this.selectedRowIndexes = [];
      this.selectedRowCellIndexes = [];
      this.selectedRecords = [];
      this.preventFocus = false;
      this.selectedColumnsIndexes = [];
      this.checkBoxState = false;
      this.isMultiShiftRequest = false;
      this.isMultiCtrlRequest = false;
      this.isMultiCtrlRequestCell = false;
      this.enableSelectMultiTouch = false;
      this.clearRowCheck = false;
      this.selectRowCheck = false;
      this.selectedRowState = {};
      this.unSelectedRowState = {};
      this.totalRecordsCount = 0;
      this.chkAllCollec = [];
      this.isCheckedOnAdd = false;
      this.persistSelectedData = [];
      this.virtualSelectedData = [];
      this.deSelectedData = [];
      this.isHdrSelectAllClicked = false;
      this.needColumnSelection = false;
      this.isCancelDeSelect = false;
      this.isPreventCellSelect = false;
      this.disableUI = false;
      this.isPersisted = false;
      this.cmdKeyPressed = false;
      this.cellselected = false;
      this.isMultiSelection = false;
      this.isAddRowsToSelection = false;
      this.initialRowSelection = false;
      this.isPrevRowSelection = false;
      this.isKeyAction = false;
      this.isRowDragSelected = false;
      this.isPartialSelection = false;
      this.rmtHdrChkbxClicked = false;
      this.isCheckboxReset = false;
      this.isRowDeselect = false;
      this.autoFillRLselection = true;
      this.isFocusLastCell = false;
      this.bottom = "0 0 2px 0";
      this.top = "2px 0 0 0";
      this.right_bottom = "0 2px 2px 0";
      this.bottom_left = "0 0 2px 2px";
      this.top_right = "2px 2px 0 0";
      this.top_left = "2px 0 0 2px";
      this.top_bottom = "2px 0 2px 0";
      this.top_right_bottom = "2px 2px 2px 0";
      this.top_bottom_left = "2px 0 2px 2px";
      this.top_right_left = "2px 2px 0 2px";
      this.right_bottom_left = "0 2px 2px 2px";
      this.all_border = "2px";
      this.parent = parent;
      this.selectionSettings = selectionSettings;
      this.factory = locator.getService("rendererFactory");
      this.focus = locator.getService("focus");
      this.addEventListener();
      this.wireEvents();
    }
    Selection2.prototype.initializeSelection = function() {
      this.parent.log("selection_key_missing");
      this.render();
    };
    Selection2.prototype.onActionBegin = function(args, type) {
      this.parent.trigger(type, this.fDataUpdate(args));
    };
    Selection2.prototype.fDataUpdate = function(args) {
      if (!this.isMultiSelection && (!isNullOrUndefined(args.cellIndex) || !isNullOrUndefined(args.rowIndex))) {
        var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ? this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);
        args.foreignKeyData = rowObj.foreignKeyData;
      }
      return args;
    };
    Selection2.prototype.onActionComplete = function(args, type) {
      this.parent.trigger(type, this.fDataUpdate(args));
      this.isMultiSelection = false;
    };
    Selection2.prototype.getModuleName = function() {
      return "selection";
    };
    Selection2.prototype.destroy = function() {
      var gridElement = this.parent.element;
      if (!gridElement || !gridElement.querySelector("." + gridHeader) && !gridElement.querySelector("." + gridContent)) {
        return;
      }
      this.hidePopUp();
      this.clearSelection();
      this.destroyAutoFillElements();
      this.removeEventListener();
      this.unWireEvents();
      EventHandler.remove(this.parent.getContent(), "mousedown", this.mouseDownHandler);
      EventHandler.remove(this.parent.getHeaderContent(), "mousedown", this.mouseDownHandler);
    };
    Selection2.prototype.isEditing = function() {
      return (this.parent.editSettings.mode === "Normal" || this.parent.editSettings.mode === "Batch" && this.parent.editModule && this.parent.editModule.formObj && !this.parent.editModule.formObj.validate()) && (this.parent.isEdit && !this.parent.editSettings.showAddNewRow) && !this.parent.isPersistSelection;
    };
    Selection2.prototype.getCurrentBatchRecordChanges = function() {
      var gObj = this.parent;
      if (gObj.editSettings.mode === "Batch" && gObj.editModule) {
        var currentRecords = iterateExtend(this.parent.getCurrentViewRecords());
        currentRecords = gObj.editSettings.newRowPosition === "Bottom" ? currentRecords.concat(this.parent.editModule.getBatchChanges()[addedRecords]) : this.parent.editModule.getBatchChanges()[addedRecords].concat(currentRecords);
        var deletedRecords$1 = this.parent.editModule.getBatchChanges()[deletedRecords];
        var primaryKey = this.parent.getPrimaryKeyFieldNames()[0];
        for (var i = 0; i < deletedRecords$1.length; i++) {
          for (var j = 0; j < currentRecords.length; j++) {
            if (deletedRecords$1[parseInt(i.toString(), 10)]["" + primaryKey] === currentRecords[parseInt(j.toString(), 10)]["" + primaryKey]) {
              currentRecords.splice(j, 1);
              break;
            }
          }
        }
        return currentRecords;
      } else if (this.parent.enableVirtualization && this.parent.groupSettings.columns.length && !this.parent.isPersistSelection) {
        var selectedGroupedData = gObj.getCurrentViewRecords().filter(function(col) {
          return col["key"] === void 0;
        });
        return selectedGroupedData;
      } else {
        return gObj.getCurrentViewRecords();
      }
    };
    Selection2.prototype.selectRow = function(index, isToggle) {
      if (this.selectedRowIndexes.length && this.selectionSettings.enableSimpleMultiRowSelection) {
        this.addRowsToSelection([index]);
        return;
      }
      var gObj = this.parent;
      var selectedRow = gObj.getRowByIndex(index);
      var rowObj = selectedRow && gObj.getRowObjectFromUID(selectedRow.getAttribute("data-uid"));
      if (this.isPartialSelection && rowObj && rowObj.isDataRow && !rowObj.isSelectable) {
        return;
      }
      var selectData;
      var isRemoved = false;
      if (gObj.enableVirtualization && index > -1) {
        var e = { selectedIndex: index, isAvailable: true };
        this.parent.notify(selectVirtualRow, e);
        if (selectedRow && gObj.getRowObjectFromUID(selectedRow.getAttribute("data-uid"))) {
          selectData = gObj.getRowObjectFromUID(selectedRow.getAttribute("data-uid")).data;
        } else {
          if (e.isAvailable && !gObj.selectionSettings.persistSelection) {
            var prevSelectedData = this.parent.getSelectedRecords();
            if (prevSelectedData.length > 0) {
              this.clearRowSelection();
            }
          }
          return;
        }
      } else {
        selectData = this.getRowObj(index).data;
      }
      if (!this.isRowType() || !selectedRow || this.isEditing()) {
        return;
      }
      var isRowSelected = selectedRow.hasAttribute("aria-selected");
      this.activeTarget();
      if (!isToggle || !this.selectedRowIndexes.length) {
        isToggle = false;
      } else {
        var isCheckboxModeResetOnRowClick = this.selectionSettings.checkboxMode === "ResetOnRowClick";
        var isSelectionTypeMultiple = !this.parent.isCheckBoxSelection && this.selectionSettings.type === "Multiple";
        if (!isCheckboxModeResetOnRowClick && !isSelectionTypeMultiple || this.selectedRowIndexes.length === 1 && (isCheckboxModeResetOnRowClick || isSelectionTypeMultiple)) {
          isToggle = !(this.isKeyAction && this.parent.isCheckBoxSelection) ? this.selectedRowIndexes.indexOf(index) !== -1 : false;
        } else {
          isToggle = false;
        }
      }
      this.isKeyAction = false;
      var args;
      var can = "cancel";
      if (!isToggle) {
        args = {
          data: selectData,
          rowIndex: index,
          isCtrlPressed: this.isMultiCtrlRequest,
          isShiftPressed: this.isMultiShiftRequest,
          row: selectedRow,
          previousRow: gObj.getRowByIndex(this.prevRowIndex),
          previousRowIndex: this.prevRowIndex,
          target: this.actualTarget,
          cancel: false,
          isInteracted: this.isInteracted,
          isHeaderCheckboxClicked: this.isHeaderCheckboxClicked
        };
        this.parent.trigger(rowSelecting, this.fDataUpdate(args), this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can));
      } else {
        if (this.selectionSettings.checkboxMode !== "ResetOnRowClick" && this.selectionSettings.persistSelection) {
          this.rowDeselect(rowDeselecting, [rowObj.index], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], this.actualTarget);
          if (this.isCancelDeSelect) {
            return;
          }
          if (!this.parent.isCheckBoxSelection) {
            this.selectedRowIndexes = [];
            this.selectedRecords = [];
            this.isRowSelected = false;
            this.selectRowIndex(-1);
          }
          this.rowDeselect(rowDeselected, [rowObj.index], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], this.actualTarget, void 0, void 0, void 0);
        }
        this.rowSelectingCallBack(args, isToggle, index, selectData, isRemoved, isRowSelected, can)(args);
      }
    };
    Selection2.prototype.rowSelectingCallBack = function(args, isToggle, index, selectData, isRemoved, isRowSelected, can) {
      var _this = this;
      return function(args2) {
        if (!isNullOrUndefined(args2) && args2["" + can] === true) {
          _this.disableInteracted();
          return;
        }
        _this.index = index;
        _this.toggle = isToggle;
        _this.data = selectData;
        _this.removed = isRemoved;
        if (isRowSelected && _this.selectionSettings.persistSelection && !(_this.selectionSettings.checkboxMode === "ResetOnRowClick")) {
          _this.clearSelectedRow(index);
          _this.selectRowCallBack();
        } else if (!isRowSelected && _this.selectionSettings.persistSelection && _this.parent.isCheckBoxSelection && _this.selectionSettings.checkboxMode !== "ResetOnRowClick") {
          _this.selectRowCallBack();
        }
        if (_this.selectionSettings.checkboxMode === "ResetOnRowClick") {
          _this.isCheckboxReset = true;
          _this.clearSelection();
        }
        if (!_this.selectionSettings.persistSelection || _this.selectionSettings.checkboxMode === "ResetOnRowClick" || !_this.parent.isCheckBoxSelection && _this.selectionSettings.persistSelection) {
          _this.selectRowCheck = true;
          _this.clearRow();
        }
      };
    };
    Selection2.prototype.selectRowCallBack = function() {
      var gObj = this.parent;
      var args;
      var index = this.index;
      var isToggle = this.toggle;
      var selectData = this.data;
      var isRemoved = this.removed;
      var selectedRow = gObj.getRowByIndex(index);
      if (!isToggle && !isRemoved) {
        if (this.selectedRowIndexes.indexOf(index) <= -1) {
          this.updateRowSelection(selectedRow, index);
        }
        this.selectRowIndex(index);
      }
      if (!isToggle) {
        args = {
          data: selectData,
          rowIndex: index,
          row: selectedRow,
          previousRow: gObj.getRowByIndex(this.prevRowIndex),
          previousRowIndex: this.prevRowIndex,
          target: this.actualTarget,
          isInteracted: this.isInteracted,
          isHeaderCheckBoxClicked: this.isHeaderCheckboxClicked,
          rowIndexes: index
        };
        this.onActionComplete(args, rowSelected);
      }
      this.isInteracted = false;
      this.updateRowProps(index);
    };
    Selection2.prototype.selectRowsByRange = function(startIndex, endIndex) {
      this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));
      this.selectRowIndex(endIndex);
    };
    Selection2.prototype.selectedDataUpdate = function(selectedData, foreignKeyData2, selectedRows, rowIndexes, selectableRowIndex) {
      for (var i = 0, len = rowIndexes.length; i < len; i++) {
        var currentRow = this.parent.getDataRows()[rowIndexes[parseInt(i.toString(), 10)]];
        if (this.parent.enableVirtualization) {
          currentRow = this.parent.getRowByIndex(rowIndexes[parseInt(i.toString(), 10)]);
        }
        var rowObj = this.getRowObj(currentRow);
        if (rowObj && rowObj.isDataRow && rowObj.isSelectable) {
          selectedData.push(rowObj.data);
          selectedRows.push(currentRow);
          foreignKeyData2.push(rowObj.foreignKeyData);
        } else {
          if (this.isPartialSelection && selectableRowIndex) {
            selectableRowIndex.splice(selectableRowIndex.indexOf(rowIndexes[parseInt(i.toString(), 10)]), 1);
          }
        }
      }
    };
    Selection2.prototype.selectRows = function(rowIndexes) {
      var _this = this;
      var gObj = this.parent;
      var selectableRowIndex = rowIndexes.slice();
      var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];
      this.isMultiSelection = true;
      var selectedRows = [];
      var foreignKeyData2 = [];
      var can = "cancel";
      var selectedData = [];
      if (!this.isRowType() || this.isEditing()) {
        return;
      }
      this.selectedDataUpdate(selectedData, foreignKeyData2, selectedRows, rowIndexes, selectableRowIndex);
      this.activeTarget();
      var args = {
        cancel: false,
        rowIndexes: selectableRowIndex,
        row: selectedRows,
        rowIndex,
        target: this.actualTarget,
        prevRow: gObj.getRows()[this.prevRowIndex],
        previousRowIndex: this.prevRowIndex,
        isInteracted: this.isInteracted,
        isCtrlPressed: this.isMultiCtrlRequest,
        isShiftPressed: this.isMultiShiftRequest,
        data: selectedData,
        isHeaderCheckboxClicked: this.isHeaderCheckboxClicked,
        foreignKeyData: foreignKeyData2
      };
      this.parent.trigger(rowSelecting, this.fDataUpdate(args), function(args2) {
        if (!isNullOrUndefined(args2) && args2["" + can] === true) {
          _this.disableInteracted();
          return;
        }
        if (!(_this.selectionSettings.persistSelection && gObj.allowRowDragAndDrop && _this.isDragged)) {
          _this.clearRow();
        }
        _this.selectRowIndex(selectableRowIndex.slice(-1)[0]);
        var selectRowFn = function(index, preventFocus) {
          _this.updateRowSelection(gObj.getRowByIndex(index), index, preventFocus);
          _this.updateRowProps(rowIndex);
        };
        if (!_this.isSingleSel()) {
          for (var _i = 0, selectableRowIndex_1 = selectableRowIndex; _i < selectableRowIndex_1.length; _i++) {
            var rowIdx = selectableRowIndex_1[_i];
            selectRowFn(rowIdx, gObj.enableVirtualization ? true : false);
          }
        } else {
          selectRowFn(rowIndex);
        }
        if (_this.checkVirtualCheckBox() && !_this.parent.isPersistSelection) {
          if (selectableRowIndex.length === _this.totalRecordsCount) {
            _this.virtualSelectedData = _this.virtualCheckBoxData().slice();
            _this.selectedRowIndexes = Object.keys(_this.virtualSelectedData).map(function(key) {
              return parseInt(key, 10);
            });
            _this.setCheckAllState();
          } else {
            var selectionData = selectableRowIndex.filter(function(index) {
              return _this.selectedRowIndexes.indexOf(index) === -1;
            });
            if (selectionData.length > 0) {
              var allData = _this.virtualCheckBoxData().slice();
              for (var i = 0; i < selectionData.length; i++) {
                var record = allData[selectionData[i]];
                if (!isNullOrUndefined(record)) {
                  _this.virtualSelectedData.push(record);
                  _this.selectedRowIndexes.push(selectionData[i]);
                }
              }
              _this.setCheckAllState();
            }
          }
        }
        args2 = {
          rowIndexes: selectableRowIndex,
          row: selectedRows,
          rowIndex,
          target: _this.actualTarget,
          prevRow: gObj.getRows()[_this.prevRowIndex],
          previousRowIndex: _this.prevRowIndex,
          data: _this.getSelectedRecords(),
          isInteracted: _this.isInteracted,
          isHeaderCheckboxClicked: _this.isHeaderCheckboxClicked,
          foreignKeyData: foreignKeyData2
        };
        if (_this.isRowSelected) {
          _this.onActionComplete(args2, rowSelected);
        }
        _this.isInteracted = false;
      });
    };
    Selection2.prototype.addRowsToSelection = function(rowIndexes) {
      var gObj = this.parent;
      var can = "cancel";
      var target = this.target;
      this.isMultiSelection = true;
      var selectedRows = [];
      var foreignKeyData2 = [];
      var selectedData = [];
      var indexes = gObj.getSelectedRowIndexes().concat(rowIndexes);
      var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) : gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);
      if ((!this.isRowType() || this.isEditing()) && !this.selectionSettings.checkboxOnly) {
        return;
      }
      var args;
      var checkboxColumn = this.parent.getColumns().filter(function(col) {
        return col.type === "checkbox";
      });
      if (this.isMultiCtrlRequest && !checkboxColumn.length) {
        this.selectedDataUpdate(selectedData, foreignKeyData2, selectedRows, indexes);
      }
      for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {
        var rowIndex = rowIndexes_1[_i];
        var rowObj = this.getRowObj(rowIndex);
        var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;
        if (this.isPartialSelection && rowObj && rowObj.isDataRow && !rowObj.isSelectable) {
          continue;
        }
        this.selectRowIndex(rowIndex);
        if (isUnSelected && ((checkboxColumn.length ? true : this.selectionSettings.enableToggle) || this.isMultiCtrlRequest)) {
          this.isAddRowsToSelection = true;
          this.rowDeselect(rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target);
          if (this.isCancelDeSelect) {
            return;
          }
          if (this.checkVirtualCheckBox() && !this.parent.isPersistSelection) {
            this.virtualSelectedData.splice(this.virtualSelectedData.indexOf(rowObj.data), 1);
          }
          this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);
          this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);
          this.selectRowIndex(this.selectedRowIndexes.length ? this.selectedRowIndexes[this.selectedRowIndexes.length - 1] : -1);
          selectedRow.removeAttribute("aria-selected");
          this.addRemoveClassesForRow(selectedRow, false, null, "e-selectionbackground", "e-active");
          this.rowDeselect(rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], target, void 0, void 0, void 0);
          this.isInteracted = false;
          this.isMultiSelection = false;
          this.isAddRowsToSelection = false;
          this.isHdrSelectAllClicked = false;
        } else {
          this.activeTarget();
          args = {
            cancel: false,
            data: selectedData.length ? selectedData : rowObj.data,
            rowIndex,
            row: selectedRows.length ? selectedRows : selectedRow,
            target: this.actualTarget,
            prevRow: gObj.getRows()[this.prevRowIndex],
            previousRowIndex: this.prevRowIndex,
            isCtrlPressed: this.isMultiCtrlRequest,
            isShiftPressed: this.isMultiShiftRequest,
            foreignKeyData: foreignKeyData2.length ? foreignKeyData2 : rowObj.foreignKeyData,
            isInteracted: this.isInteracted,
            isHeaderCheckboxClicked: this.isHeaderCheckboxClicked,
            rowIndexes: indexes
          };
          this.parent.trigger(rowSelecting, this.fDataUpdate(args));
          if (!isNullOrUndefined(args) && args["" + can] === true) {
            this.disableInteracted();
            return;
          }
          if (this.isSingleSel()) {
            this.clearRow();
          }
          this.updateRowSelection(selectedRow, rowIndex);
        }
        if (!isUnSelected) {
          args = {
            data: selectedData.length ? selectedData : rowObj.data,
            rowIndex,
            row: selectedRows.length ? selectedRows : selectedRow,
            target: this.actualTarget,
            prevRow: gObj.getRows()[this.prevRowIndex],
            previousRowIndex: this.prevRowIndex,
            foreignKeyData: foreignKeyData2.length ? foreignKeyData2 : rowObj.foreignKeyData,
            isInteracted: this.isInteracted,
            isHeaderCheckboxClicked: this.isHeaderCheckboxClicked,
            rowIndexes: indexes
          };
          this.onActionComplete(args, rowSelected);
        }
        this.isInteracted = false;
        this.updateRowProps(rowIndex);
        if (this.isSingleSel()) {
          break;
        }
      }
    };
    Selection2.prototype.getCollectionFromIndexes = function(startIndex, endIndex) {
      var indexes = [];
      var _a = startIndex <= endIndex ? { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;
      for (; i <= max; i++) {
        indexes.push(i);
      }
      if (startIndex > endIndex) {
        indexes.reverse();
      }
      return indexes;
    };
    Selection2.prototype.clearRow = function() {
      this.clearRowCheck = true;
      this.clearRowSelection();
    };
    Selection2.prototype.clearRowCallBack = function() {
      if (this.isCancelDeSelect && this.parent.checkAllRows !== "Check") {
        return;
      }
      this.selectedRowIndexes = [];
      this.selectedRecords = [];
      this.selectRowIndex(-1);
      if (this.isSingleSel() && this.parent.isPersistSelection) {
        this.selectedRowState = {};
      }
    };
    Selection2.prototype.clearSelectedRow = function(index) {
      if (this.toggle) {
        var selectedEle = this.parent.getRowByIndex(index);
        if (!this.disableUI) {
          selectedEle.removeAttribute("aria-selected");
          this.addRemoveClassesForRow(selectedEle, false, true, "e-selectionbackground", "e-active");
        }
        this.removed = true;
        this.updatePersistCollection(selectedEle, false);
        this.updateCheckBoxes(selectedEle);
        this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(index), 1);
        this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(index)), 1);
      }
    };
    Selection2.prototype.updateRowProps = function(startIndex) {
      this.prevRowIndex = startIndex;
      this.isRowSelected = this.selectedRowIndexes.length && true;
    };
    Selection2.prototype.getPkValue = function(pkField, data) {
      return pkField ? isComplexField(pkField) ? getObject(pkField, data) : data["" + pkField] : data["" + pkField];
    };
    Selection2.prototype.updatePersistCollection = function(selectedRow, chkState) {
      var _this = this;
      if ((this.parent.isPersistSelection || this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) && !isNullOrUndefined(selectedRow)) {
        if (!this.parent.isPersistSelection) {
          this.ensureCheckboxFieldSelection();
        }
        var rowObj = this.getRowObj(selectedRow);
        var pKey_1 = rowObj.data ? this.getPkValue(this.primaryKey, rowObj.data) : null;
        if (pKey_1 === null) {
          return;
        }
        rowObj.isSelected = chkState;
        if (chkState && !this.isPartialSelection || this.isPartialSelection && rowObj.isSelectable && rowObj.isSelected) {
          this.selectedRowState["" + pKey_1] = chkState;
          delete this.unSelectedRowState["" + pKey_1];
          if (!this.persistSelectedData.some(function(data) {
            return _this.getPkValue(_this.primaryKey, data) === pKey_1;
          })) {
            this.persistSelectedData.push(rowObj.data);
          }
        } else {
          this.updatePersistDelete(pKey_1);
        }
      }
    };
    Selection2.prototype.updatePersistDelete = function(pKey, isPartialSelection) {
      var _this = this;
      delete this.selectedRowState["" + pKey];
      if (this.rmtHdrChkbxClicked) {
        this.unSelectedRowState["" + pKey] = true;
      }
      var index;
      var isPresent = this.persistSelectedData.some(function(data, i) {
        index = i;
        return _this.getPkValue(_this.primaryKey, data) === pKey;
      });
      if (isPresent) {
        this.persistSelectedData.splice(index, 1);
        if (isPartialSelection) {
          this.parent.partialSelectedRecords.splice(index, 1);
        }
      }
    };
    Selection2.prototype.updateCheckBoxes = function(row2, chkState, rowIndex) {
      if (!isNullOrUndefined(row2)) {
        var chkBox = row2.querySelector(".e-checkselect");
        if (!isNullOrUndefined(chkBox)) {
          removeAddCboxClasses(chkBox.nextElementSibling, chkState);
          setChecked(chkBox, chkState);
          if (isNullOrUndefined(this.checkedTarget) || !isNullOrUndefined(this.checkedTarget) && !this.checkedTarget.classList.contains("e-checkselectall")) {
            this.setCheckAllState(rowIndex);
          }
        }
      }
    };
    Selection2.prototype.updateRowSelection = function(selectedRow, startIndex, preventFocus) {
      if (!selectedRow) {
        return;
      }
      if (this.selectedRowIndexes.indexOf(startIndex) === -1) {
        if (this.checkVirtualCheckBox() && !this.parent.isPersistSelection) {
          this.virtualSelectedData.push(this.parent.getRowObjectFromUID(selectedRow.getAttribute("data-uid")).data);
        }
        this.selectedRowIndexes.push(startIndex);
        this.selectedRecords.push(selectedRow);
      }
      selectedRow.setAttribute("aria-selected", "true");
      this.updatePersistCollection(selectedRow, true);
      this.updateCheckBoxes(selectedRow, true);
      this.addRemoveClassesForRow(selectedRow, true, null, "e-selectionbackground", "e-active");
      if (!this.preventFocus && !(this.parent.isFocusFirstCell || this.isFocusLastCell)) {
        var target = this.focus.getPrevIndexes().cellIndex ? selectedRow.cells[this.focus.getPrevIndexes().cellIndex] : selectedRow.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");
        if (this.parent.contextMenuModule && this.mouseButton === 2) {
          target = this.parent.contextMenuModule.cell;
        }
        if (!target || preventFocus) {
          return;
        }
        this.focus.onClick({ target }, true);
      } else {
        if (this.parent.isFocusFirstCell || this.isFocusLastCell) {
          this.parent.isFocusFirstCell = false;
          var selector = this.isFocusLastCell ? "last-child" : "first-child";
          var target = selectedRow.querySelector(".e-selectionbackground.e-rowcell:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop, .e-gridchkbox):" + selector);
          this.isFocusLastCell = false;
          if (target) {
            this.focus.onClick({ target }, true, true);
          }
        }
      }
    };
    Selection2.prototype.clearSelection = function() {
      this.checkSelectAllClicked = true;
      if (this.selectionSettings.persistSelection && this.persistSelectedData.length) {
        this.deSelectedData = iterateExtend(this.persistSelectedData);
      }
      if (!this.parent.isPersistSelection || this.parent.isPersistSelection && !this.parent.isEdit || !isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains("e-checkselectall")) {
        var span = this.parent.element.querySelector(".e-gridpopup").querySelector("span");
        if (span.classList.contains("e-rowselect")) {
          span.classList.remove("e-spanclicked");
        }
        if (this.parent.isPersistSelection) {
          this.persistSelectedData = [];
          this.selectedRowState = {};
          this.parent.partialSelectedRecords = [];
          this.parent.disableSelectedRecords = [];
          var rowObjects = this.parent.getRowsObject();
          for (var i = 0; i < rowObjects.length; i++) {
            if (rowObjects[i].isDataRow) {
              if (rowObjects[i].isSelectable) {
                this.parent.partialSelectedRecords.push(rowObjects[i].data);
              } else {
                this.parent.disableSelectedRecords.push(rowObjects[i].data);
              }
            }
          }
        }
        this.clearRowSelection();
        this.clearCellSelection();
        this.clearColumnSelection();
        this.prevRowIndex = void 0;
        this.prevCIdxs = void 0;
        this.prevECIdxs = void 0;
        this.enableSelectMultiTouch = false;
        this.isInteracted = false;
        this.checkSelectAllClicked = false;
        this.isHdrSelectAllClicked = false;
      }
    };
    Selection2.prototype.clearRowSelection = function() {
      var _this = this;
      if (this.isRowSelected) {
        var rows_1 = this.parent.getDataRows();
        var data_1 = [];
        var row_1 = [];
        var rowIndex_1 = [];
        var foreignKeyData_1 = [];
        var target_1 = this.target;
        this.isRowDeselect = true;
        for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {
          var currentRow = void 0;
          if (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache) {
            currentRow = this.parent.getRowByIndex(this.selectedRowIndexes[parseInt(i.toString(), 10)]);
          } else {
            currentRow = this.parent.editSettings.mode === "Batch" ? this.parent.getRows()[this.selectedRowIndexes[parseInt(i.toString(), 10)]] : this.parent.getDataRows()[this.selectedRowIndexes[parseInt(i.toString(), 10)]];
          }
          var rowObj = this.getRowObj(currentRow);
          if (rowObj) {
            data_1.push(rowObj.data);
            row_1.push(currentRow);
            rowIndex_1.push(this.selectedRowIndexes[parseInt(i.toString(), 10)]);
            foreignKeyData_1.push(rowObj.foreignKeyData);
          }
        }
        if (this.selectionSettings.persistSelection && this.selectionSettings.checkboxMode !== "ResetOnRowClick") {
          this.isRowClicked = this.checkSelectAllClicked ? true : false;
        }
        this.rowDeselect(rowDeselecting, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, null, function() {
          if (_this.isCancelDeSelect && (_this.isRowClicked || _this.checkSelectAllClicked || _this.isInteracted && !_this.parent.isPersistSelection)) {
            if (_this.parent.isPersistSelection) {
              if (_this.getCheckAllStatus(_this.parent.element.querySelector(".e-checkselectall")) === "Intermediate" || _this.parent.isPersistSelection) {
                for (var i2 = 0; i2 < _this.selectedRecords.length; i2++) {
                  _this.updatePersistCollection(_this.selectedRecords[parseInt(i2.toString(), 10)], true);
                }
              } else {
                _this.parent.checkAllRows = "Check";
                _this.updatePersistSelectedData(true);
              }
            }
            if (_this.clearRowCheck) {
              _this.clearRowCallBack();
              _this.clearRowCheck = false;
              if (_this.selectRowCheck) {
                _this.selectRowCallBack();
                _this.selectRowCheck = false;
              }
            }
            return;
          }
          var element2 = [].slice.call(rows_1.filter(function(record) {
            return record.hasAttribute("aria-selected");
          }));
          for (var j = 0; j < element2.length; j++) {
            if (!_this.disableUI) {
              element2[parseInt(j.toString(), 10)].removeAttribute("aria-selected");
              _this.addRemoveClassesForRow(element2[parseInt(j.toString(), 10)], false, true, "e-selectionbackground", "e-active");
            }
            if (!_this.isPrevRowSelection) {
              _this.updatePersistCollection(element2[parseInt(j.toString(), 10)], false);
            }
            _this.updateCheckBoxes(element2[parseInt(j.toString(), 10)]);
          }
          if ((_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling && _this.parent.infiniteScrollSettings.enableCache) && _this.selectedRecords.length && !element2.length && !_this.parent.selectionSettings.persistSelection && !_this.disableUI && !_this.parent.isCheckBoxSelection) {
            _this.addRemoveClassesForRow(null, false, true);
          }
          _this.virtualSelectedData = [];
          _this.selectedRowIndexes = [];
          _this.selectedRecords = [];
          _this.isRowSelected = false;
          _this.selectRowIndex(-1);
          _this.isPrevRowSelection = false;
          _this.rowDeselect(rowDeselected, rowIndex_1, data_1, row_1, foreignKeyData_1, target_1, null, void 0, null);
          if (_this.clearRowCheck) {
            _this.clearRowCallBack();
            _this.clearRowCheck = false;
            if (_this.selectRowCheck) {
              _this.selectRowCallBack();
              _this.selectRowCheck = false;
            }
          }
        }, null);
        this.isRowDeselect = false;
      } else {
        if (this.clearRowCheck) {
          this.clearRowCallBack();
          this.clearRowCheck = false;
          if (this.selectRowCheck) {
            this.selectRowCallBack();
            this.selectRowCheck = false;
          }
        }
      }
    };
    Selection2.prototype.rowDeselect = function(type, rowIndex, data, row2, foreignKeyData2, target, mRow, rowDeselectCallBack, frozenRightRow) {
      var _this = this;
      if (this.selectionSettings.persistSelection && (this.isRowClicked || !this.isRowDeselect || this.checkSelectAllClicked || this.focus["activeKey"] && this.focus.currentInfo.element.classList.contains("e-gridchkbox") && this.focus["activeKey"] === "space") || !this.selectionSettings.persistSelection) {
        var cancl_1 = "cancel";
        var isSingleDeSel = rowIndex.length === 1 && this.deSelectedData.length === 1;
        var rowDeselectObj = {
          rowIndex: rowIndex[0],
          data: this.selectionSettings.persistSelection && (this.parent.checkAllRows === "Uncheck" && !isSingleDeSel) && this.selectionSettings.checkboxMode !== "ResetOnRowClick" ? this.deSelectedData : data,
          foreignKeyData: foreignKeyData2,
          cancel: false,
          isInteracted: this.isInteracted,
          isHeaderCheckboxClicked: this.isHeaderCheckboxClicked
        };
        if (type === "rowDeselected") {
          delete rowDeselectObj.cancel;
        }
        var rowInString = "row";
        var target_2 = "target";
        var rowidx = "rowIndex";
        var rowidxex = "rowIndexes";
        var dataTxt = "data";
        var foreignKey = "foreignKeyData";
        rowDeselectObj["" + rowInString] = row2;
        rowDeselectObj["" + target_2] = this.actualTarget;
        var isHeaderCheckBxClick = this.actualTarget && !isNullOrUndefined(closest(this.actualTarget, "thead"));
        if (isHeaderCheckBxClick || rowIndex.length > 1) {
          rowDeselectObj["" + rowidx] = rowIndex[0];
          rowDeselectObj["" + rowidxex] = rowIndex;
        } else if (rowIndex.length === 1) {
          rowDeselectObj["" + dataTxt] = rowDeselectObj["" + dataTxt][0];
          rowDeselectObj["" + rowInString] = rowDeselectObj["" + rowInString][0];
          rowDeselectObj["" + foreignKey] = rowDeselectObj["" + foreignKey][0];
          if (this.isAddRowsToSelection) {
            rowDeselectObj["" + rowidxex] = rowIndex;
          }
        }
        this.parent.trigger(type, rowDeselectObj, function(args) {
          _this.isCancelDeSelect = args["" + cancl_1];
          if (!_this.isCancelDeSelect || !_this.isRowClicked && !_this.isInteracted && !_this.checkSelectAllClicked) {
            _this.updatePersistCollection(row2[0], false);
            _this.updateCheckBoxes(row2[0], void 0, rowIndex[0]);
          }
          if (rowDeselectCallBack !== void 0) {
            rowDeselectCallBack();
          }
        });
      } else if (this.selectionSettings.persistSelection && !this.isInteracted) {
        if (rowDeselectCallBack !== void 0) {
          rowDeselectCallBack();
        }
      }
    };
    Selection2.prototype.getRowObj = function(row2) {
      if (row2 === void 0) {
        row2 = this.currentIndex;
      }
      if (isNullOrUndefined(row2)) {
        return {};
      }
      if (typeof row2 === "number") {
        row2 = this.parent.getRowByIndex(row2);
      }
      if (row2) {
        return this.parent.getRowObjectFromUID(row2.getAttribute("data-uid")) || {};
      }
      return {};
    };
    Selection2.prototype.selectCell = function(cellIndex, isToggle) {
      if (!this.isCellType() || this.isCellType() && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache)) {
        return;
      }
      var gObj = this.parent;
      var args;
      var selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));
      this.currentIndex = cellIndex.rowIndex;
      var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];
      if (!this.isCellType() || !selectedCell || this.isEditing()) {
        return;
      }
      var isCellSelected = selectedCell.classList.contains("e-cellselectionbackground");
      isToggle = !isToggle ? isToggle : !isUndefined(this.prevCIdxs) && cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex && isCellSelected;
      if (!isToggle) {
        args = {
          data: selectedData,
          cellIndex,
          isCtrlPressed: this.isMultiCtrlRequest,
          isShiftPressed: this.isMultiShiftRequest,
          previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0,
          cancel: false
        };
        var currentCell = "currentCell";
        args["" + currentCell] = selectedCell;
        var previousRowCellIndex = "previousRowCellIndex";
        args["" + previousRowCellIndex] = this.prevECIdxs;
        this.parent.trigger(cellSelecting, this.fDataUpdate(args), this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData));
        this.cellselected = true;
      } else {
        this.successCallBack(args, isToggle, cellIndex, selectedCell, selectedData)(args);
      }
    };
    Selection2.prototype.successCallBack = function(cellSelectingArgs, isToggle, cellIndex, selectedCell, selectedData) {
      var _this = this;
      return function(cellSelectingArgs2) {
        var cncl = "cancel";
        var currentCell = "currentCell";
        if (!isNullOrUndefined(cellSelectingArgs2) && cellSelectingArgs2["" + cncl] === true) {
          return;
        }
        if (!isToggle) {
          cellSelectingArgs2["" + currentCell] = cellSelectingArgs2["" + currentCell] ? cellSelectingArgs2["" + currentCell] : selectedCell;
        }
        _this.clearCell();
        if (!isToggle) {
          _this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);
        }
        if (!isToggle) {
          var args = {
            data: selectedData,
            cellIndex,
            currentCell: selectedCell,
            selectedRowCellIndex: _this.selectedRowCellIndexes,
            previousRowCell: _this.prevECIdxs ? _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : void 0
          };
          var previousRowCellIndex = "previousRowCellIndex";
          args["" + previousRowCellIndex] = _this.prevECIdxs;
          _this.updateCellProps(cellIndex, cellIndex);
          _this.onActionComplete(args, cellSelected);
        }
      };
    };
    Selection2.prototype.getCellIndex = function(rIdx, cIdx) {
      return this.parent.getCellFromIndex(rIdx, cIdx);
    };
    Selection2.prototype.selectCellsByRange = function(startIndex, endIndex) {
      var _this = this;
      if (!this.isCellType()) {
        return;
      }
      var gObj = this.parent;
      var selectedCell = this.parent.isSpan ? getCellFromRow(this.parent, startIndex.rowIndex, startIndex.cellIndex) : gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);
      var min;
      var max;
      var stIndex = startIndex;
      var edIndex = endIndex = endIndex ? endIndex : startIndex;
      var cellIndexes;
      this.currentIndex = startIndex.rowIndex;
      var cncl = "cancel";
      var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];
      if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {
        return;
      }
      var args = {
        data: selectedData,
        cellIndex: startIndex,
        currentCell: selectedCell,
        isCtrlPressed: this.isMultiCtrlRequest,
        isShiftPressed: this.isMultiShiftRequest,
        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
      };
      var previousRowCellIndex = "previousRowCellIndex";
      args["" + previousRowCellIndex] = this.prevECIdxs;
      this.parent.trigger(cellSelecting, this.fDataUpdate(args), function(cellSelectingArgs) {
        if (!isNullOrUndefined(cellSelectingArgs) && cellSelectingArgs["" + cncl] === true) {
          return;
        }
        _this.clearCell();
        if (startIndex.rowIndex > endIndex.rowIndex) {
          var temp = startIndex;
          startIndex = endIndex;
          endIndex = temp;
        }
        for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {
          if (_this.selectionSettings.cellSelectionMode.indexOf("Box") < 0) {
            min = i === startIndex.rowIndex ? startIndex.cellIndex : 0;
            max = i === endIndex.rowIndex ? endIndex.cellIndex : _this.getLastColIndex(i);
          } else {
            min = startIndex.cellIndex;
            max = endIndex.cellIndex;
          }
          cellIndexes = [];
          for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {
            selectedCell = _this.parent.isSpan ? getCellFromRow(gObj, i, j) : gObj.getCellFromIndex(i, j);
            if (!selectedCell) {
              continue;
            }
            cellIndexes.push(j);
            _this.updateCellSelection(selectedCell);
            _this.addAttribute(selectedCell);
          }
          _this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes });
        }
        var cellSelectedArgs = {
          data: selectedData,
          cellIndex: edIndex,
          currentCell: gObj.getCellFromIndex(edIndex.rowIndex, edIndex.cellIndex),
          selectedRowCellIndex: _this.selectedRowCellIndexes,
          previousRowCell: _this.prevECIdxs ? _this.getCellIndex(_this.prevECIdxs.rowIndex, _this.prevECIdxs.cellIndex) : void 0
        };
        var previousRowCellIndex2 = "previousRowCellIndex";
        cellSelectedArgs["" + previousRowCellIndex2] = _this.prevECIdxs;
        if (!_this.isDragged) {
          _this.onActionComplete(cellSelectedArgs, cellSelected);
          _this.cellselected = true;
        }
        _this.updateCellProps(stIndex, edIndex);
      });
    };
    Selection2.prototype.selectCells = function(rowCellIndexes) {
      if (!this.isCellType()) {
        return;
      }
      var gObj = this.parent;
      var selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);
      this.currentIndex = rowCellIndexes[0].rowIndex;
      var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];
      if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {
        return;
      }
      var cellSelectArgs = {
        data: selectedData,
        cellIndex: rowCellIndexes[0].cellIndexes[0],
        currentCell: selectedCell,
        isCtrlPressed: this.isMultiCtrlRequest,
        isShiftPressed: this.isMultiShiftRequest,
        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
      };
      var previousRowCellIndex = "previousRowCellIndex";
      cellSelectArgs["" + previousRowCellIndex] = this.prevECIdxs;
      this.onActionBegin(cellSelectArgs, cellSelecting);
      for (var i = 0, len = rowCellIndexes.length; i < len; i++) {
        for (var j = 0, cellLen = rowCellIndexes[parseInt(i.toString(), 10)].cellIndexes.length; j < cellLen; j++) {
          selectedCell = gObj.getCellFromIndex(rowCellIndexes[parseInt(i.toString(), 10)].rowIndex, rowCellIndexes[parseInt(i.toString(), 10)].cellIndexes[parseInt(j.toString(), 10)]);
          if (!selectedCell) {
            continue;
          }
          this.updateCellSelection(selectedCell);
          this.addAttribute(selectedCell);
          this.addRowCellIndex({
            rowIndex: rowCellIndexes[parseInt(i.toString(), 10)].rowIndex,
            cellIndex: rowCellIndexes[parseInt(i.toString(), 10)].cellIndexes[parseInt(j.toString(), 10)]
          });
        }
      }
      this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });
      var cellSelectedArgs = {
        data: selectedData,
        cellIndex: rowCellIndexes[0].cellIndexes[0],
        currentCell: selectedCell,
        selectedRowCellIndex: this.selectedRowCellIndexes,
        previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
      };
      var prvRowCellIndex = "previousRowCellIndex";
      cellSelectedArgs["" + prvRowCellIndex] = this.prevECIdxs;
      this.onActionComplete(cellSelectedArgs, cellSelected);
    };
    Selection2.prototype.addCellsToSelection = function(cellIndexes) {
      if (!this.isCellType() || this.isCellType() && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache)) {
        return;
      }
      var gObj = this.parent;
      var selectedCell;
      var index;
      this.currentIndex = cellIndexes[0].rowIndex;
      var cncl = "cancel";
      var selectedData = this.getCurrentBatchRecordChanges()[this.currentIndex];
      if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {
        return;
      }
      this.hideAutoFill();
      var rowObj;
      rowObj = gObj.getRowsObject()[cellIndexes[0].rowIndex];
      if (gObj.groupSettings.columns.length > 0) {
        rowObj = gObj.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid"));
      }
      var foreignKeyData2 = [];
      for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {
        var cellIndex = cellIndexes_1[_i];
        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {
          if (this.selectedRowCellIndexes[parseInt(i.toString(), 10)].rowIndex === cellIndex.rowIndex) {
            index = i;
            break;
          }
        }
        selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));
        var idx = cellIndex.cellIndex;
        if (gObj.groupSettings.columns.length > 0) {
          foreignKeyData2.push(rowObj.cells[idx + gObj.groupSettings.columns.length].foreignKeyData);
        } else {
          foreignKeyData2.push(rowObj.cells[parseInt(idx.toString(), 10)].foreignKeyData);
        }
        var args = {
          cancel: false,
          data: selectedData,
          cellIndex: cellIndexes[0],
          isShiftPressed: this.isMultiShiftRequest,
          currentCell: selectedCell,
          isCtrlPressed: this.isMultiCtrlRequest,
          previousRowCell: this.prevECIdxs ? gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0
        };
        var prvRowCellIndex = "previousRowCellIndex";
        args["" + prvRowCellIndex] = this.prevECIdxs;
        var isUnSelected = index > -1;
        if (isUnSelected) {
          var selectedCellIdx = this.selectedRowCellIndexes[parseInt(index.toString(), 10)].cellIndexes;
          if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1 || this.selectionSettings.mode === "Both" && selectedCell.classList.contains("e-gridchkbox") && !selectedCell.getAttribute("aria-selected")) {
            this.cellDeselect(cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData2);
            selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);
            if (selectedCellIdx.length === 0) {
              this.selectedRowCellIndexes.splice(index, 1);
            }
            selectedCell.classList.remove("e-cellselectionbackground");
            selectedCell.removeAttribute("aria-selected");
            this.cellDeselect(cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData2);
          } else {
            isUnSelected = false;
            this.onActionBegin(args, cellSelecting);
            this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });
            this.updateCellSelection(selectedCell);
            this.addAttribute(selectedCell);
          }
        } else {
          this.onActionBegin(args, cellSelecting);
          if (!isNullOrUndefined(args) && args["" + cncl] === true) {
            return;
          }
          this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);
        }
        if (!isUnSelected) {
          var cellSelectedArgs = {
            data: selectedData,
            cellIndex: cellIndexes[0],
            currentCell: selectedCell,
            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : void 0,
            selectedRowCellIndex: this.selectedRowCellIndexes
          };
          cellSelectedArgs["" + prvRowCellIndex] = this.prevECIdxs;
          this.onActionComplete(cellSelectedArgs, cellSelected);
          this.cellselected = true;
        }
        this.updateCellProps(cellIndex, cellIndex);
      }
    };
    Selection2.prototype.getColIndex = function(rowIndex, index) {
      var col = this.parent.getColumnByIndex(index);
      var cells = getCellsByTableName(this.parent, col, rowIndex);
      if (cells) {
        for (var m = 0; m < cells.length; m++) {
          var colIndex = parseInt(cells[parseInt(m.toString(), 10)].getAttribute(ariaColIndex), 10) - 1;
          if (colIndex === index) {
            return m;
          }
        }
      }
      return -1;
    };
    Selection2.prototype.getLastColIndex = function(rowIndex) {
      var cells = this.parent.getDataRows()[parseInt(rowIndex.toString(), 10)].querySelectorAll("td.e-rowcell");
      return parseInt(cells[cells.length - 1].getAttribute(ariaColIndex), 10) - 1;
    };
    Selection2.prototype.clearCell = function() {
      this.clearCellSelection();
    };
    Selection2.prototype.cellDeselect = function(type, cellIndexes, data, cells, foreignKeyData2) {
      var cancl = "cancel";
      if (cells && cells.length > 0) {
        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {
          var cell = cells_1[_i];
          if (cell && cell.classList.contains(gridChkBox)) {
            this.updateCheckBoxes(closest(cell, "tr"));
          }
        }
      }
      var args = {
        cells,
        data,
        cellIndexes,
        foreignKeyData: foreignKeyData2,
        cancel: false
      };
      this.parent.trigger(type, args);
      this.isPreventCellSelect = args["" + cancl];
    };
    Selection2.prototype.updateCellSelection = function(selectedCell, rowIndex, cellIndex) {
      if (!isNullOrUndefined(rowIndex)) {
        this.addRowCellIndex({ rowIndex, cellIndex });
      }
      selectedCell.classList.add("e-cellselectionbackground");
      if (selectedCell.classList.contains(gridChkBox)) {
        this.updateCheckBoxes(closest(selectedCell, "tr"), true);
      }
      this.addAttribute(selectedCell);
    };
    Selection2.prototype.addAttribute = function(cell) {
      this.target = cell;
      if (!isNullOrUndefined(cell)) {
        cell.setAttribute("aria-selected", "true");
        if (!this.preventFocus) {
          this.focus.onClick({ target: cell }, true);
        }
      }
    };
    Selection2.prototype.updateCellProps = function(startIndex, endIndex) {
      this.prevCIdxs = startIndex;
      this.prevECIdxs = endIndex;
      this.isCellSelected = this.selectedRowCellIndexes.length && true;
    };
    Selection2.prototype.addRowCellIndex = function(rowCellIndex) {
      var isRowAvail;
      var index;
      for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {
        if (this.selectedRowCellIndexes[parseInt(i.toString(), 10)].rowIndex === rowCellIndex.rowIndex) {
          isRowAvail = true;
          index = i;
          break;
        }
      }
      if (isRowAvail) {
        if (this.selectedRowCellIndexes[parseInt(index.toString(), 10)].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {
          this.selectedRowCellIndexes[parseInt(index.toString(), 10)].cellIndexes.push(rowCellIndex.cellIndex);
        }
      } else {
        this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });
      }
    };
    Selection2.prototype.clearCellSelection = function() {
      if (this.isCellSelected) {
        var gObj = this.parent;
        var selectedCells = this.getSelectedCellsElement();
        var rowCell2 = this.selectedRowCellIndexes;
        var data = [];
        var cells = [];
        var foreignKeyData2 = [];
        var currentViewData = this.getCurrentBatchRecordChanges();
        this.hideAutoFill();
        for (var i = 0, len = rowCell2.length; i < len; i++) {
          data.push(currentViewData[rowCell2[parseInt(i.toString(), 10)].rowIndex]);
          var rowObj = this.getRowObj(rowCell2[parseInt(i.toString(), 10)].rowIndex);
          for (var j = 0, cLen = rowCell2[parseInt(i.toString(), 10)].cellIndexes.length; j < cLen; j++) {
            if (rowObj.cells) {
              foreignKeyData2.push(rowObj.cells[rowCell2[parseInt(i.toString(), 10)].cellIndexes[parseInt(j.toString(), 10)]].foreignKeyData);
            }
            cells.push(gObj.getCellFromIndex(rowCell2[parseInt(i.toString(), 10)].rowIndex, rowCell2[parseInt(i.toString(), 10)].cellIndexes[parseInt(j.toString(), 10)]));
          }
        }
        this.cellDeselect(cellDeselecting, rowCell2, data, cells, foreignKeyData2);
        if (this.isPreventCellSelect === true) {
          return;
        }
        for (var i = 0, len = selectedCells.length; i < len; i++) {
          selectedCells[parseInt(i.toString(), 10)].classList.remove("e-cellselectionbackground");
          selectedCells[parseInt(i.toString(), 10)].removeAttribute("aria-selected");
        }
        if (this.bdrElement) {
          this.showHideBorders("none");
        }
        this.selectedRowCellIndexes = [];
        this.isCellSelected = false;
        if (!this.isDragged && this.cellselected) {
          this.cellDeselect(cellDeselected, rowCell2, data, cells, foreignKeyData2);
        }
      }
    };
    Selection2.prototype.getSelectedCellsElement = function() {
      var gObj = this.parent;
      var rows = gObj.getDataRows();
      var cells = [];
      for (var i = 0, len = rows.length; i < len; i++) {
        cells = cells.concat([].slice.call(rows[parseInt(i.toString(), 10)].getElementsByClassName("e-cellselectionbackground")));
      }
      return cells;
    };
    Selection2.prototype.mouseMoveHandler = function(e) {
      e.preventDefault();
      this.stopTimer();
      var gBRect = this.parent.element.getBoundingClientRect();
      var x1 = this.x;
      var y1 = this.y;
      var position = getPosition(e);
      var x2 = position.x - gBRect.left;
      var y2 = position.y - gBRect.top;
      var tmp;
      var target = closest(e.target, "tr");
      this.isDragged = true;
      if (!this.isCellDrag) {
        if (!target) {
          target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), "tr");
        }
        if (x1 > x2) {
          tmp = x2;
          x2 = x1;
          x1 = tmp;
        }
        if (y1 > y2) {
          tmp = y2;
          y2 = y1;
          y1 = tmp;
        }
        this.element.style.left = x1 + "px";
        this.element.style.top = y1 + "px";
        this.element.style.width = x2 - x1 + "px";
        this.element.style.height = y2 - y1 + "px";
      }
      if (target && !e.ctrlKey && !e.shiftKey) {
        var rowIndex = parseInt(target.getAttribute(ariaRowIndex), 10) - 1;
        if (!this.isCellDrag) {
          this.hideAutoFill();
          this.selectRowsByRange(this.startDIndex, rowIndex);
          this.isRowDragSelected = true;
        } else {
          var td = parentsUntil(e.target, rowCell);
          if (td) {
            this.startAFCell = this.startCell;
            this.endAFCell = parentsUntil(e.target, rowCell);
            if (rowIndex > -1) {
              this.selectLikeExcel(e, rowIndex, parseInt(td.getAttribute(ariaColIndex), 10) - 1);
            }
          }
        }
      }
      if (!e.ctrlKey && !e.shiftKey && !this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling && !this.parent.enableColumnVirtualization && !this.parent.groupSettings.columns.length && this.isCellDrag) {
        this.updateScrollPosition(e, position, this.parent.getContent());
      }
    };
    Selection2.prototype.updateScrollPosition = function(mouseEvent, position, scrollElement) {
      var _this = this;
      var clientRect = scrollElement.getBoundingClientRect();
      if (clientRect.left >= position.x - 20 - (this.parent.enableRtl && this.parent.height !== "auto" ? getScrollBarWidth() : 0)) {
        this.timer1 = window.setInterval(function() {
          _this.setScrollPosition(scrollElement.firstElementChild, _this.parent.enableRtl ? "right" : "left", mouseEvent);
        }, 200);
      } else if (clientRect.left + scrollElement.clientWidth - 20 - (!this.parent.enableRtl && this.parent.height !== "auto" ? getScrollBarWidth() : 0) < position.x) {
        this.timer1 = window.setInterval(function() {
          _this.setScrollPosition(scrollElement.firstElementChild, _this.parent.enableRtl ? "left" : "right", mouseEvent);
        }, 200);
      }
      if (clientRect.top >= position.y - this.parent.getRowHeight() * 0.5) {
        this.timer2 = window.setInterval(function() {
          _this.setScrollPosition(scrollElement.firstElementChild, "up", mouseEvent);
        }, 200);
      } else if (clientRect.top + scrollElement.clientHeight - this.parent.getRowHeight() * 0.5 - (scrollElement.firstElementChild.scrollWidth > scrollElement.firstElementChild.offsetWidth ? getScrollBarWidth() : 0) <= position.y) {
        this.timer2 = window.setInterval(function() {
          _this.setScrollPosition(scrollElement.firstElementChild, "down", mouseEvent);
        }, 200);
      }
    };
    Selection2.prototype.stopTimer = function() {
      if (this.timer1) {
        window.clearInterval(this.timer1);
        this.timer1 = null;
      }
      if (this.timer2) {
        window.clearInterval(this.timer2);
        this.timer2 = null;
      }
      this.preventFocus = false;
    };
    Selection2.prototype.setScrollPosition = function(scrollElement, direction, mouseEvent) {
      var rowIndex = -1;
      var columnIndex = -1;
      if (this.endAFCell || this.prevECIdxs) {
        rowIndex = this.endAFCell ? parseInt(this.endAFCell.getAttribute("index"), 10) : this.prevECIdxs.rowIndex;
        columnIndex = this.endAFCell ? parseInt(this.endAFCell.getAttribute("aria-colindex"), 10) - 1 : this.prevECIdxs.cellIndex;
      }
      switch (direction) {
        case "up":
          if (mouseEvent && closest(mouseEvent.target, ".e-headercontent")) {
            return;
          }
          if (this.isAutoFillSel && this.startAFCell && this.selectedRowCellIndexes.length && (this.selectedRowCellIndexes.length === 1 && this.startAFCell !== this.startCell || this.selectedRowCellIndexes.length > 1 && this.startAFCell.getBoundingClientRect().top > 0)) {
            rowIndex = parseInt(this.startAFCell.getAttribute("index"), 10);
          }
          rowIndex -= 1;
          if (this.parent.frozenRows) {
            rowIndex += this.parent.frozenRows + 1;
          }
          rowIndex < 1 ? scrollElement.scrollTop = 0 : scrollElement.scrollTop -= this.parent.getRowByIndex(rowIndex).offsetHeight;
          break;
        case "down":
          if (this.isAutoFillSel && this.startAFCell && this.startAFCell !== this.startCell) {
            rowIndex = parseInt(this.startAFCell.getAttribute("index"), 10);
          }
          if (rowIndex < this.parent.getRows().length - 1) {
            rowIndex += 1;
            if (this.isAutoFillSel && this.startAFCell && this.startAFCell !== this.startCell) {
              this.startAFCell = this.parent.getCellFromIndex(rowIndex, this.selectedRowCellIndexes[0].cellIndexes[0]);
            }
            scrollElement.scrollTop += this.parent.getRowByIndex(rowIndex).offsetHeight;
          } else {
            scrollElement.scrollTop = scrollElement.scrollHeight;
          }
          break;
        case "left":
          if (columnIndex > 0 && rowIndex > -1) {
            if (this.isAutoFillSel && this.startAFCell && this.selectedRowCellIndexes.length && (this.selectedRowCellIndexes[0].cellIndexes.length > 0 && this.startAFCell !== this.startCell || this.selectedRowCellIndexes[0].cellIndexes.length > 1 && (!this.parent.enableRtl && this.startAFCell.getBoundingClientRect().left > 0 || this.parent.enableRtl && this.startAFCell.getBoundingClientRect().left < this.parent.element.offsetWidth))) {
              columnIndex = parseInt(this.startAFCell.getAttribute("aria-colindex"), 10) - 1;
            }
            var nextElement_1 = this.findNextCell(scrollElement, direction, columnIndex, rowIndex);
            columnIndex = nextElement_1 ? parseInt(nextElement_1.getAttribute("aria-colindex"), 10) - 1 : -1;
            if (this.parent.enableRtl && nextElement_1) {
              columnIndex < 1 ? scrollElement.scrollLeft = scrollElement.scrollWidth : scrollElement.scrollLeft += nextElement_1.offsetWidth;
            } else if (nextElement_1) {
              columnIndex < 1 ? scrollElement.scrollLeft = 0 : scrollElement.scrollLeft -= nextElement_1.offsetWidth;
            }
          }
          break;
        case "right":
          if (this.isAutoFillSel && this.startAFCell && this.startAFCell !== this.startCell) {
            columnIndex = parseInt(this.startAFCell.getAttribute("aria-colindex"), 10) - 1;
          }
          var currentElement = this.parent.getCellFromIndex(rowIndex, columnIndex);
          var nextElement = this.findNextCell(scrollElement, direction, columnIndex, rowIndex);
          if (nextElement && this.isAutoFillSel && this.startAFCell && this.startAFCell !== this.startCell) {
            this.startAFCell = this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex, parseInt(nextElement.getAttribute("aria-colindex"), 10) - 1);
          }
          columnIndex = nextElement ? parseInt(nextElement.getAttribute("aria-colindex"), 10) - 1 : -1;
          if (this.parent.enableRtl && nextElement) {
            columnIndex < this.parent.columns.length - 1 ? scrollElement.scrollLeft -= currentElement.offsetWidth : scrollElement.scrollLeft = -scrollElement.scrollWidth;
          } else if (nextElement) {
            columnIndex < this.parent.columns.length - 1 ? scrollElement.scrollLeft += currentElement.offsetWidth : scrollElement.scrollLeft = scrollElement.scrollWidth;
          }
          if (this.isAutoFillSel && (columnIndex === this.parent.columns.length - 1 || columnIndex === -1) && this.startAFCell && this.endAFCell) {
            this.positionAFBorders();
            scrollElement.scrollLeft = this.parent.enableRtl ? -scrollElement.scrollWidth : scrollElement.scrollWidth;
          }
          break;
      }
      if (rowIndex > -1 && rowIndex < this.parent.getRows().length && columnIndex > -1) {
        var mouseEvent_1 = { target: this.parent.getCellFromIndex(rowIndex, columnIndex) };
        if (this.isAutoFillSel && mouseEvent_1.target.classList.contains("e-cellselectionbackground") && (direction === "down" && parseInt(mouseEvent_1.target.getAttribute("index"), 10) === this.parent.getRows().length - 1 || direction === "right" && parseInt(mouseEvent_1.target.getAttribute("aria-colindex"), 10) - 1 === this.parent.columns.length - 1)) {
          return;
        }
        this.endAFCell = mouseEvent_1.target;
        this.preventFocus = true;
        this.selectLikeExcel(mouseEvent_1, rowIndex, columnIndex);
      }
    };
    Selection2.prototype.findNextCell = function(scrollElement, direction, columnIndex, rowIndex) {
      var nextElement = this.parent.getCellFromIndex(rowIndex, direction === "left" ? columnIndex - 1 : columnIndex + 1);
      if (nextElement && nextElement.classList.contains("e-hide")) {
        var siblingEles = nextElement.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)");
        var nextEleInd = Array.from(siblingEles).indexOf(nextElement.nextElementSibling);
        if (nextEleInd > 0 && nextEleInd < siblingEles.length - 1) {
          nextElement = siblingEles[nextEleInd + (direction === "left" ? -1 : 1)];
          return nextElement;
        } else {
          scrollElement.scrollLeft = 0;
          return null;
        }
      }
      return nextElement;
    };
    Selection2.prototype.selectLikeExcel = function(e, rowIndex, cellIndex) {
      if (!this.isAutoFillSel) {
        this.clearCellSelection();
        this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex, cellIndex });
        this.drawBorders();
      } else {
        this.showAFBorders();
        this.selectLikeAutoFill(e);
      }
    };
    Selection2.prototype.setFrozenBorders = function(parentEle, border, bdrStr) {
      var width = border.style.borderWidth.toString().split(" ");
      var strCell = ["", "e-leftfreeze", "e-unfreeze", "e-leftfreeze", "e-unfreeze", "e-rightfreeze", "e-rightfreeze"];
      var cells = [].slice.call(parentEle.querySelectorAll(".e-cellselectionbackground." + strCell["" + bdrStr])).filter(function(ele) {
        return ele.style.display === "";
      });
      var fixedCells = [].slice.call(parentEle.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(ele) {
        return ele.style.display === "";
      });
      var isRtl = this.parent.enableRtl;
      if (cells.length) {
        var firstRowIdx = cells[0].getAttribute("index");
        var firstColIdx = cells[0].getAttribute("aria-colindex");
        var lastRowIdx = cells[cells.length - 1].getAttribute("index");
        var lastColIdx = cells[cells.length - 1].getAttribute("aria-colindex");
        for (var i = 0; i < cells.length; i++) {
          if (cells[parseInt(i.toString(), 10)].getAttribute("index") === firstRowIdx && (width.length === 1 || width.length === 3 && parseInt(width[0], 10) === 2 || width.length === 4 && parseInt(width[0], 10) === 2)) {
            cells[parseInt(i.toString(), 10)].classList.add("e-xlsel-top-border");
          }
          if (cells[parseInt(i.toString(), 10)].getAttribute("aria-colindex") === firstColIdx && (width.length === 1 || width.length === 3 && parseInt(width[1], 10) === 2 || width.length === 4 && (!isRtl && parseInt(width[3], 10) === 2 || isRtl && parseInt(width[1], 10) === 2))) {
            cells[parseInt(i.toString(), 10)].classList.add(isRtl ? "e-xlsel-right-border" : "e-xlsel-left-border");
          }
          if (cells[parseInt(i.toString(), 10)].getAttribute("index") === lastRowIdx && (width.length === 1 || width.length === 3 && parseInt(width[2], 10) === 2 || width.length === 4 && parseInt(width[2], 10) === 2)) {
            cells[parseInt(i.toString(), 10)].classList.add("e-xlsel-bottom-border");
          }
          if (cells[parseInt(i.toString(), 10)].getAttribute("aria-colindex") === lastColIdx && (width.length === 1 || width.length === 3 && parseInt(width[1], 10) === 2 || (width.length === 4 && (!isRtl && parseInt(width[1], 10) === 2) || isRtl && parseInt(width[3], 10) === 2))) {
            cells[parseInt(i.toString(), 10)].classList.add(isRtl ? "e-xlsel-left-border" : "e-xlsel-right-border");
          }
        }
      }
      if (fixedCells.length) {
        var firstRowIdx = fixedCells[0].getAttribute("index");
        var firstColIdx = (parseInt(fixedCells[0].getAttribute("aria-colindex"), 10) - 1).toString();
        var lastRowIdx = fixedCells[fixedCells.length - 1].getAttribute("index");
        var lastColIdx = (parseInt(fixedCells[fixedCells.length - 1].getAttribute("aria-colindex"), 10) - 1).toString();
        for (var i = 0; i < fixedCells.length; i++) {
          var idx = fixedCells[parseInt(i.toString(), 10)].getAttribute("index");
          var colIdx = (parseInt(fixedCells[parseInt(i.toString(), 10)].getAttribute("aria-colindex"), 10) - 1).toString();
          if (idx === firstRowIdx && (!this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze") && parentsUntil(parentEle, "e-content") || !parentsUntil(parentEle, "e-content"))) {
            fixedCells[parseInt(i.toString(), 10)].classList.add("e-xlsel-top-border");
          }
          if (idx === lastRowIdx && (!this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze") && parentsUntil(parentEle, "e-headercontent") || !parentsUntil(parentEle, "e-headercontent"))) {
            fixedCells[parseInt(i.toString(), 10)].classList.add("e-xlsel-bottom-border");
          }
          var preCell = fixedCells[parseInt(i.toString(), 10)].parentElement.children[parseInt(colIdx, 10) - 1];
          if (colIdx === firstColIdx && (!preCell || preCell && !preCell.classList.contains("e-cellselectionbackground"))) {
            fixedCells[parseInt(i.toString(), 10)].classList.add(isRtl ? "e-xlsel-right-border" : "e-xlsel-left-border");
          }
          var nextCell = fixedCells[parseInt(i.toString(), 10)].parentElement.children[parseInt(colIdx, 10) + 1];
          if (colIdx === lastColIdx && (!nextCell || nextCell && !nextCell.classList.contains("e-cellselectionbackground"))) {
            fixedCells[parseInt(i.toString(), 10)].classList.add(isRtl ? "e-xlsel-left-border" : "e-xlsel-right-border");
          }
        }
      }
    };
    Selection2.prototype.refreshFrozenBorders = function() {
      if (this.bdrElement) {
        this.setFrozenBorders(this.parent.getContentTable(), this.bdrElement, "1");
        if (this.parent.isFrozenGrid() && this.parent.getFrozenMode() === leftRight) {
          this.setFrozenBorders(this.parent.getContentTable(), this.frcBdrElement, "5");
        }
        if (this.parent.frozenRows) {
          this.setFrozenBorders(this.parent.getHeaderTable(), this.fhBdrElement, "3");
          if (this.parent.isFrozenGrid() && this.parent.getFrozenMode() === leftRight) {
            this.setFrozenBorders(this.parent.getHeaderTable(), this.frhBdrElement, "6");
          }
        }
      }
    };
    Selection2.prototype.drawBorders = function() {
      if (this.selectionSettings.cellSelectionMode === "BoxWithBorder" && this.selectedRowCellIndexes.length && !this.parent.isEdit) {
        this.parent.element.classList.add("e-enabledboxbdr");
        if (!this.bdrElement) {
          this.createBorders();
        }
        this.positionBorders();
        if (this.parent.isFrozenGrid()) {
          this.showHideBorders("none", true);
          this.refreshFrozenBorders();
        }
      } else {
        this.showHideBorders("none");
      }
    };
    Selection2.prototype.isLastCell = function(cell) {
      var cells = [].slice.call(cell.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));
      return cells[cells.length - 1] === cell;
    };
    Selection2.prototype.isLastRow = function(cell) {
      var rows = [].slice.call(closest(cell, tbody).querySelectorAll(".e-row:not(.e-hiddenrow)"));
      return cell.parentElement === rows[rows.length - 1];
    };
    Selection2.prototype.isFirstRow = function(cell) {
      var rows = [].slice.call(closest(cell, tbody).querySelectorAll(".e-row:not(.e-hiddenrow)"));
      return cell.parentElement === rows[0];
    };
    Selection2.prototype.isFirstCell = function(cell) {
      var cells = [].slice.call(cell.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));
      return cells[0] === cell;
    };
    Selection2.prototype.setBorders = function(parentEle, border, bdrStr) {
      var cells = [].slice.call(parentEle.getElementsByClassName("e-cellselectionbackground")).filter(function(ele) {
        return ele.style.display === "";
      });
      if (cells.length && this.parent.isFrozenGrid()) {
        var strCell = ["", "e-leftfreeze", "e-unfreeze", "e-leftfreeze", "e-unfreeze", "e-rightfreeze", "e-rightfreeze"];
        cells = [].slice.call(parentEle.querySelectorAll(".e-cellselectionbackground." + strCell["" + bdrStr] + ":not(.e-hide)")).filter(function(ele) {
          return ele.style.display === "";
        });
      }
      if (cells.length) {
        var isFrozen = this.parent.isFrozenGrid();
        var start = cells[0];
        var end = cells[cells.length - 1];
        var stOff = start.getBoundingClientRect();
        var endOff = end.getBoundingClientRect();
        var parentOff = start.offsetParent.getBoundingClientRect();
        if (start.offsetParent.classList.contains("e-content") || start.offsetParent.classList.contains("e-headercontent")) {
          parentOff = start.offsetParent.querySelector("table").getBoundingClientRect();
        }
        var rowHeight2 = !isFrozen && this.isLastRow(end) && (bdrStr === "1" || bdrStr === "2" || bdrStr === "5") ? 2 : 0;
        var topOffSet = 0;
        var leftOffset = isFrozen && (bdrStr === "2" || bdrStr === "4") && this.isFirstCell(start) ? 1 : 0;
        var rightOffset = (this.parent.getFrozenMode() === "Right" && (bdrStr === "1" || bdrStr === "3") || this.parent.getFrozenMode() === leftRight && (bdrStr === "5" || bdrStr === "6")) && this.isFirstCell(start) ? 1 : 0;
        if (this.parent.enableRtl) {
          border.style.right = parentOff.right - stOff.right - leftOffset + "px";
          border.style.width = stOff.right - endOff.left + leftOffset + 1 + "px";
        } else {
          border.style.left = stOff.left - parentOff.left - leftOffset - rightOffset + "px";
          border.style.width = endOff.right - stOff.left + leftOffset - rightOffset + 1 + "px";
        }
        border.style.top = stOff.top - parentOff.top - topOffSet + "px";
        border.style.height = endOff.top - stOff.top > 0 ? endOff.top - parentOff.top + endOff.height + (isFrozen ? 0 : 1) - (stOff.top - parentOff.top) - rowHeight2 + topOffSet + "px" : endOff.height + topOffSet - rowHeight2 + (isFrozen ? 0 : 1) + "px";
        this.selectDirection += bdrStr;
      } else {
        border.style.display = "none";
      }
    };
    Selection2.prototype.positionBorders = function() {
      this.updateStartEndCells();
      if (!this.startCell || !this.bdrElement || !this.selectedRowCellIndexes.length) {
        return;
      }
      this.selectDirection = "";
      this.showHideBorders("");
      this.setBorders(this.parent.getContentTable(), this.bdrElement, "1");
      if (this.parent.isFrozenGrid()) {
        this.setBorders(this.parent.getContentTable(), this.mcBdrElement, "2");
        if (this.parent.getFrozenMode() === leftRight) {
          this.setBorders(this.parent.getContentTable(), this.frcBdrElement, "5");
        }
      }
      if (this.parent.frozenRows) {
        this.setBorders(this.parent.getHeaderTable(), this.fhBdrElement, "3");
        if (this.parent.isFrozenGrid()) {
          this.setBorders(this.parent.getHeaderTable(), this.mhBdrElement, "4");
          if (this.parent.getFrozenMode() === leftRight) {
            this.setBorders(this.parent.getHeaderTable(), this.frhBdrElement, "6");
          }
        }
      }
      this.applyBorders(this.selectDirection);
    };
    Selection2.prototype.applyBothFrozenBorders = function(str) {
      var rtl = this.parent.enableRtl;
      switch (str.length) {
        case 6:
          {
            this.bdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;
            this.mcBdrElement.style.borderWidth = this.bottom;
            this.fhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;
            this.mhBdrElement.style.borderWidth = this.top;
            this.frcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;
            this.frhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;
          }
          break;
        case 4:
          {
            if (str.includes("1") && str.includes("2") && str.includes("3") && str.includes("4")) {
              this.fhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;
              this.mhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;
              this.bdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;
              this.mcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;
            }
            if (str.includes("2") && str.includes("4") && str.includes("5") && str.includes("6")) {
              this.mcBdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;
              this.mhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;
              this.frcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;
              this.frhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;
            }
          }
          break;
        case 3:
          {
            this.bdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;
            this.mcBdrElement.style.borderWidth = this.top_bottom;
            this.frcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;
            if (this.parent.frozenRows) {
              this.fhBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;
              this.mhBdrElement.style.borderWidth = this.top_bottom;
              this.frcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;
            }
          }
          break;
        case 2:
          {
            if (str.includes("1")) {
              this.mcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;
              if (this.parent.frozenRows) {
                this.fhBdrElement.style.borderWidth = this.top_right_left;
              }
            }
            if (str.includes("2")) {
              this.bdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;
              this.frcBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;
              if (this.parent.frozenRows) {
                this.mhBdrElement.style.borderWidth = this.top_right_left;
              }
            }
            if (str.includes("3")) {
              this.mhBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;
              this.bdrElement.style.borderWidth = this.right_bottom_left;
            }
            if (str.includes("4")) {
              this.fhBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;
              this.frhBdrElement.style.borderWidth = rtl ? this.top_bottom_left : this.top_right_bottom;
              this.mcBdrElement.style.borderWidth = this.right_bottom_left;
            }
            if (str.includes("5")) {
              this.mcBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;
              if (this.parent.frozenRows) {
                this.frhBdrElement.style.borderWidth = this.top_right_left;
              }
            }
            if (str.includes("6")) {
              this.mhBdrElement.style.borderWidth = rtl ? this.top_right_bottom : this.top_bottom_left;
              this.frcBdrElement.style.borderWidth = this.right_bottom_left;
            }
          }
          break;
        default:
          this.bdrElement.style.borderWidth = this.all_border;
          this.mcBdrElement.style.borderWidth = this.all_border;
          this.frcBdrElement.style.borderWidth = this.all_border;
          if (this.parent.frozenRows) {
            this.fhBdrElement.style.borderWidth = this.all_border;
            this.mhBdrElement.style.borderWidth = this.all_border;
            this.frhBdrElement.style.borderWidth = this.all_border;
          }
          break;
      }
    };
    Selection2.prototype.applyBorders = function(str) {
      var rtl = this.parent.enableRtl;
      if (this.parent.getFrozenMode() === leftRight) {
        this.applyBothFrozenBorders(str);
      } else {
        switch (str.length) {
          case 4:
            {
              if (this.parent.getFrozenMode() === "Right") {
                this.bdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;
                this.mcBdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;
                this.fhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;
                this.mhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;
              } else {
                this.bdrElement.style.borderWidth = rtl ? this.right_bottom : this.bottom_left;
                this.mcBdrElement.style.borderWidth = rtl ? this.bottom_left : this.right_bottom;
                this.fhBdrElement.style.borderWidth = rtl ? this.top_right : this.top_left;
                this.mhBdrElement.style.borderWidth = rtl ? this.top_left : this.top_right;
              }
            }
            break;
          case 2:
            {
              if (this.parent.getFrozenMode() === "Right") {
                this.bdrElement.style.borderWidth = str.includes("2") ? rtl ? this.top_bottom_left : this.top_right_bottom : this.right_bottom_left;
                this.mcBdrElement.style.borderWidth = str.includes("1") ? rtl ? this.top_right_bottom : this.top_bottom_left : this.right_bottom_left;
                if (this.parent.frozenRows) {
                  this.fhBdrElement.style.borderWidth = str.includes("1") ? this.top_right_left : rtl ? this.top_bottom_left : this.top_right_bottom;
                  this.mhBdrElement.style.borderWidth = str.includes("2") ? this.top_right_left : rtl ? this.top_right_bottom : this.top_bottom_left;
                }
              } else {
                this.bdrElement.style.borderWidth = str.includes("2") ? rtl ? this.top_right_bottom : this.top_bottom_left : this.right_bottom_left;
                if (this.parent.isFrozenGrid()) {
                  this.mcBdrElement.style.borderWidth = str.includes("1") ? rtl ? this.top_bottom_left : this.top_right_bottom : this.right_bottom_left;
                }
                if (this.parent.frozenRows) {
                  this.fhBdrElement.style.borderWidth = str.includes("1") ? this.top_right_left : rtl ? this.top_right_bottom : this.top_bottom_left;
                  if (this.parent.isFrozenGrid()) {
                    this.mhBdrElement.style.borderWidth = str.includes("2") ? this.top_right_left : rtl ? this.top_bottom_left : this.top_right_bottom;
                  }
                }
              }
            }
            break;
          default:
            this.bdrElement.style.borderWidth = this.all_border;
            if (this.parent.isFrozenGrid()) {
              this.mcBdrElement.style.borderWidth = this.all_border;
            }
            if (this.parent.frozenRows) {
              this.fhBdrElement.style.borderWidth = this.all_border;
              if (this.parent.isFrozenGrid()) {
                this.mhBdrElement.style.borderWidth = this.all_border;
              }
            }
            break;
        }
      }
    };
    Selection2.prototype.createBorders = function() {
      if (!this.bdrElement) {
        var selectionBorder = createElement("div", {
          className: "e-xlsel",
          id: this.parent.element.id + "_bdr"
        });
        selectionBorder.style.cssText = "width: 2px; border-width: 0;";
        this.bdrElement = this.parent.getContentTable().parentElement.appendChild(selectionBorder);
        if (this.parent.isFrozenGrid()) {
          var middleContentBorder = createElement("div", {
            className: "e-xlsel",
            id: this.parent.element.id + "_mcbdr"
          });
          middleContentBorder.style.cssText = "height: 2px; border-width: 0;";
          this.mcBdrElement = this.parent.getContentTable().parentElement.appendChild(middleContentBorder);
          if (this.parent.getFrozenMode() === leftRight) {
            var frozenRightContentBorder = createElement("div", {
              className: "e-xlsel",
              id: this.parent.element.id + "_frcbdr"
            });
            frozenRightContentBorder.style.cssText = "height: 2px; border-width: 0;";
            this.frcBdrElement = this.parent.getContentTable().parentElement.appendChild(frozenRightContentBorder);
          }
        }
        if (this.parent.frozenRows) {
          var frozenHeaderBorder = createElement("div", {
            className: "e-xlsel",
            id: this.parent.element.id + "_fhbdr"
          });
          frozenHeaderBorder.style.height = "2px";
          this.fhBdrElement = this.parent.getHeaderTable().parentElement.appendChild(frozenHeaderBorder);
        }
        if (this.parent.frozenRows && this.parent.isFrozenGrid()) {
          var middleHeaderBorder = createElement("div", {
            className: "e-xlsel",
            id: this.parent.element.id + "_mhbdr"
          });
          middleHeaderBorder.style.height = "2px";
          this.mhBdrElement = this.parent.getHeaderTable().parentElement.appendChild(middleHeaderBorder);
          if (this.parent.getFrozenMode() === leftRight) {
            var frozenRightHeaderBorder = createElement("div", {
              className: "e-xlsel",
              id: this.parent.element.id + "_frhbdr"
            });
            frozenRightHeaderBorder.style.height = "2px";
            this.frhBdrElement = this.parent.getHeaderTable().parentElement.appendChild(frozenRightHeaderBorder);
          }
        }
      }
    };
    Selection2.prototype.showHideBorders = function(display, freeze) {
      if (this.bdrElement) {
        this.bdrElement.style.display = display;
        if (this.parent.isFrozenGrid()) {
          var parentEle = this.parent.getContentTable();
          removeClass(parentEle.querySelectorAll(".e-xlsel-top-border"), "e-xlsel-top-border");
          removeClass(parentEle.querySelectorAll(".e-xlsel-left-border"), "e-xlsel-left-border");
          removeClass(parentEle.querySelectorAll(".e-xlsel-right-border"), "e-xlsel-right-border");
          removeClass(parentEle.querySelectorAll(".e-xlsel-bottom-border"), "e-xlsel-bottom-border");
          if (!freeze) {
            this.mcBdrElement.style.display = display;
          }
          if (this.parent.getFrozenMode() === leftRight) {
            this.frcBdrElement.style.display = display;
          }
        }
        if (this.parent.frozenRows) {
          var parentEle = this.parent.getHeaderTable();
          removeClass(parentEle.querySelectorAll(".e-xlsel-top-border"), "e-xlsel-top-border");
          removeClass(parentEle.querySelectorAll(".e-xlsel-left-border"), "e-xlsel-left-border");
          removeClass(parentEle.querySelectorAll(".e-xlsel-right-border"), "e-xlsel-right-border");
          removeClass(parentEle.querySelectorAll(".e-xlsel-bottom-border"), "e-xlsel-bottom-border");
          this.fhBdrElement.style.display = display;
        }
        if (this.parent.frozenRows && this.parent.isFrozenGrid()) {
          if (!freeze) {
            this.mhBdrElement.style.display = display;
          }
          if (this.parent.getFrozenMode() === leftRight) {
            this.frhBdrElement.style.display = display;
          }
        }
      }
    };
    Selection2.prototype.drawAFBorders = function() {
      if (!this.bdrAFBottom) {
        this.createAFBorders();
      }
      this.positionAFBorders();
    };
    Selection2.prototype.positionAFBorders = function() {
      if (!this.startCell || !this.bdrAFLeft) {
        return;
      }
      var stOff = this.startAFCell.getBoundingClientRect();
      var endOff = this.endAFCell.getBoundingClientRect();
      var top = endOff.top - stOff.top > 0 ? 1 : 0;
      var firstCellTop = endOff.top - stOff.top >= 0 && (parentsUntil(this.startAFCell, movableContent) || parentsUntil(this.startAFCell, "e-frozencontent")) && this.isFirstRow(this.startAFCell) ? 1.5 : 0;
      var firstCellLeft = (parentsUntil(this.startAFCell, movableContent) || parentsUntil(this.startAFCell, movableHeader)) && this.isFirstCell(this.startAFCell) ? 1 : 0;
      var rowHeight2 = this.isLastRow(this.endAFCell) && (parentsUntil(this.endAFCell, movableContent) || parentsUntil(this.endAFCell, "e-frozencontent")) ? 2 : 0;
      var parentOff = this.startAFCell.offsetParent.getBoundingClientRect();
      var parentRect = this.parent.element.getBoundingClientRect();
      var sTop = this.startAFCell.offsetParent.parentElement.scrollTop;
      var sLeft = this.startAFCell.offsetParent.parentElement.scrollLeft;
      var scrollTop = sTop - this.startAFCell.offsetTop;
      var scrollLeft = sLeft - this.startAFCell.offsetLeft;
      var totalHeight = this.parent.element.clientHeight - getScrollBarWidth();
      if (this.parent.allowPaging) {
        totalHeight -= this.parent.element.querySelector(".e-pager").offsetHeight;
      }
      if (this.parent.aggregates.length) {
        totalHeight -= this.parent.getFooterContent().offsetHeight;
      }
      var totalWidth = this.parent.element.clientWidth - (this.parent.height !== "auto" ? getScrollBarWidth() : 0);
      scrollTop = scrollTop > 0 ? Math.floor(scrollTop) - 1 : 0;
      scrollLeft = scrollLeft > 0 ? scrollLeft : 0;
      var left = stOff.left - parentRect.left;
      if (!this.parent.enableRtl) {
        this.bdrAFLeft.style.left = left - firstCellLeft + scrollLeft - 1 + "px";
        this.bdrAFRight.style.left = endOff.left - parentRect.left - 2 + endOff.width + "px";
        this.bdrAFRight.style.width = totalWidth <= parseInt(this.bdrAFRight.style.left, 10) ? "0px" : "2px";
        this.bdrAFTop.style.left = left + scrollLeft - 0.5 + "px";
        this.bdrAFTop.style.width = parseInt(this.bdrAFRight.style.left, 10) - parseInt(this.bdrAFLeft.style.left, 10) - firstCellLeft + 1 + "px";
        if (totalWidth <= parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10)) {
          var leftRemove = parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10) - totalWidth;
          this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) - leftRemove + "px";
        }
      } else {
        var scrolloffSet = parentsUntil(this.startAFCell, movableContent) || parentsUntil(this.startAFCell, movableHeader) ? stOff.right - this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width - parentRect.left : 0;
        this.bdrAFLeft.style.right = parentRect.right - endOff.right - 2 + endOff.width + "px";
        this.bdrAFLeft.style.width = totalWidth <= parseInt(this.bdrAFLeft.style.right, 10) ? "0px" : "2px";
        var borderAFRightValue = parentRect.right - stOff.right - firstCellLeft + scrolloffSet - 1;
        borderAFRightValue > 0 ? this.bdrAFRight.style.right = borderAFRightValue + "px" : this.bdrAFRight.style.right = "0px";
        this.bdrAFTop.style.left = endOff.left - parentRect.left - 0.5 + "px";
        this.bdrAFTop.style.width = parseInt(this.bdrAFLeft.style.right, 10) - parseInt(this.bdrAFRight.style.right, 10) - firstCellLeft + 1 + "px";
        if (parseInt(this.bdrAFTop.style.left, 10) < 0) {
          this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) + parseInt(this.bdrAFTop.style.left, 10) + "px";
          if (this.parent.height !== "auto" && getScrollBarWidth()) {
            this.bdrAFTop.style.left = getScrollBarWidth() + "px";
            this.bdrAFTop.style.width = parseInt(this.bdrAFTop.style.width, 10) - getScrollBarWidth() + "px";
          } else {
            this.bdrAFTop.style.left = "0px";
          }
        }
      }
      this.bdrAFLeft.style.top = stOff.top - parentRect.top - firstCellTop + scrollTop + "px";
      this.bdrAFLeft.style.height = endOff.top - stOff.top > 0 ? endOff.top - parentOff.top + endOff.height + 1 - (stOff.top - parentOff.top) + firstCellTop - rowHeight2 - scrollTop + "px" : endOff.height + firstCellTop - rowHeight2 - scrollTop + "px";
      this.bdrAFRight.style.top = this.bdrAFLeft.style.top;
      this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + "px";
      this.bdrAFTop.style.top = this.bdrAFRight.style.top;
      this.bdrAFBottom.style.left = this.bdrAFTop.style.left;
      this.bdrAFBottom.style.top = parseFloat(this.bdrAFLeft.style.top) + parseFloat(this.bdrAFLeft.style.height) - top - 1 + "px";
      this.bdrAFBottom.style.width = totalHeight <= parseFloat(this.bdrAFBottom.style.top) ? "0px" : this.bdrAFTop.style.width;
      if (totalHeight <= parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10)) {
        var topRemove = parseInt(this.bdrAFLeft.style.height, 10) + parseInt(this.bdrAFLeft.style.top, 10) - totalHeight;
        this.bdrAFLeft.style.height = parseInt(this.bdrAFLeft.style.height, 10) - topRemove + "px";
        this.bdrAFRight.style.height = parseInt(this.bdrAFLeft.style.height, 10) + "px";
      }
    };
    Selection2.prototype.createAFBorders = function() {
      if (!this.bdrAFLeft) {
        var leftSelectionBorder = createElement("div", {
          className: "e-xlselaf",
          id: this.parent.element.id + "_bdrafleft"
        });
        leftSelectionBorder.style.width = "2px";
        this.bdrAFLeft = this.parent.element.appendChild(leftSelectionBorder);
        var rightSelectionBorder = createElement("div", {
          className: "e-xlselaf",
          id: this.parent.element.id + "_bdrafright"
        });
        rightSelectionBorder.style.width = "2px";
        this.bdrAFRight = this.parent.element.appendChild(rightSelectionBorder);
        var bottomSelectionBorder = createElement("div", {
          className: "e-xlselaf",
          id: this.parent.element.id + "_bdrafbottom"
        });
        bottomSelectionBorder.style.height = "2px";
        this.bdrAFBottom = this.parent.element.appendChild(bottomSelectionBorder);
        var topSelectionBorder = createElement("div", {
          className: "e-xlselaf",
          id: this.parent.element.id + "_bdraftop"
        });
        topSelectionBorder.style.height = "2px";
        this.bdrAFTop = this.parent.element.appendChild(topSelectionBorder);
      }
    };
    Selection2.prototype.destroyAutoFillElements = function() {
      if (this.bdrAFLeft) {
        this.bdrAFLeft.remove();
        this.bdrAFRight.remove();
        this.bdrAFBottom.remove();
        this.bdrAFTop.remove();
        this.bdrAFLeft = this.bdrAFRight = this.bdrAFBottom = this.bdrAFTop = null;
      }
      if (this.autofill) {
        this.autofill.remove();
        this.autofill = null;
      }
    };
    Selection2.prototype.showAFBorders = function() {
      if (this.bdrAFLeft) {
        this.bdrAFLeft.style.display = "";
        this.bdrAFRight.style.display = "";
        this.bdrAFBottom.style.display = "";
        this.bdrAFTop.style.display = "";
      }
    };
    Selection2.prototype.hideAFBorders = function() {
      if (this.bdrAFLeft) {
        this.bdrAFLeft.style.display = "none";
        this.bdrAFRight.style.display = "none";
        this.bdrAFBottom.style.display = "none";
        this.bdrAFTop.style.display = "none";
      }
    };
    Selection2.prototype.updateValue = function(rIdx, cIdx, cell) {
      var args = this.createBeforeAutoFill(rIdx, cIdx, cell);
      if (!args.cancel) {
        var col = this.parent.getColumnByIndex(cIdx);
        if (this.parent.editModule && cell) {
          if (col.type === "number") {
            this.parent.editModule.updateCell(rIdx, col.field, parseFloat(args.value));
          } else {
            this.parent.editModule.updateCell(rIdx, col.field, args.value);
          }
        }
      }
    };
    Selection2.prototype.createBeforeAutoFill = function(rowIndex, colIndex, cell) {
      var col = this.parent.getColumnByIndex(colIndex);
      var args = {
        column: col,
        value: cell.innerText
      };
      this.parent.trigger(beforeAutoFill, args);
      return args;
    };
    Selection2.prototype.getAutoFillCells = function(rowIndex, startCellIdx) {
      var cls = ".e-cellselectionbackground";
      var cells = [].slice.call(this.parent.getDataRows()[parseInt(rowIndex.toString(), 10)].querySelectorAll(cls));
      return cells;
    };
    Selection2.prototype.selectLikeAutoFill = function(e, isApply) {
      var startrowIdx = parseInt(parentsUntil(this.startAFCell, row).getAttribute(ariaRowIndex), 10) - 1;
      var startCellIdx = parseInt(this.startAFCell.getAttribute(ariaColIndex), 10) - 1;
      var endrowIdx = parseInt(parentsUntil(this.endAFCell, row).getAttribute(ariaRowIndex), 10) - 1;
      var endCellIdx = parseInt(this.endAFCell.getAttribute(ariaColIndex), 10) - 1;
      var rowLen = this.selectedRowCellIndexes.length - 1;
      var colLen = this.selectedRowCellIndexes[0].cellIndexes.length - 1;
      switch (true) {
        //direction
        case (!isApply && this.endAFCell.classList.contains("e-cellselectionbackground") && !!parentsUntil(e.target, rowCell)):
          this.startAFCell = this.parent.getCellFromIndex(startrowIdx, startCellIdx);
          this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, startCellIdx + colLen);
          this.drawAFBorders();
          break;
        case (this.autoFillRLselection && startCellIdx + colLen < endCellIdx && //right
        endCellIdx - startCellIdx - colLen + 1 > endrowIdx - startrowIdx - rowLen && endCellIdx - startCellIdx - colLen + 1 > startrowIdx - endrowIdx):
          this.endAFCell = this.parent.getCellFromIndex(startrowIdx + rowLen, endCellIdx);
          endrowIdx = parseInt(parentsUntil(this.endAFCell, row).getAttribute(ariaRowIndex), 10) - 1;
          endCellIdx = parseInt(this.endAFCell.getAttribute(ariaColIndex), 10) - 1;
          if (!isApply) {
            this.drawAFBorders();
          } else {
            var cellIdx = parseInt(this.endCell.getAttribute(ariaColIndex), 10) - 1;
            for (var i = startrowIdx; i <= endrowIdx; i++) {
              var cells = this.getAutoFillCells(i, startCellIdx);
              var c = 0;
              for (var j = cellIdx + 1; j <= endCellIdx; j++) {
                if (c > colLen) {
                  c = 0;
                }
                this.updateValue(i, j, cells[parseInt(c.toString(), 10)]);
                c++;
              }
            }
            this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: this.startCellIndex }, { rowIndex: endrowIdx, cellIndex: endCellIdx });
          }
          break;
        case (this.autoFillRLselection && startCellIdx > endCellIdx && // left
        startCellIdx - endCellIdx + 1 > endrowIdx - startrowIdx - rowLen && //left top
        startCellIdx - endCellIdx + 1 > startrowIdx - endrowIdx):
          this.startAFCell = this.parent.getCellFromIndex(startrowIdx, endCellIdx);
          this.endAFCell = this.endCell;
          if (!isApply) {
            this.drawAFBorders();
          } else {
            for (var i = startrowIdx; i <= startrowIdx + rowLen; i++) {
              var cells = this.getAutoFillCells(i, startCellIdx);
              cells.reverse();
              var c = 0;
              for (var j = this.startCellIndex - 1; j >= endCellIdx; j--) {
                if (c > colLen) {
                  c = 0;
                }
                this.updateValue(i, j, cells[parseInt(c.toString(), 10)]);
                c++;
              }
            }
            this.selectCellsByRange({ rowIndex: startrowIdx, cellIndex: endCellIdx }, { rowIndex: startrowIdx + rowLen, cellIndex: this.startCellIndex + colLen });
          }
          break;
        case startrowIdx > endrowIdx:
          this.startAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx);
          this.endAFCell = this.endCell;
          if (!isApply) {
            this.drawAFBorders();
          } else {
            var trIdx = parseInt(this.endCell.parentElement.getAttribute(ariaRowIndex), 10) - 1;
            var r = trIdx;
            for (var i = startrowIdx - 1; i >= endrowIdx; i--) {
              if (r === this.startIndex - 1) {
                r = trIdx;
              }
              var cells = this.getAutoFillCells(r, startCellIdx);
              var c = 0;
              r--;
              for (var j = this.startCellIndex; j <= this.startCellIndex + colLen; j++) {
                this.updateValue(i, j, cells[parseInt(c.toString(), 10)]);
                c++;
              }
            }
            this.selectCellsByRange({ rowIndex: endrowIdx, cellIndex: startCellIdx + colLen }, { rowIndex: startrowIdx + rowLen, cellIndex: startCellIdx });
          }
          break;
        default:
          this.endAFCell = this.parent.getCellFromIndex(endrowIdx, startCellIdx + colLen);
          if (!isApply) {
            this.drawAFBorders();
          } else {
            var trIdx = parseInt(this.endCell.parentElement.getAttribute(ariaRowIndex), 10) - 1;
            var r = this.startIndex;
            for (var i = trIdx + 1; i <= endrowIdx; i++) {
              if (r === trIdx + 1) {
                r = this.startIndex;
              }
              var cells = this.getAutoFillCells(r, startCellIdx);
              r++;
              var c = 0;
              for (var m = this.startCellIndex; m <= this.startCellIndex + colLen; m++) {
                this.updateValue(i, m, cells[parseInt(c.toString(), 10)]);
                c++;
              }
            }
            this.selectCellsByRange({ rowIndex: trIdx - rowLen, cellIndex: startCellIdx }, { rowIndex: endrowIdx, cellIndex: startCellIdx + colLen });
          }
          break;
      }
    };
    Selection2.prototype.mouseUpHandler = function(e) {
      this.stopTimer();
      document.body.classList.remove("e-disableuserselect");
      if (this.element && !isNullOrUndefined(this.element.parentElement)) {
        remove(this.element);
      }
      if (this.isDragged && this.selectedRowCellIndexes.length === 1 && this.selectedRowCellIndexes[0].cellIndexes.length === 1) {
        this.mUPTarget = parentsUntil(e.target, rowCell);
      } else {
        this.mUPTarget = null;
      }
      var closeRowCell = closest(e.target, ".e-rowcell");
      if (this.isDragged && !this.isAutoFillSel && this.selectionSettings.mode === "Cell" && closeRowCell && closeRowCell.classList.contains(rowCell)) {
        var rowIndex = parseInt(closeRowCell.parentElement.getAttribute(ariaRowIndex), 10) - 1;
        var cellIndex = parseInt(closeRowCell.getAttribute(ariaColIndex), 10) - 1;
        this.isDragged = false;
        this.clearCellSelection();
        this.selectCellsByRange({ rowIndex: this.startDIndex, cellIndex: this.startDCellIndex }, { rowIndex, cellIndex });
      }
      this.isDragged = false;
      this.updateAutoFillPosition();
      if (this.isAutoFillSel) {
        this.preventFocus = true;
        var lastCell = parentsUntil(e.target, rowCell);
        this.endAFCell = lastCell ? lastCell : this.endCell === this.endAFCell ? this.startAFCell : this.endAFCell;
        this.startAFCell = this.startCell;
        if (!isNullOrUndefined(this.endAFCell) && !isNullOrUndefined(this.startAFCell)) {
          this.updateStartCellsIndex();
          this.selectLikeAutoFill(e, true);
          this.updateAutoFillPosition();
          this.hideAFBorders();
          this.positionBorders();
          if (this.parent.isFrozenGrid()) {
            this.showHideBorders("none", true);
            this.refreshFrozenBorders();
          }
          if (this.parent.aggregates.length > 0) {
            this.parent.notify(refreshFooterRenderer, {});
          }
        }
        this.isAutoFillSel = false;
        this.preventFocus = false;
      }
      EventHandler.remove(this.parent.getContent(), "mousemove", this.mouseMoveHandler);
      if (this.parent.frozenRows) {
        EventHandler.remove(this.parent.getHeaderContent(), "mousemove", this.mouseMoveHandler);
      }
      EventHandler.remove(document, "mouseup", this.mouseUpHandler);
    };
    Selection2.prototype.hideAutoFill = function() {
      if (this.autofill) {
        this.autofill.style.display = "none";
      }
    };
    Selection2.prototype.updateAutoFillPosition = function() {
      if (this.parent.enableAutoFill && !this.parent.isEdit && this.selectionSettings.cellSelectionMode.indexOf("Box") > -1 && !this.isRowType() && !this.isSingleSel() && this.selectedRowCellIndexes.length) {
        var index = parseInt(this.target.getAttribute(ariaColIndex), 10) - 1;
        var rindex = parseInt(this.target.getAttribute("index"), 10);
        var rowIndex = this.selectedRowCellIndexes[this.selectedRowCellIndexes.length - 1].rowIndex;
        var cells = this.getAutoFillCells(rowIndex, index).filter(function(ele) {
          return ele.style.display === "";
        });
        var col = this.parent.getColumnByIndex(index);
        var isFrozenCol = col.getFreezeTableName() === "movable";
        var isFrozenRow = rindex < this.parent.frozenRows;
        var isFrozenRight = this.parent.getFrozenMode() === leftRight && col.getFreezeTableName() === frozenRight;
        if (!select("#" + this.parent.element.id + "_autofill", parentsUntil(this.target, table))) {
          if (select("#" + this.parent.element.id + "_autofill", this.parent.element)) {
            select("#" + this.parent.element.id + "_autofill", this.parent.element).remove();
          }
          this.autofill = createElement("div", { className: "e-autofill", id: this.parent.element.id + "_autofill" });
          this.autofill.style.display = "none";
          if (this.target.classList.contains("e-leftfreeze") || this.target.classList.contains("e-rightfreeze") || this.target.classList.contains("e-fixedfreeze")) {
            this.autofill.classList.add("e-freeze-autofill");
          }
          if (!isFrozenRow) {
            if (!isFrozenCol) {
              this.parent.getContentTable().parentElement.appendChild(this.autofill);
            } else {
              this.parent.getContentTable().parentElement.appendChild(this.autofill);
            }
          } else {
            if (!isFrozenCol) {
              this.parent.getHeaderTable().parentElement.appendChild(this.autofill);
            } else {
              this.parent.getHeaderTable().parentElement.appendChild(this.autofill);
            }
          }
          if (isFrozenRight) {
            if (isFrozenRow) {
              this.parent.getHeaderTable().parentElement.appendChild(this.autofill);
            } else {
              this.parent.getContentTable().parentElement.appendChild(this.autofill);
            }
          }
        }
        var cell = cells[cells.length - 1];
        if (cell && cell.offsetParent) {
          var clientRect = cell.getBoundingClientRect();
          var parentOff = cell.offsetParent.getBoundingClientRect();
          if (cell.offsetParent.classList.contains("e-content") || cell.offsetParent.classList.contains("e-headercontent")) {
            parentOff = cell.offsetParent.querySelector("table").getBoundingClientRect();
          }
          var colWidth = this.isLastCell(cell) ? 4 : 0;
          var rowHeight2 = this.isLastRow(cell) ? 3 : 0;
          if (!this.parent.enableRtl) {
            this.autofill.style.left = clientRect.left - parentOff.left + clientRect.width - 4 - colWidth + "px";
          } else {
            this.autofill.style.right = parentOff.right - clientRect.right + clientRect.width - 4 - colWidth + "px";
          }
          this.autofill.style.top = clientRect.top - parentOff.top + clientRect.height - 5 - rowHeight2 + "px";
        }
        this.autofill.style.display = "";
      } else {
        this.hideAutoFill();
      }
    };
    Selection2.prototype.mouseDownHandler = function(e) {
      this.mouseButton = e.button;
      var target = e.target;
      var gObj = this.parent;
      var isDrag;
      var gridElement = parentsUntil(target, "e-grid");
      if (gridElement && gridElement.id !== gObj.element.id || parentsUntil(target, headerContent) && !this.parent.frozenRows || parentsUntil(target, "e-editedbatchcell") || parentsUntil(target, editedRow)) {
        return;
      }
      if (e.shiftKey || e.ctrlKey) {
        e.preventDefault();
      }
      if (parentsUntil(target, rowCell) && !e.shiftKey && !e.ctrlKey) {
        if (gObj.selectionSettings.cellSelectionMode.indexOf("Box") > -1 && !this.isRowType() && !this.isSingleSel()) {
          this.isCellDrag = true;
          isDrag = true;
        } else if (gObj.allowRowDragAndDrop && !gObj.isEdit && !this.parent.selectionSettings.checkboxOnly) {
          this.isRowDragSelected = false;
          if (!this.isRowType() || this.isSingleSel() || closest(target, "td").classList.contains("e-selectionbackground")) {
            this.isDragged = false;
            return;
          }
          isDrag = true;
          this.element = this.parent.createElement("div", { className: "e-griddragarea" });
          gObj.getContent().appendChild(this.element);
        }
        if (isDrag) {
          this.enableDrag(e, true);
        }
      }
      this.updateStartEndCells();
      if (target.classList.contains("e-autofill") || target.classList.contains("e-xlsel")) {
        this.isCellDrag = true;
        this.isAutoFillSel = true;
        this.enableDrag(e);
      }
    };
    Selection2.prototype.updateStartEndCells = function() {
      var cells = [].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));
      this.startCell = cells[0];
      this.endCell = cells[cells.length - 1];
      if (this.startCell) {
        this.startIndex = parseInt(this.startCell.parentElement.getAttribute(ariaRowIndex), 10) - 1;
        this.startCellIndex = parseInt(parentsUntil(this.startCell, rowCell).getAttribute(ariaColIndex), 10) - 1;
      }
    };
    Selection2.prototype.updateStartCellsIndex = function() {
      if (this.startCell) {
        this.startIndex = parseInt(this.startCell.parentElement.getAttribute(ariaRowIndex), 10) - 1;
        this.startCellIndex = parseInt(parentsUntil(this.startCell, rowCell).getAttribute(ariaColIndex), 10) - 1;
      }
    };
    Selection2.prototype.enableDrag = function(e, isUpdate) {
      var gObj = this.parent;
      if (isUpdate) {
        var tr = closest(e.target, "tr");
        this.startDIndex = parseInt(tr.getAttribute(ariaRowIndex), 10) - 1;
        this.startDCellIndex = parseInt(parentsUntil(e.target, rowCell).getAttribute(ariaColIndex), 10) - 1;
      }
      document.body.classList.add("e-disableuserselect");
      var gBRect = gObj.element.getBoundingClientRect();
      var postion = getPosition(e);
      this.x = postion.x - gBRect.left;
      this.y = postion.y - gBRect.top;
      EventHandler.add(gObj.getContent(), "mousemove", this.mouseMoveHandler, this);
      if (this.parent.frozenRows) {
        EventHandler.add(gObj.getHeaderContent(), "mousemove", this.mouseMoveHandler, this);
      }
      EventHandler.add(document, "mouseup", this.mouseUpHandler, this);
    };
    Selection2.prototype.clearSelAfterRefresh = function(e) {
      var isInfiniteScroll = this.parent.enableInfiniteScrolling && e.requestType === "infiniteScroll";
      if (e.requestType !== "virtualscroll" && !this.parent.isPersistSelection && !isInfiniteScroll) {
        this.clearSelection();
      }
      if ((e.requestType === "virtualscroll" || isInfiniteScroll) && this.parent.isPersistSelection && this.isPartialSelection && this.isHdrSelectAllClicked) {
        var rowObj = this.parent.getRowsObject().filter(function(e2) {
          return e2.isSelectable;
        });
        var indexes = [];
        this.selectedRowState = {};
        this.persistSelectedData = [];
        for (var i = 0; i < rowObj.length; i++) {
          indexes.push(rowObj[parseInt(i.toString(), 10)].index);
          var pkValue = this.getPkValue(this.primaryKey, rowObj[parseInt(i.toString(), 10)].data);
          this.selectedRowState["" + pkValue] = true;
          this.persistSelectedData.push(rowObj[parseInt(i.toString(), 10)].data);
        }
        this.selectedRowIndexes = indexes;
      }
    };
    Selection2.prototype.addEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.evtHandlers = [
        { event: uiUpdate, handler: this.enableAfterRender },
        { event: initialEnd, handler: this.initializeSelection },
        { event: rowSelectionComplete, handler: this.onActionComplete },
        { event: cellSelectionComplete, handler: this.onActionComplete },
        { event: inBoundModelChanged, handler: this.onPropertyChanged },
        { event: cellFocused, handler: this.onCellFocused },
        { event: beforeFragAppend, handler: this.clearSelAfterRefresh },
        { event: columnPositionChanged, handler: this.columnPositionChanged },
        { event: contentReady, handler: this.initialEnd },
        { event: rowsRemoved, handler: this.rowsRemoved },
        { event: headerRefreshed, handler: this.refreshHeader },
        { event: destroyAutoFillElements, handler: this.destroyAutoFillElements },
        { event: destroy, handler: this.destroy }
      ];
      addRemoveEventListener(this.parent, this.evtHandlers, true, this);
      this.actionBeginFunction = this.actionBegin.bind(this);
      this.actionCompleteFunction = this.actionComplete.bind(this);
      this.parent.addEventListener(actionBegin, this.actionBeginFunction);
      this.parent.addEventListener(actionComplete, this.actionCompleteFunction);
      this.addEventListener_checkbox();
    };
    Selection2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      EventHandler.remove(document, "mouseup", this.mouseUpHandler);
      EventHandler.remove(this.parent.getContent(), "mousedown", this.mouseDownHandler);
      EventHandler.remove(this.parent.getHeaderContent(), "mousedown", this.mouseDownHandler);
      addRemoveEventListener(this.parent, this.evtHandlers, false);
      this.parent.removeEventListener(actionBegin, this.actionBeginFunction);
      this.parent.removeEventListener(actionComplete, this.actionCompleteFunction);
      this.removeEventListener_checkbox();
      this.parent.off(destroyAutoFillElements, this.destroyAutoFillElements);
    };
    Selection2.prototype.wireEvents = function() {
      this.isMacOS = navigator.userAgent.indexOf("Mac OS") !== -1;
      if (this.isMacOS) {
        EventHandler.add(this.parent.element, "keydown", this.keyDownHandler, this);
        EventHandler.add(this.parent.element, "keyup", this.keyUpHandler, this);
      } else {
        if (!this.parent.allowKeyboard) {
          EventHandler.add(this.parent.element, "keydown", this.keyDownHandler, this);
        }
      }
    };
    Selection2.prototype.unWireEvents = function() {
      if (this.isMacOS) {
        EventHandler.remove(this.parent.element, "keydown", this.keyDownHandler);
        EventHandler.remove(this.parent.element, "keyup", this.keyUpHandler);
      } else {
        if (!this.parent.allowKeyboard) {
          EventHandler.remove(this.parent.element, "keydown", this.keyDownHandler);
        }
      }
    };
    Selection2.prototype.columnPositionChanged = function() {
      if (!this.parent.isPersistSelection) {
        this.clearSelection();
      }
    };
    Selection2.prototype.refreshHeader = function() {
      var checkboxColumn = this.parent.getColumns().filter(function(col) {
        return col.type === "checkbox";
      });
      if (checkboxColumn.length && !this.parent.getDataModule().isRemote()) {
        this.gridCurrentRecord = this.getData();
      }
      this.setCheckAllState();
    };
    Selection2.prototype.rowsRemoved = function(e) {
      for (var i = 0; i < e.records.length; i++) {
        var pkValue = this.getPkValue(this.primaryKey, e.records[parseInt(i.toString(), 10)]);
        delete this.selectedRowState["" + pkValue];
        --this.totalRecordsCount;
      }
      this.setCheckAllState();
    };
    Selection2.prototype.beforeFragAppend = function(e) {
      if (e.requestType !== "virtualscroll" && !this.parent.isPersistSelection) {
        this.clearSelection();
      }
    };
    Selection2.prototype.getCheckAllBox = function() {
      return this.parent.getHeaderContent().querySelector(".e-checkselectall");
    };
    Selection2.prototype.enableAfterRender = function(e) {
      if (e.module === this.getModuleName() && e.enable) {
        this.render();
        this.initPerisistSelection();
      }
    };
    Selection2.prototype.render = function(e) {
      EventHandler.add(this.parent.getContent(), "mousedown", this.mouseDownHandler, this);
      EventHandler.add(this.parent.getHeaderContent(), "mousedown", this.mouseDownHandler, this);
    };
    Selection2.prototype.onPropertyChanged = function(e) {
      if (e.module !== this.getModuleName()) {
        return;
      }
      var gObj = this.parent;
      if (!isNullOrUndefined(e.properties.type)) {
        if (this.selectionSettings.type === "Single") {
          gObj.element.removeAttribute("aria-multiselectable");
          if (this.selectedRowCellIndexes.length > 1) {
            this.clearCellSelection();
            this.prevCIdxs = void 0;
          }
          if (this.selectedRowIndexes.length > 1) {
            this.clearRowSelection();
            this.prevRowIndex = void 0;
          }
          if (this.selectedColumnsIndexes.length > 1) {
            this.clearColumnSelection();
            this.prevColIndex = void 0;
          }
          this.enableSelectMultiTouch = false;
          this.hidePopUp();
        } else if (this.selectionSettings.type === "Multiple") {
          gObj.element.setAttribute("aria-multiselectable", "true");
        }
      }
      if (!isNullOrUndefined(e.properties.mode) || !isNullOrUndefined(e.properties.cellSelectionMode)) {
        this.clearSelection();
        this.prevRowIndex = void 0;
        this.prevCIdxs = void 0;
        this.prevColIndex = void 0;
      }
      this.isPersisted = true;
      this.checkBoxSelectionChanged();
      this.isPersisted = false;
      if (!this.parent.isCheckBoxSelection) {
        this.initPerisistSelection();
      }
      var checkboxColumn = this.parent.getColumns().filter(function(col) {
        return col.type === "checkbox";
      });
      if (checkboxColumn.length) {
        gObj.isCheckBoxSelection = !(this.selectionSettings.checkboxMode === "ResetOnRowClick");
      }
      this.drawBorders();
    };
    Selection2.prototype.hidePopUp = function() {
      if (this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length) {
        this.parent.element.querySelector(".e-gridpopup").style.display = "none";
      }
    };
    Selection2.prototype.initialEnd = function() {
      if (!this.selectedRowIndexes.length) {
        this.parent.off(contentReady, this.initialEnd);
        this.selectRow(this.parent.selectedRowIndex);
      }
    };
    Selection2.prototype.checkBoxSelectionChanged = function() {
      var gobj = this.parent;
      gobj.off(contentReady, this.checkBoxSelectionChanged);
      var checkboxColumn = gobj.getColumns().filter(function(col) {
        return col.type === "checkbox";
      });
      if (checkboxColumn.length > 0) {
        gobj.isCheckBoxSelection = true;
        this.chkField = checkboxColumn[0].field;
        this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;
        if (isNullOrUndefined(this.totalRecordsCount)) {
          this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;
        }
        if (this.isSingleSel()) {
          gobj.selectionSettings.type = "Multiple";
          gobj.dataBind();
        } else {
          this.initPerisistSelection();
        }
      }
      if (!gobj.isCheckBoxSelection && !this.isPersisted) {
        this.chkField = null;
        this.initPerisistSelection();
      }
    };
    Selection2.prototype.initPerisistSelection = function() {
      var gobj = this.parent;
      if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {
        gobj.isPersistSelection = true;
        this.ensureCheckboxFieldSelection();
      } else if (this.parent.getPrimaryKeyFieldNames().length > 0) {
        gobj.isPersistSelection = false;
        this.ensureCheckboxFieldSelection();
      } else {
        gobj.isPersistSelection = false;
        this.selectedRowState = {};
      }
    };
    Selection2.prototype.ensureCheckboxFieldSelection = function() {
      var gobj = this.parent;
      this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];
      if (!gobj.enableVirtualization && this.chkField && (gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0 || !gobj.isPersistSelection)) {
        this.dataSuccess(!isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result || this.parent.getDataModule().isRemote() ? this.parent.getCurrentViewRecords() : this.parent.renderModule.data.dataManager.dataSource.json);
      }
    };
    Selection2.prototype.dataSuccess = function(res) {
      for (var i = 0; i < res.length; i++) {
        var pkValue = this.getPkValue(this.primaryKey, res[parseInt(i.toString(), 10)]);
        var checkedFieldData = res[parseInt(i.toString(), 10)][this.chkField];
        if (isNullOrUndefined(this.selectedRowState["" + pkValue]) && checkedFieldData && typeof checkedFieldData === "boolean") {
          this.selectedRowState["" + pkValue] = checkedFieldData;
          if (this.parent.isPersistSelection) {
            this.persistSelectedData.push(res[parseInt(i.toString(), 10)]);
          }
        }
      }
    };
    Selection2.prototype.setRowSelection = function(state) {
      if (!(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result)) {
        if (state) {
          if (this.isPartialSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {
            var rowObj = this.parent.getRowsObject().filter(function(e) {
              return e.isSelectable;
            });
            for (var _i = 0, rowObj_1 = rowObj; _i < rowObj_1.length; _i++) {
              var row2 = rowObj_1[_i];
              this.selectedRowState[this.getPkValue(this.primaryKey, row2.data)] = true;
            }
          } else {
            var selectedData = this.isPartialSelection ? this.parent.partialSelectedRecords : this.getData();
            if (this.parent.groupSettings.columns.length) {
              for (var _a = 0, _b = this.isPartialSelection ? selectedData : selectedData.records; _a < _b.length; _a++) {
                var data = _b[_a];
                this.selectedRowState[this.getPkValue(this.primaryKey, data)] = true;
              }
            } else {
              for (var _c = 0, selectedData_1 = selectedData; _c < selectedData_1.length; _c++) {
                var data = selectedData_1[_c];
                this.selectedRowState[this.getPkValue(this.primaryKey, data)] = true;
              }
            }
          }
        } else {
          this.selectedRowState = {};
        }
      } else {
        if (state) {
          var selectedStateKeys = Object.keys(this.selectedRowState);
          var unSelectedRowStateKeys = Object.keys(this.unSelectedRowState);
          if (!this.isCheckboxReset) {
            var rowData = this.parent.groupSettings.columns.length && this.parent.isPersistSelection ? this.parent.currentViewData["records"] : this.parent.currentViewData;
            for (var _d = 0, rowData_1 = rowData; _d < rowData_1.length; _d++) {
              var data = rowData_1[_d];
              if (!isNullOrUndefined(data[this.primaryKey])) {
                var key = data[this.primaryKey].toString();
                if (selectedStateKeys.indexOf(key) === -1 && unSelectedRowStateKeys.indexOf(key) === -1) {
                  this.selectedRowState[data[this.primaryKey]] = true;
                }
              }
            }
          }
        } else {
          this.selectedRowState = {};
          this.unSelectedRowState = {};
          this.rmtHdrChkbxClicked = false;
        }
      }
    };
    Selection2.prototype.getData = function() {
      return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(true));
    };
    Selection2.prototype.getAvailableSelectedData = function(data) {
      var filteredSearchedSelectedData = new DataManager(data).executeLocal(this.parent.getDataModule().generateQuery(true));
      if (this.parent.groupSettings.columns.length && filteredSearchedSelectedData && filteredSearchedSelectedData.records) {
        filteredSearchedSelectedData = filteredSearchedSelectedData.records.slice();
      }
      return filteredSearchedSelectedData;
    };
    Selection2.prototype.refreshPersistSelection = function() {
      var rows = this.parent.getRows();
      this.totalRecordsCount = this.parent.getCurrentViewRecords().length;
      if (this.parent.allowPaging) {
        this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;
      }
      if (!isNullOrUndefined(rows) && rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {
        var indexes = [];
        for (var j = 0; j < rows.length; j++) {
          var rowObj = this.getRowObj(rows[parseInt(j.toString(), 10)]);
          var pKey = rowObj ? rowObj.data ? this.getPkValue(this.primaryKey, rowObj.data) : null : null;
          if (pKey === null) {
            return;
          }
          if (this.isPartialSelection && !rowObj.isSelectable) {
            continue;
          }
          var checkState = void 0;
          var chkBox = rows[parseInt(j.toString(), 10)].querySelector(".e-checkselect");
          if (this.selectedRowState["" + pKey] || this.parent.checkAllRows === "Check" && this.selectedRowState["" + pKey] && this.totalRecordsCount === Object.keys(this.selectedRowState).length && this.chkAllCollec.indexOf(pKey) < 0 || this.parent.checkAllRows === "Uncheck" && this.chkAllCollec.indexOf(pKey) > 0 && !this.parent.selectedRowIndex || this.parent.checkAllRows === "Intermediate" && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField]) {
            indexes.push(parseInt(rows[parseInt(j.toString(), 10)].getAttribute(ariaRowIndex), 10) - 1);
            checkState = true;
          } else {
            checkState = false;
            if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection && chkBox) {
              removeAddCboxClasses(chkBox.nextElementSibling, checkState);
            }
          }
          this.updatePersistCollection(rows[parseInt(j.toString(), 10)], checkState);
        }
        if (this.isSingleSel() && indexes.length > 0) {
          this.selectRow(indexes[0], true);
        } else {
          this.selectRows(indexes);
        }
      }
      if ((this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === "ResetOnRowClick") && this.getCurrentBatchRecordChanges().length > 0) {
        this.setCheckAllState();
      }
    };
    Selection2.prototype.actionBegin = function(e) {
      if (e.requestType === "save" && this.parent.isPersistSelection) {
        var editChkBox = this.parent.element.querySelector(".e-edit-checkselect");
        if (!isNullOrUndefined(editChkBox)) {
          var row2 = closest(editChkBox, "." + editedRow);
          if (row2) {
            if (this.parent.editSettings.mode === "Dialog") {
              row2 = this.parent.element.querySelector(".e-dlgeditrow");
            }
            var rowObj = this.getRowObj(row2);
            if (!rowObj) {
              return;
            }
            this.selectedRowState[this.getPkValue(this.primaryKey, rowObj.data)] = rowObj.isSelected = editChkBox.checked;
          } else {
            this.isCheckedOnAdd = editChkBox.checked;
          }
        }
      }
      if (this.parent.isPersistSelection && this.isPartialSelection) {
        if (e.requestType === "paging" && (this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result)) {
          this.selectedRowIndexes = [];
        }
      }
    };
    Selection2.prototype.actionComplete = function(e) {
      if (e.requestType === "save" && this.parent.isPersistSelection) {
        if (e.action === "add") {
          if (this.isCheckedOnAdd) {
            var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));
            this.selectedRowState[this.getPkValue(this.primaryKey, rowObj.data)] = rowObj.isSelected = this.isCheckedOnAdd;
          }
          this.isHdrSelectAllClicked = false;
          this.setCheckAllState();
        }
        this.refreshPersistSelection();
      }
      if (e.requestType === "delete" && this.parent.isPersistSelection) {
        var records = e.data;
        var data = records.slice();
        for (var i = 0; i < data.length; i++) {
          var pkValue = this.getPkValue(this.primaryKey, data[parseInt(i.toString(), 10)]);
          if (!isNullOrUndefined(pkValue)) {
            this.updatePersistDelete(pkValue, this.isPartialSelection);
          }
        }
        this.isHdrSelectAllClicked = false;
        this.setCheckAllState();
        this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;
      }
      if (e.requestType === "paging") {
        if (this.parent.isPersistSelection && this.isPartialSelection && this.isHdrSelectAllClicked) {
          var rows = this.parent.getRowsObject();
          var indexes = [];
          for (var i = 0; i < rows.length; i++) {
            if (rows[parseInt(i.toString(), 10)].isSelectable) {
              indexes.push(rows[parseInt(i.toString(), 10)].index);
            }
          }
          if (indexes.length) {
            this.selectRows(indexes);
          }
        }
        this.prevRowIndex = void 0;
        this.prevCIdxs = void 0;
        this.prevECIdxs = void 0;
      }
    };
    Selection2.prototype.onDataBound = function() {
      var checkboxColumn = this.parent.getColumns().filter(function(col) {
        return col.type === "checkbox";
      });
      if (checkboxColumn.length && !this.parent.getDataModule().isRemote()) {
        this.gridCurrentRecord = this.getData();
      }
      if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {
        if (this.selectedRecords.length) {
          this.isPrevRowSelection = true;
        }
      }
      if ((this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && this.rmtHdrChkbxClicked || this.isPartialSelection && this.parent.isPersistSelection && this.isHdrSelectAllClicked) {
        if (this.parent.checkAllRows === "Intermediate") {
          this.setRowSelection(true);
        } else if (this.parent.checkAllRows === "Uncheck") {
          this.setRowSelection(false);
        }
      }
      if (this.parent.enableVirtualization) {
        this.setCheckAllState();
      }
      if (this.parent.isPersistSelection) {
        this.refreshPersistSelection();
      }
      this.initialRowSelection = this.isRowType() && this.parent.element.querySelectorAll(".e-selectionbackground") && this.parent.getSelectedRows().length ? true : false;
      if (this.parent.isCheckBoxSelection && !this.initialRowSelection) {
        var totalRecords = this.parent.getRowsObject();
        var indexes = [];
        for (var i = 0; i < totalRecords.length; i++) {
          if (totalRecords[parseInt(i.toString(), 10)].isSelected) {
            indexes.push(i);
          }
        }
        if (indexes.length) {
          this.selectRows(indexes);
        }
        this.initialRowSelection = true;
      }
    };
    Selection2.prototype.updatePersistSelectedData = function(checkState) {
      if (this.parent.isPersistSelection) {
        var rows = this.parent.getRows();
        for (var i = 0; i < rows.length; i++) {
          this.updatePersistCollection(rows[parseInt(i.toString(), 10)], checkState);
        }
        if (this.parent.checkAllRows === "Uncheck") {
          this.setRowSelection(false);
          this.persistSelectedData = this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result ? this.persistSelectedData : [];
        } else if (this.parent.checkAllRows === "Check") {
          this.setRowSelection(true);
          this.persistSelectedData = !(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && !this.isPartialSelection ? this.parent.groupSettings.columns.length ? this.getData().records.slice() : this.getData().slice() : this.persistSelectedData;
        }
      }
    };
    Selection2.prototype.checkSelectAllAction = function(checkState) {
      var cRenderer = this.getRenderer();
      var editForm = this.parent.element.querySelector(".e-gridform");
      this.checkedTarget = this.getCheckAllBox();
      if (checkState && this.getCurrentBatchRecordChanges().length) {
        this.parent.checkAllRows = "Check";
        this.updatePersistSelectedData(checkState);
        this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length - 1));
        if (this.checkVirtualCheckBox() && !this.parent.isPersistSelection) {
          this.virtualSelectedData = this.virtualCheckBoxData().slice();
          this.selectedRowIndexes = Object.keys(this.virtualSelectedData).map(function(key) {
            return parseInt(key, 10);
          });
        }
      } else {
        this.parent.checkAllRows = "Uncheck";
        this.updatePersistSelectedData(checkState);
        this.clearSelection();
      }
      this.chkAllCollec = [];
      if (!isNullOrUndefined(editForm)) {
        var editChkBox = editForm.querySelector(".e-edit-checkselect");
        if (!isNullOrUndefined(editChkBox)) {
          removeAddCboxClasses(editChkBox.nextElementSibling, checkState);
        }
      }
    };
    Selection2.prototype.checkSelectAll = function(checkBox) {
      var _this = this;
      var stateStr = this.getCheckAllStatus(checkBox);
      var state = stateStr === "Check";
      this.isHeaderCheckboxClicked = true;
      if ((this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && (stateStr === "Uncheck" || this.isCheckboxReset || stateStr === "Intermediate" && this.parent.isPersistSelection)) {
        this.rmtHdrChkbxClicked = true;
      } else {
        this.rmtHdrChkbxClicked = false;
      }
      if (this.rmtHdrChkbxClicked && this.isCheckboxReset) {
        this.unSelectedRowState = {};
      }
      this.isCheckboxReset = false;
      if (stateStr === "Intermediate") {
        if (!this.chkField && !this.parent.isPersistSelection) {
          state = this.getCurrentBatchRecordChanges().some(function(data) {
            return _this.getPkValue(_this.primaryKey, data) in _this.selectedRowState;
          });
        }
        if (this.parent.isPersistSelection) {
          if (this.parent.allowPaging && this.isPartialSelection) {
            var rowObjects = this.parent.getRowsObject();
            for (var i = 0; i < rowObjects.length; i++) {
              if (rowObjects[i].isDataRow && rowObjects[i].isSelectable && !rowObjects[i].isSelected) {
                state = false;
                break;
              } else {
                state = true;
              }
            }
          } else if (this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) {
            for (var i = 0; i < this.getCurrentBatchRecordChanges().length; i++) {
              if (!isNullOrUndefined(this.getPkValue(this.primaryKey, this.getCurrentBatchRecordChanges()["" + i]))) {
                if (Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey, this.getCurrentBatchRecordChanges()["" + i]).toString())) {
                  state = true;
                } else {
                  state = false;
                  break;
                }
              }
            }
          }
        }
      }
      if (this.parent.isPersistSelection && this.parent.allowPaging) {
        this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;
      }
      this.checkSelectAllAction(!state);
      this.target = null;
      if (this.getCurrentBatchRecordChanges().length > 0) {
        this.setCheckAllState();
        this.updateSelectedRowIndexes();
      }
      this.triggerChkChangeEvent(checkBox, !state);
    };
    Selection2.prototype.getCheckAllStatus = function(ele) {
      var classes;
      if (!isNullOrUndefined(ele)) {
        classes = ele.nextElementSibling.classList;
      } else {
        if (!isNullOrUndefined(this.getCheckAllBox())) {
          classes = this.getCheckAllBox().nextElementSibling.classList;
        }
      }
      var status = "None";
      if (classes instanceof DOMTokenList) {
        if (classes.contains("e-check")) {
          status = "Check";
        } else if (classes.contains("e-uncheck")) {
          status = "Uncheck";
        } else if (classes.contains("e-stop")) {
          status = "Intermediate";
        }
      }
      return status;
    };
    Selection2.prototype.checkSelect = function(checkBox) {
      var target = closest(this.checkedTarget, "." + rowCell);
      var gObj = this.parent;
      this.isMultiCtrlRequest = true;
      var rIndex = 0;
      this.isHeaderCheckboxClicked = false;
      if (isGroupAdaptive(gObj)) {
        var uid2 = target.parentElement.getAttribute("data-uid");
        if (this.parent.enableVirtualization && this.parent.groupSettings.columns.length) {
          rIndex = parseInt(target.parentElement.getAttribute(ariaRowIndex), 10) - 1;
        } else {
          rIndex = gObj.getRows().map(function(m) {
            return m.getAttribute("data-uid");
          }).indexOf(uid2);
        }
      } else {
        rIndex = parseInt(target.parentElement.getAttribute(ariaRowIndex), 10) - 1;
      }
      if (this.parent.isPersistSelection && this.parent.element.getElementsByClassName(addedRow).length > 0 && this.parent.editSettings.newRowPosition === "Top" && !this.parent.editSettings.showAddNewRow) {
        ++rIndex;
      }
      this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute(ariaColIndex), 10) - 1);
      this.moveIntoUncheckCollection(closest(target, "." + row));
      this.setCheckAllState();
      this.isMultiCtrlRequest = false;
      this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains("e-check"));
    };
    Selection2.prototype.moveIntoUncheckCollection = function(row2) {
      if (this.parent.checkAllRows === "Check" || this.parent.checkAllRows === "Uncheck") {
        var rowObj = this.getRowObj(row2);
        var pKey = rowObj && rowObj.data ? this.getPkValue(this.primaryKey, rowObj.data) : null;
        if (!pKey) {
          return;
        }
        if (this.chkAllCollec.indexOf(pKey) < 0) {
          this.chkAllCollec.push(pKey);
        } else {
          this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);
        }
      }
    };
    Selection2.prototype.triggerChkChangeEvent = function(checkBox, checkState) {
      this.parent.trigger(checkBoxChange, {
        checked: checkState,
        selectedRowIndexes: this.parent.getSelectedRowIndexes(),
        target: checkBox
      });
      if (!this.parent.isEdit) {
        this.checkedTarget = null;
      }
    };
    Selection2.prototype.updateSelectedRowIndexes = function() {
      if (this.parent.isCheckBoxSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && this.isPartialSelection && !(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && this.parent.selectionSettings.persistSelection) {
        if (this.parent.checkAllRows !== "Uncheck") {
          var rowObj = this.parent.getRowsObject().filter(function(e) {
            return e.isSelectable;
          });
          for (var _i = 0, rowObj_2 = rowObj; _i < rowObj_2.length; _i++) {
            var row2 = rowObj_2[_i];
            this.selectedRowIndexes.push(row2.index);
          }
        }
      }
      if (this.parent.isCheckBoxSelection && this.parent.enableVirtualization && !this.isPartialSelection && (this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && !this.parent.isPersistSelection && this.parent.checkAllRows === "Check") {
        var rowObj = this.parent.getRowsObject().filter(function(e) {
          return e.isSelectable;
        });
        if (rowObj.length !== this.selectedRowIndexes.length) {
          for (var _a = 0, rowObj_3 = rowObj; _a < rowObj_3.length; _a++) {
            var row2 = rowObj_3[_a];
            if (this.selectedRowIndexes.indexOf(row2.index) <= -1) {
              this.selectedRowIndexes.push(row2.index);
            }
          }
        }
      }
    };
    Selection2.prototype.updateSelectedRowIndex = function(index) {
      if (this.parent.isCheckBoxSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && !(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && !this.isPartialSelection) {
        if (this.parent.checkAllRows === "Check") {
          this.selectedRowIndexes = [];
          var dataLength = this.parent.groupSettings.columns.length ? this.getData()["records"].length : this.getData().length;
          for (var data = 0; data < dataLength; data++) {
            this.selectedRowIndexes.push(data);
          }
        } else if (this.parent.checkAllRows === "Uncheck") {
          this.selectedRowIndexes = [];
        } else {
          var row2 = this.parent.getRowByIndex(index);
          if (index && row2 && row2.getAttribute("aria-selected") === "false") {
            var selectedVal = this.selectedRowIndexes.indexOf(index);
            this.selectedRowIndexes.splice(selectedVal, 1);
          }
        }
      }
    };
    Selection2.prototype.isAllSelected = function(count) {
      if (this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) {
        return this.getAvailableSelectedData(this.persistSelectedData).length === (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling ? this.parent.totalDataRecordsCount : this.totalRecordsCount);
      } else {
        if (this.isPartialSelection) {
          if (this.parent.allowPaging && !this.selectionSettings.persistSelection && this.parent.pageSettings.pageSize < this.parent.pageSettings.totalRecordsCount) {
            var data = this.parent.partialSelectedRecords;
            for (var i = 0; i < data.length; i++) {
              var pKey = this.getPkValue(this.primaryKey, data[parseInt(i.toString(), 10)]);
              if (!this.selectedRowState["" + pKey]) {
                return false;
              }
            }
            return true;
          } else {
            return this.isSelectAllRowCount(count);
          }
        } else {
          var data = this.getData();
          if (this.parent.groupSettings.columns.length && data["records"]) {
            data = data["records"];
          }
          for (var i = 0; i < data.length; i++) {
            var pKey = this.getPkValue(this.primaryKey, data[parseInt(i.toString(), 10)]);
            if (!this.selectedRowState["" + pKey]) {
              return false;
            }
          }
          return true;
        }
      }
    };
    Selection2.prototype.someDataSelected = function() {
      if ((this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && (this.parent.searchSettings.key.length || this.parent.filterSettings.columns.length)) {
        var filteredSearchedSelectedData = this.getAvailableSelectedData(this.persistSelectedData);
        for (var i = 0; i < filteredSearchedSelectedData.length; i++) {
          var pKey = this.getPkValue(this.primaryKey, filteredSearchedSelectedData[parseInt(i.toString(), 10)]);
          if (this.selectedRowState["" + pKey]) {
            return false;
          }
        }
      }
      var data = this.isPartialSelection ? this.getAvailableSelectedData(this.parent.partialSelectedRecords) : this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result ? [] : this.getData();
      for (var i = 0; i < data.length; i++) {
        var pKey = this.getPkValue(this.primaryKey, data[parseInt(i.toString(), 10)]);
        if (this.selectedRowState["" + pKey]) {
          return false;
        }
      }
      return true;
    };
    Selection2.prototype.setCheckAllState = function(index, isInteraction) {
      if (this.parent.isCheckBoxSelection || this.parent.selectionSettings.checkboxMode === "ResetOnRowClick") {
        var checkToSelectAll = false;
        var isFiltered = false;
        var checkedLen = Object.keys(this.selectedRowState).length;
        if (this.parent.element.classList.contains("e-treelistgrid") && this.parent.isPersistSelection && !this.parent.enableVirtualization && !this.parent.getDataModule().isRemote() && Array.isArray(this.parent.dataSource) && checkedLen === this.parent.dataSource.length && checkedLen > this.totalRecordsCount) {
          checkedLen = this.totalRecordsCount;
        }
        if (!this.parent.isPersistSelection) {
          checkedLen = this.selectedRowIndexes.length;
          this.totalRecordsCount = this.getCurrentBatchRecordChanges().length;
        }
        if (this.parent.isPersistSelection && !((this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && this.isPartialSelection) && (this.parent.searchSettings.key.length || this.parent.filterSettings.columns.length)) {
          isFiltered = true;
          checkToSelectAll = this.isAllSelected(checkedLen);
        }
        var input = this.getCheckAllBox();
        if (input) {
          var spanEle = input.nextElementSibling;
          removeClass([spanEle], ["e-check", "e-stop", "e-uncheck"]);
          setChecked(input, false);
          input.indeterminate = false;
          var getRecord = this.parent.getDataModule().isRemote() ? [] : this.gridCurrentRecord;
          if (this.parent.groupSettings.columns.length && getRecord["records"]) {
            getRecord = getRecord["records"];
          }
          this.totalRecordsCount = this.checkVirtualCheckBox() ? getRecord.length : this.totalRecordsCount;
          if (checkToSelectAll && isFiltered && (this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result || getRecord.length) || !isFiltered && (checkedLen === this.totalRecordsCount && this.totalRecordsCount && !this.isPartialSelection && (!(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) || this.parent.allowPaging) || !this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling && this.isPartialSelection && (this.isSelectAllRowCount(checkedLen) || this.isHdrSelectAllClicked && !this.parent.isPersistSelection) || (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && !this.parent.allowPaging && (!(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && getRecord.length && checkedLen === getRecord.length || (this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && !this.isPartialSelection && (checkedLen === this.parent.totalDataRecordsCount || (this.isSelectAllRowCount(checkedLen) || checkedLen === this.totalRecordsCount) && !this.parent.isPersistSelection) || this.isPartialSelection && (this.isHdrSelectAllClicked || this.isSelectAllRowCount(checkedLen))) || checkedLen === this.totalRecordsCount && this.totalRecordsCount && !this.isPartialSelection && !this.parent.allowPaging && !this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling)) {
            addClass([spanEle], ["e-check"]);
            setChecked(input, true);
            if (isInteraction) {
              this.getRenderer().setSelection(null, true, true);
            }
            this.parent.checkAllRows = "Check";
          } else if ((!this.selectedRowIndexes.length && (!this.parent.enableVirtualization || !this.persistSelectedData.length && !isFiltered || isFiltered && this.someDataSelected()) || checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) && !this.parent.allowPaging || this.parent.allowPaging && (checkedLen === 0 || checkedLen && isFiltered && this.someDataSelected())) {
            addClass([spanEle], ["e-uncheck"]);
            if (isInteraction) {
              this.getRenderer().setSelection(null, false, true);
            }
            this.parent.checkAllRows = "Uncheck";
          } else {
            addClass([spanEle], ["e-stop"]);
            this.parent.checkAllRows = "Intermediate";
            input.indeterminate = true;
          }
          if (checkedLen === 0 && this.getCurrentBatchRecordChanges().length === 0) {
            addClass([spanEle.parentElement], ["e-checkbox-disabled"]);
          } else {
            removeClass([spanEle.parentElement], ["e-checkbox-disabled"]);
          }
          if (this.isPartialSelection) {
            var rowCount = this.parent.getRowsObject().filter(function(e) {
              return e.isSelectable;
            }).length;
            if (rowCount === 0 && spanEle.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")) {
              addClass([spanEle.parentElement], ["e-checkbox-disabled"]);
            } else {
              removeClass([spanEle.parentElement], ["e-checkbox-disabled"]);
            }
          }
          if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && !this.parent.allowPaging && !(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result)) {
            this.updateSelectedRowIndex(index);
          }
        }
      }
    };
    Selection2.prototype.checkVirtualCheckBox = function() {
      return this.parent.enableVirtualization && !(this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result) && this.parent.isCheckBoxSelection && !this.isPartialSelection;
    };
    Selection2.prototype.virtualCheckBoxData = function() {
      var data = this.getData();
      if (this.parent.groupSettings.columns.length && data["records"]) {
        data = data["records"];
      }
      return data;
    };
    Selection2.prototype.isSelectAllRowCount = function(count) {
      var rowCount = 0;
      var rowObj = this.parent.getRowsObject();
      if (this.parent.selectionSettings.persistSelection && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling)) {
        var dataLen = this.parent.getDataModule().isRemote() || !isNullOrUndefined(this.parent.dataSource) && this.parent.dataSource.result ? this.parent.totalDataRecordsCount : this.getData() && this.getData().length;
        if (dataLen === rowObj.length) {
          rowCount = rowObj.filter(function(e) {
            return e.isSelectable;
          }).length;
          return rowCount && count === rowCount;
        } else {
          return false;
        }
      } else {
        if (this.parent.allowPaging && this.parent.selectionSettings.persistSelection) {
          var disableSelectedRecordsCount = this.getAvailableSelectedData(this.parent.disableSelectedRecords).length;
          var partialSelectedRecordsCount = this.getAvailableSelectedData(this.parent.partialSelectedRecords).length;
          var selectedRowCount = this.getAvailableSelectedData(this.persistSelectedData).length;
          rowCount = disableSelectedRecordsCount + partialSelectedRecordsCount;
          return rowCount === this.totalRecordsCount && selectedRowCount !== 0 && selectedRowCount === partialSelectedRecordsCount;
        } else {
          rowCount = rowObj.filter(function(e) {
            return e.isSelectable;
          }).length;
          return rowCount && count === rowCount;
        }
      }
    };
    Selection2.prototype.keyDownHandler = function(e) {
      if (Browser.info.name === "opera" && e.keyCode === 17 || Browser.info.name === "mozilla" && e.keyCode === 224 || (Browser.info.name === "safari" || Browser.info.name === "chrome") && (e.keyCode === 91 || e.keyCode === 93)) {
        this.cmdKeyPressed = true;
      }
      var targetHeadCell = parentsUntil(e.target, "e-headercell");
      var targetRowCell = parentsUntil(e.target, rowCell);
      var isCheckBox = targetHeadCell ? targetHeadCell.children[0].classList.contains("e-headerchkcelldiv") : targetRowCell ? targetRowCell.classList.contains("e-gridchkbox") : false;
      if (isCheckBox && !this.parent.allowKeyboard && e.keyCode === 32) {
        e.preventDefault();
      }
    };
    Selection2.prototype.keyUpHandler = function(e) {
      if (Browser.info.name === "opera" && e.keyCode === 17 || Browser.info.name === "mozilla" && e.keyCode === 224 || (Browser.info.name === "safari" || Browser.info.name === "chrome") && (e.keyCode === 91 || e.keyCode === 93)) {
        this.cmdKeyPressed = false;
      }
    };
    Selection2.prototype.clickHandler = function(e) {
      var target = e.target;
      this.actualTarget = target;
      if (!this.isAutoFillSel && !e.ctrlKey && !e.shiftKey) {
        this.startAFCell = this.endAFCell = null;
      }
      if (this.selectionSettings.persistSelection) {
        this.deSelectedData = iterateExtend(this.persistSelectedData);
      }
      if (parentsUntil(target, row) || parentsUntil(target, "e-headerchkcelldiv") || this.selectionSettings.allowColumnSelection && target.classList.contains("e-headercell")) {
        this.isInteracted = true;
      }
      this.cmdKeyPressed = e.metaKey;
      this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch || this.isMacOS && this.cmdKeyPressed;
      if (!this.parent.allowKeyboard) {
        this.isMultiShiftRequest = false;
        this.isMultiCtrlRequest = false;
      } else {
        this.isMultiShiftRequest = e.shiftKey;
      }
      this.isMultiCtrlRequestCell = this.isMultiCtrlRequest;
      this.popUpClickHandler(e);
      var chkSelect = false;
      this.preventFocus = true;
      var checkBox;
      var checkWrap = parentsUntil(target, "e-checkbox-wrapper");
      this.checkSelectAllClicked = checkWrap && checkWrap.getElementsByClassName("e-checkselectall") || this.selectionSettings.persistSelection && parentsUntil(target, row) ? true : false;
      if (this.selectionSettings.persistSelection && this.isPartialSelection && parentsUntil(target, "e-headerchkcelldiv") && !target.querySelector(".e-checkbox-disabled")) {
        this.isHdrSelectAllClicked = true;
      }
      if (checkWrap && checkWrap.querySelectorAll(".e-checkselect,.e-checkselectall").length > 0) {
        checkBox = checkWrap.querySelector('input[type="checkbox"]');
        chkSelect = true;
      }
      this.drawBorders();
      this.updateAutoFillPosition();
      target = parentsUntil(target, rowCell);
      if (this.parent.isReact && (target && !target.parentElement && target.classList.contains("e-rowcell"))) {
        target = this.parent.getCellFromIndex(parseInt(target.getAttribute("index"), 10), parseInt(target.getAttribute("aria-colindex"), 10) - 1);
      }
      if (this.isRowDragSelected && isNullOrUndefined(target) && this.parent.allowRowDragAndDrop && this.selectionSettings.persistSelection && this.checkSelectAllClicked) {
        this.isRowDragSelected = false;
      }
      if ((target && target.parentElement.classList.contains(row) && !this.parent.selectionSettings.checkboxOnly || chkSelect) && !this.isRowDragSelected) {
        if (this.parent.isCheckBoxSelection) {
          this.isMultiCtrlRequest = true;
        }
        this.target = target;
        if (!isNullOrUndefined(checkBox)) {
          this.checkedTarget = checkBox;
          if (checkBox.classList.contains("e-checkselectall")) {
            this.checkSelectAll(checkBox);
          } else {
            this.checkSelect(checkBox);
          }
        } else {
          var rIndex = 0;
          rIndex = parseInt(target.parentElement.getAttribute(ariaRowIndex), 10) - 1;
          if (this.parent.isPersistSelection && !this.parent.editSettings.showAddNewRow && this.parent.element.getElementsByClassName(addedRow).length > 0) {
            ++rIndex;
          }
          if (!this.mUPTarget || !this.mUPTarget.isEqualNode(target)) {
            this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute(ariaColIndex), 10) - 1);
          }
          if (this.parent.isCheckBoxSelection) {
            this.moveIntoUncheckCollection(closest(target, "." + row));
            this.setCheckAllState();
          }
        }
        if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {
          this.showPopup(e);
        }
      } else if (e.target.classList.contains("e-headercell") && !e.target.classList.contains("e-stackedheadercell")) {
        var uid2 = e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");
        this.headerSelectionHandler(this.parent.getColumnIndexByUid(uid2));
      }
      this.isMultiCtrlRequest = false;
      this.isMultiCtrlRequestCell = this.isMultiCtrlRequest;
      this.isMultiShiftRequest = false;
      if (isNullOrUndefined(closest(e.target, ".e-unboundcell"))) {
        this.preventFocus = false;
      }
    };
    Selection2.prototype.popUpClickHandler = function(e) {
      var target = e.target;
      if (closest(target, ".e-headercell") || e.target.classList.contains(rowCell) || closest(target, ".e-gridpopup")) {
        if (target.classList.contains("e-rowselect")) {
          if (!target.classList.contains("e-spanclicked")) {
            target.classList.add("e-spanclicked");
            this.enableSelectMultiTouch = true;
          } else {
            target.classList.remove("e-spanclicked");
            this.enableSelectMultiTouch = false;
            this.parent.element.querySelector(".e-gridpopup").style.display = "none";
          }
        }
      } else {
        this.parent.element.querySelector(".e-gridpopup").style.display = "none";
      }
    };
    Selection2.prototype.showPopup = function(e) {
      if (!this.selectionSettings.enableSimpleMultiRowSelection) {
        setCssInGridPopUp(this.parent.element.querySelector(".e-gridpopup"), e, "e-rowselect e-icons e-icon-rowselect" + (!this.isSingleSel() && (this.selectedRecords.length > 1 || this.selectedRowCellIndexes.length > 1) ? " e-spanclicked" : ""));
      }
    };
    Selection2.prototype.rowCellSelectionHandler = function(rowIndex, cellIndex) {
      if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest || this.isSingleSel()) {
        if (!this.isDragged) {
          this.selectRow(rowIndex, this.selectionSettings.enableToggle);
        }
        this.selectCell({ rowIndex, cellIndex }, this.selectionSettings.enableToggle);
        if (this.selectedRowCellIndexes.length) {
          this.updateAutoFillPosition();
        }
        this.drawBorders();
      } else if (this.isMultiShiftRequest) {
        if (this.parent.isCheckBoxSelection || !this.parent.isCheckBoxSelection && !closest(this.target, "." + rowCell).classList.contains(gridChkBox)) {
          this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);
        } else {
          this.addRowsToSelection([rowIndex]);
        }
        this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex, cellIndex } : this.prevCIdxs, { rowIndex, cellIndex });
        this.updateAutoFillPosition();
        this.drawBorders();
      } else {
        this.addRowsToSelection([rowIndex]);
        if (this.selectionSettings.mode === "Both") {
          var checkboxColumn = this.parent.getColumns().find(function(col) {
            return col.type === "checkbox";
          });
          var checkboxColumnIndexCheck = checkboxColumn && checkboxColumn.index !== cellIndex;
          if (checkboxColumnIndexCheck && !this.isMultiCtrlRequestCell) {
            this.selectCell({ rowIndex, cellIndex }, this.selectionSettings.enableToggle);
          } else if (!checkboxColumn || checkboxColumnIndexCheck) {
            this.addCellsToSelection([{ rowIndex, cellIndex }]);
          }
        } else {
          this.addCellsToSelection([{ rowIndex, cellIndex }]);
        }
        this.showHideBorders("none");
      }
      this.isDragged = false;
    };
    Selection2.prototype.onCellFocused = function(e) {
      if (this.parent.frozenRows && e.container.isHeader && e.byKey) {
        if (e.keyArgs.action === "upArrow") {
          if (this.parent.allowFiltering) {
            e.isJump = e.element.tagName === "INPUT" ? true : false;
          } else {
            e.isJump = e.element.tagName === "TH" ? true : false;
          }
        } else {
          if (e.keyArgs.action === "downArrow") {
            var rIdx = Number(e.element.parentElement.getAttribute(ariaRowIndex)) - 1;
            e.isJump = rIdx === 0 ? true : false;
          } else {
            if (e.keyArgs.action === "ctrlHome") {
              e.isJump = true;
            }
          }
        }
      }
      var clear = (e.container.isHeader && e.isJump || e.container.isContent && !e.container.isSelectable) && !(e.byKey && e.keyArgs.action === "space") && !(e.element.classList.contains("e-detailrowexpand") || e.element.classList.contains("e-detailrowcollapse"));
      var headerAction = e.container.isHeader && e.element.tagName !== "TD" && !closest(e.element, "." + rowCell) && !(e.byKey && e.keyArgs.action === "space");
      if (!e.byKey || clear) {
        if (clear && !(this.parent.isCheckBoxSelection || this.selectionSettings.persistSelection && (e.parent.classList.contains("e-recordplusexpand") || e.parent.classList.contains("e-recordpluscollapse") || e.parent.classList.contains("e-groupcaption")))) {
          this.clearSelection();
        }
        return;
      }
      var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];
      var prev = this.focus.getPrevIndexes();
      if (e.element.parentElement.querySelector(".e-rowcelldrag") || e.element.parentElement.querySelector(".e-dtdiagonalright") || e.element.parentElement.querySelector(".e-dtdiagonaldown")) {
        prev.cellIndex = prev.cellIndex - 1;
      }
      if (this.parent.frozenRows) {
        if (e.container.isHeader && (e.element.tagName === "TD" || closest(e.element, "." + rowCell))) {
          var hdrLength = this.parent.getHeaderTable().querySelector("thead").childElementCount;
          if (this.parent.editSettings.showAddNewRow && this.parent.editSettings.newRowPosition === "Top" && e.keyArgs.action === "upArrow") {
            hdrLength++;
          }
          rowIndex -= hdrLength;
          prev.rowIndex = !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex - hdrLength : null;
        } else {
          rowIndex += this.parent.frozenRows;
          prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;
        }
      }
      if (this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache) {
        rowIndex = parseInt(e.element.parentElement.getAttribute("aria-rowindex"), 10) - 1;
      }
      if ((headerAction || ["ctrlPlusA", "escape"].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== "space" && rowIndex === prev.rowIndex && cellIndex === prev.cellIndex) && !this.selectionSettings.allowColumnSelection) {
        return;
      }
      if (this.parent.enableVirtualization) {
        rowIndex = parseInt(e.element.parentElement.getAttribute("aria-rowindex"), 10) - 1;
        if (!this.parent.enableColumnVirtualization && !this.parent.groupSettings.columns.length && this.parent.totalDataRecordsCount >= 1) {
          if (e.keyArgs.action === "ctrlHome") {
            rowIndex = 0;
            this.parent.isFocusFirstCell = true;
          } else if (e.keyArgs.action === "ctrlEnd") {
            rowIndex = this.parent.totalDataRecordsCount - 1;
            this.isFocusLastCell = true;
          }
        }
      }
      if (this.parent.editSettings.showAddNewRow && this.parent.editSettings.newRowPosition === "Top" && (!this.parent.enableVirtualization && !this.parent.enableInfiniteScrolling) && e.keyArgs.action === "downArrow") {
        rowIndex--;
      }
      this.preventFocus = true;
      var columnIndex = this.getKeyColIndex(e);
      if (this.needColumnSelection) {
        cellIndex = columnIndex;
      }
      if (this.parent.element.classList.contains("e-gridcell-read") && (e.keyArgs.action === "tab" || e.keyArgs.action === "shiftTab" || e.keyArgs.action === "rightArrow" || e.keyArgs.action === "leftArrow")) {
        var targetLabel = this.target.getAttribute("aria-label");
        targetLabel = this.target.innerHTML + " column header " + this.parent.getColumnByIndex(cellIndex).field;
        this.target.setAttribute("aria-label", targetLabel);
      }
      switch (e.keyArgs.action) {
        case "downArrow":
        case "upArrow":
        case "enter":
        case "shiftEnter":
          this.target = e.element;
          this.isKeyAction = true;
          this.applyDownUpKey(rowIndex, cellIndex);
          break;
        case "rightArrow":
        case "leftArrow":
          this.applyRightLeftKey(rowIndex, cellIndex);
          break;
        case "shiftDown":
        case "shiftUp":
          this.shiftDownKey(rowIndex, cellIndex);
          break;
        case "shiftLeft":
        case "shiftRight":
          this.applyShiftLeftRightKey(rowIndex, cellIndex);
          break;
        case "home":
        case "end":
          cellIndex = e.keyArgs.action === "end" ? this.getLastColIndex(rowIndex) : 0;
          this.applyHomeEndKey(rowIndex, cellIndex);
          break;
        case "ctrlHome":
        case "ctrlEnd":
          this.applyCtrlHomeEndKey(rowIndex, cellIndex);
          break;
        case "escape":
          this.clearSelection();
          if (this.parent.clipboardModule) {
            window.navigator["clipboard"].writeText("");
          }
          break;
        case "ctrlPlusA":
          this.ctrlPlusA();
          break;
        case "space":
          this.applySpaceSelection(e.element);
          break;
        case "tab":
          if (this.parent.editSettings.allowNextRowEdit) {
            this.selectRow(rowIndex);
          }
          break;
      }
      this.needColumnSelection = false;
      this.preventFocus = false;
      this.positionBorders();
      if (this.parent.isFrozenGrid()) {
        this.showHideBorders("none", true);
        this.refreshFrozenBorders();
      }
      this.updateAutoFillPosition();
    };
    Selection2.prototype.getKeyColIndex = function(e) {
      var uid2;
      var index = null;
      var stackedHeader = e.element.querySelector(".e-stackedheadercelldiv");
      if (this.selectionSettings.allowColumnSelection && parentsUntil(e.element, "e-columnheader")) {
        this.needColumnSelection = e.container.isHeader ? true : false;
        if (stackedHeader) {
          if (e.keyArgs.action === "rightArrow" || e.keyArgs.action === "leftArrow") {
            return index;
          }
          uid2 = stackedHeader.getAttribute("e-mappinguid");
          var innerColumn = this.getstackedColumns(this.parent.getColumnByUid(uid2).columns);
          var lastIndex = this.parent.getColumnIndexByUid(innerColumn[innerColumn.length - 1].uid);
          var firstIndex = this.parent.getColumnIndexByUid(innerColumn[0].uid);
          index = this.prevColIndex >= lastIndex ? firstIndex : lastIndex;
        } else {
          index = this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));
        }
      }
      return index;
    };
    Selection2.prototype.ctrlPlusA = function() {
      if (this.isRowType() && !this.isSingleSel()) {
        var rowObj = this.parent.getRowsObject();
        this.selectRowsByRange(rowObj[0].index, rowObj[rowObj.length - 1].index);
      }
      if (this.isCellType() && !this.isSingleSel()) {
        this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });
      }
    };
    Selection2.prototype.applySpaceSelection = function(target) {
      if (target.classList.contains("e-checkselectall")) {
        this.checkedTarget = target;
        this.checkSelectAll(this.checkedTarget);
      } else {
        if (target.classList.contains("e-checkselect")) {
          this.checkedTarget = target;
          this.checkSelect(this.checkedTarget);
        }
      }
    };
    Selection2.prototype.applyDownUpKey = function(rowIndex, cellIndex) {
      var gObj = this.parent;
      if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === "Check" && !this.selectionSettings.persistSelection && !this.selectionSettings.checkboxOnly) {
        this.checkSelectAllAction(false);
        this.checkedTarget = null;
      }
      if (this.isRowType() && !this.selectionSettings.checkboxOnly) {
        if (this.parent.frozenRows) {
          this.selectRow(rowIndex, true);
          this.applyUpDown(gObj.selectedRowIndex);
        } else {
          this.selectRow(rowIndex, true);
          this.applyUpDown(gObj.selectedRowIndex);
        }
      }
      if (this.isCellType()) {
        this.selectCell({ rowIndex, cellIndex }, true);
      }
      if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {
        this.selectColumn(cellIndex);
      }
    };
    Selection2.prototype.applyUpDown = function(rowIndex) {
      if (rowIndex < 0) {
        return;
      }
      if (!this.target) {
        this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];
      }
      var cIndex = parseInt(this.target.getAttribute(ariaColIndex), 10) - 1;
      var row2 = this.contentRenderer.getRowByIndex(rowIndex);
      if (row2) {
        this.target = row2.getElementsByClassName(rowCell)[parseInt(cIndex.toString(), 10)];
      }
      this.addAttribute(this.target);
      if (this.parent.element.classList.contains("e-gridcell-read")) {
        var targetLabel = this.target.getAttribute("aria-label");
        targetLabel = this.target.innerHTML;
        this.target.setAttribute("aria-label", targetLabel);
      }
    };
    Selection2.prototype.applyRightLeftKey = function(rowIndex, cellIndex) {
      if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {
        this.selectColumn(cellIndex);
      } else if (this.isCellType()) {
        this.selectCell({ rowIndex, cellIndex }, true);
        this.addAttribute(this.target);
      }
    };
    Selection2.prototype.applyHomeEndKey = function(rowIndex, cellIndex) {
      if (this.isCellType()) {
        this.selectCell({ rowIndex, cellIndex }, true);
      } else {
        this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));
      }
    };
    Selection2.prototype.shiftDownKey = function(rowIndex, cellIndex) {
      this.isMultiShiftRequest = true;
      if (this.isRowType() && !this.isSingleSel()) {
        if (!isUndefined(this.prevRowIndex)) {
          this.selectRowsByRange(this.prevRowIndex, rowIndex);
          this.applyUpDown(rowIndex);
        } else if (this.isPartialSelection) {
          this.selectRow(rowIndex, true);
        } else {
          this.selectRow(0, true);
        }
      }
      if (this.isCellType() && !this.isSingleSel()) {
        this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex, cellIndex });
      }
      this.isMultiShiftRequest = false;
    };
    Selection2.prototype.applyShiftLeftRightKey = function(rowIndex, cellIndex) {
      this.isMultiShiftRequest = true;
      if (this.selectionSettings.allowColumnSelection && this.needColumnSelection) {
        this.selectColumnsByRange(this.prevColIndex, cellIndex);
      } else {
        this.selectCellsByRange(this.prevCIdxs, { rowIndex, cellIndex });
      }
      this.isMultiShiftRequest = false;
    };
    Selection2.prototype.getstackedColumns = function(column) {
      var innerColumnIndexes = [];
      for (var i = 0, len = column.length; i < len; i++) {
        if (column[parseInt(i.toString(), 10)].columns) {
          this.getstackedColumns(column[parseInt(i.toString(), 10)].columns);
        } else {
          innerColumnIndexes.push(column[parseInt(i.toString(), 10)]);
        }
      }
      return innerColumnIndexes;
    };
    Selection2.prototype.applyCtrlHomeEndKey = function(rowIndex, cellIndex) {
      if (this.isRowType()) {
        this.selectRow(rowIndex, true);
        if (!(this.parent.enableVirtualization || this.parent.enableColumnVirtualization)) {
          this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));
        }
      }
      if (this.isCellType()) {
        this.selectCell({ rowIndex, cellIndex }, true);
      }
    };
    Selection2.prototype.addRemoveClassesForRow = function(row2, isAdd, clearAll) {
      var args = [];
      for (var _i = 3; _i < arguments.length; _i++) {
        args[_i - 3] = arguments[_i];
      }
      if (row2) {
        var cells = [].slice.call(row2.getElementsByClassName(rowCell));
        var detailIndentCell = row2.querySelector(".e-detailrowcollapse") || row2.querySelector(".e-detailrowexpand");
        var dragdropIndentCell = row2.querySelector(".e-rowdragdrop");
        if (detailIndentCell) {
          cells.push(detailIndentCell);
        }
        if (dragdropIndentCell) {
          cells.push(dragdropIndentCell);
        }
        addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));
      }
      this.getRenderer().setSelection(row2 ? row2.getAttribute("data-uid") : null, isAdd, clearAll);
    };
    Selection2.prototype.isRowType = function() {
      return this.selectionSettings.mode === "Row" || this.selectionSettings.mode === "Both";
    };
    Selection2.prototype.isCellType = function() {
      return this.selectionSettings.mode === "Cell" || this.selectionSettings.mode === "Both";
    };
    Selection2.prototype.isSingleSel = function() {
      return this.selectionSettings.type === "Single";
    };
    Selection2.prototype.getRenderer = function() {
      if (isNullOrUndefined(this.contentRenderer)) {
        this.contentRenderer = this.factory.getRenderer(RenderType.Content);
      }
      return this.contentRenderer;
    };
    Selection2.prototype.getSelectedRecords = function() {
      var selectedData = [];
      if (!this.selectionSettings.persistSelection && this.selectedRecords.length) {
        selectedData = this.parent.getRowsObject().filter(function(row2) {
          return row2.isSelected;
        }).map(function(m) {
          return m.data;
        });
      } else {
        selectedData = this.persistSelectedData;
      }
      if (this.checkVirtualCheckBox() && !this.parent.isPersistSelection) {
        selectedData = this.virtualSelectedData;
      }
      return selectedData;
    };
    Selection2.prototype.selectColumn = function(index) {
      var gObj = this.parent;
      if (isNullOrUndefined(gObj.getColumns()[parseInt(index.toString(), 10)])) {
        return;
      }
      var column = gObj.getColumnByIndex(index);
      var selectedCol = gObj.getColumnHeaderByUid(column.uid);
      var isColSelected = selectedCol.classList.contains("e-columnselection");
      if (!gObj.selectionSettings.allowColumnSelection) {
        return;
      }
      var isMultiColumns = this.selectedColumnsIndexes.length > 1 && this.selectedColumnsIndexes.indexOf(index) > -1;
      this.clearColDependency();
      if (!this.selectionSettings.enableToggle || isMultiColumns || !isColSelected) {
        var args = {
          columnIndex: index,
          headerCell: selectedCol,
          column,
          cancel: false,
          target: this.actualTarget,
          isInteracted: this.isInteracted,
          previousColumnIndex: this.prevColIndex,
          isCtrlPressed: this.isMultiCtrlRequest,
          isShiftPressed: this.isMultiShiftRequest
        };
        this.onActionBegin(args, columnSelecting);
        if (args.cancel) {
          this.disableInteracted();
          return;
        }
        if (isMultiColumns || !(isColSelected && gObj.selectionSettings.enableToggle && index === this.prevColIndex)) {
          this.updateColSelection(selectedCol, index);
        }
        var selectedArgs = {
          columnIndex: index,
          headerCell: selectedCol,
          column,
          target: this.actualTarget,
          isInteracted: this.isInteracted,
          previousColumnIndex: this.prevColIndex
        };
        this.onActionComplete(selectedArgs, columnSelected);
      }
      this.updateColProps(index);
    };
    Selection2.prototype.selectColumnsByRange = function(startIndex, endIndex) {
      var gObj = this.parent;
      if (isNullOrUndefined(gObj.getColumns()[parseInt(startIndex.toString(), 10)])) {
        return;
      }
      var indexes = [];
      if (gObj.selectionSettings.type === "Single" || isNullOrUndefined(endIndex)) {
        indexes[0] = startIndex;
      } else {
        var min = startIndex < endIndex;
        for (var i = startIndex; min ? i <= endIndex : i >= endIndex; min ? i++ : i--) {
          indexes.push(i);
        }
      }
      this.selectColumns(indexes);
    };
    Selection2.prototype.selectColumns = function(columnIndexes) {
      var gObj = this.parent;
      var selectedCol = this.getselectedCols();
      if (gObj.selectionSettings.type === "Single") {
        columnIndexes = [columnIndexes[0]];
      }
      if (!gObj.selectionSettings.allowColumnSelection) {
        return;
      }
      this.clearColDependency();
      var selectingArgs = {
        columnIndex: columnIndexes[0],
        headerCell: selectedCol,
        columnIndexes,
        column: gObj.getColumnByIndex(columnIndexes[0]),
        cancel: false,
        target: this.actualTarget,
        isInteracted: this.isInteracted,
        previousColumnIndex: this.prevColIndex,
        isCtrlPressed: this.isMultiCtrlRequest,
        isShiftPressed: this.isMultiShiftRequest
      };
      this.onActionBegin(selectingArgs, columnSelecting);
      if (selectingArgs.cancel) {
        this.disableInteracted();
        return;
      }
      for (var i = 0, len = columnIndexes.length; i < len; i++) {
        this.updateColSelection(gObj.getColumnHeaderByUid(gObj.getColumnByIndex(columnIndexes[parseInt(i.toString(), 10)]).uid), columnIndexes[parseInt(i.toString(), 10)]);
      }
      selectedCol = this.getselectedCols();
      var selectedArgs = {
        columnIndex: columnIndexes[0],
        headerCell: selectedCol,
        columnIndexes,
        column: gObj.getColumnByIndex(columnIndexes[0]),
        target: this.actualTarget,
        isInteracted: this.isInteracted,
        previousColumnIndex: this.prevColIndex
      };
      this.onActionComplete(selectedArgs, columnSelected);
      this.updateColProps(columnIndexes[0]);
    };
    Selection2.prototype.selectColumnWithExisting = function(startIndex) {
      var gObj = this.parent;
      if (isNullOrUndefined(gObj.getColumns()[parseInt(startIndex.toString(), 10)])) {
        return;
      }
      var newCol = gObj.getColumnHeaderByUid(gObj.getColumnByIndex(startIndex).uid);
      var selectedCol = this.getselectedCols();
      if (gObj.selectionSettings.type === "Single") {
        this.clearColDependency();
      }
      if (!gObj.selectionSettings.allowColumnSelection) {
        return;
      }
      if (this.selectedColumnsIndexes.indexOf(startIndex) > -1) {
        this.clearColumnSelection(startIndex);
      } else {
        var selectingArgs = {
          columnIndex: startIndex,
          headerCell: selectedCol,
          columnIndexes: this.selectedColumnsIndexes,
          column: gObj.getColumnByIndex(startIndex),
          cancel: false,
          target: this.actualTarget,
          isInteracted: this.isInteracted,
          previousColumnIndex: this.prevColIndex,
          isCtrlPressed: this.isMultiCtrlRequest,
          isShiftPressed: this.isMultiShiftRequest
        };
        this.onActionBegin(selectingArgs, columnSelecting);
        if (selectingArgs.cancel) {
          this.disableInteracted();
          return;
        }
        this.updateColSelection(newCol, startIndex);
        selectedCol = this.getselectedCols();
        var selectedArgs = {
          columnIndex: startIndex,
          headerCell: selectedCol,
          column: gObj.getColumnByIndex(startIndex),
          columnIndexes: this.selectedColumnsIndexes,
          target: this.actualTarget,
          isInteracted: this.isInteracted,
          previousColumnIndex: this.prevColIndex
        };
        this.onActionComplete(selectedArgs, columnSelected);
      }
      this.updateColProps(startIndex);
    };
    Selection2.prototype.clearColumnSelection = function(clearIndex) {
      if (this.isColumnSelected) {
        var gObj = this.parent;
        if (!isNullOrUndefined(clearIndex) && this.selectedColumnsIndexes.indexOf(clearIndex) === -1) {
          return;
        }
        var index = !isNullOrUndefined(clearIndex) ? clearIndex : this.selectedColumnsIndexes[this.selectedColumnsIndexes.length - 1];
        var column = gObj.getColumnByIndex(index);
        var selectedCol = gObj.getColumnHeaderByUid(column.uid);
        var deselectedArgs = {
          columnIndex: index,
          headerCell: selectedCol,
          columnIndexes: this.selectedColumnsIndexes,
          column,
          cancel: false,
          target: this.actualTarget,
          isInteracted: this.isInteracted
        };
        var isCanceled = this.columnDeselect(deselectedArgs, columnDeselecting);
        if (isCanceled) {
          this.disableInteracted();
          return;
        }
        var selectedHeader = !isNullOrUndefined(clearIndex) ? [selectedCol] : [].slice.call(gObj.getHeaderContent().getElementsByClassName("e-columnselection"));
        var selectedCells = this.getSelectedColumnCells(clearIndex);
        for (var i = 0, len = selectedHeader.length; i < len; i++) {
          addRemoveActiveClasses([selectedHeader[parseInt(i.toString(), 10)]], false, "e-columnselection");
        }
        for (var i = 0, len = selectedCells.length; i < len; i++) {
          addRemoveActiveClasses([selectedCells[parseInt(i.toString(), 10)]], false, "e-columnselection");
        }
        if (!isNullOrUndefined(clearIndex)) {
          this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(clearIndex), 1);
          this.parent.getColumns()[parseInt(clearIndex.toString(), 10)].isSelected = false;
        } else {
          this.columnDeselect(deselectedArgs, columnDeselected);
          this.selectedColumnsIndexes = [];
          this.isColumnSelected = false;
          this.parent.getColumns().filter(function(col) {
            return col.isSelected = false;
          });
        }
      }
    };
    Selection2.prototype.getselectedCols = function() {
      var gObj = this.parent;
      var selectedCol;
      if (this.selectedColumnsIndexes.length > 1) {
        selectedCol = [];
        for (var i = 0; i < this.selectedColumnsIndexes.length; i++) {
          selectedCol.push(gObj.getColumnHeaderByUid(gObj.getColumnByIndex(this.selectedColumnsIndexes[parseInt(i.toString(), 10)]).uid));
        }
      } else {
        selectedCol = gObj.getColumnHeaderByUid(gObj.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);
      }
      return selectedCol;
    };
    Selection2.prototype.getSelectedColumnCells = function(clearIndex) {
      var gObj = this.parent;
      var isRowTemplate = !isNullOrUndefined(this.parent.rowTemplate);
      var rows = isRowTemplate ? gObj.getRows() : gObj.getDataRows();
      var seletedcells = [];
      var selectionString = !isNullOrUndefined(clearIndex) ? '[aria-colindex="' + (clearIndex + 1) + '"]' : ".e-columnselection";
      for (var i = 0, len = rows.length; i < len; i++) {
        seletedcells = seletedcells.concat([].slice.call(rows[parseInt(i.toString(), 10)].querySelectorAll(selectionString)));
      }
      return seletedcells;
    };
    Selection2.prototype.columnDeselect = function(args, event) {
      if (event === "columnDeselected") {
        delete args.cancel;
      }
      this.onActionComplete(args, event);
      return args.cancel;
    };
    Selection2.prototype.updateColProps = function(startIndex) {
      this.prevColIndex = startIndex;
      this.isColumnSelected = this.selectedColumnsIndexes.length && true;
    };
    Selection2.prototype.clearColDependency = function() {
      this.clearColumnSelection();
      this.selectedColumnsIndexes = [];
    };
    Selection2.prototype.updateColSelection = function(selectedCol, startIndex) {
      if (isNullOrUndefined(this.parent.getColumns()[parseInt(startIndex.toString(), 10)])) {
        return;
      }
      var isRowTemplate = !isNullOrUndefined(this.parent.rowTemplate);
      var rows = isRowTemplate ? this.parent.getRows() : this.parent.getDataRows();
      this.selectedColumnsIndexes.push(startIndex);
      this.parent.getColumns()[parseInt(startIndex.toString(), 10)].isSelected = true;
      startIndex = startIndex + this.parent.getIndentCount();
      addRemoveActiveClasses([selectedCol], true, "e-columnselection");
      for (var j = 0, len = rows.length; j < len; j++) {
        if (rows[parseInt(j.toString(), 10)].classList.contains(row)) {
          if ((rows[parseInt(j.toString(), 10)].classList.contains(editedRow) || rows[parseInt(j.toString(), 10)].classList.contains(addedRow)) && this.parent.editSettings.mode === "Normal" && !isNullOrUndefined(rows[parseInt(j.toString(), 10)].querySelector("tr").childNodes[parseInt(startIndex.toString(), 10)])) {
            addRemoveActiveClasses([rows[parseInt(j.toString(), 10)].querySelector("tr").childNodes[parseInt(startIndex.toString(), 10)]], true, "e-columnselection");
          } else {
            if (this.parent.isSpan && this.parent.isFrozenGrid()) {
              var cells = rows[parseInt(j.toString(), 10)].querySelectorAll(".e-rowcell");
              for (var i = 0; i < cells.length; i++) {
                if (cells[parseInt(i.toString(), 10)].getAttribute("aria-colindex") === selectedCol.getAttribute("aria-colindex")) {
                  addRemoveActiveClasses([cells[parseInt(i.toString(), 10)]], true, "e-columnselection");
                }
              }
            } else if (!isNullOrUndefined(rows[parseInt(j.toString(), 10)].childNodes[parseInt(startIndex.toString(), 10)])) {
              addRemoveActiveClasses([rows[parseInt(j.toString(), 10)].childNodes[parseInt(startIndex.toString(), 10)]], true, "e-columnselection");
            }
          }
        }
      }
    };
    Selection2.prototype.headerSelectionHandler = function(colIndex) {
      if (!this.isMultiCtrlRequest && !this.isMultiShiftRequest || this.isSingleSel()) {
        this.selectColumn(colIndex);
      } else if (this.isMultiShiftRequest) {
        this.selectColumnsByRange(isUndefined(this.prevColIndex) ? colIndex : this.prevColIndex, colIndex);
      } else {
        this.selectColumnWithExisting(colIndex);
      }
    };
    Selection2.prototype.addEventListener_checkbox = function() {
      var _this = this;
      this.parent.on(dataReady, this.dataReady, this);
      this.onDataBoundFunction = this.onDataBound.bind(this);
      this.parent.addEventListener(dataBound, this.onDataBoundFunction);
      this.parent.on(refreshInfinitePersistSelection, this.onDataBoundFunction);
      this.parent.on(contentReady, this.checkBoxSelectionChanged, this);
      this.parent.on(beforeRefreshOnDataChange, this.initPerisistSelection, this);
      this.parent.on(onEmpty, this.setCheckAllForEmptyGrid, this);
      this.actionCompleteFunc = this.actionCompleteHandler.bind(this);
      this.parent.addEventListener(actionComplete, this.actionCompleteFunc);
      this.parent.on(click, this.clickHandler, this);
      this.resizeEndFn = function() {
        _this.updateAutoFillPosition();
        _this.drawBorders();
      };
      this.resizeEndFn.bind(this);
      this.parent.addEventListener(resizeStop, this.resizeEndFn);
    };
    Selection2.prototype.removeEventListener_checkbox = function() {
      this.parent.off(dataReady, this.dataReady);
      this.parent.removeEventListener(dataBound, this.onDataBoundFunction);
      this.parent.removeEventListener(actionComplete, this.actionCompleteFunc);
      this.parent.off(refreshInfinitePersistSelection, this.onDataBoundFunction);
      this.parent.off(onEmpty, this.setCheckAllForEmptyGrid);
      this.parent.off(click, this.clickHandler);
      this.parent.removeEventListener(resizeStop, this.resizeEndFn);
      this.parent.off(beforeRefreshOnDataChange, this.initPerisistSelection);
    };
    Selection2.prototype.setCheckAllForEmptyGrid = function() {
      var checkAllBox = this.getCheckAllBox();
      if (checkAllBox) {
        this.parent.isCheckBoxSelection = true;
        var spanEle = checkAllBox.nextElementSibling;
        removeClass([spanEle], ["e-check", "e-stop", "e-uncheck"]);
        addClass([spanEle.parentElement], ["e-checkbox-disabled"]);
      }
    };
    Selection2.prototype.dataReady = function(e) {
      this.isHeaderCheckboxClicked = false;
      var isInfinitecroll = this.parent.enableInfiniteScrolling && e.requestType === "infiniteScroll";
      if (e.requestType !== "virtualscroll" && !this.parent.isPersistSelection && !isInfinitecroll) {
        this.disableUI = !this.parent.enableImmutableMode && !(e.requestType === "save" && e["action"] === "add");
        this.clearSelection();
        this.setCheckAllState();
        this.disableUI = false;
      }
    };
    Selection2.prototype.actionCompleteHandler = function(e) {
      if (e.requestType === "save" && this.parent.isPersistSelection) {
        this.refreshPersistSelection();
      }
    };
    Selection2.prototype.selectRowIndex = function(index) {
      this.parent.isSelectedRowIndexUpdating = true;
      if (isNullOrUndefined(this.parent.selectedRowIndex) || this.parent.selectedRowIndex === -1 || !this.parent.enablePersistence) {
        this.parent.selectedRowIndex = index;
      } else {
        this.parent.selectedRowIndex = -1;
      }
    };
    Selection2.prototype.disableInteracted = function() {
      this.isInteracted = false;
    };
    Selection2.prototype.activeTarget = function() {
      this.actualTarget = this.isInteracted ? this.actualTarget : null;
    };
    return Selection2;
  }()
);
var Search = (
  /** @class */
  function() {
    function Search2(parent) {
      this.headerFocus = false;
      this.parent = parent;
      this.addEventListener();
    }
    Search2.prototype.hasNonNumericCharacters = function(searchString) {
      var decimalFound = false;
      for (var _i = 0, searchString_1 = searchString; _i < searchString_1.length; _i++) {
        var char = searchString_1[_i];
        if ((char < "0" || char > "9") && char !== ".") {
          return true;
        }
        if (char === ".") {
          if (decimalFound) {
            return true;
          }
          decimalFound = true;
        }
      }
      return false;
    };
    Search2.prototype.search = function(searchString) {
      var gObj = this.parent;
      searchString = isNullOrUndefined(searchString) ? "" : searchString;
      if (isActionPrevent(gObj)) {
        gObj.notify(preventBatch, { instance: this, handler: this.search, arg1: searchString });
        return;
      }
      if (searchString !== gObj.searchSettings.key) {
        this.headerFocus = false;
        if (searchString !== "" && !this.hasNonNumericCharacters(searchString)) {
          var parts = searchString.split(".");
          if (searchString === "." || searchString.indexOf(".") === -1 || parts[0].startsWith("0") && parts[0].length > 1) {
            gObj.searchSettings.key = searchString.toString();
          } else {
            gObj.searchSettings.key = parseFloat(searchString).toString();
          }
        } else {
          gObj.searchSettings.key = searchString.toString();
        }
        gObj.dataBind();
      } else if (this.refreshSearch) {
        gObj.refresh();
      } else {
        this.headerFocus = false;
      }
    };
    Search2.prototype.addEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.on(inBoundModelChanged, this.onPropertyChanged, this);
      this.parent.on(searchComplete, this.onSearchComplete, this);
      this.parent.on(destroy, this.destroy, this);
      this.actionCompleteFunc = this.onActionComplete.bind(this);
      this.parent.addEventListener(actionComplete, this.actionCompleteFunc);
      this.parent.on(cancelBegin, this.cancelBeginEvent, this);
    };
    Search2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.off(inBoundModelChanged, this.onPropertyChanged);
      this.parent.off(searchComplete, this.onSearchComplete);
      this.parent.off(destroy, this.destroy);
      this.parent.removeEventListener(actionComplete, this.actionCompleteFunc);
      this.parent.off(cancelBegin, this.cancelBeginEvent);
    };
    Search2.prototype.destroy = function() {
      this.removeEventListener();
    };
    Search2.prototype.onPropertyChanged = function(e) {
      if (e.module !== this.getModuleName()) {
        return;
      }
      if (!isNullOrUndefined(e.properties.key)) {
        this.parent.notify(modelChanged, {
          requestType: "searching",
          type: actionBegin,
          searchString: this.parent.searchSettings.key
        });
      } else {
        this.parent.notify(modelChanged, {
          requestType: "searching",
          type: actionBegin
        });
      }
    };
    Search2.prototype.onSearchComplete = function(e) {
      this.parent.trigger(actionComplete, extend$1(e, {
        searchString: this.parent.searchSettings.key,
        requestType: "searching",
        type: actionComplete
      }));
    };
    Search2.prototype.onActionComplete = function(e) {
      if (this.refreshSearch && e.requestType === "refresh" && this.headerFocus) {
        this.headerFocus = false;
        this.parent.focusModule.focus();
        addClass([this.parent.focusModule.currentInfo.element], ["e-focused"]);
      }
      this.refreshSearch = e.requestType !== "searching";
    };
    Search2.prototype.cancelBeginEvent = function(e) {
      if (e.requestType === "searching") {
        this.parent.setProperties({ searchSettings: { key: "" } }, true);
      }
    };
    Search2.prototype.getModuleName = function() {
      return "search";
    };
    return Search2;
  }()
);
var ShowHide = (
  /** @class */
  function() {
    function ShowHide2(parent) {
      this.colName = [];
      this.isShowHide = false;
      this.parent = parent;
      this.addEventListener();
      this.widthService = new ColumnWidthService(parent);
    }
    ShowHide2.prototype.addEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.evtHandlers = [
        { event: batchCancel, handler: this.batchChanges },
        { event: batchCnfrmDlgCancel, handler: this.resetColumnState }
      ];
      addRemoveEventListener(this.parent, this.evtHandlers, true, this);
    };
    ShowHide2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      addRemoveEventListener(this.parent, this.evtHandlers, false);
    };
    ShowHide2.prototype.batchChanges = function() {
      if (this.isShowHide) {
        this.isShowHide = false;
        this.setVisible(this.colName, this.changedCol);
        this.changedCol = this.colName = [];
      }
    };
    ShowHide2.prototype.show = function(columnName, showBy) {
      var keys2 = this.getToggleFields(columnName);
      var columns = this.getColumns(keys2, showBy);
      this.parent.notify(tooltipDestroy, { module: "edit" });
      for (var i = 0; i < columns.length; i++) {
        columns[parseInt(i.toString(), 10)].visible = true;
      }
      this.setVisible(columns);
    };
    ShowHide2.prototype.hide = function(columnName, hideBy) {
      var keys2 = this.getToggleFields(columnName);
      var columns = this.getColumns(keys2, hideBy);
      this.parent.notify(tooltipDestroy, { module: "edit" });
      for (var i = 0; i < columns.length; i++) {
        columns[parseInt(i.toString(), 10)].visible = false;
      }
      this.setVisible(columns);
    };
    ShowHide2.prototype.getToggleFields = function(key) {
      var finalized = [];
      if (typeof key === "string") {
        finalized = [key];
      } else {
        finalized = key;
      }
      return finalized;
    };
    ShowHide2.prototype.getColumns = function(keys2, getKeyBy) {
      var _this = this;
      var columns = iterateArrayOrObject(keys2, function(key) {
        return iterateArrayOrObject(_this.parent.columnModel, function(item) {
          if (item["" + getKeyBy] === key) {
            return item;
          }
          return void 0;
        })[0];
      });
      return columns;
    };
    ShowHide2.prototype.batchActionPrevent = function(columns, changedStateColumns) {
      if (changedStateColumns === void 0) {
        changedStateColumns = [];
      }
      if (isActionPrevent(this.parent)) {
        this.colName = columns;
        this.changedCol = changedStateColumns;
        this.parent.closeEdit();
        return false;
      }
      return true;
    };
    ShowHide2.prototype.resetColumnState = function() {
      if (this.isShowHide) {
        for (var i = 0; i < this.colName.length; i++) {
          this.colName[parseInt(i.toString(), 10)].visible = !this.colName[parseInt(i.toString(), 10)].visible;
        }
      }
    };
    ShowHide2.prototype.setVisible = function(columns, changedStateColumns) {
      var _this = this;
      if (changedStateColumns === void 0) {
        changedStateColumns = [];
      }
      this.isShowHide = true;
      if (!this.batchActionPrevent(columns, changedStateColumns)) {
        return;
      }
      changedStateColumns = changedStateColumns.length > 0 ? changedStateColumns : columns;
      var args = {
        requestType: "columnstate",
        cancel: false,
        columns: changedStateColumns
      };
      var cancel = "cancel";
      if (this.parent.enableInfiniteScrolling && this.parent.allowGrouping && this.parent.groupModule.groupSettings.columns.length > 0) {
        this.parent.contentModule.visibleRows = [];
      }
      this.parent.trigger(actionBegin, args, function(showHideArgs) {
        var currentViewCols = _this.parent.getColumns();
        columns = isNullOrUndefined(columns) ? currentViewCols : columns;
        if (showHideArgs["" + cancel]) {
          _this.parent.notify(resetColumns, { showHideArgs });
          if (columns.length > 0) {
            columns[0].visible = true;
          }
          return;
        }
        _this.parent.notify(destroyEditForm, args);
        if (isGroupAdaptive(_this.parent)) {
          _this.parent.contentModule.emptyVcRows();
        }
        var addedRow2 = _this.parent.element.querySelector(".e-addedrow");
        if (_this.parent.editSettings.showAddNewRow && addedRow2) {
          remove(addedRow2);
          if (_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling) {
            _this.parent.isAddNewRow = true;
          }
          _this.parent.addNewRowFocus = true;
          _this.parent.isEdit = false;
        }
        if (_this.parent.allowSelection && _this.parent.getSelectedRecords().length && !_this.parent.selectionSettings.persistSelection) {
          _this.parent.clearSelection();
        }
        if (_this.parent.enableColumnVirtualization) {
          _this.parent.notify(refreshFrozenPosition, { isModeChg: true });
        } else {
          if (_this.parent.isFrozenGrid() && columns.length) {
            _this.parent.notify(refreshFrozenPosition, { isModeChg: true });
          } else {
            _this.parent.notify(columnVisibilityChanged, columns);
          }
        }
        var params = {
          requestType: "columnstate",
          columns: changedStateColumns
        };
        _this.parent.trigger(actionComplete, params);
        var startAdd = !_this.parent.element.querySelector(".e-addedrow");
        if (_this.parent.editSettings.showAddNewRow && startAdd) {
          _this.parent.isEdit = false;
          _this.parent.addRecord();
          if (!(_this.parent.enableVirtualization || _this.parent.enableInfiniteScrolling)) {
            _this.parent.notify(showAddNewRowFocus, {});
          }
        }
        if (_this.parent.columnQueryMode !== "All") {
          _this.parent.refresh();
        }
      });
      if (!this.parent.groupSettings.columns.length) {
        if (this.parent.autoFit) {
          this.parent.preventAdjustColumns();
        } else if (this.parent.allowResizing && this.parent.resizeSettings.mode === "Normal") {
          var isMaxWidth = this.parent.getHeaderTable().style.width.indexOf("px") === -1;
          this.widthService.setWidthToTable(isMaxWidth);
        }
      }
    };
    return ShowHide2;
  }()
);
var Scroll = (
  /** @class */
  function() {
    function Scroll2(parent) {
      this.previousValues = { top: 0, left: 0 };
      this.oneTimeReady = true;
      this.parent = parent;
      this.widthService = new ColumnWidthService(parent);
      this.addEventListener();
    }
    Scroll2.prototype.getModuleName = function() {
      return "scroll";
    };
    Scroll2.prototype.setWidth = function(uiupdate) {
      this.parent.element.style.width = formatUnit(this.parent.width);
      if (uiupdate) {
        this.widthService.setWidthToColumns();
      }
      if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar && this.parent.toolbarModule.toolbar.element) {
        var tlbrElement = this.parent.toolbarModule.toolbar.element;
        var tlbrLeftElement = tlbrElement.querySelector(".e-toolbar-left");
        var tlbrCenterElement = tlbrElement.querySelector(".e-toolbar-center");
        var tlbrRightElement = tlbrElement.querySelector(".e-toolbar-right");
        var tlbrItems = tlbrElement.querySelector(".e-toolbar-items");
        var tlbrLeftWidth = tlbrLeftElement ? tlbrLeftElement.clientWidth : 0;
        var tlbrCenterWidth = tlbrCenterElement ? tlbrCenterElement.clientWidth : 0;
        var tlbrRightWidth = tlbrRightElement ? tlbrRightElement.clientWidth : 0;
        var tlbrItemsWidth = tlbrItems ? tlbrItems.clientWidth : 0;
        var tlbrWidth = tlbrElement ? tlbrElement.clientWidth : 0;
        if (!this.parent.enableAdaptiveUI || tlbrLeftWidth > tlbrWidth || tlbrCenterWidth > tlbrWidth || tlbrRightWidth > tlbrWidth || tlbrItemsWidth > tlbrWidth) {
          this.parent.toolbarModule.toolbar.refreshOverflow();
        }
      }
    };
    Scroll2.prototype.setHeight = function() {
      var mHdrHeight = 0;
      var content$1 = this.parent.getContent().querySelector("." + content);
      var height = this.parent.height;
      if (this.parent.enableColumnVirtualization && this.parent.isFrozenGrid() && this.parent.height !== "auto" && this.parent.height.toString().indexOf("%") < 0) {
        height = parseInt(height, 10) - Scroll2.getScrollBarWidth();
      }
      if (!this.parent.enableVirtualization && this.parent.frozenRows && this.parent.height !== "auto" && this.parent.height !== "100%") {
        var tbody$1 = this.parent.getHeaderContent().querySelector(tbody + ":not(.e-masked-tbody)");
        mHdrHeight = tbody$1 ? tbody$1.offsetHeight : 0;
        if (tbody$1 && mHdrHeight) {
          var add = tbody$1.getElementsByClassName(addedRow).length;
          var height_1 = add * this.parent.getRowHeight();
          mHdrHeight -= height_1;
        } else if (!this.parent.isInitialLoad && this.parent.loadingIndicator.indicatorType === "Shimmer" && this.parent.getHeaderContent().querySelector(".e-masked-table")) {
          height = parseInt(height, 10) - this.parent.frozenRows * this.parent.getRowHeight();
        }
        content$1.style.height = formatUnit(parseInt(height, 10) - mHdrHeight);
      } else {
        content$1.style.height = formatUnit(height);
      }
      this.ensureOverflow(content$1);
      if (this.parent.isFrozenGrid()) {
        this.refresh();
      }
    };
    Scroll2.prototype.setPadding = function() {
      var content2 = this.parent.getHeaderContent();
      var scrollWidth2 = Scroll2.getScrollBarWidth() - this.getThreshold();
      var cssProps = this.getCssProperties();
      content2.querySelector("." + headerContent).style[cssProps.border] = scrollWidth2 > 0 ? "1px" : "0px";
      content2.style[cssProps.padding] = scrollWidth2 > 0 ? scrollWidth2 + "px" : "0px";
    };
    Scroll2.prototype.removePadding = function(rtl) {
      var cssProps = this.getCssProperties(rtl);
      var hDiv = this.parent.getHeaderContent().querySelector("." + headerContent);
      hDiv.style[cssProps.border] = "";
      hDiv.parentElement.style[cssProps.padding] = "";
      var footerDiv = this.parent.getFooterContent();
      if (footerDiv && footerDiv.classList.contains("e-footerpadding")) {
        footerDiv.classList.remove("e-footerpadding");
      }
    };
    Scroll2.prototype.refresh = function() {
      if (this.parent.height !== "100%") {
        return;
      }
      var content2 = this.parent.getContent();
      this.parent.element.style.height = "100%";
      var height = this.widthService.getSiblingsHeight(content2);
      content2.style.height = "calc(100% - " + height + "px)";
    };
    Scroll2.prototype.getThreshold = function() {
      var appName = Browser.info.name;
      if (appName === "mozilla") {
        return 0.5;
      }
      return 1;
    };
    Scroll2.prototype.addEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.on(onEmpty, this.wireEvents, this);
      this.parent.on(contentReady, this.wireEvents, this);
      this.parent.on(uiUpdate, this.onPropertyChanged, this);
      this.parent.on(textWrapRefresh, this.wireEvents, this);
      this.parent.on(headerRefreshed, this.setScrollLeft, this);
    };
    Scroll2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.off(onEmpty, this.wireEvents);
      this.parent.off(contentReady, this.wireEvents);
      this.parent.off(uiUpdate, this.onPropertyChanged);
      this.parent.off(textWrapRefresh, this.wireEvents);
      this.parent.off(headerRefreshed, this.setScrollLeft);
      this.unwireEvents();
    };
    Scroll2.prototype.unwireEvents = function() {
      if (this.parent.frozenRows && this.header) {
        EventHandler.remove(this.header, "touchstart pointerdown", this.setPageXY);
        EventHandler.remove(this.header, "touchmove pointermove", this.onTouchScroll);
      }
      var mScrollBar = this.parent.getContent() ? this.parent.getContent().querySelector(".e-movablescrollbar") : null;
      if (this.parent.isFrozenGrid() && this.parent.enableColumnVirtualization) {
        if (mScrollBar) {
          EventHandler.remove(mScrollBar, "scroll", this.onCustomScrollbarScroll);
        }
        if (this.content) {
          EventHandler.remove(this.content, "scroll", this.onCustomScrollbarScroll);
          EventHandler.remove(this.content, "touchstart pointerdown", this.setPageXY);
          if (!(/macintosh|ipad/.test(Browser.userAgent.toLowerCase()) && Browser.isDevice)) {
            EventHandler.remove(this.content, "touchmove pointermove", this.onTouchScroll);
          }
        }
        if (this.header) {
          EventHandler.remove(this.header, "scroll", this.onCustomScrollbarScroll);
          EventHandler.remove(this.header, "touchstart pointerdown", this.setPageXY);
          EventHandler.remove(this.header, "touchmove pointermove", this.onTouchScroll);
        }
      }
      if (this.content) {
        EventHandler.remove(this.content, "scroll", this.contentScrollHandler);
      }
      if (this.header) {
        EventHandler.remove(this.header, "scroll", this.headerScrollHandler);
      }
      this.contentScrollHandler = null;
      this.headerScrollHandler = null;
      if (this.parent.aggregates.length && this.parent.getFooterContent()) {
        EventHandler.remove(this.parent.getFooterContent().firstChild, "scroll", this.onContentScroll);
      }
    };
    Scroll2.prototype.setScrollLeft = function() {
      this.parent.getHeaderContent().querySelector("." + headerContent).scrollLeft = this.previousValues.left;
    };
    Scroll2.prototype.onContentScroll = function(scrollTarget) {
      var _this = this;
      var element2 = scrollTarget;
      var isHeader = element2.classList.contains(headerContent);
      return function(e) {
        if (_this.content.querySelector(tbody) === null || _this.parent.isPreventScrollEvent) {
          return;
        }
        var target = e.target;
        if (_this.parent.frozenRows) {
          if (_this.content.scrollTop > 0 && _this.parent.frozenRows) {
            addClass([_this.parent.element], "e-top-shadow");
          } else {
            removeClass([_this.parent.element], "e-top-shadow");
          }
        }
        if (_this.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length) {
          var errorFreeze = _this.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])');
          var errorFixed = _this.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])');
          var scrollLeft = _this.parent.enableRtl ? Math.abs(target.scrollLeft) : target.scrollLeft;
          var isStartOfScroll = scrollLeft <= 1;
          if (!isStartOfScroll && _this.parent.getVisibleFrozenLeftCount()) {
            addClass([_this.parent.element], "e-left-shadow");
          } else {
            removeClass([_this.parent.element], "e-left-shadow");
          }
          var scrollRight = _this.parent.enableRtl ? Math.abs(target.scrollLeft) : target.scrollLeft;
          var isEndOfScroll = Math.round(scrollRight + target.clientWidth) >= target.scrollWidth - 1;
          if (isEndOfScroll && _this.parent.getVisibleFrozenRightCount()) {
            removeClass([_this.parent.element], "e-right-shadow");
          } else {
            addClass([_this.parent.element], "e-right-shadow");
          }
          var rows = [].slice.call(_this.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));
          if ((rows.length === 1 && errorFreeze.length || _this.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])') || errorFixed.length) && target.scrollLeft !== _this.previousValues.left) {
            target.scrollLeft = _this.previousValues.left;
            return;
          }
          if (rows.length !== 1 && (errorFreeze.length || errorFixed.length) && target.scrollTop !== _this.previousValues.top) {
            target.scrollTop = _this.previousValues.top;
            return;
          }
        }
        var left = target.scrollLeft;
        if (!isNullOrUndefined(_this.parent.infiniteScrollModule) && _this.parent.enableInfiniteScrolling && (!_this.parent.isEdit || _this.parent.editSettings.showAddNewRow && !_this.parent.element.querySelector(".e-editedrow"))) {
          _this.parent.notify(infiniteScrollHandler, { target: e.target, isLeft: _this.previousValues.left !== left });
        }
        if (_this.parent.groupSettings.columns.length && _this.parent.groupSettings.enableLazyLoading) {
          var isDown = _this.previousValues.top < _this.parent.getContent().firstElementChild.scrollTop;
          _this.parent.notify(lazyLoadScrollHandler, { scrollDown: isDown });
        }
        _this.parent.notify(virtualScrollEdit, {});
        var isFooter = target.classList.contains("e-summarycontent");
        if (_this.previousValues.left === left) {
          _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;
          return;
        }
        _this.parent.notify(closeFilterDialog, e);
        element2.scrollLeft = left;
        if (isFooter) {
          _this.header.scrollLeft = left;
        }
        _this.previousValues.left = left;
        _this.parent.notify(scroll, { left });
      };
    };
    Scroll2.prototype.onCustomScrollbarScroll = function(cont, hdr) {
      var _this = this;
      var content2 = cont;
      var header = hdr;
      return function(e) {
        if (_this.content.querySelector(tbody) === null) {
          return;
        }
        var target = e.target;
        var left = target.scrollLeft;
        if (_this.previousValues.left === left) {
          return;
        }
        content2.scrollLeft = left;
        header.scrollLeft = left;
        _this.previousValues.left = left;
        _this.parent.notify(scroll, { left });
        if (_this.parent.isDestroyed) {
          return;
        }
      };
    };
    Scroll2.prototype.onTouchScroll = function(scrollTarget) {
      var _this = this;
      var element2 = scrollTarget;
      return function(e) {
        if (e.pointerType === "mouse") {
          return;
        }
        var isFrozen = _this.parent.isFrozenGrid();
        var pageXY = _this.getPointXY(e);
        var left = element2.scrollLeft + (_this.pageXY.x - pageXY.x);
        var mHdr = _this.parent.getHeaderContent().querySelector("." + headerContent);
        var mCont = _this.parent.getContent().querySelector("." + content);
        if (_this.previousValues.left === left || (left < 0 || mHdr.scrollWidth - mHdr.clientWidth < left)) {
          return;
        }
        e.preventDefault();
        mHdr.scrollLeft = left;
        mCont.scrollLeft = left;
        if (isFrozen && _this.parent.enableColumnVirtualization) {
          var scrollBar = _this.parent.getContent().querySelector(".e-movablescrollbar");
          scrollBar.scrollLeft = left;
        }
        _this.pageXY.x = pageXY.x;
        _this.previousValues.left = left;
      };
    };
    Scroll2.prototype.setPageXY = function() {
      var _this = this;
      return function(e) {
        if (e.pointerType === "mouse") {
          return;
        }
        _this.pageXY = _this.getPointXY(e);
      };
    };
    Scroll2.prototype.getPointXY = function(e) {
      var pageXY = { x: 0, y: 0 };
      if (e.touches && e.touches.length) {
        pageXY.x = e.touches[0].pageX;
        pageXY.y = e.touches[0].pageY;
      } else {
        pageXY.x = e.pageX;
        pageXY.y = e.pageY;
      }
      return pageXY;
    };
    Scroll2.prototype.getScrollbleParent = function(node) {
      if (node === null) {
        return null;
      }
      var parent = isNullOrUndefined(node.tagName) ? node.scrollingElement : node;
      var overflowY = document.defaultView.getComputedStyle(parent, null).overflowY;
      if (parent.scrollHeight > parent.clientHeight && overflowY !== "hidden" && overflowY !== "visible" || node.tagName === "HTML" || node.tagName === "BODY") {
        return node;
      } else {
        return this.getScrollbleParent(node.parentNode);
      }
    };
    Scroll2.prototype.addStickyListener = function(isAdd) {
      this.parentElement = this.getScrollbleParent(this.parent.element.parentElement);
      if (isAdd && this.parentElement) {
        this.eventElement = this.parentElement.tagName === "HTML" || this.parentElement.tagName === "BODY" ? document : this.parentElement;
        EventHandler.add(this.eventElement, "scroll", this.makeStickyHeader, this);
      } else if (this.eventElement) {
        EventHandler.remove(this.eventElement, "scroll", this.makeStickyHeader);
        this.eventElement = null;
      }
    };
    Scroll2.prototype.resizeFrozenRowBorder = function() {
      var div;
      if (!this.parent.element.querySelector(".e-frozenrow-border")) {
        div = this.parent.createElement("div", { className: "e-frozenrow-border" });
        this.parent.element.insertBefore(div, this.parent.element.querySelector(".e-gridcontent"));
      } else {
        div = this.parent.element.querySelector(".e-frozenrow-border");
      }
      var scrollWidth2 = this.parent.height !== "auto" ? Scroll2.getScrollBarWidth() : 0;
      div.style.width = this.parent.element.offsetWidth - scrollWidth2 - 0.5 + "px";
    };
    Scroll2.prototype.wireEvents = function() {
      var _this = this;
      if (this.oneTimeReady) {
        var frzCols = this.parent.isFrozenGrid();
        this.content = this.parent.getContent().querySelector("." + content);
        this.header = this.parent.getHeaderContent().querySelector("." + headerContent);
        var mScrollBar = this.parent.getContent().querySelector(".e-movablescrollbar");
        if (this.parent.frozenRows && this.header && this.content) {
          EventHandler.add(this.header, "touchstart pointerdown", this.setPageXY(), this);
          EventHandler.add(this.header, "touchmove pointermove", this.onTouchScroll(this.content), this);
        }
        if (frzCols && mScrollBar && this.parent.enableColumnVirtualization) {
          EventHandler.add(mScrollBar, "scroll", this.onCustomScrollbarScroll(this.content, this.header), this);
          EventHandler.add(this.content, "scroll", this.onCustomScrollbarScroll(mScrollBar, this.header), this);
          EventHandler.add(this.header, "scroll", this.onCustomScrollbarScroll(mScrollBar, this.content), this);
          EventHandler.add(this.header, "touchstart pointerdown", this.setPageXY(), this);
          EventHandler.add(this.header, "touchmove pointermove", this.onTouchScroll(this.content), this);
          EventHandler.add(this.content, "touchstart pointerdown", this.setPageXY(), this);
          if (!(/macintosh|ipad/.test(Browser.userAgent.toLowerCase()) && Browser.isDevice)) {
            EventHandler.add(this.content, "touchmove pointermove", this.onTouchScroll(this.header), this);
          }
        }
        this.contentScrollHandler = this.onContentScroll(this.header);
        this.headerScrollHandler = this.onContentScroll(this.content);
        EventHandler.add(this.content, "scroll", this.contentScrollHandler, this);
        EventHandler.add(this.header, "scroll", this.headerScrollHandler, this);
        if (this.parent.aggregates.length) {
          EventHandler.add(this.parent.getFooterContent().firstChild, "scroll", this.onContentScroll(this.content), this);
        }
        if (this.parent.enableStickyHeader) {
          this.addStickyListener(true);
        }
        this.refresh();
        this.oneTimeReady = false;
      }
      var table2 = this.parent.getContentTable();
      var sLeft;
      var sHeight;
      var clientHeight;
      getUpdateUsingRaf(function() {
        sLeft = _this.header.scrollLeft;
        sHeight = table2.scrollHeight;
        clientHeight = _this.parent.getContent().clientHeight;
      }, function() {
        var args = { cancel: false };
        _this.parent.notify(checkScrollReset, args);
        if (sHeight < clientHeight && _this.parent.height !== "auto") {
          _this.setLastRowCell();
          _this.parent.notify(lastRowCellBorderUpdated, args);
        }
        if (_this.parent.frozenRows) {
          _this.resizeFrozenRowBorder();
        }
        if (!_this.parent.enableVirtualization && !_this.parent.enableInfiniteScrolling) {
          if (!args.cancel) {
            _this.header.scrollLeft = _this.previousValues.left;
            _this.content.scrollLeft = _this.previousValues.left;
            _this.content.scrollTop = _this.previousValues.top;
          }
        }
        if (!_this.parent.enableColumnVirtualization) {
          _this.content.scrollLeft = sLeft;
          if (_this.parent.isFrozenGrid()) {
            _this.previousValues.left = sLeft;
          }
        }
      });
      this.parent.isPreventScrollEvent = false;
    };
    Scroll2.prototype.setLastRowCell = function() {
      var table2 = this.parent.getContentTable();
      removeClass(table2.querySelectorAll("td"), "e-lastrowcell");
      if (table2.querySelector("tr:nth-last-child(2)")) {
        if (this.parent.editSettings.showAddNewRow && this.parent.editSettings.newRowPosition === "Bottom") {
          addClass(table2.querySelector("tr:nth-last-child(2)").querySelectorAll("td"), "e-lastrowcell");
        }
      }
      addClass(table2.querySelectorAll("tr:last-child td"), "e-lastrowcell");
      if (this.parent.isSpan) {
        addClass(table2.querySelectorAll(".e-row-span-lastrowcell"), "e-lastrowcell");
      }
    };
    Scroll2.prototype.getCssProperties = function(rtl) {
      var css = {};
      var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;
      css.border = enableRtl ? "borderLeftWidth" : "borderRightWidth";
      css.padding = enableRtl ? "paddingLeft" : "paddingRight";
      return css;
    };
    Scroll2.prototype.ensureOverflow = function(content2) {
      content2.style.overflowY = this.parent.height === "auto" ? "auto" : "scroll";
    };
    Scroll2.prototype.onPropertyChanged = function(e) {
      if (e.module !== this.getModuleName()) {
        return;
      }
      this.setPadding();
      this.oneTimeReady = true;
      if (this.parent.height === "auto") {
        this.removePadding();
      }
      this.wireEvents();
      this.setHeight();
      var width = "width";
      this.setWidth(!isNullOrUndefined(e.properties["" + width]));
    };
    Scroll2.prototype.makeStickyHeader = function() {
      if (this.parent.enableStickyHeader && this.parent.element && this.parent.getContent()) {
        var contentRect = this.parent.getContent().getClientRects()[0];
        if (contentRect) {
          var windowScale = window.devicePixelRatio;
          var headerEle = this.parent.getHeaderContent();
          var toolbarEle = this.parent.element.querySelector(".e-toolbar");
          var groupHeaderEle = this.parent.element.querySelector(".e-groupdroparea");
          var height = headerEle.offsetHeight + (toolbarEle ? toolbarEle.offsetHeight : 0) + (groupHeaderEle ? groupHeaderEle.offsetHeight : 0);
          var parentTop = this.parentElement.getClientRects()[0].top;
          var top_1 = contentRect.top - (parentTop < 0 ? 0 : parentTop);
          var left = contentRect.left;
          var colMenuEle = document.body.querySelector("#" + this.parent.element.id + "_columnmenu");
          if (windowScale !== 1) {
            top_1 = Math.ceil(top_1);
          }
          if (top_1 < height && contentRect.bottom > 0) {
            headerEle.classList.add("e-sticky");
            var elemTop = 0;
            if (groupHeaderEle && this.parent.groupSettings.showDropArea) {
              this.setSticky(groupHeaderEle, elemTop, contentRect.width, left, true);
              elemTop += groupHeaderEle.getClientRects()[0].height;
            }
            if (toolbarEle) {
              this.setSticky(toolbarEle, elemTop, contentRect.width, left, true);
              elemTop += toolbarEle.getClientRects()[0].height;
            }
            this.setSticky(headerEle, elemTop, contentRect.width, left, true);
            if (!isNullOrUndefined(colMenuEle)) {
              colMenuEle.style.position = "fixed";
              colMenuEle.style.top = height + "px";
            }
          } else {
            if (headerEle.classList.contains("e-sticky")) {
              this.setSticky(headerEle, null, null, null, false);
              if (toolbarEle) {
                this.setSticky(toolbarEle, null, null, null, false);
              }
              if (groupHeaderEle) {
                this.setSticky(groupHeaderEle, null, null, null, false);
              }
              var ccDlg = this.parent.element.querySelector(".e-ccdlg");
              if (ccDlg) {
                ccDlg.classList.remove("e-sticky");
              }
              if (!isNullOrUndefined(colMenuEle)) {
                colMenuEle.style.position = "absolute";
                var topStyle = contentRect.top - parentTop;
                colMenuEle.style.top = topStyle + "px";
              }
            }
          }
          this.parent.notify(stickyScrollComplete, {});
        }
      }
    };
    Scroll2.prototype.setSticky = function(ele, top, width, left, isAdd) {
      if (isAdd) {
        ele.classList.add("e-sticky");
      } else {
        ele.classList.remove("e-sticky");
      }
      ele.style.width = width != null ? width + "px" : "";
      ele.style.top = top != null ? top + "px" : "";
      ele.style.left = left !== null ? parseInt(ele.style.left, 10) !== left ? left + "px" : ele.style.left : "";
    };
    Scroll2.prototype.destroy = function() {
      var gridElement = this.parent.element;
      if (!gridElement || !gridElement.querySelector("." + gridHeader) && !gridElement.querySelector("." + gridContent)) {
        return;
      }
      this.removeEventListener();
      var cont = this.parent.getContent().querySelector("." + content);
      EventHandler.remove(cont, "scroll", this.onContentScroll);
      if (this.parent.enableStickyHeader) {
        this.addStickyListener(false);
      }
      this.removePadding();
      removeClass([this.parent.getHeaderContent().querySelector("." + headerContent)], headerContent);
      removeClass([cont], content);
      cont.style.height = "";
      this.parent.element.style.width = "";
    };
    Scroll2.getScrollBarWidth = function() {
      return getScrollBarWidth();
    };
    return Scroll2;
  }()
);
var __extends$6 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$5 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var AggregateColumn = (
  /** @class */
  function(_super) {
    __extends$6(AggregateColumn2, _super);
    function AggregateColumn2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.templateFn = {};
      return _this;
    }
    AggregateColumn2.prototype.setFormatter = function(value) {
      this.formatFn = value;
    };
    AggregateColumn2.prototype.getFormatter = function() {
      return this.formatFn;
    };
    AggregateColumn2.prototype.setTemplate = function(helper) {
      if (helper === void 0) {
        helper = {};
      }
      if (this.footerTemplate !== void 0) {
        this.templateFn[getEnumValue(CellType, CellType.Summary)] = {
          fn: compile$1(this.footerTemplate, helper),
          property: "footerTemplate"
        };
      }
      if (this.groupFooterTemplate !== void 0) {
        this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = {
          fn: compile$1(this.groupFooterTemplate, helper),
          property: "groupFooterTemplate"
        };
      }
      if (this.groupCaptionTemplate !== void 0) {
        this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = {
          fn: compile$1(this.groupCaptionTemplate, helper),
          property: "groupCaptionTemplate"
        };
      }
    };
    AggregateColumn2.prototype.getTemplate = function(type) {
      return this.templateFn[getEnumValue(CellType, type)];
    };
    AggregateColumn2.prototype.setPropertiesSilent = function(prop) {
      this.setProperties(prop, true);
    };
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "type", void 0);
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "field", void 0);
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "columnName", void 0);
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "format", void 0);
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "footerTemplate", void 0);
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "groupFooterTemplate", void 0);
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "groupCaptionTemplate", void 0);
    __decorate$5([
      Property()
    ], AggregateColumn2.prototype, "customAggregate", void 0);
    return AggregateColumn2;
  }(ChildProperty)
);
var AggregateRow = (
  /** @class */
  function(_super) {
    __extends$6(AggregateRow2, _super);
    function AggregateRow2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$5([
      Collection([], AggregateColumn)
    ], AggregateRow2.prototype, "columns", void 0);
    return AggregateRow2;
  }(ChildProperty)
);
var Clipboard = (
  /** @class */
  function() {
    function Clipboard2(parent, serviceLocator) {
      this.copyContent = "";
      this.isSelect = false;
      this.parent = parent;
      this.serviceLocator = serviceLocator;
      this.addEventListener();
    }
    Clipboard2.prototype.addEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.on(contentReady, this.initialEnd, this);
      this.parent.on(keyPressed, this.keyDownHandler, this);
      this.parent.on(click, this.clickHandler, this);
      this.parent.on(onEmpty, this.initialEnd, this);
      EventHandler.add(this.parent.element, "keydown", this.pasteHandler, this);
    };
    Clipboard2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.off(keyPressed, this.keyDownHandler);
      this.parent.off(contentReady, this.initialEnd);
      this.parent.off(click, this.clickHandler);
      this.parent.off(onEmpty, this.initialEnd);
      EventHandler.remove(this.parent.element, "keydown", this.pasteHandler);
    };
    Clipboard2.prototype.clickHandler = function(e) {
      var target = e.target;
      target = parentsUntil(target, "e-rowcell");
    };
    Clipboard2.prototype.pasteHandler = function(e) {
      var _this = this;
      var grid = this.parent;
      var isMacLike = /(Mac)/i.test(navigator.platform);
      var selectedRowCellIndexes = this.parent.getSelectedRowCellIndexes();
      if (!grid.isEdit && e.keyCode === 67 && isMacLike && e.metaKey) {
        this.copy();
      }
      if (selectedRowCellIndexes.length && e.keyCode === 86 && (!isMacLike && e.ctrlKey || isMacLike && e.metaKey) && !grid.isEdit) {
        var target = closest(document.activeElement, "." + rowCell);
        if (!this.clipBoardTextArea || !target || !grid.editSettings.allowEditing || grid.editSettings.mode !== "Batch" || grid.selectionSettings.mode !== "Cell" || grid.selectionSettings.cellSelectionMode === "Flow") {
          return;
        }
        this.activeElement = document.activeElement;
        var x_1 = window.scrollX;
        var y_1 = window.scrollY;
        this.clipBoardTextArea.focus();
        setTimeout(function() {
          _this.activeElement.focus();
          window.scrollTo(x_1, y_1);
          _this.paste(_this.clipBoardTextArea.value, selectedRowCellIndexes[0].rowIndex, selectedRowCellIndexes[0].cellIndexes[0]);
        }, isMacLike ? 100 : 10);
      }
    };
    Clipboard2.prototype.paste = function(data, rowIndex, colIndex) {
      var grid = this.parent;
      var cIdx = colIndex;
      var rIdx = rowIndex;
      var col;
      var value;
      var isAvail;
      var rows = data.split("\n");
      var cols;
      for (var r = 0; r < rows.length; r++) {
        cols = rows[parseInt(r.toString(), 10)].split("	");
        cIdx = colIndex;
        if (r === rows.length - 1 && rows[parseInt(r.toString(), 10)] === "" || isUndefined(grid.getRowByIndex(rIdx))) {
          cIdx++;
          break;
        }
        for (var c = 0; c < cols.length; c++) {
          isAvail = grid.getCellFromIndex(rIdx, cIdx);
          if (!isAvail) {
            cIdx++;
            break;
          }
          col = grid.getColumnByIndex(cIdx);
          value = col.getParser() ? col.getParser()(cols[parseInt(c.toString(), 10)]) : cols[parseInt(c.toString(), 10)];
          if (col.allowEditing && !col.isPrimaryKey) {
            var args = {
              column: col,
              data: value,
              rowIndex: rIdx
            };
            this.parent.trigger(beforePaste, args);
            rIdx = args.rowIndex;
            if (!args.cancel) {
              if (grid.editModule) {
                if (col.type === "number") {
                  this.parent.editModule.updateCell(rIdx, col.field, parseFloat(args.data));
                } else {
                  grid.editModule.updateCell(rIdx, col.field, args.data);
                }
              }
            }
          }
          cIdx++;
        }
        rIdx++;
      }
      grid.selectionModule.selectCellsByRange({ rowIndex, cellIndex: colIndex }, { rowIndex: rIdx - 1, cellIndex: cIdx - 1 });
      var cell = this.parent.getCellFromIndex(rIdx - 1, cIdx - 1);
      if (cell) {
        classList(cell, ["e-focus", "e-focused"], []);
      }
      this.clipBoardTextArea.value = "";
    };
    Clipboard2.prototype.initialEnd = function() {
      this.l10n = this.serviceLocator.getService("localization");
      this.parent.off(contentReady, this.initialEnd);
      this.clipBoardTextArea = this.parent.createElement("textarea", {
        className: "e-clipboard",
        attrs: { tabindex: "-1", "aria-label": this.l10n.getConstant("ClipBoard") }
      });
      this.clipBoardTextArea.style.opacity = "0";
      this.parent.element.appendChild(this.clipBoardTextArea);
    };
    Clipboard2.prototype.keyDownHandler = function(e) {
      if (e.action === "ctrlPlusC") {
        this.copy();
      } else if (e.action === "ctrlShiftPlusH") {
        this.copy(true);
      }
    };
    Clipboard2.prototype.setCopyData = function(withHeader) {
      if (window.getSelection().toString() === "") {
        this.clipBoardTextArea.value = this.copyContent = "";
        var rows = this.parent.getDataRows();
        if (this.parent.selectionSettings && this.parent.selectionSettings.allowColumnSelection && this.parent.selectionModule && this.parent.selectionModule.selectedColumnsIndexes.length) {
          if (withHeader) {
            var selectedColumns = this.parent.selectionModule.selectedColumnsIndexes;
            var headerColumns = [];
            for (var i = 0; i < selectedColumns.length; i++) {
              var colIndex = selectedColumns[parseInt(i.toString(), 10)];
              var headerCell = this.parent.getColumnHeaderByIndex(colIndex);
              if (headerCell && !headerCell.classList.contains("e-hide")) {
                headerColumns.push(headerCell);
              }
            }
            this.getCopyData(headerColumns, false, "	", withHeader);
            this.copyContent += "\n";
          }
          for (var j = 0; j < rows.length; j++) {
            var columnCells = [];
            if (j > 0) {
              this.copyContent += "\n";
            }
            columnCells.push.apply(columnCells, [].slice.call(rows[parseInt(j.toString(), 10)].querySelectorAll(".e-columnselection:not(.e-hide)")));
            this.getCopyData(columnCells, false, "	", withHeader);
          }
        } else {
          if (this.parent.selectionSettings.mode !== "Cell") {
            var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function(a, b) {
              return a - b;
            });
            if (withHeader) {
              var headerTextArray = [];
              for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {
                headerTextArray[parseInt(i.toString(), 10)] = this.parent.getVisibleColumns()[parseInt(i.toString(), 10)].headerText;
              }
              this.getCopyData(headerTextArray, false, "	", withHeader);
              this.copyContent += "\n";
            }
            if ((this.parent.enableVirtualization || this.parent.enableInfiniteScrolling) && selectedIndexes.length > rows.length) {
              selectedIndexes = [];
              for (var i = 0; i < rows.length; i++) {
                var row2 = rows[parseInt(i.toString(), 10)];
                if (row2.getAttribute("aria-selected") === "true") {
                  selectedIndexes.push(parseInt(row2.getAttribute("data-rowindex"), 10));
                }
              }
            }
            for (var i = 0; i < selectedIndexes.length; i++) {
              if (i > 0) {
                this.copyContent += "\n";
              }
              var leftCols = [];
              var idx = selectedIndexes[parseInt(i.toString(), 10)];
              if (!isGroupAdaptive(this.parent) && (this.parent.enableVirtualization || this.parent.enableInfiniteScrolling && this.parent.infiniteScrollSettings.enableCache || this.parent.groupSettings.columns.length && this.parent.groupSettings.enableLazyLoading)) {
                idx = rows.map(function(m) {
                  return m.getAttribute("data-rowindex");
                }).indexOf(selectedIndexes[parseInt(i.toString(), 10)].toString());
              }
              var currentRow = rows[parseInt(idx.toString(), 10)];
              if (!isNullOrUndefined(currentRow)) {
                leftCols.push.apply(leftCols, [].slice.call(currentRow.querySelectorAll(".e-rowcell:not(.e-hide)")));
                this.getCopyData(leftCols, false, "	", withHeader);
              }
            }
          } else if (this.parent.selectionModule && this.parent.selectionModule.selectedRowCellIndexes.length) {
            var obj = this.checkBoxSelection();
            if (obj.status) {
              if (withHeader) {
                var headers = [];
                for (var i = 0; i < obj.colIndexes.length; i++) {
                  var colHeader = this.parent.getColumnHeaderByIndex(obj.colIndexes[parseInt(i.toString(), 10)]);
                  if (!colHeader.classList.contains("e-hide")) {
                    headers.push(colHeader);
                  }
                }
                this.getCopyData(headers, false, "	", withHeader);
                this.copyContent += "\n";
              }
              for (var i = 0; i < obj.rowIndexes.length; i++) {
                if (i > 0) {
                  this.copyContent += "\n";
                }
                var cells = [].slice.call(rows[obj.rowIndexes[parseInt(i.toString(), 10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));
                this.getCopyData(cells, false, "	", withHeader);
              }
            } else {
              this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")), true, "\n", withHeader);
            }
          }
        }
        var args = {
          data: this.copyContent,
          cancel: false
        };
        this.parent.trigger(beforeCopy, args);
        if (args.cancel) {
          return;
        }
        this.clipBoardTextArea.value = this.copyContent = args.data;
        if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {
          this.clipBoardTextArea.select();
        } else {
          this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);
        }
        this.isSelect = true;
      }
    };
    Clipboard2.prototype.getCopyData = function(cells, isCell, splitKey, withHeader) {
      var isElement = typeof cells[0] !== "string";
      for (var j = 0; j < cells.length; j++) {
        if (withHeader && isCell) {
          var colIdx = parseInt(cells[parseInt(j.toString(), 10)].getAttribute(ariaColIndex), 10) - 1;
          this.copyContent += this.parent.getColumns()[parseInt(colIdx.toString(), 10)].headerText + "\n";
        }
        if (isElement) {
          if (!cells[parseInt(j.toString(), 10)].classList.contains("e-hide")) {
            this.copyContent += cells[parseInt(j.toString(), 10)].innerText;
          }
        } else {
          this.copyContent += cells[parseInt(j.toString(), 10)];
        }
        if (j < cells.length - 1) {
          this.copyContent += splitKey;
        }
      }
    };
    Clipboard2.prototype.copy = function(withHeader) {
      if (document.queryCommandSupported("copy") && this.clipBoardTextArea) {
        this.setCopyData(withHeader);
        document.execCommand("copy");
        this.clipBoardTextArea.blur();
      }
      if (this.isSelect) {
        window.getSelection().removeAllRanges();
        this.isSelect = false;
      }
    };
    Clipboard2.prototype.getModuleName = function() {
      return "clipboard";
    };
    Clipboard2.prototype.destroy = function() {
      this.removeEventListener();
      if (this.clipBoardTextArea) {
        remove(this.clipBoardTextArea);
        this.clipBoardTextArea = null;
      }
    };
    Clipboard2.prototype.checkBoxSelection = function() {
      var gridObj = this.parent;
      var obj = { status: false };
      if (gridObj.selectionSettings.mode === "Cell") {
        var rowCellIndxes = gridObj.getSelectedRowCellIndexes();
        var str = void 0;
        var rowIndexes = [];
        var i = void 0;
        for (i = 0; i < rowCellIndxes.length; i++) {
          if (rowCellIndxes[parseInt(i.toString(), 10)].cellIndexes.length) {
            rowIndexes.push(rowCellIndxes[parseInt(i.toString(), 10)].rowIndex);
          }
          if (rowCellIndxes[parseInt(i.toString(), 10)].cellIndexes.length) {
            if (!str) {
              str = JSON.stringify(rowCellIndxes[parseInt(i.toString(), 10)].cellIndexes.sort());
            }
            if (str !== JSON.stringify(rowCellIndxes[parseInt(i.toString(), 10)].cellIndexes.sort())) {
              break;
            }
          }
        }
        rowIndexes.sort(function(a, b) {
          return a - b;
        });
        if (i === rowCellIndxes.length) {
          obj = { status: true, rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };
        }
      }
      return obj;
    };
    return Clipboard2;
  }()
);
var BASE_DOC_URL = "https://ej2.syncfusion.com/documentation/grid";
var DOC_URL = "https://ej2.syncfusion.com/documentation/";
var WARNING = "[EJ2Grid.Warning]";
var ERROR = "[EJ2Grid.Error]";
var INFO = "[EJ2Grid.Info]";
var Logger = (
  /** @class */
  function() {
    function Logger2(parent) {
      this.parent = parent;
      this.parent.on("initial-end", this.patchadaptor, this);
    }
    Logger2.prototype.getModuleName = function() {
      return "logger";
    };
    Logger2.prototype.log = function(types, args) {
      if (!(types instanceof Array)) {
        types = [types];
      }
      var type = types;
      for (var i = 0; i < type.length; i++) {
        var item = detailLists[type[parseInt(i.toString(), 10)]];
        var cOp = item.check(args, this.parent);
        if (cOp.success) {
          console[item.logType](item.generateMessage(args, this.parent, cOp.options));
        }
      }
    };
    Logger2.prototype.patchadaptor = function() {
      var adaptor = this.parent.getDataModule().dataManager.adaptor;
      var original = adaptor.beforeSend;
      if (original) {
        adaptor.beforeSend = function(dm, request, settings) {
          original.call(adaptor, dm, request, settings);
        };
      }
    };
    Logger2.prototype.destroy = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.off("initial-end", this.patchadaptor);
    };
    return Logger2;
  }()
);
var detailLists = {
  // eslint-disable-next-line camelcase
  module_missing: {
    type: "module_missing",
    logType: "warn",
    check: function(args, parent) {
      var injected = parent.getInjectedModules().map(function(m) {
        return m.prototype.getModuleName();
      });
      var modules = parent.requiredModules().map(function(m) {
        return m.member;
      }).filter(function(name) {
        return injected.indexOf(name) === -1;
      });
      return { success: modules.filter(function(m) {
        return m !== "resize";
      }).length > 0, options: modules };
    },
    generateMessage: function(args, parent, modules) {
      modules = modules.filter(function(m) {
        return m !== "resize";
      }).reduce(function(prev, cur) {
        return prev + ("* " + cur + "\n");
      }, "");
      return WARNING + ": MODULES MISSING\nThe following modules are not injected:.\n" + ("" + modules) + ("Refer to " + BASE_DOC_URL + "/module.html for documentation on importing feature modules.");
    }
  },
  // eslint-disable-next-line camelcase
  promise_enabled: {
    type: "promise_enabled",
    logType: "error",
    check: function() {
      return { success: typeof Promise === "undefined" };
    },
    generateMessage: function() {
      return ERROR + ": PROMISE UNDEFINED\nPromise object is not present in the global environment,please use polyfil to support Promise object in your environment.\n" + ("Refer to " + DOC_URL + "/base/browser.html?#required-polyfills for more information.");
    }
  },
  // eslint-disable-next-line camelcase
  primary_column_missing: {
    type: "primary_column_missing",
    logType: "warn",
    check: function(args, parent) {
      return { success: parent.enableColumnVirtualization ? parent.getPrimaryKeyFieldNames().length === 0 : parent.getColumns().filter(function(column) {
        return column.isPrimaryKey;
      }).length === 0 };
    },
    generateMessage: function() {
      return WARNING + ": PRIMARY KEY MISSING\nEditing is enabled but primary key column is not specified.\n" + ("Refer to " + BASE_DOC_URL + "/api-column.html?#isprimarykey for documentation on providing primary key columns.");
    }
  },
  // eslint-disable-next-line camelcase
  selection_key_missing: {
    type: "selection_key_missing",
    logType: "warn",
    check: function(args, parent) {
      return { success: parent.selectionSettings.persistSelection && parent.getColumns().filter(function(column) {
        return column.isPrimaryKey;
      }).length === 0 };
    },
    generateMessage: function() {
      return WARNING + ": PRIMARY KEY MISSING\nselectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.\n" + ("Refer to " + BASE_DOC_URL + "/api-column.html?#isprimarykey for documentation on providing primary key columns.");
    }
  },
  actionfailure: {
    type: "actionfailure",
    logType: "error",
    check: function() {
      return { success: true };
    },
    generateMessage: function(args, parent) {
      var message = "";
      var formatError = formatErrorHandler(args);
      var ajaxError = ajaxErrorHandler(args);
      if (ajaxError !== "") {
        message = ajaxError;
      } else if (formatError !== "") {
        message = formatError;
      } else {
        message = args.error;
      }
      return WARNING + ": " + message;
    }
  },
  // eslint-disable-next-line camelcase
  locale_missing: {
    type: "locale_missing",
    logType: "warn",
    check: function(args, parent) {
      var lObj = DataUtil.getObject("locale." + parent.locale + ".grid", L10n);
      return { success: parent.locale !== "en-US" && isNullOrUndefined(lObj) };
    },
    generateMessage: function(args, parent) {
      return WARNING + ": LOCALE CONFIG MISSING\n" + ("Locale configuration for '" + parent.locale + "' is not provided.\n") + ("Refer to " + BASE_DOC_URL + "/globalization-and-localization.html?#localization \n             for documentation on setting locale configuration.");
    }
  },
  limitation: {
    type: "limitation",
    logType: "warn",
    check: function(args, parent) {
      var name = args;
      var opt;
      switch (name) {
        case "freeze":
          opt = {
            success: !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid),
            options: { name: "freeze" }
          };
          break;
        case "virtualization":
          opt = {
            success: !isUndefined(parent.detailTemplate) || !isUndefined(parent.childGrid),
            options: { name: "virtualization" }
          };
          break;
        default:
          opt = { success: false };
          break;
      }
      return opt;
    },
    generateMessage: function(args, parent, options) {
      var name = options.name;
      var opt;
      switch (name) {
        case "freeze":
          opt = "Frozen rows and columns do not support the following features:\n* Details Template\n* Hierarchy Grid\n";
          break;
        case "virtualization":
          opt = "Virtualization does not support the following features.\n* Details Template.\n* Hierarchy Grid.\n";
          break;
        default:
          opt = "";
          break;
      }
      return WARNING + (": " + name.toUpperCase() + " LIMITATIONS\n") + opt;
    }
  },
  // eslint-disable-next-line camelcase
  check_datasource_columns: {
    type: "check_datasource_columns",
    logType: "warn",
    check: function(args, parent) {
      return { success: !(parent.columns.length || parent.dataSource instanceof DataManager || !isNullOrUndefined(parent.dataSource) && parent.dataSource.length) };
    },
    generateMessage: function() {
      return WARNING + ": GRID CONFIG MISSING\ndataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.\n" + ("Refer to " + BASE_DOC_URL + "/columns.html for documentation on configuring the grid data and columns.");
    }
  },
  // eslint-disable-next-line camelcase
  virtual_height: {
    type: "virtual_height",
    logType: "error",
    check: function(args, parent) {
      return { success: isNullOrUndefined(parent.height) || parent.height === "auto" };
    },
    generateMessage: function() {
      return ERROR + ": GRID HEIGHT MISSING \nheight property is required to use virtualization.\n" + ("Refer to " + BASE_DOC_URL + "/virtual.html for documentation on configuring the virtual grid.");
    }
  },
  // eslint-disable-next-line camelcase
  grid_remote_edit: {
    type: "grid_remote_edit",
    logType: "error",
    check: function(args) {
      return { success: Array.isArray(args) || Array.isArray(args.result) };
    },
    generateMessage: function() {
      return ERROR + ": RETRUN VALUE MISSING  \nRemote service returns invalid data. \n" + ("Refer to " + BASE_DOC_URL + "/edit.html for documentation on configuring editing with remote data.");
    }
  },
  // eslint-disable-next-line camelcase
  grid_sort_comparer: {
    type: "grid_sort_comparer",
    logType: "warn",
    check: function(args, parent) {
      return { success: parent.getDataModule().isRemote() };
    },
    generateMessage: function() {
      return WARNING + ": SORT COMPARER NOT WORKING  \nSort comparer will not work with remote data." + ("Refer to " + BASE_DOC_URL + "/sorting/#custom-sort-comparer for documentation on using the sort comparer.");
    }
  },
  // eslint-disable-next-line camelcase
  resize_min_max: {
    type: "resize_min_max",
    logType: "info",
    check: function(args) {
      return { success: args.column.minWidth && args.column.minWidth >= args.width || args.column.maxWidth && args.column.maxWidth <= args.width };
    },
    generateMessage: function() {
      return INFO + ": RESIZING COLUMN REACHED MIN OR MAX  \nThe column resizing width is at its min or max.";
    }
  },
  // eslint-disable-next-line camelcase
  action_disabled_column: {
    type: "action_disabled_column",
    logType: "info",
    check: function(args) {
      var success = true;
      var fn;
      switch (args.moduleName) {
        case "reorder":
          if (isNullOrUndefined(args.destColumn)) {
            fn = "reordering action is disabled for the " + args.column.headerText + " column";
          } else {
            fn = "reordering action is disabled for the " + (args.column.allowReordering ? args.destColumn.headerText : args.column.headerText) + " column";
          }
          break;
        case "group":
          fn = "grouping action is disabled for the " + args.columnName + " column.";
          break;
        case "filter":
          fn = "filtering action is disabled for the " + args.columnName + " column.";
          break;
        case "sort":
          fn = "sorting action is disabled for the " + args.columnName + " column.";
          break;
      }
      return { success, options: { fn } };
    },
    generateMessage: function(args, parent, options) {
      return INFO + (": ACTION DISABLED \n " + options.fn);
    }
  },
  // eslint-disable-next-line camelcase
  exporting_begin: {
    type: "exporting_begin",
    logType: "info",
    check: function(args) {
      return { success: true, options: { args } };
    },
    generateMessage: function(args, parent, options) {
      return INFO + (": EXPORTING INPROGRESS \n Grid " + options.args + "ing is in progress");
    }
  },
  // eslint-disable-next-line camelcase
  exporting_complete: {
    type: "exporting_complete",
    logType: "info",
    check: function(args) {
      return { success: true, options: { args } };
    },
    generateMessage: function(args, parent, options) {
      return INFO + (": EXPORTING COMPLETED \n Grid " + options.args + "ing is complete");
    }
  },
  // eslint-disable-next-line camelcase
  foreign_key_failure: {
    type: "foreign_key_failure",
    logType: "error",
    check: function() {
      return { success: true };
    },
    generateMessage: function() {
      return ERROR + ": FOREIGNKEY CONFIG \n  Grid foreign key column needs a valid data source/service." + ("Refer to " + BASE_DOC_URL + "/columns/#foreign-key-column for documentation on configuring foreign key columns.");
    }
  },
  // eslint-disable-next-line camelcase
  initial_action: {
    type: "initial_action",
    logType: "error",
    check: function(args) {
      var success = true;
      var fn;
      switch (args.moduleName) {
        case "group":
          fn = "The " + args.columnName + " column is not available in the grid's column model.Please provide a valid field name to group the column";
          break;
        case "filter":
          fn = "The " + args.columnName + " column is not available in the grid's column model.Please provide a valid field name to filter the column.";
          break;
        case "sort":
          fn = "The " + args.columnName + " column is not available in the grid's column model.Please provide a valid field name to sort the column.";
          break;
      }
      return { success, options: { fn } };
    },
    generateMessage: function(args, parent, options) {
      return ERROR + (": INITIAL ACTION FAILURE \n " + options.fn);
    }
  },
  // eslint-disable-next-line camelcase
  frozen_rows_columns: {
    type: "frozen_rows_columns",
    logType: "error",
    check: function(args, parent) {
      return { success: parent.getColumns().length <= parent.frozenColumns || parent.currentViewData.length && parent.frozenRows >= parent.currentViewData.length };
    },
    generateMessage: function(args, parent) {
      return ERROR + (": OUT OF RANGE ERROR-\n " + (parent.getColumns().length <= parent.frozenColumns ? "FROZEN COLUMNS," : "")) + ((parent.frozenRows >= parent.currentViewData.length ? "FROZEN ROWS" : "") + " invalid");
    }
  },
  // eslint-disable-next-line camelcase
  column_type_missing: {
    type: "column_type_missing",
    logType: "error",
    check: function(args) {
      return { success: isNullOrUndefined(args.column.type), options: args.column.headerText };
    },
    generateMessage: function(args, parent, options) {
      return ERROR + (": COLUMN TYPE MISSING-\n  " + options + " column type was invalid or not defined.") + ("Please go through below help link: " + DOC_URL + "/grid/columns/#column-type");
    }
  },
  // eslint-disable-next-line camelcase
  datasource_syntax_mismatch: {
    type: "datasource_syntax_mismatch",
    logType: "warn",
    check: function(args) {
      return { success: args.dataState.dataSource && !(args.dataState.dataSource instanceof DataManager || "result" in args.dataState.dataSource || args.dataState.dataSource instanceof Array) && !isNullOrUndefined(args.dataState.dataStateChange) };
    },
    generateMessage: function() {
      return WARNING + ": DATASOURCE SYNTAX WARNING\nDataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used";
    }
  }
};
var formatErrorHandler = function(args) {
  var error = args.error;
  if (error.indexOf && error.indexOf("Format options") !== 0) {
    return "";
  }
  return "INVALID FORMAT\nFor more information, refer to the following documentation links:\n" + ("Number format: " + DOC_URL + "/common/internationalization#supported-format-string\n") + ("Date format: " + DOC_URL + "/common/internationalization#manipulating-datetime\n") + ("Message: " + error);
};
var ajaxErrorHandler = function(args) {
  var error = DataUtil.getObject("error.error", args);
  if (isNullOrUndefined(error)) {
    return "";
  }
  var jsonResult = "";
  try {
    jsonResult = JSON.parse(error.responseText);
  } catch (_a) {
    jsonResult = "";
  }
  return "XMLHTTPREQUEST FAILED\n" + ("Url: " + error.responseURL + "\n") + ("Status: " + error.status + " - " + error.statusText + "\n") + (jsonResult !== "" ? "Message: " + jsonResult : "");
};
var __extends$5 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$4 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var SortDescriptor = (
  /** @class */
  function(_super) {
    __extends$5(SortDescriptor2, _super);
    function SortDescriptor2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property()
    ], SortDescriptor2.prototype, "field", void 0);
    __decorate$4([
      Property()
    ], SortDescriptor2.prototype, "direction", void 0);
    __decorate$4([
      Property(false)
    ], SortDescriptor2.prototype, "isFromGroup", void 0);
    return SortDescriptor2;
  }(ChildProperty)
);
var SortSettings = (
  /** @class */
  function(_super) {
    __extends$5(SortSettings2, _super);
    function SortSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Collection([], SortDescriptor)
    ], SortSettings2.prototype, "columns", void 0);
    __decorate$4([
      Property(true)
    ], SortSettings2.prototype, "allowUnsort", void 0);
    return SortSettings2;
  }(ChildProperty)
);
var Predicate = (
  /** @class */
  function(_super) {
    __extends$5(Predicate2, _super);
    function Predicate2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property()
    ], Predicate2.prototype, "field", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "operator", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "value", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "matchCase", void 0);
    __decorate$4([
      Property(false)
    ], Predicate2.prototype, "ignoreAccent", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "predicate", void 0);
    __decorate$4([
      Property({})
    ], Predicate2.prototype, "actualFilterValue", void 0);
    __decorate$4([
      Property({})
    ], Predicate2.prototype, "actualOperator", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "type", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "ejpredicate", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "uid", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "isForeignKey", void 0);
    __decorate$4([
      Property()
    ], Predicate2.prototype, "condition", void 0);
    return Predicate2;
  }(ChildProperty)
);
var InfiniteScrollSettings = (
  /** @class */
  function(_super) {
    __extends$5(InfiniteScrollSettings2, _super);
    function InfiniteScrollSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property(false)
    ], InfiniteScrollSettings2.prototype, "enableCache", void 0);
    __decorate$4([
      Property(3)
    ], InfiniteScrollSettings2.prototype, "maxBlocks", void 0);
    __decorate$4([
      Property(3)
    ], InfiniteScrollSettings2.prototype, "initialBlocks", void 0);
    return InfiniteScrollSettings2;
  }(ChildProperty)
);
var FilterSettings = (
  /** @class */
  function(_super) {
    __extends$5(FilterSettings2, _super);
    function FilterSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Collection([], Predicate)
    ], FilterSettings2.prototype, "columns", void 0);
    __decorate$4([
      Property("FilterBar")
    ], FilterSettings2.prototype, "type", void 0);
    __decorate$4([
      Property("OnEnter")
    ], FilterSettings2.prototype, "mode", void 0);
    __decorate$4([
      Property(true)
    ], FilterSettings2.prototype, "showFilterBarStatus", void 0);
    __decorate$4([
      Property(1500)
    ], FilterSettings2.prototype, "immediateModeDelay", void 0);
    __decorate$4([
      Property()
    ], FilterSettings2.prototype, "operators", void 0);
    __decorate$4([
      Property(false)
    ], FilterSettings2.prototype, "ignoreAccent", void 0);
    __decorate$4([
      Property(false)
    ], FilterSettings2.prototype, "enableInfiniteScrolling", void 0);
    __decorate$4([
      Property(50)
    ], FilterSettings2.prototype, "itemsCount", void 0);
    __decorate$4([
      Property("Shimmer")
    ], FilterSettings2.prototype, "loadingIndicator", void 0);
    __decorate$4([
      Property(false)
    ], FilterSettings2.prototype, "enableCaseSensitivity", void 0);
    __decorate$4([
      Property(false)
    ], FilterSettings2.prototype, "showFilterBarOperator", void 0);
    return FilterSettings2;
  }(ChildProperty)
);
var SelectionSettings = (
  /** @class */
  function(_super) {
    __extends$5(SelectionSettings2, _super);
    function SelectionSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property("Row")
    ], SelectionSettings2.prototype, "mode", void 0);
    __decorate$4([
      Property("Flow")
    ], SelectionSettings2.prototype, "cellSelectionMode", void 0);
    __decorate$4([
      Property("Single")
    ], SelectionSettings2.prototype, "type", void 0);
    __decorate$4([
      Property(false)
    ], SelectionSettings2.prototype, "checkboxOnly", void 0);
    __decorate$4([
      Property(false)
    ], SelectionSettings2.prototype, "persistSelection", void 0);
    __decorate$4([
      Property("Default")
    ], SelectionSettings2.prototype, "checkboxMode", void 0);
    __decorate$4([
      Property(false)
    ], SelectionSettings2.prototype, "enableSimpleMultiRowSelection", void 0);
    __decorate$4([
      Property(true)
    ], SelectionSettings2.prototype, "enableToggle", void 0);
    __decorate$4([
      Property(false)
    ], SelectionSettings2.prototype, "allowColumnSelection", void 0);
    return SelectionSettings2;
  }(ChildProperty)
);
var SearchSettings = (
  /** @class */
  function(_super) {
    __extends$5(SearchSettings2, _super);
    function SearchSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property([])
    ], SearchSettings2.prototype, "fields", void 0);
    __decorate$4([
      Property("")
    ], SearchSettings2.prototype, "key", void 0);
    __decorate$4([
      Property("contains")
    ], SearchSettings2.prototype, "operator", void 0);
    __decorate$4([
      Property(true)
    ], SearchSettings2.prototype, "ignoreCase", void 0);
    __decorate$4([
      Property(false)
    ], SearchSettings2.prototype, "ignoreAccent", void 0);
    return SearchSettings2;
  }(ChildProperty)
);
var RowDropSettings = (
  /** @class */
  function(_super) {
    __extends$5(RowDropSettings2, _super);
    function RowDropSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property()
    ], RowDropSettings2.prototype, "targetID", void 0);
    return RowDropSettings2;
  }(ChildProperty)
);
var TextWrapSettings = (
  /** @class */
  function(_super) {
    __extends$5(TextWrapSettings2, _super);
    function TextWrapSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property("Both")
    ], TextWrapSettings2.prototype, "wrapMode", void 0);
    return TextWrapSettings2;
  }(ChildProperty)
);
var ResizeSettings = (
  /** @class */
  function(_super) {
    __extends$5(ResizeSettings2, _super);
    function ResizeSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property("Normal")
    ], ResizeSettings2.prototype, "mode", void 0);
    return ResizeSettings2;
  }(ChildProperty)
);
var GroupSettings = (
  /** @class */
  function(_super) {
    __extends$5(GroupSettings2, _super);
    function GroupSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property(true)
    ], GroupSettings2.prototype, "showDropArea", void 0);
    __decorate$4([
      Property(false)
    ], GroupSettings2.prototype, "allowReordering", void 0);
    __decorate$4([
      Property(false)
    ], GroupSettings2.prototype, "showToggleButton", void 0);
    __decorate$4([
      Property(false)
    ], GroupSettings2.prototype, "showGroupedColumn", void 0);
    __decorate$4([
      Property(true)
    ], GroupSettings2.prototype, "showUngroupButton", void 0);
    __decorate$4([
      Property(false)
    ], GroupSettings2.prototype, "disablePageWiseAggregates", void 0);
    __decorate$4([
      Property([])
    ], GroupSettings2.prototype, "columns", void 0);
    __decorate$4([
      Property()
    ], GroupSettings2.prototype, "captionTemplate", void 0);
    __decorate$4([
      Property(false)
    ], GroupSettings2.prototype, "enableLazyLoading", void 0);
    return GroupSettings2;
  }(ChildProperty)
);
var EditSettings = (
  /** @class */
  function(_super) {
    __extends$5(EditSettings2, _super);
    function EditSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property(false)
    ], EditSettings2.prototype, "allowAdding", void 0);
    __decorate$4([
      Property(false)
    ], EditSettings2.prototype, "allowEditing", void 0);
    __decorate$4([
      Property(false)
    ], EditSettings2.prototype, "allowDeleting", void 0);
    __decorate$4([
      Property("Normal")
    ], EditSettings2.prototype, "mode", void 0);
    __decorate$4([
      Property(true)
    ], EditSettings2.prototype, "allowEditOnDblClick", void 0);
    __decorate$4([
      Property(true)
    ], EditSettings2.prototype, "showConfirmDialog", void 0);
    __decorate$4([
      Property(false)
    ], EditSettings2.prototype, "showDeleteConfirmDialog", void 0);
    __decorate$4([
      Property()
    ], EditSettings2.prototype, "template", void 0);
    __decorate$4([
      Property()
    ], EditSettings2.prototype, "headerTemplate", void 0);
    __decorate$4([
      Property()
    ], EditSettings2.prototype, "footerTemplate", void 0);
    __decorate$4([
      Property("Top")
    ], EditSettings2.prototype, "newRowPosition", void 0);
    __decorate$4([
      Property({})
    ], EditSettings2.prototype, "dialog", void 0);
    __decorate$4([
      Property(false)
    ], EditSettings2.prototype, "allowNextRowEdit", void 0);
    __decorate$4([
      Property(false)
    ], EditSettings2.prototype, "showAddNewRow", void 0);
    return EditSettings2;
  }(ChildProperty)
);
var LoadingIndicator = (
  /** @class */
  function(_super) {
    __extends$5(LoadingIndicator2, _super);
    function LoadingIndicator2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property("Spinner")
    ], LoadingIndicator2.prototype, "indicatorType", void 0);
    return LoadingIndicator2;
  }(ChildProperty)
);
var Grid = (
  /** @class */
  function(_super) {
    __extends$5(Grid2, _super);
    function Grid2(options, element2) {
      var _this_1 = _super.call(this, options, element2) || this;
      _this_1.isPreventScrollEvent = false;
      _this_1.inViewIndexes = [];
      _this_1.keyA = false;
      _this_1.frozenRightCount = 0;
      _this_1.freezeColumnRefresh = true;
      _this_1.rightcount = 0;
      _this_1.frozenLeftCount = 0;
      _this_1.leftcount = 0;
      _this_1.tablesCount = 1;
      _this_1.movableCount = 0;
      _this_1.movablecount = 0;
      _this_1.fixedcount = 0;
      _this_1.fixedCount = 0;
      _this_1.visibleFrozenLeft = 0;
      _this_1.visibleFrozenFixed = 0;
      _this_1.isPreparedFrozenColumns = false;
      _this_1.visibleFrozenRight = 0;
      _this_1.visibleMovable = 0;
      _this_1.frozenLeftColumns = [];
      _this_1.frozenRightColumns = [];
      _this_1.movableColumns = [];
      _this_1.fixedColumns = [];
      _this_1.stackedLeft = [];
      _this_1.stackedRight = [];
      _this_1.stackedFixed = [];
      _this_1.stackedMovable = [];
      _this_1.stackedarrayLeft = [];
      _this_1.stackedarrayRight = [];
      _this_1.stackedarrayFixed = [];
      _this_1.stackedarrayMovable = [];
      _this_1.media = {};
      _this_1.autoFitColumnsResize = false;
      _this_1.tableIndex = 0;
      _this_1.componentRefresh = Component.prototype.refresh;
      _this_1.isChangeDataSourceCall = false;
      _this_1.mergedColumns = false;
      _this_1.isVirtualAdaptive = false;
      _this_1.requireTemplateRef = true;
      _this_1.vRows = [];
      _this_1.vcRows = [];
      _this_1.vGroupOffsets = {};
      _this_1.rowUid = 0;
      _this_1.translateX = 0;
      _this_1.isManualRefresh = false;
      _this_1.isAutoFitColumns = false;
      _this_1.enableDeepCompare = false;
      _this_1.totalDataRecordsCount = 0;
      _this_1.disableSelectedRecords = [];
      _this_1.partialSelectedRecords = [];
      _this_1.isSpan = false;
      _this_1.islazyloadRequest = false;
      _this_1.isAddNewRow = false;
      _this_1.addNewRowFocus = true;
      _this_1.selectVirtualRowOnAdd = false;
      _this_1.lockcolPositionCount = 0;
      _this_1.prevPageMoving = false;
      _this_1.pageTemplateChange = false;
      _this_1.isAutoGen = false;
      _this_1.isAutoGenerateColumns = false;
      _this_1.pageRequireRefresh = true;
      _this_1.mediaBindInstance = {};
      _this_1.commandDelIndex = void 0;
      _this_1.preventAutoFit = false;
      _this_1.asyncTimeOut = 50;
      _this_1.isExportGrid = false;
      _this_1.isWidgetsDestroyed = false;
      _this_1.enableLogger = false;
      _this_1.needsID = true;
      Grid_1.Inject(Selection);
      setValue("mergePersistData", _this_1.mergePersistGridData, _this_1);
      return _this_1;
    }
    Grid_1 = Grid2;
    Grid2.prototype.getPersistData = function() {
      var keyEntity = [
        "pageSettings",
        "sortSettings",
        "filterSettings",
        "groupSettings",
        "columns",
        "searchSettings",
        "selectedRowIndex",
        "scrollPosition"
      ];
      var ignoreOnPersist = {
        pageSettings: ["template", "pageSizes", "enableQueryString", "totalRecordsCount", "pageCount"],
        filterSettings: ["type", "mode", "showFilterBarStatus", "immediateModeDelay", "ignoreAccent"],
        groupSettings: [
          "showDropArea",
          "showToggleButton",
          "showGroupedColumn",
          "showUngroupButton",
          "disablePageWiseAggregates",
          "hideCaptionCount"
        ],
        searchSettings: ["fields", "operator", "ignoreCase"],
        sortSettings: [],
        columns: [],
        selectedRowIndex: [],
        scrollPosition: []
      };
      for (var i = 0; i < keyEntity.length; i++) {
        var currentObject = this[keyEntity[parseInt(i.toString(), 10)]];
        for (var _i = 0, _a = ignoreOnPersist[keyEntity[parseInt(i.toString(), 10)]]; _i < _a.length; _i++) {
          var val = _a[_i];
          delete currentObject["" + val];
        }
      }
      var temp = this.pageSettings.template;
      var settings = Object.assign({ template: void 0 }, this.pageSettings);
      if (this.enableVirtualization && this.enablePersistence && this.contentModule && this.contentModule.getPageFromTop && !isNullOrUndefined(this.scrollPosition) && !isNullOrUndefined(this.scrollPosition.top)) {
        settings["properties"]["currentPage"] = this.contentModule.getPageFromTop(this.scrollPosition.top, { block: 1 });
      }
      this.setProperties({ pageSettings: settings }, true);
      var captionTemplateRef = this.groupSettings.captionTemplate;
      var isAngularCaptionTemplate = captionTemplateRef && this.isAngular;
      if (isAngularCaptionTemplate) {
        delete this.groupSettings["properties"]["captionTemplate"];
      }
      this.pageTemplateChange = !isNullOrUndefined(this.pagerTemplate);
      var persistData = this.addOnPersist(keyEntity);
      settings.template = temp;
      this.setProperties({ pageSettings: settings }, true);
      if (isAngularCaptionTemplate) {
        this.groupSettings.captionTemplate = captionTemplateRef;
      }
      return persistData;
    };
    Grid2.prototype.requiredModules = function() {
      this.setFrozenCount();
      this.enableInfiniteAggrgate();
      var modules = [];
      if (this.isDestroyed) {
        return modules;
      }
      if (this.allowFiltering) {
        modules.push({
          member: "filter",
          args: [this, this.filterSettings, this.serviceLocator],
          name: "Filter"
        });
      }
      if (this.allowExcelExport) {
        modules.push({
          member: "ExcelExport",
          args: [this, this.serviceLocator],
          name: "ExcelExport"
        });
      }
      if (this.allowPdfExport) {
        modules.push({
          member: "PdfExport",
          args: [this],
          name: "PdfExport"
        });
      }
      if (this.allowSorting) {
        modules.push({
          member: "sort",
          args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator],
          name: "Sort"
        });
      }
      if (this.allowPaging) {
        modules.push({
          member: "pager",
          args: [this, this.pageSettings],
          name: "Page"
        });
      }
      if (this.allowSelection) {
        modules.push({
          member: "selection",
          args: [this, this.selectionSettings, this.serviceLocator],
          name: "Selection"
        });
      }
      if (this.resizeCheck()) {
        modules.push({
          member: "resize",
          args: [this],
          name: "Resize"
        });
      }
      if (this.allowReordering) {
        modules.push({
          member: "reorder",
          args: [this],
          name: "Reorder"
        });
      }
      if (this.allowRowDragAndDrop) {
        modules.push({
          member: "rowDragAndDrop",
          args: [this],
          name: "RowDD"
        });
      }
      if (this.allowGrouping) {
        modules.push({
          member: "group",
          args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator],
          name: "Group"
        });
      }
      if (this.aggregates.length) {
        modules.push({ member: "aggregate", args: [this, this.serviceLocator], name: "Aggregate" });
      }
      if (this.isDetail()) {
        modules.push({
          member: "detailRow",
          args: [this, this.serviceLocator],
          name: "DetailRow"
        });
      }
      if (this.toolbar || this.toolbarTemplate) {
        modules.push({
          member: "toolbar",
          args: [this, this.serviceLocator],
          name: "Toolbar"
        });
      }
      if (this.enableVirtualization || this.enableColumnVirtualization) {
        modules.push({
          member: "virtualscroll",
          args: [this, this.serviceLocator],
          name: "VirtualScroll"
        });
      }
      if (this.getFrozenColumns() || this.frozenRows || this.frozenRightCount || this.frozenLeftCount) {
        modules.push({ member: "freeze", args: [this, this.serviceLocator], name: "Freeze" });
      }
      if (!isNullOrUndefined(this.columns) && this.isCommandColumn(this.columns)) {
        modules.push({
          member: "commandColumn",
          args: [this, this.serviceLocator],
          name: "CommandColumn"
        });
      }
      if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {
        modules.push({
          member: "edit",
          args: [this, this.serviceLocator],
          name: "Edit"
        });
      }
      this.extendRequiredModules(modules);
      return modules;
    };
    Grid2.prototype.extendRequiredModules = function(modules) {
      if (this.enableInfiniteScrolling) {
        modules.push({
          member: "infiniteScroll",
          args: [this, this.serviceLocator],
          name: "InfiniteScroll"
        });
      }
      if (this.groupSettings.enableLazyLoading) {
        modules.push({
          member: "lazyLoadGroup",
          args: [this, this.serviceLocator],
          name: "LazyLoadGroup"
        });
      }
      if (this.contextMenuItems) {
        modules.push({
          member: "contextMenu",
          args: [this, this.serviceLocator],
          name: "ContextMenu"
        });
      }
      if (this.showColumnMenu) {
        modules.push({
          member: "columnMenu",
          args: [this, this.serviceLocator],
          name: "ColumnMenu"
        });
      }
      if (this.showColumnChooser) {
        modules.push({
          member: "columnChooser",
          args: [this, this.serviceLocator],
          name: "ColumnChooser"
        });
      }
      if (!isNullOrUndefined(this.columns) && this.isForeignKeyEnabled(this.columns)) {
        modules.push({ member: "foreignKey", args: [this, this.serviceLocator], name: "ForeignKey" });
      }
      if (this.enableLogger) {
        modules.push({ member: "logger", args: [this], name: "Logger" });
      }
    };
    Grid2.prototype.resizeCheck = function() {
      var autoFitColumns = this.getColumns().filter(function(c) {
        return c.autoFit === true;
      }).length ? true : false;
      if (!isNullOrUndefined(this.columnModel) && this.columnModel.length && !(this.columnModel[0] instanceof Column)) {
        this.columnModel = [];
      }
      var columnMenu = this.showColumnMenu && (!this.columnMenuItems || this.columnMenuItems.filter(function(c) {
        return c === "AutoFit" || c === "AutoFitAll";
      }).length) ? true : false;
      var contextMenu = this.contextMenuItems && this.contextMenuItems.filter(function(c) {
        return c === "AutoFit" || c === "AutoFitAll";
      }).length ? true : false;
      return this.allowResizing || this.autoFitColumnsResize || autoFitColumns || columnMenu || contextMenu;
    };
    Grid2.prototype.preRender = function() {
      this.serviceLocator = new ServiceLocator();
      this.initProperties();
      this.initializeServices();
    };
    Grid2.prototype.initProperties = function() {
      this.isInitial = true;
      this.sortedColumns = [];
      this.inViewIndexes = [];
      this.mediaCol = [];
      this.isInitialLoad = false;
      this.allowServerDataBinding = false;
      this.ignoreCollectionWatch = true;
      this.mergeCells = {};
      this.isEdit = false;
      this.checkAllRows = "None";
      this.isCheckBoxSelection = false;
      this.isPersistSelection = false;
      this.componentRefresh = Component.prototype.refresh;
      this.freezeColumnRefresh = true;
      this.filterOperators = {
        contains: "contains",
        endsWith: "endswith",
        equal: "equal",
        greaterThan: "greaterthan",
        greaterThanOrEqual: "greaterthanorequal",
        lessThan: "lessthan",
        lessThanOrEqual: "lessthanorequal",
        notEqual: "notequal",
        startsWith: "startswith",
        wildCard: "wildcard",
        isNull: "isnull",
        notNull: "notnull",
        like: "like"
      };
      this.defaultLocale = {
        EmptyRecord: "No records to display",
        True: "true",
        False: "false",
        InvalidFilterMessage: "Invalid Filter Data",
        GroupDropArea: "Drag a column header here to group its column",
        UnGroup: "Click here to ungroup",
        UnGroupButton: "Click here to ungroup",
        GroupDisable: "Grouping is disabled for this column",
        FilterbarTitle: "'s filter bar cell",
        EmptyDataSourceError: "DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",
        // Toolbar Items
        Add: "Add",
        Edit: "Edit",
        Cancel: "Cancel",
        Update: "Update",
        Delete: "Delete",
        Print: "Print",
        Pdfexport: "PDF Export",
        Excelexport: "Excel Export",
        Wordexport: "Word Export",
        Csvexport: "CSV Export",
        Search: "Search",
        Columnchooser: "Columns",
        Save: "Save",
        Item: "item",
        Items: "items",
        EditOperationAlert: "No records selected for edit operation",
        DeleteOperationAlert: "No records selected for delete operation",
        SaveButton: "Save",
        OKButton: "OK",
        CancelButton: "Cancel",
        EditFormTitle: "Details of ",
        AddFormTitle: "Add New Record",
        BatchSaveConfirm: "Are you sure you want to save changes?",
        BatchSaveLostChanges: "Unsaved changes will be lost. Are you sure you want to continue?",
        ConfirmDelete: "Are you sure you want to Delete Record?",
        CancelEdit: "Are you sure you want to Cancel the changes?",
        ChooseColumns: "Choose Column",
        ColumnMenu: "Column Menu",
        SearchColumns: "search columns",
        Matchs: "No matches found",
        FilterButton: "Filter",
        FilterTitle: "Filter",
        FilterIcon: "Filter",
        ClearButton: "Clear",
        StartsWith: "Starts With",
        NotStartsWith: "Does Not Start With",
        Like: "Like",
        EndsWith: "Ends With",
        NotEndsWith: "Does Not End With",
        Contains: "Contains",
        NotContains: "Does Not Contain",
        IsNull: "Null",
        NotNull: "Not Null",
        IsEmpty: "Empty",
        IsNotEmpty: "Not Empty",
        Equal: "Equal",
        NotEqual: "Not Equal",
        LessThan: "Less Than",
        LessThanOrEqual: "Less Than Or Equal",
        GreaterThan: "Greater Than",
        GreaterThanOrEqual: "Greater Than Or Equal",
        In: "In",
        NotIn: "Not In",
        ChooseDate: "Choose a Date",
        EnterValue: "Enter the value",
        Copy: "Copy",
        Group: "Group by this column",
        Ungroup: "Ungroup by this column",
        GroupButton: "Group button",
        UnGroupAria: "ungroup button",
        GroupSeperator: "Separator for the grouped columns",
        UnGroupIcon: "ungroup the grouped column ",
        GroupedSortIcon: "sort the grouped column ",
        GroupedDrag: "Drag the grouped column",
        GroupCaption: " is groupcaption cell",
        CheckBoxLabel: "checkbox",
        SelectAllCheckbox: "Select all checkbox",
        SelectRow: "Select row",
        autoFitAll: "Autofit all columns",
        autoFit: "Autofit this column",
        AutoFitAll: "Autofit all columns",
        AutoFit: "Autofit this column",
        Export: "Export",
        FirstPage: "First Page",
        LastPage: "Last Page",
        PreviousPage: "Previous Page",
        NextPage: "Next Page",
        SortAscending: "Sort Ascending",
        SortDescending: "Sort Descending",
        EditRecord: "Edit Record",
        DeleteRecord: "Delete Record",
        FilterMenu: "Filter",
        SelectAll: "Select All",
        AddCurrentSelection: "Add current selection to filter",
        Blanks: "Blanks",
        FilterTrue: "True",
        FilterFalse: "False",
        NoResult: "No matches found",
        ClearFilter: "Clear Filter",
        Clear: "Clear",
        NumberFilter: "Number Filters",
        TextFilter: "Text Filters",
        DateFilter: "Date Filters",
        DateTimeFilter: "DateTime Filters",
        MatchCase: "Match Case",
        Between: "Between",
        CustomFilter: "Custom Filter",
        CustomFilterPlaceHolder: "Enter the value",
        CustomFilterDatePlaceHolder: "Choose a date",
        AND: "AND",
        OR: "OR",
        ShowRowsWhere: "Show rows where:",
        ToolbarMenuDialogARIA: "Toolbar menu dialog",
        FilterMenuDialogARIA: "Filter menu",
        ExcelFilterDialogARIA: "Excel filter",
        CheckBoxFilterDialogARIA: "Checkbox filter",
        DialogEditARIA: "Edit dialog",
        ColumnMenuDialogARIA: "Column menu dialog",
        CustomFilterDialogARIA: "Customer filter dialog",
        SortAtoZ: "Sort A to Z",
        SortZtoA: "Sort Z to A",
        SortByOldest: "Sort by Oldest",
        SortByNewest: "Sort by Newest",
        SortSmallestToLargest: "Sort Smallest to Largest",
        SortLargestToSmallest: "Sort Largest to Smallest",
        Sort: "Sort",
        SortIcon: "Sort",
        FilterDescription: "Press Alt Down to open filter Menu",
        SortDescription: "Press Enter to sort",
        ColumnMenuDescription: "Press Alt Down to open Column Menu",
        GroupDescription: "Press Ctrl space to group",
        ColumnHeader: " column header ",
        TemplateCell: " is template cell",
        CommandColumnAria: "is Command column column header ",
        DialogEdit: "Dialog edit",
        ClipBoard: "clipboard",
        AscendingText: "Ascending",
        DescendingText: "Descending",
        NoneText: "None",
        Expanded: "Expanded",
        Collapsed: "Collapsed"
      };
      this.keyConfigs = {
        downArrow: "downarrow",
        upArrow: "uparrow",
        rightArrow: "rightarrow",
        leftArrow: "leftarrow",
        shiftDown: "shift+downarrow",
        shiftUp: "shift+uparrow",
        shiftRight: "shift+rightarrow",
        shiftLeft: "shift+leftarrow",
        home: "home",
        end: "end",
        escape: "escape",
        ctrlHome: "ctrl+home",
        ctrlEnd: "ctrl+end",
        pageUp: "pageup",
        pageDown: "pagedown",
        ctrlAltPageUp: "ctrl+alt+pageup",
        ctrlAltPageDown: "ctrl+alt+pagedown",
        altPageUp: "alt+pageup",
        altPageDown: "alt+pagedown",
        altDownArrow: "alt+downarrow",
        altUpArrow: "alt+uparrow",
        ctrlDownArrow: "ctrl+downarrow",
        ctrlUpArrow: "ctrl+uparrow",
        ctrlPlusA: "ctrl+A",
        ctrlPlusP: "ctrl+P",
        insert: "insert",
        delete: "delete",
        f2: "f2",
        enter: "enter",
        ctrlEnter: "ctrl+enter",
        shiftEnter: "shift+enter",
        tab: "tab",
        shiftTab: "shift+tab",
        space: "space",
        ctrlPlusC: "ctrl+C",
        ctrlShiftPlusH: "ctrl+shift+H",
        ctrlSpace: "ctrl+space",
        ctrlLeftArrow: "ctrl+leftarrow",
        ctrlRightArrow: "ctrl+rightarrow"
      };
    };
    Grid2.prototype.render = function() {
      this.log(["module_missing", "promise_enabled", "locale_missing", "check_datasource_columns"]);
      this.ariaService.setOptions(this.element, { role: "grid" });
      createSpinner({ target: this.element, cssClass: this.cssClass ? this.cssClass : null }, this.createElement);
      this.renderModule = new Render(this, this.serviceLocator);
      this.searchModule = new Search(this);
      this.scrollModule = new Scroll(this);
      this.notify(initialLoad, {});
      if (this.pageSettings.enableQueryString) {
        var pageValue = new URL(window.location.href).searchParams.get("page");
        if (!isNullOrUndefined(pageValue) && window.location.href.indexOf("?page=") > 0) {
          var currentPageValue = parseInt(pageValue, 10);
          this.setProperties({ pageSettings: { currentPage: currentPageValue } }, true);
          this.pageSettings.currentPage = currentPageValue;
        }
      }
      if ((this.getDataModule().dataManager.dataSource.offline === true || this.getDataModule().dataManager.dataSource.url === void 0) && !(!isNullOrUndefined(this.dataSource) && this.dataSource.result)) {
        this.isVirtualAdaptive = true;
      }
      if (this.aggregateModule && this.aggregates.length) {
        for (var i = 0; i < this.aggregates.length; i++) {
          for (var j = 0; j < this.aggregates[parseInt(i.toString(), 10)].columns.length; j++) {
            var column = this.aggregates[parseInt(i.toString(), 10)].columns[parseInt(j.toString(), 10)];
            if (column["types"]) {
              column.type = column["types"];
            }
          }
        }
      }
      if (this.isReact) {
        var args = { requireTemplateRef: this.requireTemplateRef };
        this.trigger(load, args);
        if (!args.requireTemplateRef) {
          this.requireTemplateRef = args.requireTemplateRef;
        }
      } else {
        this.trigger(load);
      }
      prepareColumns(this.columns, this.enableColumnVirtualization, this);
      if (this.enableColumnVirtualization && this.isChangeDataSourceCall && this.columnModel) {
        this.columnModel = [];
        this.updateColumnModel(this.columns);
      }
      this.isPreparedFrozenColumns = true;
      if (this.enablePersistence) {
        this.notify(columnsPrepared, {});
      }
      this.getMediaColumns();
      setColumnIndex(this.columns);
      if (this.isFrozenGrid() && !this.mergedColumns) {
        this.setInitialFrozenColumnIndex(this.columns);
      }
      this.checkLockColumns(this.columns);
      this.getColumns();
      this.processModel();
      this.gridRender();
      this.wireEvents();
      this.addListener();
      this.updateDefaultCursor();
      this.updateStackedFilter();
      if (this.loadingIndicator.indicatorType === "Spinner") {
        this.showSpinner();
      }
      this.notify(initialEnd, {});
      if (this.loadingIndicator.indicatorType === "Shimmer") {
        this.refreshMaskRow();
      }
      if (this.refreshing) {
        this.trigger("created");
      }
    };
    Grid2.prototype.setInitialFrozenColumnIndex = function(columns) {
      for (var i = 0; i < columns.length; i++) {
        var column = columns[parseInt(i.toString(), 10)];
        column["" + initialFrozenColumnIndex] = column.index;
        if (column.columns) {
          this.setInitialFrozenColumnIndex(column.columns);
        }
      }
    };
    Grid2.prototype.showSpinner = function() {
      if (!this.isExportGrid) {
        showSpinner(this.element);
      }
    };
    Grid2.prototype.hideSpinner = function() {
      if (!this.isExportGrid) {
        hideSpinner(this.element);
      }
    };
    Grid2.prototype.showMaskRow = function(axisDirection, dialogElement) {
      if (isNullOrUndefined(this.headerModule) || isNullOrUndefined(this.contentModule)) {
        return;
      }
      var gridHeader2 = this.getHeaderContent().firstChild;
      var gridContent2 = this.getContent().firstChild;
      var gridFooter2 = this.getFooterContent();
      if (dialogElement) {
        var dialogHolder = dialogElement.querySelector(".e-checkboxlist");
        var maskRowCount = Math.floor(dialogHolder.getBoundingClientRect().height / this.getRowHeight());
        var maskTemplate = '<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">' + this.getShimmerTemplate() + this.getShimmerTemplate() + "</div></div>";
        dialogHolder.innerHTML = "";
        for (var i = 0; i < maskRowCount; i++) {
          dialogHolder.innerHTML += maskTemplate;
          dialogHolder.querySelector(".e-ftrchk.e-mask-ftrchk").style.width = "100%";
          dialogHolder.querySelector(".e-checkbox-wrapper").style.width = "100%";
          var maskSpan = [].slice.call(dialogHolder.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));
          maskSpan[0].classList.add("e-mask-checkbox-filter-intent");
          maskSpan[1].classList.add("e-mask-checkbox-filter-span-intent");
        }
        return;
      }
      if (!this.enableRtl && !this.getHeaderContent().style.paddingRight || this.enableRtl && !this.getHeaderContent().style.paddingLeft) {
        gridContent2.style.overflowY = "hidden";
      }
      if (!this.isInitialLoad && !this.getColumns().length) {
        var contentHeight = gridContent2.getBoundingClientRect().height;
        var maskTableHeight = contentHeight === 0 ? this.allowPaging ? this.pageSettings.pageSize * this.getRowHeight() : window.innerHeight : contentHeight;
        var contentRowCount = Math.ceil(maskTableHeight / this.getRowHeight());
        if (this.rowRenderingMode !== "Vertical") {
          this.headerMaskTable = this.createEmptyMaskTable(gridHeader2, 1);
        }
        this.contentMaskTable = this.createEmptyMaskTable(gridContent2, contentRowCount);
        return;
      }
      this.maskRowContentScroll = (this.enableVirtualization || this.enableColumnVirtualization) && axisDirection ? true : false;
      if (!this.contentMaskTable) {
        var content2 = gridContent2;
        if (this.enableVirtualization || this.enableColumnVirtualization) {
          content2 = content2.querySelector(".e-virtualtable");
        }
        if (!isNullOrUndefined(content2.querySelector("tbody"))) {
          this.contentMaskTable = this.createMaskTable(content2, this.getContentMaskColumns(), axisDirection);
        }
      }
      if (!this.headerMaskTable && (this.isFrozenGrid() || this.enableColumnVirtualization && axisDirection === "X")) {
        var content2 = gridHeader2;
        if (this.enableColumnVirtualization && axisDirection === "X") {
          content2 = content2.querySelector(".e-virtualtable");
        }
        this.headerMaskTable = this.createMaskTable(content2, this.getContentMaskColumns(), axisDirection);
      }
      if (gridFooter2 && gridFooter2.querySelector(".e-summaryrow")) {
        var gridFooterContent = gridFooter2.firstChild;
        if (!this.footerContentMaskTable) {
          var footerContent = gridFooterContent;
          this.footerContentMaskTable = this.createMaskTable(footerContent);
        }
      }
      if (!(this.enableVirtualization && axisDirection)) {
        EventHandler.add(gridContent2, "scroll", this.translateMaskRow, this);
      }
    };
    Grid2.prototype.getContentMaskColumns = function() {
      return this.getColumns();
    };
    Grid2.prototype.createEmptyMaskTable = function(maskElement, rowCount) {
      var table2 = this.createElement("table", { className: "e-table e-masked-table" });
      var tbody2 = this.createElement("tbody", { className: "e-masked-tbody" });
      var row2 = this.createElement("tr", { className: "e-masked-row e-row" });
      row2.style.height = this.getRowHeight() + "px";
      var cell = this.createElement("td", { className: "e-masked-cell e-rowcell" });
      cell.innerHTML = this.getShimmerTemplate();
      row2.appendChild(cell);
      for (var i = 0; i < rowCount; i++) {
        tbody2.appendChild(row2.cloneNode(true));
      }
      table2.appendChild(tbody2);
      maskElement.appendChild(table2);
      return table2;
    };
    Grid2.prototype.createMaskTable = function(element2, columns, axisDirection) {
      var parentElement = element2;
      var header = closest(parentElement, ".e-gridheader") ? true : false;
      var content2 = closest(parentElement, ".e-gridcontent") ? true : false;
      var footer = closest(parentElement, ".e-gridfooter") ? true : false;
      var gridContent2 = this.getContent().firstChild;
      var gridContentScrollHeight = gridContent2.scrollHeight;
      var table2 = parentElement.querySelector("table");
      var maskTable = table2.cloneNode();
      maskTable.removeAttribute("role");
      maskTable.removeAttribute("id");
      updateCSSText(maskTable, "position: absolute; z-index: 5; width: " + table2.getBoundingClientRect().width + "px;");
      if (header && !(this.enableColumnVirtualization && axisDirection === "X")) {
        maskTable.style.transform = "translate(0px," + table2.querySelector("thead").getBoundingClientRect().height + "px)";
      }
      maskTable.setAttribute("class", "e-table e-masked-table");
      var maskColgroup = table2.querySelector("colgroup").cloneNode(true);
      maskColgroup.removeAttribute("id");
      maskColgroup.setAttribute("class", "e-masked-colgroup");
      maskTable.appendChild(maskColgroup);
      if (header && this.enableColumnVirtualization && axisDirection === "X") {
        var row2 = this.createMaskRow(maskColgroup, columns);
        if (this.isFrozenGrid()) {
          var frzTd = [].slice.call(row2.querySelectorAll(".e-rowcell"));
          for (var i = 0; i < frzTd.length; i++) {
            if (i < this.frozenLeftCount) {
              if (this.frozenLeftCount - 1 === i) {
                frzTd[parseInt(i.toString(), 10)].classList.add("e-freezeleftborder");
              }
              frzTd[parseInt(i.toString(), 10)].classList.add("e-leftfreeze");
              frzTd[parseInt(i.toString(), 10)].setAttribute("aria-colindex", (i + 1).toString());
              frzTd[parseInt(i.toString(), 10)].style.left = columns[parseInt(i.toString(), 10)].valueX - this.translateX + "px";
            } else if (frzTd.length - this.frozenRightCount <= i && columns[parseInt(i.toString(), 10)]) {
              if (frzTd.length - this.frozenRightCount === i) {
                frzTd[parseInt(i.toString(), 10)].classList.add("e-freezerightborder");
              }
              frzTd[parseInt(i.toString(), 10)].classList.add("e-rightfreeze");
              frzTd[parseInt(i.toString(), 10)].setAttribute("aria-colindex", (i + 1).toString());
              frzTd[parseInt(i.toString(), 10)].style.right = this.translateX + columns[parseInt(i.toString(), 10)].valueX + "px";
            }
          }
        }
        var thead = table2.querySelector("thead");
        var rows = [].slice.call(thead.querySelectorAll("tr"));
        var maskTHead = thead.cloneNode();
        maskTHead.removeAttribute("role");
        maskTHead.setAttribute("class", "e-masked-thead");
        var rowCount = rows.length;
        for (var i = 0; i < rowCount; i++) {
          maskTHead.appendChild(row2.cloneNode(true));
          maskTHead.childNodes[parseInt(i.toString(), 10)].style.height = rows[parseInt(i.toString(), 10)].getBoundingClientRect().height + "px";
        }
        maskTable.appendChild(maskTHead);
      }
      var maskTBody = table2.querySelector("tbody").cloneNode();
      maskTBody.removeAttribute("role");
      maskTBody.setAttribute("class", "e-masked-tbody");
      var tbody2 = table2.querySelector("tbody");
      if (content2 || header) {
        var rowCountElement = gridContent2;
        var rowCount = Math.ceil(rowCountElement.getBoundingClientRect().height / this.getRowHeight());
        if (this.allowPaging && this.pageSettings.pageSize !== this.currentViewData.length && this.pagerModule.pagerObj.totalPages !== this.pageSettings.currentPage) {
          var row2 = this.createMaskRow(maskColgroup, columns);
          var altRow = row2.cloneNode(true);
          altRow.classList.add("e-altrow");
          for (var i = 0; i < this.pageSettings.pageSize - this.currentViewData.length; i++) {
            maskTBody.appendChild(i % 2 === 1 ? altRow.cloneNode(true) : row2.cloneNode(true));
          }
        }
        if (tbody2.querySelector(".e-emptyrow") || !tbody2.childNodes.length || content2 && this.childGrid) {
          var row2 = this.createMaskRow(maskColgroup, columns);
          var altRow = row2.cloneNode(true);
          altRow.classList.add("e-altrow");
          for (var i = 0; i < rowCount; i++) {
            var altNumber = 1;
            maskTBody.appendChild((i + altNumber) % 2 === 0 ? altRow.cloneNode(true) : row2.cloneNode(true));
          }
        } else {
          var rowsQuery = 'tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"])';
          var rows = [].slice.call(tbody2.querySelectorAll(rowsQuery));
          var addEditRow = tbody2.querySelector(".e-addedrow, .e-editedrow");
          var addEditRowIndex = void 0;
          if (addEditRow) {
            addEditRowIndex = rows.indexOf(addEditRow);
            if (this.isFrozenGrid() && this.enableColumnVirtualization) {
              var frzTd = [].slice.call(rows[addEditRowIndex + 1].querySelectorAll(".e-rowcell"));
              for (var i = 0; i < frzTd.length; i++) {
                if (i < this.frozenLeftCount) {
                  frzTd[parseInt(i.toString(), 10)].classList.add("e-leftfreeze");
                  frzTd[parseInt(i.toString(), 10)].setAttribute("aria-colindex", (i + 1).toString());
                  frzTd[parseInt(i.toString(), 10)].style.left = columns[parseInt(i.toString(), 10)].valueX - this.translateX + "px";
                } else if (frzTd.length - this.frozenRightCount <= i && columns[parseInt(i.toString(), 10)]) {
                  frzTd[parseInt(i.toString(), 10)].classList.add("e-rightfreeze");
                  frzTd[parseInt(i.toString(), 10)].setAttribute("aria-colindex", (i + 1).toString());
                  frzTd[parseInt(i.toString(), 10)].style.right = this.translateX + columns[parseInt(i.toString(), 10)].valueX + "px";
                }
              }
            }
            if (addEditRow.classList.contains("e-addedrow")) {
              rows.splice(addEditRowIndex, 2);
            } else {
              rows.splice(addEditRowIndex, 1);
            }
          }
          rowCount = (this.enableVirtualization || this.enableColumnVirtualization) && axisDirection ? rows.length : rowCount <= rows.length ? rowCount : rows.length;
          for (var i = 0; i < rowCount; i++) {
            maskTBody.appendChild(this.applyMaskRow(rows[parseInt(i.toString(), 10)].cloneNode(true), rows[parseInt(i.toString(), 10)].getBoundingClientRect().height));
          }
          if (addEditRow && addEditRow.classList.contains("e-editedrow") && addEditRowIndex < rowCount) {
            var addEditMaskRow = maskTBody.childNodes[parseInt(addEditRowIndex.toString(), 10)];
            addEditMaskRow.style.height = this.getRowHeight() + "px";
            addEditMaskRow.classList.add("e-row");
            if (addEditRow.classList.contains("e-altrow")) {
              addEditMaskRow.classList.add("e-altrow");
            }
          }
        }
      }
      maskTable.appendChild(maskTBody);
      if (footer) {
        var tfoot = table2.querySelector("tfoot");
        var maskTFoot = tfoot.cloneNode();
        maskTFoot.setAttribute("class", "e-masked-tfoot");
        var rows = [].slice.call(tfoot.querySelectorAll("tr"));
        for (var i = 0; i < rows.length; i++) {
          maskTFoot.appendChild(this.applyMaskRow(rows[parseInt(i.toString(), 10)].cloneNode(true), rows[parseInt(i.toString(), 10)].getBoundingClientRect().height));
        }
        maskTable.appendChild(maskTFoot);
      }
      if (header && this.isFrozenGrid() && !this.enableColumnVirtualization) {
        this.getHeaderContent().querySelector("." + headerContent).style.position = "relative";
      }
      parentElement.insertBefore(maskTable, parentElement.firstChild);
      if (content2 && !(this.enableVirtualization && axisDirection)) {
        var minScrollTop = gridContentScrollHeight - maskTable.getBoundingClientRect().height;
        minScrollTop = minScrollTop < 0 ? 0 : minScrollTop;
        var scrollTop = gridContent2.scrollTop <= minScrollTop ? gridContent2.scrollTop : minScrollTop;
        if (this.enableVirtualization) {
          scrollTop -= getTransformValues(closest(parentElement, ".e-virtualtable")).height;
        }
        maskTable.style.transform = "translate(0px," + scrollTop + "px)";
      }
      return maskTable;
    };
    Grid2.prototype.applyMaskRow = function(row2, rowHeight2) {
      var maskRow = row2;
      maskRow.removeAttribute("role");
      maskRow.removeAttribute("aria-rowindex");
      maskRow.removeAttribute("data-uid");
      maskRow.classList.add("e-masked-row");
      maskRow.style.height = rowHeight2 + "px";
      var maskCells = [].slice.call(maskRow.childNodes);
      for (var i = 0; i < maskCells.length; i++) {
        var maskCell = maskCells[parseInt(i.toString(), 10)];
        var displayAsCheckBoxCell = maskCell.firstChild && maskCell.firstChild.classList && maskCell.firstChild.classList.contains("e-checkbox-wrapper");
        maskCell.removeAttribute("role");
        maskCell.removeAttribute("tabindex");
        maskCell.removeAttribute("aria-label");
        if (this.enableColumnVirtualization && maskCell.classList.contains("e-fixedfreeze")) {
          removeClass([maskCell], ["e-fixedfreeze", "e-freezeleftborder", "e-freezerightborder"]);
          addClass([maskCell], ["e-unfreeze"]);
        }
        maskCell.removeAttribute("aria-colindex");
        maskCell.removeAttribute("index");
        maskCell.removeAttribute("ej-mappingname");
        maskCell.removeAttribute("ej-mappingvalue");
        maskCell.removeAttribute("e-mappinguid");
        maskCell.removeAttribute("aria-expanded");
        maskCell.classList.add("e-masked-cell");
        maskCell.innerHTML = this.getShimmerTemplate();
        if (maskCell.classList.contains("e-recordplusexpand") || maskCell.classList.contains("e-recordpluscollapse")) {
          maskCell.firstChild.classList.add("e-mask-group-intent");
        } else if (maskCell.classList.contains("e-gridchkbox") || displayAsCheckBoxCell) {
          maskCell.firstChild.classList.add("e-mask-checkbox-intent");
        } else if (maskCell.classList.contains("e-rowdragdrop")) {
          maskCell.firstChild.classList.add("e-mask-drag-intent");
        } else if (maskCell.classList.contains("e-indentcell")) {
          maskCell.innerHTML = "";
        }
      }
      return maskRow;
    };
    Grid2.prototype.createMaskRow = function(refColgroup, refColumns) {
      var colgroup = refColgroup;
      var columns = refColumns;
      var row2 = this.createElement("tr", { className: "e-masked-row e-row" });
      if (this.rowRenderingMode !== "Vertical") {
        row2.style.height = this.getRowHeight() + "px";
      }
      var td = this.createElement("td", { className: "e-masked-cell e-rowcell" });
      for (var i = 0, colIndex = 0; i < colgroup.childNodes.length; i++) {
        var col = colgroup.childNodes[parseInt(i.toString(), 10)];
        var localTD = td.cloneNode();
        localTD.innerHTML = this.getShimmerTemplate();
        if (!(col.classList.contains("e-group-intent") || col.classList.contains("e-detail-intent") || col.classList.contains("e-drag-intent"))) {
          if (this.rowRenderingMode === "Vertical" && columns[parseInt(colIndex.toString(), 10)]) {
            localTD.setAttribute("data-cell", columns[parseInt(colIndex.toString(), 10)].headerText ? columns[parseInt(colIndex.toString(), 10)].headerText : columns[parseInt(colIndex.toString(), 10)].field);
          }
          if (col.style.display === "none") {
            localTD.classList.add("e-hide");
          } else {
            localTD.style.textAlign = columns[parseInt(colIndex.toString(), 10)] && columns[parseInt(colIndex.toString(), 10)].textAlign ? columns[parseInt(colIndex.toString(), 10)].textAlign.toLowerCase() : this.enableRtl ? "right" : "left";
            if (columns[parseInt(colIndex.toString(), 10)] && (columns[parseInt(colIndex.toString(), 10)].type === "checkbox" || columns[parseInt(colIndex.toString(), 10)].displayAsCheckBox)) {
              localTD.firstChild.classList.add("e-mask-checkbox-intent");
            }
          }
          colIndex++;
        } else {
          if (col.classList.contains("e-group-intent")) {
            localTD.firstChild.classList.add("e-mask-group-intent");
          } else if (col.classList.contains("e-detail-intent")) {
            localTD.firstChild.classList.add("e-mask-detail-intent");
          } else if (col.classList.contains("e-drag-intent")) {
            localTD.firstChild.classList.add("e-mask-drag-intent");
          }
        }
        row2.appendChild(localTD);
      }
      return row2;
    };
    Grid2.prototype.getShimmerTemplate = function() {
      if (this.maskRowContentScroll) {
        return '<span class="e-mask e-skeleton e-skeleton-text"></span>';
      }
      return '<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>';
    };
    Grid2.prototype.addShimmerEffect = function() {
      this.maskRowContentScroll = false;
      var maskSpan = [].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)"));
      for (var i = 0; i < maskSpan.length; i++) {
        if (maskSpan[parseInt(i.toString(), 10)]) {
          maskSpan[parseInt(i.toString(), 10)].classList.add("e-shimmer-wave");
        }
      }
    };
    Grid2.prototype.translateMaskRow = function(e) {
      var target = e.target;
      var maskTables = target.querySelectorAll(".e-masked-table");
      for (var i = 0; i < maskTables.length; i++) {
        var maskTable = maskTables[parseInt(i.toString(), 10)];
        if (maskTable) {
          var minScrollTop = target.scrollHeight - maskTable.getBoundingClientRect().height;
          minScrollTop = minScrollTop < 0 ? 0 : minScrollTop;
          var scrollTop = target.scrollTop <= minScrollTop ? target.scrollTop : minScrollTop;
          if (this.enableVirtualization) {
            scrollTop -= getTransformValues(closest(maskTable, ".e-virtualtable")).height;
          }
          maskTable.style.transform = "translate(0px," + scrollTop + "px)";
        }
      }
    };
    Grid2.prototype.removeMaskRow = function() {
      if (!isNullOrUndefined(this.contentModule)) {
        var gridContent2 = this.getContent().firstChild;
        EventHandler.remove(gridContent2, "scroll", this.translateMaskRow);
      }
      if (this.headerMaskTable && this.isFrozenGrid() && !this.enableColumnVirtualization) {
        this.getHeaderContent().querySelector("." + headerContent).style.position = "";
      }
      var maskTables = [
        this.headerMaskTable,
        this.contentMaskTable,
        this.footerContentMaskTable
      ];
      for (var i = 0; i < maskTables.length; i++) {
        var maskTable = maskTables[parseInt(i.toString(), 10)];
        if (maskTable) {
          remove(maskTable);
        }
      }
      this.headerMaskTable = null;
      this.contentMaskTable = null;
      this.footerContentMaskTable = null;
    };
    Grid2.prototype.refreshMaskRow = function() {
      var gridContent2 = this.getContent().firstChild;
      if (!this.isInitialLoad && !this.getColumns().length) {
        return;
      }
      if (this.contentMaskTable && gridContent2.querySelector(".e-masked-table")) {
        var content2 = gridContent2;
        if (this.enableVirtualization) {
          content2 = content2.querySelector(".e-virtualtable");
        }
        this.refreshMaskRowColgroupWidth(content2);
      }
    };
    Grid2.prototype.refreshMaskRowColgroupWidth = function(content2) {
      var table2 = content2.querySelector("table:not(.e-masked-table)");
      var colgroup = table2.querySelector(colGroup).cloneNode(true);
      var maskTable = content2.querySelector(".e-masked-table");
      colgroup.removeAttribute("id");
      colgroup.setAttribute("class", "e-masked-colgroup");
      for (var i = 0; i < colgroup.childNodes.length; i++) {
        colgroup.childNodes[parseInt(i.toString(), 10)].removeAttribute("class");
      }
      remove(maskTable.querySelector(".e-masked-colgroup"));
      maskTable.insertBefore(colgroup, maskTable.firstChild);
      maskTable.style.width = table2.getBoundingClientRect().width + "px";
    };
    Grid2.prototype.updateStackedFilter = function() {
      if (this.allowFiltering && this.filterSettings.type === "FilterBar" && this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length) {
        this.getHeaderContent().classList.add("e-stackedfilter");
      } else {
        this.getHeaderContent().classList.remove("e-stackedfilter");
      }
    };
    Grid2.prototype.getMediaColumns = function() {
      if (!this.enableColumnVirtualization) {
        var gcol = this.getColumns();
        this.getShowHideService = this.serviceLocator.getService("showHideService");
        if (!isNullOrUndefined(gcol)) {
          for (var index = 0; index < gcol.length; index++) {
            if (!isNullOrUndefined(gcol[parseInt(index.toString(), 10)].hideAtMedia) && (isNullOrUndefined(gcol[parseInt(index.toString(), 10)].visible) || gcol[parseInt(index.toString(), 10)].visible)) {
              this.pushMediaColumn(gcol[parseInt(index.toString(), 10)], index);
            }
          }
        }
      }
      this.updateFrozenColumnsWidth();
    };
    Grid2.prototype.pushMediaColumn = function(col, index) {
      this.mediaCol.push(col);
      this.media[col.uid] = window.matchMedia(col.hideAtMedia);
      this.mediaQueryUpdate(index, this.media[col.uid]);
      this.mediaBindInstance[parseInt(index.toString(), 10)] = this.mediaQueryUpdate.bind(this, index);
      this.media[col.uid].addListener(this.mediaBindInstance[parseInt(index.toString(), 10)]);
    };
    Grid2.prototype.updateMediaColumns = function(col) {
      if (!this.enableColumnVirtualization) {
        var index = this.getColumnIndexByUid(col.uid);
        for (var i = 0; i < this.mediaCol.length; i++) {
          if (col.uid === this.mediaCol[parseInt(i.toString(), 10)].uid) {
            this.mediaCol.splice(i, 1);
            return;
          }
        }
        this.pushMediaColumn(col, index);
      }
    };
    Grid2.prototype.mediaQueryUpdate = function(columnIndex, e) {
      var col = this.getColumns()[parseInt(columnIndex.toString(), 10)];
      if (this.mediaCol.some(function(mediaColumn) {
        return mediaColumn.uid === col.uid;
      })) {
        col.visible = e.matches;
        if (this.isInitialLoad) {
          this.invokedFromMedia = true;
          if (col.visible) {
            this.showHider.show(col.headerText, "headerText");
          } else {
            this.showHider.hide(col.headerText, "headerText");
          }
        }
      }
    };
    Grid2.prototype.refreshMediaCol = function() {
      this.isInitialLoad = true;
      var footerContent = this.element.querySelector("." + gridFooter);
      if (this.aggregates.length && this.element.scrollHeight > parseInt(this.height.toString(), 10) && footerContent) {
        addClass([footerContent], ["e-footerpadding"]);
      }
      var checkboxColumn = this.getColumns().filter(function(col) {
        return col.type === "checkbox";
      });
      if (checkboxColumn.length === 0 || checkboxColumn.length && this.selectionSettings.checkboxMode === "ResetOnRowClick") {
        this.isCheckBoxSelection = false;
      }
      if (this.rowRenderingMode === "Vertical") {
        if (this.enableHover) {
          this.setProperties({ enableAdaptiveUI: true, enableHover: false }, true);
          removeClass([this.element], "e-gridhover");
        }
      }
      if (this.enableAdaptiveUI && this.scrollModule) {
        this.scrollModule.refresh();
      }
      if (this.isFrozenGrid() && this.isAutoGenerateColumns) {
        this.widthService.setWidthToColumns();
        this.isAutoGenerateColumns = false;
      }
    };
    Grid2.prototype.removeMediaListener = function() {
      for (var i = 0; i < this.mediaCol.length; i++) {
        this.media[this.mediaCol[parseInt(i.toString(), 10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(i.toString(), 10)].index]);
      }
    };
    Grid2.prototype.eventInitializer = function() {
    };
    Grid2.prototype.destroy = function() {
      var gridElement = this.element;
      if (!gridElement) {
        return;
      }
      var hasGridChild = gridElement.querySelector("." + gridHeader) && gridElement.querySelector("." + gridContent) ? true : false;
      if (hasGridChild) {
        this.unwireEvents();
      }
      this.removeListener();
      this.removeMediaListener();
      this.notify(destroy, {});
      this.destroyDependentModules();
      if (this.isReact) {
        this.destroyTemplate(["template"]);
      }
      if (this.isVue) {
        this.destroyTemplate();
      }
      if (hasGridChild) {
        _super.prototype.destroy.call(this);
      }
      this.toolTipObj.destroy();
      if (this.isReact && !Browser.isIE) {
        this.element.innerHTML = "";
      }
      var modules = [
        "renderModule",
        "headerModule",
        "contentModule",
        "valueFormatterService",
        "serviceLocator",
        "ariaService",
        "keyboardModule",
        "widthService",
        "searchModule",
        "showHider",
        "scrollModule",
        "printModule",
        "clipboardModule",
        "focusModule"
      ];
      for (var i = 0; i < modules.length; i++) {
        if (this[modules[parseInt(i.toString(), 10)]]) {
          this[modules[parseInt(i.toString(), 10)]] = null;
        }
      }
      this.element.innerHTML = "";
      classList(this.element, [], ["e-rtl", "e-gridhover", "e-responsive", "e-default", "e-device", "e-grid-min-height"]);
    };
    Grid2.prototype.destroyDependentModules = function() {
      var gridElement = this.element;
      if (!gridElement || !gridElement.querySelector("." + gridHeader) && !gridElement.querySelector("." + gridContent)) {
        return;
      }
      this.scrollModule.destroy();
      this.keyboardModule.destroy();
      this.focusModule.destroy();
      this.clipboardModule.destroy();
      this.printModule.destroy();
    };
    Grid2.prototype.getModuleName = function() {
      return "grid";
    };
    Grid2.prototype.enableBoxSelection = function() {
      if (this.enableAutoFill) {
        this.selectionSettings.cellSelectionMode = "BoxWithBorder";
        this.element.classList.add("e-afenabled");
      } else {
        this.element.classList.remove("e-afenabled");
        this.notify(destroyAutoFillElements, {});
      }
    };
    Grid2.prototype.setCSSClass = function(oldCSSClass) {
      if (this.cssClass) {
        addClass([this.element], this.cssClass.split(" "));
      }
      if (oldCSSClass) {
        removeClass([this.element], oldCSSClass.split(" "));
      }
    };
    Grid2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var requireRefresh = false;
      var requireGridRefresh = false;
      var freezeRefresh = false;
      var checkCursor;
      var args = { requestType: "refresh" };
      var childGridParent = null;
      var parentInstance = null;
      if (this.isDestroyed) {
        return;
      }
      this.log("module_missing");
      if (this.isEllipsisTooltip()) {
        this.toolTipObj.close();
      }
      var properties = Object.keys(newProp);
      if (properties.indexOf("columns") > -1) {
        if (this.enableColumnVirtualization) {
          this.columnModel = [];
        }
        this.updateColumnObject();
        requireGridRefresh = true;
      }
      for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {
        var prop = properties_1[_i];
        switch (prop) {
          case "allowPaging":
            this.notify(uiUpdate, { module: "pager", enable: this.allowPaging });
            requireRefresh = true;
            if (this.height === "100%") {
              this.scrollModule.refresh();
            }
            break;
          case "pageSettings":
            if (this.pageTemplateChange) {
              this.pageTemplateChange = false;
              this.notify(inBoundModelChanged, { module: "pager", properties: newProp.pageSettings });
              break;
            }
            if (this.pagerModule && this.pagerModule.isCancel) {
              this.pagerModule.isCancel = false;
              return;
            }
            this.notify(inBoundModelChanged, { module: "pager", properties: newProp.pageSettings });
            if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.pageSize) && isNullOrUndefined(newProp.pageSettings.totalRecordsCount) || !isNullOrUndefined(oldProp.pageSettings) && (newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage && !this.enableColumnVirtualization && !this.enableVirtualization && this.pageRequireRefresh && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {
              requireRefresh = true;
            }
            if (!this.pageRequireRefresh) {
              this.pageRequireRefresh = true;
            }
            if (this.pagerModule && this.pagerModule.isCancel) {
              this.pagerModule.isCancel = false;
            }
            break;
          case "allowSorting":
            this.notify(uiUpdate, { module: "sort", enable: this.allowSorting });
            requireRefresh = true;
            checkCursor = true;
            break;
          case "allowFiltering":
            this.updateStackedFilter();
            this.notify(uiUpdate, { module: "filter", enable: this.allowFiltering });
            requireRefresh = true;
            if (this.filterSettings.type !== "FilterBar" || this.editSettings.showAddNewRow && this.filterSettings.type === "FilterBar") {
              this.refreshHeader();
            } else {
              if (this.height === "100%") {
                this.scrollModule.refresh();
              }
            }
            break;
          case "height":
          case "width":
            this.notify(uiUpdate, { module: "scroll", properties: { width: newProp.width, height: newProp.height } });
            if (this.allowPaging) {
              this.pagerModule.refresh();
            }
            break;
          case "allowReordering":
            this.headerModule.refreshUI();
            checkCursor = true;
            break;
          case "allowRowDragAndDrop":
            this.notify(uiUpdate, { module: "rowDragAndDrop", enable: this.allowRowDragAndDrop });
            this.renderModule.refresh();
            this.headerModule.refreshUI();
            break;
          case "allowSelection":
            this.notify(uiUpdate, { module: "selection", enable: this.allowSelection });
            this.renderModule.refresh();
            break;
          case "cssClass":
            this.setCSSClass(oldProp.cssClass);
            break;
          case "enableAutoFill":
            if (this.selectionModule) {
              this.enableBoxSelection();
              this.selectionModule.updateAutoFillPosition();
            }
            break;
          case "rowTemplate":
            this.rowTemplateFn = templateCompiler(this.rowTemplate);
            requireRefresh = true;
            break;
          case "emptyRecordTemplate":
            this.emptyRecordTemplateFn = templateCompiler(this.emptyRecordTemplate);
            requireRefresh = true;
            break;
          case "detailTemplate":
            this.detailTemplateFn = templateCompiler(this.detailTemplate);
            requireRefresh = true;
            break;
          case "allowGrouping":
            this.notify(uiUpdate, { module: "group", enable: this.allowGrouping });
            this.headerModule.refreshUI();
            requireRefresh = true;
            checkCursor = true;
            if (this.height === "100%") {
              this.scrollModule.refresh();
            }
            break;
          case "enableInfiniteScrolling":
          case "childGrid":
            requireRefresh = true;
            childGridParent = this.parentDetails ? document.querySelector("#" + this.parentDetails.parentID) : null;
            parentInstance = childGridParent ? childGridParent.ej2_instances[0] : null;
            if (this.childGrid && parentInstance && isNullOrUndefined(parentInstance.childGrid.childGrid)) {
              var childGridObject = Object.assign({}, parentInstance.childGrid, { childGrid: newProp.childGrid });
              parentInstance.setProperties({ childGrid: childGridObject }, true);
              while (!isNullOrUndefined(parentInstance.parentDetails)) {
                var currentParent = document.querySelector("#" + parentInstance.parentDetails.parentID);
                var currentParentInstance = currentParent ? currentParent.ej2_instances[0] : null;
                if (currentParentInstance) {
                  var currentChildObject = Object.assign({}, currentParentInstance.childGrid);
                  currentChildObject.childGrid = parentInstance.childGrid;
                  currentParentInstance.setProperties({ childGrid: currentChildObject }, true);
                }
                parentInstance = currentParentInstance;
              }
            }
            this.headerModule.refreshUI();
            break;
          case "toolbar":
            this.notify(uiUpdate, { module: "toolbar" });
            if (this.height === "100%") {
              this.scrollModule.refresh();
            }
            break;
          case "groupSettings":
            this.notify(inBoundModelChanged, {
              module: "group",
              properties: newProp.groupSettings,
              oldProperties: oldProp.groupSettings
            });
            break;
          case "aggregates":
            if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {
              requireRefresh = true;
            }
            this.notify(uiUpdate, { module: "aggregate", properties: newProp });
            if (this.height === "100%") {
              this.scrollModule.refresh();
            }
            break;
          case "frozenColumns":
          case "frozenRows":
          case "enableVirtualization":
          case "enableColumnVirtualization":
          case "currencyCode":
          case "locale":
            if (this.isFrozenGrid()) {
              this.log("frozen_rows_columns");
            }
            freezeRefresh = true;
            requireGridRefresh = true;
            this.addNewRowFocus = true;
            break;
          case "query":
            if (!this.getDataModule().isQueryInvokedFromData) {
              requireRefresh = true;
            }
            this.getDataModule().isQueryInvokedFromData = false;
            break;
          case "autoFit":
            if (this.autoFit) {
              this.preventAdjustColumns();
            } else {
              this.restoreAdjustColumns();
            }
            break;
          default:
            this.extendedPropertyChange(prop, newProp, requireGridRefresh);
        }
      }
      if (checkCursor) {
        this.updateDefaultCursor();
      }
      if (requireGridRefresh) {
        if (freezeRefresh || this.getFrozenColumns() || this.frozenRows || (this.frozenLeftColumns.length || this.frozenRightColumns.length)) {
          this.freezeRefresh();
        } else {
          this.refresh();
        }
      } else if (requireRefresh) {
        this.notify(modelChanged, args);
        requireRefresh = false;
        this.maintainSelection(newProp.selectedRowIndex);
      }
    };
    Grid2.prototype.extendedPropertyChange = function(prop, newProp, requireGridRefresh) {
      switch (prop) {
        case "enableRtl":
          this.updateRTL();
          if (this.allowPaging) {
            this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl = newProp.enableRtl;
            this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind();
          }
          if (this.height !== "auto") {
            this.scrollModule.removePadding(!newProp.enableRtl);
            this.scrollModule.setPadding();
          }
          if (this.toolbar && this.toolbarModule) {
            this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;
            this.toolbarModule.getToolbar().ej2_instances[0].dataBind();
          }
          if (this.contextMenuItems && this.contextMenuModule) {
            this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;
            this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();
          }
          if (this.showColumnMenu && this.columnMenuModule && !this.enableAdaptiveUI) {
            this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;
            this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();
          }
          if (this.filterSettings.type === "FilterBar" && this.filterSettings.showFilterBarOperator) {
            this.refreshHeader();
          }
          this.notify(rtlUpdated, {});
          break;
        case "enableAltRow":
          this.renderModule.refresh();
          break;
        case "allowResizing":
          if (this.resizeModule) {
            this.resizeModule.render();
          }
          this.headerModule.refreshUI();
          this.updateResizeLines();
          break;
        case "rowHeight":
          if (this.rowHeight) {
            addClass([this.element], "e-grid-min-height");
          } else {
            removeClass([this.element], "e-grid-min-height");
          }
          this.renderModule.refresh();
          this.headerModule.refreshUI();
          break;
        case "gridLines":
          this.updateGridLines();
          break;
        case "showColumnMenu":
          this.headerModule.refreshUI();
          this.notify(uiUpdate, { module: "columnMenu", enable: true });
          break;
        case "columnMenuItems":
          this.notify(uiUpdate, { module: "columnMenu", enable: this.columnMenuItems });
          break;
        case "contextMenuItems":
          this.notify(uiUpdate, { module: "contextMenu", enable: this.contextMenuItems });
          break;
        case "showColumnChooser":
          if (this.toolbarModule) {
            this.toolbarModule.refreshToolbarItems();
          }
          this.notify(uiUpdate, { module: "columnChooser", enable: this.showColumnChooser });
          break;
        case "filterSettings":
          this.updateStackedFilter();
          this.notify(inBoundModelChanged, { module: "filter", properties: newProp.filterSettings });
          break;
        case "searchSettings":
          this.notify(inBoundModelChanged, { module: "search", properties: newProp.searchSettings });
          break;
        case "sortSettings":
          this.notify(inBoundModelChanged, { module: "sort" });
          break;
        case "selectionSettings":
          this.notify(inBoundModelChanged, { module: "selection", properties: newProp.selectionSettings });
          break;
        case "editSettings":
          this.notify(inBoundModelChanged, { module: "edit", properties: newProp.editSettings });
          break;
        case "allowTextWrap":
        case "textWrapSettings":
          if (this.allowTextWrap) {
            this.applyTextWrap();
          } else {
            this.removeTextWrap();
          }
          this.notify(freezeRender, { case: "textwrap", isModeChg: prop === "textWrapSettings" });
          this.refreshHeader();
          if (this.height === "100%") {
            this.scrollModule.refresh();
          }
          break;
        case "dataSource":
          var requestPendingState = this.getDataModule().getState();
          if (this.allowPaging && this.pageSettings.pageSizes && !this.getDataModule().isRemote() && !(requestPendingState && requestPendingState.isPending)) {
            if (this.pagerModule.pagerObj.isAllPage) {
              var count = this.dataSource instanceof DataManager ? this.dataSource.dataSource.json.length : "result" in this.dataSource ? this.dataSource.count : this.dataSource.length;
              var isAllPage = Array.isArray(this.pageSettings.pageSizes) && this.pageSettings.pageSizes.indexOf("All") > -1 ? true : this.pageSettings.pageSizes;
              if (!isAllPage && this.pageSettings.pageSize !== count) {
                this.pagerModule.pagerObj.isAllPage = false;
              } else {
                this.setProperties({ pageSettings: { pageSize: count } }, true);
                this.pagerModule.pagerObj.setProperties({ pageSize: count }, true);
              }
            }
          }
          if (this.allowSelection && this.isPersistSelection && !(requestPendingState && requestPendingState.isPending)) {
            this.clearSelection();
          }
          if (!isNullOrUndefined(this.dataSource) && this.dataSource.result) {
            this.isVirtualAdaptive = false;
          }
          if (Object.getPrototypeOf(newProp).deepWatch) {
            var pKeyField = this.getPrimaryKeyFieldNames()[0];
            for (var i = 0, props = Object.keys(newProp.dataSource); i < props.length; i++) {
              this.setRowData(getValue(pKeyField, this.dataSource[props[parseInt(i.toString(), 10)]]), this.dataSource[props[parseInt(i.toString(), 10)]]);
            }
          } else if (requestPendingState.isPending) {
            var gResult = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];
            var names = requestPendingState.group || [];
            if (names.length && !this.groupSettings.enableLazyLoading && !(gResult.length && gResult[0].field)) {
              for (var i = 0; i < names.length; i++) {
                gResult = DataUtil.group(gResult, names[parseInt(i.toString(), 10)], requestPendingState.aggregates || []);
              }
            }
            this.dataSource = {
              result: gResult,
              count: this.dataSource.count,
              aggregates: this.dataSource.aggregates
            };
            this.getDataModule().setState({});
            requestPendingState.resolver(this.dataSource);
          } else {
            if (!isNullOrUndefined(this.dataSource) && this.dataSource.result && this.dataSource.count && this.groupSettings.columns.length) {
              var gResult = this.dataSource.result;
              var names = this.groupSettings.columns;
              if (names.length && !(gResult.length && gResult[0].field)) {
                for (var i = 0; i < names.length; i++) {
                  gResult = DataUtil.group(gResult, names[parseInt(i.toString(), 10)]);
                }
              }
              this.dataSource = {
                result: gResult,
                count: this.dataSource.count
              };
            }
            this.getDataModule().setState({ isDataChanged: false });
            this.notify(dataSourceModified, {});
            if (!requireGridRefresh) {
              this.renderModule.refresh();
              if (this.isCheckBoxSelection) {
                this.notify(beforeRefreshOnDataChange, {});
              }
            }
          }
          this.scrollRefresh();
          break;
        case "enableHover":
          var action = newProp.enableHover ? addClass : removeClass;
          action([this.element], "e-gridhover");
          break;
        case "selectedRowIndex":
          if (!this.isSelectedRowIndexUpdating) {
            this.selectRow(newProp.selectedRowIndex);
          }
          this.isSelectedRowIndexUpdating = false;
          break;
        case "resizeSettings":
          this.widthService.setWidthToTable();
          break;
        case "enableAdaptiveUI":
          this.notify(setFullScreenDialog, {});
          break;
        case "rowRenderingMode":
          this.enableVerticalRendering();
          this.notify(rowModeChange, {});
          this.refresh();
          break;
        case "enableStickyHeader":
          this.scrollModule.addStickyListener(newProp.enableStickyHeader);
          break;
        case "allowPdfExport":
          if (this.toolbarModule) {
            this.toolbarModule.refreshToolbarItems();
          }
          break;
        case "allowExcelExport":
          if (this.toolbarModule) {
            this.toolbarModule.refreshToolbarItems();
          }
          break;
      }
    };
    Grid2.prototype.maintainSelection = function(index) {
      var _this_1 = this;
      if (index !== -1) {
        var fn_1 = function() {
          _this_1.selectRow(index);
          _this_1.off(contentReady, fn_1);
        };
        this.on(contentReady, fn_1, this);
      }
    };
    Grid2.prototype.setProperties = function(prop, muteOnChange) {
      _super.prototype.setProperties.call(this, prop, muteOnChange);
      var filterSettings = "filterSettings";
      if (prop["" + filterSettings] && this.filterModule && muteOnChange) {
        this.filterModule.refreshFilter();
      }
    };
    Grid2.prototype.getTablesCount = function() {
      return this.tablesCount;
    };
    Grid2.prototype.updateDefaultCursor = function() {
      var headerCells = [].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)"));
      var stdHdrCell = [].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell"));
      var cols = this.getColumns();
      for (var i = 0; i < headerCells.length; i++) {
        var cell = headerCells[parseInt(i.toString(), 10)];
        if (this.allowGrouping || this.allowReordering || this.allowSorting) {
          if (!cols[parseInt(i.toString(), 10)].allowReordering || !cols[parseInt(i.toString(), 10)].allowSorting || !cols[parseInt(i.toString(), 10)].allowGrouping) {
            cell.classList.add("e-defaultcursor");
          } else {
            cell.classList.add("e-mousepointer");
          }
        }
      }
      for (var count = 0; count < stdHdrCell.length; count++) {
        if (this.allowReordering) {
          stdHdrCell[parseInt(count.toString(), 10)].classList.add("e-mousepointer");
        }
      }
    };
    Grid2.prototype.updateColumnModel = function(columns, isRecursion) {
      for (var i = 0, len = !isNullOrUndefined(columns) ? columns.length : 0; i < len; i++) {
        if (columns[parseInt(i.toString(), 10)].columns) {
          this.updateColumnModel(columns[parseInt(i.toString(), 10)].columns, true);
        } else {
          this.columnModel.push(columns[parseInt(i.toString(), 10)]);
        }
      }
      if (isNullOrUndefined(isRecursion) || !isRecursion) {
        this.updateLockableColumns();
      }
    };
    Grid2.prototype.getFrozenLeftCount = function() {
      return this.getFrozenColumns() || this.getFrozenLeftColumnsCount();
    };
    Grid2.prototype.isFrozenGrid = function() {
      return this.getFrozenColumns() !== 0 || this.frozenLeftColumns.length !== 0 || this.frozenRightColumns.length !== 0 || this.fixedColumns.length !== 0;
    };
    Grid2.prototype.getFrozenMode = function() {
      return this.frozenName;
    };
    Grid2.prototype.updateLockableColumns = function() {
      var cols = this.columnModel;
      var frozenCount = 0;
      var movableCount = 0;
      var frozenColumns = this.getFrozenColumns();
      for (var i = 0; i < cols.length; i++) {
        if (cols[parseInt(i.toString(), 10)].lockColumn) {
          if (i < frozenColumns) {
            cols.splice(frozenCount, 0, cols.splice(i, 1)[0]);
            frozenCount++;
          } else {
            cols.splice(frozenColumns + movableCount, 0, cols.splice(i, 1)[0]);
            movableCount++;
          }
        }
      }
    };
    Grid2.prototype.checkLockColumns = function(cols) {
      for (var i = 0; i < cols.length; i++) {
        if (cols[parseInt(i.toString(), 10)].columns) {
          this.checkLockColumns(cols[parseInt(i.toString(), 10)].columns);
        } else if (cols[parseInt(i.toString(), 10)].lockColumn) {
          this.lockcolPositionCount++;
        }
      }
    };
    Grid2.prototype.leftrightColumnWidth = function(position) {
      var cols = position === "left" ? this.getFrozenLeftColumns() : position === "right" ? this.getFrozenRightColumns() : [];
      var width = 0;
      cols.filter(function(col) {
        if (col.visible) {
          width += parseInt(col.width.toString(), 10);
        }
      });
      return width;
    };
    Grid2.prototype.getColumns = function(isRefresh) {
      var _this_1 = this;
      var inview = this.inViewIndexes.map(function(v) {
        return v - _this_1.groupSettings.columns.length;
      }).filter(function(v) {
        return v > -1;
      });
      var vLen = inview.length;
      if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {
        this.columnModel = [];
        this.updateColumnModel(this.columns);
      }
      var columns = vLen === 0 ? this.columnModel : this.getVisibleColumns().slice(inview[0], inview[vLen - 1] + 1);
      var left = [];
      var right = [];
      var movable = [];
      var isLeftRightFrozen = this.enableColumnVirtualization && this.isPreparedFrozenColumns && vLen === 0;
      if (isLeftRightFrozen) {
        this.frozenRightColumns = [];
        this.frozenLeftColumns = [];
      }
      for (var i = 0; i < columns.length; i++) {
        if (columns[parseInt(i.toString(), 10)].freeze === "Left" || columns[parseInt(i.toString(), 10)].isFrozen) {
          left.push(columns[parseInt(i.toString(), 10)]);
          if (isLeftRightFrozen) {
            this.frozenLeftColumns.push(columns[parseInt(i.toString(), 10)]);
          }
        } else if (columns[parseInt(i.toString(), 10)].freeze === "Right") {
          right.push(columns[parseInt(i.toString(), 10)]);
          if (isLeftRightFrozen) {
            this.frozenRightColumns.push(columns[parseInt(i.toString(), 10)]);
          }
        } else {
          movable.push(columns[parseInt(i.toString(), 10)]);
        }
      }
      if (this.enableColumnVirtualization && this.isFrozenGrid()) {
        if (this.frozenLeftColumns.length) {
          left = this.frozenLeftColumns;
        }
        if (this.frozenRightColumns.length) {
          right = this.frozenRightColumns;
        }
      }
      return left.concat(movable).concat(right);
    };
    Grid2.prototype.getStackedHeaderColumnByHeaderText = function(stackedHeader, col) {
      for (var i = 0; i < col.length; i++) {
        var individualColumn = col[parseInt(i.toString(), 10)];
        if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {
          this.stackedColumn = individualColumn;
          break;
        } else if (individualColumn.columns) {
          this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);
        }
      }
      return this.stackedColumn;
    };
    Grid2.prototype.getColumnIndexesInView = function() {
      return this.inViewIndexes;
    };
    Grid2.prototype.getQuery = function() {
      return this.query;
    };
    Grid2.prototype.getLocaleConstants = function() {
      return this.defaultLocale;
    };
    Grid2.prototype.setColumnIndexesInView = function(indexes) {
      this.inViewIndexes = indexes;
    };
    Grid2.prototype.getVisibleColumns = function() {
      return this.getCurrentVisibleColumns();
    };
    Grid2.prototype.getHeaderContent = function() {
      return this.headerModule.getPanel();
    };
    Grid2.prototype.setGridHeaderContent = function(element2) {
      this.headerModule.setPanel(element2);
    };
    Grid2.prototype.getContentTable = function() {
      return this.contentModule.getTable();
    };
    Grid2.prototype.setGridContentTable = function(element2) {
      this.contentModule.setTable(element2);
    };
    Grid2.prototype.getContent = function() {
      return this.contentModule.getPanel();
    };
    Grid2.prototype.setGridContent = function(element2) {
      this.contentModule.setPanel(element2);
    };
    Grid2.prototype.getHeaderTable = function() {
      return this.headerModule.getTable();
    };
    Grid2.prototype.setGridHeaderTable = function(element2) {
      this.headerModule.setTable(element2);
    };
    Grid2.prototype.getFooterContent = function() {
      this.footerElement = this.element.getElementsByClassName(gridFooter)[0];
      return this.footerElement;
    };
    Grid2.prototype.getFooterContentTable = function() {
      this.footerElement = this.element.getElementsByClassName(gridFooter)[0];
      return this.footerElement.firstChild.firstChild;
    };
    Grid2.prototype.getPager = function() {
      return this.gridPager;
    };
    Grid2.prototype.setGridPager = function(element2) {
      this.gridPager = element2;
    };
    Grid2.prototype.getRowByIndex = function(index) {
      if (this.enableVirtualization && this.groupSettings.enableLazyLoading) {
        return this.lazyLoadRender.getRowByIndex(index);
      } else {
        return this.contentModule.getRowByIndex(index);
      }
    };
    Grid2.prototype.getMovableRowByIndex = function(index) {
      return this.contentModule.getRowByIndex(index);
    };
    Grid2.prototype.getFrozenRowByIndex = function(index) {
      return this.contentModule.getRowByIndex(index);
    };
    Grid2.prototype.getRows = function() {
      return this.contentModule.getRowElements();
    };
    Grid2.prototype.getFrozenRightRowByIndex = function(index) {
      return this.contentModule.getRowByIndex(index);
    };
    Grid2.prototype.getRowInfo = function(target) {
      var ele = target;
      var args = { target };
      if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, "e-detailrowcollapse") && isNullOrUndefined(parentsUntil(ele, "e-recordplusexpand")))) {
        var cell = closest(ele, "." + rowCell);
        if (!cell) {
          var row_1 = closest(ele, "." + row);
          if (!isNullOrUndefined(row_1) && !row_1.classList.contains("e-addedrow")) {
            var rowObj = this.getRowObjectFromUID(row_1.getAttribute("data-uid"));
            var rowIndex = parseInt(row_1.getAttribute(ariaRowIndex), 10) - 1;
            args = { row: row_1, rowData: rowObj.data, rowIndex };
          }
          return args;
        }
        var cellIndex = parseInt(cell.getAttribute(ariaColIndex), 10) - 1;
        var row_2 = closest(cell, "." + row);
        if (!isNullOrUndefined(cell) && !isNaN(cellIndex) && !isNullOrUndefined(row_2)) {
          var rowIndex = parseInt(row_2.getAttribute(ariaRowIndex), 10) - 1;
          var rows = this.contentModule.getRows();
          var index = cellIndex + this.getIndentCount();
          var rowsObject = rows.filter(function(r) {
            return r.uid === row_2.getAttribute("data-uid");
          });
          var rowData = {};
          var column = void 0;
          if (Object.keys(rowsObject).length) {
            rowData = rowsObject[0].data;
            column = rowsObject[0].cells[parseInt(index.toString(), 10)].column;
          }
          args = { cell, cellIndex, row: row_2, rowIndex, rowData, column, target };
        }
      }
      return args;
    };
    Grid2.prototype.getMovableRows = function() {
      return this.contentModule.getRowElements();
    };
    Grid2.prototype.getFrozenRightRows = function() {
      return this.contentModule.getRowElements();
    };
    Grid2.prototype.getDataRows = function() {
      return this.getAllDataRows();
    };
    Grid2.prototype.getAllDataRows = function(includeAdd) {
      if (isNullOrUndefined(this.getContentTable().querySelector(tbody))) {
        return [];
      }
      var tbody$1 = this.getContentTable().querySelector(tbody);
      var rows = [].slice.call(tbody$1.children);
      if (this.editSettings.showAddNewRow) {
        if (rows[0].classList.contains("e-addedrow")) {
          rows.shift();
        } else if (rows[rows.length - 1].classList.contains("e-addedrow")) {
          rows.pop();
        }
      }
      if (this.frozenRows) {
        var hdrTbody = this.getHeaderTable().querySelector(tbody);
        var freezeRows = [].slice.call(hdrTbody.children);
        rows = this.addMovableRows(freezeRows, rows);
        if (this.editSettings.showAddNewRow && freezeRows[0].classList.contains("e-addedrow")) {
          freezeRows.shift();
        }
      }
      var dataRows = this.generateDataRows(rows, includeAdd);
      return dataRows;
    };
    Grid2.prototype.addMovableRows = function(fRows, mrows) {
      for (var i = 0, len = mrows.length; i < len; i++) {
        fRows.push(mrows[parseInt(i.toString(), 10)]);
      }
      return fRows;
    };
    Grid2.prototype.generateDataRows = function(rows, includAdd) {
      var dRows = [];
      for (var i = 0, len = rows.length; i < len; i++) {
        if (rows[parseInt(i.toString(), 10)].classList.contains(row) && (!rows[parseInt(i.toString(), 10)].classList.contains("e-hiddenrow") || includAdd)) {
          if (this.isCollapseStateEnabled()) {
            dRows[parseInt(rows[parseInt(i.toString(), 10)].getAttribute("aria-rowindex"), 10) - 1] = rows[parseInt(i.toString(), 10)];
          } else {
            dRows.push(rows[parseInt(i.toString(), 10)]);
          }
        }
      }
      return dRows;
    };
    Grid2.prototype.getMovableDataRows = function() {
      return this.getAllMovableDataRows();
    };
    Grid2.prototype.getAllMovableDataRows = function(includeAdd) {
      return this.getAllDataRows(includeAdd);
    };
    Grid2.prototype.getFrozenDataRows = function() {
      return this.getAllFrozenDataRows();
    };
    Grid2.prototype.getAllFrozenDataRows = function(includeAdd) {
      return this.getAllDataRows(includeAdd);
    };
    Grid2.prototype.getFrozenRightDataRows = function() {
      return this.getAllFrozenRightDataRows();
    };
    Grid2.prototype.getAllFrozenRightDataRows = function(includeAdd) {
      return this.getAllDataRows(includeAdd);
    };
    Grid2.prototype.setCellValue = function(key, field, value) {
      var cells = "cells";
      var rowData = "data";
      var rowIdx = "index";
      var rowuID = "uid";
      var pkName = this.getPrimaryKeyFieldNames()[0];
      var cell = new CellRenderer(this, this.serviceLocator);
      var fieldIdx = this.getColumnIndexByField(field);
      var col = this.getColumnByField(field);
      var rowObjects = this.contentModule.getRows();
      var selectedRow = rowObjects.filter(function(r) {
        return getValue(pkName, r.data) === key;
      })[0];
      var tr = selectedRow ? this.element.querySelector("[data-uid=" + selectedRow["" + rowuID] + "]") : null;
      if (!isNullOrUndefined(tr)) {
        if (typeof value === "string") {
          value = this.sanitize(value);
        }
        setValue(field, value, selectedRow["" + rowData]);
        var td = this.enableVirtualization ? tr.children[parseInt(fieldIdx.toString(), 10)] : this.getCellFromIndex(selectedRow["" + rowIdx], fieldIdx);
        if (!isNullOrUndefined(td)) {
          var Idx = 0;
          if (this.groupSettings.columns.length) {
            fieldIdx = fieldIdx + this.groupSettings.columns.length;
          }
          if (this.childGrid || this.detailTemplate) {
            fieldIdx++;
          }
          if (this.isRowDragable()) {
            fieldIdx++;
          }
          var sRow = selectedRow["" + cells][fieldIdx - Idx];
          cell.refreshTD(td, sRow, selectedRow["" + rowData], { index: selectedRow["" + rowIdx] });
          if (this.isReact) {
            td = this.enableVirtualization ? tr.children[parseInt(fieldIdx.toString(), 10)] : this.getCellFromIndex(selectedRow["" + rowIdx], fieldIdx);
          }
          if (this.aggregates.length > 0) {
            this.notify(refreshFooterRenderer, {});
            if (this.groupSettings.columns.length > 0) {
              this.notify(groupAggregates, {});
            }
          }
          if (!isNullOrUndefined(selectedRow) && !isNullOrUndefined(selectedRow["changes"])) {
            selectedRow["changes"]["" + field] = value;
          }
          this.trigger(queryCellInfo, {
            cell: td,
            column: col,
            data: selectedRow["" + rowData]
          });
          if (this.isReact && td.getAttribute("tabindex") === "0" && td.classList.contains("e-focused")) {
            td.focus();
          }
        }
      } else {
        return;
      }
    };
    Grid2.prototype.refreshReactColumnTemplateByUid = function(columnUid, renderTemplates) {
      var _this_1 = this;
      if (this.isReact) {
        this.clearTemplate(["columnTemplate"], void 0, function() {
          var isChildGrid = _this_1.childGrid && _this_1.element.querySelectorAll(".e-childgrid").length ? true : false;
          var rows = isChildGrid ? _this_1.getContentTable().querySelectorAll(".e-row") : _this_1.getDataRows();
          _this_1.refreshReactTemplateTD(rows, isChildGrid);
          if (renderTemplates) {
            _this_1.renderTemplates();
          }
        });
      }
    };
    Grid2.prototype.refreshReactTemplateTD = function(rows, isChildGrid, isFrozen) {
      var cells = "cells";
      var rowIdx = "index";
      var indent = this.getIndentCount();
      var childIndent = 0;
      var isChildRow = false;
      for (var j = 0; j < rows.length; j++) {
        var rowsObj = this.getRowObjectFromUID(rows[parseInt(j.toString(), 10)].getAttribute("data-uid"));
        if (isChildGrid && !rowsObj && parentsUntil(rows[parseInt(j.toString(), 10)], "e-childgrid")) {
          var gridObj = parentsUntil(rows[parseInt(j.toString(), 10)], "e-childgrid").ej2_instances[0];
          rowsObj = gridObj.getRowObjectFromUID(rows[parseInt(j.toString(), 10)].getAttribute("data-uid"));
          childIndent = gridObj.getIndentCount();
          isChildRow = true;
        }
        if (rowsObj && rowsObj.isDataRow && !isNullOrUndefined(rowsObj.index) && !rows[parseInt(j.toString(), 10)].classList.contains("e-editedrow")) {
          for (var i = 0; i < rowsObj["" + cells].length; i++) {
            var cell = rowsObj["" + cells][parseInt(i.toString(), 10)];
            if (cell.isTemplate) {
              var cellRenderer = new CellRenderer(this, this.serviceLocator);
              var td = isChildGrid ? rows[parseInt(j.toString(), 10)].children[cell.index + (isChildRow ? childIndent : indent)] : this.getCellFromIndex(j, isFrozen ? cell.index : i - indent);
              cellRenderer.refreshTD(td, cell, rowsObj.data, { index: rowsObj["" + rowIdx] });
            }
          }
        }
        isChildRow = false;
      }
    };
    Grid2.prototype.refreshGroupCaptionFooterTemplate = function() {
      var isChildGrid = this.childGrid && this.element.querySelectorAll(".e-childgrid").length ? true : false;
      var rows = this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow");
      for (var i = 0; i < rows.length; i++) {
        var gridObj = this;
        var rowsObj = this.getRowObjectFromUID(rows[parseInt(i.toString(), 10)].getAttribute("data-uid"));
        if (isChildGrid && !rowsObj && parentsUntil(rows[parseInt(i.toString(), 10)], "e-childgrid")) {
          gridObj = parentsUntil(rows[parseInt(i.toString(), 10)], "e-childgrid").ej2_instances[0];
          rowsObj = gridObj.getRowObjectFromUID(rows[parseInt(i.toString(), 10)].getAttribute("data-uid"));
        }
        if (rowsObj) {
          var cells = rowsObj.cells.filter(function(cell) {
            return cell.isDataCell;
          });
          var args = { cells, data: rowsObj.data, dataUid: rowsObj.uid };
          gridObj.notify(refreshAggregateCell, args);
        }
      }
    };
    Grid2.prototype.refreshReactHeaderTemplateByUid = function(columnUid) {
      if (this.isReact) {
        var cells = "cells";
        var rowsObj = this.headerModule.rows;
        var cellIndex = this.getNormalizedColumnIndex(columnUid);
        var _loop_1 = function(j2) {
          var cell = rowsObj[parseInt(j2.toString(), 10)]["" + cells][parseInt(cellIndex.toString(), 10)];
          if (cell && cell.column.uid === columnUid) {
            var headerCellRenderer = new HeaderCellRenderer(this_1, this_1.serviceLocator);
            var td = parentsUntil(this_1.element.querySelectorAll("[e-mappinguid=" + columnUid + "]")[0], "e-templatecell");
            headerCellRenderer.refresh(cell, td);
            var cols = this_1.sortSettings.columns;
            var columnIndex = cols.findIndex(function(col) {
              return col.field === cell.column.field;
            });
            if (columnIndex !== -1) {
              var header = this_1.getColumnHeaderByField(cell.column.field);
              this_1.ariaService.setSort(header, cols[parseInt(columnIndex.toString(), 10)].direction.toLowerCase());
              if (cols.length > 1) {
                header.querySelector(".e-headercelldiv").insertBefore(this_1.createElement("span", { className: "e-sortnumber", innerHTML: (columnIndex + 1).toString() }), header.querySelector(".e-headertext"));
              }
              var filterElement = header.querySelector(".e-sortfilterdiv");
              if (cols[parseInt(columnIndex.toString(), 10)].direction === "Ascending") {
                classList(filterElement, ["e-ascending", "e-icon-ascending"], []);
              } else {
                classList(filterElement, ["e-descending", "e-icon-descending"], []);
              }
            }
          }
        };
        var this_1 = this;
        for (var j = 0; j < rowsObj.length; j++) {
          _loop_1(j);
        }
      }
    };
    Grid2.prototype.setRowData = function(key, rowData) {
      var rowuID = "uid";
      var rowObjects = this.contentModule.getRows();
      var pkName = this.getPrimaryKeyFieldNames()[0];
      if (this.groupSettings.columns.length > 0 && this.aggregates.length > 0) {
        rowObjects = rowObjects.filter(function(row2) {
          return row2.isDataRow;
        });
      }
      var selectedRow = rowObjects.filter(function(r) {
        return getValue(pkName, r.data) === key;
      })[0];
      var selectRowEle = selectedRow ? [].slice.call(this.element.querySelectorAll("[data-uid=" + selectedRow["" + rowuID] + "]")) : void 0;
      if (!isNullOrUndefined(selectedRow) && selectRowEle.length) {
        selectedRow.changes = rowData;
        if (this.frozenRows) {
          var fRowTr = this.getRowsObject()[selectedRow.index];
          this.setFrozenRowData(fRowTr, rowData);
        } else {
          this.setFrozenRowData(selectedRow, rowData);
        }
        if (this.aggregates.length > 0) {
          this.notify(refreshFooterRenderer, {});
          if (this.groupSettings.columns.length > 0) {
            this.notify(groupAggregates, {});
          }
        }
      } else {
        return;
      }
    };
    Grid2.prototype.setFrozenRowData = function(fTr, rowData) {
      var rowRenderer = new RowRenderer(this.serviceLocator, null, this);
      fTr.changes = rowData;
      refreshForeignData(fTr, this.getForeignKeyColumns(), fTr.changes);
      rowRenderer.refresh(fTr, this.getColumns(), true);
    };
    Grid2.prototype.getCellFromIndex = function(rowIndex, columnIndex) {
      var col = this.getColumnByIndex(columnIndex);
      return getCellByColAndRowIndex(this, col, rowIndex, columnIndex);
    };
    Grid2.prototype.getMovableCellFromIndex = function(rowIndex, columnIndex) {
      return this.getCellFromIndex(rowIndex, columnIndex);
    };
    Grid2.prototype.getFrozenRightCellFromIndex = function(rowIndex, columnIndex) {
      return this.getCellFromIndex(rowIndex, columnIndex);
    };
    Grid2.prototype.getColumnHeaderByIndex = function(index) {
      return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(index.toString(), 10)];
    };
    Grid2.prototype.getMovableColumnHeaderByIndex = function(index) {
      return this.getColumnHeaderByIndex(index);
    };
    Grid2.prototype.getFrozenRightColumnHeaderByIndex = function(index) {
      return this.getColumnHeaderByIndex(index);
    };
    Grid2.prototype.getFrozenLeftColumnHeaderByIndex = function(index) {
      return this.getColumnHeaderByIndex(index);
    };
    Grid2.prototype.getRowObjectFromUID = function(uid2) {
      var rows = this.contentModule.getRows();
      var row2 = this.rowObject(rows, uid2);
      if (isNullOrUndefined(row2) && this.enableVirtualization && this.groupSettings.columns.length > 0) {
        row2 = this.rowObject(this.vRows, uid2);
        return row2;
      }
      return row2;
    };
    Grid2.prototype.rowObject = function(rows, uid2) {
      if (rows) {
        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {
          var row2 = rows_1[_i];
          if (row2.uid === uid2) {
            return row2;
          }
        }
      }
      return null;
    };
    Grid2.prototype.getRowsObject = function() {
      return this.contentModule.getRows();
    };
    Grid2.prototype.getMovableRowsObject = function() {
      return this.contentModule.getRows();
    };
    Grid2.prototype.getFrozenRightRowsObject = function() {
      return this.contentModule.getRows();
    };
    Grid2.prototype.getColumnHeaderByField = function(field) {
      var column = this.getColumnByField(field);
      return column ? this.getColumnHeaderByUid(column.uid) : void 0;
    };
    Grid2.prototype.getColumnHeaderByUid = function(uid2) {
      var element2 = this.getHeaderContent().querySelector("[e-mappinguid=" + uid2 + "]");
      return element2 ? element2.parentElement : void 0;
    };
    Grid2.prototype.getColumnByIndex = function(index) {
      var column;
      this.getColumns().some(function(col, i) {
        column = col;
        return i === index;
      });
      return column;
    };
    Grid2.prototype.getColumnByField = function(field) {
      return iterateArrayOrObject(this.getColumns(), function(item) {
        if (item.field === field) {
          return item;
        }
        return void 0;
      })[0];
    };
    Grid2.prototype.getColumnIndexByField = function(field) {
      var cols = this.getColumns();
      for (var i = 0; i < cols.length; i++) {
        if (cols[parseInt(i.toString(), 10)].field === field) {
          return i;
        }
      }
      return -1;
    };
    Grid2.prototype.getColumnByUid = function(uid2, isColumns) {
      var cols = isColumns ? this.columns : this.getColumns();
      return iterateArrayOrObject(cols.concat(this.getStackedColumns(this.columns)), function(item) {
        if (item.uid === uid2) {
          return item;
        }
        return void 0;
      })[0];
    };
    Grid2.prototype.getStackedColumns = function(columns, stackedColumn) {
      if (stackedColumn === void 0) {
        stackedColumn = [];
      }
      for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {
        var column = columns_1[_i];
        if (column.columns) {
          stackedColumn.push(column);
          this.getStackedColumns(column.columns, stackedColumn);
        }
      }
      return stackedColumn;
    };
    Grid2.prototype.getColumnIndexByUid = function(uid2) {
      var index = iterateArrayOrObject(this.getColumns(), function(item, index2) {
        if (item.uid === uid2) {
          return index2;
        }
        return void 0;
      })[0];
      return !isNullOrUndefined(index) ? index : -1;
    };
    Grid2.prototype.getUidByColumnField = function(field) {
      return iterateArrayOrObject(this.getColumns(), function(item) {
        if (item.field === field) {
          return item.uid;
        }
        return void 0;
      })[0];
    };
    Grid2.prototype.getNormalizedColumnIndex = function(uid2) {
      var index = this.getColumnIndexByUid(uid2);
      return index + this.getIndentCount();
    };
    Grid2.prototype.getIndentCount = function() {
      var index = 0;
      if (this.allowGrouping) {
        index += this.groupSettings.columns.length;
      }
      if (this.isDetail()) {
        index++;
      }
      if (this.isRowDragable() && isNullOrUndefined(this.rowDropSettings.targetID)) {
        index++;
      }
      return index;
    };
    Grid2.prototype.getColumnFieldNames = function() {
      var columnNames = [];
      var column;
      for (var i = 0, len = this.getColumns().length; i < len; i++) {
        column = this.getColumns()[parseInt(i.toString(), 10)];
        if (column.visible) {
          columnNames.push(column.field);
        }
      }
      return columnNames;
    };
    Grid2.prototype.getRowTemplate = function() {
      return this.rowTemplateFn;
    };
    Grid2.prototype.getEmptyRecordTemplate = function() {
      return this.emptyRecordTemplateFn;
    };
    Grid2.prototype.getDetailTemplate = function() {
      return this.detailTemplateFn;
    };
    Grid2.prototype.getEditTemplate = function() {
      return this.editTemplateFn;
    };
    Grid2.prototype.getEditHeaderTemplate = function() {
      return this.editHeaderTemplateFn;
    };
    Grid2.prototype.getEditFooterTemplate = function() {
      return this.editFooterTemplateFn;
    };
    Grid2.prototype.getColumnChooserTemplate = function() {
      return this.columnChooserTemplateFn;
    };
    Grid2.prototype.getColumnChooserHeaderTemplate = function() {
      return this.columnChooserHeaderTemplateFn;
    };
    Grid2.prototype.getColumnChooserFooterTemplate = function() {
      return this.columnChooserFooterTemplateFn;
    };
    Grid2.prototype.getPrimaryKeyFieldNames = function() {
      var keys2 = [];
      for (var k = 0; k < this.columnModel.length; k++) {
        if (this.columnModel[parseInt(k.toString(), 10)].isPrimaryKey) {
          keys2.push(this.columnModel[parseInt(k.toString(), 10)].field);
        }
      }
      return keys2;
    };
    Grid2.prototype.refresh = function() {
      if (!this.isDestroyed) {
        this.isManualRefresh = true;
        this.headerModule.refreshUI();
        this.updateStackedFilter();
        this.renderModule.refresh();
      }
    };
    Grid2.prototype.refreshHeader = function() {
      this.headerModule.refreshUI();
    };
    Grid2.prototype.getSelectedRows = function() {
      return this.selectionModule ? this.selectionModule.selectedRecords : [];
    };
    Grid2.prototype.getSelectedRowIndexes = function() {
      return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];
    };
    Grid2.prototype.getSelectedRowCellIndexes = function() {
      return this.selectionModule ? this.selectionModule.selectedRowCellIndexes : [];
    };
    Grid2.prototype.getSelectedRecords = function() {
      return this.selectionModule ? this.selectionModule.getSelectedRecords() : [];
    };
    Grid2.prototype.getSelectedColumnsUid = function() {
      var _this_1 = this;
      var uid2 = [];
      if (this.selectionModule) {
        this.selectionModule.selectedColumnsIndexes.filter(function(i) {
          return uid2.push(_this_1.getColumns()[parseInt(i.toString(), 10)].uid);
        });
      }
      return uid2;
    };
    Grid2.prototype.getDataModule = function() {
      return this.renderModule.data;
    };
    Grid2.prototype.showColumns = function(keys2, showBy) {
      showBy = showBy ? showBy : "headerText";
      this.showHider.show(keys2, showBy);
    };
    Grid2.prototype.hideColumns = function(keys2, hideBy) {
      hideBy = hideBy ? hideBy : "headerText";
      this.showHider.hide(keys2, hideBy);
    };
    Grid2.prototype.getFrozenColumns = function() {
      return this.frozenColumns + this.getFrozenCount(this.columns, 0, 0);
    };
    Grid2.prototype.getFrozenRightColumnsCount = function() {
      return this.frozenRightCount || this.rightcount;
    };
    Grid2.prototype.getFrozenLeftColumnsCount = function() {
      return this.frozenLeftCount || this.leftcount;
    };
    Grid2.prototype.getMovableColumnsCount = function() {
      return this.movableCount || this.movablecount;
    };
    Grid2.prototype.updateFrozenColumnsWidth = function() {
      if (this.isFrozenGrid() && !this.enableColumnVirtualization) {
        var gcol = this.getColumns();
        var isAutoWidth = true;
        var autoCol_1 = 0;
        var difference_1 = 0;
        var autoWidth_1 = 0;
        var isFrozenAuto = gcol.some(function(data) {
          return (data.freeze === "Left" || data.freeze === "Right" || data.freeze === "Fixed" || data.isFrozen) && data.width === "auto";
        });
        var _loop_2 = function(i2) {
          var col = gcol[parseInt(i2.toString(), 10)];
          if (isNullOrUndefined(col.width) && (col.freeze === "Left" || col.freeze === "Right" || col.freeze === "Fixed" || col.isFrozen)) {
            col.width = Math.max(200, col.minWidth ? parseFloat(col.minWidth.toString()) : 0);
            if (!isNullOrUndefined(col.maxWidth) && parseFloat(col.maxWidth.toString()) < col.width) {
              col.width = col.maxWidth;
            }
          }
          if (col.width === "auto" && isFrozenAuto) {
            var tWidth_1 = 0;
            if (isAutoWidth) {
              gcol.filter(function(cols) {
                if (cols.visible) {
                  if (cols.width === "auto") {
                    autoCol_1++;
                  }
                  if (cols.width !== "auto") {
                    var width = !isNullOrUndefined(cols.width) ? parseFloat(cols.width.toString()) : Math.max(200, cols.minWidth ? parseFloat(cols.minWidth.toString()) : 0);
                    tWidth_1 += width;
                  }
                }
              });
              var gWidth = this_2.isPercentageWidthGrid() || this_2.width === "auto" ? this_2.element.getBoundingClientRect().width : parseFloat(this_2.width.toString());
              difference_1 = this_2.height === "auto" ? gWidth - tWidth_1 : gWidth - tWidth_1 - getScrollBarWidth();
              if (difference_1 < 0) {
                difference_1 = 0;
              }
              autoWidth_1 = parseFloat((difference_1 / autoCol_1).toString());
              gcol.filter(function(col2) {
                if (col2.visible) {
                  if (col2.minWidth && parseFloat(col2.minWidth.toString()) > autoWidth_1) {
                    difference_1 = difference_1 - parseFloat(col2.minWidth.toString());
                    autoCol_1--;
                  }
                }
              });
              isAutoWidth = false;
            }
            if (col.minWidth && parseFloat(col.minWidth.toString()) > autoWidth_1) {
              col.width = parseFloat(col.minWidth.toString());
            } else {
              col.width = difference_1 / autoCol_1;
            }
          }
        };
        var this_2 = this;
        for (var i = 0; i < gcol.length; i++) {
          _loop_2(i);
        }
      }
    };
    Grid2.prototype.refreshSplitFrozenColumn = function() {
      this.splitFrozenCount(this.columns);
      this.updateFrozenColumnsWidth();
      this.isAutoGenerateColumns = true;
    };
    Grid2.prototype.setFrozenCount = function() {
      this.frozenLeftCount = this.frozenRightCount = this.movableCount = 0;
      this.visibleFrozenLeft = this.visibleFrozenRight = this.visibleMovable = 0;
      this.frozenLeftColumns = [];
      this.frozenRightColumns = [];
      this.movableColumns = [];
      this.fixedColumns = [];
      this.splitFrozenCount(this.columns);
      this.leftcount = this.frozenLeftCount;
      this.rightcount = this.frozenRightCount;
      this.movablecount = this.movableCount;
      if (this.frozenLeftCount && !this.frozenRightCount) {
        this.frozenName = "Left";
      } else if (this.frozenRightCount && !this.frozenLeftCount) {
        this.frozenName = "Right";
      } else if (this.frozenLeftCount && this.frozenRightCount) {
        this.frozenName = "Left-Right";
      } else if (this.frozenColumns || this.frozenRows) {
        this.frozenName = "Left";
      } else {
        this.frozenName = void 0;
      }
    };
    Grid2.prototype.getVisibleFrozenLeftCount = function() {
      return this.visibleFrozenLeft;
    };
    Grid2.prototype.getVisibleFrozenRightCount = function() {
      return this.visibleFrozenRight;
    };
    Grid2.prototype.getVisibleMovableCount = function() {
      return this.visibleMovable;
    };
    Grid2.prototype.getFrozenRightColumns = function() {
      return this.frozenRightColumns;
    };
    Grid2.prototype.getFrozenLeftColumns = function() {
      return this.frozenLeftColumns;
    };
    Grid2.prototype.getMovableColumns = function() {
      return this.movableColumns;
    };
    Grid2.prototype.splitStackedColumns = function(columns) {
      for (var i = 0; i < columns.length; i++) {
        if (columns[parseInt(i.toString(), 10)].columns) {
          this.splitStackedColumns(columns[parseInt(i.toString(), 10)].columns);
        } else {
          if (columns[parseInt(i.toString(), 10)].freeze === "Left" || columns[parseInt(i.toString(), 10)].isFrozen) {
            if (columns[parseInt(i.toString(), 10)].visible !== false) {
              this.visibleFrozenLeft++;
            }
            this.leftcount++;
          } else if (columns[parseInt(i.toString(), 10)].freeze === "Right") {
            if (columns[parseInt(i.toString(), 10)].visible !== false) {
              this.visibleFrozenRight++;
            }
            this.rightcount++;
          } else if (columns[parseInt(i.toString(), 10)].freeze === "Fixed") {
            if (columns[parseInt(i.toString(), 10)].visible !== false) {
              this.visibleFrozenFixed++;
            }
            this.fixedcount++;
          } else {
            if (columns[parseInt(i.toString(), 10)].visible !== false) {
              this.visibleMovable++;
            }
            this.movablecount++;
          }
        }
      }
    };
    Grid2.prototype.pushStackedColumns = function(columns, index, arr, col, stackedcol) {
      arr[parseInt(index.toString(), 10)] = { headerText: col.headerText };
      if (col.textAlign) {
        arr[parseInt(index.toString(), 10)].textAlign = col.textAlign;
      }
      if (col.customAttributes) {
        arr[parseInt(index.toString(), 10)].customAttributes = col.customAttributes;
      }
      for (var i = 0; i < columns.length; i++) {
        if (columns[parseInt(i.toString(), 10)].columns) {
          index = index + 1;
          this.pushStackedColumns(columns[parseInt(i.toString(), 10)].columns, index, arr, columns[parseInt(i.toString(), 10)], stackedcol);
          index = index - 1;
        } else {
          var stockCol = [];
          stockCol = arr.slice().slice(0, index + 1);
          if (columns[parseInt(i.toString(), 10)].freeze === "Left" || columns[parseInt(i.toString(), 10)].isFrozen) {
            this.stackedLeft.push(stockCol);
            this.stackedarrayLeft.push(columns[parseInt(i.toString(), 10)]);
          } else if (columns[parseInt(i.toString(), 10)].freeze === "Right") {
            this.stackedRight.push(stockCol);
            this.stackedarrayRight.push(columns[parseInt(i.toString(), 10)]);
          } else if (columns[parseInt(i.toString(), 10)].freeze === "Fixed") {
            this.stackedFixed.push(stockCol);
            this.stackedarrayFixed.push(columns[parseInt(i.toString(), 10)]);
          } else {
            this.stackedMovable.push(stockCol);
            this.stackedarrayMovable.push(columns[parseInt(i.toString(), 10)]);
          }
        }
      }
    };
    Grid2.prototype.pushallcol = function(text, text1, col, columns, isTrue) {
      if (col.headerText === text1.headerText) {
        if (isTrue) {
          col.columns.push(columns);
        } else {
          var newColumn = { headerText: text.headerText, columns: [] };
          if (text.textAlign) {
            newColumn.textAlign = text.textAlign;
          }
          if (text.customAttributes) {
            newColumn.customAttributes = text.customAttributes;
          }
          col.columns.push(newColumn);
        }
      } else {
        if (col.columns && col.columns.length) {
          for (var i = 0; i < col.columns.length; i++) {
            this.pushallcol(text, text1, col.columns[parseInt(i.toString(), 10)], columns, isTrue);
          }
        }
      }
    };
    Grid2.prototype.resetStackedColumns = function(headercol, gridcolumns, freeze) {
      var col = {};
      var tempHead = [];
      for (var i = 1; i <= headercol.length; i++) {
        var firstcol = headercol[i - 1];
        for (var j = 0; j < firstcol.length; j++) {
          if (!col.columns && i === 1) {
            col = {
              headerText: firstcol[parseInt(j.toString(), 10)].headerText,
              textAlign: firstcol[parseInt(j.toString(), 10)].textAlign,
              customAttributes: firstcol[parseInt(j.toString(), 10)].customAttributes,
              columns: []
            };
            tempHead.push(firstcol[parseInt(j.toString(), 10)]);
          } else {
            if (tempHead.indexOf(firstcol[parseInt(j.toString(), 10)]) === -1) {
              this.pushallcol(firstcol[parseInt(j.toString(), 10)], firstcol[j - 1], col);
              tempHead.push(firstcol[parseInt(j.toString(), 10)]);
            }
          }
          if (j === firstcol.length - 1) {
            this.pushallcol(null, firstcol[parseInt(j.toString(), 10)], col, gridcolumns[i - 1], true);
            var count = 0;
            while (count !== headercol.length - 1 && i !== headercol.length) {
              var firstColHeaders = firstcol.map(function(col2) {
                return col2.headerText;
              }).join(", ");
              var headerColHeaders = headercol[parseInt(i.toString(), 10)].map(function(item) {
                return item.headerText;
              }).join(", ");
              if (firstColHeaders === headerColHeaders) {
                i++;
                this.pushallcol(null, firstcol[parseInt(j.toString(), 10)], col, gridcolumns[i - 1], true);
              }
              count++;
            }
          }
        }
      }
      if (freeze === "Left") {
        this.frozenLeftColumns.push(col);
      } else if (freeze === "Right") {
        this.frozenRightColumns.push(col);
      } else {
        this.movableColumns.push(col);
      }
    };
    Grid2.prototype.splitFrozenCount = function(columns) {
      if (this.frozenColumns || this.changedProperties && this.changedProperties.frozenColumns === 0) {
        var cols = !this.enableColumnVirtualization || this.enableColumnVirtualization && this.isPreparedFrozenColumns ? this.enableColumnVirtualization && this.columnModel && this.columnModel.length ? this.columnModel : this.getColumns() : this.columns;
        if (!this.changedProperties || this.changedProperties && !this.changedProperties.frozenColumns) {
          for (var i = 0; i < cols.length; i++) {
            if (this.frozenColumns > i) {
              cols[parseInt(i.toString(), 10)].freeze = "Left";
            } else if (cols[parseInt(i.toString(), 10)].freeze === "Right" || cols[parseInt(i.toString(), 10)].freeze === "Fixed") {
              cols[parseInt(i.toString(), 10)].freeze = cols[parseInt(i.toString(), 10)].freeze;
            } else {
              cols[parseInt(i.toString(), 10)].freeze = void 0;
            }
          }
        }
      }
      for (var i = 0; i < (!isNullOrUndefined(columns) ? columns.length : 0); i++) {
        if (columns[parseInt(i.toString(), 10)].columns) {
          this.leftcount = 0;
          this.rightcount = 0;
          this.movablecount = 0;
          this.fixedcount = 0;
          var arr = [];
          this.splitStackedColumns(columns[parseInt(i.toString(), 10)].columns);
          if (this.leftcount && !this.rightcount && !this.movablecount && !this.fixedcount) {
            this.frozenLeftCount += this.leftcount;
            this.frozenLeftColumns.push(columns[parseInt(i.toString(), 10)]);
          } else if (this.rightcount && !this.leftcount && !this.movablecount && !this.fixedcount) {
            this.frozenRightCount += this.rightcount;
            this.frozenRightColumns.push(columns[parseInt(i.toString(), 10)]);
          } else if (this.movablecount && !this.leftcount && !this.rightcount && !this.fixedcount) {
            this.movableCount += this.movablecount;
            this.movableColumns.push(columns[parseInt(i.toString(), 10)]);
          } else if (this.fixedcount && !this.leftcount && !this.rightcount && !this.movablecount) {
            this.fixedCount += this.fixedcount;
            this.fixedColumns.push(columns[parseInt(i.toString(), 10)]);
            this.movableCount += this.movablecount;
            this.movableColumns.push(columns[parseInt(i.toString(), 10)]);
          } else {
            this.frozenLeftCount += this.leftcount;
            this.frozenRightCount += this.rightcount;
            this.movableCount += this.movablecount;
            this.fixedCount += this.fixedcount;
            this.leftcount = 0;
            this.rightcount = 0;
            this.movablecount = 0;
            this.fixedcount = 0;
            this.stackedLeft = [];
            this.stackedRight = [];
            this.stackedFixed = [];
            this.stackedMovable = [];
            this.stackedarrayLeft = [];
            this.stackedarrayRight = [];
            this.stackedarrayFixed = [];
            this.stackedarrayMovable = [];
            this.pushStackedColumns(columns[parseInt(i.toString(), 10)].columns, 0, arr, columns[parseInt(i.toString(), 10)], {
              headerText: columns[parseInt(i.toString(), 10)].headerText,
              textAlign: columns[parseInt(i.toString(), 10)].textAlign,
              customAttributes: columns[parseInt(i.toString(), 10)].customAttributes,
              columns: []
            });
            if (this.stackedarrayLeft.length) {
              this.resetStackedColumns(this.stackedLeft, this.stackedarrayLeft, "Left");
            }
            if (this.stackedarrayRight.length) {
              this.resetStackedColumns(this.stackedRight, this.stackedarrayRight, "Right");
            }
            if (this.stackedarrayFixed.length) {
              this.resetStackedColumns(this.stackedFixed, this.stackedarrayFixed, "Fixed");
            }
            if (this.stackedarrayMovable.length) {
              this.resetStackedColumns(this.stackedMovable, this.stackedarrayMovable, "Movable");
            }
            this.stackedLeft = [];
            this.stackedRight = [];
            this.stackedMovable = [];
            this.stackedFixed = [];
            this.stackedarrayLeft = [];
            this.stackedarrayRight = [];
            this.stackedarrayMovable = [];
            this.stackedarrayFixed = [];
          }
        } else {
          if (columns[parseInt(i.toString(), 10)].freeze === "Right") {
            if (columns[parseInt(i.toString(), 10)].visible !== false) {
              this.visibleFrozenRight++;
            }
            this.frozenRightColumns.push(columns[parseInt(i.toString(), 10)]);
            this.frozenRightCount++;
          } else if (columns[parseInt(i.toString(), 10)].freeze === "Left" || columns[parseInt(i.toString(), 10)].isFrozen) {
            if (columns[parseInt(i.toString(), 10)].visible !== false) {
              this.visibleFrozenLeft++;
            }
            this.frozenLeftColumns.push(columns[parseInt(i.toString(), 10)]);
            this.frozenLeftCount++;
          } else if (columns[parseInt(i.toString(), 10)].freeze === "Fixed") {
            this.fixedColumns.push(columns[parseInt(i.toString(), 10)]);
            this.fixedCount++;
            this.movableColumns.push(columns[parseInt(i.toString(), 10)]);
            this.movableCount++;
          } else {
            if (columns[parseInt(i.toString(), 10)].visible !== false) {
              this.visibleMovable++;
            }
            this.movableColumns.push(columns[parseInt(i.toString(), 10)]);
            this.movableCount++;
          }
        }
      }
      if (this.frozenLeftColumns.length) {
        var cols = this.frozenLeftColumns[this.frozenLeftColumns.length - 1];
        this.removeBorder(this.frozenLeftColumns);
        this.frozenLeftBorderColumns(cols instanceof Column ? this.lastVisibleLeftCol(this.frozenLeftColumns) : cols);
      }
      if (this.frozenRightColumns.length) {
        var cols = this.frozenRightColumns[0];
        this.removeBorder(this.frozenRightColumns);
        this.frozenRightBorderColumns(cols instanceof Column ? this.firstVisibleRightCol(this.frozenRightColumns) : cols);
      }
      if ((this.frozenLeftColumns.length || this.frozenRightColumns.length) && this.freezeColumnRefresh) {
        var cols = this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns);
        this.setProperties({ columns: cols }, true);
        this.freezeColumnRefresh = false;
      }
    };
    Grid2.prototype.removeBorder = function(columns) {
      for (var i = 0; i < columns.length; i++) {
        if (columns[parseInt(i.toString(), 10)].columns && columns[parseInt(i.toString(), 10)].columns.length) {
          if (columns[parseInt(i.toString(), 10)].border === "Right" || columns[parseInt(i.toString(), 10)].border === "Left") {
            columns[parseInt(i.toString(), 10)].border = void 0;
          }
          this.removeBorder(columns[parseInt(i.toString(), 10)].columns);
        } else {
          if (columns[parseInt(i.toString(), 10)].border === "Right" || columns[parseInt(i.toString(), 10)].border === "Left") {
            columns[parseInt(i.toString(), 10)].border = void 0;
          }
        }
      }
    };
    Grid2.prototype.isVisibleColumns = function(column, arr) {
      if (column.columns && column.columns.length) {
        for (var i = 0; i < column.columns.length; i++) {
          this.isVisibleColumns(column.columns[parseInt(i.toString(), 10)], arr);
          if (column.columns[parseInt(i.toString(), 10)].visible && isNullOrUndefined(column.columns[parseInt(i.toString(), 10)].columns) && (!isNullOrUndefined(column.columns[parseInt(i.toString(), 10)].freeze) || column.columns[parseInt(i.toString(), 10)].isFrozen)) {
            arr.push("true");
          }
        }
      } else {
        if (column.visible && (!isNullOrUndefined(column.freeze) || column.isFrozen)) {
          arr.push("true");
        }
      }
    };
    Grid2.prototype.lastVisibleLeftCol = function(columns) {
      var column;
      for (var i = columns.length - 1; i >= 0; i--) {
        var arr = [];
        this.isVisibleColumns(columns[parseInt(i.toString(), 10)], arr);
        if (columns[parseInt(i.toString(), 10)].visible && arr.indexOf("true") !== -1) {
          column = columns[parseInt(i.toString(), 10)];
          break;
        }
      }
      return column;
    };
    Grid2.prototype.firstVisibleRightCol = function(columns) {
      var column;
      for (var i = 0; i < columns.length; i++) {
        var arr = [];
        this.isVisibleColumns(columns[parseInt(i.toString(), 10)], arr);
        if (columns[parseInt(i.toString(), 10)].visible && arr.indexOf("true") !== -1) {
          column = columns[parseInt(i.toString(), 10)];
          break;
        }
      }
      return column;
    };
    Grid2.prototype.frozenLeftBorderColumns = function(columns) {
      if (isNullOrUndefined(columns)) {
        return;
      }
      if (columns.columns && columns.columns.length) {
        columns.border = "Left";
        var cols = columns.columns[columns.columns.length - 1];
        this.frozenLeftBorderColumns(cols instanceof Column && cols.columns ? this.lastVisibleLeftCol(columns.columns) : cols);
      } else {
        columns.border = "Left";
      }
    };
    Grid2.prototype.frozenRightBorderColumns = function(columns) {
      if (isNullOrUndefined(columns)) {
        return;
      }
      if (columns.columns && columns.columns.length) {
        columns.border = "Right";
        var cols = columns.columns[0];
        this.frozenRightBorderColumns(cols instanceof Column && cols.columns ? this.firstVisibleRightCol(columns.columns) : cols);
      } else {
        columns.border = "Right";
      }
    };
    Grid2.prototype.getVisibleFrozenColumns = function() {
      return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);
    };
    Grid2.prototype.getFilterUIInfo = function() {
      return this.filterModule ? this.filterModule.getFilterUIInfo() : {};
    };
    Grid2.prototype.getVisibleFrozenColumnsCount = function() {
      var visibleFrozenColumns = 0;
      var columns = this.columnModel;
      for (var i = 0; i < this.frozenColumns; i++) {
        if (columns[parseInt(i.toString(), 10)].visible) {
          visibleFrozenColumns++;
        }
      }
      if (this.frozenLeftCount || this.leftcount || (this.frozenRightCount || this.rightcount)) {
        for (var i = 0; i < columns.length; i++) {
          if (columns[parseInt(i.toString(), 10)].visible && (columns[parseInt(i.toString(), 10)].freeze === "Left" || columns[parseInt(i.toString(), 10)].freeze === "Right")) {
            visibleFrozenColumns++;
          }
        }
      }
      return visibleFrozenColumns;
    };
    Grid2.prototype.getVisibleFrozenCount = function(cols, cnt) {
      if (!this.frozenLeftCount && !this.leftcount && (!this.frozenRightCount || !this.rightcount)) {
        for (var i = 0, len = cols.length; i < len; i++) {
          if (cols[parseInt(i.toString(), 10)].columns) {
            cnt = this.getVisibleFrozenCount(cols[parseInt(i.toString(), 10)].columns, cnt);
          } else {
            if (cols[parseInt(i.toString(), 10)].isFrozen && cols[parseInt(i.toString(), 10)].visible) {
              cnt++;
            }
          }
        }
      }
      return cnt;
    };
    Grid2.prototype.getFrozenCount = function(cols, cnt, index) {
      for (var i = 0, len = !isNullOrUndefined(cols) ? cols.length : 0; i < len; i++) {
        if (cols[parseInt(i.toString(), 10)].columns) {
          cnt = this.getFrozenCount(cols[parseInt(i.toString(), 10)].columns, cnt, index);
        } else {
          if (cols[parseInt(i.toString(), 10)].isFrozen && index > this.frozenColumns - 1) {
            cnt++;
          }
          index++;
        }
      }
      return cnt;
    };
    Grid2.prototype.goToPage = function(pageNo) {
      if (this.pagerModule) {
        this.pagerModule.goToPage(pageNo);
      }
    };
    Grid2.prototype.updateExternalMessage = function(message) {
      if (this.pagerModule && !this.pagerTemplate) {
        this.pagerModule.updateExternalMessage(message);
      }
    };
    Grid2.prototype.sortColumn = function(columnName, direction, isMultiSort) {
      if (this.sortModule) {
        this.sortModule.sortColumn(columnName, direction, isMultiSort);
      }
    };
    Grid2.prototype.changeDataSource = function(dataSource, columns) {
      this.isChangeDataSourceCall = true;
      this.setProperties({ sortSettings: { columns: [] } }, true);
      this.setProperties({ filterSettings: { columns: [] } }, true);
      this.setProperties({ searchSettings: { key: "" } }, true);
      if (this.allowGrouping) {
        this.setProperties({ groupSettings: { columns: [] } }, true);
      }
      if (columns && columns.length) {
        this.setProperties({ columns }, true);
      }
      if (dataSource) {
        if (isNullOrUndefined(columns)) {
          this.setProperties({ columns: [] }, true);
        }
        this.setProperties({ dataSource }, true);
      }
      this.freezeRefresh();
      this.isChangeDataSourceCall = false;
    };
    Grid2.prototype.clearSorting = function() {
      if (this.sortModule) {
        this.sortModule.clearSorting();
      }
    };
    Grid2.prototype.removeSortColumn = function(field) {
      if (this.sortModule) {
        this.sortModule.removeSortColumn(field);
      }
    };
    Grid2.prototype.clearGridActions = function() {
      this.setProperties({ sortSettings: { columns: [] } }, true);
      this.setProperties({ filterSettings: { columns: [] } }, true);
      this.setProperties({ searchSettings: { key: "" } }, true);
      if (this.allowGrouping) {
        this.setProperties({ groupSettings: { columns: [] } }, false);
      } else {
        this.freezeRefresh();
      }
    };
    Grid2.prototype.filterByColumn = function(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {
      if (this.filterModule) {
        this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);
      }
    };
    Grid2.prototype.clearFiltering = function(fields) {
      if (this.filterModule) {
        this.filterModule.clearFiltering(fields);
      }
    };
    Grid2.prototype.removeFilteredColsByField = function(field, isClearFilterBar) {
      if (this.filterModule) {
        this.filterModule.removeFilteredColsByField(field, isClearFilterBar);
      }
    };
    Grid2.prototype.selectRow = function(index, isToggle) {
      if (this.selectionModule) {
        this.selectionModule.selectRow(index, isToggle);
      }
    };
    Grid2.prototype.selectRows = function(rowIndexes) {
      if (this.selectionModule) {
        this.selectionModule.selectRows(rowIndexes);
      }
    };
    Grid2.prototype.clearSelection = function() {
      if (this.selectionModule) {
        this.selectionModule.clearSelection();
      }
    };
    Grid2.prototype.selectCell = function(cellIndex, isToggle) {
      if (this.selectionModule) {
        this.selectionModule.selectCell(cellIndex, isToggle);
      }
    };
    Grid2.prototype.selectCellsByRange = function(startIndex, endIndex) {
      this.selectionModule.selectCellsByRange(startIndex, endIndex);
    };
    Grid2.prototype.search = function(searchString) {
      if (this.searchModule) {
        this.searchModule.search(searchString);
      }
    };
    Grid2.prototype.print = function() {
      if (this.printModule) {
        this.printModule.print();
      }
    };
    Grid2.prototype.deleteRecord = function(fieldname, data) {
      if (this.editModule) {
        this.editModule.deleteRecord(fieldname, data);
      }
    };
    Grid2.prototype.startEdit = function() {
      if (this.editModule) {
        this.editModule.startEdit();
      }
    };
    Grid2.prototype.endEdit = function() {
      if (this.editModule) {
        this.editModule.endEdit();
      }
    };
    Grid2.prototype.closeEdit = function() {
      if (this.editModule) {
        this.editModule.closeEdit();
      }
    };
    Grid2.prototype.addRecord = function(data, index) {
      if (this.editModule) {
        this.editModule.addRecord(data, index);
      }
    };
    Grid2.prototype.deleteRow = function(tr) {
      if (this.editModule) {
        this.editModule.deleteRow(tr);
      }
    };
    Grid2.prototype.editCell = function(index, field) {
      if (this.editModule) {
        this.editModule.editCell(index, field);
      }
    };
    Grid2.prototype.saveCell = function() {
      if (this.editModule) {
        this.editModule.saveCell();
      }
    };
    Grid2.prototype.updateCell = function(rowIndex, field, value) {
      if (this.editModule) {
        this.editModule.updateCell(rowIndex, field, value);
      }
    };
    Grid2.prototype.updateRow = function(index, data) {
      if (this.editModule) {
        this.editModule.updateRow(index, data);
      }
    };
    Grid2.prototype.getBatchChanges = function() {
      if (this.editModule) {
        return this.editModule.getBatchChanges();
      }
      return {};
    };
    Grid2.prototype.enableToolbarItems = function(items, isEnable) {
      if (this.toolbarModule) {
        this.toolbarModule.enableItems(items, isEnable);
      }
    };
    Grid2.prototype.copy = function(withHeader) {
      if (this.clipboardModule) {
        this.clipboardModule.copy(withHeader);
      }
    };
    Grid2.prototype.recalcIndentWidth = function() {
      var _this_1 = this;
      if (!this.getHeaderTable().querySelector(".e-emptycell")) {
        return;
      }
      if (!this.groupSettings.columns.length && !this.isDetail() && !this.isRowDragable() || this.getHeaderTable().querySelector(".e-emptycell.e-indentRefreshed") || !this.getContentTable()) {
        return;
      }
      var indentWidth = this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth;
      var headerCol = [].slice.call(this.getHeaderTable().querySelector(colGroup).childNodes);
      var contentCol = [].slice.call(this.getContentTable().querySelector(colGroup).childNodes);
      var perPixel = indentWidth / 30;
      var i = this.getFrozenMode() === "Right" ? this.groupSettings.columns.length + this.getColumns().length : 0;
      var parentOffset = this.element.offsetWidth;
      var applyWidth = function(index, width) {
        if (ispercentageWidth(_this_1)) {
          var newWidth = (width / parentOffset * 100).toFixed(1) + "%";
          headerCol[parseInt(index.toString(), 10)].style.width = newWidth;
          contentCol[parseInt(index.toString(), 10)].style.width = newWidth;
        } else {
          headerCol[parseInt(index.toString(), 10)].style.width = width + "px";
          contentCol[parseInt(index.toString(), 10)].style.width = width + "px";
        }
        _this_1.notify(columnWidthChanged, { index, width });
      };
      if (perPixel >= 1) {
        indentWidth = 30 / perPixel;
      }
      if (indentWidth < 1) {
        indentWidth = 1;
      }
      if (this.enableColumnVirtualization || this.isAutoGen || this.columns.length === this.groupSettings.columns.length) {
        indentWidth = 30;
      }
      while (i < this.groupSettings.columns.length) {
        applyWidth(i, indentWidth);
        i++;
      }
      if (this.isDetail()) {
        applyWidth(i, indentWidth);
        i++;
      }
      if (this.isRowDragable()) {
        applyWidth(i, indentWidth);
      }
      this.isAutoGen = false;
      this.getHeaderTable().querySelector(".e-emptycell").classList.add("e-indentRefreshed");
    };
    Grid2.prototype.resetIndentWidth = function() {
      if (this.isDestroyed) {
        return;
      }
      if (ispercentageWidth(this)) {
        this.getHeaderTable().querySelector(".e-emptycell").classList.remove("e-indentRefreshed");
        this.widthService.setWidthToColumns();
        this.recalcIndentWidth();
        if (this.autoFit) {
          this.preventAdjustColumns();
        }
      }
      if ((this.width === "auto" || typeof this.width === "string" && this.width.indexOf("%") !== -1) && this.getColumns().filter(function(col) {
        return (!col.width || col.width === "auto") && col.minWidth;
      }).length > 0) {
        var tgridWidth = this.widthService.getTableWidth(this.getColumns(), true);
        this.widthService.setMinwidthBycalculation(tgridWidth);
      }
      if (this.isFrozenGrid() && this.enableColumnVirtualization && this.widthService) {
        this.widthService.refreshFrozenScrollbar();
      }
      if (this.allowTextWrap && this.textWrapSettings.wrapMode !== "Content") {
        this.notify(refreshHandlers, {});
      }
      if (this.frozenRows && this.scrollModule) {
        this.scrollModule.resizeFrozenRowBorder();
      }
      if (this.enableStickyHeader) {
        this.scrollModule.makeStickyHeader();
      }
      if (this.enableAutoFill && this.selectionSettings.type === "Multiple" && this.selectionSettings.mode === "Cell" && this.selectionModule.selectedRowCellIndexes.length) {
        this.selectionModule.updateAutoFillPosition();
        this.selectionModule.drawBorders();
      }
    };
    Grid2.prototype.isRowDragable = function() {
      return this.allowRowDragAndDrop && !this.rowDropSettings.targetID;
    };
    Grid2.prototype.reorderColumns = function(fromFName, toFName) {
      if (this.reorderModule) {
        this.reorderModule.reorderColumns(fromFName, toFName);
      }
    };
    Grid2.prototype.reorderColumnByIndex = function(fromIndex, toIndex) {
      if (this.reorderModule) {
        this.reorderModule.reorderColumnByIndex(fromIndex, toIndex);
      }
    };
    Grid2.prototype.reorderColumnByTargetIndex = function(fieldName, toIndex) {
      if (this.reorderModule) {
        this.reorderModule.reorderColumnByTargetIndex(fieldName, toIndex);
      }
    };
    Grid2.prototype.reorderRows = function(fromIndexes, toIndex) {
      if (this.rowDragAndDropModule) {
        this.rowDragAndDropModule.reorderRows(fromIndexes, toIndex);
      }
    };
    Grid2.prototype.refreshDataSource = function(e) {
      this.notify("refreshdataSource", e);
    };
    Grid2.prototype.disableRowDD = function(enable) {
      var headerTable = this.getHeaderTable();
      var contentTable = this.getContentTable();
      var headerRows = headerTable.querySelectorAll("th.e-rowdragheader, th.e-mastercell");
      var rows = this.getRows();
      var disValue = enable ? "none" : "";
      setStyleAttribute(headerTable.querySelector(colGroup).childNodes[0], { "display": disValue });
      setStyleAttribute(contentTable.querySelector(colGroup).childNodes[0], { "display": disValue });
      for (var i = 0; i < this.getRows().length; i++) {
        var ele = rows[parseInt(i.toString(), 10)].firstElementChild;
        if (enable) {
          addClass([ele], "e-hide");
        } else {
          removeClass([ele], ["e-hide"]);
        }
      }
      for (var j = 0; j < headerTable.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length; j++) {
        var ele = headerRows[parseInt(j.toString(), 10)];
        if (enable) {
          addClass([ele], "e-hide");
        } else {
          removeClass([ele], ["e-hide"]);
        }
      }
    };
    Grid2.prototype.autoFitColumns = function(fieldNames, startRowIndex, endRowIndex) {
      var injectedModules = this.getInjectedModules();
      var resize2 = injectedModules.find(function(item) {
        if (typeof item === "function" && !isNullOrUndefined(item.prototype)) {
          return item.prototype.getModuleName() === "resize";
        } else {
          return item.name === "Resize";
        }
      });
      if (!this.resizeModule && resize2) {
        this.autoFitColumnsResize = true;
        this.injectModules();
      }
      if (this.resizeModule) {
        this.resizeModule.autoFitColumns(fieldNames, startRowIndex, endRowIndex);
      }
    };
    Grid2.prototype.preventAdjustColumns = function() {
      if (this.enableAdaptiveUI && this.rowRenderingMode === "Vertical" || this.allowResizing && this.resizeSettings.mode === "Auto") {
        return;
      }
      var columns = this.getColumns();
      var headerTable = this.getHeaderTable();
      var tableWidth = 0;
      for (var i = 0; i < columns.length; i++) {
        if (columns[parseInt(i.toString(), 10)].visible) {
          if (this.groupSettings.columns.length && this.groupSettings.columns.indexOf(columns[parseInt(i.toString(), 10)].field) > -1) {
            var headerCol = [].slice.call(headerTable.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"));
            if (headerCol[parseInt(i.toString(), 10)].style.display === "none") {
              continue;
            }
          }
          if (columns[parseInt(i.toString(), 10)].width) {
            tableWidth += parseFloat(columns[parseInt(i.toString(), 10)].width.toString());
          } else {
            tableWidth = 0;
            break;
          }
        }
      }
      if (tableWidth) {
        var percentageWidth = this.isPercentageWidthGrid();
        var unit = this.widthUnit(percentageWidth);
        var contentTable = this.getContentTable();
        if (this.groupSettings.columns.length || this.isDetail() || this.isRowDragable()) {
          var indentWidth = this.defaultIndentWidth(percentageWidth);
          var indentWidthUnitFormat = indentWidth.toString() + unit;
          var headerIndentCol = [].slice.call(headerTable.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));
          var contentIndentCol = [].slice.call(contentTable.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));
          for (var i = 0; i < headerIndentCol.length; i++) {
            headerIndentCol[parseInt(i.toString(), 10)].style.setProperty("width", indentWidthUnitFormat);
            contentIndentCol[parseInt(i.toString(), 10)].style.setProperty("width", indentWidthUnitFormat);
            tableWidth += indentWidth;
          }
        }
        if (percentageWidth && tableWidth < 100 || !percentageWidth && tableWidth < contentTable.parentElement.clientWidth) {
          if (!isNullOrUndefined(contentTable.querySelector(".e-emptyrow"))) {
            addClass([headerTable], ["e-tableborder"]);
            removeClass([contentTable], ["e-tableborder"]);
          } else {
            addClass([headerTable, contentTable], ["e-tableborder"]);
          }
        }
        var tableWidthUnitFormat = tableWidth.toString() + unit;
        headerTable.style.setProperty("width", tableWidthUnitFormat);
        contentTable.style.setProperty("width", tableWidthUnitFormat);
      } else {
        this.restoreAdjustColumns();
      }
    };
    Grid2.prototype.restoreAdjustColumns = function() {
      if (this.enableAdaptiveUI && this.rowRenderingMode === "Vertical" || this.allowResizing && this.resizeSettings.mode === "Auto") {
        return;
      }
      var headerTable = this.getHeaderTable();
      var contentTable = this.getContentTable();
      removeClass([headerTable, contentTable], ["e-tableborder"]);
      headerTable.style.removeProperty("width");
      contentTable.style.removeProperty("width");
      if (this.groupSettings.columns.length || this.isDetail() || this.isRowDragable()) {
        var percentageWidth = this.isPercentageWidthGrid();
        var indentWidthUnitFormat_1 = this.defaultIndentWidth(percentageWidth).toString() + this.widthUnit(percentageWidth);
        var headerIndentCol = [].slice.call(headerTable.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));
        headerIndentCol.forEach(function(element2) {
          element2.style.setProperty("width", indentWidthUnitFormat_1);
        });
        headerTable.querySelector(".e-emptycell").classList.remove("e-indentRefreshed");
        this.recalcIndentWidth();
      }
    };
    Grid2.prototype.widthUnit = function(percentageWidth) {
      return percentageWidth ? "%" : "px";
    };
    Grid2.prototype.defaultIndentWidth = function(percentageWidth) {
      return percentageWidth ? parseFloat((30 / this.element.offsetWidth * 100).toFixed(1)) : 30;
    };
    Grid2.prototype.isPercentageWidthGrid = function() {
      var column = this.getColumns().find(function(col) {
        return !isNullOrUndefined(col.width);
      });
      return column ? column.width.toString().indexOf("%") > -1 : false;
    };
    Grid2.prototype.createColumnchooser = function(x, y, target) {
      if (this.columnChooserModule) {
        this.columnChooserModule.renderColumnChooser(x, y, target);
      }
    };
    Grid2.prototype.initializeServices = function() {
      this.serviceLocator.register("widthService", this.widthService = new ColumnWidthService(this));
      this.serviceLocator.register("cellRendererFactory", new CellRendererFactory());
      this.serviceLocator.register("rendererFactory", new RendererFactory());
      this.serviceLocator.register("localization", this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));
      this.serviceLocator.register("valueFormatter", this.valueFormatterService = new ValueFormatter(this.locale));
      this.serviceLocator.register("showHideService", this.showHider = new ShowHide(this));
      this.serviceLocator.register("ariaService", this.ariaService = new AriaService());
      this.serviceLocator.register("focus", this.focusModule = new FocusStrategy(this));
    };
    Grid2.prototype.processModel = function() {
      var gCols = this.groupSettings.columns;
      var sCols = this.sortSettings.columns;
      var flag;
      var j;
      if (this.allowGrouping) {
        var _loop_3 = function(i2, len2) {
          flag = false;
          j = 0;
          for (var sLen = sCols.length; j < sLen; j++) {
            if (sCols[parseInt(j.toString(), 10)].field === gCols[parseInt(i2.toString(), 10)]) {
              flag = true;
              break;
            }
          }
          if (!flag) {
            sCols.push({ field: gCols[parseInt(i2.toString(), 10)], direction: "Ascending", isFromGroup: true });
          } else {
            if (this_3.allowSorting) {
              this_3.sortedColumns.push(sCols[parseInt(j.toString(), 10)].field);
            } else {
              sCols[parseInt(j.toString(), 10)].direction = "Ascending";
            }
          }
          if (!this_3.groupSettings.showGroupedColumn) {
            var column = this_3.enableColumnVirtualization ? this_3.columns.filter(function(c) {
              return c.field === gCols[parseInt(i2.toString(), 10)];
            })[0] : this_3.getColumnByField(gCols[parseInt(i2.toString(), 10)]);
            if (column) {
              column.visible = false;
            } else {
              this_3.log("initial_action", { moduleName: "group", columnName: gCols[parseInt(i2.toString(), 10)] });
            }
          }
        };
        var this_3 = this;
        for (var i = 0, len = gCols.length; i < len; i++) {
          _loop_3(i, len);
        }
      }
      if (!gCols.length) {
        for (var i = 0; i < sCols.length; i++) {
          this.sortedColumns.push(sCols[parseInt(i.toString(), 10)].field);
        }
      }
      this.rowTemplateFn = templateCompiler(this.rowTemplate);
      this.emptyRecordTemplateFn = templateCompiler(this.emptyRecordTemplate);
      this.detailTemplateFn = templateCompiler(this.detailTemplate);
      this.editTemplateFn = templateCompiler(this.editSettings.template);
      this.editHeaderTemplateFn = templateCompiler(this.editSettings.headerTemplate);
      this.editFooterTemplateFn = templateCompiler(this.editSettings.footerTemplate);
      this.columnChooserTemplateFn = templateCompiler(this.columnChooserSettings.template);
      this.columnChooserHeaderTemplateFn = templateCompiler(this.columnChooserSettings.headerTemplate);
      this.columnChooserFooterTemplateFn = templateCompiler(this.columnChooserSettings.footerTemplate);
      if (!isNullOrUndefined(this.parentDetails)) {
        var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? "undefined" : this.parentDetails.parentKeyFieldValue;
        this.query.where(this.queryString, "equal", value, true);
      }
      this.initForeignColumn();
    };
    Grid2.prototype.initForeignColumn = function() {
      if (this.isForeignKeyEnabled(this.getColumns())) {
        this.notify(initForeignKeyColumn, this.getForeignKeyColumns());
      }
    };
    Grid2.prototype.enableVerticalRendering = function() {
      if (this.rowRenderingMode === "Vertical") {
        this.element.classList.add("e-row-responsive");
      } else {
        this.element.classList.remove("e-row-responsive");
      }
    };
    Grid2.prototype.gridRender = function() {
      var _a;
      this.updateRTL();
      if (this.rowRenderingMode === "Vertical") {
        this.element.classList.add("e-row-responsive");
      }
      if (this.enableHover) {
        this.element.classList.add("e-gridhover");
      }
      if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent) || Browser.isSafari()) {
        this.element.classList.add("e-mac-safari");
      }
      if (Browser.isDevice) {
        this.element.classList.add("e-device");
        if (this.adaptiveUIMode === "Desktop") {
          this.enableAdaptiveUI = false;
        }
      }
      if (this.adaptiveUIMode === "Mobile" && !(Browser.isDevice || this.rowRenderingMode === "Vertical")) {
        this.enableAdaptiveUI = false;
      }
      if (this.rowHeight) {
        this.element.classList.add("e-grid-min-height");
      }
      if (this.cssClass) {
        if (this.cssClass.indexOf(" ") !== -1) {
          (_a = this.element.classList).add.apply(_a, this.cssClass.split(" "));
        } else {
          this.element.classList.add(this.cssClass);
        }
      }
      if (this.allowRowDragAndDrop && this.rowDropSettings.targetID && Browser.info.name === "mozilla") {
        this.element.classList.add("e-disableuserselect");
      }
      if (this.editSettings.showAddNewRow && (this.enableVirtualization || this.enableInfiniteScrolling)) {
        this.editSettings.newRowPosition = "Top";
      }
      classList(this.element, ["e-responsive", "e-default"], []);
      var rendererFactory = this.serviceLocator.getService("rendererFactory");
      this.headerModule = rendererFactory.getRenderer(RenderType.Header);
      this.contentModule = rendererFactory.getRenderer(RenderType.Content);
      this.printModule = new Print(this, this.scrollModule);
      this.clipboardModule = new Clipboard(this, this.serviceLocator);
      this.renderModule.render();
      this.eventInitializer();
      this.createGridPopUpElement();
      this.widthService.setWidthToColumns();
      this.updateGridLines();
      this.applyTextWrap();
      this.createTooltip();
      this.enableBoxSelection();
    };
    Grid2.prototype.dataReady = function() {
      this.scrollModule.setWidth();
      this.scrollModule.setHeight();
      if (this.height !== "auto") {
        this.scrollModule.setPadding();
      }
    };
    Grid2.prototype.updateRTL = function() {
      if (this.enableRtl) {
        this.element.classList.add("e-rtl");
      } else {
        this.element.classList.remove("e-rtl");
      }
    };
    Grid2.prototype.createGridPopUpElement = function() {
      var popup = this.createElement("div", { className: "e-gridpopup" });
      popup.style.display = "none";
      var content$1 = this.createElement("div", { className: content, attrs: { tabIndex: "-1" } });
      append([content$1, this.createElement("div", { className: "e-uptail e-tail" })], popup);
      content$1.appendChild(this.createElement("span"));
      append([content$1, this.createElement("div", { className: "e-downtail e-tail" })], popup);
      this.element.appendChild(popup);
    };
    Grid2.prototype.updateGridLines = function() {
      classList(this.element, [], ["e-verticallines", "e-horizontallines", "e-hidelines", "e-bothlines"]);
      switch (this.gridLines) {
        case "Horizontal":
          this.element.classList.add("e-horizontallines");
          break;
        case "Vertical":
          this.element.classList.add("e-verticallines");
          break;
        case "None":
          this.element.classList.add("e-hidelines");
          break;
        case "Both":
          this.element.classList.add("e-bothlines");
          break;
      }
      this.updateResizeLines();
    };
    Grid2.prototype.updateResizeLines = function() {
      if (this.allowResizing && !(this.gridLines === "Vertical" || this.gridLines === "Both")) {
        this.element.classList.add("e-resize-lines");
      } else {
        this.element.classList.remove("e-resize-lines");
      }
    };
    Grid2.prototype.applyTextWrap = function() {
      if (this.allowTextWrap) {
        var headerRows = [].slice.call(this.element.getElementsByClassName("e-columnheader"));
        switch (this.textWrapSettings.wrapMode) {
          case "Header":
            wrap(this.element, false);
            wrap(this.getContent(), false);
            wrap(headerRows, true);
            break;
          case "Content":
            wrap(this.getContent(), true);
            wrap(this.element, false);
            wrap(headerRows, false);
            break;
          default:
            wrap(this.element, true);
            wrap(this.getContent(), false);
            wrap(headerRows, false);
        }
        if (this.textWrapSettings.wrapMode !== "Content") {
          this.notify(refreshHandlers, {});
        }
      }
    };
    Grid2.prototype.removeTextWrap = function() {
      wrap(this.element, false);
      var headerRows = [].slice.call(this.element.getElementsByClassName("e-columnheader"));
      wrap(headerRows, false);
      wrap(this.getContent(), false);
      if (this.textWrapSettings.wrapMode !== "Content") {
        this.notify(refreshHandlers, {});
      }
    };
    Grid2.prototype.createTooltip = function() {
      this.toolTipObj = new Tooltip({
        opensOn: "custom",
        content: "",
        cssClass: this.cssClass ? this.cssClass : null
      }, this.element);
    };
    Grid2.prototype.freezeRefresh = function() {
      if (this.enableVirtualization || this.enableInfiniteScrolling) {
        this.pageSettings.currentPage = 1;
      }
      this.componentRefresh();
    };
    Grid2.prototype.getTooltipStatus = function(element2) {
      var headerTable = this.getHeaderTable();
      var headerDivTag = this.enableAdaptiveUI && this.rowRenderingMode === "Vertical" ? "e-gridcontent" : "e-gridheader";
      var htable = this.createTable(headerTable, headerDivTag, "header");
      var ctable = this.createTable(headerTable, headerDivTag, "content");
      var table2 = element2.classList.contains("e-headercell") ? htable : ctable;
      var ele = element2.classList.contains("e-headercell") ? "th" : "tr";
      table2.querySelector(ele).className = element2.className;
      var targetElement2 = table2.querySelector(ele);
      targetElement2.innerHTML = "";
      Array.from(element2.childNodes).forEach(function(child) {
        targetElement2.appendChild(child.cloneNode(true));
      });
      var width = table2.querySelector(ele).getBoundingClientRect().width;
      document.body.removeChild(htable);
      document.body.removeChild(ctable);
      if (width > element2.getBoundingClientRect().width && !element2.classList.contains("e-editedbatchcell") || this.enableAdaptiveUI && this.rowRenderingMode === "Vertical" && width > element2.getBoundingClientRect().width * 0.55 - (this.height !== "auto" ? 16 : 0)) {
        return true;
      }
      return false;
    };
    Grid2.prototype.mouseMoveHandler = function(e) {
      if (this.isEllipsisTooltip()) {
        var element2 = parentsUntil(e.target, "e-ellipsistooltip");
        if (e.type === "mouseout" && (this.prevElement !== element2 || element2 !== parentsUntil(e.relatedTarget, "e-ellipsistooltip"))) {
          this.toolTipObj.close();
          this.prevElement = null;
        }
        var tagName = e.target.tagName;
        var elemNames = ["A", "BUTTON", "INPUT"];
        if (element2 && e.type !== "mouseout" && !(Browser.isDevice && elemNames.indexOf(tagName) !== -1)) {
          if (this.getTooltipStatus(element2)) {
            var col = this.getColumns()[parseInt(element2.getAttribute(ariaColIndex), 10) - 1];
            var domSetter = col && col.disableHtmlEncode ? "innerText" : "innerHTML";
            var contentDiv = this.createElement("div");
            if (element2.getElementsByClassName("e-headertext").length) {
              var innerElement = element2.getElementsByClassName("e-headertext")[0];
              contentDiv["" + domSetter] = this.sanitize(innerElement.innerText);
              this.toolTipObj.content = contentDiv;
            } else {
              contentDiv["" + domSetter] = this.sanitize(element2.innerText);
              this.toolTipObj.content = contentDiv;
            }
            if (this.enableHtmlSanitizer) {
              this.toolTipObj.enableHtmlSanitizer = true;
            }
            if (col && col.disableHtmlEncode) {
              this.toolTipObj.enableHtmlParse = false;
            }
            if (element2 !== this.prevElement) {
              this.toolTipObj["open"](element2);
            }
            this.prevElement = element2;
          }
        }
      }
    };
    Grid2.prototype.isEllipsisTooltip = function() {
      var cols = this.getColumns();
      if (this.clipMode === "EllipsisWithTooltip") {
        return true;
      }
      for (var i = 0; i < cols.length; i++) {
        if (cols[parseInt(i.toString(), 10)].clipMode === "EllipsisWithTooltip") {
          return true;
        }
      }
      return false;
    };
    Grid2.prototype.scrollHandler = function() {
      if (this.isEllipsisTooltip()) {
        this.toolTipObj.close();
      }
    };
    Grid2.prototype.createTable = function(table2, tag, type) {
      var myTableDiv = this.createElement("div");
      myTableDiv.className = this.element.className;
      myTableDiv.style.cssText = "display: inline-block;visibility:hidden;position:absolute";
      var mySubDiv = this.createElement("div");
      mySubDiv.className = tag;
      var myTable = this.createElement("table");
      myTable.className = table2.className;
      myTable.style.cssText = "table-layout: auto;width: auto";
      var ele = type === "header" ? "th" : "td";
      var myTr = this.createElement("tr", { attrs: { role: "row" } });
      var mytd = this.createElement(ele);
      myTr.appendChild(mytd);
      myTable.appendChild(myTr);
      mySubDiv.appendChild(myTable);
      myTableDiv.appendChild(mySubDiv);
      document.body.appendChild(myTableDiv);
      return myTableDiv;
    };
    Grid2.prototype.onKeyPressed = function(e) {
      if (e.action === "tab" || e.action === "shiftTab") {
        this.toolTipObj.close();
      }
    };
    Grid2.prototype.wireEvents = function() {
      EventHandler.add(this.element, "click", this.mouseClickHandler, this);
      EventHandler.add(this.element, "touchend", this.mouseClickHandler, this);
      EventHandler.add(this.element, "focusout", this.focusOutHandler, this);
      EventHandler.add(this.element, "dblclick", this.dblClickHandler, this);
      EventHandler.add(this.element, "keydown", this.keyPressHandler, this);
      EventHandler.add(window, "resize", this.resetIndentWidth, this);
      if (this.allowKeyboard) {
        this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;
      }
      this.keyboardModule = new KeyboardEvents(this.element, {
        keyAction: this.keyActionHandler.bind(this),
        keyConfigs: this.keyConfigs,
        eventName: "keydown"
      });
      EventHandler.add(this.getContent().firstElementChild, "scroll", this.scrollHandler, this);
      EventHandler.add(this.element, "mouseover", this.mouseMoveHandler, this);
      EventHandler.add(this.element, "mouseout", this.mouseMoveHandler, this);
      EventHandler.add(this.getContent(), "touchstart", this.tapEvent, this);
      EventHandler.add(document.body, "keydown", this.keyDownHandler, this);
    };
    Grid2.prototype.unwireEvents = function() {
      EventHandler.remove(this.element, "click", this.mouseClickHandler);
      EventHandler.remove(this.element, "touchend", this.mouseClickHandler);
      EventHandler.remove(this.element, "focusout", this.focusOutHandler);
      EventHandler.remove(this.element, "dblclick", this.dblClickHandler);
      EventHandler.remove(this.getContent().firstElementChild, "scroll", this.scrollHandler);
      EventHandler.remove(this.element, "mouseover", this.mouseMoveHandler);
      EventHandler.remove(this.element, "mouseout", this.mouseMoveHandler);
      EventHandler.remove(this.element, "keydown", this.keyPressHandler);
      EventHandler.remove(this.getContent(), "touchstart", this.tapEvent);
      EventHandler.remove(document.body, "keydown", this.keyDownHandler);
      EventHandler.remove(window, "resize", this.resetIndentWidth);
    };
    Grid2.prototype.addListener = function() {
      if (this.isDestroyed) {
        return;
      }
      this.on(dataReady, this.dataReady, this);
      this.on(contentReady, this.recalcIndentWidth, this);
      this.on(headerRefreshed, this.recalcIndentWidth, this);
      this.on(refreshFrozenPosition, this.refreshFrozenPosition, this);
      this.on(refreshSplitFrozenColumn, this.refreshSplitFrozenColumn, this);
      this.dataBoundFunction = this.refreshMediaCol.bind(this);
      this.addEventListener(dataBound, this.dataBoundFunction);
      this.on(keyPressed, this.onKeyPressed, this);
    };
    Grid2.prototype.removeListener = function() {
      if (this.isDestroyed) {
        return;
      }
      this.off(dataReady, this.dataReady);
      this.off(contentReady, this.recalcIndentWidth);
      this.off(headerRefreshed, this.recalcIndentWidth);
      this.on(refreshFrozenPosition, this.refreshFrozenPosition, this);
      this.on(refreshSplitFrozenColumn, this.refreshSplitFrozenColumn, this);
      this.removeEventListener(dataBound, this.dataBoundFunction);
      this.off(keyPressed, this.onKeyPressed);
    };
    Grid2.prototype.getCurrentViewRecords = function() {
      if (isGroupAdaptive(this)) {
        return isNullOrUndefined(this.currentViewData.records) ? this.currentViewData : this.currentViewData.records;
      }
      if (this.groupSettings.enableLazyLoading) {
        return this.currentViewData;
      }
      return this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length && this.currentViewData.records ? this.currentViewData.records : this.currentViewData;
    };
    Grid2.prototype.mouseClickHandler = function(e) {
      if (this.isChildGrid(e) || parentsUntil(e.target, "e-gridpopup") && e.touches || this.element.getElementsByClassName("e-cloneproperties").length || this.checkEdit(e)) {
        return;
      }
      if ((!this.allowRowDragAndDrop && (parentsUntil(e.target, gridContent) || e.target.tagName === "TD") || parentsUntil(e.target, "e-headercell") && parentsUntil(e.target, "e-headercell").querySelector(".e-checkselectall") || !(this.allowGrouping || this.allowReordering) && parentsUntil(e.target, "e-gridheader")) && e.touches) {
        return;
      }
      if (parentsUntil(e.target, "e-gridheader") && this.allowRowDragAndDrop && !parentsUntil(e.target, "e-filterbarcell") && (e.target && ["A", "BUTTON", "INPUT"].indexOf(e.target.tagName) === -1)) {
        e.preventDefault();
      }
      var args = this.getRowInfo(e.target);
      var cancel = "cancel";
      args["" + cancel] = false;
      var isDataRow = false;
      var tr = closest(e.target, "tr");
      if (tr && tr.getAttribute("data-uid")) {
        var rowObj = this.getRowObjectFromUID(tr.getAttribute("data-uid"));
        isDataRow = rowObj ? rowObj.isDataRow : false;
      }
      if (isDataRow) {
        this.trigger(recordClick, args);
      }
      this.notify(click, e);
    };
    Grid2.prototype.checkEdit = function(e) {
      var tr = parentsUntil(e.target, row);
      var isEdit = this.editSettings.mode !== "Batch" && this.isEdit && tr && (tr.classList.contains(editedRow) || tr.classList.contains(addedRow) && !this.editSettings.showAddNewRow);
      return !parentsUntil(e.target, "e-unboundcelldiv") && (isEdit || parentsUntil(e.target, rowCell) && parentsUntil(e.target, rowCell).classList.contains("e-editedbatchcell"));
    };
    Grid2.prototype.dblClickHandler = function(e) {
      var grid = parentsUntil(e.target, "e-grid");
      if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, ".e-unboundcelldiv")) {
        return;
      }
      var dataRow = false;
      var tr = closest(e.target, "tr");
      if (tr && tr.getAttribute("data-uid")) {
        var rowObj = this.getRowObjectFromUID(tr.getAttribute("data-uid"));
        dataRow = rowObj ? rowObj.isDataRow : false;
      }
      var args = this.getRowInfo(e.target);
      args.target = e.target;
      if (dataRow) {
        this.trigger(recordDoubleClick, args);
      }
      this.notify(dblclick, e);
    };
    Grid2.prototype.focusOutHandler = function(e) {
      if (this.isChildGrid(e)) {
        return;
      }
      if (!parentsUntil(e.target, "e-grid")) {
        this.element.querySelector(".e-gridpopup").style.display = "None";
      }
      var filterClear = this.element.querySelector(".e-cancel:not(.e-hide)");
      if (filterClear && !filterClear.parentElement.classList.contains("e-tbar-btn")) {
        filterClear.classList.add("e-hide");
      }
      var relatedTarget = e.relatedTarget;
      var ariaOwns = relatedTarget ? relatedTarget.getAttribute("aria-owns") : null;
      if ((!relatedTarget || !parentsUntil(relatedTarget, "e-grid") && (!isNullOrUndefined(ariaOwns) && ariaOwns) !== e.target.getAttribute("aria-owns")) && !this.keyPress && this.isEdit && !Browser.isDevice) {
        if (this.editSettings.mode === "Batch" && !((parentsUntil(relatedTarget, "e-ddl") || parentsUntil(relatedTarget, "e-ddt")) && (parentsUntil(relatedTarget, "e-multi-select-list-wrapper") || parentsUntil(relatedTarget, "e-input-filter")) && parentsUntil(relatedTarget, "e-input-group")) && (parentsUntil(relatedTarget, "e-uploader") || !(relatedTarget && isNullOrUndefined(parentsUntil(relatedTarget, "e-input-group"))) && !parentsUntil(e.target, "edit-custom-template"))) {
          this.editModule.saveCell();
          this.notify(editNextValCell, {});
        }
        if (this.editSettings.mode === "Normal" && !this.isWidgetsDestroyed) {
          this.editModule.editFormValidate();
        }
      }
      if (this.editSettings.showAddNewRow) {
        this.editModule.isShowAddedRowValidate = false;
      }
      this.keyPress = false;
    };
    Grid2.prototype.isChildGrid = function(e) {
      var gridElement = parentsUntil(e.target, "e-grid");
      if (gridElement && gridElement.id !== this.element.id || parentsUntil(e.target, "e-unboundcelldiv") && isNullOrUndefined(gridElement)) {
        return true;
      }
      return false;
    };
    Grid2.prototype.mergePersistGridData = function(persistedData) {
      var data = this.getLocalData();
      if (!(isNullOrUndefined(data) || data === "") || !isNullOrUndefined(persistedData)) {
        var dataObj = !isNullOrUndefined(persistedData) ? persistedData : JSON.parse(data);
        var keys2 = Object.keys(dataObj);
        this.isProtectedOnChange = true;
        for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
          var key = keys_1[_i];
          if (typeof this["" + key] === "object" && !isNullOrUndefined(this["" + key])) {
            if (Array.isArray(this["" + key]) && key === "columns") {
              this.setFrozenCount();
              setColumnIndex(this["" + key]);
              this.mergeColumns(dataObj["" + key], this["" + key]);
              this.mergedColumns = true;
              this["" + key] = dataObj["" + key];
            } else {
              extend$1(this["" + key], dataObj["" + key]);
            }
          } else {
            this["" + key] = dataObj["" + key];
          }
        }
        this.isProtectedOnChange = false;
      }
    };
    Grid2.prototype.mergeColumns = function(storedColumn, columns) {
      var storedColumns = storedColumn;
      var isFrozenGrid = this.isFrozenGrid();
      var _loop_4 = function(i2) {
        var localCol = columns.filter(function(tCol) {
          return isFrozenGrid ? tCol.index === storedColumns[parseInt(i2.toString(), 10)]["" + initialFrozenColumnIndex] : tCol.index === storedColumns[parseInt(i2.toString(), 10)].index;
        })[0];
        if (!isNullOrUndefined(localCol)) {
          if (isFrozenGrid) {
            localCol = extend$1({}, localCol, {}, true);
            localCol.freeze = storedColumns[parseInt(i2.toString(), 10)].freeze;
          }
          if (localCol.columns && localCol.columns.length) {
            this_4.mergeColumns(storedColumns[parseInt(i2.toString(), 10)].columns, localCol.columns);
            storedColumns[parseInt(i2.toString(), 10)] = extend$1(localCol, storedColumns[parseInt(i2.toString(), 10)], {}, true);
          } else {
            storedColumns[parseInt(i2.toString(), 10)] = extend$1(localCol, storedColumns[parseInt(i2.toString(), 10)], {}, true);
          }
        }
      };
      var this_4 = this;
      for (var i = 0; i < storedColumns.length; i++) {
        _loop_4(i);
      }
    };
    Grid2.prototype.isDetail = function() {
      return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);
    };
    Grid2.prototype.isCommandColumn = function(columns) {
      var _this_1 = this;
      return columns.some(function(col) {
        if (col.columns) {
          return _this_1.isCommandColumn(col.columns);
        }
        return !!(col.commands || col.commandsTemplate);
      });
    };
    Grid2.prototype.isForeignKeyEnabled = function(columns) {
      var _this_1 = this;
      return columns.some(function(col) {
        if (col.columns) {
          return _this_1.isForeignKeyEnabled(col.columns);
        }
        return !!(col.dataSource && col.foreignKeyValue);
      });
    };
    Grid2.prototype.keyPressHandler = function(e) {
      var presskey = extend$1(e, { cancel: false });
      this.trigger("keyPressed", presskey);
      if (presskey.cancel === true || this.isEdit && e && parentsUntil(e.target, "e-gridform") && parentsUntil(e.target, "e-ddl") && e.action === "open" && e.altKey === true && e.code === "ArrowDown") {
        e.stopImmediatePropagation();
      }
    };
    Grid2.prototype.keyDownHandler = function(e) {
      if (e.altKey) {
        if (e.keyCode === 74) {
          if (this.keyA) {
            this.notify(groupCollapse, { target: e.target, collapse: false });
            this.keyA = false;
          } else {
            if (this.focusModule && this.focusModule.currentInfo && this.focusModule.currentInfo.element) {
              removeClass([this.focusModule.currentInfo.element, this.focusModule.currentInfo.elementToFocus], ["e-focused", "e-focus"]);
              this.focusModule.currentInfo.element.tabIndex = -1;
            }
            if (!this.element.classList.contains("e-childgrid")) {
              this.element.focus();
            }
          }
        }
        if (e.keyCode === 87) {
          var focusModule = this.focusModule;
          if (focusModule) {
            if (!this.currentViewData.length) {
              return;
            }
            focusModule.focusContent();
            focusModule.addOutline();
          }
        }
        if (e.keyCode === 65) {
          this.keyA = true;
        }
        if (e.keyCode === 72 && this.keyA) {
          this.notify(groupCollapse, { target: e.target, collapse: true });
          this.keyA = false;
        }
      }
      if (e.keyCode === 13) {
        this.notify(enterKeyHandler, e);
      }
    };
    Grid2.prototype.keyActionHandler = function(e) {
      if (this.isChildGrid(e) || this.editModule && (this.editModule.alertDObj && this.editModule.alertDObj.visible || this.editModule.dialogObj && this.editModule.dialogObj.visible) || this.isEdit && (!this.editSettings.showAddNewRow || this.editSettings.showAddNewRow && this.element.querySelector(editedRow)) && e.action !== "escape" && e.action !== "enter" && e.action !== "shiftEnter" && e.action !== "tab" && e.action !== "shiftTab") {
        return;
      } else {
        this.keyPress = true;
      }
      if (this.allowKeyboard) {
        if (e.action === "ctrlPlusP") {
          e.preventDefault();
          this.print();
        }
        this.notify(keyPressed, e);
      }
    };
    Grid2.prototype.setInjectedModules = function(modules) {
      this.injectedModules = modules;
    };
    Grid2.prototype.updateColumnObject = function() {
      prepareColumns(this.columns, this.enableColumnVirtualization, this);
      setColumnIndex(this.columns);
      this.initForeignColumn();
      this.notify(autoCol, {});
    };
    Grid2.prototype.refreshFrozenPosition = function(obj) {
      if (obj && obj.isModeChg) {
        this.refreshColumns();
        this.notify(refreshResizePosition, {});
      } else {
        this.refreshColumns();
      }
    };
    Grid2.prototype.getForeignKeyColumns = function() {
      return this.getColumns().filter(function(col) {
        return col.isForeignColumn();
      });
    };
    Grid2.prototype.getRowHeight = function(accurateHeight) {
      return this.rowHeight ? this.rowHeight : getRowHeight(this.element, accurateHeight);
    };
    Grid2.prototype.refreshColumns = function() {
      this.freezeColumnRefresh = true;
      this.setFrozenCount();
      this.updateFrozenColumnsWidth();
      if (this.isFrozenGrid()) {
        this.isPreventScrollEvent = true;
      }
      this.updateColumnObject();
      this.checkLockColumns(this.getColumns());
      this.refresh();
      if (this.isFrozenGrid() && this.enableColumnVirtualization) {
        var left = this.getContent().querySelector(".e-movablescrollbar").scrollLeft;
        this.getHeaderContent().querySelector("." + headerContent).scrollLeft = left;
        this.getContent().querySelector("." + content).scrollLeft = left;
      }
    };
    Grid2.prototype.excelExport = function(excelExportProperties, isMultipleExport, workbook, isBlob) {
      if (this.exportGrids && this.exportGrids.length) {
        var gridIds = this.exportGrids.slice();
        return this.exportMultipleExcelGrids(gridIds, excelExportProperties, isMultipleExport, workbook, isBlob);
      } else {
        return this.excelExportModule ? this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob) : null;
      }
    };
    Grid2.prototype.csvExport = function(excelExportProperties, isMultipleExport, workbook, isBlob) {
      return this.excelExportModule ? this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob) : null;
    };
    Grid2.prototype.pdfExport = function(pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {
      if (this.exportGrids && this.exportGrids.length) {
        var gridIds = this.exportGrids.slice();
        return this.exportMultiplePdfGrids(gridIds, pdfExportProperties, isMultipleExport, pdfDoc, isBlob);
      } else {
        return this.pdfExportModule ? this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) : null;
      }
    };
    Grid2.prototype.exportMultiplePdfGrids = function(gridIds, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {
      var _this = this;
      if (gridIds.length !== 0) {
        var currentGridId = gridIds.shift();
        var currentGridInstance = document.getElementById(currentGridId).ej2_instances[0];
        var exportPromise = currentGridInstance.pdfExportModule ? currentGridInstance.pdfExportModule.Map(currentGridInstance, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) : Promise.resolve();
        return exportPromise.then(function(exportedGridResults) {
          isMultipleExport = gridIds.length === 1 ? false : true;
          return _this.exportMultiplePdfGrids(gridIds, pdfExportProperties, isMultipleExport, exportedGridResults, isBlob);
        });
      }
      return null;
    };
    Grid2.prototype.exportMultipleExcelGrids = function(gridIds, excelExportProperties, isMultipleExport, workbook, isBlob) {
      var _this = this;
      if (gridIds.length !== 0) {
        var currentGridId = gridIds.shift();
        var currentGridInstance = document.getElementById(currentGridId).ej2_instances[0];
        var exportPromise = currentGridInstance.excelExportModule ? currentGridInstance.excelExportModule.Map(currentGridInstance, excelExportProperties, isMultipleExport, workbook, false, isBlob) : null;
        return exportPromise.then(function(exportedGridResults) {
          isMultipleExport = gridIds.length === 1 ? false : true;
          return _this.exportMultipleExcelGrids(gridIds, excelExportProperties, isMultipleExport, exportedGridResults, isBlob);
        });
      }
      return null;
    };
    Grid2.prototype.groupColumn = function(columnName) {
      if (this.groupModule) {
        this.groupModule.groupColumn(columnName);
      }
    };
    Grid2.prototype.groupExpandAll = function() {
      if (this.groupModule) {
        this.groupModule.expandAll();
      }
    };
    Grid2.prototype.groupCollapseAll = function() {
      if (this.groupModule) {
        this.groupModule.collapseAll();
      }
    };
    Grid2.prototype.clearGrouping = function() {
      if (this.groupModule) {
        this.groupModule.clearGrouping();
      }
    };
    Grid2.prototype.ungroupColumn = function(columnName) {
      if (this.groupModule) {
        this.groupModule.ungroupColumn(columnName);
      }
    };
    Grid2.prototype.openColumnChooser = function(x, y) {
      if (this.columnChooserModule) {
        this.columnChooserModule.openColumnChooser(x, y);
      }
    };
    Grid2.prototype.scrollRefresh = function() {
      var _this_1 = this;
      var refresh = function() {
        _this_1.scrollModule.refresh();
        _this_1.off(contentReady, refresh);
      };
      this.on(contentReady, refresh, this);
    };
    Grid2.prototype.detailCollapseAll = function() {
      if (this.detailRowModule) {
        this.detailRowModule.collapseAll();
      }
    };
    Grid2.prototype.detailExpandAll = function() {
      if (this.detailRowModule) {
        this.detailRowModule.expandAll();
      }
    };
    Grid2.prototype.clearCellSelection = function() {
      if (this.selectionModule) {
        this.selectionModule.clearCellSelection();
      }
    };
    Grid2.prototype.clearRowSelection = function() {
      if (this.selectionModule) {
        this.selectionModule.clearRowSelection();
      }
    };
    Grid2.prototype.selectCells = function(rowCellIndexes) {
      if (this.selectionModule) {
        this.selectionModule.selectCells(rowCellIndexes);
      }
    };
    Grid2.prototype.selectRowsByRange = function(startIndex, endIndex) {
      if (this.selectionModule) {
        this.selectionModule.selectRowsByRange(startIndex, endIndex);
      }
    };
    Grid2.prototype.isContextMenuOpen = function() {
      return this.contextMenuModule && this.contextMenuModule.isOpen;
    };
    Grid2.prototype.ensureModuleInjected = function(module) {
      return this.getInjectedModules().indexOf(module) >= 0;
    };
    Grid2.prototype.destroyTemplate = function(propertyNames, index) {
      this.clearTemplate(propertyNames, index);
    };
    Grid2.prototype.log = function(type, args) {
      var injectedModules = this.getInjectedModules();
      var logger = injectedModules.find(function(item) {
        return item.name === "Logger";
      });
      if (!logger) {
        Grid_1.Inject(Logger);
        this.enableLogger = true;
        this.injectModules();
      }
      this.loggerModule ? this.loggerModule.log(type, args) : /* @__PURE__ */ function() {
        return 0;
      }();
    };
    Grid2.prototype.applyBiggerTheme = function(element2) {
      if (this.element.classList.contains("e-bigger")) {
        element2.classList.add("e-bigger");
      }
    };
    Grid2.prototype.getPreviousRowData = function() {
      var previousRowData = this.getRowsObject()[this.getRows().length - 1].data;
      return previousRowData;
    };
    Grid2.prototype.hideScroll = function() {
      var content$1 = this.getContent().querySelector("." + content);
      if (content$1.scrollHeight <= content$1.clientHeight) {
        this.scrollModule.removePadding();
        content$1.style.overflowY = "auto";
      }
    };
    Grid2.prototype.getRowIndexByPrimaryKey = function(value) {
      var pkName = this.getPrimaryKeyFieldNames()[0];
      value = typeof value === "object" ? value["" + pkName] : value;
      var rows = this.getRowsObject();
      for (var i = 0; i < rows.length; i++) {
        if (rows[parseInt(i.toString(), 10)].isDetailRow || rows[parseInt(i.toString(), 10)].isCaptionRow) {
          continue;
        }
        var pKvalue = rows[parseInt(i.toString(), 10)].data["" + pkName];
        if (pkName.split(".").length > 1) {
          pKvalue = performComplexDataOperation(pkName, rows[parseInt(i.toString(), 10)].data);
        }
        if (pKvalue === value) {
          return rows[parseInt(i.toString(), 10)].index;
        }
      }
      return -1;
    };
    Grid2.prototype.grabColumnByFieldFromAllCols = function(field, isForeignKey) {
      var column;
      this.columnModel = [];
      this.updateColumnModel(this.columns);
      var gCols = this.columnModel;
      for (var i = 0; i < gCols.length; i++) {
        if (!isForeignKey && field === gCols[parseInt(i.toString(), 10)].field || isForeignKey && gCols[parseInt(i.toString(), 10)].isForeignColumn() && field === gCols[parseInt(i.toString(), 10)].foreignKeyValue) {
          column = gCols[parseInt(i.toString(), 10)];
          break;
        }
      }
      return column;
    };
    Grid2.prototype.grabColumnByUidFromAllCols = function(uid2) {
      var column;
      this.columnModel = [];
      this.updateColumnModel(this.columns);
      var gCols = this.columnModel;
      for (var i = 0; i < gCols.length; i++) {
        if (uid2 === gCols[parseInt(i.toString(), 10)].uid) {
          column = gCols[parseInt(i.toString(), 10)];
        }
      }
      return column;
    };
    Grid2.prototype.getFilteredRecords = function() {
      if (this.allowFiltering && this.filterSettings.columns.length || this.searchSettings.key.length) {
        var query = this.renderModule.data.generateQuery(true);
        if (this.dataSource && this.renderModule.data.isRemote() && this.dataSource instanceof DataManager) {
          return this.renderModule.data.getData(this.dataSource, query);
        } else {
          if (this.dataSource instanceof DataManager) {
            return this.dataSource.executeLocal(query);
          } else {
            return new DataManager(this.dataSource, query).executeLocal(query);
          }
        }
      }
      return [];
    };
    Grid2.prototype.getUserAgent = function() {
      var userAgent = Browser.userAgent.toLowerCase();
      return /iphone|ipod|ipad|macintosh/.test(userAgent);
    };
    Grid2.prototype.tapEvent = function(e) {
      if (this.getUserAgent()) {
        if (!Global.timer) {
          Global.timer = setTimeout(function() {
            Global.timer = null;
          }, 300);
        } else {
          clearTimeout(Global.timer);
          Global.timer = null;
          this.dblClickHandler(e);
          this.notify(doubleTap, e);
        }
      }
    };
    Grid2.prototype.getRowUid = function(prefix) {
      return "" + prefix + this.rowUid++;
    };
    Grid2.prototype.getRowElementByUID = function(uid2) {
      var rowEle;
      var rows = [];
      var cntRows = [].slice.call(this.getContent().querySelector(tbody).children);
      if (this.frozenRows) {
        rows = [].slice.call(this.getHeaderContent().querySelector(tbody).children);
        rows = rows.concat(cntRows);
      } else {
        rows = cntRows;
      }
      for (var _i = 0, rows_2 = rows; _i < rows_2.length; _i++) {
        var row2 = rows_2[_i];
        if (row2.getAttribute("data-uid") === uid2) {
          rowEle = row2;
          break;
        }
      }
      return rowEle;
    };
    Grid2.prototype.getHiddenColumns = function() {
      var cols = [];
      for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {
        var col = _a[_i];
        if (col.visible === false) {
          cols.push(col);
        }
      }
      return cols;
    };
    Grid2.prototype.calculatePageSizeByParentHeight = function(containerHeight) {
      if (this.allowPaging) {
        if (this.allowTextWrap && this.textWrapSettings.wrapMode === "Header" || !this.allowTextWrap) {
          var pagesize = 0;
          if (containerHeight.indexOf("%") !== -1) {
            containerHeight = parseInt(containerHeight, 10) / 100 * this.element.clientHeight;
          }
          var nonContentHeight = this.getNoncontentHeight() + this.getRowHeight();
          if (containerHeight > nonContentHeight) {
            var contentHeight = 0;
            contentHeight = containerHeight - this.getNoncontentHeight();
            pagesize = contentHeight / this.getRowHeight();
          }
          if (pagesize > 0) {
            return Math.floor(pagesize);
          }
        }
      }
      return 0;
    };
    Grid2.prototype.getNoncontentHeight = function() {
      var height = 0;
      if (this.getHeaderContent() && !isNullOrUndefined(this.getHeaderContent().clientHeight)) {
        height += this.getHeaderContent().clientHeight;
      }
      if (this.toolbar && !isNullOrUndefined(this.element.querySelector(".e-toolbar").clientHeight)) {
        height += this.element.querySelector(".e-toolbar").clientHeight;
      }
      if (this.allowPaging && !isNullOrUndefined(this.element.querySelector(".e-gridpager").clientHeight)) {
        height += this.element.querySelector(".e-gridpager").clientHeight;
      }
      if (this.showColumnChooser && !isNullOrUndefined(this.element.querySelector(".e-columnheader").clientHeight)) {
        height += this.element.querySelector(".e-columnheader").clientHeight;
      }
      if (this.allowGrouping && this.groupSettings.showDropArea && !isNullOrUndefined(this.element.querySelector(".e-groupdroparea").clientHeight)) {
        height += this.element.querySelector(".e-groupdroparea").clientHeight;
      }
      if (this.aggregates.length > 0 && !isNullOrUndefined(this.element.querySelector(".e-summaryrow").clientHeight)) {
        for (var i = 0; i < this.element.getElementsByClassName("e-summaryrow").length; i++) {
          height += this.element.getElementsByClassName("e-summaryrow")[parseInt(i.toString(), 10)].clientHeight;
        }
      }
      return height;
    };
    Grid2.prototype.getSummaryValues = function(summaryCol, summaryData) {
      return DataUtil.aggregates[summaryCol.type.toLowerCase()](summaryData, summaryCol.field);
    };
    Grid2.prototype.serverExcelExport = function(url, headers) {
      this.isExcel = true;
      this.exportGrid(url, headers);
    };
    Grid2.prototype.serverPdfExport = function(url, headers) {
      this.isExcel = false;
      this.exportGrid(url, headers);
    };
    Grid2.prototype.serverCsvExport = function(url, headers) {
      this.isExcel = true;
      this.exportGrid(url, headers);
    };
    Grid2.prototype.exportGrid = function(url, headers) {
      var _this_1 = this;
      var grid = this;
      var query = grid.getDataModule().generateQuery(true);
      var state = new UrlAdaptor().processQuery(new DataManager({ url: "" }), query);
      var queries = JSON.parse(state.data);
      var gridModel = JSON.parse(this.addOnPersist([
        "allowGrouping",
        "allowPaging",
        "pageSettings",
        "sortSettings",
        "allowPdfExport",
        "allowExcelExport",
        "aggregates",
        "filterSettings",
        "groupSettings",
        "columns",
        "locale",
        "searchSettings"
      ]));
      var include = [
        "field",
        "headerText",
        "type",
        "format",
        "visible",
        "foreignKeyValue",
        "foreignKeyField",
        "template",
        "index",
        "width",
        "textAlign",
        "headerTextAlign",
        "columns"
      ];
      gridModel.filterSettings.columns = queries.where;
      gridModel.searchSettings.fields = queries.search && queries.search[0]["fields"] || [];
      gridModel.sortSettings.columns = queries.sorted;
      gridModel.columns = this.setHeaderText(gridModel.columns, include);
      var form = this.createElement("form", { id: "ExportForm" });
      form.style.display = "none";
      var gridInput = this.createElement("input", { id: "gridInput", attrs: { name: "gridModel" } });
      gridInput.value = JSON.stringify(gridModel);
      form.method = "POST";
      form.action = url;
      form.appendChild(gridInput);
      if (headers && headers.headers && Array.isArray(headers.headers)) {
        headers.headers.forEach(function(header) {
          Object.keys(header).forEach(function(key) {
            var value = typeof header["" + key] === "string" ? header["" + key] : JSON.stringify(header["" + key]);
            var headerInput = _this_1.createElement("input", { attrs: { name: key, value, type: "hidden" } });
            form.appendChild(headerInput);
          });
        });
      }
      document.body.appendChild(form);
      form.submit();
      form.remove();
    };
    Grid2.prototype.setHeaderText = function(columns, include) {
      for (var i = 0; i < columns.length; i++) {
        var column = this.getColumnByUid(columns[parseInt(i.toString(), 10)].uid);
        columns[parseInt(i.toString(), 10)].headerText = column.headerText;
        if (!isNullOrUndefined(column.template)) {
          columns[parseInt(i.toString(), 10)].template = "true";
        }
        if (columns[parseInt(i.toString(), 10)].format) {
          columns[parseInt(i.toString(), 10)].format = getNumberFormat(this.getFormat(columns[parseInt(i.toString(), 10)].format), columns[parseInt(i.toString(), 10)].type, false, defaultCurrencyCode);
          if (column.type === "datetime" || column.type === "date" || column.type === "time") {
            columns[parseInt(i.toString(), 10)].format = columns[parseInt(i.toString(), 10)].format.toString().replace("AM/PM", "tt");
          }
        }
        if (columns[parseInt(i.toString(), 10)].columns) {
          this.setHeaderText(columns[parseInt(i.toString(), 10)].columns, include);
        }
        var keys2 = Object.keys(columns[parseInt(i.toString(), 10)]);
        for (var j = 0; j < keys2.length; j++) {
          if (include.indexOf(keys2[parseInt(j.toString(), 10)]) < 0) {
            delete columns[parseInt(i.toString(), 10)][keys2[parseInt(j.toString(), 10)]];
          }
        }
      }
      return columns;
    };
    Grid2.prototype.getFormat = function(format) {
      return typeof format === "object" ? !isNullOrUndefined(format.format) ? format.format : format.skeleton : format;
    };
    Grid2.prototype.isCollapseStateEnabled = function() {
      var isExpanded = "isExpanded";
      return this["" + isExpanded] === false;
    };
    Grid2.prototype.updateRowValue = function(key, rowData) {
      var args = {
        requestType: "save",
        data: rowData
      };
      this.showSpinner();
      this.notify(updateData, args);
      this.refresh();
    };
    Grid2.prototype.setForeignKeyData = function() {
      this.dataBind();
      var colpending = this.getDataModule().getForeignKeyDataState();
      if (colpending.isPending) {
        this.getDataModule().setForeignKeyDataState({});
        colpending.resolver();
      } else {
        this.getDataModule().setForeignKeyDataState({ isDataChanged: false });
        if (this.contentModule || this.headerModule) {
          this.renderModule.render();
        }
      }
    };
    Grid2.prototype.resetFilterDlgPosition = function(field) {
      var header = this.getColumnHeaderByField(field);
      if (header) {
        var target = header.querySelector(".e-filtermenudiv");
        var filterDlg = this.element.querySelector(".e-filter-popup");
        if (target) {
          var gClient = this.element.getBoundingClientRect();
          var fClient = target.getBoundingClientRect();
          if (filterDlg) {
            if (filterDlg.offsetWidth + fClient.right > gClient.right) {
              filterDlg.style.left = (fClient.right - filterDlg.offsetWidth - gClient.left).toString() + "px";
            } else {
              filterDlg.style.left = (fClient.right - gClient.left).toString() + "px";
            }
          }
        }
      }
    };
    Grid2.prototype.renderTemplates = function(callBack) {
      var isReactChild = this.parentDetails && this.parentDetails.parentInstObj && this.parentDetails.parentInstObj.isReact;
      var isReactPrintGrid = this.printGridParent && this.printGridParent.isReact;
      if ((isReactChild || isReactPrintGrid) && this["portals"]) {
        var parentInstObj = isReactPrintGrid ? this.printGridParent : this.parentDetails.parentInstObj;
        parentInstObj["portals"] = parentInstObj["portals"].concat(this["portals"]);
        parentInstObj.renderTemplates(callBack);
        this["portals"] = void 0;
      } else {
        var portals = "portals";
        this.notify("reactTemplateRender", this["" + portals]);
        this.renderReactTemplates(callBack);
      }
    };
    Grid2.prototype.batchUpdate = function(changes) {
      this.processRowChanges(changes);
    };
    Grid2.prototype.batchAsyncUpdate = function(changes) {
      this.processBulkRowChanges(changes);
    };
    Grid2.prototype.processBulkRowChanges = function(changes) {
      var _this_1 = this;
      if (!this.dataToBeUpdated) {
        this.dataToBeUpdated = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);
        setTimeout(function() {
          _this_1.processRowChanges(_this_1.dataToBeUpdated);
          _this_1.dataToBeUpdated = null;
        }, this.asyncTimeOut);
      } else {
        var loopstring = [addedRecords, changedRecords, deletedRecords];
        var keyField = this.getPrimaryKeyFieldNames()[0];
        for (var i = 0; i < loopstring.length; i++) {
          if (changes[loopstring[parseInt(i.toString(), 10)]]) {
            compareChanges(this, changes, loopstring[parseInt(i.toString(), 10)], keyField);
          }
        }
      }
    };
    Grid2.prototype.processRowChanges = function(changes) {
      var _this_1 = this;
      var keyField = this.getPrimaryKeyFieldNames()[0];
      changes = Object.assign({ addedRecords: [], changedRecords: [], deletedRecords: [] }, changes);
      var promise = this.getDataModule().saveChanges(changes, keyField, {}, this.getDataModule().generateQuery().requiresCount());
      if (this.getDataModule().isRemote()) {
        promise.then(function() {
          _this_1.setNewData();
        });
      } else {
        this.setNewData();
      }
    };
    Grid2.prototype.setNewData = function() {
      var _this_1 = this;
      var oldValues = JSON.parse(JSON.stringify(this.getCurrentViewRecords()));
      var getData = this.getDataModule().getData({}, this.getDataModule().generateQuery().requiresCount());
      getData.then(function(e) {
        _this_1.bulkRefresh(e.result, oldValues, e.count);
      });
    };
    Grid2.prototype.deleteRowElement = function(row2) {
      var tr = this.getRowElementByUID(row2.uid);
      remove(tr);
    };
    Grid2.prototype.bulkRefresh = function(result, oldValues, count) {
      var _this_1 = this;
      var rowObj = this.getRowsObject();
      var keyField = this.getPrimaryKeyFieldNames()[0];
      var _loop_5 = function(i2) {
        if (!result.filter(function(e) {
          return e["" + keyField] === rowObj[parseInt(i2.toString(), 10)].data["" + keyField];
        }).length) {
          this_5.deleteRowElement(rowObj[parseInt(i2.toString(), 10)]);
          rowObj.splice(i2, 1);
          i2--;
        }
        out_i_1 = i2;
      };
      var this_5 = this, out_i_1;
      for (var i = 0; i < rowObj.length; i++) {
        _loop_5(i);
        i = out_i_1;
      }
      var _loop_6 = function(i2) {
        var isRowExist;
        oldValues.filter(function(e) {
          if (e["" + keyField] === result[parseInt(i2.toString(), 10)]["" + keyField]) {
            if (e !== result[parseInt(i2.toString(), 10)]) {
              _this_1.setRowData(result[parseInt(i2.toString(), 10)]["" + keyField], result[parseInt(i2.toString(), 10)]);
            }
            isRowExist = true;
          }
        });
        if (!isRowExist) {
          this_6.renderRowElement(result[parseInt(i2.toString(), 10)], i2);
        }
      };
      var this_6 = this;
      for (var i = 0; i < result.length; i++) {
        _loop_6(i);
      }
      this.currentViewData = result;
      var rows = [].slice.call(this.getContentTable().getElementsByClassName(row));
      resetRowIndex(this, this.getRowsObject(), rows);
      setRowElements(this);
      if (this.allowPaging) {
        this.notify(inBoundModelChanged, { module: "pager", properties: { totalRecordsCount: count } });
      }
    };
    Grid2.prototype.renderRowElement = function(data, index) {
      var row2 = new RowRenderer(this.serviceLocator, null, this);
      var model = new RowModelGenerator(this);
      var modelData = model.generateRows([data]);
      var tr = row2.render(modelData[0], this.getColumns());
      this.addRowObject(modelData[0], index);
      var tbody$1 = this.getContentTable().querySelector(tbody);
      if (tbody$1.querySelector(".e-emptyrow")) {
        var emptyRow = tbody$1.querySelector(".e-emptyrow");
        emptyRow.parentNode.removeChild(emptyRow);
        if (this.frozenRows && this.element.querySelector(".e-frozenrow-empty")) {
          this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty");
        }
      }
      if (this.frozenRows && index < this.frozenRows) {
        tbody$1 = this.getHeaderContent().querySelector(tbody);
      } else {
        tbody$1 = this.getContent().querySelector(tbody);
      }
      tbody$1 = this.getContent().querySelector(tbody);
      tbody$1.appendChild(tr);
    };
    Grid2.prototype.addRowObject = function(row2, index) {
      this.getRowsObject().splice(index, 1, row2);
    };
    Grid2.prototype.updateVisibleExpandCollapseRows = function() {
      var rows = this.getRowsObject();
      for (var i = 0, len = rows.length; i < len; i++) {
        if ((rows[parseInt(i.toString(), 10)].isDataRow || rows[parseInt(i.toString(), 10)].isAggregateRow) && this.getRowElementByUID(rows[parseInt(i.toString(), 10)].uid) && this.getRowElementByUID(rows[parseInt(i.toString(), 10)].uid).style.display === "none") {
          rows[parseInt(i.toString(), 10)].visible = false;
        } else {
          rows[parseInt(i.toString(), 10)].visible = true;
        }
      }
    };
    Grid2.prototype.sanitize = function(value) {
      if (this.enableHtmlSanitizer) {
        return SanitizeHtmlHelper.sanitize(value);
      }
      return value;
    };
    Grid2.prototype.getHeight = function(height) {
      if (!Number.isInteger(height) && height.indexOf("%") !== -1) {
        height = parseInt(height, 10) / 100 * this.element.clientHeight;
      } else if (!Number.isInteger(height) && this.height !== "auto") {
        height = parseInt(height, 10);
      } else {
        height = this.height;
      }
      return height;
    };
    Grid2.prototype.getFrozenRightContent = function() {
      return this.contentModule.getPanel();
    };
    Grid2.prototype.getFrozenRightHeader = function() {
      return this.headerModule.getPanel();
    };
    Grid2.prototype.getMovableHeaderTbody = function() {
      return this.getHeaderContent().querySelector(tbody);
    };
    Grid2.prototype.getMovableContentTbody = function() {
      return this.getContent().querySelector(tbody);
    };
    Grid2.prototype.getFrozenHeaderTbody = function() {
      return this.getHeaderContent().querySelector(tbody);
    };
    Grid2.prototype.getFrozenLeftContentTbody = function() {
      return this.getContent().querySelector(tbody);
    };
    Grid2.prototype.getFrozenRightHeaderTbody = function() {
      return this.getHeaderContent().querySelector(tbody);
    };
    Grid2.prototype.getFrozenRightContentTbody = function() {
      return this.getContent().querySelector(tbody);
    };
    Grid2.prototype.showResponsiveCustomFilter = function(isCustom) {
      if (this.filterModule) {
        this.filterModule.showCustomFilter(isCustom || this.rowRenderingMode === "Vertical");
      }
    };
    Grid2.prototype.showResponsiveCustomSort = function(isCustom) {
      if (this.sortModule) {
        this.sortModule.showCustomSort(isCustom || this.rowRenderingMode === "Vertical");
      }
    };
    Grid2.prototype.showResponsiveCustomColumnChooser = function(isCustom) {
      if (this.columnChooserModule) {
        this.columnChooserModule.showCustomColumnChooser(isCustom || this.rowRenderingMode === "Vertical");
      }
    };
    Grid2.prototype.showAdaptiveFilterDialog = function() {
      if (this.enableAdaptiveUI) {
        this.showResponsiveCustomFilter(true);
      }
    };
    Grid2.prototype.showAdaptiveSortDialog = function() {
      if (this.enableAdaptiveUI) {
        this.showResponsiveCustomSort(true);
      }
    };
    Grid2.prototype.getCurrentVisibleColumns = function(isColVirtualization) {
      var cols = [];
      var gridCols = isColVirtualization ? this.getColumns() : this.columnModel;
      for (var _i = 0, gridCols_1 = gridCols; _i < gridCols_1.length; _i++) {
        var col = gridCols_1[_i];
        if (col.visible) {
          cols.push(col);
        }
      }
      return cols;
    };
    Grid2.prototype.enableInfiniteAggrgate = function() {
      if (this.enableInfiniteScrolling && this.groupSettings.columns.length && !this.groupSettings.disablePageWiseAggregates && !this.groupSettings.enableLazyLoading) {
        this.setProperties({ groupSettings: { disablePageWiseAggregates: true } }, true);
      }
    };
    var Grid_1;
    __decorate$4([
      Property([])
    ], Grid2.prototype, "currentViewData", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "parentDetails", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "showHider", void 0);
    __decorate$4([
      Property([])
    ], Grid2.prototype, "columns", void 0);
    __decorate$4([
      Property(true)
    ], Grid2.prototype, "enableAltRow", void 0);
    __decorate$4([
      Property(true)
    ], Grid2.prototype, "enableHover", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableAutoFill", void 0);
    __decorate$4([
      Property(true)
    ], Grid2.prototype, "allowKeyboard", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableStickyHeader", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowTextWrap", void 0);
    __decorate$4([
      Complex({}, TextWrapSettings)
    ], Grid2.prototype, "textWrapSettings", void 0);
    __decorate$4([
      Complex({}, ResizeSettings)
    ], Grid2.prototype, "resizeSettings", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowPaging", void 0);
    __decorate$4([
      Complex({}, PageSettings)
    ], Grid2.prototype, "pageSettings", void 0);
    __decorate$4([
      Complex({}, LoadingIndicator)
    ], Grid2.prototype, "loadingIndicator", void 0);
    __decorate$4([
      Property(true)
    ], Grid2.prototype, "enableVirtualMaskRow", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableVirtualization", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableColumnVirtualization", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableInfiniteScrolling", void 0);
    __decorate$4([
      Complex({}, SearchSettings)
    ], Grid2.prototype, "searchSettings", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowSorting", void 0);
    __decorate$4([
      Property("Ellipsis")
    ], Grid2.prototype, "clipMode", void 0);
    __decorate$4([
      Property(true)
    ], Grid2.prototype, "allowMultiSorting", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowExcelExport", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowPdfExport", void 0);
    __decorate$4([
      Complex({}, SortSettings)
    ], Grid2.prototype, "sortSettings", void 0);
    __decorate$4([
      Complex({}, InfiniteScrollSettings)
    ], Grid2.prototype, "infiniteScrollSettings", void 0);
    __decorate$4([
      Property(true)
    ], Grid2.prototype, "allowSelection", void 0);
    __decorate$4([
      Property(-1)
    ], Grid2.prototype, "selectedRowIndex", void 0);
    __decorate$4([
      Complex({}, SelectionSettings)
    ], Grid2.prototype, "selectionSettings", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowFiltering", void 0);
    __decorate$4([
      Property("Horizontal")
    ], Grid2.prototype, "rowRenderingMode", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableAdaptiveUI", void 0);
    __decorate$4([
      Property("Both")
    ], Grid2.prototype, "adaptiveUIMode", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowReordering", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowResizing", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowRowDragAndDrop", void 0);
    __decorate$4([
      Complex({}, RowDropSettings)
    ], Grid2.prototype, "rowDropSettings", void 0);
    __decorate$4([
      Complex({}, FilterSettings)
    ], Grid2.prototype, "filterSettings", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "allowGrouping", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableImmutableMode", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "showColumnMenu", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "autoFit", void 0);
    __decorate$4([
      Complex({}, GroupSettings)
    ], Grid2.prototype, "groupSettings", void 0);
    __decorate$4([
      Complex({}, EditSettings)
    ], Grid2.prototype, "editSettings", void 0);
    __decorate$4([
      Collection([], AggregateRow)
    ], Grid2.prototype, "aggregates", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "showColumnChooser", void 0);
    __decorate$4([
      Complex({}, ColumnChooserSettings)
    ], Grid2.prototype, "columnChooserSettings", void 0);
    __decorate$4([
      Property(false)
    ], Grid2.prototype, "enableHeaderFocus", void 0);
    __decorate$4([
      Property("auto")
    ], Grid2.prototype, "height", void 0);
    __decorate$4([
      Property("auto")
    ], Grid2.prototype, "width", void 0);
    __decorate$4([
      Property("Default")
    ], Grid2.prototype, "gridLines", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "rowTemplate", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "emptyRecordTemplate", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "detailTemplate", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "childGrid", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "queryString", void 0);
    __decorate$4([
      Property("AllPages")
    ], Grid2.prototype, "printMode", void 0);
    __decorate$4([
      Property("Expanded")
    ], Grid2.prototype, "hierarchyPrintMode", void 0);
    __decorate$4([
      Property([])
    ], Grid2.prototype, "dataSource", void 0);
    __decorate$4([
      Property(null)
    ], Grid2.prototype, "rowHeight", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "query", void 0);
    __decorate$4([
      Property("USD")
    ], Grid2.prototype, "currencyCode", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "exportGrids", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "toolbar", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "contextMenuItems", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "columnMenuItems", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "toolbarTemplate", void 0);
    __decorate$4([
      Property()
    ], Grid2.prototype, "pagerTemplate", void 0);
    __decorate$4([
      Property(0)
    ], Grid2.prototype, "frozenRows", void 0);
    __decorate$4([
      Property(0)
    ], Grid2.prototype, "frozenColumns", void 0);
    __decorate$4([
      Property("")
    ], Grid2.prototype, "cssClass", void 0);
    __decorate$4([
      Property("All")
    ], Grid2.prototype, "columnQueryMode", void 0);
    __decorate$4([
      Property({})
    ], Grid2.prototype, "currentAction", void 0);
    __decorate$4([
      Property("")
    ], Grid2.prototype, "ej2StatePersistenceVersion", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "created", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "destroyed", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "load", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowDataBound", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "queryCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "headerCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "actionBegin", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "actionComplete", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "actionFailure", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "dataBound", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "recordDoubleClick", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "recordClick", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowSelecting", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowSelected", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowDeselecting", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowDeselected", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "cellSelecting", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "cellSelected", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "cellDeselecting", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "cellDeselected", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnSelecting", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnSelected", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnDeselecting", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnDeselected", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnDragStart", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnDrag", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnDrop", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "printComplete", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforePrint", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "pdfQueryCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "pdfHeaderQueryCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "pdfAggregateQueryCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "excelAggregateQueryCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "exportDetailDataBound", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "exportDetailTemplate", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "excelQueryCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "excelHeaderQueryCellInfo", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeExcelExport", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "excelExportComplete", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforePdfExport", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "pdfExportComplete", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowDragStartHelper", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "detailDataBound", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowDragStart", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowDrag", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "rowDrop", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "toolbarClick", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeOpenColumnChooser", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeOpenAdaptiveDialog", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "batchAdd", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "batchDelete", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "batchCancel", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeBatchAdd", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeBatchDelete", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeBatchSave", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beginEdit", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "commandClick", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "cellEdit", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "cellSave", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "cellSaved", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "resizeStart", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "resizing", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "resizeStop", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "keyPressed", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeDataBound", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "contextMenuOpen", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "contextMenuClick", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnMenuOpen", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnMenuClick", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "checkBoxChange", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeCopy", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforePaste", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeAutoFill", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "columnDataStateChange", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "dataStateChange", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "dataSourceChanged", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "exportGroupCaption", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "lazyLoadGroupExpand", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "lazyLoadGroupCollapse", void 0);
    __decorate$4([
      Event()
    ], Grid2.prototype, "beforeDetailTemplateDetach", void 0);
    Grid2 = Grid_1 = __decorate$4([
      NotifyPropertyChanges
    ], Grid2);
    return Grid2;
  }(Component)
);
function getCloneProperties() {
  return [
    "aggregates",
    "allowGrouping",
    "allowFiltering",
    "allowMultiSorting",
    "allowReordering",
    "allowSorting",
    "allowTextWrap",
    "childGrid",
    "columns",
    "currentViewData",
    "dataSource",
    "detailTemplate",
    "enableAltRow",
    "enableColumnVirtualization",
    "filterSettings",
    "gridLines",
    "groupSettings",
    "height",
    "locale",
    "pageSettings",
    "printMode",
    "query",
    "queryString",
    "enableRtl",
    "rowHeight",
    "rowTemplate",
    "sortSettings",
    "textWrapSettings",
    "allowPaging",
    "hierarchyPrintMode",
    "searchSettings",
    "queryCellInfo",
    "beforeDataBound",
    "enableHtmlSanitizer"
  ];
}
var Print = (
  /** @class */
  function() {
    function Print2(parent, scrollModule) {
      this.isAsyncPrint = false;
      this.defered = new Deferred();
      this.parent = parent;
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.on(contentReady, this.isContentReady(), this);
      this.actionBeginFunction = this.actionBegin.bind(this);
      this.parent.addEventListener(actionBegin, this.actionBeginFunction);
      this.parent.on(onEmpty, this.onEmpty.bind(this));
      this.parent.on(hierarchyPrint, this.hierarchyPrint, this);
      this.scrollModule = scrollModule;
    }
    Print2.prototype.isContentReady = function() {
      var _this = this;
      if (this.isPrintGrid() && (this.parent.hierarchyPrintMode === "None" || !this.parent.childGrid)) {
        return this.contentReady;
      }
      return function() {
        _this.defered.promise.then(function() {
          _this.contentReady();
        });
        if (_this.isPrintGrid()) {
          _this.hierarchyPrint();
        }
      };
    };
    Print2.prototype.hierarchyPrint = function() {
      this.removeColGroup(this.parent);
      var printGridObj = window.printGridObj;
      if (printGridObj && !printGridObj.element.querySelector("[aria-busy=true")) {
        printGridObj.printModule.defered.resolve();
      }
    };
    Print2.prototype.print = function() {
      this.renderPrintGrid();
    };
    Print2.prototype.onEmpty = function() {
      if (this.isPrintGrid()) {
        this.contentReady();
      }
    };
    Print2.prototype.actionBegin = function() {
      if (this.isPrintGrid()) {
        this.isAsyncPrint = true;
      }
    };
    Print2.prototype.renderPrintGrid = function() {
      var gObj = this.parent;
      var element2 = createElement("div", {
        id: this.parent.element.id + "_print",
        className: gObj.element.className + " e-print-grid"
      });
      element2.classList.remove("e-gridhover");
      document.body.appendChild(element2);
      var printGrid = new Grid(getPrintGridModel(gObj, gObj.hierarchyPrintMode));
      for (var i = 0; i < printGrid.columns.length; i++) {
        printGrid.columns[parseInt(i.toString(), 10)] = extend$1({}, printGrid.columns[parseInt(i.toString(), 10)]);
        if (!gObj.getFrozenColumns() && gObj.isFrozenGrid()) {
          printGrid.columns[parseInt(i.toString(), 10)].freeze = void 0;
        }
      }
      if (this.parent.isAngular) {
        printGrid.viewContainerRef = this.parent.viewContainerRef;
      }
      printGrid.load = function() {
      };
      printGrid.query = gObj.getQuery().clone();
      window.printGridObj = printGrid;
      printGrid.isPrinting = true;
      var modules = printGrid.getInjectedModules();
      var injectedModues = gObj.getInjectedModules();
      if (!modules || modules.length !== injectedModues.length) {
        printGrid.setInjectedModules(injectedModues);
      }
      gObj.notify(printGridInit, { element: element2, printgrid: printGrid });
      this.parent.log("exporting_begin", this.getModuleName());
      printGrid.registeredTemplate = this.parent.registeredTemplate;
      printGrid.isVue = this.parent.isVue;
      if (this.parent.isVue) {
        printGrid.vueInstance = this.parent.vueInstance;
      }
      printGrid.printGridParent = gObj;
      printGrid.appendTo(element2);
      if (!gObj.isVue3) {
        printGrid.trigger = gObj.trigger;
      }
    };
    Print2.prototype.contentReady = function() {
      var _this = this;
      if (this.isPrintGrid()) {
        var gObj = this.parent;
        if (this.isAsyncPrint) {
          this.printGrid();
          return;
        }
        var args = {
          requestType: "print",
          element: gObj.element,
          selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected="true"]'),
          cancel: false,
          hierarchyPrintMode: gObj.hierarchyPrintMode
        };
        if (!this.isAsyncPrint) {
          gObj.trigger(beforePrint, args);
        }
        if (args.cancel) {
          detach(gObj.element);
          return;
        }
        if (!this.isAsyncPrint) {
          if (this.parent.printGridParent && this.parent.printGridParent.isReact) {
            this.parent.printGridParent.renderTemplates(function() {
              _this.printGrid();
            });
          } else {
            this.printGrid();
          }
        }
      }
    };
    Print2.prototype.printGrid = function() {
      var gObj = this.parent;
      if (gObj.height !== "auto") {
        var cssProps = this.scrollModule.getCssProperties();
        var contentDiv = gObj.element.querySelector("." + content);
        var headerDiv = gObj.element.querySelector("." + gridHeader);
        contentDiv.style.height = "auto";
        contentDiv.style.overflowY = "auto";
        headerDiv.style[cssProps.padding] = "";
        headerDiv.firstElementChild.style[cssProps.border] = "";
      }
      if (gObj.allowGrouping) {
        if (!gObj.groupSettings.columns.length) {
          gObj.element.querySelector(".e-groupdroparea").style.display = "none";
        } else {
          this.removeColGroup(gObj);
        }
      }
      for (var _i = 0, _a = [].slice.call(gObj.element.getElementsByClassName(content)); _i < _a.length; _i++) {
        var element2 = _a[_i];
        element2.style.overflowX = "hidden";
      }
      var waitingPop = [].slice.call(gObj.element.getElementsByClassName("e-spin-show"));
      for (var _b = 0, _c = [].slice.call(waitingPop); _b < _c.length; _b++) {
        var element2 = _c[_b];
        classList(element2, ["e-spin-hide"], ["e-spin-show"]);
      }
      this.printGridElement(gObj);
      gObj.isPrinting = false;
      delete window.printGridObj;
      var args = {
        element: gObj.element
      };
      gObj.trigger(printComplete, args);
      gObj.destroy();
      this.parent.log("exporting_complete", this.getModuleName());
    };
    Print2.prototype.printGridElement = function(gObj) {
      classList(gObj.element, ["e-print-grid-layout"], ["e-print-grid"]);
      if (gObj.isPrinting) {
        detach(gObj.element);
      }
      this.printWind = window.open("", "print", "height=" + window.outerHeight + ",width=" + window.outerWidth + ",tabbar=no");
      if (!isNullOrUndefined(this.printWind)) {
        this.printWind.moveTo(0, 0);
        this.printWind.resizeTo(screen.availWidth, screen.availHeight);
        this.printWind = print(gObj.element, this.printWind);
      }
    };
    Print2.prototype.removeColGroup = function(gObj) {
      var depth = gObj.groupSettings.columns.length;
      var element2 = gObj.element;
      var id = "#" + gObj.element.id;
      if (!depth) {
        return;
      }
      var groupCaption = selectAll(".e-groupcaption", element2);
      var colSpan = gObj.groupSettings.enableLazyLoading ? (parseInt(groupCaption[0].getAttribute("colspan"), 10) - (gObj.groupSettings.columns.length - 1)).toString() : groupCaption[depth - 1].getAttribute("colspan");
      for (var i = 0; i < groupCaption.length; i++) {
        groupCaption[parseInt(i.toString(), 10)].setAttribute("colspan", colSpan);
      }
      var colGroups = selectAll("colgroup" + id + "colgroup", element2);
      var contentColGroups = selectAll(".e-content colgroup", element2);
      var footerColGroups = selectAll(".e-summarycontent colgroup", element2);
      this.hideColGroup(colGroups, depth);
      this.hideColGroup(contentColGroups, depth);
      this.hideColGroup(footerColGroups, depth);
    };
    Print2.prototype.hideColGroup = function(colGroups, depth) {
      for (var i = 0; i < colGroups.length; i++) {
        for (var j = 0; j < depth; j++) {
          colGroups[parseInt(i.toString(), 10)].children[parseInt(j.toString(), 10)].style.display = "none";
        }
      }
    };
    Print2.prototype.isPrintGrid = function() {
      return this.parent.element.id.indexOf("_print") > 0 && this.parent.isPrinting;
    };
    Print2.prototype.destroy = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.off(contentReady, this.contentReady.bind(this));
      this.parent.removeEventListener(actionBegin, this.actionBeginFunction);
      this.parent.off(onEmpty, this.onEmpty.bind(this));
      this.parent.off(hierarchyPrint, this.hierarchyPrint);
    };
    Print2.prototype.getModuleName = function() {
      return "print";
    };
    Print2.printGridProp = getCloneProperties().concat([beforePrint, printComplete, load]);
    return Print2;
  }()
);
function doesImplementInterface(target, checkFor) {
  return target.prototype && checkFor in target.prototype;
}
function valueAccessor(field, data, column) {
  return isNullOrUndefined(field) || field === "" ? "" : DataUtil.getObject(field, data);
}
function getUpdateUsingRaf(updateFunction, callBack) {
  requestAnimationFrame(function() {
    try {
      callBack(null, updateFunction());
    } catch (e) {
      callBack(e);
    }
  });
}
function iterateArrayOrObject(collection, predicate) {
  var result = [];
  for (var i = 0, len = collection.length; i < len; i++) {
    var pred = predicate(collection[parseInt(i.toString(), 10)], i);
    if (!isNullOrUndefined(pred)) {
      result.push(pred);
    }
  }
  return result;
}
function iterateExtend(array) {
  var obj = [];
  for (var i = 0; i < array.length; i++) {
    obj.push(extend$1({}, getActualProperties(array[parseInt(i.toString(), 10)]), {}, true));
  }
  return obj;
}
function templateCompiler(template) {
  if (template) {
    try {
      var validSelector = template[0] !== "<";
      if (typeof template === "function") {
        return compile$1(template);
      } else if (validSelector && document.querySelectorAll(template).length) {
        return compile$1(document.querySelector(template).innerHTML.trim());
      } else {
        return compile$1(template);
      }
    } catch (e) {
      return compile$1(template);
    }
  }
  return void 0;
}
function setStyleAndAttributes(node, customAttributes) {
  var copyAttr = {};
  var literals = ["style", "class"];
  extend$1(copyAttr, customAttributes, {});
  if ("style" in copyAttr) {
    setStyleAttribute(node, copyAttr[literals[0]]);
    delete copyAttr[literals[0]];
  }
  if ("class" in copyAttr) {
    addClass([node], copyAttr[literals[1]]);
    delete copyAttr[literals[1]];
  }
  attributes(node, copyAttr);
}
function extend(copied, first, second, exclude) {
  var moved = extend$1(copied, first, second);
  var values = Object.keys(moved);
  for (var i = 0; i < values.length; i++) {
    if (exclude && exclude.indexOf(values[parseInt(i.toString(), 10)]) !== -1) {
      delete moved[values[parseInt(i.toString(), 10)]];
    }
  }
  return moved;
}
function setColumnIndex(columnModel, ind) {
  if (ind === void 0) {
    ind = 0;
  }
  for (var i = 0, len = !isNullOrUndefined(columnModel) ? columnModel.length : 0; i < len; i++) {
    if (columnModel[parseInt(i.toString(), 10)].columns) {
      columnModel[parseInt(i.toString(), 10)].index = isNullOrUndefined(columnModel[parseInt(i.toString(), 10)].index) ? ind : columnModel[parseInt(i.toString(), 10)].index;
      ind++;
      ind = setColumnIndex(columnModel[parseInt(i.toString(), 10)].columns, ind);
    } else {
      columnModel[parseInt(i.toString(), 10)].index = isNullOrUndefined(columnModel[parseInt(i.toString(), 10)].index) ? ind : columnModel[parseInt(i.toString(), 10)].index;
      ind++;
    }
  }
  return ind;
}
function prepareColumns(columns, autoWidth, gObj) {
  for (var c = 0, len = !isNullOrUndefined(columns) ? columns.length : 0; c < len; c++) {
    var column = void 0;
    if (typeof columns[parseInt(c.toString(), 10)] === "string") {
      column = new Column({ field: columns[parseInt(c.toString(), 10)] }, gObj);
    } else if (!(columns[parseInt(c.toString(), 10)] instanceof Column) || columns[parseInt(c.toString(), 10)].columns) {
      if (!columns[parseInt(c.toString(), 10)].columns) {
        column = new Column(columns[parseInt(c.toString(), 10)], gObj);
      } else {
        columns[parseInt(c.toString(), 10)].columns = prepareColumns(columns[parseInt(c.toString(), 10)].columns, null, gObj);
        column = new Column(columns[parseInt(c.toString(), 10)], gObj);
      }
    } else {
      column = columns[parseInt(c.toString(), 10)];
    }
    if (column.type && column.type.toLowerCase() === "checkbox") {
      column.allowReordering = false;
    }
    column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || "" : column.headerText;
    column.foreignKeyField = column.foreignKeyField || column.field;
    column.valueAccessor = (typeof column.valueAccessor === "string" ? getValue(column.valueAccessor, window) : column.valueAccessor) || valueAccessor;
    column.headerValueAccessor = typeof column.headerValueAccessor === "string" ? getValue(column.headerValueAccessor, window) : column.headerValueAccessor;
    column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;
    if (isNullOrUndefined(column.visible)) {
      column.visible = true;
    }
    columns[parseInt(c.toString(), 10)] = column;
  }
  return columns;
}
function setCssInGridPopUp(popUp, e, className) {
  var popUpSpan = popUp.querySelector("span");
  var position = popUp.parentElement.getBoundingClientRect();
  var targetPosition = e.target.getBoundingClientRect();
  popUpSpan.className = className;
  popUp.style.display = "";
  var isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY : e.clientY) > popUp.offsetHeight + 10;
  popUp.style.top = targetPosition.top - position.top + (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + "px";
  popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + "px";
  if (isBottomTail) {
    popUp.querySelector(".e-downtail").style.display = "";
    popUp.querySelector(".e-uptail").style.display = "none";
  } else {
    popUp.querySelector(".e-downtail").style.display = "none";
    popUp.querySelector(".e-uptail").style.display = "";
  }
}
function getPopupLeftPosition(popup, e, targetPosition, left) {
  var width = popup.offsetWidth / 2;
  var x = getPosition(e).x;
  if (x - targetPosition.left < width) {
    return targetPosition.left - left;
  } else if (targetPosition.right - x < width) {
    return targetPosition.right - left - width * 2;
  } else {
    return x - left - width;
  }
}
function getActualProperties(obj) {
  if (obj instanceof ChildProperty) {
    return getValue("properties", obj);
  } else {
    return obj;
  }
}
function parentsUntil(elem, selector, isID) {
  var parent = elem;
  while (parent) {
    if (parent.classList.contains(selector)) {
      break;
    }
    parent = parent.parentElement;
  }
  return parent;
}
function getActualPropFromColl(collection) {
  var coll = [];
  for (var i = 0, len = collection.length; i < len; i++) {
    if (collection[parseInt(i.toString(), 10)].hasOwnProperty("properties")) {
      coll.push(collection[parseInt(i.toString(), 10)].properties);
    } else {
      coll.push(collection[parseInt(i.toString(), 10)]);
    }
  }
  return coll;
}
function getPosition(e) {
  var position = {};
  position.x = isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX : e.clientX;
  position.y = isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY : e.clientY;
  return position;
}
var uid = 0;
function getUid(prefix) {
  return prefix + uid++;
}
function appendChildren(elem, children) {
  for (var i = 0, len = children.length; i < len; i++) {
    if (len === children.length) {
      elem.appendChild(children[parseInt(i.toString(), 10)]);
    } else {
      elem.appendChild(children[0]);
    }
  }
  return elem;
}
function calculateAggregate(type, data, column, context) {
  if (type === "Custom") {
    var temp = column.customAggregate;
    if (typeof temp === "string") {
      temp = getValue(temp, window);
    }
    return temp ? temp.call(context, data, column) : "";
  }
  return column.field in data || data instanceof Array ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;
}
var scrollWidth = null;
function getScrollBarWidth() {
  if (scrollWidth !== null) {
    return scrollWidth;
  }
  var divNode = document.createElement("div");
  var value = 0;
  divNode.style.cssText = "width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;";
  document.body.appendChild(divNode);
  value = divNode.offsetWidth - divNode.clientWidth | 0;
  document.body.removeChild(divNode);
  return scrollWidth = value;
}
var rowHeight;
var accurateRowHeight;
function getRowHeight(element2, accurateHeight) {
  if (accurateHeight && accurateRowHeight !== void 0) {
    return accurateRowHeight;
  }
  if (rowHeight !== void 0) {
    return rowHeight;
  }
  var table$1 = createElement("table", { className: table, attrs: { role: "grid" } });
  table$1.style.visibility = "hidden";
  table$1.innerHTML = '<tr><td class="e-rowcell">A<td></tr>';
  element2.appendChild(table$1);
  var rect = table$1.querySelector("td").getBoundingClientRect();
  element2.removeChild(table$1);
  accurateRowHeight = rect.height;
  rowHeight = Math.ceil(rect.height);
  if (accurateHeight) {
    return accurateRowHeight;
  }
  return rowHeight;
}
function isComplexField(field) {
  return field.split(".").length > 1;
}
function isActionPrevent(inst) {
  var dlg = select("#" + inst.element.id + "EditConfirm", inst.element);
  return inst.editSettings.mode === "Batch" && (selectAll(".e-updatedtd", inst.element).length || selectAll(".e-gridform.e-formvalidator", inst.element).length) && inst.editSettings.showConfirmDialog && (dlg ? dlg.classList.contains("e-popup-close") : true);
}
function wrap(elem, action) {
  var clName = "e-wrap";
  elem = elem instanceof Array ? elem : [elem];
  for (var i = 0; i < elem.length; i++) {
    if (action) {
      elem[parseInt(i.toString(), 10)].classList.add(clName);
    } else {
      elem[parseInt(i.toString(), 10)].classList.remove(clName);
    }
  }
}
function setFormatter(serviceLocator, column) {
  var fmtr = serviceLocator.getService("valueFormatter");
  var format = "format";
  var args;
  if (column.type === "date" || column.type === "datetime" || column.type === "dateonly") {
    args = { type: column.type === "dateonly" ? "date" : column.type, skeleton: column.format };
    if (typeof column.format === "string" && column.format !== "yMd") {
      args["" + format] = column.format;
    }
  }
  switch (column.type) {
    case "date":
      column.setFormatter(fmtr.getFormatFunction(args));
      column.setParser(fmtr.getParserFunction(args));
      break;
    case "dateonly":
      column.setFormatter(fmtr.getFormatFunction(args));
      column.setParser(fmtr.getParserFunction(args));
      break;
    case "datetime":
      column.setFormatter(fmtr.getFormatFunction(args));
      column.setParser(fmtr.getParserFunction(args));
      break;
    case "number":
      column.setFormatter(fmtr.getFormatFunction({ format: column.format }));
      column.setParser(fmtr.getParserFunction({ format: column.format }));
      break;
  }
}
function addRemoveActiveClasses(cells, add) {
  var args = [];
  for (var _i = 2; _i < arguments.length; _i++) {
    args[_i - 2] = arguments[_i];
  }
  for (var i = 0, len = cells.length; i < len; i++) {
    if (add) {
      classList(cells[parseInt(i.toString(), 10)], args.slice(), []);
      cells[parseInt(i.toString(), 10)].setAttribute("aria-selected", "true");
    } else {
      classList(cells[parseInt(i.toString(), 10)], [], args.slice());
      cells[parseInt(i.toString(), 10)].removeAttribute("aria-selected");
    }
  }
}
function getFilterMenuPostion(target, dialogObj) {
  var elementVisible = dialogObj.element.style.display;
  dialogObj.element.style.display = "block";
  var dlgWidth = dialogObj.width;
  var newpos = calculateRelativeBasedPosition(target, dialogObj.element);
  dialogObj.element.style.display = elementVisible;
  dialogObj.element.style.top = newpos.top + target.getBoundingClientRect().height - 5 + "px";
  var leftPos = newpos.left - dlgWidth + target.clientWidth;
  if (leftPos < 1) {
    dialogObj.element.style.left = dlgWidth + leftPos - 16 + "px";
  } else {
    dialogObj.element.style.left = leftPos + -4 + "px";
  }
}
function toogleCheckbox(elem) {
  var span = elem.querySelector(".e-frame");
  var input = span.previousSibling;
  if (span.classList.contains("e-check")) {
    input.checked = false;
    classList(span, ["e-uncheck"], ["e-check"]);
  } else {
    input.checked = true;
    classList(span, ["e-check"], ["e-uncheck"]);
  }
}
function setChecked(elem, checked) {
  elem.checked = checked;
}
function createCboxWithWrap(uid2, elem, className) {
  var div = createElement("div", { className });
  div.appendChild(elem);
  div.setAttribute("uid", uid2);
  return div;
}
function removeAddCboxClasses(elem, checked) {
  removeClass([elem], ["e-check", "e-stop", "e-uncheck"]);
  if (checked) {
    elem.classList.add("e-check");
  } else {
    elem.classList.add("e-uncheck");
  }
}
function refreshForeignData(row2, columns, data) {
  for (var i = 0; i < (!isNullOrUndefined(columns) ? columns.length : 0); i++) {
    setValue(columns[parseInt(i.toString(), 10)].field, getForeignData(columns[parseInt(i.toString(), 10)], data), row2.foreignKeyData);
  }
  var cells = row2.cells;
  for (var i = 0; i < cells.length; i++) {
    if (cells[parseInt(i.toString(), 10)].isForeignKey) {
      setValue("foreignKeyData", getValue(cells[parseInt(i.toString(), 10)].column.field, row2.foreignKeyData), cells[parseInt(i.toString(), 10)]);
    }
  }
}
function getForeignData(column, data, lValue, foreignKeyData2) {
  var fField = column.foreignKeyField;
  var key = !isNullOrUndefined(lValue) ? lValue : valueAccessor(column.field, data);
  key = isNullOrUndefined(key) ? "" : key;
  var query = new Query();
  var fdata = foreignKeyData2 || (column.dataSource instanceof DataManager && column.dataSource.dataSource.json.length ? column.dataSource.dataSource.json : column.columnData);
  if (key.getDay) {
    query.where(getDatePredicate({ field: fField, operator: "equal", value: key, matchCase: false }));
  } else {
    query.where(fField, "==", key, false);
  }
  return new DataManager(fdata).executeLocal(query);
}
function getColumnByForeignKeyValue(foreignKeyValue, columns) {
  var column;
  return columns.some(function(col) {
    column = col;
    return col.foreignKeyValue === foreignKeyValue;
  }) && column;
}
function padZero(value) {
  if (value < 10) {
    return "0" + value;
  }
  return String(value);
}
function getDatePredicate(filterObject, type, isExecuteLocal) {
  var datePredicate;
  var prevDate;
  var nextDate;
  var prevObj = extend$1({}, getActualProperties(filterObject));
  var nextObj = extend$1({}, getActualProperties(filterObject));
  if (isNullOrUndefined(filterObject.value) || filterObject.value === "") {
    datePredicate = new Predicate$1(prevObj.field, prevObj.operator, prevObj.value, false);
    return datePredicate;
  }
  var value = new Date(filterObject.value);
  if (type === "dateonly" && !isExecuteLocal) {
    if (typeof prevObj.value === "string") {
      prevObj.value = new Date(prevObj.value);
    }
    var dateOnlyString = prevObj.value.getFullYear() + "-" + padZero(prevObj.value.getMonth() + 1) + "-" + padZero(prevObj.value.getDate());
    var predicates = new Predicate$1(prevObj.field, prevObj.operator, dateOnlyString, false);
    datePredicate = predicates;
  } else {
    filterObject.operator = filterObject.operator.toLowerCase();
    if (filterObject.operator === "equal" || filterObject.operator === "notequal") {
      if (type === "datetime") {
        prevDate = new Date(value.setSeconds(value.getSeconds() - 1));
        nextDate = new Date(value.setSeconds(value.getSeconds() + 2));
        filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));
      } else {
        prevDate = new Date(value.setHours(0) - 1);
        nextDate = new Date(value.setHours(24));
      }
      prevObj.value = prevDate;
      nextObj.value = nextDate;
      if (filterObject.operator === "equal") {
        prevObj.operator = "greaterthan";
        nextObj.operator = "lessthan";
      } else if (filterObject.operator === "notequal") {
        prevObj.operator = "lessthanorequal";
        nextObj.operator = "greaterthanorequal";
      }
      var predicateSt = new Predicate$1(prevObj.field, prevObj.operator, prevObj.value, false);
      var predicateEnd = new Predicate$1(nextObj.field, nextObj.operator, nextObj.value, false);
      datePredicate = filterObject.operator === "equal" ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);
    } else {
      if (type === "date" && (filterObject.operator === "lessthanorequal" || filterObject.operator === "greaterthan")) {
        prevObj.value = new Date(value.setHours(24) - 1);
      }
      if (typeof prevObj.value === "string") {
        prevObj.value = new Date(prevObj.value);
      }
      var predicates = new Predicate$1(prevObj.field, prevObj.operator, prevObj.value, false);
      datePredicate = predicates;
    }
  }
  if (filterObject.setProperties) {
    filterObject.setProperties({ ejpredicate: datePredicate }, true);
  } else {
    filterObject.ejpredicate = datePredicate;
  }
  return datePredicate;
}
function isGroupAdaptive(grid) {
  return grid.enableVirtualization && grid.groupSettings.columns.length > 0 && grid.isVirtualAdaptive && !grid.groupSettings.enableLazyLoading;
}
function getObject(field, object) {
  if (field === void 0) {
    field = "";
  }
  if (field) {
    var value = object;
    var splits = field.split(".");
    for (var i = 0; i < splits.length && !isNullOrUndefined(value); i++) {
      value = value[splits[parseInt(i.toString(), 10)]];
      if (isUndefined(value)) {
        var newCase = splits[parseInt(i.toString(), 10)].charAt(0).toUpperCase() + splits[parseInt(i.toString(), 10)].slice(1);
        value = object["" + newCase] || object[("" + newCase).charAt(0).toLowerCase() + ("" + newCase).slice(1)];
      }
    }
    return value;
  }
}
function getExpandedState(gObj, hierarchyPrintMode) {
  var rows = gObj.getRowsObject();
  var obj = {};
  for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {
    var row2 = rows_1[_i];
    if (row2.isExpand && !row2.isDetailRow) {
      var index = gObj.allowPaging && gObj.printMode === "AllPages" ? row2.index + gObj.pageSettings.currentPage * gObj.pageSettings.pageSize - gObj.pageSettings.pageSize : row2.index;
      if (!isNullOrUndefined(index)) {
        obj[parseInt(index.toString(), 10)] = {};
        obj[parseInt(index.toString(), 10)].isExpand = true;
        if (gObj.childGrid) {
          obj[parseInt(index.toString(), 10)].gridModel = getPrintGridModel(row2.childGrid, hierarchyPrintMode);
          obj[parseInt(index.toString(), 10)].gridModel.query = gObj.childGrid.query;
        }
      }
    }
  }
  return obj;
}
function getPrintGridModel(gObj, hierarchyPrintMode) {
  if (hierarchyPrintMode === void 0) {
    hierarchyPrintMode = "Expanded";
  }
  var printGridModel = {};
  if (!gObj) {
    return printGridModel;
  }
  for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {
    var key = _a[_i];
    if (key === "columns") {
      printGridModel["" + key] = getActualPropFromColl(gObj["" + key]);
    } else if (key === "allowPaging") {
      printGridModel["" + key] = gObj.printMode === "CurrentPage";
    } else {
      printGridModel["" + key] = getActualProperties(gObj["" + key]);
    }
  }
  printGridModel["enableHover"] = false;
  if ((gObj.childGrid || gObj.detailTemplate) && hierarchyPrintMode !== "None") {
    printGridModel.expandedRows = getExpandedState(gObj, hierarchyPrintMode);
  }
  return printGridModel;
}
function extendObjWithFn(copied, first, second, deep) {
  var res = copied || {};
  var len = arguments.length;
  for (var i = 1; i < len; i++) {
    if (!arguments[parseInt(i.toString(), 10)]) {
      continue;
    }
    var obj1 = arguments[parseInt(i.toString(), 10)];
    var keys2 = Object.keys(Object.getPrototypeOf(obj1)).length ? Object.keys(obj1).concat(getPrototypesOfObj(obj1)) : Object.keys(obj1);
    for (var i_1 = 0; i_1 < keys2.length; i_1++) {
      res[keys2[parseInt(i_1.toString(), 10)]];
      var cpy = obj1[keys2[parseInt(i_1.toString(), 10)]];
      {
        res[keys2[parseInt(i_1.toString(), 10)]] = cpy;
      }
    }
  }
  return res;
}
function getPrototypesOfObj(obj) {
  var keys2 = [];
  while (Object.getPrototypeOf(obj) && Object.keys(Object.getPrototypeOf(obj)).length) {
    keys2 = keys2.concat(Object.keys(Object.getPrototypeOf(obj)));
    obj = Object.getPrototypeOf(obj);
  }
  return keys2;
}
function measureColumnDepth(column) {
  var max = 0;
  for (var i = 0; i < (!isNullOrUndefined(column) ? column.length : 0); i++) {
    var depth = checkDepth(column[parseInt(i.toString(), 10)], 0);
    if (max < depth) {
      max = depth;
    }
  }
  return max + 1;
}
function checkDepth(col, index) {
  var max = index;
  var indices = [];
  if (col.columns) {
    index++;
    for (var i = 0; i < col.columns.length; i++) {
      indices[parseInt(i.toString(), 10)] = checkDepth(col.columns[parseInt(i.toString(), 10)], index);
    }
    for (var j = 0; j < indices.length; j++) {
      if (max < indices[parseInt(j.toString(), 10)]) {
        max = indices[parseInt(j.toString(), 10)];
      }
    }
    index = max;
  }
  return index;
}
function refreshFilteredColsUid(gObj, filteredCols) {
  for (var i = 0; i < filteredCols.length; i++) {
    filteredCols[parseInt(i.toString(), 10)].uid = filteredCols[parseInt(i.toString(), 10)].isForeignKey ? getColumnByForeignKeyValue(filteredCols[parseInt(i.toString(), 10)].field, gObj.getForeignKeyColumns()).uid : gObj.enableColumnVirtualization ? getColumnModelByFieldName(gObj, filteredCols[parseInt(i.toString(), 10)].field).uid : gObj.getColumnByField(filteredCols[parseInt(i.toString(), 10)].field).uid;
  }
}
var Global;
(function(Global2) {
  Global2.timer = null;
})(Global || (Global = {}));
function getTransformValues(element2) {
  var style = document.defaultView.getComputedStyle(element2, null);
  var transformV = style.getPropertyValue("transform");
  var replacedTv = transformV.replace(/,/g, "");
  var translateX = parseFloat(replacedTv.split(" ")[4]);
  var translateY = parseFloat(replacedTv.split(" ")[5]);
  return { width: translateX, height: translateY };
}
function getScrollWidth(gObj) {
  var scrollElem = gObj.getContent().firstElementChild;
  return scrollElem.scrollWidth > scrollElem.offsetWidth ? getScrollBarWidth() : 0;
}
function resetColspanGroupCaption(gObj, idx) {
  var colspan = 0;
  var cols = gObj.getColumns();
  var width = idx * 30;
  if (gObj.isRowDragable()) {
    colspan++;
    width += 30;
  }
  colspan += gObj.groupSettings.columns.length - idx;
  width += 30 * (gObj.groupSettings.columns.length - idx);
  var gridWidth = (gObj.width === "auto" ? gObj.element.offsetWidth : gObj.width.toString().indexOf("%") !== -1 ? gObj.element.getBoundingClientRect().width : parseInt(gObj.width.toString(), 10)) - getScrollWidth(gObj);
  for (var i = 0; i < cols.length; i++) {
    if (cols[parseInt(i.toString(), 10)].visible) {
      width += parseInt(cols[parseInt(i.toString(), 10)].width.toString(), 10);
      colspan++;
    }
    if (width > gridWidth) {
      colspan--;
      break;
    }
  }
  return colspan;
}
function groupCaptionRowLeftRightPos(tr, gObj) {
  var width = 0;
  var idx = 0;
  var frozenCount = gObj.getVisibleFrozenLeftCount();
  for (var j = 0; j < tr.childNodes.length; j++) {
    var td = tr.childNodes[parseInt(j.toString(), 10)];
    if (frozenCount === idx) {
      break;
    }
    if (td.classList.contains("e-groupcaption") || td.classList.contains("e-summarycell")) {
      idx += parseInt(td.getAttribute("colspan"), 10);
    }
    td.classList.add("e-leftfreeze");
    if (td.classList.contains("e-groupcaption") && parseInt(td.getAttribute("colspan"), 10) === 1) {
      td.classList.add("e-freezeleftborder");
    }
    applyStickyLeftRightPosition(td, width, gObj.enableRtl, "Left");
    if (td.classList.contains("e-indentcell") || td.classList.contains("e-recordplusexpand") || td.classList.contains("e-recordpluscollapse")) {
      width += 30;
    }
    if (td.classList.contains("e-groupcaption")) {
      var colspan = parseInt(td.getAttribute("colspan"), 10);
      if (gObj.isRowDragable()) {
        colspan--;
        width += 30;
      }
      colspan = colspan - (gObj.groupSettings.columns.length - j);
      width = width + 30 * (gObj.groupSettings.columns.length - j);
      var cols = gObj.getColumns();
      for (var i = 0; i < cols.length; i++) {
        if (parseInt(td.getAttribute("colspan"), 10) > 1 && parseInt(cols[parseInt(i.toString(), 10)].width.toString(), 10) + width > parseInt(gObj.width.toString(), 10) - getScrollWidth(gObj)) {
          var newColspan = resetColspanGroupCaption(gObj, j);
          td.setAttribute("colspan", newColspan.toString());
          break;
        }
        if (cols[parseInt(i.toString(), 10)].visible) {
          width += parseInt(cols[parseInt(i.toString(), 10)].width.toString(), 10);
          colspan--;
        }
        if (colspan === 0) {
          break;
        }
      }
    }
    if (td.classList.contains("e-summarycell")) {
      var uid_1 = td.getAttribute("e-mappinguid");
      var column = gObj.getColumnByUid(uid_1);
      width += parseInt(column.width.toString(), 10);
    }
  }
}
function eventPromise(args, query) {
  var state = getStateEventArgument(query);
  var def = new Deferred();
  state.dataSource = def.resolve;
  state.action = args;
  return { state, deffered: def };
}
function getStateEventArgument(query) {
  var adaptr = new UrlAdaptor();
  var dm = new DataManager({ url: "", adaptor: new UrlAdaptor() });
  var state = adaptr.processQuery(dm, query);
  var data = JSON.parse(state.data);
  return data;
}
function ispercentageWidth(gObj) {
  var columns = gObj.getVisibleColumns();
  var percentageCol = 0;
  var undefinedWidthCol = 0;
  for (var i = 0; i < columns.length; i++) {
    if (isUndefined(columns[parseInt(i.toString(), 10)].width)) {
      undefinedWidthCol++;
    } else if (columns[parseInt(i.toString(), 10)].width.toString().indexOf("%") !== -1) {
      percentageCol++;
    }
  }
  return (gObj.width === "auto" || typeof gObj.width === "string" && gObj.width.indexOf("%") !== -1) && !gObj.groupSettings.showGroupedColumn && gObj.groupSettings.columns.length && percentageCol && !undefinedWidthCol;
}
function resetRowIndex(gObj, rows, rowElms, index, startRowIndex) {
  var startIndex = 0;
  for (var i = 0; i < rows.length; i++) {
    if (rows[parseInt(i.toString(), 10)] && rows[parseInt(i.toString(), 10)].isDataRow) {
      rows[parseInt(i.toString(), 10)].index = startIndex;
      rows[parseInt(i.toString(), 10)].isAltRow = gObj.enableAltRow ? startIndex % 2 !== 0 : false;
      rowElms[parseInt(i.toString(), 10)].setAttribute(ariaRowIndex, (startIndex + 1).toString());
      if (rows[parseInt(i.toString(), 10)].isAltRow) {
        rowElms[parseInt(i.toString(), 10)].classList.add("e-altrow");
      } else {
        rowElms[parseInt(i.toString(), 10)].classList.remove("e-altrow");
      }
      for (var j = 0; j < rowElms[parseInt(i.toString(), 10)].cells.length; j++) {
        rowElms[parseInt(i.toString(), 10)].cells[parseInt(j.toString(), 10)].setAttribute("index", startIndex.toString());
      }
      startIndex++;
    }
  }
  if (!rows.length) {
    gObj.renderModule.emptyRow(true);
  }
}
function compareChanges(gObj, changes, type, keyField) {
  var newArray = gObj.dataToBeUpdated["" + type].concat(changes["" + type]).reduce(function(r, o) {
    r[o["" + keyField]] = r[o["" + keyField]] === void 0 ? o : Object.assign(r[o["" + keyField]], o);
    return r;
  }, {});
  gObj.dataToBeUpdated["" + type] = Object.keys(newArray).map(function(k) {
    return newArray["" + k];
  });
}
function setRowElements(gObj) {
  if (gObj.enableInfiniteScrolling && (gObj.childGrid || gObj.detailTemplate)) {
    gObj.contentModule.rowElements = [].slice.call(gObj.getContentTable().rows).filter(function(row2) {
      return (row2.classList.contains("e-row") || row2.classList.contains("e-detailrow")) && !row2.classList.contains("e-addedrow");
    });
    return;
  }
  gObj.contentModule.rowElements = [].slice.call(gObj.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"));
}
function resetDialogAppend(gObj, dlgObj) {
  var element2 = gObj.createElement("div", { className: "e-grid-popup", id: gObj.element.id + "_e-popup" });
  var pos = calculatePosition(gObj.element, "left", "Top");
  if (document.getElementById(gObj.element.id + "_e-popup")) {
    element2 = document.getElementById(gObj.element.id + "_e-popup");
  }
  element2.style.top = pos.top + "px";
  element2.style.left = pos.left + "px";
  element2.style.zIndex = dlgObj.zIndex.toString();
  element2.style.width = dlgObj.element.offsetWidth + "px";
  element2.appendChild(dlgObj.element);
  var sbPanel = parentsUntil(gObj.element, "sb-demo-section") || parentsUntil(gObj.element, "e-grid-dialog-fixed");
  if (sbPanel) {
    var sbPos = calculateRelativeBasedPosition(gObj.element, sbPanel);
    element2.style.top = sbPos.top + "px";
    element2.style.left = sbPos.left + "px";
    sbPanel.insertBefore(element2, sbPanel.firstChild);
  } else {
    document.body.insertBefore(element2, document.body.firstChild);
  }
}
function isChildColumn(column, uid2) {
  var uids = [];
  uids.push(column.uid);
  pushuid(column, uids);
  if (uids.indexOf(uid2) > -1) {
    return true;
  } else {
    return false;
  }
}
function pushuid(column, uids) {
  for (var i = 0; i < column.columns.length; i++) {
    if (column.columns[parseInt(i.toString(), 10)].uid) {
      uids.push(column.columns[parseInt(i.toString(), 10)].uid);
    }
    if (column.columns[parseInt(i.toString(), 10)].columns && column.columns[parseInt(i.toString(), 10)].columns.length) {
      pushuid(column.columns[parseInt(i.toString(), 10)], uids);
    }
  }
}
function frozenDirection(column) {
  if (column.columns[0].freeze || column.columns[0].isFrozen) {
    if (column.columns[0].freeze === "Left" || column.columns[0].isFrozen) {
      return "Left";
    } else if (column.columns[0].freeze === "Right") {
      return "Right";
    } else if (column.columns[0].freeze === "Fixed") {
      return "Fixed";
    } else {
      return "None";
    }
  } else {
    if (column.columns[0].columns && column.columns[0].columns.length) {
      return frozenDirection(column.columns[0]);
    } else {
      return "None";
    }
  }
}
function addFixedColumnBorder(row2) {
  if (row2.querySelector(".e-fixedfreeze")) {
    var cells = [].slice.call(row2.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)"));
    for (var j = 0; j < cells.length; j++) {
      if (cells[parseInt(j.toString(), 10)].classList.contains("e-fixedfreeze") && (!cells[j - 1] || cells[j - 1] && !cells[j - 1].classList.contains("e-fixedfreeze"))) {
        cells[parseInt(j.toString(), 10)].classList.add("e-freezeleftborder");
      }
      if (cells[parseInt(j.toString(), 10)].classList.contains("e-fixedfreeze") && (!cells[j + 1] || cells[j + 1] && !cells[j + 1].classList.contains("e-fixedfreeze"))) {
        cells[parseInt(j.toString(), 10)].classList.add("e-freezerightborder");
      }
    }
  }
}
function applyStickyLeftRightPosition(node, width, isRtl, position) {
  if (position === "Left") {
    if (isRtl) {
      node.style.right = width + "px";
    } else {
      node.style.left = width + "px";
    }
  }
  if (position === "Right") {
    if (isRtl) {
      node.style.left = width + "px";
    } else {
      node.style.right = width + "px";
    }
  }
}
function resetColandRowSpanStickyPosition(gObj, column, node, colSpan) {
  var columns = gObj.getColumns();
  var index = column.index;
  if (column.freeze === "Left" && column.border !== "Left") {
    var idx = index + (colSpan - 1);
    while (columns[parseInt(idx.toString(), 10)].visible === false) {
      idx++;
    }
    if (columns[parseInt(idx.toString(), 10)].border === "Left") {
      node.classList.add("e-freezeleftborder");
    }
  } else if (column.freeze === "Right" || column.freeze === "Fixed") {
    var width = 0;
    for (var j = index + 1; j < index + colSpan; j++) {
      if (j === columns.length) {
        break;
      }
      if (columns[parseInt(j.toString(), 10)].visible) {
        width += parseInt(columns[parseInt(j.toString(), 10)].width.toString(), 10);
      } else {
        colSpan++;
      }
    }
    if (gObj.enableRtl) {
      node.style.left = parseInt(node.style.left, 10) - width + "px";
    } else {
      node.style.right = parseInt(node.style.right, 10) - width + "px";
    }
  }
}
function getCellFromRow(gObj, rowIndex, colIndex) {
  var row2 = gObj.getRowByIndex(rowIndex);
  for (var i = 0; i < row2.cells.length; i++) {
    if (parseInt(row2.cells[parseInt(i.toString(), 10)].getAttribute("aria-colindex").toString(), 10) - 1 === colIndex) {
      return row2.cells[parseInt(i.toString(), 10)];
    }
  }
  return null;
}
function addStickyColumnPosition(gObj, column, node) {
  if (column.freeze === "Left" || column.isFrozen) {
    node.classList.add("e-leftfreeze");
    if (column.border === "Left") {
      node.classList.add("e-freezeleftborder");
    }
    if (column.index === 0) {
      applyStickyLeftRightPosition(node, gObj.getIndentCount() * 30, gObj.enableRtl, "Left");
      if (gObj.enableColumnVirtualization) {
        column.valueX = gObj.getIndentCount() * 30;
      }
    } else {
      var cols = gObj.getColumns();
      var width = gObj.getIndentCount() * 30;
      for (var i = 0; i < cols.length; i++) {
        if (column.uid === cols[parseInt(i.toString(), 10)].uid) {
          break;
        }
        if (cols[parseInt(i.toString(), 10)].visible) {
          width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
        }
      }
      applyStickyLeftRightPosition(node, width, gObj.enableRtl, "Left");
      if (gObj.enableColumnVirtualization) {
        column.valueX = width;
      }
    }
  } else if (column.freeze === "Right") {
    node.classList.add("e-rightfreeze");
    var cols = gObj.getColumns();
    if (column.border === "Right") {
      node.classList.add("e-freezerightborder");
    }
    if (column.index === cols[cols.length - 1].index) {
      var width = gObj.getFrozenMode() === "Right" && gObj.isRowDragable() ? 30 : 0;
      applyStickyLeftRightPosition(node, width, gObj.enableRtl, "Right");
      if (gObj.enableColumnVirtualization) {
        column.valueX = width;
      }
    } else {
      var width = gObj.getFrozenMode() === "Right" && gObj.isRowDragable() ? 30 : 0;
      for (var i = cols.length - 1; i >= 0; i--) {
        if (column.uid === cols[parseInt(i.toString(), 10)].uid) {
          break;
        }
        if (cols[parseInt(i.toString(), 10)].visible) {
          width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
        }
      }
      applyStickyLeftRightPosition(node, width, gObj.enableRtl, "Right");
      if (gObj.enableColumnVirtualization) {
        column.valueX = width;
      }
    }
  } else if (column.freeze === "Fixed") {
    node.classList.add("e-fixedfreeze");
    var cols = gObj.getColumns();
    var width = 0;
    if (gObj.getVisibleFrozenLeftCount()) {
      width = gObj.getIndentCount() * 30;
    } else if (gObj.getFrozenMode() === "Right") {
      width = gObj.groupSettings.columns.length * 30;
    }
    for (var i = 0; i < cols.length; i++) {
      if (column.uid === cols[parseInt(i.toString(), 10)].uid) {
        break;
      }
      if (cols[parseInt(i.toString(), 10)].freeze === "Left" || cols[parseInt(i.toString(), 10)].isFrozen || cols[parseInt(i.toString(), 10)].freeze === "Fixed") {
        if (cols[parseInt(i.toString(), 10)].visible) {
          width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
        }
      }
    }
    applyStickyLeftRightPosition(node, width - 1, gObj.enableRtl, "Left");
    width = gObj.getFrozenMode() === "Right" && gObj.isRowDragable() ? 30 : 0;
    for (var i = cols.length - 1; i >= 0; i--) {
      if (column.uid === cols[parseInt(i.toString(), 10)].uid) {
        break;
      }
      if (cols[parseInt(i.toString(), 10)].freeze === "Right" || cols[parseInt(i.toString(), 10)].freeze === "Fixed") {
        if (cols[parseInt(i.toString(), 10)].visible) {
          width += parseFloat(cols[parseInt(i.toString(), 10)].width.toString());
        }
      }
    }
    applyStickyLeftRightPosition(node, width - 1, gObj.enableRtl, "Right");
  } else {
    node.classList.add("e-unfreeze");
  }
}
function getCellsByTableName(gObj, col, rowIndex) {
  return [].slice.call(gObj.getDataRows()[parseInt(rowIndex.toString(), 10)].getElementsByClassName(rowCell));
}
function getCellByColAndRowIndex(gObj, col, rowIndex, index) {
  return getCellsByTableName(gObj, col, rowIndex)[parseInt(index.toString(), 10)];
}
function getNumberFormat(numberFormat, type, isExcel, currencyCode) {
  var format;
  var intl = new Internationalization();
  if (type === "number") {
    try {
      format = intl.getNumberPattern({ format: numberFormat, currency: currencyCode, useGrouping: true }, true);
    } catch (error) {
      format = numberFormat;
    }
  } else if (type === "date" || type === "time" || type === "datetime") {
    try {
      format = intl.getDatePattern({ skeleton: numberFormat, type }, isExcel);
      if (isNullOrUndefined(format)) {
        throw "error";
      }
    } catch (error) {
      try {
        format = intl.getDatePattern({ format: numberFormat, type }, isExcel);
      } catch (error2) {
        format = numberFormat;
      }
    }
  } else {
    format = numberFormat;
  }
  if (type !== "number") {
    var patternRegex = /G|H|c|'| a|yy|y|EEEE|E/g;
    var mtch_1 = { "G": "", "H": "h", "c": "d", "'": '"', " a": " AM/PM", "yy": "yy", "y": "yyyy", "EEEE": "dddd", "E": "ddd" };
    format = format.replace(patternRegex, function(pattern) {
      return mtch_1["" + pattern];
    });
  }
  return format;
}
function addBiggerDialog(gObj) {
  if (gObj.enableAdaptiveUI) {
    var dialogs = document.getElementsByClassName("e-responsive-dialog");
    for (var i = 0; i < dialogs.length; i++) {
      dialogs[parseInt(i.toString(), 10)].classList.add("e-bigger");
    }
  }
}
function performComplexDataOperation(value, mapObject) {
  var returnObj;
  var length = value.split(".").length;
  var splits = value.split(".");
  var duplicateMap = mapObject;
  for (var i = 0; i < length; i++) {
    returnObj = duplicateMap[splits[parseInt(i.toString(), 10)]];
    duplicateMap = returnObj;
  }
  return returnObj;
}
function setDisplayValue(tr, idx, displayVal, rows, parent, isContent) {
  var trs = Object.keys(tr);
  var actualIndex = idx;
  for (var i = 0; i < trs.length; i++) {
    var td = tr[trs[parseInt(i.toString(), 10)]].querySelectorAll("td.e-rowcell")[parseInt(idx.toString(), 10)];
    if (parent && !parent.isFrozenGrid() && !parent.isRowDragable()) {
      td = !isNullOrUndefined(td) && (parseInt(td.getAttribute("aria-colindex"), 10) - 1 === idx || parentsUntil(td, "e-addedrow") && td.parentElement.childNodes[parseInt(idx.toString(), 10)] === td) ? td : tr[parseInt(i.toString(), 10)].querySelector('td[aria-colindex="' + (idx + 1) + '"]');
      if (isNullOrUndefined(td)) {
        continue;
      } else {
        idx = parent.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand") ? td.cellIndex - 1 : td.cellIndex;
      }
    }
    if (tr[trs[parseInt(i.toString(), 10)]].querySelectorAll("td.e-rowcell").length && td) {
      setStyleAttribute(tr[trs[parseInt(i.toString(), 10)]].querySelectorAll("td.e-rowcell")[parseInt(idx.toString(), 10)], { "display": displayVal });
      if (tr[trs[parseInt(i.toString(), 10)]].querySelectorAll("td.e-rowcell")[parseInt(idx.toString(), 10)].classList.contains("e-hide")) {
        removeClass([tr[trs[parseInt(i.toString(), 10)]].querySelectorAll("td.e-rowcell")[parseInt(idx.toString(), 10)]], ["e-hide"]);
      }
      if (isContent && parent.isRowDragable() || parent && parent.isDetail()) {
        var index = idx + 1;
        rows[trs[parseInt(i.toString(), 10)]].cells[parseInt(index.toString(), 10)].visible = displayVal === "" ? true : false;
      } else {
        if (!isNullOrUndefined(rows[trs[parseInt(i.toString(), 10)]])) {
          rows[trs[parseInt(i.toString(), 10)]].cells[parseInt(idx.toString(), 10)].visible = displayVal === "" ? true : false;
          if (rows[trs[parseInt(i.toString(), 10)]].cells[parseInt(idx.toString(), 10)].visible === false) {
            tr[trs[parseInt(i.toString(), 10)]].querySelectorAll("td.e-rowcell")[parseInt(idx.toString(), 10)].classList.add("e-hide");
          }
        }
      }
      idx = actualIndex;
    }
  }
}
function addRemoveEventListener(parent, evt, isOn, module) {
  for (var _i = 0, evt_1 = evt; _i < evt_1.length; _i++) {
    var inst = evt_1[_i];
    if (isOn) {
      parent.on(inst.event, inst.handler, module);
    } else {
      parent.off(inst.event, inst.handler);
    }
  }
}
function getColumnModelByFieldName(gObj, field) {
  var column;
  if (!gObj.columnModel) {
    gObj.getColumns();
  }
  for (var _i = 0, _a = gObj.columnModel; _i < _a.length; _i++) {
    var col = _a[_i];
    if (col.field === field) {
      column = col;
      break;
    }
  }
  return column;
}
function clearReactVueTemplates(parent, templates) {
  parent.destroyTemplate(templates);
  if (parent.isReact) {
    parent.renderTemplates();
  }
}
function infiniteRemoveElements(removeElem) {
  for (var i = 0; i < removeElem.length; i++) {
    remove(removeElem[i]);
  }
}
function infiniteAppendElements(appendElem, ulElement) {
  for (var i = 0; i < appendElem.length; i++) {
    ulElement.insertBefore(appendElem[i], ulElement.children[i]);
  }
}
function getListHeight(element2, isChooser) {
  var listDiv = createElement("div", { className: "e-ftrchk" });
  listDiv.style.visibility = "hidden";
  listDiv.innerHTML = '<div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"></span><span class="e-label e-checkboxfiltertext">A</div></span>';
  element2.appendChild(listDiv);
  var rect = listDiv.getBoundingClientRect();
  element2.removeChild(listDiv);
  var listHeight = Math.round(rect.height);
  return listHeight;
}
function findCellIndex(checkActiveMatrix, checkCellIndex, next) {
  var activeMatrix = checkActiveMatrix;
  var cellIndex = checkCellIndex;
  var currentCellIndexPass = false;
  if (next) {
    for (var i = cellIndex[0]; i < activeMatrix.length; i++) {
      var rowCell2 = activeMatrix[parseInt(i.toString(), 10)];
      for (var j = 0; j < rowCell2.length; j++) {
        if (currentCellIndexPass && activeMatrix[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)] === 1) {
          cellIndex = [i, j];
          return cellIndex;
        }
        if (!currentCellIndexPass && cellIndex.toString() === [i, j].toString()) {
          currentCellIndexPass = true;
        }
      }
    }
  } else {
    for (var i = cellIndex[0]; i >= 0; i--) {
      var rowCell2 = activeMatrix[parseInt(i.toString(), 10)];
      for (var j = rowCell2.length - 1; j >= 0; j--) {
        if (currentCellIndexPass && activeMatrix[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)] === 1) {
          cellIndex = [i, j];
          return cellIndex;
        }
        if (!currentCellIndexPass && cellIndex.toString() === [i, j].toString()) {
          currentCellIndexPass = true;
        }
      }
    }
  }
  return cellIndex;
}
var CheckBoxFilterBase = (
  /** @class */
  function() {
    function CheckBoxFilterBase2(parent) {
      this.searchInputArgs = null;
      this.isExecuteLocal = false;
      this.queryFilteredColumn = [];
      this.existingPredicate = {};
      this.foreignKeyQuery = new Query();
      this.filterState = true;
      this.values = {};
      this.renderEmpty = false;
      this.isCheckboxFilterTemplate = false;
      this.infiniteRenderMod = false;
      this.infiniteInitialLoad = false;
      this.infiniteSearchValChange = false;
      this.infinitePermenantLocalData = [];
      this.infiniteQueryExecutionPending = false;
      this.infiniteSkipCnt = 0;
      this.infiniteScrollAppendDiff = 0;
      this.prevInfiniteScrollDirection = "";
      this.infiniteLoadedElem = [];
      this.infiniteDataCount = 0;
      this.infiniteLocalSelectAll = true;
      this.localInfiniteSelectAllClicked = false;
      this.localInfiniteSelectionInteracted = false;
      this.infiniteManualSelectMaintainPred = [];
      this.parent = parent;
      this.id = this.parent.element.id;
      this.valueFormatter = new ValueFormatter(this.parent.locale);
      this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: " " });
      this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: " " });
      this.cBoxTrue.insertBefore(this.parent.createElement("input", {
        className: "e-chk-hidden",
        attrs: { type: "checkbox" }
      }), this.cBoxTrue.firstChild);
      this.cBoxFalse.insertBefore(this.parent.createElement("input", {
        className: "e-chk-hidden",
        attrs: { "type": "checkbox" }
      }), this.cBoxFalse.firstChild);
      this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck");
      if (this.parent.enableRtl) {
        addClass([this.cBoxTrue, this.cBoxFalse], ["e-rtl"]);
      }
      if (this.parent.cssClass) {
        if (this.parent.cssClass.indexOf(" ") !== -1) {
          addClass([this.cBoxTrue, this.cBoxFalse], this.parent.cssClass.split(" "));
        } else {
          addClass([this.cBoxTrue, this.cBoxFalse], [this.parent.cssClass]);
        }
      }
    }
    CheckBoxFilterBase2.prototype.destroy = function() {
      this.closeDialog();
    };
    CheckBoxFilterBase2.prototype.wireEvents = function() {
      EventHandler.add(this.dlg, "click", this.clickHandler, this);
      EventHandler.add(this.dlg, "keyup", this.keyupHandler, this);
      this.searchHandler = debounce(this.searchBoxKeyUp, 200);
      var elem = this.dialogObj.element.querySelector(".e-searchinput");
      if (elem) {
        EventHandler.add(elem, "keyup", this.searchHandler, this);
        EventHandler.add(elem, "input", this.searchHandler, this);
      }
    };
    CheckBoxFilterBase2.prototype.unWireEvents = function() {
      EventHandler.remove(this.dlg, "click", this.clickHandler);
      EventHandler.remove(this.dlg, "keyup", this.keyupHandler);
      var elem = this.dialogObj.element.querySelector(".e-searchinput");
      if (elem) {
        EventHandler.remove(elem, "keyup", this.searchHandler);
        EventHandler.remove(elem, "input", this.searchHandler);
      }
    };
    CheckBoxFilterBase2.prototype.foreignKeyFilter = function(args, fColl, mPredicate) {
      var _this = this;
      var fPredicate = {};
      var filterCollection = [];
      var query = this.foreignKeyQuery.clone();
      this.options.column.dataSource.executeQuery(query.where(mPredicate)).then(function(e) {
        _this.options.column.columnData = e.result;
        _this.parent.notify(generateQuery, { predicate: fPredicate, column: _this.options.column });
        args.ejpredicate = fPredicate.predicate.predicates;
        var fpred = fPredicate.predicate.predicates;
        for (var i = 0; i < fpred.length; i++) {
          filterCollection.push({
            field: fpred[parseInt(i.toString(), 10)].field,
            predicate: "or",
            matchCase: fpred[parseInt(i.toString(), 10)].ignoreCase,
            ignoreAccent: fpred[parseInt(i.toString(), 10)].ignoreAccent,
            operator: fpred[parseInt(i.toString(), 10)].operator,
            value: fpred[parseInt(i.toString(), 10)].value,
            type: _this.options.type
          });
        }
        args.filterCollection = filterCollection.length ? filterCollection : fColl.filter(function(col) {
          return col.field = _this.options.field;
        });
        _this.options.handler(args);
      });
    };
    CheckBoxFilterBase2.prototype.searchBoxClick = function(e) {
      var target = e.target;
      if (target.classList.contains("e-searchclear")) {
        this.sInput.value = target.classList.contains("e-chkcancel-icon") ? "" : this.sInput.value;
        if (this.isCheckboxFilterTemplate) {
          this.parent.notify("refreshCheckbox", { event: e });
        } else {
          this.refreshCheckboxes();
        }
        this.updateSearchIcon();
        this.sInput.focus();
      }
    };
    CheckBoxFilterBase2.prototype.searchBoxKeyUp = function(e) {
      if (isNullOrUndefined(this.sInput)) {
        return;
      }
      if (isNullOrUndefined(e) || e.key !== "ArrowUp" && e.key !== "ArrowDown" && e.key !== "Tab" && !(e.key === "Tab" && e.shiftKey)) {
        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === "Shimmer") {
          this.parent.showMaskRow(void 0, this.dialogObj.element);
        }
        if (this.isCheckboxFilterTemplate) {
          this.parent.notify("refreshCheckbox", { event: e });
        } else {
          this.refreshCheckboxes();
        }
        this.updateSearchIcon();
      }
    };
    CheckBoxFilterBase2.prototype.updateSearchIcon = function() {
      if (this.sInput.value.length) {
        classList(this.sIcon, ["e-chkcancel-icon"], ["e-search-icon"]);
        if (!isNullOrUndefined(document.body.querySelector(".e-chkcancel-icon"))) {
          document.body.querySelector(".e-chkcancel-icon").setAttribute("title", this.localeObj.getConstant("Clear"));
        }
      } else {
        classList(this.sIcon, ["e-search-icon"], ["e-chkcancel-icon"]);
        if (!isNullOrUndefined(document.body.querySelector(".e-searchclear.e-search-icon"))) {
          document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title", this.localeObj.getConstant("Search"));
        }
      }
    };
    CheckBoxFilterBase2.prototype.getLocalizedLabel = function(key) {
      return this.localeObj.getConstant(key);
    };
    CheckBoxFilterBase2.prototype.updateDataSource = function() {
      var dataSource = this.options.dataSource;
      var str = "object";
      if (!(dataSource instanceof DataManager)) {
        for (var i = 0; i < dataSource.length; i++) {
          if (typeof dataSource !== str) {
            var obj = {};
            obj[this.options.field] = dataSource[parseInt(i.toString(), 10)];
            dataSource[parseInt(i.toString(), 10)] = obj;
          }
        }
      }
    };
    CheckBoxFilterBase2.prototype.updateModel = function(options) {
      this.options = options;
      this.existingPredicate = options.actualPredicate || {};
      this.options.dataSource = options.dataSource;
      this.options.dataManager = options.dataManager ? options.dataManager : options.dataSource;
      this.updateDataSource();
      this.options.type = options.type;
      this.options.format = options.format || "";
      this.options.ignoreAccent = options.ignoreAccent || false;
      this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;
      this.options.query = options.query || new Query();
      this.options.allowCaseSensitive = options.allowCaseSensitive || false;
      this.options.uid = options.column.uid;
      this.options.disableHtmlEncode = options.column.disableHtmlEncode || false;
      this.values = {};
      this.localeObj = options.localeObj;
      this.isFiltered = options.filteredColumns.length;
      this.infiniteRenderMod = this.parent.filterSettings && this.parent.filterSettings.enableInfiniteScrolling ? true : false;
      this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];
    };
    CheckBoxFilterBase2.prototype.getAndSetChkElem = function(options) {
      this.dlg = this.parent.createElement("div", {
        id: this.id + this.options.type + "_excelDlg",
        attrs: { uid: this.options.column.uid },
        className: "e-checkboxfilter e-filter-popup"
      });
      this.sBox = this.parent.createElement("div", { className: "e-searchcontainer" });
      if (!options.hideSearchbox) {
        this.sInput = this.parent.createElement("input", {
          id: this.id + "_SearchBox",
          className: "e-searchinput"
        });
        this.sIcon = this.parent.createElement("span", {
          className: "e-searchclear e-search-icon e-icons e-input-group-icon",
          attrs: {
            type: "text",
            title: this.getLocalizedLabel("Search")
          }
        });
        this.searchBox = this.parent.createElement("span", { className: "e-searchbox e-fields" });
        this.searchBox.appendChild(this.sInput);
        this.sBox.appendChild(this.searchBox);
        this.searchInputArgs = {
          element: this.sInput,
          floatLabelType: "Never",
          properties: {
            placeholder: this.getLocalizedLabel("Search"),
            cssClass: this.parent.cssClass
          }
        };
        Input.createInput(this.searchInputArgs, this.parent.createElement);
        this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon);
      }
      this.spinner = this.parent.createElement("div", { className: "e-spinner" });
      this.cBox = this.parent.createElement("div", {
        id: this.id + this.options.type + "_CheckBoxList",
        className: "e-checkboxlist e-fields"
      });
      this.spinner.appendChild(this.cBox);
      this.sBox.appendChild(this.spinner);
      return this.sBox;
    };
    CheckBoxFilterBase2.prototype.showDialog = function(options) {
      var args = {
        requestType: filterBeforeOpen,
        columnName: this.options.field,
        columnType: this.options.type,
        cancel: false
      };
      var filterModel = "filterModel";
      args["" + filterModel] = this;
      this.parent.notify(cBoxFltrBegin, args);
      if (args.cancel) {
        options.cancel = args.cancel;
        return;
      }
      this.dialogObj = new Dialog({
        visible: false,
        content: this.sBox,
        close: this.closeDialog.bind(this),
        enableRtl: this.parent.enableRtl,
        width: !isNullOrUndefined(parentsUntil(options.target, "e-bigger")) || this.parent.element.classList.contains("e-device") ? 260 : 255,
        target: this.parent.element,
        animationSettings: { effect: "None" },
        buttons: [
          {
            click: this.btnClick.bind(this),
            buttonModel: {
              content: this.getLocalizedLabel(this.isExcel ? "OKButton" : "FilterButton"),
              cssClass: this.parent.cssClass ? "e-primary " + this.parent.cssClass : "e-primary",
              isPrimary: true
            }
          },
          {
            click: this.btnClick.bind(this),
            buttonModel: {
              cssClass: this.parent.cssClass ? "e-flat " + this.parent.cssClass : "e-flat",
              content: this.getLocalizedLabel(this.isExcel ? "CancelButton" : "ClearButton")
            }
          }
        ],
        created: this.dialogCreated.bind(this),
        open: this.dialogOpen.bind(this),
        cssClass: this.parent.cssClass ? this.parent.cssClass : ""
      });
      var isStringTemplate = "isStringTemplate";
      this.dialogObj["" + isStringTemplate] = true;
      this.renderResponsiveFilter(options);
      var dialogLabel = this.parent.filterSettings && this.parent.filterSettings.type === "CheckBox" ? this.getLocalizedLabel("CheckBoxFilterDialogARIA") : this.getLocalizedLabel("ExcelFilterDialogARIA");
      this.dlg.setAttribute("aria-label", dialogLabel);
      if (options.isResponsiveFilter) {
        var responsiveCnt = document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");
        responsiveCnt.appendChild(this.dlg);
      } else {
        this.parent.element.appendChild(this.dlg);
      }
      this.dialogObj.appendTo(this.dlg);
      this.dialogObj.element.style.maxHeight = options.isResponsiveFilter ? "none" : this.options.height + "px";
      this.dialogObj.show();
      if (this.parent && this.parent.filterSettings && (this.parent.filterSettings.type === "CheckBox" || this.options.column && this.options.column.filter && this.options.column.filter.type === "CheckBox") && this.parent.getContent().firstElementChild.offsetHeight < this.dialogObj.element.offsetHeight && !parentsUntil(this.parent.element, "e-gantt-dialog")) {
        resetDialogAppend(this.parent, this.dialogObj);
      }
      var content2 = this.dialogObj.element.querySelector(".e-dlg-content");
      content2.appendChild(this.sBox);
      this.wireEvents();
      if (!this.parent.enableAdaptiveUI) {
        if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === "Shimmer" && !this.infiniteRenderMod) {
          this.parent.showMaskRow(void 0, this.dialogObj.element);
        }
        if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === "Shimmer") {
          this.showMask();
        }
      } else {
        if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === "Shimmer") {
          this.getAllData();
          return;
        }
        if (this.infiniteRenderMod) {
          this.cBox.style.marginTop = getListHeight(this.cBox) + "px";
        }
      }
      if (!(this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === "Shimmer")) {
        createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent.createElement);
        showSpinner(this.spinner);
      }
      this.getAllData();
    };
    CheckBoxFilterBase2.prototype.renderResponsiveFilter = function(options) {
      if (options.isResponsiveFilter) {
        this.dialogObj.buttons = [{}];
        this.dialogObj.position = { X: "", Y: "" };
        this.dialogObj.target = document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv");
        this.dialogObj.width = "100%";
      }
    };
    CheckBoxFilterBase2.prototype.dialogCreated = function(e) {
      if (this.options.isResponsiveFilter) {
        this.dialogObj.element.style.left = "0px";
      } else {
        if (!Browser.isDevice) {
          getFilterMenuPostion(this.options.target, this.dialogObj);
        } else {
          this.dialogObj.position = { X: "center", Y: "center" };
        }
      }
      if (this.options.column.showColumnMenu) {
        this.parent.notify(filterDialogCreated, e);
      }
    };
    CheckBoxFilterBase2.prototype.openDialog = function(options) {
      this.updateModel(options);
      this.getAndSetChkElem(options);
      this.showDialog(options);
    };
    CheckBoxFilterBase2.prototype.closeDialog = function() {
      if (this.infiniteRenderMod && this.infinitePermenantLocalData.length && !this.options.isRemote) {
        this.options.dataSource.dataSource.json = this.infinitePermenantLocalData;
      }
      if (this.dialogObj && !this.dialogObj.isDestroyed) {
        this.isBlanks = false;
        var filterTemplateCol = this.options.columns.filter(function(col) {
          return col.getFilterItemTemplate();
        });
        var registeredTemplate = this.parent.registeredTemplate;
        if (filterTemplateCol.length && !isNullOrUndefined(registeredTemplate) && registeredTemplate.filterItemTemplate) {
          this.parent.destroyTemplate(["filterItemTemplate"]);
        }
        if ((this.parent.isReact || this.parent.isVue) && this.parent.destroyTemplate !== void 0) {
          clearReactVueTemplates(this.parent, ["filterItemTemplate"]);
        }
        this.parent.notify(filterMenuClose, { field: this.options.field });
        this.unWireEvents();
        if (this.searchInputArgs && this.searchInputArgs.element && this.searchInputArgs.element.parentElement) {
          Input.destroy(this.searchInputArgs);
          remove(this.searchInputArgs.element);
        }
        this.searchInputArgs = null;
        this.sInput = null;
        if (this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== "string" && (this.options.column.filter.type === "CheckBox" || this.options.column.filter.type === "Excel")) {
          this.dialogObj.element.querySelector(".e-dlg-content").innerHTML = "";
        }
        this.dialogObj.destroy();
        if (this.dialogObj["dlgClosedBy"] === "escape") {
          this.parent.isColumnMenuFilterClosing = true;
        }
        if (this.dlg && this.dlg.parentElement) {
          remove(this.dlg);
          var gridPopup = document.getElementById(this.parent.element.id + "_e-popup");
          if (!isNullOrUndefined(gridPopup)) {
            remove(gridPopup);
            gridPopup = null;
          }
        }
        this.dlg = null;
        this.parent.notify(filterDialogClose, {});
      }
    };
    CheckBoxFilterBase2.prototype.clearFilter = function(col) {
      var args = { instance: this, handler: this.clearFilter, cancel: false };
      this.parent.notify(fltrPrevent, args);
      if (args.cancel) {
        return;
      }
      this.options.handler({ action: "clear-filter", field: col ? col.field : this.options.field });
    };
    CheckBoxFilterBase2.prototype.btnClick = function(e) {
      if (this.filterState) {
        if (e.target.tagName.toLowerCase() === "input" && e.target.classList.contains("e-searchinput") || e.keyCode === 13) {
          if (!this.isCheckboxFilterTemplate) {
            this.fltrBtnHandler();
          }
        } else {
          var text = e.target.firstChild.textContent.toLowerCase();
          if (this.getLocalizedLabel(this.isExcel ? "OKButton" : "FilterButton").toLowerCase() === text) {
            if (!this.isCheckboxFilterTemplate) {
              this.fltrBtnHandler();
            }
          } else if (this.getLocalizedLabel("ClearButton").toLowerCase() === text) {
            this.clearFilter();
          }
        }
        this.closeDialog();
      } else if (e.target && e.target.firstChild && e.target.firstChild.textContent.toLowerCase() === this.getLocalizedLabel("CancelButton").toLowerCase()) {
        this.closeDialog();
      } else if (!(e.target.tagName.toLowerCase() === "input")) {
        this.clearFilter();
        this.closeDialog();
      }
      if (this.options.column.showColumnMenu) {
        this.parent.notify(afterFilterColumnMenuClose, {});
      }
      if (!isNullOrUndefined(this.parent.focusModule)) {
        this.parent.focusModule.filterfocus();
      }
    };
    CheckBoxFilterBase2.prototype.fltrBtnHandler = function() {
      var _this = this;
      if (this.infiniteRenderMod) {
        this.cBox.innerHTML = "";
        appendChildren(this.cBox, this.infiniteLoadedElem.slice());
      }
      var checked = [].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)"));
      var check = checked;
      var optr = "equal";
      var ddlValue = this.dialogObj.element.querySelector(".e-dropdownlist");
      if (ddlValue) {
        this.options.operator = optr = ddlValue.ej2_instances[0].value;
      }
      this.isMenuNotEqual = this.options.operator === "notequal";
      var searchInput;
      if (!this.options.hideSearchbox) {
        searchInput = this.searchBox.querySelector(".e-searchinput");
      }
      var caseSen = this.options.allowCaseSensitive;
      var defaults = {
        field: this.options.field,
        predicate: this.isMenuNotEqual ? "and" : "or",
        uid: this.options.uid,
        operator: optr,
        type: this.options.type,
        matchCase: caseSen,
        ignoreAccent: this.options.ignoreAccent
      };
      var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;
      if (isNotEqual && searchInput && searchInput.value === "") {
        optr = this.isMenuNotEqual ? "equal" : "notequal";
        checked = [].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)"));
        defaults.predicate = this.isMenuNotEqual ? "or" : "and";
        defaults.operator = optr;
      }
      var val;
      var length;
      var coll = [];
      if (checked.length !== this.itemsCnt || searchInput && searchInput.value && searchInput.value !== "" || this.infiniteRenderMod) {
        if (!this.infiniteRenderMod) {
          coll = this.complexQueryPredicate(checked, defaults, isNotEqual);
          if (isNullOrUndefined(coll)) {
            return;
          }
          coll = this.filterPreventColumns ? this.filterPreventColumns : coll;
        } else if (this.infiniteRenderMod && (!this.infiniteSearchPred || this.infiniteSearchPred && !this.infiniteSearchPred.isComplex)) {
          this.infiniteFltrBtnHandler(coll);
        } else {
          if (this.infiniteSearchPred.isComplex) {
            coll = this.complexQueryPredicate(checked, defaults, isNotEqual);
          }
        }
        if ((this.options.type === "date" || this.options.type === "dateonly" || this.options.type === "datetime") && check.length) {
          length = check.length - 1;
          val = this.values[parentsUntil(check[parseInt(length.toString(), 10)], "e-ftrchk").getAttribute("uid")];
          if (isNullOrUndefined(val) && isNotEqual) {
            coll.push({
              field: defaults.field,
              matchCase: defaults.matchCase,
              operator: "equal",
              predicate: "or",
              value: null
            });
          }
        }
        var addCurrSelection = this.infiniteRenderMod ? this.sBox.querySelector(".e-add-current") : this.cBox.querySelector(".e-add-current");
        if (addCurrSelection && addCurrSelection.classList.contains("e-check")) {
          var existingPredicate_1 = this.existingPredicate[this.options.field];
          if (existingPredicate_1) {
            var _loop_1 = function(j2) {
              if (!coll.some(function(data) {
                return data.value === existingPredicate_1[parseInt(j2.toString(), 10)].value;
              })) {
                coll.push(existingPredicate_1[parseInt(j2.toString(), 10)]);
              }
            };
            for (var j = 0; j < existingPredicate_1.length; j++) {
              _loop_1(j);
            }
          } else {
            return;
          }
        }
        if (!this.infiniteRenderMod) {
          this.initiateFilter(coll);
        } else if (coll.length) {
          this.initiateFilter(coll);
        } else if (this.sBox.querySelector(".e-selectall").classList.contains("e-check") && !coll.length) {
          var isClearFilter = this.options.filteredColumns.some(function(value) {
            return _this.options.field === value.field;
          });
          if (isClearFilter) {
            this.clearFilter();
          }
        }
      } else {
        var isClearFilter = this.options.filteredColumns.some(function(value) {
          return _this.options.field === value.field;
        });
        if (isClearFilter) {
          this.clearFilter();
        }
      }
    };
    CheckBoxFilterBase2.prototype.complexQueryPredicate = function(checkBoxChecked, defaults, isNotEqual) {
      var value;
      var fObj;
      var coll = [];
      for (var i = 0; i < checkBoxChecked.length; i++) {
        value = this.values[parentsUntil(checkBoxChecked[parseInt(i.toString(), 10)], "e-ftrchk").getAttribute("uid")];
        fObj = extend$1({}, { value }, defaults);
        if (value && !value.toString().length) {
          fObj.operator = isNotEqual ? "notequal" : "equal";
        }
        if (value === "" || isNullOrUndefined(value)) {
          coll = coll.concat(CheckBoxFilterBase2.generateNullValuePredicates(defaults));
        } else {
          coll.push(fObj);
        }
      }
      var filterColumns = this.filterPreventColumns && this.filterPreventColumns.length ? this.filterPreventColumns[0] : fObj;
      if (filterColumns && !this.notifyFilterPrevEvent(filterColumns)) {
        this.filterPreventColumns = coll;
        return null;
      } else {
        return coll;
      }
    };
    CheckBoxFilterBase2.prototype.infiniteFltrBtnHandler = function(coll) {
      var value;
      if (this.infiniteManualSelectMaintainPred.length) {
        for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {
          var pred = this.infiniteManualSelectMaintainPred[i];
          value = pred.value + "";
          if (value === "" || isNullOrUndefined(value)) {
            var dummyDefaults = {
              predicate: pred.predicate,
              field: pred.field,
              type: pred.type,
              uid: pred.uid,
              operator: pred.operator,
              matchCase: pred.matchCase,
              ignoreAccent: pred.ignoreAccent
            };
            coll.push.apply(coll, CheckBoxFilterBase2.generateNullValuePredicates(dummyDefaults));
          } else {
            coll.push(this.infiniteManualSelectMaintainPred[i]);
          }
          this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i]);
        }
      }
      if (!this.localInfiniteSelectAllClicked && this.sInput.value === "" && !(!this.options.parentCurrentViewDataCount && coll.length)) {
        for (var i = 0; i < this.infiniteUnloadParentExistPred.length; i++) {
          coll.unshift(this.infiniteUnloadParentExistPred[i]);
          this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);
        }
      }
      if (this.sInput.value !== "" && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {
        this.infiniteSearchPred["predicate"] = "or";
        coll.unshift(this.infiniteSearchPred);
        this.notifyFilterPrevEvent(this.infiniteSearchPred);
      }
    };
    CheckBoxFilterBase2.prototype.notifyFilterPrevEvent = function(predicate) {
      var args = {
        instance: this,
        handler: this.fltrBtnHandler,
        arg1: predicate.field,
        arg2: predicate.predicate,
        arg3: predicate.operator,
        arg4: predicate.matchCase,
        arg5: predicate.ignoreAccent,
        arg6: predicate.value,
        cancel: false
      };
      this.parent.notify(fltrPrevent, args);
      if (args.cancel) {
        return false;
      }
      return true;
    };
    CheckBoxFilterBase2.generateNullValuePredicates = function(defaults) {
      var coll = [];
      if (defaults.type === "string") {
        coll.push({
          field: defaults.field,
          ignoreAccent: defaults.ignoreAccent,
          matchCase: defaults.matchCase,
          operator: defaults.operator,
          predicate: defaults.predicate,
          value: ""
        });
      }
      coll.push({
        field: defaults.field,
        matchCase: defaults.matchCase,
        operator: defaults.operator,
        predicate: defaults.predicate,
        value: null
      });
      coll.push({
        field: defaults.field,
        matchCase: defaults.matchCase,
        operator: defaults.operator,
        predicate: defaults.predicate,
        value: void 0
      });
      return coll;
    };
    CheckBoxFilterBase2.prototype.initiateFilter = function(fColl) {
      var firstVal = fColl[0];
      var predicate;
      if (!isNullOrUndefined(firstVal)) {
        predicate = firstVal.ejpredicate ? firstVal.ejpredicate : new Predicate$1(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);
        for (var j = 1; j < fColl.length; j++) {
          predicate = fColl[parseInt(j.toString(), 10)].ejpredicate !== void 0 ? predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].ejpredicate) : predicate[fColl[parseInt(j.toString(), 10)].predicate](fColl[parseInt(j.toString(), 10)].field, fColl[parseInt(j.toString(), 10)].operator, fColl[parseInt(j.toString(), 10)].value, !fColl[parseInt(j.toString(), 10)].matchCase, fColl[parseInt(j.toString(), 10)].ignoreAccent);
        }
        var args = {
          action: "filtering",
          filterCollection: fColl,
          field: this.options.field,
          ejpredicate: Predicate$1.or(predicate)
        };
        this.options.handler(args);
      }
    };
    CheckBoxFilterBase2.prototype.isForeignColumn = function(col) {
      return col.isForeignColumn ? col.isForeignColumn() : false;
    };
    CheckBoxFilterBase2.prototype.refreshCheckboxes = function() {
      var _this = this;
      var val = this.sInput.value;
      var column = this.options.column;
      var query = this.isForeignColumn(column) ? this.foreignKeyQuery.clone() : this.options.query.clone();
      var foreignQuery = this.options.query.clone();
      var pred = query.queries.filter(function(e) {
        return e && e.fn === "onWhere";
      })[0];
      query.queries = [];
      foreignQuery.queries = [];
      var parsed = this.options.type !== "string" && parseFloat(val) ? parseFloat(val) : val;
      var operator = this.options.isRemote ? this.options.type === "string" ? "contains" : "equal" : this.options.type ? "contains" : "equal";
      var matchCase = true;
      var ignoreAccent = this.options.ignoreAccent;
      var field = this.isForeignColumn(column) ? column.foreignKeyValue : column.field;
      parsed = parsed === "" || parsed === void 0 ? void 0 : parsed;
      var coll = [];
      var defaults = {
        field,
        predicate: "or",
        uid: this.options.uid,
        operator: "equal",
        type: this.options.type,
        matchCase,
        ignoreAccent
      };
      var predicte;
      var moduleName = this.options.dataManager.adaptor.getModuleName;
      if (this.options.type === "boolean") {
        if (parsed !== void 0 && this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {
          parsed = "true";
        } else if (parsed !== void 0 && this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {
          parsed = "false";
        }
        if (parsed !== void 0 && this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {
          parsed = moduleName() === "ODataAdaptor" || "ODataV4Adaptor" ? true : "true";
        } else if (parsed !== void 0 && this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(parsed.toLowerCase()) !== -1 && moduleName) {
          parsed = moduleName() === "ODataAdaptor" || "ODataV4Adaptor" ? false : "false";
        }
        operator = "equal";
      }
      if ((this.options.type === "date" || this.options.type === "datetime" || this.options.type === "dateonly") && this.options.format) {
        var intl = new Internationalization();
        var format = typeof this.options.format === "string" ? this.options.format : this.options.format.format;
        if (format) {
          parsed = intl.parseDate(val, { format }) || new Date(val);
        } else {
          parsed = new Date(val);
        }
        if (this.options.type === "dateonly") {
          parsed = parsed.getFullYear() + "-" + padZero(parsed.getMonth() + 1) + "-" + padZero(parsed.getDate());
        }
      }
      this.infiniteSearchValChange = true;
      this.infiniteLoadedElem = [];
      this.infiniteLocalSelectAll = true;
      this.localInfiniteSelectAllClicked = false;
      this.localInfiniteSelectionInteracted = false;
      this.infiniteSkipCnt = 0;
      this.infiniteDataCount = 0;
      this.infiniteManualSelectMaintainPred = [];
      if (this.sInput.value === "") {
        this.infiniteUnloadParentExistPred = this.infiniteRenderMod && this.existingPredicate[this.options.column.field] ? this.existingPredicate[this.options.column.field].slice() : [];
      } else {
        this.infiniteUnloadParentExistPred = [];
      }
      this.addDistinct(query);
      var args = {
        requestType: filterSearchBegin,
        filterModel: this,
        columnName: field,
        column,
        operator,
        matchCase,
        ignoreAccent,
        filterChoiceCount: null,
        query,
        value: parsed
      };
      if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {
        args.filterChoiceCount = this.parent.filterSettings.itemsCount;
      }
      this.parent.trigger(actionBegin, args, function(filterargs) {
        filterargs.operator = filterargs.operator;
        predicte = new Predicate$1(field, filterargs.operator, args.value, filterargs.matchCase, filterargs.ignoreAccent);
        if (_this.options.type === "date" || _this.options.type === "datetime" || _this.options.type === "dateonly") {
          operator = "equal";
          var filterObj = {
            field,
            operator,
            value: parsed,
            matchCase,
            ignoreAccent
          };
          if (!isNullOrUndefined(parsed)) {
            predicte = getDatePredicate(filterObj, _this.options.type);
          }
        }
        if (val && typeof val === "string" && _this.isBlanks && _this.getLocalizedLabel("Blanks").toLowerCase().indexOf(val.toLowerCase()) >= 0) {
          coll = coll.concat(CheckBoxFilterBase2.generateNullValuePredicates(defaults));
          var emptyValPredicte = CheckBoxFilterBase2.generatePredicate(coll);
          emptyValPredicte.predicates.push(predicte);
          predicte = emptyValPredicte;
          query.where(emptyValPredicte);
        } else if (val.length) {
          predicte = !isNullOrUndefined(pred) ? predicte.and(pred.e) : predicte;
          query.where(predicte);
        } else if (!isNullOrUndefined(pred)) {
          predicte = pred.e;
          query.where(pred.e);
        }
        _this.infiniteSearchPred = predicte;
        filterargs.filterChoiceCount = !isNullOrUndefined(filterargs.filterChoiceCount) ? filterargs.filterChoiceCount : 1e3;
        if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== filterargs.filterChoiceCount) {
          _this.parent.filterSettings.itemsCount = args.filterChoiceCount;
        }
        var fPredicate = {};
        showSpinner(_this.spinner);
        _this.renderEmpty = false;
        if (_this.isForeignColumn(column) && val.length) {
          var colData = "result" in column.dataSource ? new DataManager(column.dataSource.result) : column.dataSource;
          colData.executeQuery(query).then(function(e) {
            var columnData = _this.options.column.columnData;
            _this.options.column.columnData = e.result;
            _this.parent.notify(generateQuery, { predicate: fPredicate, column });
            if (fPredicate.predicate.predicates.length) {
              foreignQuery.where(fPredicate.predicate);
            } else {
              _this.renderEmpty = true;
            }
            _this.options.column.columnData = columnData;
            if (_this.infiniteRenderMod) {
              _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;
              _this.makeInfiniteScrollRequest(foreignQuery);
              foreignQuery.requiresCount();
            } else {
              foreignQuery.take(filterargs.filterChoiceCount);
            }
            _this.search(filterargs, foreignQuery);
          });
        } else {
          if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount) {
            _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;
            _this.makeInfiniteScrollRequest(query);
            query.requiresCount();
          } else {
            query.take(filterargs.filterChoiceCount);
          }
          _this.search(filterargs, query);
        }
      });
    };
    CheckBoxFilterBase2.prototype.search = function(args, query) {
      if (this.parent.dataSource && "result" in this.parent.dataSource) {
        this.filterEvent(args, query);
      } else {
        this.processSearch(query);
      }
    };
    CheckBoxFilterBase2.prototype.getPredicateFromCols = function(columns, isExecuteLocal) {
      var predicates = CheckBoxFilterBase2.getPredicate(columns, isExecuteLocal);
      var predicateList = [];
      var fPredicate = {};
      var isGrid = this.parent.getForeignKeyColumns !== void 0;
      var foreignColumn = isGrid ? this.parent.getForeignKeyColumns() : [];
      for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {
        var prop = _a[_i];
        var col = void 0;
        if (isGrid && !this.parent.getColumnByField(prop)) {
          col = getColumnByForeignKeyValue(prop, foreignColumn);
        }
        if (col) {
          this.parent.notify(generateQuery, { predicate: fPredicate, column: col });
          if (fPredicate.predicate.predicates.length) {
            predicateList.push(Predicate$1.or(fPredicate.predicate.predicates));
          }
        } else {
          predicateList.push(predicates["" + prop]);
        }
      }
      return predicateList.length && Predicate$1.and(predicateList);
    };
    CheckBoxFilterBase2.prototype.getQuery = function() {
      return this.parent.getQuery ? this.parent.getQuery().clone() : new Query();
    };
    CheckBoxFilterBase2.prototype.getAllData = function() {
      var _this = this;
      this.customQuery = false;
      var query = this.getQuery();
      var moduleName = this.options.dataManager.adaptor.getModuleName;
      if (!(!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === "ODataV4Adaptor")) {
        query.requiresCount();
      }
      this.addDistinct(query);
      var args = {
        requestType: filterChoiceRequest,
        query,
        filterChoiceCount: null
      };
      var filterModel = "filterModel";
      args["" + filterModel] = this;
      if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {
        args.filterChoiceCount = this.parent.filterSettings.itemsCount;
      }
      this.parent.trigger(actionBegin, args, function(args2) {
        args2.filterChoiceCount = !isNullOrUndefined(args2.filterChoiceCount) ? args2.filterChoiceCount : 1e3;
        if (_this.infiniteRenderMod && _this.parent.filterSettings.itemsCount !== args2.filterChoiceCount) {
          _this.parent.filterSettings.itemsCount = args2.filterChoiceCount;
        }
        if (!_this.infiniteRenderMod) {
          query.take(args2.filterChoiceCount);
        }
        if (!args2.query.distincts.length || _this.infiniteRenderMod) {
          _this.customQuery = true;
          _this.queryGenerate(query);
        }
        if (_this.infiniteRenderMod) {
          _this.infiniteInitialLoad = isNullOrUndefined(_this.fullData) ? true : false;
          _this.makeInfiniteScrollRequest(query);
        }
        if (_this.parent.dataSource && "result" in _this.parent.dataSource) {
          _this.filterEvent(args2, query);
        } else {
          _this.processDataOperation(query, true);
        }
      });
    };
    CheckBoxFilterBase2.prototype.addDistinct = function(query) {
      var _this = this;
      var filteredColumn = DataUtil.distinct(this.options.filteredColumns, "field");
      if (filteredColumn.indexOf(this.options.column.field) <= -1) {
        filteredColumn = filteredColumn.concat(this.options.column.field);
      }
      var moduleName = this.options.dataManager.adaptor.getModuleName;
      if (moduleName && moduleName() === "ODataV4Adaptor" && this.parent && this.parent.query instanceof Query) {
        var gridQuery = this.parent.query;
        for (var i = 0; i < gridQuery.queries.length; i++) {
          var queryOptions = gridQuery.queries[parseInt(i.toString(), 10)];
          if (queryOptions.fn === "onWhere") {
            this.getPredicateFields(queryOptions.e);
            this.queryFilteredColumn.map(function(field) {
              if (filteredColumn.indexOf(field) === -1) {
                filteredColumn.push(field);
              }
            });
            this.queryFilteredColumn = [];
          }
        }
      }
      if (!this.infiniteRenderMod) {
        query.distinct(filteredColumn);
      }
      if (this.infiniteRenderMod && !this.options.isRemote && this.sInput.value === "") {
        this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);
        this.infinitePermenantLocalData = this.options.dataSource.dataSource.json.slice();
        var query1 = new Query();
        this.queryGenerate(query1);
        var result = new DataManager(this.options.dataSource.dataSource).executeLocal(query1);
        this.options.dataSource = new DataManager(DataUtil.distinct(result, this.options.column.field, true));
        if (this.isForeignColumn(this.options.column)) {
          this.options.column.dataSource = this.options.column.dataSource instanceof DataManager ? this.options.column.dataSource : new DataManager(this.options.column.dataSource);
          this.options.dataSource.dataSource.json = this.options.dataSource.dataSource.json.map(function(item, i2) {
            return Object.assign({}, item, _this.options.column.dataSource.dataSource.json[i2]);
          });
        }
      } else if (this.infiniteRenderMod && this.options.isRemote) {
        query.select(this.options.column.field);
        query.sortBy(this.options.column.field, "ascending");
        var moduleName_1 = this.options.dataManager.adaptor.getModuleName;
        if (moduleName_1 && moduleName_1() && (moduleName_1() === "ODataV4Adaptor" || moduleName_1() === "WebApiAdaptor" || moduleName_1() === "CustomDataAdaptor" || moduleName_1() === "GraphQLAdaptor" || moduleName_1() === "ODataAdaptor")) {
          query.distinct(filteredColumn);
        }
      }
      return query;
    };
    CheckBoxFilterBase2.prototype.getPredicateFields = function(query) {
      var _this = this;
      if (query.isComplex && query.predicates) {
        query.predicates.forEach(function(predicate) {
          if (Array.isArray(predicate)) {
            predicate.forEach(function(p) {
              return _this.getPredicateFields(p);
            });
          } else {
            _this.getPredicateFields(predicate);
          }
        });
      } else {
        if (query.field && !query.isComplex) {
          if (this.queryFilteredColumn.indexOf(query.field) <= -1) {
            this.queryFilteredColumn = this.queryFilteredColumn.concat(DataUtil.distinct([query.field], "field"));
          }
        }
      }
    };
    CheckBoxFilterBase2.prototype.filterEvent = function(args, query) {
      var _this = this;
      var defObj = eventPromise(args, query);
      this.parent.trigger(dataStateChange, defObj.state);
      this.addInfiniteScrollEvent(query);
      var def = defObj.deffered;
      def.promise.then(function(e) {
        _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e["count"] : _this.infiniteDataCount;
        var dataResult = _this.infiniteRenderMod ? e["result"] : e;
        _this.dataSuccess(dataResult);
      });
    };
    CheckBoxFilterBase2.prototype.addInfiniteScrollEvent = function(query) {
      if (this.infiniteRenderMod) {
        this.infiniteQuery = query.clone();
        if (this.infiniteInitialLoad) {
          this.cBox.classList.add("e-checkbox-infinitescroll");
          EventHandler.add(this.cBox, "scroll", this.infiniteScrollHandler, this);
          EventHandler.add(this.cBox, "mouseup", this.infiniteScrollMouseKeyUpHandler, this);
          EventHandler.add(this.cBox, "mousedown", this.infiniteScrollMouseKeyDownHandler, this);
        } else if (this.infiniteSearchValChange) {
          this.cBox.innerHTML = "";
        }
      }
    };
    CheckBoxFilterBase2.prototype.infiniteScrollMouseKeyDownHandler = function() {
      EventHandler.remove(this.cBox, "scroll", this.infiniteScrollHandler);
    };
    CheckBoxFilterBase2.prototype.infiniteScrollMouseKeyUpHandler = function(e) {
      var _this = this;
      EventHandler.add(this.cBox, "scroll", this.infiniteScrollHandler, this);
      var target = this.cBox;
      if (target.children.length > 1 && (target.scrollTop >= target.scrollHeight - target.offsetHeight || target.scrollTop <= 0)) {
        this.infiniteScrollHandler();
      }
      Global.timer = setTimeout(function() {
        _this.clickHandler(e);
        Global.timer = null;
      }, 0);
    };
    CheckBoxFilterBase2.prototype.getShimmerTemplate = function() {
      return '<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>';
    };
    CheckBoxFilterBase2.prototype.showMask = function() {
      var maskRowCount = 5;
      var maskItemHeight;
      var maskList = this.parent.createElement("div", {
        id: this.id + this.options.type + "_CheckBoxMaskList",
        className: "e-checkboxlist e-fields e-infinite-list e-masklist"
      });
      maskList.style.zIndex = "10";
      var wrapperElem = this.cBox;
      this.removeMask();
      if (wrapperElem) {
        var computedStyle = getComputedStyle(wrapperElem);
        var liHeight = getListHeight(wrapperElem);
        var height = wrapperElem.children.length ? parseInt(computedStyle.height, 10) : Math.floor(parseInt(computedStyle.height.split("px")[0], 10)) - 5;
        if (this.parent.enableAdaptiveUI && this.infiniteRenderMod) {
          maskList.style.height = height - liHeight + "px";
          this.dlg.querySelector(".e-dlg-content").style.overflow = "hidden";
        }
        var backgroundColor = this.isExcel && !wrapperElem.children.length && !this.dlg.classList.contains("e-excelfilter") ? "" : getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor;
        maskList.style.cssText = "width: " + computedStyle.width + "; min-height: " + computedStyle.minHeight + "; height: " + height + "px; margin: " + computedStyle.margin + "; border-style: " + computedStyle.borderStyle + "; border-width: " + computedStyle.borderWidth + "; border-color: " + computedStyle.borderColor + "; position: absolute; background-color: " + backgroundColor + ";";
        maskRowCount = Math.floor(height / liHeight);
        maskRowCount = wrapperElem.children.length > maskRowCount ? wrapperElem.children.length : maskRowCount;
        maskItemHeight = liHeight + "px";
      }
      var maskTemplate = '<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">' + this.getShimmerTemplate() + this.getShimmerTemplate() + "</div></div>";
      maskList.innerHTML = "";
      if (!wrapperElem.children.length) {
        this.spinner.insertAdjacentHTML("beforebegin", maskTemplate);
        this.spinner.parentElement.querySelector(".e-ftrchk.e-mask-ftrchk").style.cssText = "width: 100%; height: " + maskItemHeight + ";";
        this.spinner.parentElement.querySelector(".e-checkbox-wrapper").style.width = "100%";
        var maskSpan = [].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));
        maskSpan[0].classList.add("e-mask-checkbox-filter-intent");
        maskSpan[1].classList.add("e-mask-checkbox-filter-span-intent");
      }
      this.spinner.insertBefore(maskList, this.cBox);
      for (var i = 0; maskRowCount && i < maskRowCount; i++) {
        maskList.innerHTML += maskTemplate;
        maskList.lastElementChild.style.cssText = "width: 100%; height: " + maskItemHeight + ";";
        maskList.lastElementChild.querySelector(".e-checkbox-wrapper").style.width = "100%";
        var maskSpan = [].slice.call(maskList.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));
        maskSpan[0].classList.add("e-mask-checkbox-filter-intent");
        maskSpan[1].classList.add("e-mask-checkbox-filter-span-intent");
      }
      if (this.cBox) {
        maskList.scrollTop = this.cBox.scrollTop;
      }
    };
    CheckBoxFilterBase2.prototype.removeMask = function() {
      var maskLists = this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");
      if (maskLists.length) {
        for (var i = 0; i < maskLists.length; i++) {
          remove(maskLists[i]);
        }
      }
      var maskParent = this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist");
      if (maskParent) {
        remove(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"));
      }
    };
    CheckBoxFilterBase2.prototype.infiniteScrollHandler = function() {
      var target = this.cBox;
      if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length <= this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3 && (!this.infiniteDataCount || this.infiniteDataCount > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)) {
        this.makeInfiniteScrollRequest();
        this.prevInfiniteScrollDirection = "down";
      } else if (target.scrollTop >= target.scrollHeight - target.offsetHeight && !this.infiniteQueryExecutionPending && this.infiniteLoadedElem.length > this.infiniteSkipCnt + this.parent.filterSettings.itemsCount && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {
        infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));
        this.infiniteSkipCnt += this.prevInfiniteScrollDirection === "down" ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;
        appendChildren(this.cBox, this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.parent.filterSettings.itemsCount + this.infiniteSkipCnt));
        this.prevInfiniteScrollDirection = "down";
      } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.infiniteLoadedElem.length > this.parent.filterSettings.itemsCount * 3 && this.cBox.children.length === this.parent.filterSettings.itemsCount * 3) {
        infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.parent.filterSettings.itemsCount));
        this.infiniteSkipCnt -= this.prevInfiniteScrollDirection === "up" ? this.parent.filterSettings.itemsCount : this.parent.filterSettings.itemsCount * 3;
        infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)), this.cBox);
        this.cBox.scrollTop = this.infiniteScrollAppendDiff;
        this.prevInfiniteScrollDirection = "up";
      } else if (target.scrollTop === 0 && !this.infiniteInitialLoad && !this.infiniteSearchValChange && this.infiniteSkipCnt && this.infiniteLoadedElem.length && this.cBox.children.length < this.parent.filterSettings.itemsCount * 3) {
        infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount * 2, this.infiniteDataCount % this.parent.filterSettings.itemsCount));
        this.infiniteSkipCnt = (Math.floor(this.infiniteDataCount / this.parent.filterSettings.itemsCount) - 3) * this.parent.filterSettings.itemsCount;
        infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt, this.infiniteSkipCnt + this.parent.filterSettings.itemsCount)), this.cBox);
        this.cBox.scrollTop = this.infiniteScrollAppendDiff;
        this.prevInfiniteScrollDirection = "up";
      }
    };
    CheckBoxFilterBase2.prototype.makeInfiniteScrollRequest = function(query) {
      var _this = this;
      if (!this.infiniteInitialLoad && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === "Shimmer") {
        setTimeout(function() {
          if (_this.infiniteQueryExecutionPending) {
            _this.showMask();
          }
        }, 500);
      } else if (!this.infiniteInitialLoad) {
        createSpinner({ target: this.spinner, cssClass: this.parent.cssClass ? this.parent.cssClass : null }, this.parent.createElement);
        showSpinner(this.spinner);
      }
      var fName = "fn";
      if (this.infiniteQuery && this.infiniteQuery.queries && this.infiniteQuery.queries.length) {
        for (var i = 0; i < this.infiniteQuery.queries.length; i++) {
          if (this.infiniteQuery.queries[i]["" + fName] === "onTake" || this.infiniteQuery.queries[i]["" + fName] === "onSkip") {
            this.infiniteQuery.queries.splice(i, 1);
            i--;
          }
        }
      }
      var existQuery = query ? true : false;
      query = query ? query : this.infiniteQuery;
      if (this.infiniteInitialLoad || this.infiniteSearchValChange) {
        this.infiniteSkipCnt = 0;
      } else {
        this.infiniteSkipCnt += this.parent.filterSettings.itemsCount;
      }
      query.skip(this.infiniteSkipCnt);
      if (this.infiniteInitialLoad || this.infiniteSearchValChange) {
        query.take(this.parent.filterSettings.itemsCount * 3);
        this.infiniteSkipCnt += this.parent.filterSettings.itemsCount * 2;
      } else {
        query.take(this.parent.filterSettings.itemsCount);
      }
      if (!existQuery) {
        if (this.parent.dataSource && "result" in this.parent.dataSource) {
          var args = {
            requestType: filterChoiceRequest,
            query,
            filterChoiceCount: null,
            filterModel: this
          };
          if (this.infiniteRenderMod && this.parent.filterSettings.itemsCount) {
            args.filterChoiceCount = this.parent.filterSettings.itemsCount;
          }
          this.filterEvent(args, query);
        } else {
          this.processDataOperation(query);
          this.infiniteQueryExecutionPending = true;
        }
      }
    };
    CheckBoxFilterBase2.prototype.processDataOperation = function(query, isInitial) {
      var _this = this;
      this.options.dataSource = this.options.dataSource instanceof DataManager ? this.options.dataSource : new DataManager(this.options.dataSource);
      var allPromise = [];
      var runArray = [];
      if (this.isForeignColumn(this.options.column) && isInitial) {
        var colData = "result" in this.options.column.dataSource ? new DataManager(this.options.column.dataSource.result) : this.options.column.dataSource;
        this.foreignKeyQuery.params = query.params;
        allPromise.push(colData.executeQuery(this.foreignKeyQuery));
        runArray.push(function(data) {
          return _this.foreignKeyData = data;
        });
      }
      this.addInfiniteScrollEvent(query);
      if (this.infiniteRenderMod && this.infiniteInitialLoad && !this.options.isRemote) {
        var field = this.isForeignColumn(this.options.column) ? this.options.foreignKeyValue : this.options.column.field;
        this.options.dataSource.executeQuery(new Query().sortBy(field, DataUtil.fnAscending)).then(function(e) {
          _this.options.dataSource.dataSource.json = e.result;
          _this.executeQueryOperations(query, allPromise, runArray);
        });
      } else {
        this.executeQueryOperations(query, allPromise, runArray);
      }
    };
    CheckBoxFilterBase2.prototype.executeQueryOperations = function(query, allPromise, runArray) {
      var _this = this;
      allPromise.push(this.options.dataSource.executeQuery(query));
      runArray.push(this.dataSuccess.bind(this));
      var i = 0;
      Promise.all(allPromise).then(function(e) {
        _this.infiniteQueryExecutionPending = _this.infiniteRenderMod ? false : _this.infiniteQueryExecutionPending;
        for (var j = 0; j < e.length; j++) {
          _this.infiniteDataCount = _this.infiniteRenderMod && !_this.infiniteDataCount ? e[j].count : _this.infiniteDataCount;
          runArray[i++](e[parseInt(j.toString(), 10)].result);
        }
      }).catch(function() {
        if (_this.infiniteRenderMod && _this.parent.filterSettings && _this.parent.filterSettings.loadingIndicator === "Shimmer") {
          _this.parent.showMaskRow(void 0, _this.dialogObj.element);
        }
      });
    };
    CheckBoxFilterBase2.prototype.dataSuccess = function(e) {
      if (!this.infiniteInitialLoad && this.infiniteDataCount && (this.infiniteSkipCnt >= this.infiniteDataCount && !this.infiniteSearchValChange || e.length === 0)) {
        return;
      }
      this.fullData = e;
      var args1 = { dataSource: this.fullData, executeQuery: true, field: this.options.field };
      this.parent.notify(beforeCheckboxRenderer, args1);
      if (args1.executeQuery) {
        var query = new Query();
        if (!this.customQuery) {
          this.isExecuteLocal = true;
          this.queryGenerate(query);
          this.isExecuteLocal = false;
        }
        var result = new DataManager(args1.dataSource).executeLocal(query);
        var col = this.options.column;
        this.filteredData = CheckBoxFilterBase2.getDistinct(result, this.options.field, col, this.foreignKeyData, this).records || [];
      }
      var data = args1.executeQuery ? this.filteredData : args1.dataSource;
      this.processDataSource(null, true, data, args1);
      if (this.infiniteRenderMod && this.infiniteInitialLoad || !this.infiniteRenderMod) {
        if (this.sInput) {
          this.sInput.focus();
        } else if (this.dlg.querySelector(".e-chk-hidden") && this.dlg.querySelector(".e-ftrchk")) {
          this.dlg.querySelector(".e-chk-hidden").focus();
          this.dlg.querySelector(".e-ftrchk").classList.add("e-chkfocus");
        }
      }
      if (this.infiniteInitialLoad || this.infiniteSearchValChange) {
        this.infiniteInitialLoad = false;
        this.infiniteSearchValChange = false;
      }
      var args = {
        requestType: filterAfterOpen,
        columnName: this.options.field,
        columnType: this.options.type
      };
      var filterModel = "filterModel";
      args["" + filterModel] = this;
      this.parent.notify(cBoxFltrComplete, args);
      if (this.isCheckboxFilterTemplate) {
        hideSpinner(this.spinner);
      }
    };
    CheckBoxFilterBase2.prototype.queryGenerate = function(query) {
      if (this.parent.searchSettings && this.parent.searchSettings.key.length) {
        var moduleName = this.options.dataManager.adaptor.getModuleName;
        if (!isNullOrUndefined(this.parent.getDataModule) && moduleName && moduleName() === "ODataV4Adaptor") {
          this.parent.getDataModule().searchQuery(query);
        } else {
          var searchSettings = this.parent.searchSettings;
          var fields = searchSettings.fields.length ? searchSettings.fields : this.options.columns.map(function(f) {
            return f.field;
          });
          query.search(searchSettings.key, fields, searchSettings.operator, searchSettings.ignoreCase, searchSettings.ignoreAccent);
        }
      }
      if (this.options.filteredColumns.length) {
        var cols = [];
        for (var i = 0; i < this.options.filteredColumns.length; i++) {
          var filterColumn = this.options.filteredColumns[parseInt(i.toString(), 10)];
          if (this.options.uid) {
            filterColumn.uid = filterColumn.uid || this.parent.getColumnByField(filterColumn.field).uid;
            if (filterColumn.uid !== this.options.uid) {
              cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);
            }
          } else {
            if (filterColumn.field !== this.options.field) {
              cols.push(this.options.filteredColumns[parseInt(i.toString(), 10)]);
            }
          }
        }
        var predicate = this.getPredicateFromCols(cols, this.isExecuteLocal);
        if (predicate) {
          query.where(predicate);
        }
      }
    };
    CheckBoxFilterBase2.prototype.processDataSource = function(query, isInitial, dataSource, args) {
      showSpinner(this.spinner);
      this.isExecuteLocal = true;
      this.updateResult();
      this.isExecuteLocal = false;
      var args1 = {
        dataSource: this.fullData,
        isCheckboxFilterTemplate: false,
        column: this.options.column,
        element: this.cBox,
        type: this.options.type,
        format: this.options.type,
        btnObj: this.options.isResponsiveFilter ? null : this.dialogObj.btnObj[0],
        searchBox: this.searchBox
      };
      this.parent.notify(beforeCheckboxfilterRenderer, args1);
      this.isCheckboxFilterTemplate = args1.isCheckboxFilterTemplate;
      if (!this.isCheckboxFilterTemplate) {
        this.createFilterItems(dataSource, isInitial, args);
      } else if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === "Shimmer") {
        this.removeMask();
      }
    };
    CheckBoxFilterBase2.prototype.processSearch = function(query) {
      this.processDataOperation(query);
    };
    CheckBoxFilterBase2.prototype.updateResult = function() {
      this.result = {};
      var predicate = this.infiniteRenderMod && this.existingPredicate[this.options.field] ? this.getPredicateFromCols(this.existingPredicate[this.options.field], this.isExecuteLocal) : this.getPredicateFromCols(this.options.filteredColumns, this.isExecuteLocal);
      var query = new Query();
      if (predicate) {
        query.where(predicate);
      }
      this.parent.notify(beforeCheckboxRendererQuery, { query });
      var result = new DataManager(this.fullData).executeLocal(query);
      for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {
        var res = result_1[_i];
        this.result[getObject(this.options.field, res)] = true;
      }
    };
    CheckBoxFilterBase2.prototype.clickHandler = function(e) {
      var _a;
      if (!isNullOrUndefined(Global.timer)) {
        clearTimeout(Global.timer);
      }
      var target = e.target;
      if (!isNullOrUndefined(this.parent.loadingIndicator) && this.parent.loadingIndicator.indicatorType === "Shimmer" && parentsUntil(target, "e-mask-ftrchk")) {
        return;
      }
      var elem = parentsUntil(target, "e-checkbox-wrapper");
      if (parentsUntil(target, "e-searchbox")) {
        this.searchBoxClick(e);
      }
      if (elem && !this.isCheckboxFilterTemplate) {
        var selectAll2 = elem.querySelector(".e-selectall");
        if (selectAll2) {
          this.updateAllCBoxes(!selectAll2.classList.contains("e-check"));
        } else {
          toogleCheckbox(elem.parentElement);
          if (this.infiniteRenderMod && !elem.parentElement.querySelector(".e-add-current")) {
            this.localInfiniteSelectionInteracted = true;
            var caseSen = this.options.allowCaseSensitive;
            var span = elem.parentElement.querySelector(".e-frame");
            var input = span.previousSibling;
            var optr = input.checked ? "equal" : "notequal";
            var pred = input.checked ? "or" : "and";
            var defaults = {
              field: this.options.field,
              predicate: pred,
              uid: this.options.uid,
              operator: optr,
              type: this.options.type,
              matchCase: caseSen,
              ignoreAccent: this.options.ignoreAccent
            };
            var value = this.values[parentsUntil(input, "e-ftrchk").getAttribute("uid")];
            this.updateInfiniteManualSelectPred(defaults, value);
            if (this.infiniteRenderMod && !this.options.isRemote && this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {
              var predicate = this.getPredicateFromCols((_a = this.options.filteredColumns).concat.apply(_a, this.infiniteManualSelectMaintainPred), true);
              var query = new Query();
              if (predicate) {
                query.where(predicate);
              }
              var result = new DataManager(this.infinitePermenantLocalData).executeLocal(query);
              if (this.options.parentTotalDataCount !== result.length) {
                this.options.parentTotalDataCount = result.length;
              }
              if (!this.options.parentTotalDataCount && this.infiniteUnloadParentExistPred.length) {
                this.infiniteUnloadParentExistPred = [];
              }
            }
            if (this.infiniteUnloadParentExistPred.length && (this.options.parentTotalDataCount === this.infiniteDataCount || !this.options.parentTotalDataCount)) {
              this.infiniteUnloadParentExistPred = [];
            }
          }
        }
        this.updateIndeterminatenBtn();
        elem.querySelector(".e-chk-hidden").focus();
      }
      this.setFocus(parentsUntil(elem, "e-ftrchk"));
    };
    CheckBoxFilterBase2.prototype.updateInfiniteManualSelectPred = function(defaults, value) {
      for (var i = 0; i < this.infiniteManualSelectMaintainPred.length; i++) {
        var predmdl = this.infiniteManualSelectMaintainPred[i];
        if (predmdl.value + "" === value + "" && (predmdl.operator === "equal" || predmdl.operator === "notequal")) {
          this.infiniteManualSelectMaintainPred.splice(i, 1);
          break;
        }
      }
      if (defaults.predicate === "or" && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll) || defaults.predicate === "and" && (!this.localInfiniteSelectAllClicked || this.infiniteLocalSelectAll)) {
        this.infiniteManualSelectMaintainPred.push(extend$1({}, { value }, defaults));
        if (defaults.predicate === "or") {
          this.options.parentTotalDataCount++;
        } else {
          this.options.parentTotalDataCount--;
        }
      }
    };
    CheckBoxFilterBase2.prototype.focusNextOrPrev = function(e, focusableElements) {
      var nextIndex = e.key === "ArrowUp" ? focusableElements.indexOf(document.activeElement) - 1 : focusableElements.indexOf(document.activeElement) + 1;
      var nextElement = focusableElements[(nextIndex + focusableElements.length) % focusableElements.length];
      if (nextElement) {
        nextElement.focus();
        var target = nextElement.classList.contains("e-chk-hidden") ? parentsUntil(nextElement, "e-ftrchk") : nextElement;
        this.setFocus(target);
      }
    };
    CheckBoxFilterBase2.prototype.keyupHandler = function(e) {
      if (e.key === "Tab" || (e.key === "ArrowUp" || e.key === "ArrowDown") && !e.altKey) {
        this.setFocus(parentsUntil(e.target, "e-ftrchk"));
      }
      if ((e.key === "ArrowUp" || e.key === "ArrowDown") && !e.altKey && this.parent.filterSettings && this.parent.filterSettings.type === "CheckBox") {
        e.preventDefault();
        var focusableElements = Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));
        this.focusNextOrPrev(e, focusableElements);
      }
    };
    CheckBoxFilterBase2.prototype.setFocus = function(elem) {
      var prevElem = this.dlg.querySelector(".e-chkfocus");
      if (prevElem) {
        prevElem.classList.remove("e-chkfocus");
      }
      if (elem && elem !== prevElem) {
        elem.classList.add("e-chkfocus");
      }
    };
    CheckBoxFilterBase2.prototype.updateAllCBoxes = function(checked) {
      if (this.infiniteRenderMod) {
        this.localInfiniteSelectAllClicked = true;
        this.infiniteLocalSelectAll = checked;
        this.infiniteUnloadParentExistPred = [];
        this.infiniteManualSelectMaintainPred = [];
      }
      var cBoxes = this.infiniteRenderMod ? this.infiniteLoadedElem.map(function(arr) {
        return arr.querySelector(".e-frame");
      }) : [].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)"));
      for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {
        var cBox = cBoxes_1[_i];
        removeAddCboxClasses(cBox, checked);
        setChecked(cBox.previousSibling, checked);
      }
    };
    CheckBoxFilterBase2.prototype.dialogOpen = function() {
      if (this.parent.element.classList.contains("e-device")) {
        this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus");
        if (!this.options.isResponsiveFilter) {
          this.dialogObj.element.querySelector(".e-btn").focus();
        }
      }
    };
    CheckBoxFilterBase2.prototype.createCheckbox = function(value, checked, data) {
      var elem = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);
      setChecked(elem.querySelector("input"), checked);
      var label = elem.querySelector(".e-label");
      var dummyData = extendObjWithFn({}, data, { column: this.options.column, parent: this.parent });
      var innerText = this.options.disableHtmlEncode ? "textContent" : "innerHTML";
      label["" + innerText] = !isNullOrUndefined(value) && value.toString().length ? this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(value) : value : this.getLocalizedLabel("Blanks");
      var checkboxUid = getUid("cbox");
      label.setAttribute("id", checkboxUid + "cboxLabel");
      elem.querySelector("input").setAttribute("aria-labelledby", label.id);
      if (label.innerHTML === this.getLocalizedLabel("Blanks")) {
        this.isBlanks = true;
      }
      if (typeof value === "boolean") {
        label.innerHTML = value === true ? this.getLocalizedLabel("FilterTrue") : this.getLocalizedLabel("FilterFalse");
      }
      addClass([label], ["e-checkboxfiltertext"]);
      if (this.options.template && data[this.options.column.field] !== this.getLocalizedLabel("SelectAll") && data[this.options.column.field] !== this.getLocalizedLabel("AddCurrentSelection")) {
        label.innerHTML = "";
        var isReactCompiler = this.parent.isReact && this.options.column.filter && typeof this.options.column.filter.itemTemplate !== "string" && !(this.options.column.filter.itemTemplate.prototype && this.options.column.filter.itemTemplate.prototype.CSPTemplate);
        var isReactChild = this.parent.parentDetails && this.parent.parentDetails.parentInstObj && // eslint-disable-next-line @typescript-eslint/no-explicit-any
        this.parent.parentDetails.parentInstObj.isReact;
        if (isReactCompiler || isReactChild) {
          this.options.template(dummyData, this.parent, "filterItemTemplate", null, null, null, label);
          this.parent.renderTemplates();
        } else {
          appendChildren(label, this.options.template(dummyData, this.parent, "filterItemTemplate", null, null, null, null, this.parent.root));
        }
      }
      return elem;
    };
    CheckBoxFilterBase2.prototype.updateIndeterminatenBtn = function() {
      var cnt = this.infiniteRenderMod ? this.infiniteLoadedElem.length : this.cBox.children.length - 1;
      var className = [];
      var disabled = false;
      var elem = this.infiniteRenderMod ? this.sBox.querySelector(".e-selectall") : this.cBox.querySelector(".e-selectall");
      var selected = this.infiniteRenderMod ? this.infiniteLoadedElem.filter(function(arr) {
        return arr.querySelector(".e-check");
      }).length : this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length;
      if (this.cBox.querySelector(".e-add-current")) {
        cnt -= 1;
      }
      var btn;
      if (!this.options.isResponsiveFilter) {
        btn = this.dialogObj.btnObj[0];
        btn.disabled = false;
      }
      var input = elem.previousSibling;
      setChecked(input, false);
      input.indeterminate = false;
      if (this.infiniteRenderMod && this.sInput.value === "" && !this.options.parentCurrentViewDataCount && !this.localInfiniteSelectionInteracted && (!this.localInfiniteSelectAllClicked || !this.infiniteLocalSelectAll && !selected) && (cnt !== selected || cnt === selected)) {
        selected = 0;
      } else if (this.infiniteRenderMod && this.infiniteLoadedElem.length < this.infiniteDataCount && this.infiniteUnloadParentExistPred.length && (!selected || cnt === selected) && this.infiniteLocalSelectAll) {
        if (!selected) {
          selected += this.infiniteUnloadParentExistPred.length;
        } else {
          cnt += this.infiniteUnloadParentExistPred.length;
        }
      }
      if (cnt === selected) {
        if (this.infiniteRenderMod) {
          this.infiniteLocalSelectAll = true;
          this.localInfiniteSelectAllClicked = true;
          this.infiniteManualSelectMaintainPred = [];
        }
        className = ["e-check"];
        setChecked(input, true);
      } else if (selected) {
        className = ["e-stop"];
        input.indeterminate = true;
      } else {
        if (this.infiniteRenderMod) {
          this.infiniteLocalSelectAll = false;
          this.localInfiniteSelectAllClicked = true;
          this.infiniteManualSelectMaintainPred = [];
        }
        className = ["e-uncheck"];
        disabled = true;
        if (btn) {
          btn.disabled = true;
        }
      }
      if (btn) {
        this.filterState = !btn.disabled;
        btn.dataBind();
      }
      removeClass([elem], ["e-check", "e-stop", "e-uncheck"]);
      addClass([elem], className);
      this.parent.notify(refreshCustomFilterOkBtn, { disabled });
    };
    CheckBoxFilterBase2.prototype.createFilterItems = function(data, isInitial, args1) {
      var _a, _b, _c;
      var cBoxes = this.parent.createElement("div");
      var btn;
      var disabled = false;
      if (!this.options.isResponsiveFilter) {
        btn = this.dialogObj.btnObj[0];
      }
      var nullCounter = -1;
      var key = "ejValue";
      if (!args1.executeQuery) {
        key = args1.field;
      }
      for (var i = 0; i < data.length; i++) {
        var val = getValue(key, data[parseInt(i.toString(), 10)]);
        if (val === "" || isNullOrUndefined(val)) {
          nullCounter = nullCounter + 1;
        }
      }
      if (!this.infiniteRenderMod) {
        this.itemsCnt = nullCounter !== -1 ? data.length - nullCounter : data.length;
      }
      if (this.infiniteRenderMod && this.parent.filterSettings && this.parent.filterSettings.loadingIndicator === "Shimmer") {
        this.removeMask();
      }
      if (data.length && !this.renderEmpty) {
        var selectAllValue = this.getLocalizedLabel("SelectAll");
        var innerDiv = this.cBox.querySelector(".e-checkfltrnmdiv");
        if (innerDiv) {
          innerDiv.classList.remove("e-checkfltrnmdiv");
        }
        var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));
        if (this.parent.cssClass) {
          if (this.parent.cssClass.indexOf(" ") !== -1) {
            addClass([checkBox], this.parent.cssClass.split(" "));
          } else {
            addClass([checkBox], [this.parent.cssClass]);
          }
        }
        if (this.infiniteInitialLoad || !this.infiniteRenderMod) {
          var selectAll2 = createCboxWithWrap(getUid("cbox"), checkBox, "e-ftrchk");
          selectAll2.querySelector(".e-frame").classList.add("e-selectall");
          if (this.infiniteRenderMod) {
            selectAll2.classList.add("e-infinitescroll");
            if (this.parent.enableAdaptiveUI) {
              this.spinner.style.height = this.spinner.offsetHeight - getListHeight(this.cBox) + "px";
            }
            this.sBox.insertBefore(selectAll2, this.spinner);
          } else {
            cBoxes.appendChild(selectAll2);
          }
        } else if (this.sBox.querySelector(".e-ftrchk .e-selectall")) {
          this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled = false;
          this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled");
        }
        var predicate = new Predicate$1("field", "equal", this.options.field);
        if (this.options.foreignKeyValue) {
          predicate = predicate.or("field", "equal", this.options.foreignKeyValue);
        }
        var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;
        if (this.sInput && this.sInput.value) {
          var predicateCheckBox = this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"), false, (_b = {}, _b[this.options.field] = this.getLocalizedLabel("AddCurrentSelection"), _b));
          if (this.parent.cssClass) {
            if (this.parent.cssClass.indexOf(" ") !== -1) {
              addClass([predicateCheckBox], this.parent.cssClass.split(" "));
            } else {
              addClass([predicateCheckBox], [this.parent.cssClass]);
            }
          }
          if (this.infiniteRenderMod && (!isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText !== this.getLocalizedLabel("AddCurrentSelection")) || !this.infiniteRenderMod) {
            var predicateElement = createCboxWithWrap(getUid("cbox"), predicateCheckBox, "e-ftrchk");
            predicateElement.querySelector(".e-frame").classList.add("e-add-current");
            if (this.infiniteRenderMod) {
              predicateElement.classList.add("e-infinitescroll");
              this.sBox.insertBefore(predicateElement, this.spinner);
              var checkBoxListElem = this.spinner.querySelector(".e-checkboxlist");
              var reduceHeight = Math.ceil(predicateElement.getBoundingClientRect().height);
              checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split("px")[0], 10) - reduceHeight + "px";
              checkBoxListElem.style.minHeight = checkBoxListElem.style.height;
            } else {
              cBoxes.appendChild(predicateElement);
            }
          } else if (this.sBox.querySelector(".e-ftrchk .e-add-current")) {
            this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled = false;
            this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled");
          }
        } else if (this.infiniteRenderMod && !isNullOrUndefined(this.sBox.children[2]) && this.sBox.children[2].innerText === this.getLocalizedLabel("AddCurrentSelection")) {
          var checkBoxListElem = this.spinner.querySelector(".e-checkboxlist");
          var increaseHeight = Math.ceil(this.sBox.children[2].getBoundingClientRect().height);
          checkBoxListElem.style.height = parseInt(getComputedStyle(checkBoxListElem).height.split("px")[0], 10) + increaseHeight + "px";
          checkBoxListElem.style.minHeight = checkBoxListElem.style.height;
          remove(this.sBox.children[2]);
        }
        var isRndere = void 0;
        for (var i = 0; i < data.length; i++) {
          var uid2 = getUid("cbox");
          this.values["" + uid2] = getValue(key, data[parseInt(i.toString(), 10)]);
          var value = getValue(this.options.field, data[parseInt(i.toString(), 10)]);
          if (this.options.formatFn) {
            value = this.valueFormatter.toView(value, this.options.formatFn);
          }
          var args_1 = { value, column: this.options.column, data: data[parseInt(i.toString(), 10)] };
          this.parent.notify(filterCboxValue, args_1);
          value = args_1.value;
          if (value === "" || isNullOrUndefined(value)) {
            if (isRndere) {
              continue;
            }
            isRndere = true;
          }
          if (this.infiniteRenderMod) {
            this.updateInfiniteUnLoadedCheckboxExistPred(value, this.infiniteUnloadParentExistPred);
          }
          var checkbox = this.localInfiniteSelectAllClicked ? this.createCheckbox(value, this.infiniteLocalSelectAll, getValue("dataObj", data[i])) : this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values["" + uid2]), getValue("dataObj", data[i]));
          cBoxes.appendChild(createCboxWithWrap(uid2, checkbox, "e-ftrchk"));
          if (this.infiniteRenderMod) {
            cBoxes.lastChild.style.height = getListHeight(this.cBox) + "px";
          }
        }
        var scrollTop = this.cBox.scrollTop;
        if (!this.infiniteRenderMod || this.infiniteSearchValChange) {
          this.cBox.innerHTML = "";
        } else if (this.infiniteRenderMod && this.cBox.children.length) {
          infiniteRemoveElements([].slice.call(this.cBox.children).splice(0, this.parent.filterSettings.itemsCount));
        }
        if (this.infiniteRenderMod) {
          (_c = this.infiniteLoadedElem).push.apply(_c, [].slice.call(cBoxes.children));
          this.itemsCnt = nullCounter !== -1 ? this.infiniteLoadedElem.length - nullCounter : this.infiniteLoadedElem.length;
        }
        if (this.infiniteUnloadParentExistPred.length && (this.infiniteLoadedElem.length >= this.infiniteDataCount || !this.options.parentCurrentViewDataCount || this.options.parentTotalDataCount === this.infiniteDataCount && this.options.parentCurrentViewDataCount)) {
          this.infiniteUnloadParentExistPred = [];
        }
        appendChildren(this.cBox, [].slice.call(cBoxes.children));
        if (this.infiniteRenderMod && !this.infiniteScrollAppendDiff) {
          this.infiniteScrollAppendDiff = Math.round(scrollTop - this.cBox.scrollTop);
        }
        this.updateIndeterminatenBtn();
        if (!this.infiniteRenderMod) {
          if (btn) {
            btn.disabled = false;
          }
          disabled = false;
        } else {
          if (btn && btn.disabled) {
            disabled = true;
          } else {
            disabled = false;
          }
        }
      } else {
        cBoxes.appendChild(this.parent.createElement("span", { innerHTML: this.getLocalizedLabel("NoResult") }));
        this.cBox.innerHTML = "";
        if (this.infiniteRenderMod) {
          var selectAll2 = this.sBox.querySelector(".e-ftrchk .e-selectall");
          if (selectAll2) {
            var selectAllParent = selectAll2.parentElement.parentElement;
            if (selectAll2.classList.contains("e-check")) {
              toogleCheckbox(selectAllParent);
            } else if (selectAll2.classList.contains("e-stop")) {
              toogleCheckbox(selectAllParent);
              selectAll2.classList.remove("e-stop");
              toogleCheckbox(selectAllParent);
            }
            selectAll2.previousSibling.disabled = true;
            selectAll2.parentElement.classList.add("e-checkbox-disabled");
          }
          var addCurrSelection = this.sBox.querySelector(".e-ftrchk .e-add-current");
          if (addCurrSelection) {
            var addCurrSelectionParent = addCurrSelection.parentElement.parentElement;
            if (addCurrSelection.classList.contains("e-check")) {
              toogleCheckbox(addCurrSelectionParent);
            }
            addCurrSelection.previousSibling.disabled = true;
            addCurrSelection.parentElement.classList.add("e-checkbox-disabled");
          }
        }
        this.cBox.appendChild(this.parent.createElement("div", { className: "e-checkfltrnmdiv" }));
        appendChildren(this.cBox.children[0], [].slice.call(cBoxes.children));
        if (btn) {
          btn.disabled = true;
        }
        disabled = true;
        this.filterState = !disabled;
      }
      if (btn && data.length) {
        this.filterState = !btn.disabled;
        btn.dataBind();
      }
      var args = { requestType: filterChoiceRequest, dataSource: this.renderEmpty ? [] : data };
      var filterModel = "filterModel";
      args["" + filterModel] = this;
      this.parent.notify(cBoxFltrComplete, args);
      this.parent.notify(refreshCustomFilterOkBtn, { disabled });
      if (this.infiniteRenderMod && this.infiniteInitialLoad) {
        this.cBox.style.marginTop = "0px";
      }
      hideSpinner(this.spinner);
    };
    CheckBoxFilterBase2.prototype.updateInfiniteUnLoadedCheckboxExistPred = function(value, updatePredArr) {
      for (var j = 0; j < updatePredArr.length; j++) {
        var pred = updatePredArr[j];
        var predValue = pred.value instanceof Date ? this.valueFormatter.toView(pred.value, this.options.formatFn) : pred.value;
        var column = this.options.column;
        if (column.isForeignColumn()) {
          var foreignDataObj = getForeignData(column, {}, predValue, this.foreignKeyData)[0];
          value = getValue(column.foreignKeyField, foreignDataObj);
        }
        if (value === predValue && (pred.operator === "equal" || pred.operator === "notequal")) {
          this.infiniteManualSelectMaintainPred.push(updatePredArr[j]);
          updatePredArr.splice(j, 1);
          j--;
        }
      }
    };
    CheckBoxFilterBase2.prototype.getCheckedState = function(isColFiltered, value) {
      if (!this.isFiltered || !isColFiltered) {
        return true;
      } else {
        var checkState = this.sInput && this.sInput.value ? true : this.result["" + value];
        if (this.infiniteRenderMod) {
          return checkState;
        } else {
          return this.options.operator === "notequal" ? !checkState : checkState;
        }
      }
    };
    CheckBoxFilterBase2.getDistinct = function(json, field, column, foreignKeyData$1, checkboxFilter) {
      var len = json.length;
      var result = [];
      var value;
      var ejValue = "ejValue";
      var lookup = {};
      var isForeignKey = column && column.isForeignColumn ? column.isForeignColumn() : false;
      while (len--) {
        value = json[parseInt(len.toString(), 10)];
        if (column && column.type === "dateonly" && typeof value["" + field] === "string" && value["" + field]) {
          var arr = value["" + field].split(/[^0-9.]/);
          value["" + field] = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10));
        }
        value = getObject(field, value);
        var currentFilterValue = typeof value === "string" && !isNullOrUndefined(checkboxFilter) && // eslint-disable-next-line @typescript-eslint/no-explicit-any
        !isNullOrUndefined(checkboxFilter.parent) && !isNullOrUndefined(checkboxFilter.parent.filterSettings) && // eslint-disable-next-line @typescript-eslint/no-explicit-any
        !isNullOrUndefined(checkboxFilter.parent.filterSettings.enableCaseSensitivity) ? value.toLowerCase() : value;
        if (!(currentFilterValue in lookup)) {
          var obj = {};
          obj["" + ejValue] = value;
          lookup["" + currentFilterValue] = true;
          if (isForeignKey) {
            var foreignDataObj = getForeignData(column, {}, value, foreignKeyData$1)[0];
            setValue(foreignKeyData, foreignDataObj, json[parseInt(len.toString(), 10)]);
            value = getValue(column.foreignKeyValue, foreignDataObj);
          }
          setValue(field, isNullOrUndefined(value) ? null : value, obj);
          setValue("dataObj", json[parseInt(len.toString(), 10)], obj);
          result.push(obj);
        }
      }
      return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), "ejValue");
    };
    CheckBoxFilterBase2.getPredicate = function(columns, isExecuteLocal) {
      var cols = DataUtil.distinct(columns, "field", true) || [];
      var collection = [];
      var pred = {};
      for (var i = 0; i < cols.length; i++) {
        collection = new DataManager(columns).executeLocal(new Query().where("field", "equal", cols[parseInt(i.toString(), 10)].field));
        if (collection.length !== 0) {
          pred[cols[parseInt(i.toString(), 10)].field] = CheckBoxFilterBase2.generatePredicate(collection, isExecuteLocal);
        }
      }
      return pred;
    };
    CheckBoxFilterBase2.generatePredicate = function(cols, isExecuteLocal) {
      var len = cols ? cols.length : 0;
      var predicate;
      var operate = "or";
      var first = CheckBoxFilterBase2.updateDateFilter(cols[0]);
      first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;
      if (first.type === "date" || first.type === "datetime" || first.type === "dateonly") {
        predicate = getDatePredicate(first, first.type, isExecuteLocal);
      } else {
        predicate = first.ejpredicate ? first.ejpredicate : new Predicate$1(first.field, first.operator, first.value, !CheckBoxFilterBase2.getCaseValue(first), first.ignoreAccent);
      }
      for (var p = 1; p < len; p++) {
        cols[parseInt(p.toString(), 10)] = CheckBoxFilterBase2.updateDateFilter(cols[parseInt(p.toString(), 10)]);
        if (len > 2 && p > 1 && (cols[p].predicate === "or" && cols[p - 1].predicate === "or" || cols[p].predicate === "and" && cols[p - 1].predicate === "and")) {
          if (cols[p].type === "date" || cols[p].type === "datetime" || cols[p].type === "dateonly") {
            predicate.predicates.push(getDatePredicate(cols[parseInt(p.toString(), 10)], cols[p].type, isExecuteLocal));
          } else {
            predicate.predicates.push(new Predicate$1(cols[p].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase2.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent));
          }
        } else {
          if (cols[p].type === "date" || cols[p].type === "datetime" || cols[p].type === "dateonly") {
            if (cols[parseInt(p.toString(), 10)].predicate === "and" && cols[parseInt(p.toString(), 10)].operator === "equal") {
              predicate = predicate["" + operate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);
            } else {
              predicate = predicate[cols[parseInt(p.toString(), 10)].predicate](getDatePredicate(cols[parseInt(p.toString(), 10)], cols[parseInt(p.toString(), 10)].type, isExecuteLocal), cols[parseInt(p.toString(), 10)].type, cols[parseInt(p.toString(), 10)].ignoreAccent);
            }
          } else {
            predicate = cols[parseInt(p.toString(), 10)].ejpredicate ? predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].ejpredicate) : predicate[cols[parseInt(p.toString(), 10)].predicate](cols[parseInt(p.toString(), 10)].field, cols[parseInt(p.toString(), 10)].operator, cols[parseInt(p.toString(), 10)].value, !CheckBoxFilterBase2.getCaseValue(cols[parseInt(p.toString(), 10)]), cols[parseInt(p.toString(), 10)].ignoreAccent);
          }
        }
      }
      return predicate || null;
    };
    CheckBoxFilterBase2.getCaseValue = function(filter) {
      if (isNullOrUndefined(filter.matchCase)) {
        if (filter.type === "string" || isNullOrUndefined(filter.type) && typeof filter.value === "string") {
          return false;
        } else {
          return true;
        }
      } else {
        return filter.matchCase;
      }
    };
    CheckBoxFilterBase2.updateDateFilter = function(filter) {
      if (filter.type === "date" || filter.type === "datetime" || filter.type === "dateonly" || filter.value instanceof Date) {
        filter.type = filter.type || "date";
      }
      return filter;
    };
    return CheckBoxFilterBase2;
  }()
);
var queryString = "";
var prevString = "";
var tempQueryString = "";
var matches = [];
var activeClass = "e-active";
var prevElementId = "";
function incrementalSearch(keyCode2, items, selectedIndex, ignoreCase, elementId, queryStringUpdated, currentValue, isVirtual, refresh) {
  if (!queryStringUpdated || queryString === "") {
    if (tempQueryString !== "") {
      queryString = tempQueryString + String.fromCharCode(keyCode2);
      tempQueryString = "";
    } else {
      queryString += String.fromCharCode(keyCode2);
    }
  } else if (queryString === prevString) {
    tempQueryString = String.fromCharCode(keyCode2);
  }
  if (isVirtual) {
    setTimeout(function() {
      tempQueryString = "";
    }, 700);
    setTimeout(function() {
      queryString = "";
    }, 3e3);
  } else {
    setTimeout(function() {
      queryString = "";
    }, 1e3);
  }
  var index;
  queryString = queryString.toLowerCase();
  if (prevElementId === elementId && prevString === queryString && !refresh) {
    for (var i = 0; i < matches.length; i++) {
      if (matches[i].classList.contains(activeClass)) {
        index = i;
        break;
      }
      if (currentValue && matches[i].textContent.toLowerCase() === currentValue.toLowerCase()) {
        index = i;
        break;
      }
    }
    index = index + 1;
    if (isVirtual) {
      return matches[index] && matches.length - 1 !== index ? matches[index] : matches[matches.length];
    }
    return matches[index] ? matches[index] : matches[0];
  } else {
    var listItems = items;
    var strLength = queryString.length;
    var text = void 0;
    var item = void 0;
    selectedIndex = selectedIndex ? selectedIndex + 1 : 0;
    var i = selectedIndex;
    matches = [];
    do {
      if (i === listItems.length) {
        i = -1;
      }
      if (i === -1) {
        index = 0;
      } else {
        index = i;
      }
      item = listItems[index];
      text = item.innerText.toLowerCase();
      if (text.substr(0, strLength) === queryString) {
        matches.push(listItems[index]);
      }
      i++;
    } while (i !== selectedIndex);
    prevString = queryString;
    prevElementId = elementId;
    if (isVirtual) {
      var indexUpdated = false;
      for (var i_1 = 0; i_1 < matches.length; i_1++) {
        if (currentValue && matches[i_1].textContent.toLowerCase() === currentValue.toLowerCase()) {
          index = i_1;
          indexUpdated = true;
          break;
        }
      }
      if (currentValue && indexUpdated) {
        index = index + 1;
      }
      return matches[index] ? matches[index] : matches[0];
    }
    return matches[0];
  }
}
function resetIncrementalSearchValues(elementId) {
  if (prevElementId === elementId) {
    prevElementId = "";
    prevString = "";
    queryString = "";
    matches = [];
  }
}
var __extends$4 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$3 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var cssClassName = {
  TEXTSHAPE: "e-skeleton-text",
  CIRCLESHAPE: "e-skeleton-circle",
  SQUARESHAPE: "e-skeleton-square",
  RECTANGLESHAPE: "e-skeleton-rectangle",
  WAVEEFFECT: "e-shimmer-wave",
  PULSEEFFECT: "e-shimmer-pulse",
  FADEEFFECT: "e-shimmer-fade",
  VISIBLENONE: "e-visible-none"
};
var SkeletonType;
(function(SkeletonType2) {
  SkeletonType2["Text"] = "Text";
  SkeletonType2["Circle"] = "Circle";
  SkeletonType2["Square"] = "Square";
  SkeletonType2["Rectangle"] = "Rectangle";
})(SkeletonType || (SkeletonType = {}));
var ShimmerEffect;
(function(ShimmerEffect2) {
  ShimmerEffect2["Wave"] = "Wave";
  ShimmerEffect2["Fade"] = "Fade";
  ShimmerEffect2["Pulse"] = "Pulse";
  ShimmerEffect2["None"] = "None";
})(ShimmerEffect || (ShimmerEffect = {}));
var Skeleton = (
  /** @class */
  function(_super) {
    __extends$4(Skeleton2, _super);
    function Skeleton2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    Skeleton2.prototype.getModuleName = function() {
      return "skeleton";
    };
    Skeleton2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Skeleton2.prototype.preRender = function() {
      if (!this.element.id) {
        this.element.id = getUniqueID("e-" + this.getModuleName());
      }
      this.updateCssClass();
      attributes(this.element, { role: "alert", "aria-busy": "true", "aria-live": "polite", "aria-label": this.label });
    };
    Skeleton2.prototype.render = function() {
      this.initialize();
    };
    Skeleton2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "width":
          case "height":
            this.updateDimension();
            break;
          case "shape":
            this.updateShape();
            break;
          case "shimmerEffect":
            this.updateEffect();
            break;
          case "visible":
            this.updateVisibility();
            break;
          case "label":
            this.element.setAttribute("aria-label", this.label);
            break;
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([this.element], oldProp.cssClass.split(" "));
            }
            this.updateCssClass();
            break;
        }
      }
    };
    Skeleton2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      var attrs = ["role", "aria-live", "aria-busy", "aria-label"];
      var cssClass2 = [];
      if (this.cssClass) {
        cssClass2 = cssClass2.concat(this.cssClass.split(" "));
      }
      for (var i = 0; i < attrs.length; i++) {
        this.element.removeAttribute(attrs[parseInt(i.toString(), 10)]);
      }
      cssClass2 = cssClass2.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g) || []);
      cssClass2 = cssClass2.concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g) || []);
      removeClass([this.element], cssClass2);
    };
    Skeleton2.prototype.initialize = function() {
      this.updateShape();
      this.updateEffect();
      this.updateVisibility();
    };
    Skeleton2.prototype.updateShape = function() {
      if (!isNullOrUndefined(this.shape)) {
        var shapeCss = cssClassName[this.shape.toUpperCase() + "SHAPE"];
        var removeCss = this.element.classList.value.match(/(e-skeleton-[^\s]+)/g) || [];
        this.updateDimension();
        if (removeCss) {
          removeClass([this.element], removeCss);
        }
        addClass([this.element], [shapeCss]);
      }
    };
    Skeleton2.prototype.updateDimension = function() {
      var width = !this.width && ["Text", "Rectangle"].indexOf(this.shape) > -1 ? "100%" : formatUnit(this.width);
      var height = ["Circle", "Square"].indexOf(this.shape) > -1 ? width : formatUnit(this.height);
      this.element.style.width = width;
      this.element.style.height = height;
    };
    Skeleton2.prototype.updateEffect = function() {
      var removeCss = this.element.classList.value.match(/(e-shimmer-[^\s]+)/g) || [];
      if (removeCss) {
        removeClass([this.element], removeCss);
      }
      if (!isNullOrUndefined(this.shimmerEffect)) {
        addClass([this.element], [cssClassName[this.shimmerEffect.toUpperCase() + "EFFECT"]]);
      }
    };
    Skeleton2.prototype.updateVisibility = function() {
      this.element.classList[this.visible ? "remove" : "add"](cssClassName.VISIBLENONE);
    };
    Skeleton2.prototype.updateCssClass = function() {
      if (this.cssClass) {
        addClass([this.element], this.cssClass.split(" "));
      }
    };
    __decorate$3([
      Property("")
    ], Skeleton2.prototype, "width", void 0);
    __decorate$3([
      Property("")
    ], Skeleton2.prototype, "height", void 0);
    __decorate$3([
      Property(true)
    ], Skeleton2.prototype, "visible", void 0);
    __decorate$3([
      Property("Text")
    ], Skeleton2.prototype, "shape", void 0);
    __decorate$3([
      Property("Wave")
    ], Skeleton2.prototype, "shimmerEffect", void 0);
    __decorate$3([
      Property("Loading...")
    ], Skeleton2.prototype, "label", void 0);
    __decorate$3([
      Property("")
    ], Skeleton2.prototype, "cssClass", void 0);
    Skeleton2 = __decorate$3([
      NotifyPropertyChanges
    ], Skeleton2);
    return Skeleton2;
  }(Component)
);
var __extends$3 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$2 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var FieldSettings = (
  /** @class */
  function(_super) {
    __extends$3(FieldSettings2, _super);
    function FieldSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$2([
      Property()
    ], FieldSettings2.prototype, "text", void 0);
    __decorate$2([
      Property()
    ], FieldSettings2.prototype, "value", void 0);
    __decorate$2([
      Property()
    ], FieldSettings2.prototype, "iconCss", void 0);
    __decorate$2([
      Property()
    ], FieldSettings2.prototype, "groupBy", void 0);
    __decorate$2([
      Property()
    ], FieldSettings2.prototype, "htmlAttributes", void 0);
    __decorate$2([
      Property()
    ], FieldSettings2.prototype, "disabled", void 0);
    return FieldSettings2;
  }(ChildProperty)
);
var dropDownBaseClasses = {
  root: "e-dropdownbase",
  rtl: "e-rtl",
  content: "e-content",
  selected: "e-active",
  hover: "e-hover",
  noData: "e-nodata",
  fixedHead: "e-fixed-head",
  focus: "e-item-focus",
  li: "e-list-item",
  group: "e-list-group-item",
  disabled: "e-disabled",
  grouping: "e-dd-group",
  virtualList: "e-list-item e-virtual-list"
};
var ITEMTEMPLATE_PROPERTY = "ItemTemplate";
var DISPLAYTEMPLATE_PROPERTY = "DisplayTemplate";
var SPINNERTEMPLATE_PROPERTY = "SpinnerTemplate";
var VALUETEMPLATE_PROPERTY = "ValueTemplate";
var GROUPTEMPLATE_PROPERTY = "GroupTemplate";
var HEADERTEMPLATE_PROPERTY = "HeaderTemplate";
var FOOTERTEMPLATE_PROPERTY = "FooterTemplate";
var NORECORDSTEMPLATE_PROPERTY = "NoRecordsTemplate";
var ACTIONFAILURETEMPLATE_PROPERTY = "ActionFailureTemplate";
var HIDE_GROUPLIST = "e-hide-group-header";
var DropDownBase = (
  /** @class */
  function(_super) {
    __extends$3(DropDownBase2, _super);
    function DropDownBase2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.preventChange = false;
      _this.isPreventChange = false;
      _this.isDynamicDataChange = false;
      _this.addedNewItem = false;
      _this.isAddNewItemTemplate = false;
      _this.isRequesting = false;
      _this.isVirtualizationEnabled = false;
      _this.isCustomDataUpdated = false;
      _this.isAllowFiltering = false;
      _this.virtualizedItemsCount = 0;
      _this.isCheckBoxSelection = false;
      _this.totalItemCount = 0;
      _this.dataCount = 0;
      _this.remoteDataCount = -1;
      _this.isRemoteDataUpdated = false;
      _this.isIncrementalRequest = false;
      _this.itemCount = 30;
      _this.virtualListHeight = 0;
      _this.isVirtualScrolling = false;
      _this.isPreventScrollAction = false;
      _this.scrollPreStartIndex = 0;
      _this.isScrollActionTriggered = false;
      _this.previousStartIndex = 0;
      _this.isMouseScrollAction = false;
      _this.isKeyBoardAction = false;
      _this.isScrollChanged = false;
      _this.isUpwardScrolling = false;
      _this.startIndex = 0;
      _this.currentPageNumber = 0;
      _this.pageCount = 0;
      _this.isPreventKeyAction = false;
      _this.generatedDataObject = {};
      _this.skeletonCount = 32;
      _this.isVirtualTrackHeight = false;
      _this.virtualSelectAll = false;
      _this.isVirtualReorder = false;
      _this.incrementalQueryString = "";
      _this.incrementalEndIndex = 0;
      _this.incrementalStartIndex = 0;
      _this.incrementalPreQueryString = "";
      _this.isObjectCustomValue = false;
      _this.appendUncheckList = false;
      _this.getInitialData = false;
      _this.preventPopupOpen = true;
      _this.virtualSelectAllState = false;
      _this.CurrentEvent = null;
      _this.isDynamicData = false;
      _this.isPrimitiveData = false;
      _this.isCustomFiltering = false;
      _this.virtualListInfo = {
        currentPageNumber: null,
        direction: null,
        sentinelInfo: {},
        offsets: {},
        startIndex: 0,
        endIndex: 0
      };
      _this.viewPortInfo = {
        currentPageNumber: null,
        direction: null,
        sentinelInfo: {},
        offsets: {},
        startIndex: 0,
        endIndex: 0
      };
      _this.selectedValueInfo = {
        currentPageNumber: null,
        direction: null,
        sentinelInfo: {},
        offsets: {},
        startIndex: 0,
        endIndex: 0
      };
      return _this;
    }
    DropDownBase2.prototype.getPropObject = function(prop, newProp, oldProp) {
      var newProperty = new Object();
      var oldProperty = new Object();
      var propName = function(prop2) {
        return prop2;
      };
      newProperty[propName(prop)] = newProp[propName(prop)];
      oldProperty[propName(prop)] = oldProp[propName(prop)];
      var data = new Object();
      data.newProperty = newProperty;
      data.oldProperty = oldProperty;
      return data;
    };
    DropDownBase2.prototype.getValueByText = function(text, ignoreCase, ignoreAccent) {
      var value = null;
      if (!isNullOrUndefined(this.listData)) {
        if (ignoreCase) {
          value = this.checkValueCase(text, true, ignoreAccent);
        } else {
          value = this.checkValueCase(text, false, ignoreAccent);
        }
      }
      return value;
    };
    DropDownBase2.prototype.checkValueCase = function(text, ignoreCase, ignoreAccent, isTextByValue) {
      var _this = this;
      var value = null;
      if (isTextByValue) {
        value = text;
      }
      if (!isNullOrUndefined(this.listData)) {
        var dataSource = this.listData;
        var fields_1 = this.fields;
        var type = this.typeOfData(dataSource).typeof;
        if (type === "string" || type === "number" || type === "boolean") {
          for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {
            var item = dataSource_1[_i];
            if (!isNullOrUndefined(item)) {
              if (ignoreAccent) {
                value = this.checkingAccent(String(item), text, ignoreCase);
              } else {
                if (ignoreCase) {
                  if (this.checkIgnoreCase(String(item), text)) {
                    value = this.getItemValue(String(item), text, ignoreCase);
                  }
                } else {
                  if (this.checkNonIgnoreCase(String(item), text)) {
                    value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);
                  }
                }
              }
            }
          }
        } else {
          if (ignoreCase) {
            dataSource.filter(function(item2) {
              var itemValue = getValue(fields_1.value, item2);
              if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields_1.text, item2).toString(), text)) {
                value = getValue(fields_1.value, item2);
              }
            });
          } else {
            if (isTextByValue) {
              var compareValue_1 = null;
              compareValue_1 = value;
              dataSource.filter(function(item2) {
                var itemValue = getValue(fields_1.value, item2);
                if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {
                  value = getValue(fields_1.text, item2);
                }
              });
            } else {
              dataSource.filter(function(item2) {
                if (_this.checkNonIgnoreCase(getValue(fields_1.text, item2), text)) {
                  value = getValue(fields_1.value, item2);
                }
              });
            }
          }
        }
      }
      return value;
    };
    DropDownBase2.prototype.checkingAccent = function(item, text, ignoreCase) {
      var dataItem = DataUtil.ignoreDiacritics(String(item));
      var textItem = DataUtil.ignoreDiacritics(text.toString());
      var value = null;
      if (ignoreCase) {
        if (this.checkIgnoreCase(dataItem, textItem)) {
          value = this.getItemValue(String(item), text, ignoreCase);
        }
      } else {
        if (this.checkNonIgnoreCase(String(item), text)) {
          value = this.getItemValue(String(item), text, ignoreCase);
        }
      }
      return value;
    };
    DropDownBase2.prototype.checkIgnoreCase = function(item, text) {
      return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;
    };
    DropDownBase2.prototype.checkNonIgnoreCase = function(item, text) {
      return String(item) === text.toString() ? true : false;
    };
    DropDownBase2.prototype.getItemValue = function(dataItem, typedText, ignoreCase, isTextByValue) {
      var value = null;
      var dataSource = this.listData;
      var type = this.typeOfData(dataSource).typeof;
      if (isTextByValue) {
        value = dataItem.toString();
      } else {
        if (ignoreCase) {
          value = type === "string" ? String(dataItem) : this.getFormattedValue(String(dataItem));
        } else {
          value = type === "string" ? typedText : this.getFormattedValue(typedText);
        }
      }
      return value;
    };
    DropDownBase2.prototype.templateCompiler = function(baseTemplate) {
      var checkTemplate = false;
      if (typeof baseTemplate !== "function" && baseTemplate) {
        try {
          checkTemplate = selectAll(baseTemplate, document).length ? true : false;
        } catch (exception) {
          checkTemplate = false;
        }
      }
      return checkTemplate;
    };
    DropDownBase2.prototype.l10nUpdate = function(actionFailure2) {
      var ele = this.getModuleName() === "listbox" ? this.ulElement : this.list;
      if (!isNullOrUndefined(this.noRecordsTemplate) && this.noRecordsTemplate !== "No records found" || this.actionFailureTemplate !== "Request failed") {
        var template = actionFailure2 ? this.actionFailureTemplate : this.noRecordsTemplate;
        var compiledString = void 0;
        var templateId = actionFailure2 ? this.actionFailureTemplateId : this.noRecordsTemplateId;
        ele.innerHTML = "";
        var tempaltecheck = this.templateCompiler(template);
        if (typeof template !== "function" && tempaltecheck) {
          compiledString = compile$1(select(template, document).innerHTML.trim());
        } else {
          compiledString = compile$1(template);
        }
        var templateName = actionFailure2 ? "actionFailureTemplate" : "noRecordsTemplate";
        var noDataElement = void 0;
        if (this.isReact && typeof template === "function") {
          noDataElement = compiledString({}, this, templateName, templateId, this.isStringTemplate, null);
        } else {
          noDataElement = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);
        }
        if (noDataElement && noDataElement.length > 0) {
          for (var i = 0; i < noDataElement.length; i++) {
            if (this.getModuleName() === "listbox" && templateName === "noRecordsTemplate") {
              if (noDataElement[i].nodeName === "#text") {
                var liElem = this.createElement("li");
                liElem.textContent = noDataElement[i].textContent;
                liElem.classList.add("e-list-nrt");
                liElem.setAttribute("role", "option");
                ele.appendChild(liElem);
              } else {
                noDataElement[i].classList.add("e-list-nr-template");
                ele.appendChild(noDataElement[i]);
              }
            } else {
              if (noDataElement[i] instanceof HTMLElement || noDataElement[i] instanceof Text && noDataElement[i].textContent !== "") {
                ele.appendChild(noDataElement[i]);
              }
            }
          }
        }
        this.renderReactTemplates();
      } else {
        var l10nLocale = { noRecordsTemplate: "No records found", actionFailureTemplate: "Request failed" };
        var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);
        if (componentLocale.getConstant("actionFailureTemplate") !== "" || componentLocale.getConstant("noRecordsTemplate") !== "") {
          this.l10n = componentLocale;
        } else {
          this.l10n = new L10n(this.getModuleName() === "listbox" ? "listbox" : this.getModuleName() === "mention" ? "mention" : "dropdowns", l10nLocale, this.locale);
        }
        var content2 = actionFailure2 ? this.l10n.getConstant("actionFailureTemplate") : this.l10n.getConstant("noRecordsTemplate");
        if (this.getModuleName() === "listbox") {
          var liElem = this.createElement("li");
          liElem.textContent = content2;
          ele.appendChild(liElem);
          liElem.classList.add("e-list-nrt");
          liElem.setAttribute("role", "option");
        } else {
          if (!isNullOrUndefined(ele)) {
            ele.innerHTML = content2;
          }
        }
      }
    };
    DropDownBase2.prototype.checkAndResetCache = function() {
      if (this.isVirtualizationEnabled) {
        this.generatedDataObject = {};
        this.virtualItemStartIndex = this.virtualItemEndIndex = 0;
        this.viewPortInfo = {
          currentPageNumber: null,
          direction: null,
          sentinelInfo: {},
          offsets: {},
          startIndex: 0,
          endIndex: this.itemCount
        };
        this.selectedValueInfo = null;
      }
    };
    DropDownBase2.prototype.updateIncrementalInfo = function(startIndex, endIndex) {
      this.viewPortInfo.startIndex = startIndex;
      this.viewPortInfo.endIndex = endIndex;
      this.updateVirtualItemIndex();
      this.isIncrementalRequest = true;
      this.resetList(this.dataSource, this.fields, this.query);
      this.isIncrementalRequest = false;
    };
    DropDownBase2.prototype.updateIncrementalView = function(startIndex, endIndex) {
      this.viewPortInfo.startIndex = startIndex;
      this.viewPortInfo.endIndex = endIndex;
      this.updateVirtualItemIndex();
      this.resetList(this.dataSource, this.fields, this.query);
      this.UpdateSkeleton();
      this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
      this.ulElement = this.list.querySelector("ul");
    };
    DropDownBase2.prototype.updateVirtualItemIndex = function() {
      this.virtualItemStartIndex = this.viewPortInfo.startIndex;
      this.virtualItemEndIndex = this.viewPortInfo.endIndex;
      this.virtualListInfo = this.viewPortInfo;
    };
    DropDownBase2.prototype.getFilteringSkeletonCount = function() {
      var currentSkeletonCount = this.skeletonCount;
      this.getSkeletonCount(true);
      this.skeletonCount = this.dataCount < this.itemCount * 2 && (!(this.dataSource instanceof DataManager) || this.dataSource instanceof DataManager && this.totalItemCount <= this.itemCount) ? 0 : this.skeletonCount;
      var skeletonUpdated = true;
      if ((this.getModuleName() === "autocomplete" || this.getModuleName() === "multiselect") && this.totalItemCount < this.itemCount * 2 && (!(this.dataSource instanceof DataManager) || this.dataSource instanceof DataManager && this.totalItemCount <= this.itemCount)) {
        this.skeletonCount = 0;
        skeletonUpdated = false;
      }
      if (!this.list.classList.contains(dropDownBaseClasses.noData)) {
        if (currentSkeletonCount !== this.skeletonCount && skeletonUpdated) {
          this.UpdateSkeleton(true, Math.abs(currentSkeletonCount - this.skeletonCount));
        } else {
          this.UpdateSkeleton();
        }
        this.liCollections = this.list.querySelectorAll(".e-list-item");
        if (this.list.getElementsByClassName("e-virtual-ddl").length > 0) {
          this.list.getElementsByClassName("e-virtual-ddl")[0].style = this.GetVirtualTrackHeight();
        } else if (!this.list.querySelector(".e-virtual-ddl") && this.skeletonCount > 0 && this.list.querySelector(".e-dropdownbase")) {
          var virualElement = this.createElement("div", {
            id: this.element.id + "_popup",
            className: "e-virtual-ddl",
            styles: this.GetVirtualTrackHeight()
          });
          this.list.querySelector(".e-dropdownbase").appendChild(virualElement);
        }
        if (this.list.getElementsByClassName("e-virtual-ddl-content").length > 0) {
          this.list.getElementsByClassName("e-virtual-ddl-content")[0].style = this.getTransformValues();
        }
      }
    };
    DropDownBase2.prototype.getSkeletonCount = function(retainSkeleton) {
      this.virtualListHeight = this.listContainerHeight != null ? parseInt(this.listContainerHeight, 10) : this.virtualListHeight;
      var actualCount = this.virtualListHeight > 0 && this.listItemHeight > 0 ? Math.floor(this.virtualListHeight / this.listItemHeight) : 0;
      this.skeletonCount = actualCount * 4 < this.itemCount ? this.itemCount : actualCount * 4;
      this.itemCount = retainSkeleton ? this.itemCount : this.skeletonCount;
      this.virtualItemCount = this.itemCount;
      this.skeletonCount = Math.floor(this.skeletonCount / 2);
    };
    DropDownBase2.prototype.GetVirtualTrackHeight = function() {
      var height = this.totalItemCount === this.viewPortInfo.endIndex ? this.totalItemCount * this.listItemHeight - this.itemCount * this.listItemHeight : this.totalItemCount * this.listItemHeight;
      height = this.isVirtualTrackHeight ? 0 : height;
      var heightDimension = "height: " + (height - this.itemCount * this.listItemHeight) + "px;";
      if ((this.getModuleName() === "autocomplete" || this.getModuleName() === "multiselect") && this.skeletonCount === 0) {
        return "height: 0px;";
      }
      return heightDimension;
    };
    DropDownBase2.prototype.getTransformValues = function() {
      var translateY = this.viewPortInfo.startIndex * this.listItemHeight;
      translateY = translateY - this.skeletonCount * this.listItemHeight;
      translateY = this.viewPortInfo.startIndex === 0 && this.listData && this.listData.length === 0 || this.skeletonCount === 0 ? 0 : translateY;
      var styleText = "transform: translate(0px, " + translateY + "px);";
      return styleText;
    };
    DropDownBase2.prototype.UpdateSkeleton = function(isSkeletonCountChange, skeletonCount) {
      var isContainSkeleton = this.list.querySelector(".e-virtual-ddl-content");
      var isContainVirtualList = this.list.querySelector(".e-virtual-list");
      if (isContainSkeleton && (!isContainVirtualList || isSkeletonCountChange) && this.isVirtualizationEnabled) {
        var totalSkeletonCount = isSkeletonCountChange ? skeletonCount : this.skeletonCount;
        for (var i = 0; i < totalSkeletonCount; i++) {
          var liElement = this.createElement("li", { className: dropDownBaseClasses.virtualList, styles: "overflow: inherit" });
          if (this.isVirtualizationEnabled && this.itemTemplate) {
            liElement.style.height = this.listItemHeight - parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom, 10) + "px";
          }
          var skeleton = new Skeleton({
            shape: "Text",
            height: "10px",
            width: "95%",
            cssClass: "e-skeleton-text"
          });
          skeleton.appendTo(this.createElement("div"));
          liElement.appendChild(skeleton.element);
          if (isContainSkeleton.firstChild) {
            isContainSkeleton.firstChild.insertBefore(liElement, isContainSkeleton.firstChild.children[0]);
          }
        }
      }
    };
    DropDownBase2.prototype.getLocaleName = function() {
      return "drop-down-base";
    };
    DropDownBase2.prototype.getTextByValue = function(value) {
      var text = this.checkValueCase(value, false, false, true);
      return text;
    };
    DropDownBase2.prototype.getFormattedValue = function(value) {
      if (this.listData && this.listData.length) {
        var item = void 0;
        if (this.properties.allowCustomValue && this.properties.value && this.properties.value instanceof Array && this.properties.value.length > 0) {
          item = this.typeOfData(this.properties.value);
        } else {
          item = this.typeOfData(this.listData);
        }
        if (typeof getValue(this.fields.value ? this.fields.value : "value", item.item) === "number" || item.typeof === "number") {
          return parseFloat(value);
        }
        if (typeof getValue(this.fields.value ? this.fields.value : "value", item.item) === "boolean" || item.typeof === "boolean") {
          return value === "true" || "" + value === "true";
        }
      }
      return value;
    };
    DropDownBase2.prototype.setEnableRtl = function() {
      if (!isNullOrUndefined(this.enableRtlElements)) {
        if (this.list) {
          this.enableRtlElements.push(this.list);
        }
        if (this.enableRtl) {
          addClass(this.enableRtlElements, dropDownBaseClasses.rtl);
        } else {
          removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);
        }
      }
    };
    DropDownBase2.prototype.initialize = function(e) {
      this.bindEvent = true;
      this.preventPopupOpen = true;
      this.actionFailureTemplateId = "" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;
      if (this.element.tagName === "UL") {
        var jsonElement = ListBase.createJsonFromElement(this.element);
        this.setProperties({ fields: { text: "text", value: "text" } }, true);
        this.resetList(jsonElement, this.fields);
      } else if (this.element.tagName === "SELECT") {
        var dataSource = this.dataSource instanceof Array ? this.dataSource.length > 0 ? true : false : !isNullOrUndefined(this.dataSource) ? true : false;
        if (!dataSource) {
          this.renderItemsBySelect();
        } else if (this.isDynamicDataChange) {
          this.setListData(this.dataSource, this.fields, this.query);
        }
      } else {
        this.setListData(this.dataSource, this.fields, this.query, e);
      }
    };
    DropDownBase2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    DropDownBase2.prototype.updateDataAttribute = function(value) {
      var invalidAttr = ["class", "style", "id", "type", "aria-expanded", "aria-autocomplete", "aria-readonly"];
      var attr = {};
      for (var a = 0; a < this.element.attributes.length; a++) {
        if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.getModuleName() === "dropdownlist" && this.element.attributes[a].name === "readonly")) {
          attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);
        }
      }
      extend$1(attr, value, attr);
      this.setProperties({ htmlAttributes: attr }, true);
    };
    DropDownBase2.prototype.renderItemsBySelect = function() {
      var element2 = this.element;
      var group = element2.querySelectorAll("select>optgroup");
      var fields;
      var isSelectGroupCheck = this.getModuleName() === "multiselect" && this.isGroupChecking && group.length > 0;
      fields = isSelectGroupCheck ? { value: "value", text: "text", groupBy: "categeory" } : fields = { value: "value", text: "text" };
      var jsonElement = [];
      var option = element2.querySelectorAll("select>option");
      this.getJSONfromOption(jsonElement, option, fields);
      if (group.length) {
        for (var i = 0; i < group.length; i++) {
          var item = group[i];
          var optionGroup = {};
          optionGroup[fields.text] = item.label;
          optionGroup.isHeader = true;
          var child = item.querySelectorAll("option");
          if (isSelectGroupCheck) {
            this.getJSONfromOption(jsonElement, child, fields, item.label);
          } else {
            jsonElement.push(optionGroup);
            this.getJSONfromOption(jsonElement, child, fields);
          }
        }
        element2.querySelectorAll("select>option");
      }
      this.updateFields(fields.text, fields.value, isSelectGroupCheck ? fields.groupBy : this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss, this.fields.disabled);
      this.resetList(jsonElement, fields);
    };
    DropDownBase2.prototype.updateFields = function(text, value, groupBy, htmlAttributes, iconCss, disabled) {
      var field = {
        "fields": {
          text,
          value,
          groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,
          htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,
          iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss,
          disabled: !isNullOrUndefined(disabled) ? disabled : this.fields && this.fields.disabled
        }
      };
      this.setProperties(field, true);
    };
    DropDownBase2.prototype.getJSONfromOption = function(items, options, fields, category) {
      if (category === void 0) {
        category = null;
      }
      for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {
        var option = options_1[_i];
        var json = {};
        json[fields.text] = option.innerText;
        json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ? option.getAttribute(fields.value) : option.innerText;
        if (!isNullOrUndefined(category)) {
          json[fields.groupBy] = category;
        }
        items.push(json);
      }
    };
    DropDownBase2.prototype.preRender = function() {
      this.scrollTimer = -1;
      this.enableRtlElements = [];
      this.isRequested = false;
      this.isDataFetched = false;
      this.itemTemplateId = "" + this.element.id + ITEMTEMPLATE_PROPERTY;
      this.displayTemplateId = "" + this.element.id + DISPLAYTEMPLATE_PROPERTY;
      this.spinnerTemplateId = "" + this.element.id + SPINNERTEMPLATE_PROPERTY;
      this.valueTemplateId = "" + this.element.id + VALUETEMPLATE_PROPERTY;
      this.groupTemplateId = "" + this.element.id + GROUPTEMPLATE_PROPERTY;
      this.headerTemplateId = "" + this.element.id + HEADERTEMPLATE_PROPERTY;
      this.footerTemplateId = "" + this.element.id + FOOTERTEMPLATE_PROPERTY;
      this.noRecordsTemplateId = "" + this.element.id + NORECORDSTEMPLATE_PROPERTY;
    };
    DropDownBase2.prototype.setListData = function(dataSource, fields, query, event) {
      var _this = this;
      fields = fields ? fields : this.fields;
      var ulElement;
      this.isActive = true;
      var eventArgs = { cancel: false, data: dataSource, query };
      this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;
      if (!this.isRequesting) {
        this.trigger("actionBegin", eventArgs, function(eventArgs2) {
          if (!eventArgs2.cancel) {
            _this.isRequesting = true;
            _this.showSpinner();
            if (dataSource instanceof DataManager) {
              _this.isRequested = true;
              var isWhereExist_1 = false;
              if (_this.isDataFetched) {
                _this.emptyDataRequest(fields);
                return;
              }
              eventArgs2.data.executeQuery(_this.getQuery(eventArgs2.query)).then(function(e) {
                _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;
                var isReOrder2 = true;
                if (!_this.virtualSelectAll) {
                  var newQuery2 = _this.getQuery(eventArgs2.query);
                  for (var queryElements2 = 0; queryElements2 < newQuery2.queries.length; queryElements2++) {
                    if (newQuery2.queries[queryElements2].fn === "onWhere") {
                      isWhereExist_1 = true;
                    }
                  }
                  if (_this.isVirtualizationEnabled && (e.count !== 0 && e.count < _this.itemCount * 2)) {
                    if (newQuery2) {
                      for (var queryElements2 = 0; queryElements2 < newQuery2.queries.length; queryElements2++) {
                        if (newQuery2.queries[queryElements2].fn === "onTake") {
                          newQuery2.queries[queryElements2].e.nos = e.count;
                        }
                        if (_this.getModuleName() === "multiselect" && (newQuery2.queries[queryElements2].e.condition === "or" || newQuery2.queries[queryElements2].e.operator === "equal") && !_this.isCustomFiltering) {
                          isReOrder2 = false;
                        }
                      }
                    }
                  } else {
                    _this.isVirtualTrackHeight = false;
                    if (newQuery2) {
                      for (var queryElements2 = 0; queryElements2 < newQuery2.queries.length; queryElements2++) {
                        if (_this.getModuleName() === "multiselect" && (newQuery2.queries[queryElements2].e && newQuery2.queries[queryElements2].e.condition === "or" || newQuery2.queries[queryElements2].e && newQuery2.queries[queryElements2].e.operator === "equal")) {
                          isReOrder2 = false;
                        }
                      }
                    }
                  }
                }
                if (isReOrder2) {
                  _this.dataCount = _this.totalItemCount = e.count;
                }
                _this.trigger("actionComplete", e, function(e2) {
                  if (!e2.cancel) {
                    _this.isRequesting = false;
                    _this.isCustomFiltering = false;
                    var listItems2 = e2.result;
                    if (_this.isIncrementalRequest) {
                      ulElement = _this.renderItems(listItems2, fields);
                      return;
                    }
                    if (!_this.isVirtualizationEnabled && listItems2.length === 0 || _this.isVirtualizationEnabled && listItems2.length === 0 && !isWhereExist_1) {
                      _this.isDataFetched = true;
                    }
                    if (!isWhereExist_1) {
                      _this.remoteDataCount = e2.count;
                    }
                    _this.dataCount = !_this.virtualSelectAll ? e2.count : _this.dataCount;
                    _this.totalItemCount = !_this.virtualSelectAll ? e2.count : _this.totalItemCount;
                    ulElement = _this.renderItems(listItems2, fields);
                    _this.appendUncheckList = false;
                    _this.onActionComplete(ulElement, listItems2, e2);
                    if (_this.groupTemplate) {
                      _this.renderGroupTemplate(ulElement);
                    }
                    _this.isRequested = false;
                    _this.bindChildItems(listItems2, ulElement, fields, e2);
                    if (_this.getInitialData) {
                      _this.getInitialData = false;
                      _this.preventPopupOpen = false;
                      return;
                    }
                    if (_this.isVirtualizationEnabled && _this.setCurrentView) {
                      _this.notify("setCurrentViewDataAsync", {
                        module: "VirtualScroll"
                      });
                    }
                    if (_this.keyboardEvent != null) {
                      _this.handleVirtualKeyboardActions(_this.keyboardEvent, _this.pageCount);
                    }
                    if (_this.isVirtualizationEnabled) {
                      _this.getFilteringSkeletonCount();
                      _this.updatePopupPosition();
                    }
                    if (_this.virtualSelectAll && _this.virtualSelectAllData) {
                      _this.virtualSelectionAll(_this.virtualSelectAllState, _this.liCollections, _this.CurrentEvent);
                      _this.virtualSelectAllState = false;
                      _this.CurrentEvent = null;
                      _this.virtualSelectAll = false;
                    }
                  }
                });
              }).catch(function(e) {
                _this.isRequested = false;
                _this.isRequesting = false;
                _this.onActionFailure(e);
                _this.hideSpinner();
              });
            } else {
              _this.isRequesting = false;
              var isReOrder = true;
              var listItems = void 0;
              if (_this.isVirtualizationEnabled && !_this.virtualGroupDataSource && _this.fields.groupBy) {
                var data = new DataManager(_this.dataSource).executeLocal(new Query().group(_this.fields.groupBy));
                _this.virtualGroupDataSource = data.records;
              }
              var dataManager = _this.isVirtualizationEnabled && _this.virtualGroupDataSource && !_this.isCustomDataUpdated ? new DataManager(_this.virtualGroupDataSource) : new DataManager(eventArgs2.data);
              listItems = _this.getQuery(eventArgs2.query).executeLocal(dataManager);
              if (!_this.virtualSelectAll) {
                var newQuery = _this.getQuery(eventArgs2.query);
                if (_this.isVirtualizationEnabled && (listItems.count !== 0 && listItems.count < _this.itemCount * 2) && !_this.appendUncheckList) {
                  if (newQuery) {
                    for (var queryElements = 0; queryElements < newQuery.queries.length; queryElements++) {
                      if (newQuery.queries[queryElements].fn === "onTake") {
                        newQuery.queries[queryElements].e.nos = listItems.count;
                        listItems = newQuery.executeLocal(dataManager);
                      }
                      if (_this.getModuleName() === "multiselect" && (newQuery.queries[queryElements].e.condition === "or" || newQuery.queries[queryElements].e.operator === "equal") && !_this.isCustomFiltering) {
                        isReOrder = false;
                      }
                    }
                    if (isReOrder) {
                      listItems = newQuery.executeLocal(dataManager);
                      _this.isVirtualTrackHeight = !(_this.dataSource instanceof DataManager) && !_this.isCustomDataUpdated ? true : false;
                    }
                  }
                } else {
                  _this.isVirtualTrackHeight = false;
                  if (newQuery) {
                    for (var queryElements = 0; queryElements < newQuery.queries.length; queryElements++) {
                      if (_this.getModuleName() === "multiselect" && (newQuery.queries[queryElements].e && newQuery.queries[queryElements].e.condition === "or" || newQuery.queries[queryElements].e && newQuery.queries[queryElements].e.operator === "equal")) {
                        isReOrder = false;
                      }
                    }
                  }
                }
              }
              if (isReOrder && (!(_this.dataSource instanceof DataManager) && !_this.isCustomDataUpdated) && !_this.virtualSelectAll) {
                _this.dataCount = _this.totalItemCount = _this.virtualSelectAll ? listItems.length : listItems.count;
              }
              listItems = _this.isVirtualizationEnabled ? listItems.result : listItems;
              var localDataArgs = { cancel: false, result: listItems };
              _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;
              _this.trigger("actionComplete", localDataArgs, function(localDataArgs2) {
                _this.isCustomFiltering = false;
                if (_this.isIncrementalRequest) {
                  ulElement = _this.renderItems(localDataArgs2.result, fields);
                  return;
                }
                if (!localDataArgs2.cancel) {
                  ulElement = _this.renderItems(localDataArgs2.result, fields);
                  _this.onActionComplete(ulElement, localDataArgs2.result, event);
                  if (_this.groupTemplate) {
                    _this.renderGroupTemplate(ulElement);
                  }
                  _this.bindChildItems(localDataArgs2.result, ulElement, fields);
                  if (_this.getInitialData) {
                    _this.getInitialData = false;
                    _this.preventPopupOpen = false;
                    return;
                  }
                  setTimeout(function() {
                    if (_this.getModuleName() === "multiselect" && _this.itemTemplate != null && (ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || _this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0))) {
                      _this.updateDataList();
                    }
                  });
                }
              });
            }
          }
        });
      }
    };
    DropDownBase2.prototype.handleVirtualKeyboardActions = function(e, pageCount) {
    };
    DropDownBase2.prototype.updatePopupState = function() {
    };
    DropDownBase2.prototype.updatePopupPosition = function() {
    };
    DropDownBase2.prototype.virtualSelectionAll = function(state, li, event) {
    };
    DropDownBase2.prototype.updateRemoteData = function() {
      this.setListData(this.dataSource, this.fields, this.query);
    };
    DropDownBase2.prototype.bindChildItems = function(listItems, ulElement, fields, e) {
      var _this = this;
      if (listItems.length >= 100 && this.getModuleName() === "autocomplete") {
        setTimeout(function() {
          var childNode = _this.remainingItems(_this.sortedData, fields);
          append(childNode, ulElement);
          _this.liCollections = _this.list.querySelectorAll("." + dropDownBaseClasses.li);
          _this.updateListValues();
          _this.raiseDataBound(listItems, e);
        }, 0);
      } else {
        this.raiseDataBound(listItems, e);
      }
    };
    DropDownBase2.prototype.isObjectInArray = function(objectToFind, array) {
      return array.some(function(item) {
        return Object.keys(objectToFind).every(function(key) {
          return Object.prototype.hasOwnProperty.call(item, key) && item[key] === objectToFind[key];
        });
      });
    };
    DropDownBase2.prototype.updateListValues = function() {
    };
    DropDownBase2.prototype.findListElement = function(list, findNode, attribute, value) {
      var liElement = null;
      if (list) {
        var listArr = [].slice.call(list.querySelectorAll(findNode));
        for (var index = 0; index < listArr.length; index++) {
          if (listArr[index].getAttribute(attribute) === value + "") {
            liElement = listArr[index];
            break;
          }
        }
      }
      return liElement;
    };
    DropDownBase2.prototype.raiseDataBound = function(listItems, e) {
      this.hideSpinner();
      var dataBoundEventArgs = {
        items: listItems,
        e
      };
      this.trigger("dataBound", dataBoundEventArgs);
    };
    DropDownBase2.prototype.remainingItems = function(dataSource, fields) {
      var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));
      if (this.itemTemplate) {
        var listElements = this.templateListItem(spliceData, fields);
        return [].slice.call(listElements.childNodes);
      }
      var type = this.typeOfData(spliceData).typeof;
      if (type === "string" || type === "number" || type === "boolean") {
        return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);
      }
      return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);
    };
    DropDownBase2.prototype.emptyDataRequest = function(fields) {
      var listItems = [];
      this.onActionComplete(this.renderItems(listItems, fields), listItems);
      this.isRequested = false;
      this.isRequesting = false;
      this.hideSpinner();
    };
    DropDownBase2.prototype.showSpinner = function() {
    };
    DropDownBase2.prototype.hideSpinner = function() {
    };
    DropDownBase2.prototype.onActionFailure = function(e) {
      this.liCollections = [];
      this.trigger("actionFailure", e);
      this.l10nUpdate(true);
      if (!isNullOrUndefined(this.list)) {
        addClass([this.list], dropDownBaseClasses.noData);
      }
    };
    DropDownBase2.prototype.onActionComplete = function(ulElement, list, e) {
      this.listData = list;
      if (this.isVirtualizationEnabled && !this.isCustomDataUpdated && !this.virtualSelectAll) {
        this.notify("setGeneratedData", {
          module: "VirtualScroll"
        });
      }
      if (this.getModuleName() !== "listbox") {
        ulElement.setAttribute("tabindex", "0");
      }
      if (this.isReact) {
        this.clearTemplate(["itemTemplate", "groupTemplate", "actionFailureTemplate", "noRecordsTemplate"]);
      }
      if (!this.isVirtualizationEnabled) {
        this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;
      }
      if (this.getModuleName() === "multiselect" && this.properties.allowCustomValue && this.fields.groupBy) {
        for (var i = 0; i < ulElement.childElementCount; i++) {
          if (ulElement.children[i].classList.contains("e-list-group-item")) {
            if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML === "") {
              addClass([ulElement.children[i]], HIDE_GROUPLIST);
            }
          }
          if (ulElement.children[0].classList.contains("e-hide-group-header")) {
            setStyleAttribute(ulElement.children[1], { zIndex: 11 });
          }
        }
      }
      if (!isNullOrUndefined(this.list)) {
        if (!this.isVirtualizationEnabled) {
          this.list.innerHTML = "";
          this.list.appendChild(ulElement);
          this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
          this.ulElement = this.list.querySelector("ul");
          this.postRender(this.list, list, this.bindEvent);
        }
      }
    };
    DropDownBase2.prototype.postRender = function(listElement, list, bindEvent) {
      if (this.fields.disabled) {
        var liCollections = listElement.querySelectorAll("." + dropDownBaseClasses.li);
        for (var index = 0; index < liCollections.length; index++) {
          if (JSON.parse(JSON.stringify(this.listData[index]))[this.fields.disabled]) {
            if (!isNullOrUndefined(this.fields.groupBy)) {
              var item = this.listData[index];
              var value = getValue(this.fields.value ? this.fields.value : "value", item);
              var li = listElement.querySelector('li[data-value="' + value + '"]');
              if (!isNullOrUndefined(li)) {
                this.disableListItem(li);
              }
            } else {
              this.disableListItem(liCollections[index]);
            }
          }
        }
      }
      var focusItem = this.fields.disabled ? listElement.querySelector("." + dropDownBaseClasses.li + ":not(.e-disabled") : listElement.querySelector("." + dropDownBaseClasses.li);
      var selectedItem = listElement.querySelector("." + dropDownBaseClasses.selected);
      if (focusItem && !selectedItem) {
        if (this.isVirtualizationEnabled && this.viewPortInfo.startIndex !== 0) {
          var elements = this.ulElement.querySelectorAll("li." + dropDownBaseClasses.li + ":not(.e-virtual-list):not(.e-hide-listitem)");
          focusItem = elements && elements.length > 0 ? elements[2] : focusItem;
        }
        if (focusItem) {
          focusItem.classList.add(dropDownBaseClasses.focus);
        }
      }
      if (list.length <= 0) {
        this.l10nUpdate();
        addClass([listElement], dropDownBaseClasses.noData);
      } else {
        listElement.classList.remove(dropDownBaseClasses.noData);
      }
    };
    DropDownBase2.prototype.getQuery = function(query) {
      return query ? query : this.query ? this.query : new Query();
    };
    DropDownBase2.prototype.updateVirtualizationProperties = function(itemCount, filtering, isCheckbox) {
      this.isVirtualizationEnabled = true;
      this.virtualizedItemsCount = itemCount;
      this.isAllowFiltering = filtering;
      this.isCheckBoxSelection = isCheckbox;
    };
    DropDownBase2.prototype.renderGroupTemplate = function(listEle) {
      if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector("." + dropDownBaseClasses.group)) {
        var dataSource = this.dataSource;
        var option = { groupTemplateID: this.groupTemplateId, isStringTemplate: this.isStringTemplate };
        var headerItems = listEle.querySelectorAll("." + dropDownBaseClasses.group);
        var groupcheck = this.templateCompiler(this.groupTemplate);
        if (typeof this.groupTemplate !== "function" && groupcheck) {
          var groupValue = select(this.groupTemplate, document).innerHTML.trim();
          var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);
          if (this.isGroupChecking) {
            for (var i = 0; i < tempHeaders.length; i++) {
              this.notify("addItem", { module: "CheckBoxSelection", item: tempHeaders[i] });
            }
          }
        } else {
          var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);
          if (this.isGroupChecking) {
            for (var i = 0; i < tempHeaders.length; i++) {
              this.notify("addItem", { module: "CheckBoxSelection", item: tempHeaders[i] });
            }
          }
        }
        this.renderReactTemplates();
      }
    };
    DropDownBase2.prototype.createListItems = function(dataSource, fields) {
      if (dataSource) {
        if (fields.groupBy || this.element.querySelector("optgroup")) {
          if (fields.groupBy) {
            if (this.sortOrder !== "None") {
              dataSource = this.getSortedDataSource(dataSource);
            }
            var fieldSet = fields.properties || fields;
            dataSource = ListBase.groupDataSource(dataSource, fieldSet, this.sortOrder);
          }
          addClass([this.list], dropDownBaseClasses.grouping);
        } else if (this.getModuleName() !== "listbox" || this.getModuleName() === "listbox" && !this.preventDefActionFilter) {
          dataSource = this.getSortedDataSource(dataSource);
        }
        var options = this.listOption(dataSource, fields);
        var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;
        this.sortedData = dataSource;
        return ListBase.createList(this.createElement, this.getModuleName() === "autocomplete" ? spliceData : dataSource, options, true, this);
      }
      return null;
    };
    DropDownBase2.prototype.listOption = function(dataSource, fields) {
      var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;
      var fieldValues = !isNullOrUndefined(fields.properties) ? fields.properties : fields;
      var options = fields.text !== null || fields.value !== null ? {
        fields: fieldValues,
        showIcon: iconCss,
        ariaAttributes: { groupItemRole: "presentation" }
      } : { fields: { value: "text" } };
      return extend$1({}, options, fields, true);
    };
    DropDownBase2.prototype.setFloatingHeader = function(e) {
      if (!isNullOrUndefined(this.list) && !this.list.classList.contains(dropDownBaseClasses.noData)) {
        if (isNullOrUndefined(this.fixedHeaderElement)) {
          this.fixedHeaderElement = this.createElement("div", { className: dropDownBaseClasses.fixedHead });
          if (!isNullOrUndefined(this.list) && !this.list.querySelector("li").classList.contains(dropDownBaseClasses.group)) {
            this.fixedHeaderElement.style.display = "none";
          }
          if (!isNullOrUndefined(this.fixedHeaderElement) && !isNullOrUndefined(this.list)) {
            prepend([this.fixedHeaderElement], this.list);
          }
          this.setFixedHeader();
        }
        if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === "0") {
          this.setFixedHeader();
        }
        this.scrollStop(e);
      }
    };
    DropDownBase2.prototype.scrollStop = function(e, isDownkey) {
      var target = !isNullOrUndefined(e) ? e.target : this.list;
      var computedHeight = getComputedStyle(this.getValidLi(), null).getPropertyValue("height");
      var computedMarginValue = getComputedStyle(this.getValidLi(), null).getPropertyValue("margin-bottom");
      var marginValue = parseInt(computedMarginValue, 10);
      var liHeight = this.getModuleName() === "multiselect" ? parseFloat(computedHeight) : parseInt(computedHeight, 10);
      var topIndex = Math.round(target.scrollTop / (liHeight + marginValue));
      var liCollections = this.list.querySelectorAll("li:not(.e-hide-listitem)");
      var virtualListCount = this.list.querySelectorAll(".e-virtual-list").length;
      for (var i = topIndex; i > -1; i--) {
        var index = this.isVirtualizationEnabled ? i + virtualListCount : i;
        if (this.isVirtualizationEnabled) {
          if (this.fixedHeaderElement && this.updateGroupHeader(index, liCollections, target)) {
            break;
          }
          if (isDownkey) {
            if (!isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.selected) && this.getModuleName() !== "autocomplete" || !isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.focus) && this.getModuleName() === "autocomplete") ;
          }
        } else {
          if (this.updateGroupHeader(index, liCollections, target)) {
            break;
          }
        }
      }
    };
    DropDownBase2.prototype.getPageCount = function(returnExactCount) {
      if (this.list) {
        var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue("height");
        var pageCount = Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));
        return returnExactCount ? pageCount : Math.round(pageCount);
      } else {
        return 0;
      }
    };
    DropDownBase2.prototype.updateGroupHeader = function(index, liCollections, target) {
      if (!isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.group)) {
        this.updateGroupFixedHeader(liCollections[index], target);
        return true;
      } else {
        this.fixedHeaderElement.style.display = "none";
        this.fixedHeaderElement.style.top = "none";
        return false;
      }
    };
    DropDownBase2.prototype.updateGroupFixedHeader = function(element2, target) {
      if (this.fixedHeaderElement) {
        if (!isNullOrUndefined(element2.innerHTML)) {
          this.fixedHeaderElement.innerHTML = element2.innerHTML;
        }
        this.fixedHeaderElement.style.position = "fixed";
        this.fixedHeaderElement.style.top = this.list.parentElement.offsetTop + this.list.offsetTop - window.scrollY + "px";
        this.fixedHeaderElement.style.display = "block";
      }
    };
    DropDownBase2.prototype.getValidLi = function() {
      if (this.isVirtualizationEnabled) {
        return this.liCollections[0].classList.contains("e-virtual-list") ? this.liCollections[this.skeletonCount] : this.liCollections[0];
      }
      return this.liCollections[0];
    };
    DropDownBase2.prototype.renderItems = function(listData, fields, isCheckBoxUpdate) {
      var ulElement;
      if (this.itemTemplate && listData) {
        if (this.getModuleName() === "multiselect" && this.virtualSelectAll) {
          this.virtualSelectAllData = listData;
          listData = listData.slice(this.virtualItemStartIndex, this.virtualItemEndIndex);
        }
        var dataSource = listData;
        if (dataSource && fields.groupBy) {
          if (this.sortOrder !== "None") {
            dataSource = this.getSortedDataSource(dataSource);
          }
          dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);
        } else if (this.getModuleName() !== "listbox" || this.getModuleName() === "listbox" && !this.preventDefActionFilter) {
          dataSource = this.getSortedDataSource(dataSource);
        }
        this.sortedData = dataSource;
        var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;
        ulElement = this.templateListItem(this.getModuleName() === "autocomplete" ? spliceData : dataSource, fields);
        if (this.isIncrementalRequest) {
          this.incrementalLiCollections = ulElement.querySelectorAll("." + dropDownBaseClasses.li);
          this.incrementalUlElement = ulElement;
          this.incrementalListData = listData;
          return ulElement;
        }
        if (this.isVirtualizationEnabled) {
          var oldUlElement = this.list.querySelector(".e-list-parent");
          var virtualUlElement = this.list.querySelector(".e-virtual-ddl-content");
          if (listData.length >= this.virtualizedItemsCount && oldUlElement && virtualUlElement || oldUlElement && virtualUlElement && this.isAllowFiltering || oldUlElement && virtualUlElement && this.getModuleName() === "autocomplete") {
            if (this.getModuleName() === "multiselect" && this.isCheckBoxSelection && this.appendUncheckList && this.list && this.list.querySelector(".e-active")) {
              virtualUlElement.appendChild(ulElement);
              isCheckBoxUpdate = true;
            } else {
              virtualUlElement.replaceChild(ulElement, oldUlElement);
            }
            var reOrderList = this.list.querySelectorAll(".e-reorder");
            if (this.list.querySelector(".e-virtual-ddl-content") && reOrderList && reOrderList.length > 0 && !isCheckBoxUpdate) {
              this.list.querySelector(".e-virtual-ddl-content").removeChild(reOrderList[0]);
            }
            this.updateListElements(listData);
          } else if (!virtualUlElement) {
            this.list.innerHTML = "";
            this.createVirtualContent();
            this.list.querySelector(".e-virtual-ddl-content").appendChild(ulElement);
            this.updateListElements(listData);
          }
        }
      } else {
        if (this.getModuleName() === "multiselect" && this.virtualSelectAll) {
          this.virtualSelectAllData = listData;
          listData = listData.slice(this.virtualItemStartIndex, this.virtualItemEndIndex);
        }
        ulElement = this.createListItems(listData, fields);
        if (this.isIncrementalRequest) {
          this.incrementalLiCollections = ulElement.querySelectorAll("." + dropDownBaseClasses.li);
          this.incrementalUlElement = ulElement;
          this.incrementalListData = listData;
          return ulElement;
        }
        if (this.isVirtualizationEnabled) {
          var oldUlElement = this.list.querySelector(".e-list-parent:not(.e-reorder)");
          var virtualUlElement = this.list.querySelector(".e-virtual-ddl-content");
          var isRemovedUlelement = false;
          if (!oldUlElement && this.list.querySelector(".e-list-parent.e-reorder") || oldUlElement && this.isVirtualReorder && this.list.querySelector(".e-list-parent.e-reorder")) {
            oldUlElement = this.list.querySelector(".e-list-parent.e-reorder");
          }
          if (listData.length >= this.virtualizedItemsCount && oldUlElement && virtualUlElement || oldUlElement && virtualUlElement && this.isAllowFiltering || oldUlElement && virtualUlElement && (this.getModuleName() === "autocomplete" || this.getModuleName() === "multiselect") || isRemovedUlelement) {
            if (!this.appendUncheckList) {
              virtualUlElement.replaceChild(ulElement, oldUlElement);
            } else {
              virtualUlElement.appendChild(ulElement);
            }
            this.updateListElements(listData);
          } else if (!virtualUlElement || !virtualUlElement.firstChild) {
            this.list.innerHTML = "";
            this.createVirtualContent();
            this.list.querySelector(".e-virtual-ddl-content").appendChild(ulElement);
            this.updateListElements(listData);
          }
        }
      }
      return ulElement;
    };
    DropDownBase2.prototype.createVirtualContent = function() {
      if (!this.list.querySelector(".e-virtual-ddl-content")) {
        this.list.appendChild(this.createElement("div", {
          className: "e-virtual-ddl-content"
        }));
      }
    };
    DropDownBase2.prototype.updateListElements = function(listData) {
      this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
      this.ulElement = this.list.querySelector("ul");
      this.listData = listData;
      this.postRender(this.list, listData, this.bindEvent);
    };
    DropDownBase2.prototype.templateListItem = function(dataSource, fields) {
      var option = this.listOption(dataSource, fields);
      option.templateID = this.itemTemplateId;
      option.isStringTemplate = this.isStringTemplate;
      var itemcheck = this.templateCompiler(this.itemTemplate);
      var ulElement;
      if (typeof this.itemTemplate !== "function" && itemcheck) {
        var itemValue = select(this.itemTemplate, document).innerHTML.trim();
        ulElement = ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);
        if (this.isVirtualizationEnabled && this.isReact) {
          this.renderReactTemplates();
        }
        return ulElement;
      } else {
        ulElement = ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);
        if (this.isVirtualizationEnabled && this.isReact) {
          this.renderReactTemplates();
        }
        return ulElement;
      }
    };
    DropDownBase2.prototype.typeOfData = function(items) {
      var item = { typeof: null, item: null };
      for (var i = 0; !isNullOrUndefined(items) && i < items.length; i++) {
        if (!isNullOrUndefined(items[i])) {
          var listDataType = typeof items[i] === "string" || typeof items[i] === "number" || typeof items[i] === "boolean";
          var isNullData = listDataType ? isNullOrUndefined(items[i]) : isNullOrUndefined(getValue(this.fields.value ? this.fields.value : "value", items[i]));
          if (!isNullData) {
            return item = { typeof: typeof items[i], item: items[i] };
          }
        }
      }
      return item;
    };
    DropDownBase2.prototype.setFixedHeader = function() {
      if (!isNullOrUndefined(this.list)) {
        this.list.parentElement.style.display = "block";
      }
      var borderWidth = 0;
      if (this.list && this.list.parentElement) {
        borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-width"), 10);
        if (isNaN(borderWidth)) {
          var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-top-width"), 10);
          var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-bottom-width"), 10);
          var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-left-width"), 10);
          var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-right-width"), 10);
          borderWidth = borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth;
        }
      }
      if (!isNullOrUndefined(this.liCollections)) {
        var liWidth = this.getValidLi().offsetWidth - borderWidth;
        this.fixedHeaderElement.style.width = liWidth.toString() + "px";
      }
      setStyleAttribute(this.fixedHeaderElement, { zIndex: 10 });
      var firstLi = this.ulElement.querySelector("." + dropDownBaseClasses.group + ":not(.e-hide-listitem)");
      if (!isNullOrUndefined(firstLi)) {
        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;
      }
    };
    DropDownBase2.prototype.getSortedDataSource = function(dataSource) {
      if (dataSource && this.sortOrder !== "None") {
        var textField = this.fields.text ? this.fields.text : "text";
        if (this.typeOfData(dataSource).typeof === "string" || this.typeOfData(dataSource).typeof === "number" || this.typeOfData(dataSource).typeof === "boolean") {
          textField = "";
        }
        dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));
      }
      return dataSource;
    };
    DropDownBase2.prototype.getIndexByValue = function(value) {
      var index;
      var listItems = [];
      if (this.fields.disabled && this.getModuleName() === "multiselect" && this.liCollections) {
        listItems = this.liCollections;
      } else {
        listItems = this.getItems();
      }
      for (var i = 0; i < listItems.length; i++) {
        if (!isNullOrUndefined(value) && listItems[i].getAttribute("data-value") === value.toString()) {
          index = i;
          break;
        }
      }
      return index;
    };
    DropDownBase2.prototype.getIndexByValueFilter = function(value, ulElement) {
      var index;
      if (!ulElement) {
        return null;
      }
      var listItems = ulElement.querySelectorAll("li:not(.e-list-group-item)");
      if (listItems) {
        for (var i = 0; i < listItems.length; i++) {
          if (!isNullOrUndefined(value) && listItems[i].getAttribute("data-value") === value.toString()) {
            index = i;
            break;
          }
        }
      }
      return index;
    };
    DropDownBase2.prototype.dispatchEvent = function(element2, type) {
      var evt = document.createEvent("HTMLEvents");
      evt.initEvent(type, false, true);
      if (element2) {
        element2.dispatchEvent(evt);
      }
    };
    DropDownBase2.prototype.setFields = function() {
      if (this.fields.value && !this.fields.text) {
        this.updateFields(this.fields.value, this.fields.value);
      } else if (!this.fields.value && this.fields.text) {
        this.updateFields(this.fields.text, this.fields.text);
      } else if (!this.fields.value && !this.fields.text) {
        this.isPrimitiveData = true;
        this.updateFields("text", "text");
      }
    };
    DropDownBase2.prototype.resetList = function(dataSource, fields, query, e) {
      if (this.list) {
        if (this.element.tagName === "SELECT" && this.element.options.length > 0 || this.element.tagName === "UL" && this.element.childNodes.length > 0) {
          var data = dataSource instanceof Array ? dataSource.length > 0 : !isNullOrUndefined(dataSource);
          if (!data && this.selectData && this.selectData.length > 0) {
            dataSource = this.selectData;
          }
        }
        dataSource = this.getModuleName() === "combobox" && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;
        this.addedNewItem = false;
        this.setListData(dataSource, fields, query, e);
      }
    };
    DropDownBase2.prototype.updateSelectElementData = function(isFiltering) {
      if ((isFiltering || this.isVirtualizationEnabled) && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {
        this.selectData = this.listData;
      }
    };
    DropDownBase2.prototype.updateSelection = function() {
    };
    DropDownBase2.prototype.renderList = function() {
      this.render();
    };
    DropDownBase2.prototype.updateDataSource = function(props, oldProps) {
      this.resetList(this.dataSource);
      this.totalItemCount = this.dataSource instanceof DataManager ? this.dataSource.dataSource.json.length : 0;
    };
    DropDownBase2.prototype.setUpdateInitial = function(props, newProp, oldProp) {
      this.isDataFetched = false;
      this.isPrimitiveData = false;
      var updateData2 = {};
      for (var j = 0; props.length > j; j++) {
        if (newProp[props[j]] && props[j] === "fields") {
          this.setFields();
          updateData2[props[j]] = newProp[props[j]];
        } else if (newProp[props[j]]) {
          updateData2[props[j]] = newProp[props[j]];
        }
      }
      if (Object.keys(updateData2).length > 0) {
        if (Object.keys(updateData2).indexOf("dataSource") === -1) {
          updateData2.dataSource = this.dataSource;
        }
        if (this.getModuleName() === "listbox") {
          if (!this.isReact || this.isReact && (!isNullOrUndefined(newProp.dataSource) || !isNullOrUndefined(newProp.sortOrder))) {
            this.updateDataSource(updateData2, oldProp);
          }
        } else {
          this.isDynamicData = true;
          this.updateDataSource(updateData2, oldProp);
        }
      }
    };
    DropDownBase2.prototype.onPropertyChanged = function(newProp, oldProp) {
      if (this.getModuleName() === "dropdownbase") {
        this.setUpdateInitial(["fields", "query", "dataSource"], newProp);
      }
      this.setUpdateInitial(["sortOrder", "itemTemplate"], newProp);
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "query":
          case "sortOrder":
          case "dataSource":
          case "itemTemplate":
            break;
          case "enableRtl":
            this.setEnableRtl();
            break;
          case "groupTemplate":
            this.renderGroupTemplate(this.list);
            if (this.ulElement && this.fixedHeaderElement) {
              var firstLi = this.ulElement.querySelector("." + dropDownBaseClasses.group);
              this.fixedHeaderElement.innerHTML = firstLi.innerHTML;
            }
            break;
          case "locale":
            if (this.list && (!isNullOrUndefined(this.liCollections) && this.liCollections.length === 0)) {
              this.l10nUpdate();
            }
            break;
          case "zIndex":
            this.setProperties({ zIndex: newProp.zIndex }, true);
            this.setZIndex();
            break;
        }
      }
    };
    DropDownBase2.prototype.render = function(e, isEmptyData) {
      if (this.getModuleName() === "listbox") {
        this.list = this.createElement("div", { className: dropDownBaseClasses.content, attrs: { "tabindex": "0" } });
      } else {
        this.list = this.createElement("div", { className: dropDownBaseClasses.content });
      }
      this.list.classList.add(dropDownBaseClasses.root);
      this.setFields();
      var rippleModel = { duration: 300, selector: "." + dropDownBaseClasses.li };
      this.rippleFun = rippleEffect(this.list, rippleModel);
      var group = this.element.querySelector("select>optgroup");
      if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {
        EventHandler.add(this.list, "scroll", this.setFloatingHeader, this);
        var elements = this.getScrollableParent();
        for (var i = 0; i < elements.length; i++) {
          var ele = elements[i];
          EventHandler.add(ele, "scroll", this.updateGroupFixedHeader, this);
        }
      }
      if (this.getModuleName() === "dropdownbase") {
        if (this.element.getAttribute("tabindex")) {
          this.list.setAttribute("tabindex", this.element.getAttribute("tabindex"));
        }
        removeClass([this.element], dropDownBaseClasses.root);
        this.element.style.display = "none";
        var wrapperElement = this.createElement("div");
        this.element.parentElement.insertBefore(wrapperElement, this.element);
        wrapperElement.appendChild(this.element);
        wrapperElement.appendChild(this.list);
      }
      this.setEnableRtl();
      if (!isEmptyData) {
        this.initialize(e);
      }
    };
    DropDownBase2.prototype.getScrollableParent = function() {
      var eleStyle = getComputedStyle(this.element);
      var scrollParents = [];
      var overflowRegex = /(auto|scroll)/;
      var parent = this.element.parentElement;
      while (parent && parent.tagName !== "HTML") {
        var parentStyle = getComputedStyle(parent);
        if (!(eleStyle.position === "absolute" && parentStyle.position === "static") && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {
          scrollParents.push(parent);
        }
        parent = parent.parentElement;
      }
      scrollParents.push(document);
      return scrollParents;
    };
    DropDownBase2.prototype.removeScrollEvent = function() {
      if (this.list) {
        EventHandler.remove(this.list, "scroll", this.setFloatingHeader);
      }
    };
    DropDownBase2.prototype.getModuleName = function() {
      return "dropdownbase";
    };
    DropDownBase2.prototype.getItems = function() {
      return this.ulElement.querySelectorAll("." + dropDownBaseClasses.li);
    };
    DropDownBase2.prototype.addItem = function(items, itemIndex) {
      if (!this.list || this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== "listbox") {
        this.renderList();
      }
      if (this.sortOrder !== "None" && isNullOrUndefined(itemIndex)) {
        var newList = [].slice.call(this.listData);
        newList.push(items);
        newList = this.getSortedDataSource(newList);
        if (this.fields.groupBy) {
          newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);
          itemIndex = newList.indexOf(items);
        } else {
          itemIndex = newList.indexOf(items);
        }
      }
      var itemsCount = this.getItems().length;
      var isListboxEmpty = itemsCount === 0;
      var selectedItemValue = this.list.querySelector("." + dropDownBaseClasses.selected);
      items = items instanceof Array ? items : [items];
      var index;
      index = isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1 ? itemsCount : itemIndex;
      var fields = this.fields;
      if (items && fields.groupBy) {
        items = ListBase.groupDataSource(items, fields.properties);
      }
      var liCollections = [];
      for (var i = 0; i < items.length; i++) {
        var item = items[i];
        var isHeader = item.isHeader;
        var li = this.createElement("li", { className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li, id: "option-add-" + i });
        var itemText = item instanceof Object ? getValue(fields.text, item) : item;
        if (isHeader) {
          li.innerText = itemText;
        }
        if (this.itemTemplate && !isHeader) {
          var itemCheck = this.templateCompiler(this.itemTemplate);
          var compiledString = typeof this.itemTemplate !== "function" && itemCheck ? compile$1(select(this.itemTemplate, document).innerHTML.trim()) : compile$1(this.itemTemplate);
          var addItemTemplate = compiledString(item, this, "itemTemplate", this.itemTemplateId, this.isStringTemplate, null, li);
          if (addItemTemplate) {
            append(addItemTemplate, li);
          }
        } else if (!isHeader) {
          li.appendChild(document.createTextNode(itemText));
        }
        li.setAttribute("data-value", item instanceof Object ? getValue(fields.value, item) : item);
        li.setAttribute("role", "option");
        this.notify("addItem", { module: "CheckBoxSelection", item: li });
        liCollections.push(li);
        if (this.getModuleName() === "listbox") {
          this.listData.splice(isListboxEmpty ? this.listData.length : index, 0, item);
          if (this.listData.length !== this.sortedData.length) {
            this.sortedData = this.listData;
          }
        } else {
          this.listData.push(item);
        }
        if (this.sortOrder === "None" && isNullOrUndefined(itemIndex) && index === 0) {
          index = null;
        }
        if (this.getModuleName() === "listbox") {
          this.updateActionCompleteData(li, item, isListboxEmpty ? null : index + i);
        } else {
          this.updateActionCompleteData(li, item, index);
        }
        this.trigger("beforeItemRender", { element: li, item });
      }
      if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector("ul"))) {
        if (!isNullOrUndefined(this.list)) {
          this.list.innerHTML = "";
          this.list.classList.remove(dropDownBaseClasses.noData);
          this.isAddNewItemTemplate = true;
          if (!isNullOrUndefined(this.ulElement)) {
            this.list.appendChild(this.ulElement);
          }
        }
        this.liCollections = liCollections;
        if (!isNullOrUndefined(liCollections) && !isNullOrUndefined(this.ulElement)) {
          append(liCollections, this.ulElement);
        }
        this.updateAddItemList(this.list, itemsCount);
      } else {
        if (this.getModuleName() === "listbox" && itemsCount === 0) {
          this.ulElement.innerHTML = "";
        }
        var attr = [];
        for (var i = 0; i < items.length; i++) {
          var listGroupItem = this.ulElement.querySelectorAll(".e-list-group-item");
          for (var j = 0; j < listGroupItem.length; j++) {
            attr[j] = listGroupItem[j].innerText;
          }
          if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {
            for (var j = 0; j < listGroupItem.length; j++) {
              if (attr[j] === liCollections[i].innerText) {
                if (this.sortOrder === "None") {
                  this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);
                } else {
                  this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);
                }
                i = i + 1;
                break;
              }
            }
          } else {
            if (this.liCollections[index] && this.liCollections[index].parentNode) {
              this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);
            } else {
              if (itemIndex && this.getModuleName() === "listbox") {
                this.ulElement.insertBefore(liCollections[i], this.ulElement.childNodes[itemIndex + i]);
              } else {
                this.ulElement.appendChild(liCollections[i]);
              }
            }
          }
          var tempLi = [].slice.call(this.liCollections);
          tempLi.splice(index, 0, liCollections[i]);
          this.liCollections = tempLi;
          index += 1;
          if (this.getModuleName() === "multiselect") {
            this.updateDataList();
          }
        }
      }
      if (this.getModuleName() === "listbox" && this.isReact) {
        this.renderReactTemplates();
      }
      if (selectedItemValue || itemIndex === 0) {
        this.updateSelection();
      }
      this.addedNewItem = true;
    };
    DropDownBase2.prototype.isDisabledElement = function(li) {
      if (li && li.classList.contains("e-disabled")) {
        return true;
      }
      return false;
    };
    DropDownBase2.prototype.isDisabledItemByIndex = function(index) {
      if (this.fields.disabled && this.liCollections) {
        return this.isDisabledElement(this.liCollections[index]);
      }
      return false;
    };
    DropDownBase2.prototype.disableListItem = function(li) {
      li.classList.add("e-disabled");
      li.setAttribute("aria-disabled", "true");
      li.setAttribute("aria-selected", "false");
    };
    DropDownBase2.prototype.validationAttribute = function(target, hidden) {
      var name = target.getAttribute("name") ? target.getAttribute("name") : target.getAttribute("id");
      hidden.setAttribute("name", name);
      target.removeAttribute("name");
      var attributes2 = ["required", "aria-required", "form"];
      for (var i = 0; i < attributes2.length; i++) {
        if (!target.getAttribute(attributes2[i])) {
          continue;
        }
        var attr = target.getAttribute(attributes2[i]);
        hidden.setAttribute(attributes2[i], attr);
        target.removeAttribute(attributes2[i]);
      }
    };
    DropDownBase2.prototype.setZIndex = function() {
    };
    DropDownBase2.prototype.updateActionCompleteData = function(li, item, index) {
    };
    DropDownBase2.prototype.updateAddItemList = function(list, itemCount) {
    };
    DropDownBase2.prototype.updateDataList = function() {
    };
    DropDownBase2.prototype.getDataByValue = function(value) {
      if (!isNullOrUndefined(this.listData)) {
        var type = this.typeOfData(this.listData).typeof;
        if (type === "string" || type === "number" || type === "boolean") {
          for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {
            var item = _a[_i];
            if (!isNullOrUndefined(item) && item === value) {
              return item;
            }
          }
        } else {
          for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {
            var item = _c[_b];
            if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : "value", item) === value) {
              return item;
            }
          }
        }
      }
      return null;
    };
    DropDownBase2.prototype.destroy = function() {
      if (document) {
        EventHandler.remove(document, "scroll", this.updateGroupFixedHeader);
        if (document.body.contains(this.list)) {
          EventHandler.remove(this.list, "scroll", this.setFloatingHeader);
          if (!isNullOrUndefined(this.rippleFun)) {
            this.rippleFun();
          }
          detach(this.list);
        }
      }
      this.liCollections = null;
      this.ulElement = null;
      this.list = null;
      this.enableRtlElements = null;
      this.rippleFun = null;
      _super.prototype.destroy.call(this);
    };
    __decorate$2([
      Complex({ text: null, value: null, iconCss: null, groupBy: null, disabled: null }, FieldSettings)
    ], DropDownBase2.prototype, "fields", void 0);
    __decorate$2([
      Property(null)
    ], DropDownBase2.prototype, "itemTemplate", void 0);
    __decorate$2([
      Property(null)
    ], DropDownBase2.prototype, "groupTemplate", void 0);
    __decorate$2([
      Property("No records found")
    ], DropDownBase2.prototype, "noRecordsTemplate", void 0);
    __decorate$2([
      Property("Request failed")
    ], DropDownBase2.prototype, "actionFailureTemplate", void 0);
    __decorate$2([
      Property("None")
    ], DropDownBase2.prototype, "sortOrder", void 0);
    __decorate$2([
      Property([])
    ], DropDownBase2.prototype, "dataSource", void 0);
    __decorate$2([
      Property(null)
    ], DropDownBase2.prototype, "query", void 0);
    __decorate$2([
      Property("StartsWith")
    ], DropDownBase2.prototype, "filterType", void 0);
    __decorate$2([
      Property(true)
    ], DropDownBase2.prototype, "ignoreCase", void 0);
    __decorate$2([
      Property(1e3)
    ], DropDownBase2.prototype, "zIndex", void 0);
    __decorate$2([
      Property(false)
    ], DropDownBase2.prototype, "ignoreAccent", void 0);
    __decorate$2([
      Property()
    ], DropDownBase2.prototype, "locale", void 0);
    __decorate$2([
      Event()
    ], DropDownBase2.prototype, "actionBegin", void 0);
    __decorate$2([
      Event()
    ], DropDownBase2.prototype, "actionComplete", void 0);
    __decorate$2([
      Event()
    ], DropDownBase2.prototype, "actionFailure", void 0);
    __decorate$2([
      Event()
    ], DropDownBase2.prototype, "select", void 0);
    __decorate$2([
      Event()
    ], DropDownBase2.prototype, "dataBound", void 0);
    __decorate$2([
      Event()
    ], DropDownBase2.prototype, "created", void 0);
    __decorate$2([
      Event()
    ], DropDownBase2.prototype, "destroyed", void 0);
    DropDownBase2 = __decorate$2([
      NotifyPropertyChanges
    ], DropDownBase2);
    return DropDownBase2;
  }(Component)
);
var __extends$2 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$1 = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var dropDownListClasses = {
  selected: dropDownBaseClasses.selected,
  li: dropDownBaseClasses.li,
  disable: dropDownBaseClasses.disabled,
  focus: dropDownBaseClasses.focus,
  inputFocus: "e-input-focus",
  icon: "e-input-group-icon e-ddl-icon",
  iconAnimation: "e-icon-anim",
  value: "e-input-value",
  device: "e-ddl-device",
  backIcon: "e-input-group-icon e-back-icon e-icons",
  filterBarClearIcon: "e-input-group-icon e-clear-icon e-icons",
  filterInput: "e-input-filter",
  resizeIcon: "e-resizer-right e-icons",
  filterParent: "e-filter-parent",
  mobileFilter: "e-ddl-device-filter",
  footer: "e-ddl-footer",
  header: "e-ddl-header",
  clearIcon: "e-clear-icon",
  clearIconHide: "e-clear-icon-hide",
  popupFullScreen: "e-popup-full-page",
  disableIcon: "e-ddl-disable-icon",
  hiddenElement: "e-ddl-hidden"
};
var inputObject = {
  container: null,
  buttons: []
};
var DropDownList = (
  /** @class */
  function(_super) {
    __extends$2(DropDownList2, _super);
    function DropDownList2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isListSearched = false;
      _this.preventChange = false;
      _this.isTouched = false;
      _this.isFocused = false;
      _this.autoFill = false;
      _this.isUpdateHeaderHeight = false;
      _this.isUpdateFooterHeight = false;
      _this.isReactTemplateUpdate = false;
      return _this;
    }
    DropDownList2.prototype.preRender = function() {
      this.valueTempElement = null;
      this.element.style.opacity = "0";
      this.initializeData();
      _super.prototype.preRender.call(this);
      this.activeIndex = this.index;
      this.queryString = "";
    };
    DropDownList2.prototype.initializeData = function() {
      this.isPopupOpen = false;
      this.isDocumentClick = false;
      this.isInteracted = false;
      this.isFilterFocus = false;
      this.beforePopupOpen = false;
      this.initial = true;
      this.initialRemoteRender = false;
      this.isNotSearchList = false;
      this.isTyped = false;
      this.isSelected = false;
      this.preventFocus = false;
      this.preventAutoFill = false;
      this.isValidKey = false;
      this.typedString = "";
      this.isEscapeKey = false;
      this.isPreventBlur = false;
      this.isTabKey = false;
      this.actionCompleteData = { isUpdated: false };
      this.actionData = { isUpdated: false };
      this.prevSelectPoints = {};
      this.isSelectCustom = false;
      this.isDropDownClick = false;
      this.preventAltUp = false;
      this.isCustomFilter = false;
      this.isSecondClick = false;
      this.previousValue = null;
      this.keyConfigure = {
        tab: "tab",
        enter: "13",
        escape: "27",
        end: "35",
        home: "36",
        down: "40",
        up: "38",
        pageUp: "33",
        pageDown: "34",
        open: "alt+40",
        close: "shift+tab",
        hide: "alt+38",
        space: "32"
      };
      this.viewPortInfo = {
        currentPageNumber: null,
        direction: null,
        sentinelInfo: {},
        offsets: {},
        startIndex: 0,
        endIndex: this.itemCount
      };
    };
    DropDownList2.prototype.setZIndex = function() {
      if (this.popupObj) {
        this.popupObj.setProperties({ "zIndex": this.zIndex });
      }
    };
    DropDownList2.prototype.requiredModules = function() {
      var modules = [];
      if (this.enableVirtualization) {
        modules.push({ args: [this], member: "VirtualScroll" });
      }
      return modules;
    };
    DropDownList2.prototype.renderList = function(e, isEmptyData) {
      _super.prototype.render.call(this, e, isEmptyData);
      if (!(this.dataSource instanceof DataManager)) {
        this.totalItemCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;
      }
      if (this.enableVirtualization && this.isFiltering() && this.getModuleName() === "combobox") {
        this.UpdateSkeleton();
        this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
        this.ulElement = this.list.querySelector("ul");
      }
      this.unWireListEvents();
      this.wireListEvents();
    };
    DropDownList2.prototype.floatLabelChange = function() {
      if (this.getModuleName() === "dropdownlist" && this.floatLabelType === "Auto") {
        var floatElement = this.inputWrapper.container.querySelector(".e-float-text");
        if (this.inputElement.value !== "" || this.isInteracted) {
          classList(floatElement, ["e-label-top"], ["e-label-bottom"]);
        } else {
          classList(floatElement, ["e-label-bottom"], ["e-label-top"]);
        }
      }
    };
    DropDownList2.prototype.resetHandler = function(e) {
      e.preventDefault();
      this.clearAll(e);
      if (this.enableVirtualization) {
        this.list.scrollTop = 0;
        this.virtualListInfo = null;
        this.previousStartIndex = 0;
        this.previousEndIndex = 0;
      }
    };
    DropDownList2.prototype.resetFocusElement = function() {
      this.removeHover();
      this.removeSelection();
      this.removeFocus();
      this.list.scrollTop = 0;
      if (this.getModuleName() !== "autocomplete" && !isNullOrUndefined(this.ulElement)) {
        var li = this.fields.disabled ? this.ulElement.querySelector("." + dropDownListClasses.li + ":not(.e-disabled)") : this.ulElement.querySelector("." + dropDownListClasses.li);
        if (this.enableVirtualization) {
          li = this.liCollections[this.skeletonCount];
        }
        if (li) {
          li.classList.add(dropDownListClasses.focus);
        }
      }
    };
    DropDownList2.prototype.clearAll = function(e, properties) {
      this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;
      if (isNullOrUndefined(properties) || !isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {
        this.isActive = true;
        this.resetSelection(properties);
      }
      var dataItem = this.getItemData();
      if (!this.allowObjectBinding && this.previousValue === dataItem.value || this.allowObjectBinding && this.previousValue && this.isObjectInArray(this.previousValue, [this.allowCustom ? this.value ? this.value : dataItem : dataItem.value ? this.getDataByValue(dataItem.value) : dataItem])) {
        this.checkAndResetCache();
        if (this.enableVirtualization && this.list) {
          this.updateInitialData();
        }
        return;
      }
      this.onChangeEvent(e);
      this.checkAndResetCache();
      if (this.enableVirtualization) {
        this.updateInitialData();
      }
    };
    DropDownList2.prototype.resetSelection = function(properties) {
      if (this.list) {
        if (!isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {
          this.selectedLI = null;
          this.actionCompleteData.isUpdated = false;
          this.actionCompleteData.ulElement = null;
          this.actionCompleteData.list = null;
          this.resetList(properties.dataSource);
        } else {
          if (this.allowFiltering && this.getModuleName() !== "autocomplete" && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list) && this.actionCompleteData.list.length > 0) {
            this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);
          }
          this.resetFocusElement();
        }
      }
      if (!isNullOrUndefined(this.hiddenElement)) {
        this.hiddenElement.innerHTML = "";
      }
      if (!isNullOrUndefined(this.inputElement)) {
        this.inputElement.value = "";
      }
      this.value = null;
      this.itemData = null;
      this.text = null;
      this.index = null;
      this.activeIndex = null;
      this.item = null;
      this.queryString = "";
      if (this.valueTempElement) {
        detach(this.valueTempElement);
        this.inputElement.style.display = "block";
        this.valueTempElement = null;
      }
      this.setSelection(null, null);
      this.isSelectCustom = false;
      this.updateIconState();
      this.cloneElements();
    };
    DropDownList2.prototype.setHTMLAttributes = function() {
      if (Object.keys(this.htmlAttributes).length) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var htmlAttr = _a[_i];
          if (htmlAttr === "class") {
            var updatedClassValue = this.htmlAttributes["" + htmlAttr].replace(/\s+/g, " ").trim();
            if (updatedClassValue !== "") {
              addClass([this.inputWrapper.container], updatedClassValue.split(" "));
            }
          } else if (htmlAttr === "disabled" && this.htmlAttributes["" + htmlAttr] === "disabled") {
            this.enabled = false;
            this.setEnable();
          } else if (htmlAttr === "readonly" && !isNullOrUndefined(this.htmlAttributes["" + htmlAttr])) {
            this.readonly = true;
            this.dataBind();
          } else if (htmlAttr === "style") {
            this.inputWrapper.container.setAttribute("style", this.htmlAttributes["" + htmlAttr]);
          } else if (htmlAttr === "aria-label") {
            if ((this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") && !this.readonly) {
              this.inputElement.setAttribute("aria-label", this.htmlAttributes["" + htmlAttr]);
            } else if (this.getModuleName() === "dropdownlist") {
              this.inputWrapper.container.setAttribute("aria-label", this.htmlAttributes["" + htmlAttr]);
            }
          } else {
            var defaultAttr = [
              "title",
              "id",
              "placeholder",
              "role",
              "autocomplete",
              "autocapitalize",
              "spellcheck",
              "minlength",
              "maxlength"
            ];
            var validateAttr = ["name", "required"];
            if (this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") {
              defaultAttr.push("tabindex");
            }
            if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf("data") === 0) {
              this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
            } else if (defaultAttr.indexOf(htmlAttr) > -1) {
              if (htmlAttr === "placeholder") {
                Input.setPlaceholder(this.htmlAttributes["" + htmlAttr], this.inputElement);
              } else {
                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
              }
            } else {
              this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
            }
          }
        }
      }
      if (this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") {
        this.inputWrapper.container.removeAttribute("tabindex");
      }
    };
    DropDownList2.prototype.getAriaAttributes = function() {
      return {
        "aria-disabled": "false",
        "role": "combobox",
        "aria-expanded": "false",
        "aria-live": "polite",
        "aria-labelledby": this.hiddenElement.id
      };
    };
    DropDownList2.prototype.setEnableRtl = function() {
      if (!isNullOrUndefined(this.inputElement) && !isNullOrUndefined(this.inputElement.parentElement)) {
        Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);
      }
      if (this.popupObj) {
        this.popupObj.enableRtl = this.enableRtl;
        this.popupObj.dataBind();
      }
    };
    DropDownList2.prototype.setEnable = function() {
      Input.setEnabled(this.enabled, this.inputElement);
      if (this.enabled) {
        removeClass([this.inputWrapper.container], dropDownListClasses.disable);
        this.inputElement.setAttribute("aria-disabled", "false");
        this.targetElement().setAttribute("tabindex", this.tabIndex);
        if (this.inputWrapper && this.inputWrapper.container) {
          this.inputWrapper.container.setAttribute("aria-disabled", "false");
          this.inputWrapper.container.removeAttribute("disabled");
        }
      } else {
        this.hidePopup();
        addClass([this.inputWrapper.container], dropDownListClasses.disable);
        this.inputElement.setAttribute("aria-disabled", "true");
        this.targetElement().tabIndex = -1;
        if (this.inputWrapper && this.inputWrapper.container) {
          this.inputWrapper.container.setAttribute("aria-disabled", "true");
          this.inputWrapper.container.setAttribute("disabled", "");
        }
      }
    };
    DropDownList2.prototype.getPersistData = function() {
      return this.addOnPersist(["value"]);
    };
    DropDownList2.prototype.getLocaleName = function() {
      return "drop-down-list";
    };
    DropDownList2.prototype.preventTabIndex = function(element2) {
      if (this.getModuleName() === "dropdownlist") {
        element2.tabIndex = -1;
      }
    };
    DropDownList2.prototype.targetElement = function() {
      return !isNullOrUndefined(this.inputWrapper) ? this.inputWrapper.container : null;
    };
    DropDownList2.prototype.getNgDirective = function() {
      return "EJS-DROPDOWNLIST";
    };
    DropDownList2.prototype.getElementByText = function(text) {
      return this.getElementByValue(this.getValueByText(text));
    };
    DropDownList2.prototype.getElementByValue = function(value) {
      var item;
      var listItems = this.getItems();
      for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {
        var liItem = listItems_1[_i];
        if (this.getFormattedValue(liItem.getAttribute("data-value")) === value) {
          item = liItem;
          break;
        }
      }
      return item;
    };
    DropDownList2.prototype.initValue = function() {
      this.viewPortInfo.startIndex = this.virtualItemStartIndex = 0;
      this.viewPortInfo.endIndex = this.virtualItemEndIndex = this.itemCount;
      this.renderList();
      if (this.dataSource instanceof DataManager) {
        this.initialRemoteRender = true;
      } else {
        this.updateValues();
      }
    };
    DropDownList2.prototype.isDisableItemValue = function(value) {
      if (typeof value === "object") {
        var objectValue = JSON.parse(JSON.stringify(value))[this.fields.value];
        return this.isDisabledItemByIndex(this.getIndexByValue(objectValue));
      }
      return this.isDisabledItemByIndex(this.getIndexByValue(value));
    };
    DropDownList2.prototype.updateValues = function() {
      if (this.fields.disabled) {
        if (this.value != null) {
          this.value = !this.isDisableItemValue(this.value) ? this.value : null;
        }
        if (this.text != null) {
          this.text = !this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text))) ? this.text : null;
        }
        if (this.index != null) {
          this.index = !this.isDisabledItemByIndex(this.index) ? this.index : null;
          this.activeIndex = this.index;
        }
      }
      this.selectedValueInfo = this.viewPortInfo;
      if (!isNullOrUndefined(this.value)) {
        var value = this.allowObjectBinding && !isNullOrUndefined(this.value) ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
        this.setSelection(this.getElementByValue(value), null);
      } else if (this.text && isNullOrUndefined(this.value)) {
        var element2 = this.getElementByText(this.text);
        if (isNullOrUndefined(element2)) {
          this.setProperties({ text: null });
          return;
        } else {
          this.setSelection(element2, null);
        }
      } else {
        this.setSelection(this.liCollections[this.activeIndex], null);
      }
      this.setHiddenValue();
      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);
    };
    DropDownList2.prototype.onBlurHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      var target = e.relatedTarget;
      var currentTarget = e.target;
      var isPreventBlur = this.isPreventBlur;
      this.isPreventBlur = false;
      if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {
        if (this.getModuleName() === "dropdownlist" && this.allowFiltering && this.isPopupOpen) {
          this.filterInput.focus();
        } else {
          this.targetElement().focus();
        }
        return;
      }
      if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {
        if (!this.beforePopupOpen) {
          this.isDocumentClick = false;
        }
        return;
      }
      if (this.getModuleName() === "dropdownlist" && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === "dropdownlist" && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== "dropdownlist" && !this.inputWrapper.container.contains(target) || this.isTabKey) {
        this.isDocumentClick = this.isPopupOpen ? true : false;
        this.focusOutAction(e);
        this.isTabKey = false;
      }
      if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {
        this.isActive = false;
        this.beforePopupOpen = false;
      }
      this.isFocused = false;
    };
    DropDownList2.prototype.focusOutAction = function(e) {
      this.isInteracted = false;
      this.focusOut(e);
      this.onFocusOut(e);
    };
    DropDownList2.prototype.onFocusOut = function(e) {
      if (!this.enabled) {
        return;
      }
      if (this.isSelected) {
        this.isSelectCustom = false;
        this.onChangeEvent(e);
      }
      this.floatLabelChange();
      this.dispatchEvent(this.hiddenElement, "change");
      if (this.getModuleName() === "dropdownlist" && this.element.tagName !== "INPUT") {
        this.dispatchEvent(this.inputElement, "blur");
      }
      if (this.inputWrapper.clearButton) {
        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
      }
      this.trigger("blur");
    };
    DropDownList2.prototype.onFocus = function(e) {
      if (!this.isInteracted) {
        this.isInteracted = true;
        var args = { isInteracted: e ? true : false, event: e };
        this.trigger("focus", args);
      }
      this.updateIconState();
      this.isFocused = true;
    };
    DropDownList2.prototype.resizingWireEvent = function() {
      EventHandler.add(document, "mousemove", this.resizePopup, this);
      EventHandler.add(document, "mouseup", this.stopResizing, this);
      EventHandler.add(document, "touchmove", this.resizePopup, this);
      EventHandler.add(document, "touchend", this.stopResizing, this);
    };
    DropDownList2.prototype.resizingUnWireEvent = function() {
      EventHandler.remove(document, "mousemove", this.resizePopup);
      EventHandler.remove(document, "mouseup", this.stopResizing);
      EventHandler.remove(document, "touchmove", this.resizePopup);
      EventHandler.remove(document, "touchend", this.stopResizing);
    };
    DropDownList2.prototype.resetValueHandler = function(e) {
      var formElement = closest(this.inputElement, "form");
      if (formElement && e.target === formElement) {
        var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute("value");
        this.text = val;
      }
    };
    DropDownList2.prototype.wireEvent = function() {
      EventHandler.add(this.inputWrapper.container, "mousedown", this.dropDownClick, this);
      EventHandler.add(this.inputWrapper.container, "focus", this.focusIn, this);
      EventHandler.add(this.inputWrapper.container, "keypress", this.onSearch, this);
      EventHandler.add(window, "resize", this.windowResize, this);
      this.bindCommonEvent();
    };
    DropDownList2.prototype.bindCommonEvent = function() {
      EventHandler.add(this.targetElement(), "blur", this.onBlurHandler, this);
      var formElement = closest(this.inputElement, "form");
      if (formElement) {
        EventHandler.add(formElement, "reset", this.resetValueHandler, this);
      }
      if (!Browser.isDevice) {
        this.keyboardModule = new KeyboardEvents(this.targetElement(), {
          keyAction: this.keyActionHandler.bind(this),
          keyConfigs: this.keyConfigure,
          eventName: "keydown"
        });
      } else {
        this.keyboardModule = new KeyboardEvents(this.targetElement(), {
          keyAction: this.mobileKeyActionHandler.bind(this),
          keyConfigs: this.keyConfigure,
          eventName: "keydown"
        });
      }
      this.bindClearEvent();
    };
    DropDownList2.prototype.windowResize = function() {
      if (this.isPopupOpen) {
        this.popupObj.refreshPosition(this.inputWrapper.container);
      }
    };
    DropDownList2.prototype.bindClearEvent = function() {
      if (this.showClearButton) {
        EventHandler.add(this.inputWrapper.clearButton, "mousedown", this.resetHandler, this);
      }
    };
    DropDownList2.prototype.unBindCommonEvent = function() {
      if (!isNullOrUndefined(this.inputWrapper) && this.targetElement()) {
        EventHandler.remove(this.targetElement(), "blur", this.onBlurHandler);
      }
      var formElement = this.inputElement && closest(this.inputElement, "form");
      if (formElement) {
        EventHandler.remove(formElement, "reset", this.resetValueHandler);
      }
      if (!Browser.isDevice) {
        this.keyboardModule.destroy();
      }
      if (this.showClearButton) {
        EventHandler.remove(this.inputWrapper.clearButton, "mousedown", this.resetHandler);
      }
    };
    DropDownList2.prototype.updateIconState = function() {
      if (this.showClearButton) {
        if (this.inputElement.value !== "" && !this.readonly) {
          removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
        } else {
          addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
        }
      }
    };
    DropDownList2.prototype.wireListEvents = function() {
      if (!isNullOrUndefined(this.list)) {
        EventHandler.add(this.list, "click", this.onMouseClick, this);
        EventHandler.add(this.list, "mouseover", this.onMouseOver, this);
        EventHandler.add(this.list, "mouseout", this.onMouseLeave, this);
      }
    };
    DropDownList2.prototype.onSearch = function(e) {
      if (e.charCode !== 32 && e.charCode !== 13) {
        if (this.list === void 0) {
          this.renderList();
        }
        this.searchKeyEvent = e;
        this.onServerIncrementalSearch(e);
      }
    };
    DropDownList2.prototype.onServerIncrementalSearch = function(e) {
      if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector("li")) && this.enabled && !this.readonly) {
        this.incrementalSearch(e);
      }
    };
    DropDownList2.prototype.startResizing = function(event) {
      this.isResizing = true;
      this.trigger("resizeStart", event);
      var clientX = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;
      var clientY = event instanceof MouseEvent ? event.clientY : event.touches[0].clientY;
      if (this.list && this.list.parentElement) {
        this.originalWidth = this.list.parentElement.offsetWidth;
        this.originalHeight = this.list.parentElement.offsetHeight;
        this.originalMouseX = clientX;
        this.originalMouseY = clientY;
      }
      this.resizingWireEvent();
      if (event) {
        event.preventDefault();
      }
    };
    DropDownList2.prototype.resizePopup = function(event) {
      if (!this.isResizing) {
        return;
      }
      this.trigger("resizing", event);
      var clientX = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;
      var clientY = event instanceof MouseEvent ? event.clientY : event.touches[0].clientY;
      var dx = clientX - this.originalMouseX;
      var dy = clientY - this.originalMouseY;
      if (this.list && this.list.parentElement) {
        var minWidth2 = parseInt(window.getComputedStyle(this.list.parentElement).minWidth, 10);
        var minHeight2 = parseInt(window.getComputedStyle(this.list.parentElement).minHeight, 10);
        minWidth2 = minWidth2 || 100;
        minHeight2 = minHeight2 || 120;
        this.resizeWidth = Math.max(this.originalWidth + dx, minWidth2);
        this.resizeHeight = Math.max(this.originalHeight + dy, minHeight2);
        this.list.parentElement.style.width = this.resizeWidth + "px";
        this.list.parentElement.style.height = this.resizeHeight + "px";
        this.list.parentElement.style.maxHeight = this.resizeHeight + "px";
        this.list.style.maxHeight = this.resizeHeight + "px";
        if (this.fixedHeaderElement && this.ulElement) {
          this.fixedHeaderElement.style.width = this.ulElement.offsetWidth + "px";
        }
      }
      if (event) {
        event.preventDefault();
      }
    };
    DropDownList2.prototype.stopResizing = function(event) {
      if (this.isResizing) {
        this.isResizing = false;
        this.trigger("resizeStop", event);
        this.resizingUnWireEvent();
      }
      if (event) {
        event.preventDefault();
      }
    };
    DropDownList2.prototype.onMouseClick = function(e) {
      var target = e.target;
      this.keyboardEvent = null;
      var li = closest(target, "." + dropDownBaseClasses.li);
      if (!this.isValidLI(li) || this.isDisabledElement(li)) {
        return;
      }
      this.setSelection(li, e);
      if (Browser.isDevice && this.isFilterLayout()) {
        history.back();
      } else {
        var delay2 = 100;
        this.closePopup(delay2, e);
      }
    };
    DropDownList2.prototype.onMouseOver = function(e) {
      var currentLi = closest(e.target, "." + dropDownBaseClasses.li);
      this.setHover(currentLi);
    };
    DropDownList2.prototype.setHover = function(li) {
      if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {
        this.removeHover();
        addClass([li], dropDownBaseClasses.hover);
      }
    };
    DropDownList2.prototype.onMouseLeave = function() {
      this.removeHover();
    };
    DropDownList2.prototype.removeHover = function() {
      if (this.list) {
        var hoveredItem = this.list.querySelectorAll("." + dropDownBaseClasses.hover);
        if (hoveredItem && hoveredItem.length) {
          removeClass(hoveredItem, dropDownBaseClasses.hover);
        }
      }
    };
    DropDownList2.prototype.isValidLI = function(li) {
      return li && li.hasAttribute("role") && li.getAttribute("role") === "option";
    };
    DropDownList2.prototype.updateIncrementalItemIndex = function(startIndex, endIndex) {
      this.incrementalStartIndex = startIndex;
      this.incrementalEndIndex = endIndex;
    };
    DropDownList2.prototype.incrementalSearch = function(e) {
      if (this.liCollections.length > 0) {
        if (this.enableVirtualization) {
          var updatingincrementalindex = false;
          var queryStringUpdated = false;
          var activeElement = this.ulElement.getElementsByClassName("e-active")[0];
          var currentValue = activeElement ? activeElement.textContent : null;
          if (this.incrementalQueryString === "") {
            this.incrementalQueryString = String.fromCharCode(e.charCode);
            this.incrementalPreQueryString = this.incrementalQueryString;
          } else if (String.fromCharCode(e.charCode).toLocaleLowerCase() === this.incrementalPreQueryString.toLocaleLowerCase()) {
            queryStringUpdated = true;
          } else {
            this.incrementalQueryString = String.fromCharCode(e.charCode);
          }
          if (this.viewPortInfo.endIndex >= this.incrementalEndIndex && this.incrementalEndIndex <= this.totalItemCount || this.incrementalEndIndex === 0) {
            updatingincrementalindex = true;
            this.incrementalStartIndex = this.incrementalEndIndex;
            if (this.incrementalEndIndex === 0) {
              this.incrementalEndIndex = 100 > this.totalItemCount ? this.totalItemCount : 100;
            } else {
              this.incrementalEndIndex = this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100;
            }
            this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);
            updatingincrementalindex = true;
          }
          if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {
            this.updateIncrementalView(0, this.itemCount);
          }
          var li = incrementalSearch(e.charCode, this.incrementalLiCollections, this.activeIndex, true, this.element.id, queryStringUpdated, currentValue, true);
          while (isNullOrUndefined(li) && this.incrementalEndIndex < this.totalItemCount) {
            this.updateIncrementalItemIndex(this.incrementalEndIndex, this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100);
            this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);
            updatingincrementalindex = true;
            if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {
              this.updateIncrementalView(0, this.itemCount);
            }
            li = incrementalSearch(e.charCode, this.incrementalLiCollections, 0, true, this.element.id, queryStringUpdated, currentValue, true, true);
            if (!isNullOrUndefined(li)) {
              break;
            }
            if (isNullOrUndefined(li) && this.incrementalEndIndex >= this.totalItemCount) {
              this.updateIncrementalItemIndex(0, 100 > this.totalItemCount ? this.totalItemCount : 100);
              break;
            }
          }
          if (isNullOrUndefined(li) && this.incrementalEndIndex >= this.totalItemCount) {
            this.updateIncrementalItemIndex(0, 100 > this.totalItemCount ? this.totalItemCount : 100);
            this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);
            updatingincrementalindex = true;
            if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {
              this.updateIncrementalView(0, this.itemCount);
            }
            li = incrementalSearch(e.charCode, this.incrementalLiCollections, 0, true, this.element.id, queryStringUpdated, currentValue, true, true);
          }
          var index = li && this.getIndexByValue(li.getAttribute("data-value"));
          if (!index) {
            for (var i = 0; i < this.incrementalLiCollections.length; i++) {
              if (!isNullOrUndefined(li) && !isNullOrUndefined(li.getAttribute("data-value")) && this.incrementalLiCollections[i].getAttribute("data-value") === li.getAttribute("data-value").toString()) {
                index = i;
                index = this.incrementalStartIndex + index;
                break;
              }
            }
          } else {
            index = index - this.skeletonCount;
          }
          if (index) {
            if (!(this.viewPortInfo.startIndex >= index) || !(index >= this.viewPortInfo.endIndex)) {
              var startIndex = index - (this.itemCount / 2 - 2) > 0 ? index - (this.itemCount / 2 - 2) : 0;
              var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;
              this.updateIncrementalView(startIndex, endIndex);
            }
          }
          if (!isNullOrUndefined(li)) {
            var index_1 = this.getIndexByValue(li.getAttribute("data-value")) - this.skeletonCount;
            if (index_1 > this.itemCount / 2) {
              var startIndex = this.viewPortInfo.startIndex + (this.itemCount / 2 - 2) < this.totalItemCount ? this.viewPortInfo.startIndex + (this.itemCount / 2 - 2) : this.totalItemCount;
              var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;
              this.updateIncrementalView(startIndex, endIndex);
            }
            li = this.getElementByValue(li.getAttribute("data-value"));
            this.setSelection(li, e);
            this.setScrollPosition();
            this.list.getElementsByClassName("e-virtual-ddl-content")[0].style = this.getTransformValues();
            if (this.enableVirtualization && !this.fields.groupBy) {
              var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * this.selectedLI.offsetHeight : this.selectedLI.offsetTop;
              this.list.scrollTop = selectedLiOffsetTop - this.list.querySelectorAll(".e-virtual-list").length * this.selectedLI.offsetHeight;
            }
            this.incrementalPreQueryString = this.incrementalQueryString;
          } else {
            this.updateIncrementalView(0, this.itemCount);
            this.list.getElementsByClassName("e-virtual-ddl-content")[0].style = this.getTransformValues();
            this.list.scrollTop = 0;
          }
        } else {
          var li = void 0;
          if (this.fields.disabled) {
            var enableLiCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li + ":not(.e-disabled)");
            li = incrementalSearch(e.charCode, enableLiCollections, this.activeIndex, true, this.element.id);
          } else {
            li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);
          }
          if (!isNullOrUndefined(li)) {
            this.setSelection(li, e);
            this.setScrollPosition();
          }
        }
      }
    };
    DropDownList2.prototype.hideSpinner = function() {
      if (!isNullOrUndefined(this.spinnerElement)) {
        hideSpinner(this.spinnerElement);
        removeClass([this.spinnerElement], dropDownListClasses.disableIcon);
        this.spinnerElement.innerHTML = "";
        this.spinnerElement = null;
      }
    };
    DropDownList2.prototype.showSpinner = function() {
      if (isNullOrUndefined(this.spinnerElement)) {
        this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];
        addClass([this.spinnerElement], dropDownListClasses.disableIcon);
        createSpinner({
          target: this.spinnerElement,
          width: Browser.isDevice ? "16px" : "14px"
        }, this.createElement);
        showSpinner(this.spinnerElement);
      }
    };
    DropDownList2.prototype.keyActionHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      this.keyboardEvent = e;
      if (this.isPreventKeyAction && this.enableVirtualization) {
        e.preventDefault();
      }
      var preventAction = e.action === "pageUp" || e.action === "pageDown";
      var preventHomeEnd = this.getModuleName() !== "dropdownlist" && (e.action === "home" || e.action === "end");
      this.isEscapeKey = e.action === "escape";
      this.isTabKey = !this.isPopupOpen && e.action === "tab";
      var isNavigation = e.action === "down" || e.action === "up" || e.action === "pageUp" || e.action === "pageDown" || e.action === "home" || e.action === "end";
      if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {
        return;
      }
      if (!this.readonly) {
        var isTabAction = e.action === "tab" || e.action === "close";
        if (isNullOrUndefined(this.list) && !this.isRequested && !isTabAction && e.action !== "escape") {
          this.searchKeyEvent = e;
          if (!this.enableVirtualization || this.enableVirtualization && this.getModuleName() !== "autocomplete" && e.type !== "mousedown" && (e.keyCode === 40 || e.keyCode === 38)) {
            this.renderList(e);
            this.UpdateSkeleton();
            this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
            this.ulElement = this.list.querySelector("ul");
          }
        }
        if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {
          return;
        }
        if (isTabAction && this.getModuleName() !== "autocomplete" && this.isPopupOpen || e.action === "escape") {
          e.preventDefault();
        }
        this.isSelected = e.action === "escape" ? false : this.isSelected;
        this.isTyped = isNavigation || e.action === "escape" ? false : this.isTyped;
        switch (e.action) {
          case "down":
          case "up":
            this.updateUpDownAction(e);
            break;
          case "pageUp":
            this.pageUpSelection(this.activeIndex - this.getPageCount(), e);
            e.preventDefault();
            break;
          case "pageDown":
            this.pageDownSelection(this.activeIndex + this.getPageCount(), e);
            e.preventDefault();
            break;
          case "home":
            this.isMouseScrollAction = true;
            this.updateHomeEndAction(e);
            break;
          case "end":
            this.isMouseScrollAction = true;
            this.updateHomeEndAction(e);
            break;
          case "space":
            if (this.getModuleName() === "dropdownlist") {
              if (!this.beforePopupOpen) {
                this.showPopup();
                e.preventDefault();
              }
            }
            break;
          case "open":
            this.showPopup(e);
            break;
          case "hide":
            this.preventAltUp = this.isPopupOpen;
            this.hidePopup(e);
            this.focusDropDown(e);
            break;
          case "enter":
            this.selectCurrentItem(e);
            break;
          case "tab":
            this.selectCurrentValueOnTab(e);
            break;
          case "escape":
          case "close":
            if (this.isPopupOpen) {
              this.hidePopup(e);
              this.focusDropDown(e);
            }
            break;
        }
      }
    };
    DropDownList2.prototype.updateUpDownAction = function(e, isVirtualKeyAction) {
      if (this.fields.disabled && this.list && this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length === 0) {
        return;
      }
      if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== "autocomplete") {
        var value = this.getItemData().value;
        if (isNullOrUndefined(value)) {
          value = "null";
        }
        var filterIndex = this.getIndexByValue(value);
        if (!isNullOrUndefined(filterIndex)) {
          this.activeIndex = filterIndex;
        }
      }
      var focusEle = this.list.querySelector("." + dropDownListClasses.focus);
      if (this.isSelectFocusItem(focusEle) && !isVirtualKeyAction) {
        this.setSelection(focusEle, e);
        if (this.enableVirtualization) {
          var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * this.selectedLI.offsetHeight : this.selectedLI.offsetTop;
          if (this.fields.groupBy) {
            selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex === 0 ? this.selectedLI.offsetHeight - selectedLiOffsetTop : selectedLiOffsetTop - this.selectedLI.offsetHeight;
          }
          this.list.scrollTop = selectedLiOffsetTop - this.list.querySelectorAll(".e-virtual-list").length * this.selectedLI.offsetHeight;
        }
      } else if (!isNullOrUndefined(this.liCollections)) {
        var virtualIndex = this.activeIndex;
        var index = e.action === "down" ? this.activeIndex + 1 : this.activeIndex - 1;
        index = isVirtualKeyAction ? virtualIndex : index;
        var startIndex = 0;
        if (this.getModuleName() === "autocomplete") {
          startIndex = e.action === "down" && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;
          index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;
        }
        var nextItem = void 0;
        if (this.getModuleName() !== "autocomplete" || this.getModuleName() === "autocomplete" && this.isPopupOpen) {
          if (!this.enableVirtualization) {
            nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];
          } else {
            if (!isVirtualKeyAction) {
              nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[this.skeletonCount] : this.liCollections[index];
              nextItem = !isNullOrUndefined(nextItem) && !nextItem.classList.contains("e-virtual-list") ? nextItem : null;
            } else {
              if (this.getModuleName() === "autocomplete") {
                var value = this.getFormattedValue(this.selectedLI.getAttribute("data-value"));
                nextItem = this.getElementByValue(value);
              } else {
                nextItem = this.getElementByValue(this.getItemData().value);
              }
            }
          }
        }
        if (!isNullOrUndefined(nextItem)) {
          var focusAtFirstElement = this.liCollections[this.skeletonCount] && this.liCollections[this.skeletonCount].classList.contains("e-item-focus");
          this.setSelection(nextItem, e);
          if (focusAtFirstElement && this.enableVirtualization && this.getModuleName() === "autocomplete" && !isVirtualKeyAction) {
            var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * this.selectedLI.offsetHeight : this.selectedLI.offsetTop;
            selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex === 0 && this.fields.groupBy ? this.selectedLI.offsetHeight - selectedLiOffsetTop : selectedLiOffsetTop - this.selectedLI.offsetHeight;
            this.list.scrollTop = selectedLiOffsetTop - this.list.querySelectorAll(".e-virtual-list").length * this.selectedLI.offsetHeight;
          }
        } else if (this.enableVirtualization && !this.isPopupOpen && this.getModuleName() !== "autocomplete" && (this.viewPortInfo.endIndex !== this.totalItemCount && e.action === "down" || this.viewPortInfo.startIndex !== 0 && e.action === "up")) {
          if (e.action === "down") {
            this.viewPortInfo.startIndex = this.viewPortInfo.startIndex + this.itemCount < this.totalItemCount - this.itemCount ? this.viewPortInfo.startIndex + this.itemCount : this.totalItemCount - this.itemCount;
            this.viewPortInfo.endIndex = this.viewPortInfo.startIndex + this.itemCount;
            this.updateVirtualItemIndex();
            this.isCustomFilter = this.getModuleName() === "combobox" ? true : this.isCustomFilter;
            this.resetList(this.dataSource, this.fields, this.query);
            this.isCustomFilter = this.getModuleName() === "combobox" ? false : this.isCustomFilter;
            var value = this.liCollections[0].getAttribute("data-value") !== "null" ? this.getFormattedValue(this.liCollections[0].getAttribute("data-value")) : null;
            var selectedData = this.getDataByValue(value);
            if (selectedData) {
              this.itemData = selectedData;
            }
          } else if (e.action === "up") {
            this.viewPortInfo.startIndex = this.viewPortInfo.startIndex - this.itemCount > 0 ? this.viewPortInfo.startIndex - this.itemCount : 0;
            this.viewPortInfo.endIndex = this.viewPortInfo.startIndex + this.itemCount;
            this.updateVirtualItemIndex();
            this.isCustomFilter = this.getModuleName() === "combobox" ? true : this.isCustomFilter;
            this.resetList(this.dataSource, this.fields, this.query);
            this.isCustomFilter = this.getModuleName() === "combobox" ? false : this.isCustomFilter;
            var value = this.liCollections[this.liCollections.length - 1].getAttribute("data-value") !== "null" ? this.getFormattedValue(this.liCollections[this.liCollections.length - 1].getAttribute("data-value")) : null;
            var selectedData = this.getDataByValue(value);
            if (selectedData) {
              this.itemData = selectedData;
            }
          }
          this.UpdateSkeleton();
          this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
          this.ulElement = this.list.querySelector("ul");
          this.handleVirtualKeyboardActions(e, this.pageCount);
        }
      }
      if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== "autocomplete") {
        var value = this.getItemData().value;
        var filterIndex = this.getIndexByValueFilter(value, this.actionCompleteData.ulElement);
        if (!isNullOrUndefined(filterIndex)) {
          this.activeIndex = filterIndex;
        }
      }
      if (this.allowFiltering && this.getModuleName() === "dropdownlist" && this.filterInput) {
        if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
          attributes(this.filterInput, { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
        } else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-active")[0])) {
          attributes(this.filterInput, { "aria-activedescendant": this.ulElement.getElementsByClassName("e-active")[0].id });
        }
      }
      var itemIndex;
      for (var index = 0; index < this.liCollections.length; index++) {
        if (this.liCollections[index].classList.contains(dropDownListClasses.focus) || this.liCollections[index].classList.contains(dropDownListClasses.selected)) {
          itemIndex = index;
          break;
        }
      }
      if (itemIndex != null && this.isDisabledElement(this.liCollections[itemIndex])) {
        if (this.getModuleName() !== "autocomplete") {
          if (this.liCollections.length - 1 === itemIndex && e.action === "down") {
            e.action = "up";
          }
          if (itemIndex === 0 && e.action === "up") {
            e.action = "down";
          }
        }
        this.updateUpDownAction(e);
      }
      e.preventDefault();
    };
    DropDownList2.prototype.updateHomeEndAction = function(e, isVirtualKeyAction) {
      if (this.getModuleName() === "dropdownlist") {
        var findLi = 0;
        if (e.action === "home") {
          findLi = 0;
          if (this.enableVirtualization && this.isPopupOpen) {
            findLi = this.skeletonCount;
          } else if (this.enableVirtualization && !this.isPopupOpen && this.viewPortInfo.startIndex !== 0) {
            this.viewPortInfo.startIndex = 0;
            this.viewPortInfo.endIndex = this.itemCount;
            this.updateVirtualItemIndex();
            this.resetList(this.dataSource, this.fields, this.query);
          }
        } else {
          if (this.enableVirtualization && !this.isPopupOpen && this.viewPortInfo.endIndex !== this.totalItemCount) {
            this.viewPortInfo.startIndex = this.totalItemCount - this.itemCount;
            this.viewPortInfo.endIndex = this.totalItemCount;
            this.updateVirtualItemIndex();
            this.resetList(this.dataSource, this.fields, this.query);
          }
          findLi = this.getItems().length - 1;
        }
        e.preventDefault();
        if (this.activeIndex === findLi) {
          if (isVirtualKeyAction) {
            this.setSelection(this.liCollections[findLi], e);
          }
          return;
        }
        if (!this.enableVirtualization && this.liCollections[findLi] && this.liCollections[findLi].classList.contains("e-disabled")) {
          return;
        }
        this.setSelection(this.liCollections[findLi], e);
      }
    };
    DropDownList2.prototype.selectCurrentValueOnTab = function(e) {
      if (this.getModuleName() === "autocomplete") {
        this.selectCurrentItem(e);
      } else {
        if (this.isPopupOpen) {
          this.hidePopup(e);
          this.focusDropDown(e);
        }
      }
    };
    DropDownList2.prototype.mobileKeyActionHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      if (this.isEditTextBox() && !this.isPopupOpen) {
        return;
      }
      if (!this.readonly) {
        if (this.list === void 0 && !this.isRequested) {
          this.searchKeyEvent = e;
          this.renderList();
        }
        if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {
          return;
        }
        if (e.action === "enter") {
          this.selectCurrentItem(e);
        }
      }
    };
    DropDownList2.prototype.handleVirtualKeyboardActions = function(e, pageCount) {
      switch (e.action) {
        case "down":
        case "up":
          if (this.itemData != null || this.getModuleName() === "autocomplete") {
            this.updateUpDownAction(e, true);
          }
          break;
        case "pageUp":
          this.activeIndex = this.getModuleName() === "autocomplete" ? this.getIndexByValue(this.selectedLI.getAttribute("data-value")) + this.getPageCount() - 1 : this.getIndexByValue(this.previousValue);
          this.pageUpSelection(this.activeIndex - this.getPageCount(), e, true);
          e.preventDefault();
          break;
        case "pageDown":
          this.activeIndex = this.getModuleName() === "autocomplete" ? this.getIndexByValue(this.selectedLI.getAttribute("data-value")) - this.getPageCount() : this.getIndexByValue(this.previousValue);
          this.pageDownSelection(!isNullOrUndefined(this.activeIndex) ? this.activeIndex + this.getPageCount() : 2 * this.getPageCount(), e, true);
          e.preventDefault();
          break;
        case "home":
          this.isMouseScrollAction = true;
          this.updateHomeEndAction(e, true);
          break;
        case "end":
          this.isMouseScrollAction = true;
          this.updateHomeEndAction(e, true);
          break;
      }
      this.keyboardEvent = null;
    };
    DropDownList2.prototype.selectCurrentItem = function(e) {
      if (this.isPopupOpen) {
        var li = this.list.querySelector("." + dropDownListClasses.focus);
        if (this.isDisabledElement(li)) {
          return;
        }
        if (li) {
          this.setSelection(li, e);
          this.isTyped = false;
        }
        if (this.isSelected) {
          this.isSelectCustom = false;
          this.onChangeEvent(e);
        }
        this.hidePopup(e);
        this.focusDropDown(e);
      } else {
        this.showPopup();
      }
    };
    DropDownList2.prototype.isSelectFocusItem = function(element2) {
      return !isNullOrUndefined(element2);
    };
    DropDownList2.prototype.pageUpSelection = function(steps, event, isVirtualKeyAction) {
      var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];
      if (!this.enableVirtualization && previousItem && previousItem.classList.contains("e-disabled")) {
        var validIndex = steps >= 0 ? steps + 1 : 0;
        while (validIndex < this.liCollections.length) {
          previousItem = this.liCollections[validIndex];
          if (previousItem && !previousItem.classList.contains("e-disabled")) {
            break;
          }
          validIndex--;
          if (validIndex < 0) {
            return;
          }
        }
      }
      if (this.enableVirtualization && this.activeIndex == null) {
        previousItem = this.liCollections.length >= steps && steps >= 0 ? this.liCollections[steps + this.skeletonCount + 1] : this.liCollections[0];
      }
      if (!isNullOrUndefined(previousItem) && previousItem.classList.contains("e-virtual-list")) {
        previousItem = this.liCollections[this.skeletonCount];
      }
      this.PageUpDownSelection(previousItem, event);
      if (this.allowFiltering && this.getModuleName() === "dropdownlist") {
        if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
          attributes(this.filterInput, { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
        } else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-active")[0])) {
          attributes(this.filterInput, { "aria-activedescendant": this.ulElement.getElementsByClassName("e-active")[0].id });
        }
      }
    };
    DropDownList2.prototype.PageUpDownSelection = function(previousItem, event) {
      if (this.enableVirtualization) {
        if (!isNullOrUndefined(previousItem) && (this.getModuleName() !== "autocomplete" && !previousItem.classList.contains("e-active") || this.getModuleName() === "autocomplete" && !previousItem.classList.contains("e-item-focus"))) {
          this.setSelection(previousItem, event);
        }
      } else {
        this.setSelection(previousItem, event);
      }
    };
    DropDownList2.prototype.pageDownSelection = function(steps, event, isVirtualKeyAction) {
      var list = this.getItems();
      var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];
      if (!this.enableVirtualization && previousItem && previousItem.classList.contains("e-disabled")) {
        while (steps >= 0 && steps < this.liCollections.length) {
          previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];
          if (previousItem && !previousItem.classList.contains("e-disabled")) {
            break;
          }
          steps++;
        }
      }
      if (this.enableVirtualization && this.skeletonCount > 0) {
        steps = this.getModuleName() === "dropdownlist" && this.allowFiltering ? steps + 1 : steps;
        previousItem = steps < list.length ? this.liCollections[steps] : this.liCollections[list.length - 1];
      }
      if (this.enableVirtualization && this.activeIndex == null) {
        previousItem = steps <= list.length ? this.liCollections[steps + this.skeletonCount - 1] : this.liCollections[list.length - 1];
      }
      this.PageUpDownSelection(previousItem, event);
      if (this.allowFiltering && this.getModuleName() === "dropdownlist") {
        if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
          attributes(this.filterInput, { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
        } else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-active")[0])) {
          attributes(this.filterInput, { "aria-activedescendant": this.ulElement.getElementsByClassName("e-active")[0].id });
        }
      }
    };
    DropDownList2.prototype.unWireEvent = function() {
      if (!isNullOrUndefined(this.inputWrapper)) {
        EventHandler.remove(this.inputWrapper.container, "mousedown", this.dropDownClick);
        EventHandler.remove(this.inputWrapper.container, "keypress", this.onSearch);
        EventHandler.remove(this.inputWrapper.container, "focus", this.focusIn);
        EventHandler.remove(window, "resize", this.windowResize);
      }
      this.unBindCommonEvent();
    };
    DropDownList2.prototype.unWireListEvents = function() {
      if (this.list) {
        EventHandler.remove(this.list, "click", this.onMouseClick);
        EventHandler.remove(this.list, "mouseover", this.onMouseOver);
        EventHandler.remove(this.list, "mouseout", this.onMouseLeave);
      }
    };
    DropDownList2.prototype.checkSelector = function(id) {
      return '[id="' + id.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g, "\\$1") + '"]';
    };
    DropDownList2.prototype.onDocumentClick = function(e) {
      var target = e.target;
      if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.container.contains(e.target)) {
        if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {
          this.isDocumentClick = true;
          var isActive = this.isRequested;
          if (this.getModuleName() === "combobox" && this.isTyped) {
            this.isInteracted = false;
          }
          this.hidePopup(e);
          this.isInteracted = false;
          if (!isActive) {
            this.onFocusOut(e);
            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);
          }
        }
      } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === "combobox" && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {
        this.isPreventBlur = (Browser.isIE || Browser.info.name === "edge") && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);
        e.preventDefault();
      }
    };
    DropDownList2.prototype.activeStateChange = function() {
      if (this.isDocumentClick) {
        this.hidePopup();
        this.onFocusOut();
        this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);
      }
    };
    DropDownList2.prototype.focusDropDown = function(e) {
      if (!this.initial && this.isFilterLayout()) {
        this.focusIn(e);
      }
    };
    DropDownList2.prototype.dropDownClick = function(e) {
      if (e.which === 3 || e.button === 2) {
        return;
      }
      this.keyboardEvent = null;
      if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {
        return;
      }
      var target = e.target;
      if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== "combobox") {
        e.preventDefault();
      }
      if (!this.readonly) {
        if (this.isPopupOpen) {
          this.hidePopup(e);
          if (this.isFilterLayout()) {
            this.focusDropDown(e);
          }
        } else {
          this.focusIn(e);
          this.floatLabelChange();
          this.queryString = this.inputElement.value.trim() === "" ? null : this.inputElement.value;
          this.isDropDownClick = true;
          this.showPopup(e);
        }
        var proxy_1 = this;
        var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;
        if (!this.isSecondClick) {
          setTimeout(function() {
            proxy_1.cloneElements();
            proxy_1.isSecondClick = true;
            proxy_1.isSecondClick = proxy_1.isReact && proxy_1.isFiltering() && proxy_1.dataSource instanceof DataManager && !proxy_1.list.querySelector("ul") ? false : true;
          }, duration);
        }
      } else {
        this.focusIn(e);
      }
    };
    DropDownList2.prototype.cloneElements = function() {
      if (this.list) {
        var ulElement = this.list.querySelector("ul");
        if (ulElement) {
          ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;
          this.actionCompleteData.ulElement = ulElement;
        }
      }
    };
    DropDownList2.prototype.updateSelectedItem = function(li, e, preventSelect, isSelection) {
      var _this = this;
      this.removeSelection();
      li.classList.add(dropDownBaseClasses.selected);
      this.removeHover();
      var value = li.getAttribute("data-value") !== null ? this.getFormattedValue(li.getAttribute("data-value")) : null;
      var selectedData = this.getDataByValue(value);
      if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {
        var items = this.detachChanges(selectedData);
        this.isSelected = true;
        var eventArgs = {
          e,
          item: li,
          itemData: items,
          isInteracted: e ? true : false,
          cancel: false
        };
        this.trigger("select", eventArgs, function(eventArgs2) {
          if (eventArgs2.cancel) {
            li.classList.remove(dropDownBaseClasses.selected);
          } else {
            _this.selectEventCallback(li, e, preventSelect, selectedData, value);
            if (isSelection) {
              _this.setSelectOptions(li, e);
            }
          }
        });
      } else {
        this.selectEventCallback(li, e, preventSelect, selectedData, value);
        if (isSelection) {
          this.setSelectOptions(li, e);
        }
      }
    };
    DropDownList2.prototype.selectEventCallback = function(li, e, preventSelect, selectedData, value) {
      this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;
      if (this.itemData !== selectedData) {
        this.previousValue = !isNullOrUndefined(this.itemData) ? typeof this.itemData == "object" && !this.allowObjectBinding ? this.checkFieldValue(this.itemData, this.fields.value.split(".")) : this.itemData : null;
      }
      this.item = li;
      this.itemData = selectedData;
      var focusedItem = this.list.querySelector("." + dropDownBaseClasses.focus);
      if (focusedItem) {
        removeClass([focusedItem], dropDownBaseClasses.focus);
      }
      li.setAttribute("aria-selected", "true");
      if (isNullOrUndefined(value)) {
        value = "null";
      }
      if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== "autocomplete") {
        var filterIndex = this.getIndexByValueFilter(value, this.actionCompleteData.ulElement);
        if (!isNullOrUndefined(filterIndex)) {
          this.activeIndex = filterIndex;
        } else {
          this.activeIndex = this.getIndexByValue(value);
        }
      } else {
        if (this.enableVirtualization && this.activeIndex == null && this.dataSource instanceof DataManager) {
          this.UpdateSkeleton();
          this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
          this.ulElement = this.list.querySelector("ul");
        }
        this.activeIndex = this.getIndexByValue(value);
      }
    };
    DropDownList2.prototype.activeItem = function(li) {
      if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {
        this.removeSelection();
        li.classList.add(dropDownBaseClasses.selected);
        this.removeHover();
        li.setAttribute("aria-selected", "true");
      }
    };
    DropDownList2.prototype.setValue = function(e) {
      var dataItem = this.getItemData();
      this.isTouched = !isNullOrUndefined(e);
      if (dataItem.value === null) {
        Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);
      } else {
        Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);
      }
      if (this.valueTemplate && this.itemData !== null) {
        this.setValueTemplate();
      } else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {
        detach(this.valueTempElement);
        this.inputElement.style.display = "block";
      }
      if (!isNullOrUndefined(dataItem.value) && !this.enableVirtualization && this.allowFiltering) {
        this.activeIndex = this.getIndexByValueFilter(dataItem.value, this.actionCompleteData.ulElement);
      }
      var clearIcon = dropDownListClasses.clearIcon;
      var isFilterElement = this.isFiltering() && this.filterInput && this.getModuleName() === "combobox";
      var clearElement = isFilterElement && this.filterInput.parentElement.querySelector("." + clearIcon);
      if (this.isFiltering() && clearElement) {
        clearElement.style.removeProperty("visibility");
      }
      if (!this.allowObjectBinding && this.previousValue === dataItem.value || this.allowObjectBinding && (this.previousValue != null && this.isObjectInArray(this.previousValue, [this.allowCustom && this.isObjectCustomValue ? this.value ? this.value : dataItem : dataItem.value ? this.getDataByValue(dataItem.value) : dataItem]))) {
        this.isSelected = false;
        return true;
      } else {
        this.isSelected = !this.initial ? true : false;
        this.isSelectCustom = false;
        if (this.getModuleName() === "dropdownlist") {
          this.updateIconState();
        }
        return false;
      }
    };
    DropDownList2.prototype.setSelection = function(li, e) {
      if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {
        this.updateSelectedItem(li, e, false, true);
      } else {
        this.setSelectOptions(li, e);
        if (this.enableVirtualization && this.value) {
          var fields = !this.isPrimitiveData ? this.fields.value : "";
          var currentValue = this.allowObjectBinding && !isNullOrUndefined(this.value) ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
          if (this.dataSource instanceof DataManager) {
            var getItem = new DataManager(this.virtualGroupDataSource).executeLocal(new Query().where(new Predicate$1(fields, "equal", currentValue)));
            if (getItem && getItem.length > 0) {
              this.itemData = getItem[0];
              var dataItem = this.getItemData();
              var value = this.allowObjectBinding ? this.getDataByValue(dataItem.value) : dataItem.value;
              if (this.value === dataItem.value && this.text !== dataItem.text || this.value !== dataItem.value && this.text === dataItem.text) {
                this.setProperties({ "text": dataItem.text ? dataItem.text.toString() : dataItem.text, "value": value });
              }
            }
          } else {
            var getItem = new DataManager(this.dataSource).executeLocal(new Query().where(new Predicate$1(fields, "equal", currentValue)));
            if (getItem && getItem.length > 0) {
              this.itemData = getItem[0];
              var dataItem = this.getItemData();
              var value = this.allowObjectBinding ? this.getDataByValue(dataItem.value) : dataItem.value;
              if (this.value === dataItem.value && this.text !== dataItem.text || this.value !== dataItem.value && this.text === dataItem.text) {
                this.setProperties({ "text": dataItem.text ? dataItem.text.toString() : dataItem.text, "value": value });
                if (isNullOrUndefined(li)) {
                  this.previousValue = this.value;
                }
              }
            }
          }
        }
      }
    };
    DropDownList2.prototype.setSelectOptions = function(li, e) {
      if (this.list) {
        this.removeHover();
      }
      this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;
      this.selectedLI = li;
      if (this.setValue(e)) {
        return;
      }
      if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== "keydown" || e.type === "keydown" && e.action === "enter")) {
        this.isSelectCustom = false;
        this.onChangeEvent(e);
      }
      if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== "click")) {
        this.setScrollPosition(e);
      }
      if (Browser.info.name !== "mozilla") {
        if (this.targetElement()) {
          attributes(this.targetElement(), { "aria-describedby": this.inputElement.id !== "" ? this.inputElement.id : this.element.id });
          this.targetElement().removeAttribute("aria-live");
        }
      }
      if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
        attributes(this.targetElement(), { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
      } else if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-active")[0])) {
        attributes(this.targetElement(), { "aria-activedescendant": this.ulElement.getElementsByClassName("e-active")[0].id });
      }
    };
    DropDownList2.prototype.dropdownCompiler = function(dropdownTemplate) {
      var checkTemplate = false;
      if (typeof dropdownTemplate !== "function" && dropdownTemplate) {
        try {
          checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;
        } catch (exception) {
          checkTemplate = false;
        }
      }
      return checkTemplate;
    };
    DropDownList2.prototype.setValueTemplate = function() {
      var compiledString;
      if (this.isReact) {
        this.clearTemplate(["valueTemplate"]);
        if (this.valueTempElement) {
          detach(this.valueTempElement);
          this.inputElement.style.display = "block";
          this.valueTempElement = null;
        }
      }
      if (!this.valueTempElement) {
        this.valueTempElement = this.createElement("span", { className: dropDownListClasses.value });
        this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);
        this.inputElement.style.display = "none";
      }
      if (!this.isReact) {
        this.valueTempElement.innerHTML = "";
      }
      var valuecheck = this.dropdownCompiler(this.valueTemplate);
      if (typeof this.valueTemplate !== "function" && valuecheck) {
        compiledString = compile$1(document.querySelector(this.valueTemplate).innerHTML.trim());
      } else {
        compiledString = compile$1(this.valueTemplate);
      }
      var valueCompTemp = compiledString(this.itemData, this, "valueTemplate", this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);
      if (valueCompTemp && valueCompTemp.length > 0) {
        append(valueCompTemp, this.valueTempElement);
      }
      this.renderReactTemplates();
    };
    DropDownList2.prototype.removeSelection = function() {
      if (this.list) {
        var selectedItems = this.list.querySelectorAll("." + dropDownBaseClasses.selected);
        if (selectedItems.length) {
          removeClass(selectedItems, dropDownBaseClasses.selected);
          selectedItems[0].removeAttribute("aria-selected");
        }
      }
    };
    DropDownList2.prototype.getItemData = function() {
      var fields = this.fields;
      var dataItem = null;
      dataItem = this.itemData;
      var dataValue;
      var dataText;
      if (!isNullOrUndefined(dataItem)) {
        dataValue = getValue(fields.value, dataItem);
        dataText = getValue(fields.text, dataItem);
      }
      var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;
      var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;
      return { value, text };
    };
    DropDownList2.prototype.onChangeEvent = function(eve, isCustomValue) {
      var _this = this;
      var dataItem = this.getItemData();
      var index = this.isSelectCustom ? null : this.activeIndex;
      if (this.enableVirtualization) {
        var datas = this.dataSource instanceof DataManager ? this.virtualGroupDataSource : this.dataSource;
        if (dataItem.value && datas && datas.length > 0) {
          var foundIndex = datas.findIndex(function(data) {
            return !isNullOrUndefined(dataItem.value) && getValue(_this.fields.value, data) === dataItem.value;
          });
          if (foundIndex !== -1) {
            index = foundIndex;
          }
        }
      }
      var value = this.allowObjectBinding ? isCustomValue ? this.value : this.getDataByValue(dataItem.value) : dataItem.value;
      this.setProperties({ "index": index, "text": dataItem.text ? dataItem.text.toString() : dataItem.text, "value": value }, true);
      this.detachChangeEvent(eve);
    };
    DropDownList2.prototype.detachChanges = function(value) {
      var items;
      if (typeof value === "string" || typeof value === "boolean" || typeof value === "number") {
        items = Object.defineProperties({}, {
          value: {
            value,
            enumerable: true
          },
          text: {
            value,
            enumerable: true
          }
        });
      } else {
        items = value;
      }
      return items;
    };
    DropDownList2.prototype.detachChangeEvent = function(eve) {
      this.isSelected = false;
      this.previousValue = this.value;
      this.activeIndex = this.enableVirtualization ? this.getIndexByValue(this.value) : this.index;
      this.typedString = !isNullOrUndefined(this.text) ? this.text : "";
      if (!this.initial) {
        var items = this.detachChanges(this.itemData);
        var preItems = void 0;
        if (typeof this.previousItemData === "string" || typeof this.previousItemData === "boolean" || typeof this.previousItemData === "number") {
          preItems = Object.defineProperties({}, {
            value: {
              value: this.previousItemData,
              enumerable: true
            },
            text: {
              value: this.previousItemData,
              enumerable: true
            }
          });
        } else {
          preItems = this.previousItemData;
        }
        this.setHiddenValue();
        var eventArgs = {
          e: eve,
          item: this.item,
          itemData: items,
          previousItem: this.previousSelectedLI,
          previousItemData: preItems,
          isInteracted: eve ? true : false,
          value: this.value,
          element: this.element,
          event: eve
        };
        if (this.isAngular && this.preventChange) {
          this.preventChange = false;
        } else {
          this.trigger("change", eventArgs);
        }
      }
      if ((isNullOrUndefined(this.value) || this.value === "") && this.floatLabelType !== "Always") {
        removeClass([this.inputWrapper.container], "e-valid-input");
      }
    };
    DropDownList2.prototype.setHiddenValue = function() {
      if (!isNullOrUndefined(this.value)) {
        var value = this.allowObjectBinding && !isNullOrUndefined(this.value) ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
        if (this.hiddenElement.querySelector("option")) {
          var selectedElement = this.hiddenElement.querySelector("option");
          selectedElement.textContent = this.text;
          selectedElement.setAttribute("value", value.toString());
        } else {
          if (!isNullOrUndefined(this.hiddenElement)) {
            var option = document.createElement("option");
            option.text = this.text;
            option.setAttribute("selected", "");
            this.hiddenElement.appendChild(option);
            var selectedElement = this.hiddenElement.querySelector("option");
            selectedElement.setAttribute("value", value.toString());
          }
        }
      } else {
        this.hiddenElement.innerHTML = "";
      }
    };
    DropDownList2.prototype.onFilterUp = function(e) {
      if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {
        this.isValidKey = false;
        this.filterArgs = e;
        this.firstItem = this.dataSource && this.dataSource.length > 0 ? this.dataSource[0] : null;
        switch (e.keyCode) {
          case 38:
          //up arrow
          case 40:
            if (this.getModuleName() === "autocomplete" && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {
              this.preventAutoFill = true;
              this.searchLists(e);
            } else {
              this.preventAutoFill = false;
            }
            this.preventAltUp = false;
            if (this.getModuleName() === "autocomplete" && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
              attributes(this.targetElement(), { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
            }
            e.preventDefault();
            break;
          case 46:
          //delete
          case 8:
            this.typedString = this.filterInput.value;
            if (!this.isPopupOpen && this.typedString !== "" || this.isPopupOpen && this.queryString.length > 0) {
              this.preventAutoFill = true;
              this.searchLists(e);
            } else if (this.typedString === "" && this.queryString === "" && this.getModuleName() !== "autocomplete") {
              this.preventAutoFill = true;
              this.searchLists(e);
            } else if (this.typedString === "") {
              if (this.list) {
                this.resetFocusElement();
              }
              this.activeIndex = null;
              if (this.getModuleName() !== "dropdownlist") {
                this.preventAutoFill = true;
                this.searchLists(e);
                if (this.getModuleName() === "autocomplete") {
                  this.hidePopup();
                }
              }
            }
            e.preventDefault();
            break;
          default:
            if (this.isFiltering() && this.getModuleName() === "combobox" && isNullOrUndefined(this.list)) {
              this.getInitialData = true;
              this.renderList();
              if (!this.isSecondClick && !this.isDropDownClick) {
                this.executeCloneElements();
              }
            }
            this.typedString = this.filterInput.value;
            this.preventAutoFill = false;
            if (!this.getInitialData) {
              this.searchLists(e);
            }
            if (this.enableVirtualization && this.getModuleName() !== "autocomplete" || this.getModuleName() === "autocomplete" && !(this.dataSource instanceof DataManager) || this.getModuleName() === "autocomplete" && this.dataSource instanceof DataManager && this.totalItemCount !== 0) {
              this.getFilteringSkeletonCount();
            }
            break;
        }
      } else {
        this.isValidKey = false;
      }
    };
    DropDownList2.prototype.onFilterDown = function(e) {
      switch (e.keyCode) {
        case 13:
          break;
        case 40:
        //down arrow
        case 38:
          this.queryString = this.filterInput.value;
          e.preventDefault();
          break;
        case 9:
          if (this.isPopupOpen && this.getModuleName() !== "autocomplete") {
            e.preventDefault();
          }
          break;
        default:
          this.prevSelectPoints = this.getSelectionPoints();
          this.queryString = this.filterInput.value;
          break;
      }
    };
    DropDownList2.prototype.removeFillSelection = function() {
      if (this.isInteracted) {
        var selection = this.getSelectionPoints();
        this.inputElement.setSelectionRange(selection.end, selection.end);
      }
    };
    DropDownList2.prototype.getQuery = function(query) {
      var filterQuery;
      if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {
        filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();
        var filterType = this.typedString === "" ? "contains" : this.filterType;
        var dataType = this.typeOfData(this.dataSource).typeof;
        if (!(this.dataSource instanceof DataManager) && dataType === "string" || dataType === "number") {
          filterQuery.where("", filterType, this.typedString, this.ignoreCase, this.ignoreAccent);
        } else if (this.getModuleName() !== "combobox" || this.isFiltering() && this.getModuleName() === "combobox" && this.typedString !== "") {
          var fields = this.fields.text ? this.fields.text : "";
          filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);
        }
      } else {
        filterQuery = this.enableVirtualization && !isNullOrUndefined(this.customFilterQuery) ? this.customFilterQuery.clone() : query ? query.clone() : this.query ? this.query.clone() : new Query();
      }
      if (this.enableVirtualization && this.viewPortInfo.endIndex !== 0) {
        var takeValue = this.getTakeValue();
        var alreadySkipAdded = false;
        if (filterQuery) {
          for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {
            if (filterQuery.queries[queryElements].fn === "onSkip") {
              alreadySkipAdded = true;
              break;
            }
          }
        }
        var queryTakeValue = 0;
        var querySkipValue = 0;
        if (filterQuery && filterQuery.queries.length > 0) {
          for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {
            if (filterQuery.queries[queryElements].fn === "onSkip") {
              querySkipValue = filterQuery.queries[queryElements].e.nos;
            }
            if (filterQuery.queries[queryElements].fn === "onTake") {
              queryTakeValue = takeValue <= filterQuery.queries[queryElements].e.nos ? filterQuery.queries[queryElements].e.nos : takeValue;
            }
          }
        }
        if (queryTakeValue <= 0 && this.query && this.query.queries.length > 0) {
          for (var queryElements = 0; queryElements < this.query.queries.length; queryElements++) {
            if (this.query.queries[queryElements].fn === "onTake") {
              queryTakeValue = takeValue <= this.query.queries[queryElements].e.nos ? this.query.queries[queryElements].e.nos : takeValue;
            }
          }
        }
        var skipExists = false;
        if (filterQuery && filterQuery.queries.length > 0) {
          for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {
            if (filterQuery.queries[queryElements].fn === "onSkip") {
              querySkipValue = filterQuery.queries[queryElements].e.nos;
              filterQuery.queries.splice(queryElements, 1);
              alreadySkipAdded = false;
              --queryElements;
              continue;
            }
            if (filterQuery.queries[queryElements].fn === "onTake") {
              queryTakeValue = filterQuery.queries[queryElements].e.nos <= queryTakeValue ? queryTakeValue : filterQuery.queries[queryElements].e.nos;
              filterQuery.queries.splice(queryElements, 1);
              --queryElements;
            }
          }
        }
        if (!skipExists && (this.allowFiltering || !this.isPopupOpen || !alreadySkipAdded)) {
          if (querySkipValue > 0) {
            filterQuery.skip(querySkipValue);
          } else {
            filterQuery.skip(this.virtualItemStartIndex);
          }
        }
        if (this.isIncrementalRequest) {
          filterQuery.take(this.incrementalEndIndex);
        } else {
          if (queryTakeValue > 0) {
            filterQuery.take(queryTakeValue);
          } else {
            filterQuery.take(takeValue);
          }
        }
        filterQuery.requiresCount();
      }
      return filterQuery;
    };
    DropDownList2.prototype.getSelectionPoints = function() {
      var input = this.inputElement;
      return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };
    };
    DropDownList2.prototype.searchLists = function(e) {
      var _this = this;
      this.isTyped = true;
      this.activeIndex = null;
      this.isListSearched = true;
      if (this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon)) {
        var clearElement = this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon);
        clearElement.style.visibility = this.filterInput.value === "" ? "hidden" : "visible";
      }
      this.isDataFetched = false;
      if (this.isFiltering()) {
        this.checkAndResetCache();
        this.isRequesting = false;
        var eventArgs_1 = {
          preventDefaultAction: false,
          text: this.filterInput.value,
          updateData: function(dataSource, query, fields) {
            if (eventArgs_1.cancel) {
              return;
            }
            _this.isCustomFilter = true;
            _this.customFilterQuery = query ? query.clone() : query;
            _this.filteringAction(dataSource, query, fields);
          },
          baseEventArgs: e,
          cancel: false
        };
        this.trigger("filtering", eventArgs_1, function(eventArgs) {
          if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {
            _this.filteringAction(_this.dataSource, null, _this.fields);
          }
        });
      }
    };
    DropDownList2.prototype.filter = function(dataSource, query, fields) {
      this.isCustomFilter = true;
      this.filteringAction(dataSource, query, fields);
    };
    DropDownList2.prototype.filteringAction = function(dataSource, query, fields) {
      if (!isNullOrUndefined(this.filterInput)) {
        this.beforePopupOpen = !this.isPopupOpen && this.getModuleName() === "combobox" && this.filterInput.value === "" || this.getInitialData ? false : true;
        var isNoData = this.list.classList.contains(dropDownBaseClasses.noData);
        if (this.filterInput.value.trim() === "" && !this.itemTemplate) {
          this.actionCompleteData.isUpdated = false;
          this.isTyped = false;
          if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {
            if (this.enableVirtualization) {
              if (this.isFiltering()) {
                this.isPreventScrollAction = true;
                this.list.scrollTop = 0;
                this.previousStartIndex = 0;
                this.virtualListInfo = null;
              }
              this.totalItemCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;
              this.resetList(dataSource, fields, query);
              if (isNoData && !this.list.classList.contains(dropDownBaseClasses.noData)) {
                if (!this.list.querySelector(".e-virtual-ddl-content")) {
                  var virtualContentElement = this.createElement("div", {
                    className: "e-virtual-ddl-content"
                  });
                  virtualContentElement.style.cssText = this.getTransformValues();
                  this.list.appendChild(virtualContentElement).appendChild(this.list.querySelector(".e-list-parent"));
                }
                if (!this.list.querySelector(".e-virtual-ddl")) {
                  var virtualElement = this.createElement("div", {
                    id: this.element.id + "_popup",
                    className: "e-virtual-ddl"
                  });
                  virtualElement.style.cssText = this.GetVirtualTrackHeight();
                  this.list.parentElement.querySelector(".e-dropdownbase").appendChild(virtualElement);
                }
              }
            }
            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);
          }
          this.isTyped = true;
          if (!isNullOrUndefined(this.itemData) && this.getModuleName() === "dropdownlist") {
            this.focusIndexItem();
            this.setScrollPosition();
          }
          this.isNotSearchList = true;
        } else {
          this.isNotSearchList = false;
          query = this.filterInput.value.trim() === "" ? null : query;
          if (this.enableVirtualization && this.isFiltering() && this.isTyped) {
            this.isPreventScrollAction = true;
            this.list.scrollTop = 0;
            this.previousStartIndex = 0;
            this.virtualListInfo = null;
          }
          this.resetList(dataSource, fields, query);
          if (this.getModuleName() === "dropdownlist" && this.list.classList.contains(dropDownBaseClasses.noData)) {
            this.popupContentElement.setAttribute("role", "status");
            this.popupContentElement.setAttribute("id", "no-record");
            attributes(this.filterInputObj.container, { "aria-activedescendant": "no-record" });
          }
          if (this.enableVirtualization && isNoData && !this.list.classList.contains(dropDownBaseClasses.noData)) {
            if (!this.list.querySelector(".e-virtual-ddl-content")) {
              var virtualContentElement = this.createElement("div", {
                className: "e-virtual-ddl-content"
              });
              virtualContentElement.style.cssText = this.getTransformValues();
              this.list.appendChild(virtualContentElement).appendChild(this.list.querySelector(".e-list-parent"));
            }
            if (!this.list.querySelector(".e-virtual-ddl")) {
              var virtualElement = this.createElement("div", {
                id: this.element.id + "_popup",
                className: "e-virtual-ddl"
              });
              virtualElement.style.cssText = this.GetVirtualTrackHeight();
              this.list.parentElement.querySelector(".e-dropdownbase").appendChild(virtualElement);
            }
          }
        }
        if (this.enableVirtualization) {
          this.getFilteringSkeletonCount();
        }
        this.renderReactTemplates();
        if (this.filterInput && this.filterInput.value === "" && this.getModuleName() === "combobox") {
          this.executeCloneElements();
        }
      }
    };
    DropDownList2.prototype.setSearchBox = function(popupElement) {
      if (this.isFiltering()) {
        var parentElement = popupElement.querySelector("." + dropDownListClasses.filterParent) ? popupElement.querySelector("." + dropDownListClasses.filterParent) : this.createElement("span", {
          className: dropDownListClasses.filterParent
        });
        this.filterInput = this.createElement("input", {
          attrs: { type: "text" },
          className: dropDownListClasses.filterInput
        });
        this.element.parentNode.insertBefore(this.filterInput, this.element);
        var backIcon = false;
        if (Browser.isDevice && this.isDeviceFullScreen) {
          backIcon = true;
        }
        this.filterInputObj = Input.createInput({
          element: this.filterInput,
          buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],
          properties: { placeholder: this.filterBarPlaceholder }
        }, this.createElement);
        if (!isNullOrUndefined(this.cssClass)) {
          if (this.cssClass.split(" ").indexOf("e-outline") !== -1) {
            addClass([this.filterInputObj.container], "e-outline");
          } else if (this.cssClass.split(" ").indexOf("e-filled") !== -1) {
            addClass([this.filterInputObj.container], "e-filled");
          }
        }
        append([this.filterInputObj.container], parentElement);
        prepend([parentElement], popupElement);
        attributes(this.filterInput, {
          "aria-disabled": "false",
          "role": "combobox",
          "autocomplete": "off",
          "autocapitalize": "off",
          "spellcheck": "false"
        });
        this.clearIconElement = this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon);
        if (!Browser.isDevice && this.clearIconElement) {
          EventHandler.add(this.clearIconElement, "click", this.clearText, this);
          this.clearIconElement.style.visibility = "hidden";
        }
        if (!Browser.isDevice) {
          this.searchKeyModule = new KeyboardEvents(this.filterInput, {
            keyAction: this.keyActionHandler.bind(this),
            keyConfigs: this.keyConfigure,
            eventName: "keydown"
          });
        } else {
          this.searchKeyModule = new KeyboardEvents(this.filterInput, {
            keyAction: this.mobileKeyActionHandler.bind(this),
            keyConfigs: this.keyConfigure,
            eventName: "keydown"
          });
        }
        EventHandler.add(this.filterInput, "input", this.onInput, this);
        EventHandler.add(this.filterInput, "keyup", this.onFilterUp, this);
        EventHandler.add(this.filterInput, "keydown", this.onFilterDown, this);
        EventHandler.add(this.filterInput, "blur", this.onBlurHandler, this);
        EventHandler.add(this.filterInput, "paste", this.pasteHandler, this);
        return this.filterInputObj;
      } else {
        return inputObject;
      }
    };
    DropDownList2.prototype.onInput = function(e) {
      if (!isNullOrUndefined(e) && !isNullOrUndefined(e.data) && e.data.length > 1 && this.autoFill && (this.getModuleName() === "combobox" || this.getModuleName() === "autocomplete")) {
        this.inputElement.value = e.data;
      }
      this.isValidKey = true;
      if (this.getModuleName() === "combobox") {
        this.updateIconState();
      }
      if (Browser.isDevice && Browser.info.name === "mozilla") {
        this.typedString = this.filterInput.value;
        this.preventAutoFill = true;
        this.searchLists(e);
      }
    };
    DropDownList2.prototype.pasteHandler = function(e) {
      var _this = this;
      setTimeout(function() {
        _this.typedString = _this.filterInput.value;
        if (_this.getModuleName() === "combobox" && _this.isFiltering() && isNullOrUndefined(_this.list)) {
          _this.renderList();
        }
        _this.searchLists(e);
      });
    };
    DropDownList2.prototype.onActionFailure = function(e) {
      _super.prototype.onActionFailure.call(this, e);
      if (this.beforePopupOpen) {
        this.renderPopup();
      }
    };
    DropDownList2.prototype.getTakeValue = function() {
      return this.allowFiltering && this.getModuleName() === "dropdownlist" && Browser.isDevice ? Math.round(window.outerHeight / this.listItemHeight) : this.itemCount;
    };
    DropDownList2.prototype.onActionComplete = function(ulElement, list, e, isUpdated) {
      var _this = this;
      if (this.dataSource instanceof DataManager && !isNullOrUndefined(e) && !this.virtualGroupDataSource) {
        this.totalItemCount = e.count;
      }
      if (this.isNotSearchList && !this.enableVirtualization) {
        this.isNotSearchList = false;
        return;
      }
      if (this.getInitialData) {
        this.updateActionCompleteDataValues(ulElement, list);
        this.getInitialData = false;
        this.isReactTemplateUpdate = true;
        this.searchLists(this.filterArgs);
        return;
      }
      var tempItemCount = this.itemCount;
      if (this.isActive || !isNullOrUndefined(ulElement)) {
        var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;
        _super.prototype.onActionComplete.call(this, ulElement, list, e);
        this.skeletonCount = this.totalItemCount !== 0 && this.totalItemCount < this.itemCount * 2 && (!(this.dataSource instanceof DataManager) || this.dataSource instanceof DataManager && this.totalItemCount <= this.itemCount) ? 0 : this.skeletonCount;
        this.updateSelectElementData(this.allowFiltering);
        if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === "keydown") {
          this.isRequested = false;
          this.keyActionHandler(this.searchKeyEvent);
          this.searchKeyEvent = null;
        }
        if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {
          this.incrementalSearch(this.searchKeyEvent);
          this.searchKeyEvent = null;
        }
        if (!this.enableVirtualization) {
          this.list.scrollTop = 0;
        }
        if (!isNullOrUndefined(ulElement)) {
          attributes(ulElement, { "id": this.element.id + "_options", "role": "listbox", "aria-hidden": "false", "aria-label": "listbox" });
        }
        if (this.initialRemoteRender) {
          this.initial = true;
          this.activeIndex = this.index;
          this.initialRemoteRender = false;
          if (this.value && this.dataSource instanceof DataManager) {
            var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;
            var value_1 = this.allowObjectBinding && !isNullOrUndefined(this.value) ? getValue(checkField_1, this.value) : this.value;
            var fieldValue_1 = this.fields.value.split(".");
            var checkVal = list.some(function(x) {
              return isNullOrUndefined(x[checkField_1]) && fieldValue_1.length > 1 ? _this.checkFieldValue(x, fieldValue_1) === value_1 : x[checkField_1] === value_1;
            });
            if (this.enableVirtualization && this.virtualGroupDataSource) {
              checkVal = this.virtualGroupDataSource.some(function(x) {
                return isNullOrUndefined(x[checkField_1]) && fieldValue_1.length > 1 ? _this.checkFieldValue(x, fieldValue_1) === value_1 : x[checkField_1] === value_1;
              });
            }
            if (!checkVal) {
              this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate$1(checkField_1, "equal", value_1))).then(function(e2) {
                if (e2.result.length > 0) {
                  _this.addItem(e2.result, list.length);
                  _this.updateValues();
                } else {
                  _this.updateValues();
                }
              });
            } else {
              this.updateValues();
            }
          } else {
            this.updateValues();
          }
          this.initial = false;
        } else if (this.getModuleName() === "autocomplete" && this.value) {
          this.setInputValue();
        }
        if (this.getModuleName() !== "autocomplete" && this.isFiltering() && !this.isTyped) {
          if (!this.actionCompleteData.isUpdated || (!this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0))) {
            if (this.itemTemplate && (this.element.tagName === "EJS-COMBOBOX" || this.isReact) && this.allowFiltering) {
              setTimeout(function() {
                _this.updateActionCompleteDataValues(ulElement, list);
              }, 0);
            } else {
              this.updateActionCompleteDataValues(ulElement, list);
            }
          }
          if (this.isDynamicData) {
            var currentValue = this.allowObjectBinding && !isNullOrUndefined(this.value) ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
            this.itemData = this.getDataByValue(currentValue);
            this.selectedLI = this.getElementByValue(currentValue);
            this.isDynamicData = false;
          }
          if ((this.allowCustom || this.allowFiltering && !this.isValueInList(list, this.value) && this.dataSource instanceof DataManager) && !this.enableVirtualization) {
            this.addNewItem(list, selectedItem);
          } else if ((this.allowCustom || this.allowFiltering && this.isValueInList(list, this.value)) && !this.enableVirtualization) {
            var value = this.allowObjectBinding && !isNullOrUndefined(this.value) ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
            var isValidAddition = !isNullOrUndefined(this.value) && selectedItem && selectedItem.getAttribute("data-value") === value.toString();
            if (isValidAddition) {
              this.addNewItem(list, selectedItem);
            }
          }
          if (!isNullOrUndefined(this.itemData) || isNullOrUndefined(this.itemData) && this.enableVirtualization) {
            this.getSkeletonCount();
            this.skeletonCount = this.totalItemCount !== 0 && this.totalItemCount < this.itemCount * 2 && (!(this.dataSource instanceof DataManager) || this.dataSource instanceof DataManager && this.totalItemCount <= this.itemCount) ? 0 : this.skeletonCount;
            this.UpdateSkeleton();
            this.focusIndexItem();
          }
          if (this.enableVirtualization) {
            this.updateActionCompleteDataValues(ulElement, list);
          }
        } else if (this.enableVirtualization && this.getModuleName() !== "autocomplete" && !this.isFiltering()) {
          var value = this.getItemData().value;
          this.activeIndex = this.getIndexByValue(value);
          var element2 = this.findListElement(this.list, "li", "data-value", value);
          this.selectedLI = element2;
        } else if (this.enableVirtualization && this.getModuleName() === "autocomplete") {
          this.activeIndex = this.skeletonCount;
        }
        if (this.beforePopupOpen) {
          this.renderPopup(e);
          if (this.enableVirtualization) {
            if (!this.list.querySelector(".e-virtual-list")) {
              this.UpdateSkeleton();
              this.liCollections = this.list.querySelectorAll(".e-list-item");
            }
          }
          if (this.enableVirtualization && tempItemCount !== this.itemCount) {
            this.resetList(this.dataSource, this.fields);
          }
        }
      }
    };
    DropDownList2.prototype.isValueInList = function(list, valueToFind) {
      if (Array.isArray(list)) {
        for (var i = 0; i < list.length; i++) {
          if (list[i] === valueToFind) {
            return true;
          }
        }
      } else if (typeof list === "object" && list !== null) {
        for (var key in list) {
          if (Object.prototype.hasOwnProperty.call(list, key) && list[key] === valueToFind) {
            return true;
          }
        }
      }
      return false;
    };
    DropDownList2.prototype.checkFieldValue = function(list, fieldValue) {
      var checkField = list;
      fieldValue.forEach(function(value) {
        checkField = checkField[value];
      });
      return checkField;
    };
    DropDownList2.prototype.updateActionCompleteDataValues = function(ulElement, list) {
      this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list, isUpdated: true };
      if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {
        this.actionData = this.actionCompleteData;
      }
    };
    DropDownList2.prototype.addNewItem = function(listData, newElement) {
      var _this = this;
      if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {
        var value_2 = this.getItemData().value;
        var isExist = listData.some(function(data) {
          return (typeof data === "string" || typeof data === "number" || typeof data === "boolean") && data === value_2 || getValue(_this.fields.value, data) === value_2;
        });
        if (!isExist) {
          this.addItem(this.itemData);
        }
      }
    };
    DropDownList2.prototype.updateActionCompleteData = function(li, item, index) {
      var _this = this;
      if (this.getModuleName() !== "autocomplete" && this.actionCompleteData.ulElement) {
        if (this.itemTemplate && this.element.tagName === "EJS-COMBOBOX" && this.allowFiltering) {
          setTimeout(function() {
            _this.actionCompleteDataUpdate(li, item, index);
          }, 0);
        } else {
          this.actionCompleteDataUpdate(li, item, index);
        }
      }
    };
    DropDownList2.prototype.actionCompleteDataUpdate = function(li, item, index) {
      if (index !== null) {
        this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);
      } else {
        this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));
      }
      if (this.isFiltering() && this.actionCompleteData.list && this.actionCompleteData.list.indexOf(item) < 0) {
        this.actionCompleteData.list.push(item);
      }
    };
    DropDownList2.prototype.focusIndexItem = function() {
      var value = this.getItemData().value;
      this.activeIndex = this.enableVirtualization && !isNullOrUndefined(value) || !this.enableVirtualization ? this.getIndexByValue(value) : this.activeIndex;
      var element2 = this.findListElement(this.list, "li", "data-value", value);
      this.selectedLI = element2;
      this.activeItem(element2);
      if (!(this.enableVirtualization && isNullOrUndefined(element2))) {
        this.removeFocus();
      }
    };
    DropDownList2.prototype.updateSelection = function() {
      var selectedItem = this.list.querySelector("." + dropDownBaseClasses.selected);
      if (selectedItem) {
        this.setProperties({ "index": this.getIndexByValue(selectedItem.getAttribute("data-value")) });
        this.activeIndex = this.index;
      } else {
        this.removeFocus();
        this.list.querySelector("." + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);
      }
    };
    DropDownList2.prototype.updateSelectionList = function() {
      var selectedItem = this.list && this.list.querySelector(".e-active");
      if (!selectedItem && !isNullOrUndefined(this.value) && this.getModuleName() !== "autocomplete") {
        var value = this.allowObjectBinding ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
        var findEle = this.findListElement(this.list, "li", "data-value", value);
        if (findEle) {
          findEle.classList.add("e-active");
        }
      }
    };
    DropDownList2.prototype.removeFocus = function() {
      var highlightedItem = this.list.querySelectorAll("." + dropDownListClasses.focus);
      if (highlightedItem && highlightedItem.length) {
        removeClass(highlightedItem, dropDownListClasses.focus);
      }
    };
    DropDownList2.prototype.renderPopup = function(e) {
      var _this = this;
      if (this.popupObj && document.body.contains(this.popupObj.element)) {
        this.refreshPopup();
        return;
      }
      var args = { cancel: false };
      this.trigger("beforeOpen", args, function(args2) {
        var initialPopupHeight;
        if (!args2.cancel) {
          var popupEle = _this.createElement("div", {
            id: _this.element.id + "_popup",
            className: "e-ddl e-popup " + (_this.cssClass !== null ? _this.cssClass : "")
          });
          popupEle.setAttribute("aria-label", _this.element.id);
          popupEle.setAttribute("role", "dialog");
          var searchBox = _this.setSearchBox(popupEle);
          _this.listContainerHeight = _this.allowFiltering && _this.getModuleName() === "dropdownlist" && Browser.isDevice ? formatUnit(Math.round(window.outerHeight).toString() + "px") : formatUnit(_this.popupHeight);
          if (_this.headerTemplate) {
            _this.setHeaderTemplate(popupEle);
            _this.isUpdateHeaderHeight = _this.header.offsetHeight !== 0;
          }
          append([_this.list], popupEle);
          if (_this.footerTemplate) {
            _this.setFooterTemplate(popupEle);
            _this.isUpdateFooterHeight = _this.footer.offsetHeight !== 0;
          }
          document.body.appendChild(popupEle);
          popupEle.style.top = "0px";
          initialPopupHeight = popupEle.clientHeight;
          if (_this.enableVirtualization && _this.itemTemplate) {
            var listitems = popupEle.querySelectorAll("li.e-list-item:not(.e-virtual-list)");
            _this.listItemHeight = listitems.length > 0 ? Math.ceil(listitems[0].getBoundingClientRect().height) + parseInt(window.getComputedStyle(listitems[0]).marginBottom, 10) : 0;
          }
          if (_this.enableVirtualization && !_this.list.classList.contains(dropDownBaseClasses.noData)) {
            _this.getSkeletonCount();
            _this.skeletonCount = _this.totalItemCount < _this.itemCount * 2 && (!(_this.dataSource instanceof DataManager) || _this.dataSource instanceof DataManager && _this.totalItemCount <= _this.itemCount) ? 0 : _this.skeletonCount;
            if (!_this.list.querySelector(".e-virtual-ddl-content")) {
              var virtualContentElement = _this.createElement("div", {
                className: "e-virtual-ddl-content"
              });
              virtualContentElement.style.cssText = _this.getTransformValues();
              _this.list.appendChild(virtualContentElement).appendChild(_this.list.querySelector(".e-list-parent"));
            } else {
              _this.list.getElementsByClassName("e-virtual-ddl-content")[0].style = _this.getTransformValues();
            }
            _this.UpdateSkeleton();
            _this.liCollections = _this.list.querySelectorAll("." + dropDownBaseClasses.li);
            _this.virtualItemCount = _this.itemCount;
            if (!_this.list.querySelector(".e-virtual-ddl")) {
              var virtualElement = _this.createElement("div", {
                id: _this.element.id + "_popup",
                className: "e-virtual-ddl"
              });
              virtualElement.style.cssText = _this.GetVirtualTrackHeight();
              popupEle.querySelector(".e-dropdownbase").appendChild(virtualElement);
            } else {
              _this.list.getElementsByClassName("e-virtual-ddl")[0].style = _this.GetVirtualTrackHeight();
            }
          }
          popupEle.style.visibility = "hidden";
          if (_this.popupHeight !== "auto") {
            _this.searchBoxHeight = 0;
            if (!isNullOrUndefined(searchBox.container) && _this.getModuleName() !== "combobox" && _this.getModuleName() !== "autocomplete") {
              _this.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;
              _this.listContainerHeight = (parseInt(_this.listContainerHeight, 10) - _this.searchBoxHeight).toString() + "px";
            }
            if (_this.headerTemplate) {
              _this.header = _this.header ? _this.header : popupEle.querySelector(".e-ddl-header");
              var height = Math.round(_this.header.getBoundingClientRect().height);
              _this.listContainerHeight = (parseInt(_this.listContainerHeight, 10) - (height + _this.searchBoxHeight)).toString() + "px";
            }
            if (_this.footerTemplate) {
              _this.footer = _this.footer ? _this.footer : popupEle.querySelector(".e-ddl-footer");
              var height = Math.round(_this.footer.getBoundingClientRect().height);
              _this.listContainerHeight = (parseInt(_this.listContainerHeight, 10) - (height + _this.searchBoxHeight)).toString() + "px";
            }
            _this.list.style.maxHeight = (parseInt(_this.listContainerHeight, 10) - 2).toString() + "px";
            popupEle.style.maxHeight = formatUnit(_this.popupHeight);
          } else {
            popupEle.style.height = "auto";
          }
          var offsetValue = 0;
          var left = void 0;
          _this.isPreventScrollAction = true;
          if (!isNullOrUndefined(_this.selectedLI) && (!isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0)) {
            _this.setScrollPosition();
          } else if (_this.enableVirtualization) {
            _this.setScrollPosition();
          } else {
            _this.list.scrollTop = 0;
          }
          if (Browser.isDevice && _this.isDeviceFullScreen && (!_this.allowFiltering && (_this.getModuleName() === "dropdownlist" || _this.isDropDownClick && _this.getModuleName() === "combobox"))) {
            offsetValue = _this.getOffsetValue(popupEle);
            var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];
            if (!isNullOrUndefined(_this.inputElement)) {
              left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));
            }
          }
          _this.createPopup(popupEle, offsetValue, left);
          _this.popupContentElement = _this.popupObj.element.querySelector(".e-content");
          _this.getFocusElement();
          _this.checkCollision(popupEle);
          if (Browser.isDevice) {
            if (parseInt(_this.popupWidth.toString(), 10) > window.outerWidth && !(_this.getModuleName() === "dropdownlist" && _this.allowFiltering)) {
              _this.popupObj.element.classList.add("e-wide-popup");
            }
            _this.popupObj.element.classList.add(dropDownListClasses.device);
            if (_this.getModuleName() === "dropdownlist" || _this.getModuleName() === "combobox" && !_this.allowFiltering && _this.isDropDownClick) {
              _this.popupObj.collision = { X: "fit", Y: "fit" };
            }
            if (_this.isFilterLayout() && _this.isDeviceFullScreen) {
              _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);
              _this.popupObj.position = { X: 0, Y: 0 };
              _this.popupObj.dataBind();
              attributes(_this.popupObj.element, { style: "left:0px;right:0px;top:0px;bottom:0px;" });
              addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);
              _this.setSearchBoxPosition();
              _this.backIconElement = searchBox.container.querySelector(".e-back-icon");
              _this.clearIconElement = searchBox.container.querySelector("." + dropDownListClasses.clearIcon);
              EventHandler.add(_this.backIconElement, "click", _this.clickOnBackIcon, _this);
              EventHandler.add(_this.clearIconElement, "click", _this.clearText, _this);
            }
          }
          popupEle.style.visibility = "visible";
          addClass([popupEle], "e-popup-close");
          var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);
          for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {
            var element2 = scrollParentElements_1[_i];
            EventHandler.add(element2, "scroll", _this.scrollHandler, _this);
          }
          if (!isNullOrUndefined(_this.list)) {
            _this.unWireListEvents();
            _this.wireListEvents();
          }
          _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;
          if (_this.enableVirtualization) {
            _this.notify("bindScrollEvent", {
              module: "VirtualScroll",
              component: _this.getModuleName(),
              enable: _this.enableVirtualization
            });
            setTimeout(function() {
              if (_this.value || _this.list.querySelector(".e-active")) {
                _this.updateSelectionList();
                if (_this.selectedValueInfo && _this.viewPortInfo && _this.viewPortInfo.offsets.top) {
                  _this.list.scrollTop = _this.viewPortInfo.offsets.top;
                } else {
                  _this.scrollBottom(true, true);
                }
              }
            }, 5);
          }
          attributes(_this.targetElement(), { "aria-expanded": "true", "aria-owns": _this.element.id + "_popup", "aria-controls": _this.element.id });
          if (_this.getModuleName() !== "dropdownlist" && _this.list.classList.contains("e-nodata")) {
            attributes(_this.targetElement(), { "aria-activedescendant": "no-record" });
            _this.popupContentElement.setAttribute("role", "status");
            _this.popupContentElement.setAttribute("id", "no-record");
          }
          _this.inputElement.setAttribute("aria-expanded", "true");
          _this.inputElement.setAttribute("aria-controls", _this.element.id + "_popup");
          var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;
          addClass([inputParent], [dropDownListClasses.inputFocus]);
          var animModel = { name: "FadeIn", duration: 100 };
          _this.beforePopupOpen = true;
          var popupInstance = _this.popupObj;
          var eventArgs = { popup: popupInstance, event: e, cancel: false, animation: animModel };
          _this.trigger("open", eventArgs, function(eventArgs2) {
            if (!eventArgs2.cancel) {
              if (!isNullOrUndefined(_this.inputWrapper)) {
                addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);
              }
              _this.renderReactTemplates();
              if (_this.isReact && _this.isFiltering() && _this.dataSource instanceof DataManager && _this.list.querySelector("ul") && !_this.isSecondClick) {
                _this.executeCloneElements();
              }
              if (!isNullOrUndefined(_this.popupObj)) {
                _this.popupObj.show(new Animation$1(eventArgs2.animation), _this.zIndex === 1e3 ? _this.element : null);
              }
              if (_this.isReact) {
                setTimeout(function() {
                  if (_this.popupHeight && _this.list && _this.popupHeight !== "auto" && !(_this.getModuleName() === "dropdownlist" && _this.allowFiltering)) {
                    var popupHeightValue = typeof _this.popupHeight === "string" ? parseInt(_this.popupHeight, 10) : _this.popupHeight;
                    if (!_this.isUpdateHeaderHeight && _this.headerTemplate && _this.header) {
                      var listHeight = _this.list.style.maxHeight === "" ? popupHeightValue : parseInt(_this.list.style.maxHeight, 10);
                      _this.list.style.maxHeight = (listHeight - _this.header.offsetHeight).toString() + "px";
                      _this.isUpdateHeaderHeight = true;
                    }
                    if (!_this.isUpdateFooterHeight && _this.footerTemplate && _this.footer) {
                      var listHeight = _this.list.style.maxHeight === "" ? popupHeightValue : parseInt(_this.list.style.maxHeight, 10);
                      _this.list.style.maxHeight = (listHeight - _this.footer.offsetHeight).toString() + "px";
                      _this.isUpdateFooterHeight = true;
                    }
                  }
                }, 15);
              }
            } else {
              _this.beforePopupOpen = false;
              _this.destroyPopup();
            }
          });
          if (_this.allowResize && (_this.getModuleName() !== "dropdownlist" || !(Browser.isDevice && _this.isDeviceFullScreen && _this.allowFiltering))) {
            var resizePaddingBottom = 16;
            _this.resizer = _this.createElement("div", {
              id: _this.element.id + "_resize-popup",
              className: dropDownListClasses.resizeIcon
              // Adding class for styling
            });
            if (_this.list && _this.list.parentElement) {
              _this.list.parentElement.classList.add("e-resize");
              if (_this.popupHeight.toString().toLowerCase() !== "auto" && initialPopupHeight >= parseInt(_this.popupHeight.toString(), 10) - 2) {
                _this.list.parentElement.style.height = "100%";
              }
              _this.list.parentElement.style.paddingBottom = _this.getModuleName() === "dropdownlist" && _this.allowFiltering && _this.searchBoxHeight ? (_this.searchBoxHeight + resizePaddingBottom).toString() + "px" : resizePaddingBottom.toString() + "px";
              if (_this.header || _this.footer || _this.itemTemplate) {
                _this.list.parentElement.style.paddingBottom = (parseInt(_this.list.parentElement.style.maxHeight, 10) - parseInt(_this.list.style.maxHeight, 10) + resizePaddingBottom).toString() + "px";
              }
              _this.list.parentElement.appendChild(_this.resizer);
              _this.list.parentElement.style.width = _this.resizeWidth + "px";
              _this.list.parentElement.style.height = _this.resizeHeight + "px";
              _this.list.parentElement.style.maxHeight = _this.resizeHeight + "px";
              _this.list.style.maxHeight = _this.resizeHeight + "px";
            }
            EventHandler.add(_this.resizer, "mousedown", _this.startResizing, _this);
            EventHandler.add(_this.resizer, "touchstart", _this.startResizing, _this);
          }
        } else {
          _this.beforePopupOpen = false;
        }
      });
    };
    DropDownList2.prototype.checkCollision = function(popupEle) {
      if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === "dropdownlist" || this.isDropDownClick)) {
        var collision = isCollide(popupEle);
        if (collision.length > 0) {
          popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + "px";
        }
        this.popupObj.resolveCollision();
      }
    };
    DropDownList2.prototype.getOffsetValue = function(popupEle) {
      var popupStyles = getComputedStyle(popupEle);
      var borderTop = parseInt(popupStyles.borderTopWidth, 10);
      var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);
      return this.setPopupPosition(borderTop + borderBottom);
    };
    DropDownList2.prototype.createPopup = function(element2, offsetValue, left) {
      var _this = this;
      this.popupObj = new Popup(element2, {
        width: this.setWidth(),
        targetType: "relative",
        relateTo: this.inputWrapper.container,
        collision: this.enableRtl ? { X: "fit", Y: "flip" } : { X: "flip", Y: "flip" },
        offsetY: offsetValue,
        enableRtl: this.enableRtl,
        offsetX: left,
        position: this.enableRtl ? { X: "right", Y: "bottom" } : { X: "left", Y: "bottom" },
        zIndex: this.zIndex,
        close: function() {
          if (!_this.isDocumentClick) {
            _this.focusDropDown();
          }
          if (_this.isReact) {
            _this.clearTemplate(["headerTemplate", "footerTemplate"]);
          }
          _this.isNotSearchList = false;
          _this.isDocumentClick = false;
          _this.destroyPopup();
          if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list.length > 0) {
            _this.isActive = true;
            if (_this.isReactTemplateUpdate && _this.isReact && _this.itemTemplate && !_this.enableVirtualization) {
              _this.actionCompleteData.ulElement = _this.renderItems(_this.actionCompleteData.list, _this.fields);
              _this.isReactTemplateUpdate = false;
            }
            if (_this.enableVirtualization) {
              _this.onActionComplete(_this.ulElement, _this.listData, null, true);
            } else {
              _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);
            }
          } else if (_this.enableVirtualization) {
            _this.focusIndexItem();
          }
        },
        open: function() {
          EventHandler.add(document, "mousedown", _this.onDocumentClick, _this);
          _this.isPopupOpen = true;
          var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement && _this.actionCompleteData.ulElement.querySelector("li");
          var ulElement = _this.list.querySelector("ul li");
          if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName("e-item-focus")[0])) {
            attributes(_this.targetElement(), { "aria-activedescendant": _this.ulElement.getElementsByClassName("e-item-focus")[0].id });
          } else if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName("e-active")[0])) {
            attributes(_this.targetElement(), { "aria-activedescendant": _this.ulElement.getElementsByClassName("e-active")[0].id });
          }
          if (_this.isFiltering() && _this.itemTemplate && _this.element.tagName === _this.getNgDirective() && (actionList && ulElement && actionList.textContent !== ulElement.textContent) && _this.element.tagName !== "EJS-COMBOBOX") {
            _this.cloneElements();
          }
          if (_this.isFilterLayout()) {
            removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);
            _this.isFilterFocus = true;
            _this.filterInput.focus();
            if (_this.inputWrapper.clearButton) {
              addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
            }
          }
          _this.activeStateChange();
        },
        targetExitViewport: function() {
          if (!Browser.isDevice) {
            _this.hidePopup();
          }
        }
      });
    };
    DropDownList2.prototype.isEmptyList = function() {
      return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;
    };
    DropDownList2.prototype.getFocusElement = function() {
    };
    DropDownList2.prototype.isFilterLayout = function() {
      return this.getModuleName() === "dropdownlist" && this.allowFiltering;
    };
    DropDownList2.prototype.scrollHandler = function() {
      if (Browser.isDevice && (this.getModuleName() === "dropdownlist" && !this.isFilterLayout() || this.getModuleName() === "combobox" && !this.allowFiltering && this.isDropDownClick)) {
        if (this.element && !this.isElementInViewport(this.element)) {
          this.hidePopup();
        }
      }
    };
    DropDownList2.prototype.isElementInViewport = function(element2) {
      var elementRect2 = element2.getBoundingClientRect();
      return elementRect2.top >= 0 && elementRect2.left >= 0 && elementRect2.bottom <= window.innerHeight && elementRect2.right <= window.innerWidth;
    };
    DropDownList2.prototype.setSearchBoxPosition = function() {
      var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;
      this.popupObj.element.style.maxHeight = "100%";
      this.popupObj.element.style.width = "100%";
      this.list.style.maxHeight = window.innerHeight - searchBoxHeight + "px";
      this.list.style.height = window.innerHeight - searchBoxHeight + "px";
      var clearElement = this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon);
      detach(this.filterInput);
      clearElement.parentElement.insertBefore(this.filterInput, clearElement);
    };
    DropDownList2.prototype.setPopupPosition = function(border) {
      var offsetValue;
      var popupOffset = border;
      var selectedLI = this.list.querySelector("." + dropDownListClasses.focus) || this.selectedLI;
      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];
      var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];
      var liHeight = firstItem.getBoundingClientRect().height;
      this.listItemHeight = liHeight + parseInt(window.getComputedStyle(firstItem).marginBottom, 10);
      var listHeight = this.list.offsetHeight / 2;
      var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;
      var lastItemOffsetValue = lastItem.offsetTop;
      if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {
        var count = this.list.offsetHeight / liHeight;
        var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);
        offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;
        this.list.scrollTop = selectedLI.offsetTop;
      } else if (height > listHeight && !this.enableVirtualization) {
        offsetValue = listHeight - liHeight / 2;
        this.list.scrollTop = height - listHeight + liHeight / 2;
      } else {
        offsetValue = height;
      }
      var inputHeight = this.inputWrapper.container.offsetHeight;
      offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;
      return -offsetValue;
    };
    DropDownList2.prototype.setWidth = function() {
      var width = formatUnit(this.popupWidth);
      if (width.indexOf("%") > -1) {
        var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;
        width = inputWidth.toString() + "px";
      }
      if (Browser.isDevice && width.indexOf("px") > -1 && (!this.allowFiltering && (this.getModuleName() === "dropdownlist" || this.isDropDownClick && this.getModuleName() === "combobox"))) {
        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];
        width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + "px";
      }
      return width;
    };
    DropDownList2.prototype.scrollBottom = function(isInitial, isInitialSelection, keyAction) {
      var _this = this;
      if (isInitialSelection === void 0) {
        isInitialSelection = false;
      }
      if (keyAction === void 0) {
        keyAction = null;
      }
      if (isNullOrUndefined(this.selectedLI) && this.enableVirtualization) {
        this.selectedLI = this.list.querySelector("." + dropDownBaseClasses.li);
        if (!isNullOrUndefined(this.selectedLI) && this.selectedLI.classList.contains("e-virtual-list")) {
          this.selectedLI = this.liCollections[this.skeletonCount];
        }
      }
      if (!isNullOrUndefined(this.selectedLI)) {
        var selectedListMargin = this.selectedLI && !isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom, 10)) ? parseInt(window.getComputedStyle(this.selectedLI).marginBottom, 10) : 0;
        this.isUpwardScrolling = false;
        var virtualListCount = this.list.querySelectorAll(".e-virtual-list").length;
        var lastElementValue = this.list.querySelector("li:last-of-type") ? this.list.querySelector("li:last-of-type").getAttribute("data-value") : null;
        var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * (this.selectedLI.offsetHeight + selectedListMargin) : this.selectedLI.offsetTop;
        var currentOffset = this.list.offsetHeight;
        var nextBottom = selectedLiOffsetTop - virtualListCount * (this.selectedLI.offsetHeight + selectedListMargin) + (this.selectedLI.offsetHeight + selectedListMargin) - this.list.scrollTop;
        var nextOffset = this.list.scrollTop + nextBottom - currentOffset;
        var isScrollerCHanged = false;
        nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10);
        var boxRange = selectedLiOffsetTop - virtualListCount * (this.selectedLI.offsetHeight + selectedListMargin) + (this.selectedLI.offsetHeight + selectedListMargin) - this.list.scrollTop;
        boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;
        if (this.activeIndex === 0 && !this.enableVirtualization) {
          this.list.scrollTop = 0;
          isScrollerCHanged = this.isKeyBoardAction;
        } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {
          var currentElementValue = this.selectedLI ? this.selectedLI.getAttribute("data-value") : null;
          var liCount = keyAction === "pageDown" ? this.getPageCount() - 2 : 1;
          if (!this.enableVirtualization || this.isKeyBoardAction || isInitialSelection) {
            if (this.isKeyBoardAction && this.enableVirtualization && lastElementValue && currentElementValue === lastElementValue && keyAction !== "end" && !this.isVirtualScrolling) {
              this.isPreventKeyAction = true;
              if (this.enableVirtualization && this.itemTemplate) {
                this.list.scrollTop += nextOffset;
              } else {
                if (this.enableVirtualization) {
                  liCount = keyAction === "pageDown" ? this.getPageCount() + 1 : liCount;
                }
                this.list.scrollTop += (this.selectedLI.offsetHeight + selectedListMargin) * liCount;
              }
              this.isPreventKeyAction = this.IsScrollerAtEnd() ? false : this.isPreventKeyAction;
              this.isKeyBoardAction = false;
              this.isPreventScrollAction = false;
            } else if (this.enableVirtualization && keyAction === "end") {
              this.isPreventKeyAction = false;
              this.isKeyBoardAction = false;
              this.isPreventScrollAction = false;
              this.list.scrollTop = this.list.scrollHeight;
            } else {
              if (keyAction === "pageDown" && this.enableVirtualization && !this.isVirtualScrolling) {
                this.isPreventKeyAction = false;
                this.isKeyBoardAction = false;
                this.isPreventScrollAction = false;
              }
              this.list.scrollTop = nextOffset;
            }
          } else {
            this.list.scrollTop = this.virtualListInfo && this.virtualListInfo.startIndex ? isInitial && this.virtualListInfo.startIndex ? this.virtualListInfo.startIndex * this.listItemHeight + this.listItemHeight * 2 : this.virtualListInfo.startIndex * this.listItemHeight : 0;
          }
          isScrollerCHanged = this.isKeyBoardAction;
        }
        this.isKeyBoardAction = isScrollerCHanged;
        if (this.enableVirtualization && this.fields.groupBy && this.fixedHeaderElement && keyAction === "down") {
          setTimeout(function() {
            _this.scrollStop(null, true);
          }, 100);
        }
      }
    };
    DropDownList2.prototype.scrollTop = function(keyAction) {
      if (keyAction === void 0) {
        keyAction = null;
      }
      if (!isNullOrUndefined(this.selectedLI)) {
        var selectedListMargin = this.selectedLI && !isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom, 10)) ? parseInt(window.getComputedStyle(this.selectedLI).marginBottom, 10) : 0;
        var virtualListCount = this.list.querySelectorAll(".e-virtual-list").length;
        var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * (this.selectedLI.offsetHeight + selectedListMargin) : this.selectedLI.offsetTop;
        var nextOffset = selectedLiOffsetTop - virtualListCount * (this.selectedLI.offsetHeight + selectedListMargin) - this.list.scrollTop;
        var firstElementValue = this.list.querySelector("li.e-list-item:not(.e-virtual-list)") ? this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value") : null;
        nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;
        var boxRange = selectedLiOffsetTop - virtualListCount * (this.selectedLI.offsetHeight + selectedListMargin) + (this.selectedLI.offsetHeight + selectedListMargin) - this.list.scrollTop;
        var isPageUpKeyAction = this.enableVirtualization && this.getModuleName() === "autocomplete" && nextOffset <= 0;
        if (this.activeIndex === 0 && !this.enableVirtualization) {
          this.list.scrollTop = 0;
        } else if (nextOffset < 0 || isPageUpKeyAction) {
          var currentElementValue = this.selectedLI ? this.selectedLI.getAttribute("data-value") : null;
          var liCount = keyAction === "pageUp" ? this.getPageCount() - 2 : 1;
          if (this.enableVirtualization) {
            liCount = keyAction === "pageUp" ? this.getPageCount() : liCount;
          }
          if (this.enableVirtualization && this.isKeyBoardAction && firstElementValue && currentElementValue === firstElementValue && keyAction !== "home" && !this.isVirtualScrolling) {
            this.isUpwardScrolling = true;
            this.isPreventKeyAction = true;
            this.list.scrollTop -= (this.selectedLI.offsetHeight + selectedListMargin) * liCount;
            this.isPreventKeyAction = this.list.scrollTop !== 0 ? this.isPreventKeyAction : false;
            this.isKeyBoardAction = false;
            this.isPreventScrollAction = false;
          } else if (this.enableVirtualization && keyAction === "home") {
            this.isPreventScrollAction = false;
            this.isPreventKeyAction = true;
            this.isKeyBoardAction = false;
            this.list.scrollTo(0, 0);
          } else {
            if (keyAction === "pageUp" && this.enableVirtualization && !this.isVirtualScrolling) {
              this.isPreventKeyAction = false;
              this.isKeyBoardAction = false;
              this.isPreventScrollAction = false;
            }
            this.list.scrollTop = this.list.scrollTop + nextOffset;
          }
        } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {
          this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);
        }
      }
    };
    DropDownList2.prototype.IsScrollerAtEnd = function() {
      return this.list && this.list.scrollTop + this.list.clientHeight >= this.list.scrollHeight;
    };
    DropDownList2.prototype.isEditTextBox = function() {
      return false;
    };
    DropDownList2.prototype.isFiltering = function() {
      return this.allowFiltering;
    };
    DropDownList2.prototype.isPopupButton = function() {
      return true;
    };
    DropDownList2.prototype.setScrollPosition = function(e) {
      this.isPreventScrollAction = true;
      if (!isNullOrUndefined(e)) {
        switch (e.action) {
          case "pageDown":
          case "down":
          case "end":
            this.isKeyBoardAction = true;
            this.scrollBottom(false, false, e.action);
            break;
          default:
            this.isKeyBoardAction = e.action === "up" || e.action === "pageUp" || e.action === "open";
            this.scrollTop(e.action);
            break;
        }
      } else {
        this.scrollBottom(true);
      }
      this.isKeyBoardAction = false;
    };
    DropDownList2.prototype.clearText = function() {
      this.filterInput.value = this.typedString = "";
      this.searchLists(null);
      if (this.enableVirtualization) {
        this.list.scrollTop = 0;
        this.totalItemCount = this.dataCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;
        if (this.list.getElementsByClassName("e-virtual-ddl")[0]) {
          this.list.getElementsByClassName("e-virtual-ddl")[0].style = this.GetVirtualTrackHeight();
        }
        this.getSkeletonCount();
        this.UpdateSkeleton();
        this.liCollections = this.list.querySelectorAll(".e-list-item");
        if (this.list.getElementsByClassName("e-virtual-ddl-content")[0]) {
          this.list.getElementsByClassName("e-virtual-ddl-content")[0].style = this.getTransformValues();
        }
      }
    };
    DropDownList2.prototype.setEleWidth = function(width) {
      if (!isNullOrUndefined(width)) {
        if (typeof width === "number") {
          this.inputWrapper.container.style.width = formatUnit(width);
        } else if (typeof width === "string") {
          this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);
        }
      }
    };
    DropDownList2.prototype.closePopup = function(delay2, e) {
      var _this = this;
      var isFilterValue = !isNullOrUndefined(this.filterInput) && !isNullOrUndefined(this.filterInput.value) && this.filterInput.value !== "";
      this.getModuleName() === "combobox" ? this.typedString : null;
      this.isTyped = false;
      this.isVirtualTrackHeight = false;
      if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {
        return;
      }
      this.keyboardEvent = null;
      EventHandler.remove(document, "mousedown", this.onDocumentClick);
      this.isActive = false;
      this.isDropDownClick = false;
      this.preventAutoFill = false;
      var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);
      for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {
        var element2 = scrollableParentElements_1[_i];
        EventHandler.remove(element2, "scroll", this.scrollHandler);
      }
      if (Browser.isDevice && this.isFilterLayout() && this.isDeviceFullScreen) {
        removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);
      }
      if (this.isFilterLayout()) {
        if (!Browser.isDevice) {
          this.searchKeyModule.destroy();
          if (this.clearIconElement) {
            EventHandler.remove(this.clearIconElement, "click", this.clearText);
          }
        }
        if (this.backIconElement) {
          EventHandler.remove(this.backIconElement, "click", this.clickOnBackIcon);
          EventHandler.remove(this.clearIconElement, "click", this.clearText);
        }
        if (!isNullOrUndefined(this.filterInput)) {
          EventHandler.remove(this.filterInput, "input", this.onInput);
          EventHandler.remove(this.filterInput, "keyup", this.onFilterUp);
          EventHandler.remove(this.filterInput, "keydown", this.onFilterDown);
          EventHandler.remove(this.filterInput, "blur", this.onBlurHandler);
          EventHandler.remove(this.filterInput, "paste", this.pasteHandler);
        }
        if (this.allowFiltering && this.getModuleName() === "dropdownlist") {
          this.filterInput.removeAttribute("aria-activedescendant");
          this.filterInput.removeAttribute("aria-disabled");
          this.filterInput.removeAttribute("role");
          this.filterInput.removeAttribute("autocomplete");
          this.filterInput.removeAttribute("autocapitalize");
          this.filterInput.removeAttribute("spellcheck");
        }
        this.filterInput = null;
      }
      attributes(this.targetElement(), { "aria-expanded": "false" });
      this.inputElement.setAttribute("aria-expanded", "false");
      this.targetElement().removeAttribute("aria-owns");
      this.targetElement().removeAttribute("aria-activedescendant");
      this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);
      if (this.isFiltering()) {
        this.actionCompleteData.isUpdated = false;
      }
      if (this.enableVirtualization) {
        if (this.value == null || this.isTyped) {
          this.viewPortInfo.endIndex = this.viewPortInfo && this.viewPortInfo.endIndex > 0 ? this.viewPortInfo.endIndex : this.itemCount;
          if (this.getModuleName() === "autocomplete" || this.getModuleName() === "dropdownlist" && !isNullOrUndefined(this.typedString) && this.typedString !== "" || this.getModuleName() === "combobox" && this.allowFiltering && !isNullOrUndefined(this.typedString) && this.typedString !== "") {
            this.checkAndResetCache();
          }
        } else if (this.getModuleName() === "autocomplete") {
          this.checkAndResetCache();
        }
        if ((this.getModuleName() === "dropdownlist" || this.getModuleName() === "combobox") && !(this.skeletonCount === 0)) {
          this.getSkeletonCount(true);
        }
      }
      this.beforePopupOpen = false;
      var animModel = {
        name: "FadeOut",
        duration: 100,
        delay: delay2 ? delay2 : 0
      };
      var popupInstance = this.popupObj;
      var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };
      this.trigger("close", eventArgs, function(eventArgs2) {
        if (_this.getModuleName() === "dropdownlist") {
          Input.destroy({
            element: _this.filterInput,
            floatLabelType: _this.floatLabelType,
            properties: { placeholder: _this.filterBarPlaceholder },
            buttons: _this.clearIconElement
          }, _this.clearIconElement);
        }
        _this.filterInputObj = null;
        if (!isNullOrUndefined(_this.popupObj) && !isNullOrUndefined(_this.popupObj.element.querySelector(".e-fixed-head"))) {
          var fixedHeader = _this.popupObj.element.querySelector(".e-fixed-head");
          fixedHeader.parentNode.removeChild(fixedHeader);
          _this.fixedHeaderElement = null;
        }
        if (!eventArgs2.cancel) {
          if (_this.getModuleName() === "autocomplete") {
            _this.rippleFun();
          }
          if (_this.isPopupOpen) {
            _this.popupObj.hide(new Animation$1(eventArgs2.animation));
          } else {
            _this.destroyPopup();
          }
        }
      });
      if (Browser.isDevice && !eventArgs.cancel && this.popupObj.element.classList.contains("e-wide-popup")) {
        this.popupObj.element.classList.remove("e-wide-popup");
      }
      var dataSourceCount;
      if (this.dataSource instanceof DataManager) {
        dataSourceCount = this.virtualGroupDataSource && this.virtualGroupDataSource.length ? this.virtualGroupDataSource.length : 0;
      } else {
        dataSourceCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;
      }
      if (this.enableVirtualization && this.isFiltering() && isFilterValue && this.totalItemCount !== dataSourceCount) {
        this.updateInitialData();
        this.checkAndResetCache();
      }
    };
    DropDownList2.prototype.updateInitialData = function() {
      var currentData = this.selectData;
      if (isNullOrUndefined(currentData)) {
        return;
      }
      var ulElement = this.renderItems(currentData, this.fields);
      this.list.scrollTop = 0;
      this.virtualListInfo = {
        currentPageNumber: null,
        direction: null,
        sentinelInfo: {},
        offsets: {},
        startIndex: 0,
        endIndex: this.itemCount
      };
      if (this.getModuleName() === "combobox") {
        this.typedString = "";
      }
      this.previousStartIndex = 0;
      this.previousEndIndex = 0;
      if (this.dataSource instanceof DataManager) {
        if (this.remoteDataCount >= 0) {
          this.totalItemCount = this.dataCount = this.remoteDataCount;
        } else {
          this.resetList(this.dataSource);
        }
      } else {
        this.totalItemCount = this.dataCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;
      }
      if (this.list.getElementsByClassName("e-virtual-ddl")[0]) {
        this.list.getElementsByClassName("e-virtual-ddl")[0].style = this.GetVirtualTrackHeight();
      } else if (!this.list.querySelector(".e-virtual-ddl") && this.list.parentElement) {
        var virualElement = this.createElement("div", {
          id: this.element.id + "_popup",
          className: "e-virtual-ddl"
        });
        virualElement.style.cssText = this.GetVirtualTrackHeight();
        this.list.parentElement.querySelector(".e-dropdownbase").appendChild(virualElement);
      }
      if (this.getModuleName() !== "autocomplete" && this.totalItemCount !== 0 && this.totalItemCount > this.itemCount * 2) {
        this.getSkeletonCount();
      }
      this.UpdateSkeleton();
      this.listData = currentData;
      this.updateActionCompleteDataValues(ulElement, currentData);
      this.liCollections = this.list.querySelectorAll(".e-list-item");
      if (this.list.getElementsByClassName("e-virtual-ddl-content")[0]) {
        this.list.getElementsByClassName("e-virtual-ddl-content")[0].style = this.getTransformValues();
      }
    };
    DropDownList2.prototype.destroyPopup = function() {
      this.isPopupOpen = false;
      this.isFilterFocus = false;
      this.inputElement.removeAttribute("aria-controls");
      if (this.popupObj) {
        if (this.resizer) {
          EventHandler.remove(this.resizer, "mousedown", this.startResizing);
          EventHandler.remove(this.resizer, "touchstart", this.startResizing);
        }
        this.popupObj.destroy();
        detach(this.popupObj.element);
      }
    };
    DropDownList2.prototype.clickOnBackIcon = function() {
      this.hidePopup();
      this.focusIn();
    };
    DropDownList2.prototype.render = function() {
      this.preselectedIndex = !isNullOrUndefined(this.index) ? this.index : null;
      if (this.element.tagName === "INPUT") {
        this.inputElement = this.element;
        if (isNullOrUndefined(this.inputElement.getAttribute("role"))) {
          this.inputElement.setAttribute("role", "combobox");
        }
        if (isNullOrUndefined(this.inputElement.getAttribute("type"))) {
          this.inputElement.setAttribute("type", "text");
        }
        this.inputElement.setAttribute("aria-expanded", "false");
      } else {
        this.inputElement = this.createElement("input", { attrs: { role: "combobox", type: "text" } });
        if (this.element.tagName !== this.getNgDirective()) {
          this.element.style.display = "none";
        }
        this.element.parentElement.insertBefore(this.inputElement, this.element);
        this.preventTabIndex(this.inputElement);
      }
      var updatedCssClassValues = this.cssClass;
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        updatedCssClassValues = this.cssClass.replace(/\s+/g, " ").trim();
      }
      if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
        this.enabled = false;
      }
      this.inputWrapper = Input.createInput({
        element: this.inputElement,
        buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,
        floatLabelType: this.floatLabelType,
        properties: {
          readonly: this.getModuleName() === "dropdownlist" ? true : this.readonly,
          placeholder: this.placeholder,
          cssClass: updatedCssClassValues,
          enabled: this.enabled,
          enableRtl: this.enableRtl,
          showClearButton: this.showClearButton
        }
      }, this.createElement);
      if (this.element.tagName === this.getNgDirective()) {
        this.element.appendChild(this.inputWrapper.container);
      } else {
        this.inputElement.parentElement.insertBefore(this.element, this.inputElement);
      }
      this.hiddenElement = this.createElement("select", {
        attrs: {
          "aria-hidden": "true",
          "tabindex": "-1",
          "class": dropDownListClasses.hiddenElement
        }
      });
      prepend([this.hiddenElement], this.inputWrapper.container);
      if (!this.hiddenElement.hasAttribute("aria-label")) {
        this.hiddenElement.setAttribute("aria-label", this.getModuleName());
      }
      this.validationAttribute(this.element, this.hiddenElement);
      this.setReadOnly();
      this.setFields();
      this.inputWrapper.container.style.width = formatUnit(this.width);
      this.inputWrapper.container.classList.add("e-ddl");
      if (this.floatLabelType !== "Never") {
        Input.calculateWidth(this.inputElement, this.inputWrapper.container);
      }
      if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0] && this.floatLabelType !== "Never") {
        this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");
      }
      this.wireEvent();
      this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0";
      this.element.removeAttribute("tabindex");
      var id = this.element.getAttribute("id") ? this.element.getAttribute("id") : getUniqueID("ej2_dropdownlist");
      this.element.id = id;
      this.hiddenElement.id = id + "_hidden";
      this.targetElement().setAttribute("tabindex", this.tabIndex);
      if ((this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") && !this.readonly) {
        if (!this.inputElement.hasAttribute("aria-label")) {
          this.inputElement.setAttribute("aria-label", this.getModuleName());
        }
      } else if (this.getModuleName() === "dropdownlist") {
        if (!this.targetElement().hasAttribute("aria-label")) {
          attributes(this.targetElement(), { "aria-label": this.getModuleName() });
        }
        if (!this.inputElement.hasAttribute("aria-label")) {
          this.inputElement.setAttribute("aria-label", this.getModuleName());
        }
        this.inputElement.setAttribute("aria-expanded", "false");
      }
      attributes(this.targetElement(), this.getAriaAttributes());
      this.updateDataAttribute(this.htmlAttributes);
      this.setHTMLAttributes();
      if (this.targetElement() === this.inputElement) {
        this.inputElement.removeAttribute("aria-labelledby");
      }
      if (this.value !== null || this.activeIndex !== null || this.text !== null) {
        if (this.enableVirtualization) {
          this.listItemHeight = this.getListHeight();
          this.getSkeletonCount();
          this.updateVirtualizationProperties(this.itemCount, this.allowFiltering);
          if (this.index !== null) {
            this.activeIndex = this.index + this.skeletonCount;
          }
        }
        this.initValue();
        this.selectedValueInfo = this.viewPortInfo;
        if (this.enableVirtualization) {
          this.activeIndex = this.activeIndex + this.skeletonCount;
        }
      } else if (this.element.tagName === "SELECT" && this.element.options[0]) {
        var selectElement = this.element;
        this.value = this.allowObjectBinding ? this.getDataByValue(selectElement.options[selectElement.selectedIndex].value) : selectElement.options[selectElement.selectedIndex].value;
        this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;
        this.initValue();
      }
      this.setEnabled();
      this.preventTabIndex(this.element);
      if (!this.enabled) {
        this.targetElement().tabIndex = -1;
      }
      this.initial = false;
      this.element.style.opacity = "";
      this.inputElement.onselect = function(e) {
        e.stopImmediatePropagation();
      };
      this.inputElement.onchange = function(e) {
        e.stopImmediatePropagation();
      };
      if (this.element.hasAttribute("autofocus")) {
        this.focusIn();
      }
      if (!isNullOrUndefined(this.text)) {
        this.inputElement.setAttribute("value", this.text);
      }
      if (this.element.hasAttribute("data-val")) {
        this.element.setAttribute("data-val", "false");
      }
      var floatLabelElement = this.inputWrapper.container.getElementsByClassName("e-float-text")[0];
      if (!isNullOrUndefined(this.element.id) && this.element.id !== "" && !isNullOrUndefined(floatLabelElement)) {
        floatLabelElement.id = "label_" + this.element.id.replace(/ /g, "_");
        attributes(this.inputElement, { "aria-labelledby": floatLabelElement.id });
      }
      this.renderComplete();
      this.listItemHeight = this.getListHeight();
      this.getSkeletonCount();
      if (this.enableVirtualization) {
        this.updateVirtualizationProperties(this.itemCount, this.allowFiltering);
      }
      this.viewPortInfo.startIndex = this.virtualItemStartIndex = 0;
      this.viewPortInfo.endIndex = this.virtualItemEndIndex = this.viewPortInfo.startIndex > 0 ? this.viewPortInfo.endIndex : this.itemCount;
    };
    DropDownList2.prototype.getListHeight = function() {
      var listParent = this.createElement("div", {
        className: "e-dropdownbase"
      });
      var item = this.createElement("li", {
        className: "e-list-item"
      });
      var listParentHeight = formatUnit(this.popupHeight);
      listParent.style.height = parseInt(listParentHeight, 10).toString() + "px";
      listParent.appendChild(item);
      document.body.appendChild(listParent);
      this.virtualListHeight = listParent.getBoundingClientRect().height;
      var listItemHeight = Math.ceil(item.getBoundingClientRect().height) + parseInt(window.getComputedStyle(item).marginBottom, 10);
      listParent.remove();
      return listItemHeight;
    };
    DropDownList2.prototype.setFooterTemplate = function(popupEle) {
      var compiledString;
      if (this.footer) {
        if (this.isReact && typeof this.footerTemplate === "function") {
          this.clearTemplate(["footerTemplate"]);
        } else {
          this.footer.innerHTML = "";
        }
      } else {
        this.footer = this.createElement("div");
        addClass([this.footer], dropDownListClasses.footer);
      }
      var footercheck = this.dropdownCompiler(this.footerTemplate);
      if (typeof this.footerTemplate !== "function" && footercheck) {
        compiledString = compile$1(select(this.footerTemplate, document).innerHTML.trim());
      } else {
        compiledString = compile$1(this.footerTemplate);
      }
      var footerCompTemp = compiledString({}, this, "footerTemplate", this.footerTemplateId, this.isStringTemplate, null, this.footer);
      if (footerCompTemp && footerCompTemp.length > 0) {
        append(footerCompTemp, this.footer);
      }
      append([this.footer], popupEle);
    };
    DropDownList2.prototype.setHeaderTemplate = function(popupEle) {
      var compiledString;
      if (this.header) {
        this.header.innerHTML = "";
      } else {
        this.header = this.createElement("div");
        addClass([this.header], dropDownListClasses.header);
      }
      var headercheck = this.dropdownCompiler(this.headerTemplate);
      if (typeof this.headerTemplate !== "function" && headercheck) {
        compiledString = compile$1(select(this.headerTemplate, document).innerHTML.trim());
      } else {
        compiledString = compile$1(this.headerTemplate);
      }
      var headerCompTemp = compiledString({}, this, "headerTemplate", this.headerTemplateId, this.isStringTemplate, null, this.header);
      if (headerCompTemp && headerCompTemp.length) {
        append(headerCompTemp, this.header);
      }
      var contentEle = popupEle.querySelector("div.e-content");
      popupEle.insertBefore(this.header, contentEle);
    };
    DropDownList2.prototype.setEnabled = function() {
      this.element.setAttribute("aria-disabled", this.enabled ? "false" : "true");
    };
    DropDownList2.prototype.setOldText = function(text) {
      this.text = text;
    };
    DropDownList2.prototype.setOldValue = function(value) {
      this.value = value;
    };
    DropDownList2.prototype.refreshPopup = function() {
      if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === "autocomplete")) {
        removeClass([this.popupObj.element], "e-popup-close");
        this.popupObj.refreshPosition(this.inputWrapper.container);
        this.popupObj.resolveCollision();
      }
    };
    DropDownList2.prototype.checkData = function(newProp) {
      if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {
        if (this.list && !this.isReact) {
          this.list.innerHTML = "";
        } else {
          this.list = null;
        }
        this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };
      }
      this.isListSearched = false;
      var isChangeValue = Object.keys(newProp).indexOf("value") !== -1 && isNullOrUndefined(newProp.value);
      var isChangeText = Object.keys(newProp).indexOf("text") !== -1 && isNullOrUndefined(newProp.text);
      if (this.getModuleName() !== "autocomplete" && this.allowFiltering && (isChangeValue || isChangeText)) {
        this.itemData = null;
      }
      if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {
        this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };
        this.actionData = this.actionCompleteData;
      } else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {
        this.actionCompleteData = this.getModuleName() === "combobox" ? { ulElement: null, list: null, isUpdated: false } : this.actionCompleteData;
        this.actionData = this.actionCompleteData;
      }
    };
    DropDownList2.prototype.updateDataSource = function(props, oldProps) {
      if (this.inputElement.value !== "" || !isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) {
        this.clearAll(null, props);
      }
      if (this.fields.groupBy && props.fields && !this.isGroupChecking && this.list) {
        EventHandler.remove(this.list, "scroll", this.setFloatingHeader);
        EventHandler.add(this.list, "scroll", this.setFloatingHeader, this);
      }
      if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) || (props.dataSource instanceof DataManager || !isNullOrUndefined(props) && Array.isArray(props.dataSource) && !isNullOrUndefined(oldProps) && Array.isArray(oldProps.dataSource) && props.dataSource.length !== oldProps.dataSource.length)) {
        this.typedString = "";
        this.resetList(this.dataSource);
      }
      if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {
        this.checkCustomValue();
      }
    };
    DropDownList2.prototype.checkCustomValue = function() {
      var currentValue = this.allowObjectBinding && !isNullOrUndefined(this.value) ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
      this.itemData = this.getDataByValue(currentValue);
      var dataItem = this.getItemData();
      var value = this.allowObjectBinding ? this.itemData : dataItem.value;
      var index = isNullOrUndefined(value) ? null : this.index;
      if (isNullOrUndefined(index) && currentValue === value || this.isAngular) {
        this.setProperties({ "text": dataItem.text ? dataItem.text.toString() : dataItem.text, "value": value });
      } else {
        this.setProperties({ "text": dataItem.text ? dataItem.text.toString() : dataItem.text, "index": index, "value": value });
      }
    };
    DropDownList2.prototype.updateInputFields = function() {
      if (this.getModuleName() === "dropdownlist") {
        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);
      }
    };
    DropDownList2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var _this = this;
      if (!isNullOrUndefined(newProp.dataSource) && !this.isTouched && (isNullOrUndefined(newProp.value) && isNullOrUndefined(newProp.index)) && !isNullOrUndefined(this.preselectedIndex) && !isNullOrUndefined(this.index)) {
        newProp.index = this.index;
      }
      if (!isNullOrUndefined(newProp.value) || !isNullOrUndefined(newProp.index)) {
        this.isTouched = true;
      }
      if (this.getModuleName() === "dropdownlist") {
        this.checkData(newProp);
        this.setUpdateInitial(["fields", "query", "dataSource"], newProp);
      }
      var _loop_1 = function(prop2) {
        switch (prop2) {
          case "query":
          case "dataSource":
            this_1.getSkeletonCount();
            this_1.checkAndResetCache();
            break;
          case "htmlAttributes":
            this_1.setHTMLAttributes();
            break;
          case "width":
            this_1.setEleWidth(newProp.width);
            Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);
            break;
          case "placeholder":
            Input.setPlaceholder(newProp.placeholder, this_1.inputElement);
            break;
          case "filterBarPlaceholder":
            if (this_1.filterInput) {
              Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);
            }
            break;
          case "readonly":
            if (this_1.getModuleName() !== "dropdownlist") {
              Input.setReadonly(newProp.readonly, this_1.inputElement);
            }
            this_1.setReadOnly();
            break;
          case "cssClass":
            this_1.setCssClass(newProp.cssClass, oldProp.cssClass);
            Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);
            break;
          case "enableRtl":
            this_1.setEnableRtl();
            break;
          case "enabled":
            this_1.setEnable();
            break;
          case "text":
            if (this_1.fields.disabled) {
              newProp.text = newProp.text && !this_1.isDisabledItemByIndex(this_1.getIndexByValue(this_1.getValueByText(newProp.text))) ? newProp.text : null;
            }
            if (newProp.text === null) {
              this_1.clearAll();
              break;
            }
            if (this_1.enableVirtualization) {
              this_1.updateValues();
              this_1.updateInputFields();
              this_1.notify("setCurrentViewDataAsync", {
                module: "VirtualScroll"
              });
              break;
            }
            if (!this_1.list) {
              if (this_1.dataSource instanceof DataManager) {
                this_1.initialRemoteRender = true;
              }
              this_1.renderList();
            }
            if (!this_1.initialRemoteRender) {
              var li = this_1.getElementByText(newProp.text);
              if (!this_1.checkValidLi(li)) {
                if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === "autocomplete" && this_1.listData.length > 100) {
                  this_1.setSelectionData(newProp.text, oldProp.text, "text");
                } else if (newProp.text && this_1.dataSource instanceof DataManager) {
                  var listLength_1 = this_1.getItems().length;
                  var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;
                  this_1.typedString = "";
                  this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate$1(checkField, "equal", newProp.text))).then(function(e) {
                    if (e.result.length > 0) {
                      _this.addItem(e.result, listLength_1);
                      _this.updateValues();
                    } else {
                      _this.setOldText(oldProp.text);
                    }
                  });
                } else if (this_1.getModuleName() === "autocomplete") {
                  this_1.setInputValue(newProp, oldProp);
                } else {
                  this_1.setOldText(oldProp.text);
                }
              }
              this_1.updateInputFields();
            }
            break;
          case "value":
            if (this_1.fields.disabled) {
              newProp.value = newProp.value != null && !this_1.isDisableItemValue(newProp.value) ? newProp.value : null;
            }
            if (newProp.value === null) {
              this_1.clearAll();
              break;
            }
            if (this_1.allowObjectBinding && !isNullOrUndefined(newProp.value) && !isNullOrUndefined(oldProp.value) && this_1.isObjectInArray(newProp.value, [oldProp.value])) {
              return { value: void 0 };
            }
            if (this_1.enableVirtualization) {
              this_1.updateValues();
              this_1.updateInputFields();
              this_1.notify("setCurrentViewDataAsync", {
                module: "VirtualScroll"
              });
              this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;
              break;
            }
            this_1.notify("beforeValueChange", { newProp });
            if (!this_1.list) {
              if (this_1.dataSource instanceof DataManager) {
                this_1.initialRemoteRender = true;
              }
              this_1.renderList();
            }
            if (!this_1.initialRemoteRender) {
              var value = this_1.allowObjectBinding && !isNullOrUndefined(newProp.value) ? getValue(this_1.fields.value ? this_1.fields.value : "", newProp.value) : newProp.value;
              var item = this_1.getElementByValue(value);
              if (!this_1.checkValidLi(item)) {
                if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === "autocomplete" && this_1.listData.length > 100) {
                  this_1.setSelectionData(newProp.value, oldProp.value, "value");
                } else if (newProp.value && this_1.dataSource instanceof DataManager) {
                  var listLength_2 = this_1.getItems().length;
                  var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;
                  this_1.typedString = "";
                  var value_3 = this_1.allowObjectBinding && !isNullOrUndefined(newProp.value) ? getValue(checkField, newProp.value) : newProp.value;
                  this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate$1(checkField, "equal", value_3))).then(function(e) {
                    if (e.result.length > 0) {
                      _this.addItem(e.result, listLength_2);
                      _this.updateValues();
                    } else {
                      _this.setOldValue(oldProp.value);
                    }
                  });
                } else if (this_1.getModuleName() === "autocomplete") {
                  this_1.setInputValue(newProp, oldProp);
                } else {
                  this_1.setOldValue(oldProp.value);
                }
              }
              this_1.updateInputFields();
              this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;
            }
            break;
          case "index":
            if (this_1.fields.disabled) {
              newProp.index = newProp.index != null && !this_1.isDisabledItemByIndex(newProp.index) ? newProp.index : null;
            }
            if (newProp.index === null) {
              this_1.clearAll();
              break;
            }
            if (!this_1.list) {
              if (this_1.dataSource instanceof DataManager) {
                this_1.initialRemoteRender = true;
              }
              this_1.renderList();
            }
            if (!this_1.initialRemoteRender && this_1.liCollections) {
              var element2 = this_1.liCollections[newProp.index];
              if (!this_1.checkValidLi(element2)) {
                if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === "autocomplete" && this_1.listData.length > 100) {
                  this_1.setSelectionData(newProp.index, oldProp.index, "index");
                } else {
                  this_1.index = oldProp.index;
                }
              }
              this_1.updateInputFields();
            }
            break;
          case "footerTemplate":
            if (this_1.popupObj) {
              this_1.setFooterTemplate(this_1.popupObj.element);
            }
            break;
          case "headerTemplate":
            if (this_1.popupObj) {
              this_1.setHeaderTemplate(this_1.popupObj.element);
            }
            break;
          case "valueTemplate":
            if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate !== null) {
              this_1.setValueTemplate();
            }
            break;
          case "allowFiltering":
            if (this_1.allowFiltering) {
              this_1.actionCompleteData = {
                ulElement: this_1.ulElement,
                list: this_1.listData,
                isUpdated: true
              };
              this_1.actionData = this_1.actionCompleteData;
              this_1.updateSelectElementData(this_1.allowFiltering);
            }
            break;
          case "floatLabelType":
            Input.removeFloating(this_1.inputWrapper);
            Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);
            if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0] && this_1.floatLabelType !== "Never") {
              this_1.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
            }
            break;
          case "showClearButton":
            if (!this_1.inputWrapper.clearButton) {
              Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);
              this_1.bindClearEvent();
            }
            break;
          default:
            {
              var ddlProps = this_1.getPropObject(prop2, newProp, oldProp);
              _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);
            }
            break;
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        var state_1 = _loop_1(prop);
        if (typeof state_1 === "object")
          return state_1.value;
      }
    };
    DropDownList2.prototype.checkValidLi = function(element2) {
      if (this.isValidLI(element2)) {
        this.setSelection(element2, null);
        return true;
      }
      return false;
    };
    DropDownList2.prototype.setSelectionData = function(newProp, oldProp, prop) {
      var _this = this;
      var li;
      this.updateListValues = function() {
        if (prop === "text") {
          li = _this.getElementByText(newProp);
          if (!_this.checkValidLi(li)) {
            _this.setOldText(oldProp);
          }
        } else if (prop === "value") {
          var fields = _this.fields.value ? _this.fields.value : "";
          _this.allowObjectBinding && !isNullOrUndefined(newProp) ? getValue(fields, newProp) : newProp;
          li = _this.getElementByValue(newProp);
          if (!_this.checkValidLi(li)) {
            _this.setOldValue(oldProp);
          }
        } else if (prop === "index") {
          li = _this.liCollections[newProp];
          if (!_this.checkValidLi(li)) {
            _this.index = oldProp;
          }
        }
      };
    };
    DropDownList2.prototype.updatePopupState = function() {
      if (this.beforePopupOpen) {
        this.beforePopupOpen = false;
        this.showPopup();
      }
    };
    DropDownList2.prototype.setReadOnly = function() {
      if (this.readonly) {
        addClass([this.inputWrapper.container], ["e-readonly"]);
      } else {
        removeClass([this.inputWrapper.container], ["e-readonly"]);
      }
    };
    DropDownList2.prototype.setInputValue = function(newProp, oldProp) {
    };
    DropDownList2.prototype.setCssClass = function(newClass, oldClass) {
      if (!isNullOrUndefined(oldClass)) {
        oldClass = oldClass.replace(/\s+/g, " ").trim();
      }
      if (!isNullOrUndefined(newClass)) {
        newClass = newClass.replace(/\s+/g, " ").trim();
      }
      Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);
      if (this.popupObj) {
        Input.setCssClass(newClass, [this.popupObj.element], oldClass);
      }
    };
    DropDownList2.prototype.getModuleName = function() {
      return "dropdownlist";
    };
    DropDownList2.prototype.showPopup = function(e) {
      if (!this.enabled) {
        return;
      }
      this.firstItem = this.dataSource && this.dataSource.length > 0 ? this.dataSource[0] : null;
      if (this.isReact && this.getModuleName() === "combobox" && this.itemTemplate && this.isCustomFilter && this.isAddNewItemTemplate) {
        this.renderList();
        this.isAddNewItemTemplate = false;
      }
      if (this.isFiltering() && this.dataSource instanceof DataManager && this.actionData.list !== this.actionCompleteData.list && this.actionData.list && this.actionData.ulElement) {
        this.actionCompleteData = this.actionData;
        this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);
      }
      if (this.beforePopupOpen) {
        this.refreshPopup();
        return;
      }
      this.beforePopupOpen = true;
      if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {
        this.isActive = true;
        this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);
      } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll("." + dropDownBaseClasses.li).length <= 0)) {
        if (this.isReact && this.isFiltering() && this.itemTemplate != null) {
          this.isSecondClick = false;
        }
        this.renderList(e);
      }
      if (this.enableVirtualization && this.listData && this.listData.length) {
        if (!isNullOrUndefined(this.value) && (this.getModuleName() === "dropdownlist" || this.getModuleName() === "combobox")) {
          this.removeHover();
        }
        if (!this.beforePopupOpen) {
          this.notify("setCurrentViewDataAsync", {
            module: "VirtualScroll"
          });
        }
      }
      if (this.beforePopupOpen) {
        this.invokeRenderPopup(e);
      }
      if (this.enableVirtualization && !this.allowFiltering && this.selectedValueInfo != null && this.selectedValueInfo.startIndex > 0 && this.value != null) {
        this.notify("dataProcessAsync", {
          module: "VirtualScroll",
          isOpen: true
        });
      }
      if (!this.isSecondClick && !this.isDropDownClick) {
        this.executeCloneElements();
      }
    };
    DropDownList2.prototype.executeCloneElements = function() {
      var proxy = this;
      var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;
      if (this.isReact && this.isFiltering() && this.itemTemplate != null) {
        setTimeout(function() {
          proxy.cloneElements();
          proxy.isSecondClick = proxy.isReact && proxy.isFiltering() && proxy.dataSource instanceof DataManager && !proxy.list.querySelector("ul") ? false : true;
        }, duration);
      }
    };
    DropDownList2.prototype.invokeRenderPopup = function(e) {
      if (Browser.isDevice && this.isFilterLayout()) {
        var proxy_2 = this;
        window.onpopstate = function() {
          proxy_2.hidePopup();
        };
        history.pushState({}, "");
      }
      if (!isNullOrUndefined(this.list) && (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData))) {
        this.renderPopup(e);
      }
    };
    DropDownList2.prototype.renderHightSearch = function() {
    };
    DropDownList2.prototype.hidePopup = function(e) {
      if (this.isEscapeKey && this.getModuleName() === "dropdownlist") {
        if (!isNullOrUndefined(this.inputElement)) {
          Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);
        }
        this.isEscapeKey = false;
        if (!isNullOrUndefined(this.index)) {
          var value = this.allowObjectBinding ? getValue(this.fields.value ? this.fields.value : "", this.value) : this.value;
          var element2 = this.findListElement(this.ulElement, "li", "data-value", value);
          this.selectedLI = this.liCollections[this.index] || element2;
          if (this.selectedLI) {
            this.updateSelectedItem(this.selectedLI, null, true);
            if (this.valueTemplate && this.itemData !== null) {
              this.setValueTemplate();
            }
          }
        } else {
          this.resetSelection();
        }
      }
      this.isVirtualTrackHeight = false;
      this.customFilterQuery = null;
      this.closePopup(0, e);
      var dataItem = this.getItemData();
      var isSelectVal = !isNullOrUndefined(this.selectedLI);
      if (isSelectVal && this.enableVirtualization && this.selectedLI.classList) {
        isSelectVal = this.selectedLI.classList.contains("e-active");
      }
      if (this.inputElement && this.inputElement.value === "" && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {
        this.isSelectCustom = false;
        this.clearAll(e);
      }
    };
    DropDownList2.prototype.focusIn = function(e) {
      if (!this.enabled) {
        return;
      }
      if (this.targetElement().classList.contains(dropDownListClasses.disable)) {
        return;
      }
      var isFocused = false;
      if (this.preventFocus && Browser.isDevice) {
        this.inputWrapper.container.tabIndex = 1;
        this.inputWrapper.container.focus();
        this.preventFocus = false;
        isFocused = true;
      }
      if (!isFocused) {
        this.targetElement().focus();
      }
      addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);
      this.onFocus(e);
      if (this.floatLabelType !== "Never") {
        Input.calculateWidth(this.inputElement, this.inputWrapper.container);
      }
    };
    DropDownList2.prototype.focusOut = function(e) {
      if (!this.enabled) {
        return;
      }
      if (!this.enableVirtualization && (this.getModuleName() === "combobox" || this.getModuleName() === "autocomplete")) {
        this.isTyped = true;
      }
      this.hidePopup(e);
      if (this.targetElement()) {
        this.targetElement().blur();
      }
      removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);
      if (this.floatLabelType !== "Never") {
        Input.calculateWidth(this.inputElement, this.inputWrapper.container);
      }
    };
    DropDownList2.prototype.disableItem = function(item) {
      if (this.fields.disabled) {
        if (!this.list) {
          this.renderList();
        }
        var itemIndex = -1;
        if (this.liCollections && this.liCollections.length > 0 && this.listData && this.fields.disabled) {
          if (typeof item === "string") {
            itemIndex = this.getIndexByValue(item);
          } else if (typeof item === "object") {
            if (item instanceof HTMLLIElement) {
              for (var index = 0; index < this.liCollections.length; index++) {
                if (this.liCollections[index] === item) {
                  itemIndex = this.getIndexByValue(item.getAttribute("data-value"));
                  break;
                }
              }
            } else {
              var value = JSON.parse(JSON.stringify(item))[this.fields.value];
              for (var index = 0; index < this.listData.length; index++) {
                if (JSON.parse(JSON.stringify(this.listData[index]))[this.fields.value] === value) {
                  itemIndex = this.getIndexByValue(value);
                  break;
                }
              }
            }
          } else {
            itemIndex = item;
          }
          var isValidIndex = itemIndex < this.liCollections.length && itemIndex > -1;
          if (isValidIndex && !JSON.parse(JSON.stringify(this.listData[itemIndex]))[this.fields.disabled]) {
            var li = this.liCollections[itemIndex];
            if (li) {
              this.disableListItem(li);
              var parsedData = JSON.parse(JSON.stringify(this.listData[itemIndex]));
              parsedData[this.fields.disabled] = true;
              this.listData[itemIndex] = parsedData;
              this.dataSource = this.listData;
              if (li.classList.contains(dropDownListClasses.focus)) {
                this.removeFocus();
              }
              if (li.classList.contains(dropDownListClasses.selected)) {
                this.clear();
              }
            }
          }
        }
      }
    };
    DropDownList2.prototype.destroy = function() {
      this.isActive = false;
      if (this.showClearButton) {
        this.clearButton = document.getElementsByClassName("e-clear-icon")[0];
      }
      resetIncrementalSearchValues(this.element.id);
      if (this.isReact) {
        this.clearTemplate();
      }
      this.hidePopup();
      if (this.popupObj) {
        this.popupObj.hide();
      }
      this.unWireEvent();
      if (this.list) {
        this.unWireListEvents();
      }
      if (this.element && !this.element.classList.contains("e-" + this.getModuleName())) {
        return;
      }
      if (this.inputElement) {
        var attrArray = [
          "readonly",
          "aria-disabled",
          "placeholder",
          "aria-labelledby",
          "aria-expanded",
          "autocomplete",
          "aria-readonly",
          "autocapitalize",
          "spellcheck",
          "aria-autocomplete",
          "aria-live",
          "aria-describedby",
          "aria-label"
        ];
        for (var i = 0; i < attrArray.length; i++) {
          this.inputElement.removeAttribute(attrArray[i]);
        }
        this.inputElement.setAttribute("tabindex", this.tabIndex);
        this.inputElement.classList.remove("e-input");
        Input.setValue("", this.inputElement, this.floatLabelType, this.showClearButton);
      }
      this.element.style.display = "block";
      if (this.inputWrapper.container && this.inputWrapper.container.parentElement) {
        if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {
          detach(this.inputWrapper.container);
        } else {
          this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);
          detach(this.inputWrapper.container);
        }
      }
      delete this.hiddenElement;
      this.filterInput = null;
      this.keyboardModule = null;
      this.ulElement = null;
      this.list = null;
      this.clearIconElement = null;
      this.popupObj = null;
      this.popupContentElement = null;
      this.rippleFun = null;
      this.selectedLI = null;
      this.liCollections = null;
      this.item = null;
      this.footer = null;
      this.header = null;
      this.previousSelectedLI = null;
      this.valueTempElement = null;
      this.actionData.ulElement = null;
      if (this.inputElement && !isNullOrUndefined(this.inputElement.onchange)) {
        this.inputElement.onchange = null;
      }
      if (this.inputElement && !isNullOrUndefined(this.inputElement.onselect)) {
        this.inputElement.onselect = null;
      }
      Input.destroy({
        element: this.inputElement,
        floatLabelType: this.floatLabelType,
        properties: this.properties,
        buttons: this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]
      }, this.clearButton);
      this.clearButton = null;
      this.inputElement = null;
      this.inputWrapper = null;
      _super.prototype.destroy.call(this);
    };
    DropDownList2.prototype.getItems = function() {
      if (!this.list) {
        if (this.dataSource instanceof DataManager) {
          this.initialRemoteRender = true;
        }
        this.renderList();
      }
      return this.ulElement ? _super.prototype.getItems.call(this) : [];
    };
    DropDownList2.prototype.getDataByValue = function(value) {
      return _super.prototype.getDataByValue.call(this, value);
    };
    DropDownList2.prototype.clear = function() {
      this.value = null;
    };
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "cssClass", void 0);
    __decorate$1([
      Property("100%")
    ], DropDownList2.prototype, "width", void 0);
    __decorate$1([
      Property(true)
    ], DropDownList2.prototype, "enabled", void 0);
    __decorate$1([
      Property(false)
    ], DropDownList2.prototype, "enablePersistence", void 0);
    __decorate$1([
      Property("300px")
    ], DropDownList2.prototype, "popupHeight", void 0);
    __decorate$1([
      Property("100%")
    ], DropDownList2.prototype, "popupWidth", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "placeholder", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "filterBarPlaceholder", void 0);
    __decorate$1([
      Property({})
    ], DropDownList2.prototype, "htmlAttributes", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "query", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "valueTemplate", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "headerTemplate", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "footerTemplate", void 0);
    __decorate$1([
      Property(false)
    ], DropDownList2.prototype, "allowFiltering", void 0);
    __decorate$1([
      Property(true)
    ], DropDownList2.prototype, "isDeviceFullScreen", void 0);
    __decorate$1([
      Property(false)
    ], DropDownList2.prototype, "readonly", void 0);
    __decorate$1([
      Property(false)
    ], DropDownList2.prototype, "enableVirtualization", void 0);
    __decorate$1([
      Property(false)
    ], DropDownList2.prototype, "allowResize", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "text", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "value", void 0);
    __decorate$1([
      Property(false)
    ], DropDownList2.prototype, "allowObjectBinding", void 0);
    __decorate$1([
      Property(null)
    ], DropDownList2.prototype, "index", void 0);
    __decorate$1([
      Property("Never")
    ], DropDownList2.prototype, "floatLabelType", void 0);
    __decorate$1([
      Property(false)
    ], DropDownList2.prototype, "showClearButton", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "filtering", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "change", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "beforeOpen", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "open", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "close", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "blur", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "focus", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "resizeStop", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "resizing", void 0);
    __decorate$1([
      Event()
    ], DropDownList2.prototype, "resizeStart", void 0);
    DropDownList2 = __decorate$1([
      NotifyPropertyChanges
    ], DropDownList2);
    return DropDownList2;
  }(DropDownBase)
);
var NumericContainer = (
  /** @class */
  function() {
    function NumericContainer2(pagerModule) {
      this.pagerModule = pagerModule;
    }
    NumericContainer2.prototype.render = function() {
      this.pagerElement = this.pagerModule.element;
      this.renderNumericContainer();
      this.refreshNumericLinks();
      this.wireEvents();
    };
    NumericContainer2.prototype.refresh = function() {
      this.pagerModule.updateTotalPages();
      if (this.links.length) {
        this.updateLinksHtml();
      }
      this.refreshAriaAttrLabel();
      this.updateStyles();
    };
    NumericContainer2.prototype.refreshNumericLinks = function() {
      var link;
      var pagerObj = this.pagerModule;
      var div = pagerObj.element.querySelector(".e-numericcontainer");
      var frag = document.createDocumentFragment();
      div.innerHTML = "";
      for (var i = 1; i <= pagerObj.pageCount; i++) {
        link = createElement("a", {
          className: "e-link e-numericitem e-spacing e-pager-default",
          attrs: { tabindex: "-1", "aria-label": pagerObj.getLocalizedLabel("Page") + i + pagerObj.getLocalizedLabel("Of") + pagerObj.totalPages + pagerObj.getLocalizedLabel("Pages"), href: "#" }
        });
        if (pagerObj.currentPage === i) {
          classList(link, ["e-currentitem", "e-active"], ["e-pager-default"]);
          link.setAttribute("aria-current", "page");
        }
        frag.appendChild(link);
      }
      div.appendChild(frag);
      this.links = [].slice.call(div.childNodes);
    };
    NumericContainer2.prototype.wireEvents = function() {
      EventHandler.add(this.pagerElement, "click", this.clickHandler, this);
      EventHandler.add(this.pagerElement, "auxclick", this.auxiliaryClickHandler, this);
    };
    NumericContainer2.prototype.unwireEvents = function() {
      EventHandler.remove(this.pagerModule.element, "click", this.clickHandler);
      EventHandler.remove(this.pagerModule.element, "auxclick", this.auxiliaryClickHandler);
    };
    NumericContainer2.prototype.destroy = function() {
      this.unwireEvents();
    };
    NumericContainer2.prototype.refreshAriaAttrLabel = function() {
      var pagerObj = this.pagerModule;
      var numericContainer = pagerObj.element.querySelector(".e-numericcontainer");
      var links2 = numericContainer.querySelectorAll("a");
      for (var i = 0; i < links2.length; i++) {
        if (links2[parseInt(i.toString(), 10)].hasAttribute("aria-label") && links2[parseInt(i.toString(), 10)].hasAttribute("index")) {
          links2[parseInt(i.toString(), 10)].setAttribute("aria-label", pagerObj.getLocalizedLabel("Page") + links2[parseInt(i.toString(), 10)].getAttribute("index") + pagerObj.getLocalizedLabel("Of") + pagerObj.totalPages + pagerObj.getLocalizedLabel("Pages"));
        }
      }
    };
    NumericContainer2.prototype.renderNumericContainer = function() {
      this.element = createElement("div", {
        className: "e-pagercontainer",
        attrs: { "role": "navigation" }
      });
      this.renderFirstNPrev(this.element);
      this.renderPrevPagerSet(this.element);
      this.element.appendChild(createElement("div", { className: "e-numericcontainer" }));
      this.renderNextPagerSet(this.element);
      this.renderNextNLast(this.element);
      this.pagerModule.element.appendChild(this.element);
    };
    NumericContainer2.prototype.renderFirstNPrev = function(pagerContainer) {
      this.first = createElement("div", {
        className: "e-first e-icons e-icon-first",
        attrs: {
          title: this.pagerModule.getLocalizedLabel("firstPageTooltip"),
          tabindex: "-1",
          role: "button"
        }
      });
      this.prev = createElement("div", {
        className: "e-prev e-icons e-icon-prev",
        attrs: {
          title: this.pagerModule.getLocalizedLabel("previousPageTooltip"),
          tabindex: "-1",
          role: "button"
        }
      });
      append([this.first, this.prev], pagerContainer);
    };
    NumericContainer2.prototype.renderPrevPagerSet = function(pagerContainer) {
      var prevPager = createElement("div");
      this.PP = createElement("a", {
        className: "e-link e-pp e-spacing",
        innerHTML: "...",
        attrs: {
          title: this.pagerModule.getLocalizedLabel("previousPagerTooltip"),
          "aria-label": this.pagerModule.getLocalizedLabel("previousPagerTooltip"),
          tabindex: "-1",
          href: "#"
        }
      });
      prevPager.appendChild(this.PP);
      pagerContainer.appendChild(prevPager);
    };
    NumericContainer2.prototype.renderNextPagerSet = function(pagerContainer) {
      var nextPager = createElement("div");
      this.NP = createElement("a", {
        className: "e-link e-np e-spacing",
        innerHTML: "...",
        attrs: {
          title: this.pagerModule.getLocalizedLabel("nextPagerTooltip"),
          "aria-label": this.pagerModule.getLocalizedLabel("nextPagerTooltip"),
          tabindex: "-1",
          href: "#"
        }
      });
      nextPager.appendChild(this.NP);
      pagerContainer.appendChild(nextPager);
    };
    NumericContainer2.prototype.renderNextNLast = function(pagerContainer) {
      this.next = createElement("div", {
        className: "e-next e-icons e-icon-next",
        attrs: {
          title: this.pagerModule.getLocalizedLabel("nextPageTooltip"),
          tabindex: "-1",
          role: "button"
        }
      });
      this.last = createElement("div", {
        className: "e-last e-icons e-icon-last",
        attrs: {
          title: this.pagerModule.getLocalizedLabel("lastPageTooltip"),
          tabindex: "-1",
          role: "button"
        }
      });
      append([this.next, this.last], pagerContainer);
    };
    NumericContainer2.prototype.clickHandler = function(e) {
      var pagerObj = this.pagerModule;
      this.target = e.target;
      if (this.target.classList.contains("e-numericitem")) {
        e.preventDefault();
      }
      pagerObj.previousPageNo = pagerObj.currentPage;
      if (!this.target.classList.contains("e-disable") && !isNullOrUndefined(this.target.getAttribute("index"))) {
        pagerObj.currentPage = parseInt(this.target.getAttribute("index"), 10);
        this.pagerModule.isInteracted = true;
        pagerObj.dataBind();
      }
      return false;
    };
    NumericContainer2.prototype.auxiliaryClickHandler = function(e) {
      this.target = e.target;
      if (this.target.classList.contains("e-numericitem") && e.button === 1) {
        e.preventDefault();
      }
    };
    NumericContainer2.prototype.updateLinksHtml = function() {
      var pagerObj = this.pagerModule;
      var currentPageSet;
      var isLastSet;
      var pageNo;
      var numItems = this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');
      pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;
      if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {
        pagerObj.currentPage = pagerObj.totalPages;
      }
      currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);
      if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {
        currentPageSet = currentPageSet - 1;
      }
      for (var i = 0; i < pagerObj.pageCount; i++) {
        if (pagerObj.isPagerResized) {
          var focusedItem = this.pagerElement.querySelector(".e-focus");
          var focusedorTarget = this.target ? this.target : focusedItem ? focusedItem : null;
          var prevFocused = false;
          var nextFocused = false;
          var firstFocused = false;
          var lastFocused = false;
          var numItemFocused = false;
          var npFocused = false;
          var ppFocused = false;
          if (focusedorTarget) {
            var classList_1 = focusedorTarget.classList;
            if (classList_1.contains("e-icons")) {
              switch (true) {
                case classList_1.contains("e-prev"):
                  prevFocused = true;
                  break;
                case classList_1.contains("e-next"):
                  nextFocused = true;
                  break;
                case classList_1.contains("e-first"):
                  firstFocused = true;
                  break;
                case classList_1.contains("e-last"):
                  lastFocused = true;
                  break;
              }
            } else if (classList_1.contains("e-numericitem")) {
              switch (true) {
                case classList_1.contains("e-np"):
                  npFocused = true;
                  break;
                case classList_1.contains("e-pp"):
                  ppFocused = true;
                  break;
                default:
                  numItemFocused = classList_1.contains("e-numericitem");
                  break;
              }
            }
          }
          isLastSet = lastFocused || this.pagerModule.keyAction === "End";
          numItems = this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');
          var isPageAvailable = Array.from(numItems).some(function(item) {
            return parseInt(item.getAttribute("index"), 10) === pagerObj.currentPage;
          });
          if (firstFocused || this.pagerModule.keyAction === "Home") {
            pageNo = 1 + i;
          } else if (lastFocused || this.pagerModule.keyAction === "End") {
            pageNo = currentPageSet * pagerObj.pageCount + 1 + i;
          } else if (nextFocused || this.pagerModule.keyAction === "ArrowRight" || prevFocused || this.pagerModule.keyAction === "ArrowLeft") {
            if (isPageAvailable) {
              pageNo = parseInt(numItems[0].getAttribute("index"), 10) + i;
            } else if (prevFocused || this.pagerModule.keyAction === "ArrowLeft") {
              pageNo = parseInt(this.PP.getAttribute("index"), 10) + i;
            } else {
              pageNo = pagerObj.currentPage + i;
            }
          } else if (npFocused || ppFocused) {
            pageNo = pagerObj.currentPage + i;
          } else if (numItemFocused) {
            pageNo = parseInt(numItems[0].getAttribute("index"), 10) + i;
          } else {
            pageNo = currentPageSet * pagerObj.pageCount + 1 + i;
          }
        } else {
          pageNo = currentPageSet * pagerObj.pageCount + 1 + i;
        }
        if (pageNo <= pagerObj.totalPages) {
          this.links[parseInt(i.toString(), 10)].classList.remove("e-hide");
          this.links[parseInt(i.toString(), 10)].style.display = "";
          this.links[parseInt(i.toString(), 10)].setAttribute("index", pageNo.toString());
          this.links[parseInt(i.toString(), 10)].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;
          if (pagerObj.currentPage !== pageNo) {
            this.links[parseInt(i.toString(), 10)].classList.add("e-pager-default");
          } else {
            this.links[parseInt(i.toString(), 10)].classList.remove("e-pager-default");
          }
        } else {
          this.links[parseInt(i.toString(), 10)].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;
          this.links[parseInt(i.toString(), 10)].style.display = "none";
        }
        classList(this.links[parseInt(i.toString(), 10)], [], ["e-currentitem", "e-active"]);
        this.links[parseInt(i.toString(), 10)].removeAttribute("aria-current");
      }
      attributes(this.first, {
        "index": "1",
        "title": this.pagerModule.getLocalizedLabel("firstPageTooltip")
      });
      attributes(this.pagerElement.querySelector(".e-mfirst"), {
        "index": "1",
        "title": this.pagerModule.getLocalizedLabel("firstPageTooltip")
      });
      attributes(this.last, {
        "index": pagerObj.totalPages.toString(),
        "title": this.pagerModule.getLocalizedLabel("lastPageTooltip")
      });
      attributes(this.pagerElement.querySelector(".e-mlast"), {
        "index": pagerObj.totalPages.toString(),
        "title": this.pagerModule.getLocalizedLabel("lastPageTooltip")
      });
      attributes(this.prev, {
        "index": (pagerObj.currentPage - 1).toString(),
        "title": this.pagerModule.getLocalizedLabel("previousPageTooltip")
      });
      attributes(this.pagerElement.querySelector(".e-mprev"), {
        "index": (pagerObj.currentPage - 1).toString(),
        "title": this.pagerModule.getLocalizedLabel("previousPageTooltip")
      });
      attributes(this.next, {
        "index": (pagerObj.currentPage + 1).toString(),
        "title": this.pagerModule.getLocalizedLabel("nextPageTooltip")
      });
      attributes(this.pagerElement.querySelector(".e-mnext"), {
        "index": (pagerObj.currentPage + 1).toString(),
        "title": this.pagerModule.getLocalizedLabel("nextPageTooltip")
      });
      var ppIndex = this.pagerModule.isPagerResized && numItems.length ? isLastSet ? parseInt(numItems[0].getAttribute("index"), 10) - pagerObj.avgNumItems : parseInt(numItems[0].getAttribute("index"), 10) - numItems.length : parseInt(this.links[0].getAttribute("index"), 10) - pagerObj.pageCount;
      attributes(this.PP, {
        "index": ppIndex < 1 ? "1" : ppIndex.toString(),
        "title": this.pagerModule.getLocalizedLabel("previousPagerTooltip"),
        "aria-label": this.pagerModule.getLocalizedLabel("previousPagerTooltip")
      });
      var NPIndex = this.pagerModule.isPagerResized && numItems.length ? parseInt(numItems[numItems.length - 1].getAttribute("index"), 10) : parseInt(this.links[this.links.length - 1].getAttribute("index"), 10);
      attributes(this.NP, {
        "index": (NPIndex + 1).toString(),
        "title": this.pagerModule.getLocalizedLabel("nextPagerTooltip"),
        "aria-label": this.pagerModule.getLocalizedLabel("nextPagerTooltip")
      });
      this.target = void 0;
    };
    NumericContainer2.prototype.updateStyles = function() {
      var _this = this;
      this.updateFirstNPrevStyles();
      this.updatePrevPagerSetStyles();
      this.updateNextPagerSetStyles();
      this.updateNextNLastStyles();
      if (this.links.length) {
        var currentPageIndex = this.links.findIndex(function(link) {
          return link.getAttribute("index") === _this.pagerModule.currentPage.toString();
        });
        var currentPage = this.pagerModule.isPagerResized && currentPageIndex !== -1 ? currentPageIndex : (this.pagerModule.currentPage - 1) % this.pagerModule.pageCount;
        if (this.links[parseInt(currentPage.toString(), 10)]) {
          classList(this.links[parseInt(currentPage.toString(), 10)], ["e-currentitem", "e-active"], []);
          this.links[parseInt(currentPage.toString(), 10)].setAttribute("aria-current", "page");
        }
      }
    };
    NumericContainer2.prototype.updateFirstNPrevStyles = function() {
      var firstPage = ["e-firstpage", "e-pager-default"];
      var firstPageDisabled = ["e-firstpagedisabled", "e-disable"];
      var prevPage = ["e-prevpage", "e-pager-default"];
      var prevPageDisabled = ["e-prevpagedisabled", "e-disable"];
      if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {
        classList(this.prev, prevPage, prevPageDisabled);
        classList(this.first, firstPage, firstPageDisabled);
        classList(this.pagerElement.querySelector(".e-mfirst"), firstPage, firstPageDisabled);
        classList(this.pagerElement.querySelector(".e-mprev"), prevPage, prevPageDisabled);
      } else {
        classList(this.prev, prevPageDisabled, prevPage);
        classList(this.first, firstPageDisabled, firstPage);
        classList(this.pagerElement.querySelector(".e-mprev"), prevPageDisabled, prevPage);
        classList(this.pagerElement.querySelector(".e-mfirst"), firstPageDisabled, firstPage);
      }
    };
    NumericContainer2.prototype.updatePrevPagerSetStyles = function() {
      if (this.pagerModule.currentPage > this.pagerModule.pageCount || this.pagerModule.isPagerResized && this.links.findIndex(function(link) {
        return parseInt(link.getAttribute("index"), 10) === 1;
      })) {
        classList(this.PP, ["e-numericitem", "e-pager-default"], ["e-nextprevitemdisabled", "e-disable"]);
      } else {
        classList(this.PP, ["e-nextprevitemdisabled", "e-disable"], ["e-numericitem", "e-pager-default"]);
      }
    };
    NumericContainer2.prototype.updateNextPagerSetStyles = function() {
      var pagerObj = this.pagerModule;
      var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, "");
      var numItems = this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');
      if (!firstPage.length || !this.links.length || parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages || pagerObj.isPagerResized && Array.from(numItems).some(function(item) {
        return parseInt(item.getAttribute("index"), 10) === pagerObj.totalPages;
      })) {
        classList(this.NP, ["e-nextprevitemdisabled", "e-disable"], ["e-numericitem", "e-pager-default"]);
      } else {
        classList(this.NP, ["e-numericitem", "e-pager-default"], ["e-nextprevitemdisabled", "e-disable"]);
      }
    };
    NumericContainer2.prototype.updateNextNLastStyles = function() {
      var lastPage = ["e-lastpage", "e-pager-default"];
      var lastPageDisabled = ["e-lastpagedisabled", "e-disable"];
      var nextPage = ["e-nextpage", "e-pager-default"];
      var nextPageDisabled = ["e-nextpagedisabled", "e-disable"];
      var pagerObj = this.pagerModule;
      if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {
        classList(this.last, lastPageDisabled, lastPage);
        classList(this.next, nextPageDisabled, nextPage);
        classList(this.pagerElement.querySelector(".e-mlast"), lastPageDisabled, lastPage);
        classList(this.pagerElement.querySelector(".e-mnext"), nextPageDisabled, nextPage);
      } else {
        classList(this.last, lastPage, lastPageDisabled);
        classList(this.next, nextPage, nextPageDisabled);
        classList(this.pagerElement.querySelector(".e-mlast"), lastPage, lastPageDisabled);
        classList(this.pagerElement.querySelector(".e-mnext"), nextPage, nextPageDisabled);
      }
    };
    return NumericContainer2;
  }()
);
var PagerMessage = (
  /** @class */
  function() {
    function PagerMessage2(pagerModule) {
      this.pagerModule = pagerModule;
    }
    PagerMessage2.prototype.render = function() {
      var div = createElement("div", { className: "e-parentmsgbar" });
      this.pageNoMsgElem = createElement("span", { className: "e-pagenomsg" });
      this.pageNoMsgElem.style.textAlign = "right";
      this.pageCountMsgElem = createElement("span", { className: "e-pagecountmsg" });
      this.pageCountMsgElem.style.textAlign = "right";
      append([this.pageNoMsgElem, this.pageCountMsgElem], div);
      this.pagerModule.element.appendChild(div);
      this.refresh();
    };
    PagerMessage2.prototype.refresh = function() {
      var pagerObj = this.pagerModule;
      this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel("currentPageInfo"), [pagerObj.totalRecordsCount === 0 ? 0 : pagerObj.currentPage, pagerObj.totalPages || 0, pagerObj.totalRecordsCount || 0]) + " ";
      this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel(pagerObj.totalRecordsCount <= 1 ? "totalItemInfo" : "totalItemsInfo"), [
        pagerObj.totalRecordsCount || 0,
        pagerObj.totalRecordsCount ? pagerObj.pageSize * (pagerObj.currentPage - 1) + 1 : 0,
        pagerObj.pageSize * pagerObj.currentPage > pagerObj.totalRecordsCount ? pagerObj.totalRecordsCount : pagerObj.pageSize * pagerObj.currentPage
      ]);
      this.pageNoMsgElem.parentElement.classList.remove("e-hide");
    };
    PagerMessage2.prototype.hideMessage = function() {
      if (this.pageNoMsgElem) {
        this.pageNoMsgElem.style.display = "none";
      }
      if (this.pageCountMsgElem) {
        this.pageCountMsgElem.style.display = "none";
      }
    };
    PagerMessage2.prototype.showMessage = function() {
      if (!this.pageNoMsgElem) {
        this.render();
      }
      this.pageNoMsgElem.style.display = "";
      this.pageCountMsgElem.style.display = "";
    };
    PagerMessage2.prototype.destroy = function() {
    };
    PagerMessage2.prototype.format = function(str, args) {
      var regx;
      var regExp2 = RegExp;
      for (var i = 0; i < args.length; i++) {
        regx = new regExp2("\\{" + i + "\\}", "gm");
        if (this.isValidLocale(this.pagerModule.locale)) {
          str = str.replace(regx, args[parseInt(i.toString(), 10)].toLocaleString(this.pagerModule.locale));
        } else {
          str = str.replace(regx, args[parseInt(i.toString(), 10)].toString());
        }
      }
      return str;
    };
    PagerMessage2.prototype.isValidLocale = function(locale) {
      try {
        new Intl.NumberFormat(locale);
        return true;
      } catch (e) {
        return false;
      }
    };
    return PagerMessage2;
  }()
);
var __extends$1 = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate = function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Pager = (
  /** @class */
  function(_super) {
    __extends$1(Pager2, _super);
    function Pager2(options, element2, parent) {
      var _this = _super.call(this, options, element2) || this;
      _this.hasParent = false;
      _this.checkAll = true;
      _this.pageRefresh = "pager-refresh";
      _this.firstPagerFocus = false;
      _this.isCancel = false;
      _this.isInteracted = false;
      _this.parent = parent;
      return _this;
    }
    Pager2.prototype.requiredModules = function() {
      var modules = [];
      if (this.enableExternalMessage) {
        modules.push({
          member: "externalMessage",
          args: [this],
          name: "ExternalMessage"
        });
      }
      if (this.checkpagesizes()) {
        modules.push({
          member: "pagerdropdown",
          args: [this],
          name: "PagerDropDown"
        });
      }
      return modules;
    };
    Pager2.prototype.preRender = function() {
      this.defaultConstants = {
        currentPageInfo: "{0} of {1} pages",
        totalItemsInfo: "({0} items)",
        totalItemInfo: "({0} item)",
        firstPageTooltip: "Go to first page",
        lastPageTooltip: "Go to last page",
        nextPageTooltip: "Go to next page",
        previousPageTooltip: "Go to previous page",
        nextPagerTooltip: "Go to next pager items",
        previousPagerTooltip: "Go to previous pager items",
        pagerDropDown: "Items per page",
        pagerAllDropDown: "Items",
        CurrentPageInfo: "{0} of {1} pages",
        TotalItemsInfo: "({0} items)",
        FirstPageTooltip: "Go to first page",
        LastPageTooltip: "Go to last page",
        NextPageTooltip: "Go to next page",
        PreviousPageTooltip: "Go to previous page",
        NextPagerTooltip: "Go to next pager items",
        PreviousPagerTooltip: "Go to previous pager items",
        PagerDropDown: "Items per page",
        PagerAllDropDown: "Items",
        All: "All",
        Container: "Pager Container",
        Information: "Pager Information",
        ExternalMsg: "Pager external message",
        Page: "Page ",
        Of: " of ",
        Pages: " Pages"
      };
      this.containerModule = new NumericContainer(this);
      this.pagerMessageModule = new PagerMessage(this);
    };
    Pager2.prototype.render = function() {
      this.element.setAttribute("data-role", "pager");
      this.element.setAttribute("tabindex", "-1");
      this.initLocalization();
      if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {
        this.element.classList.add("e-mac-safari");
      }
      if (this.cssClass) {
        if (this.cssClass.indexOf(" ") !== -1) {
          addClass([this.element], this.cssClass.split(" "));
        } else {
          addClass([this.element], [this.cssClass]);
        }
      }
      if (!this.hasParent) {
        this.element.setAttribute("tabindex", "0");
      }
      if (this.enableQueryString) {
        var pageValue = new URL(window.location.href).searchParams.get("page");
        if (!isNullOrUndefined(pageValue) && window.location.href.indexOf("?page=") > 0) {
          var currentPageValue = parseInt(pageValue, 10);
          if (this.hasParent) {
            this.parent.setProperties({ pageSettings: { currentPage: currentPageValue } }, true);
          }
          this.currentPage = currentPageValue;
        }
      }
      if (this.template) {
        if (this.isReactTemplate()) {
          this.on(this.pageRefresh, this.pagerTemplate, this);
          this.notify(this.pageRefresh, {});
        } else {
          this.pagerTemplate();
        }
      } else {
        this.updateRTL();
        this.totalRecordsCount = this.totalRecordsCount || 0;
        this.renderFirstPrevDivForDevice();
        this.containerModule.render();
        if (this.enablePagerMessage) {
          this.pagerMessageModule.render();
        }
        this.renderNextLastDivForDevice();
        if (this.checkpagesizes() && this.pagerdropdownModule) {
          this.pagerdropdownModule.render();
        }
        this.addAriaLabel();
        if (this.enableExternalMessage && this.externalMessageModule) {
          this.externalMessageModule.render();
        }
        this.refresh();
        this.trigger("created", { "currentPage": this.currentPage, "totalRecordsCount": this.totalRecordsCount });
      }
      this.wireEvents();
      this.addListener();
    };
    Pager2.prototype.getPersistData = function() {
      var keyEntity = ["currentPage", "pageSize"];
      return this.addOnPersist(keyEntity);
    };
    Pager2.prototype.destroy = function() {
      if (this.isDestroyed) {
        return;
      }
      if (this.isReactTemplate()) {
        this.off(this.pageRefresh, this.pagerTemplate);
        if (!this.hasParent) {
          this.destroyTemplate(["pagerTemplate"]);
        }
      }
      this.removeListener();
      this.unwireEvents();
      _super.prototype.destroy.call(this);
      this.containerModule.destroy();
      this.pagerMessageModule.destroy();
      if (!this.isReactTemplate()) {
        this.element.innerHTML = "";
      }
    };
    Pager2.prototype.destroyTemplate = function(propertyNames, index) {
      this.clearTemplate(propertyNames, index);
    };
    Pager2.prototype.getModuleName = function() {
      return "pager";
    };
    Pager2.prototype.onPropertyChanged = function(newProp, oldProp) {
      if (this.isDestroyed) {
        return;
      }
      if (newProp.pageSize === this.getLocalizedLabel("All") && oldProp.pageSize === this.totalRecordsCount) {
        this.pageSize = this.totalRecordsCount;
        return;
      }
      if (newProp.pageCount !== oldProp.pageCount) {
        this.containerModule.refreshNumericLinks();
        this.containerModule.refresh();
      }
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "currentPage":
            if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {
              this.currentPageChanged(newProp, oldProp);
            }
            break;
          case "pageSize":
          case "totalRecordsCount":
          case "customText":
            if (this.checkpagesizes() && this.pagerdropdownModule) {
              if (oldProp.pageSize !== newProp.pageSize) {
                this.currentPage = 1;
              }
              this.pagerdropdownModule.setDropDownValue("value", this.pageSize);
            }
            if (newProp.pageSize !== oldProp.pageSize) {
              this.pageSize = newProp.pageSize;
              this.currentPageChanged(newProp, oldProp);
              if (this.isCancel && this.hasParent) {
                this.parent.setProperties({ pageSettings: { pageSize: oldProp.pageSize } }, true);
              }
            } else {
              this.refresh();
            }
            break;
          case "pageSizes":
            if (this.checkpagesizes() && this.pagerdropdownModule) {
              this.pagerdropdownModule.destroy();
              this.pagerdropdownModule.render();
            }
            this.refresh();
            break;
          case "template":
            this.templateFn = this.compile(this.template);
            this.refresh();
            break;
          case "locale":
            this.initLocalization();
            this.refresh();
            break;
          case "enableExternalMessage":
            if (this.enableExternalMessage && this.externalMessageModule) {
              this.externalMessageModule.render();
            }
            break;
          case "externalMessage":
            if (this.externalMessageModule) {
              this.externalMessageModule.refresh();
            }
            break;
          case "enableRtl":
            this.updateRTL();
            break;
          case "enablePagerMessage":
            if (this.enablePagerMessage) {
              this.pagerMessageModule.showMessage();
            } else {
              this.pagerMessageModule.hideMessage();
            }
            break;
        }
      }
      this.resizePager();
    };
    Pager2.prototype.wireEvents = function() {
      if (!this.hasParent) {
        EventHandler.add(this.element, "keydown", this.keyPressHandler, this);
        EventHandler.add(document.body, "keydown", this.keyDownHandler, this);
      }
      EventHandler.add(this.element, "focusin", this.onFocusIn, this);
      EventHandler.add(this.element, "focusout", this.onFocusOut, this);
      EventHandler.add(window, "resize", this.resizePager, this);
      EventHandler.add(window, "load", this.resizePager, this);
    };
    Pager2.prototype.unwireEvents = function() {
      if (!this.hasParent) {
        EventHandler.remove(this.element, "keydown", this.keyPressHandler);
        EventHandler.remove(document.body, "keydown", this.keyDownHandler);
      }
      EventHandler.remove(this.element, "focusin", this.onFocusIn);
      EventHandler.remove(this.element, "focusout", this.onFocusOut);
      EventHandler.remove(window, "resize", this.resizePager);
      EventHandler.remove(window, "load", this.resizePager);
    };
    Pager2.prototype.onFocusIn = function(e) {
      var focusedTabIndexElement = this.getFocusedTabindexElement();
      if (isNullOrUndefined(focusedTabIndexElement)) {
        var target = e.target;
        var dropDownPage = this.getDropDownPage();
        if (!this.hasParent) {
          this.element.tabIndex = -1;
        }
        if (target === this.element && !this.hasParent) {
          var focusablePagerElements = this.getFocusablePagerElements(this.element, []);
          this.addFocus(focusablePagerElements[0], true);
          return;
        }
        if (target === this.element) {
          this.element.tabIndex = 0;
          return;
        }
        if (target !== dropDownPage && !target.classList.contains("e-disable")) {
          this.addFocus(target, true);
        }
      }
    };
    Pager2.prototype.onFocusOut = function(e) {
      var focusedElement = this.getFocusedElement();
      var dropDownPage = this.getDropDownPage();
      if (!isNullOrUndefined(focusedElement)) {
        this.removeFocus(focusedElement, true);
      }
      if (this.pageSizes && dropDownPage && dropDownPage.classList.contains("e-input-focus")) {
        this.removeFocus(dropDownPage, true);
      }
      this.setTabIndexForFocusLastElement();
      if (!this.hasParent) {
        this.element.tabIndex = 0;
      }
      if (this.hasParent) {
        this.element.tabIndex = -1;
      }
    };
    Pager2.prototype.keyDownHandler = function(e) {
      if (e.altKey) {
        if (e.keyCode === 74) {
          var focusablePagerElements = this.getFocusablePagerElements(this.element, []);
          if (focusablePagerElements.length > 0) {
            focusablePagerElements[0].focus();
          }
        }
      }
    };
    Pager2.prototype.keyPressHandler = function(e) {
      var presskey = extend$1(e, { cancel: false });
      this.notify(keyPressed, presskey);
      if (presskey.cancel === true) {
        e.stopImmediatePropagation();
      }
    };
    Pager2.prototype.addListener = function() {
      if (this.isDestroyed) {
        return;
      }
      if (!this.hasParent) {
        this.on(keyPressed, this.onKeyPress, this);
      }
    };
    Pager2.prototype.removeListener = function() {
      if (this.isDestroyed) {
        return;
      }
      if (!this.hasParent) {
        this.off(keyPressed, this.onKeyPress);
      }
    };
    Pager2.prototype.onKeyPress = function(e) {
      if (!this.hasParent) {
        if (this.checkPagerHasFocus()) {
          this.changePagerFocus(e);
        } else {
          e.preventDefault();
          this.setPagerFocus();
        }
      }
    };
    Pager2.prototype.checkPagerHasFocus = function() {
      return this.getFocusedTabindexElement() ? true : false;
    };
    Pager2.prototype.setPagerContainerFocus = function() {
      this.element.focus();
    };
    Pager2.prototype.setPagerFocus = function() {
      var focusablePagerElements = this.getFocusablePagerElements(this.element, []);
      if (focusablePagerElements.length > 0) {
        focusablePagerElements[0].focus();
      }
    };
    Pager2.prototype.setPagerFocusForActiveElement = function() {
      var currentActivePage = this.getActiveElement();
      if (currentActivePage) {
        currentActivePage.focus();
      }
    };
    Pager2.prototype.setTabIndexForFocusLastElement = function() {
      var focusablePagerElements = this.getFocusablePagerElements(this.element, []);
      var dropDownPage = this.getDropDownPage();
      if (this.pageSizes && dropDownPage && !isNullOrUndefined(dropDownPage.offsetParent)) {
        dropDownPage.tabIndex = 0;
      } else if (focusablePagerElements.length > 0) {
        focusablePagerElements[focusablePagerElements.length - 1].tabIndex = 0;
      }
    };
    Pager2.prototype.changePagerFocus = function(e) {
      this.keyAction = e.key;
      if (e.shiftKey && e.keyCode === 9) {
        this.changeFocusByShiftTab(e);
      } else if (e.keyCode === 9) {
        this.changeFocusByTab(e);
      } else if (e.keyCode === 13 || e.keyCode === 32) {
        this.navigateToPageByEnterOrSpace(e);
      } else if (e.keyCode === 37 || e.keyCode === 39 || e.keyCode === 35 || e.keyCode === 36) {
        this.navigateToPageByKey(e);
      }
      this.keyAction = "";
    };
    Pager2.prototype.getFocusedTabindexElement = function() {
      var focusedTabIndexElement;
      var tabindexElements = this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');
      for (var i = 0; i < tabindexElements.length; i++) {
        var element2 = tabindexElements[parseInt(i.toString(), 10)];
        if (element2 && (element2.classList.contains("e-focused") || element2.classList.contains("e-input-focus"))) {
          focusedTabIndexElement = element2;
          break;
        }
      }
      return focusedTabIndexElement;
    };
    Pager2.prototype.changeFocusByTab = function(e) {
      var currentItemPagerFocus = this.getFocusedTabindexElement();
      var focusablePagerElements = this.getFocusablePagerElements(this.element, []);
      var dropDownPage = this.getDropDownPage();
      if (focusablePagerElements.length > 0) {
        if (this.pageSizes && dropDownPage && currentItemPagerFocus === focusablePagerElements[focusablePagerElements.length - 1]) {
          dropDownPage.tabIndex = 0;
        } else {
          for (var i = 0; i < focusablePagerElements.length; i++) {
            if (currentItemPagerFocus === focusablePagerElements[parseInt(i.toString(), 10)]) {
              var incrementNumber = i + 1;
              if (incrementNumber < focusablePagerElements.length) {
                e.preventDefault();
                focusablePagerElements[parseInt(incrementNumber.toString(), 10)].focus();
              }
              break;
            }
          }
        }
      }
    };
    Pager2.prototype.changeFocusByShiftTab = function(e) {
      var currentItemPagerFocus = this.getFocusedTabindexElement();
      var focusablePagerElements = this.getFocusablePagerElements(this.element, []);
      var dropDownPage = this.getDropDownPage();
      if (this.pageSizes && dropDownPage && dropDownPage.classList.contains("e-input-focus")) {
        dropDownPage.tabIndex = -1;
        this.addFocus(focusablePagerElements[focusablePagerElements.length - 1], true);
      } else if (focusablePagerElements.length > 0) {
        for (var i = 0; i < focusablePagerElements.length; i++) {
          if (currentItemPagerFocus === focusablePagerElements[parseInt(i.toString(), 10)]) {
            var decrementNumber = i - 1;
            if (decrementNumber >= 0) {
              e.preventDefault();
              focusablePagerElements[parseInt(decrementNumber.toString(), 10)].focus();
            } else if (this.hasParent) {
              var rows = this.parent.getRows();
              var lastRow = rows[rows.length - 1];
              var lastCell = lastRow.lastChild;
              e.preventDefault();
              lastCell.focus();
              this.firstPagerFocus = true;
            }
            break;
          }
        }
      }
    };
    Pager2.prototype.checkFirstPagerFocus = function() {
      if (this.firstPagerFocus) {
        this.firstPagerFocus = false;
        return true;
      }
      return false;
    };
    Pager2.prototype.navigateToPageByEnterOrSpace = function(e) {
      var currentItemPagerFocus = this.getFocusedElement();
      if (currentItemPagerFocus) {
        this.goToPage(parseInt(currentItemPagerFocus.getAttribute("index"), 10));
        var currentActivePage = this.getActiveElement();
        var selectedClass = this.getClass(currentItemPagerFocus);
        var classElement = this.getElementByClass(selectedClass);
        if ((selectedClass === "e-first" || selectedClass === "e-prev" || selectedClass === "e-next" || selectedClass === "e-last" || selectedClass === "e-pp" || selectedClass === "e-np") && classElement && !classElement.classList.contains("e-disable")) {
          classElement.focus();
        } else if (this.checkFocusInAdaptiveMode(currentItemPagerFocus)) {
          this.changeFocusInAdaptiveMode(currentItemPagerFocus);
        } else {
          if (currentActivePage) {
            currentActivePage.focus();
          }
        }
      }
    };
    Pager2.prototype.navigateToPageByKey = function(e) {
      var actionClass = e.keyCode === 37 ? ".e-prev" : e.keyCode === 39 ? ".e-next" : e.keyCode === 35 ? ".e-last" : e.keyCode === 36 ? ".e-first" : "";
      var pagingItem = this.element.querySelector(actionClass);
      var currentItemPagerFocus = this.getFocusedElement();
      if (!isNullOrUndefined(pagingItem) && pagingItem.hasAttribute("index") && !isNaN(parseInt(pagingItem.getAttribute("index"), 10))) {
        this.goToPage(parseInt(pagingItem.getAttribute("index"), 10));
        var currentActivePage = this.getActiveElement();
        if (this.checkFocusInAdaptiveMode(currentItemPagerFocus)) {
          this.changeFocusInAdaptiveMode(currentItemPagerFocus);
        } else {
          if (currentActivePage) {
            currentActivePage.focus();
          }
        }
      }
    };
    Pager2.prototype.checkFocusInAdaptiveMode = function(element2) {
      var selectedClass = this.getClass(element2);
      return selectedClass === "e-mfirst" || selectedClass === "e-mprev" || selectedClass === "e-mnext" || selectedClass === "e-mlast" ? true : false;
    };
    Pager2.prototype.changeFocusInAdaptiveMode = function(element2) {
      var selectedClass = this.getClass(element2);
      var classElement = this.getElementByClass(selectedClass);
      if (classElement && classElement.classList.contains("e-disable")) {
        if (selectedClass === "e-mnext" || selectedClass === "e-mlast") {
          var mPrev = this.element.querySelector(".e-mprev");
          mPrev.focus();
        } else {
          this.setPagerFocus();
        }
      }
    };
    Pager2.prototype.removeTabindexLastElements = function() {
      var tabIndexElements = this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');
      if (tabIndexElements.length > 1) {
        for (var i = 1; i < tabIndexElements.length; i++) {
          var element2 = tabIndexElements[parseInt(i.toString(), 10)];
          if (element2) {
            element2.tabIndex = -1;
          }
        }
      }
    };
    Pager2.prototype.getActiveElement = function() {
      return this.element.querySelector(".e-active");
    };
    Pager2.prototype.getDropDownPage = function() {
      var dropDownPageHolder = this.element.querySelector(".e-pagerdropdown");
      var dropDownPage;
      if (dropDownPageHolder) {
        dropDownPage = dropDownPageHolder.children[0];
      }
      return dropDownPage;
    };
    Pager2.prototype.getFocusedElement = function() {
      return this.element.querySelector(".e-focused");
    };
    Pager2.prototype.getClass = function(element2) {
      var currentClass;
      var classList2 = [
        "e-mfirst",
        "e-mprev",
        "e-first",
        "e-prev",
        "e-pp",
        "e-np",
        "e-next",
        "e-last",
        "e-mnext",
        "e-mlast"
      ];
      for (var i = 0; i < classList2.length; i++) {
        if (element2 && element2.classList.contains(classList2[parseInt(i.toString(), 10)])) {
          currentClass = classList2[parseInt(i.toString(), 10)];
          return currentClass;
        }
      }
      return currentClass;
    };
    Pager2.prototype.getElementByClass = function(className) {
      return this.element.querySelector("." + className);
    };
    Pager2.prototype.getFocusablePagerElements = function(element2, previousElements) {
      var target = element2;
      var targetChildrens = target.children;
      var pagerElements = previousElements;
      for (var i = 0; i < targetChildrens.length; i++) {
        var element_1 = targetChildrens[parseInt(i.toString(), 10)];
        if (element_1.children.length > 0 && !element_1.classList.contains("e-pagesizes")) {
          pagerElements = this.getFocusablePagerElements(element_1, pagerElements);
        } else {
          var tabindexElement = targetChildrens[parseInt(i.toString(), 10)];
          if (tabindexElement.hasAttribute("tabindex") && !element_1.classList.contains("e-disable") && element_1.style.display !== "none" && !isNullOrUndefined(element_1.offsetParent)) {
            pagerElements.push(tabindexElement);
          }
        }
      }
      return pagerElements;
    };
    Pager2.prototype.addFocus = function(element2, addFocusClass) {
      if (!isNullOrUndefined(element2)) {
        if (addFocusClass) {
          addClass([element2], ["e-focused", "e-focus"]);
        }
        element2.tabIndex = 0;
      }
    };
    Pager2.prototype.removeFocus = function(element2, removeFocusClass) {
      if (removeFocusClass) {
        removeClass([element2], ["e-focused", "e-focus"]);
      }
      element2.tabIndex = -1;
    };
    Pager2.prototype.getLocalizedLabel = function(key) {
      return this.localeObj.getConstant(key);
    };
    Pager2.prototype.goToPage = function(pageNo) {
      if (this.checkGoToPage(pageNo)) {
        this.currentPage = pageNo;
        this.isInteracted = false;
        this.dataBind();
      }
    };
    Pager2.prototype.setPageSize = function(pageSize) {
      this.pageSize = pageSize;
      this.dataBind();
    };
    Pager2.prototype.checkpagesizes = function() {
      if (this.pageSizes === true || this.pageSizes.length) {
        return true;
      }
      return false;
    };
    Pager2.prototype.checkGoToPage = function(newPageNo, oldPageNo) {
      if (newPageNo !== this.currentPage) {
        this.previousPageNo = this.currentPage;
      }
      if (!isNullOrUndefined(oldPageNo)) {
        this.previousPageNo = oldPageNo;
      }
      if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {
        return true;
      }
      return false;
    };
    Pager2.prototype.currentPageChanged = function(newProp, oldProp) {
      if (this.enableQueryString) {
        this.updateQueryString(this.currentPage);
      }
      if (newProp.currentPage !== oldProp.currentPage || newProp.pageSize !== oldProp.pageSize) {
        var args = {
          currentPage: this.currentPage,
          newProp,
          oldProp,
          cancel: false,
          isInteracted: this.isInteracted
        };
        this.trigger("click", args);
        if (!args.cancel) {
          this.isCancel = false;
          this.refresh();
        } else {
          this.isCancel = true;
          if (oldProp && oldProp.pageSize) {
            this.setProperties({ pageSize: oldProp.pageSize }, true);
            if (this.pagerdropdownModule) {
              this.pagerdropdownModule.setDropDownValue("value", oldProp.pageSize);
              this.pagerdropdownModule["dropDownListObject"].text = oldProp.pageSize + "";
            }
          }
        }
      }
    };
    Pager2.prototype.pagerTemplate = function() {
      if (this.isReactTemplate() && this.hasParent) {
        return;
      }
      var result;
      this.element.classList.add("e-pagertemplate");
      this.compile(this.template);
      var data = {
        currentPage: this.currentPage,
        pageSize: this.pageSize,
        pageCount: this.pageCount,
        totalRecordsCount: this.totalRecordsCount,
        totalPages: this.totalPages
      };
      var tempId = this.element.parentElement.id + "_template";
      if (this.isReactTemplate() && !this.isVue) {
        this.getPagerTemplate()(data, this, "pagerTemplate", tempId, null, null, this.element);
        this.renderReactTemplates();
      } else {
        result = this.isVue ? this.getPagerTemplate()(data, this, "pagerTemplate", null, null, null, null, this.root) : this.getPagerTemplate()(data);
        appendChildren(this.element, result);
      }
    };
    Pager2.prototype.updateTotalPages = function() {
      this.totalPages = this.isAllPage ? 1 : this.totalRecordsCount % this.pageSize === 0 ? this.totalRecordsCount / this.pageSize : parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1;
    };
    Pager2.prototype.getPagerTemplate = function() {
      return this.templateFn;
    };
    Pager2.prototype.compile = function(template) {
      if (template) {
        try {
          if (typeof template === "function") {
            this.templateFn = compile$1(template);
          } else {
            if (document.querySelectorAll(template).length) {
              this.templateFn = compile$1(document.querySelector(template).innerHTML.trim());
            } else {
              this.templateFn = compile$1(template);
            }
          }
        } catch (e) {
          this.templateFn = compile$1(template);
        }
      }
      return void 0;
    };
    Pager2.prototype.refresh = function() {
      if (this.template) {
        if (this.isReactTemplate()) {
          this.updateTotalPages();
          this.notify(this.pageRefresh, {});
        } else {
          if (this.parent && this.parent.isAngular) {
            this.parent.destroyTemplate(["pagerTemplate"]);
          } else {
            this.element.innerHTML = "";
          }
          this.updateTotalPages();
          this.pagerTemplate();
        }
      } else {
        this.updateRTL();
        var focusedTabIndexElement = this.getFocusedTabindexElement();
        this.containerModule.refresh();
        this.removeTabindexLastElements();
        if (focusedTabIndexElement && focusedTabIndexElement.classList.contains("e-disable")) {
          if (this.checkFocusInAdaptiveMode(focusedTabIndexElement)) {
            this.changeFocusInAdaptiveMode(focusedTabIndexElement);
          } else {
            this.setPagerFocusForActiveElement();
          }
        }
        if (this.enablePagerMessage) {
          this.pagerMessageModule.refresh();
        }
        if (this.pagerdropdownModule) {
          this.pagerdropdownModule.refresh();
        }
        if (this.enableExternalMessage && this.externalMessageModule) {
          this.externalMessageModule.refresh();
        }
        this.setTabIndexForFocusLastElement();
        this.resizePager();
      }
    };
    Pager2.prototype.updateRTL = function() {
      if (this.enableRtl) {
        this.element.classList.add("e-rtl");
      } else {
        this.element.classList.remove("e-rtl");
      }
    };
    Pager2.prototype.initLocalization = function() {
      this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);
    };
    Pager2.prototype.updateQueryString = function(value) {
      var updatedUrl = this.getUpdatedURL(window.location.href, "page", value.toString());
      window.history.pushState({ path: updatedUrl }, "", updatedUrl);
    };
    Pager2.prototype.getUpdatedURL = function(uri, key, value) {
      var regExp2 = RegExp;
      var regx = new regExp2("([?|&])" + key + "=.*?(&|#|$)", "i");
      if (uri.match(regx)) {
        return uri.replace(regx, "$1" + key + "=" + value + "$2");
      } else {
        var hash = "";
        if (uri.indexOf("#") !== -1) {
          hash = uri.replace(/.*#/, "#");
          uri = uri.replace(/#.*/, "");
        }
        return uri + (uri.indexOf("?") !== -1 ? "&" : "?") + key + "=" + value + hash;
      }
    };
    Pager2.prototype.renderFirstPrevDivForDevice = function() {
      this.element.appendChild(createElement("div", {
        className: "e-mfirst e-icons e-icon-first",
        attrs: { title: this.getLocalizedLabel("firstPageTooltip"), tabindex: "-1" }
      }));
      this.element.appendChild(createElement("div", {
        className: "e-mprev e-icons e-icon-prev",
        attrs: { title: this.getLocalizedLabel("previousPageTooltip"), tabindex: "-1" }
      }));
    };
    Pager2.prototype.renderNextLastDivForDevice = function() {
      this.element.appendChild(createElement("div", {
        className: "e-mnext e-icons e-icon-next",
        attrs: { title: this.getLocalizedLabel("nextPageTooltip"), tabindex: "-1" }
      }));
      this.element.appendChild(createElement("div", {
        className: "e-mlast e-icons e-icon-last",
        attrs: { title: this.getLocalizedLabel("lastPageTooltip"), tabindex: "-1" }
      }));
    };
    Pager2.prototype.addAriaLabel = function() {
      var classList2 = [".e-mfirst", ".e-mprev", ".e-mnext", ".e-mlast"];
      if (!Browser.isDevice) {
        for (var i = 0; i < classList2.length; i++) {
          var element2 = this.element.querySelector(classList2[parseInt(i.toString(), 10)]);
          element2.setAttribute("aria-label", element2.getAttribute("title"));
        }
      }
    };
    Pager2.prototype.isReactTemplate = function() {
      return (this.isReact || this.isVue) && this.template && typeof this.template !== "string" && !(this.template.prototype && this.template.prototype.CSPTemplate);
    };
    Pager2.prototype.calculateActualWidth = function() {
      var pagerElements = this.element.querySelectorAll(
        /* tslint:disable-next-line:max-line-length */
        ".e-mfirst, .e-mprev, .e-icon-first, .e-icon-prev, .e-pp:not(.e-disable), .e-numericitem:not(.e-hide), .e-numericitem.e-active.e-hide, .e-np:not(.e-disable), .e-icon-next, .e-icon-last, .e-parentmsgbar, .e-mnext, .e-mlast, .e-pagerdropdown, .e-pagerconstant"
      );
      var actualWidth = 0;
      for (var i = 0; i < pagerElements.length; i++) {
        if (getComputedStyle(pagerElements[parseInt(i.toString(), 10)]).display !== "none") {
          actualWidth += pagerElements[parseInt(i.toString(), 10)].offsetWidth + parseFloat(getComputedStyle(pagerElements[parseInt(i.toString(), 10)]).marginLeft) + parseFloat(getComputedStyle(pagerElements[parseInt(i.toString(), 10)]).marginRight);
        }
      }
      var pagerContainer = this.element.querySelector(".e-pagercontainer");
      actualWidth += parseFloat(getComputedStyle(pagerContainer).marginLeft) + parseFloat(getComputedStyle(pagerContainer).marginRight);
      return actualWidth;
    };
    Pager2.prototype.resizePager = function() {
      var _this = this;
      var isStyleApplied = this.element.classList.contains("e-pager") ? getComputedStyle(this.element).getPropertyValue("border-style").includes("solid") : null;
      if (!this.template && isStyleApplied) {
        var pagerContainer = this.element.querySelector(".e-pagercontainer");
        var actualWidth = this.calculateActualWidth();
        var pagerWidth = this.element.clientWidth - parseFloat(getComputedStyle(this.element).paddingLeft) - parseFloat(getComputedStyle(this.element).paddingRight) - parseFloat(getComputedStyle(this.element).marginLeft) - parseFloat(getComputedStyle(this.element).marginRight);
        var numItems = pagerContainer.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');
        var hiddenNumItems = pagerContainer.querySelectorAll('.e-numericitem.e-hide:not([style*="display: none"])');
        var hideFrom = numItems.length;
        var showFrom = 1;
        var bufferWidth = !isNullOrUndefined(parentsUntil(this.element, "e-bigger")) ? 10 : 5;
        var NP = pagerContainer.querySelector(".e-np");
        var PP = pagerContainer.querySelector(".e-pp");
        var detailItems = this.element.querySelectorAll('.e-parentmsgbar:not(.e-hide):not([style*="display: none"]), .e-pagesizes:not(.e-hide):not([style*="display: none"])');
        var totDetailWidth_1 = 0;
        if (detailItems.length) {
          detailItems.forEach(function(item) {
            totDetailWidth_1 += item.offsetWidth;
          });
          this.averageDetailWidth = totDetailWidth_1 / detailItems.length;
        }
        var totalWidth = 0;
        for (var i = 0; i < numItems.length; i++) {
          totalWidth += numItems[parseInt(i.toString(), 10)].offsetWidth + parseFloat(getComputedStyle(numItems[parseInt(i.toString(), 10)]).marginLeft) + parseFloat(getComputedStyle(numItems[parseInt(i.toString(), 10)]).marginRight);
        }
        var numericItemWidth = totalWidth / numItems.length;
        if (pagerWidth > 0 && actualWidth >= pagerWidth - (numericItemWidth ? numericItemWidth : 0)) {
          this.isPagerResized = true;
          if (this.currentPage !== this.totalPages) {
            classList(NP, ["e-numericitem", "e-pager-default"], ["e-nextprevitemdisabled", "e-disable"]);
          }
          actualWidth = this.calculateActualWidth();
          var diff = Math.abs(actualWidth - pagerWidth);
          var numToHide = Math.ceil(diff / numericItemWidth);
          numToHide = numToHide === 0 ? 1 : numToHide > numItems.length ? numItems.length - 1 : numToHide;
          for (var i = 1; i <= numToHide; i++) {
            var hideIndex = hideFrom - parseInt(i.toString(), 10);
            numItems = pagerContainer.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');
            if (this.currentPage !== 1 && (parseInt(numItems[Math.abs(hideIndex)].getAttribute("index"), 10) === this.currentPage || parseInt(numItems[numItems.length - 1].getAttribute("index"), 10) === this.currentPage)) {
              hideIndex = 0;
              classList(PP, ["e-numericitem", "e-pager-default"], ["e-nextprevitemdisabled", "e-disable"]);
            }
            if (numItems[Math.abs(hideIndex)] && !numItems[Math.abs(hideIndex)].classList.contains("e-currentitem")) {
              numItems[Math.abs(hideIndex)].classList.add("e-hide");
            }
          }
          numItems = pagerContainer.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');
          if (numItems.length <= 1 && detailItems.length && window.innerWidth >= 768) {
            var pagerDetailItemsWidth = this.calculateActualWidth();
            if (pagerDetailItemsWidth > pagerWidth - bufferWidth) {
              var detailtoHide = Math.floor((pagerWidth - (pagerDetailItemsWidth - totDetailWidth_1)) / this.averageDetailWidth);
              detailtoHide = detailItems.length - detailtoHide;
              for (var i = 0; i < (detailtoHide > detailItems.length ? detailItems.length : detailtoHide); i++) {
                detailItems[parseInt(i.toString(), 10)].classList.add("e-hide");
              }
            }
          }
        } else if (actualWidth < pagerWidth && hiddenNumItems.length) {
          var diff = Math.abs(pagerWidth - actualWidth);
          var hiddenDetailItems = this.element.querySelectorAll(".e-parentmsgbar.e-hide, .e-pagesizes.e-hide");
          if (hiddenDetailItems.length && diff > this.averageDetailWidth + this.averageDetailWidth / 4) {
            hiddenDetailItems[hiddenDetailItems.length - 1].classList.remove("e-hide");
          }
          if (diff > numericItemWidth * 2 && !hiddenDetailItems.length && window.innerWidth >= 768) {
            var numToShow = Math.floor(diff / (numericItemWidth + bufferWidth));
            numToShow = numToShow > hiddenNumItems.length ? hiddenNumItems.length : numToShow - 1;
            var lesserIndexItems = Array.from(hiddenNumItems).filter(function(item) {
              return parseInt(item.getAttribute("index"), 10) < _this.currentPage;
            }).sort(function(a, b) {
              return parseInt(b.getAttribute("index"), 10) - parseInt(a.getAttribute("index"), 10);
            });
            var greaterIndexItems = Array.from(hiddenNumItems).filter(function(item) {
              return parseInt(item.getAttribute("index"), 10) > _this.currentPage;
            });
            var showItems = lesserIndexItems.length && lesserIndexItems || greaterIndexItems.length && greaterIndexItems;
            for (var i = 1; i <= numToShow; i++) {
              var showItem = showItems && showItems[Math.abs(showFrom - i)];
              if (showItem) {
                showItem.classList.remove("e-hide");
                if (showItem === showItems[showItems.length - 1]) {
                  showItems = null;
                }
              }
            }
          }
        }
        numItems = pagerContainer.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');
        if (numItems.length) {
          if (parseInt(numItems[numItems.length - 1].getAttribute("index"), 10) === this.totalPages) {
            classList(NP, ["e-nextprevitemdisabled", "e-disable"], ["e-numericitem", "e-pager-default"]);
          }
          if (parseInt(numItems[0].getAttribute("index"), 10) === 1) {
            classList(PP, ["e-nextprevitemdisabled", "e-disable"], ["e-numericitem", "e-pager-default"]);
          }
          var isLastSet = Array.from(numItems).some(function(item) {
            return parseInt(item.getAttribute("index"), 10) === _this.totalPages;
          });
          var ppIndex = parseInt(numItems[0].getAttribute("index"), 10) - (isLastSet && !isNullOrUndefined(this.avgNumItems) ? this.avgNumItems : numItems.length);
          PP.setAttribute("index", ppIndex < 1 ? "1" : ppIndex.toString());
          NP.setAttribute("index", (parseInt(numItems[numItems.length - 1].getAttribute("index"), 10) + 1).toString());
          this.avgNumItems = isLastSet ? this.avgNumItems : numItems.length;
        }
        if (this.element.offsetWidth < 769 && window.getComputedStyle(this.element.querySelector(".e-mfirst")).getPropertyValue("display") !== "none" && this.pageSizes) {
          this.element.querySelector(".e-pagesizes").classList.remove("e-hide");
          this.element.querySelector(".e-parentmsgbar").classList.remove("e-hide");
          this.element.classList.add("e-adaptive");
          this.element.querySelector(".e-pagenomsg").innerHTML = this.element.offsetWidth < 481 ? this.currentPage + " / " + this.totalPages : this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"), [this.totalRecordsCount === 0 ? 0 : this.currentPage, this.totalPages || 0, this.totalRecordsCount || 0]) + " ";
        } else {
          this.element.classList.remove("e-adaptive");
          this.element.querySelector(".e-pagenomsg").innerHTML = this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"), [this.totalRecordsCount === 0 ? 0 : this.currentPage, this.totalPages || 0, this.totalRecordsCount || 0]) + " ";
        }
      }
    };
    __decorate([
      Property(false)
    ], Pager2.prototype, "enableQueryString", void 0);
    __decorate([
      Property(false)
    ], Pager2.prototype, "enableExternalMessage", void 0);
    __decorate([
      Property(true)
    ], Pager2.prototype, "enablePagerMessage", void 0);
    __decorate([
      Property(12)
    ], Pager2.prototype, "pageSize", void 0);
    __decorate([
      Property(10)
    ], Pager2.prototype, "pageCount", void 0);
    __decorate([
      Property(1)
    ], Pager2.prototype, "currentPage", void 0);
    __decorate([
      Property()
    ], Pager2.prototype, "totalRecordsCount", void 0);
    __decorate([
      Property()
    ], Pager2.prototype, "externalMessage", void 0);
    __decorate([
      Property(false)
    ], Pager2.prototype, "pageSizes", void 0);
    __decorate([
      Property()
    ], Pager2.prototype, "template", void 0);
    __decorate([
      Property("")
    ], Pager2.prototype, "customText", void 0);
    __decorate([
      Event()
    ], Pager2.prototype, "click", void 0);
    __decorate([
      Property("")
    ], Pager2.prototype, "cssClass", void 0);
    __decorate([
      Event()
    ], Pager2.prototype, "dropDownChanged", void 0);
    __decorate([
      Event()
    ], Pager2.prototype, "created", void 0);
    Pager2 = __decorate([
      NotifyPropertyChanges
    ], Pager2);
    return Pager2;
  }(Component)
);
var PagerDropDown = (
  /** @class */
  function() {
    function PagerDropDown2(pagerModule) {
      this.pagerModule = pagerModule;
    }
    PagerDropDown2.prototype.getModuleName = function() {
      return "pagerdropdown";
    };
    PagerDropDown2.prototype.render = function() {
      var pagerObj = this.pagerModule;
      this.pagerDropDownDiv = createElement("div", { className: "e-pagesizes" });
      var dropDownDiv = createElement("div", { className: "e-pagerdropdown" });
      var defaultTextDiv = createElement("div", { className: "e-pagerconstant" });
      var input = createElement("input", { attrs: { type: "text", tabindex: "-1" } });
      this.pagerCons = createElement("span", {
        className: "e-constant",
        innerHTML: this.pagerModule.getLocalizedLabel("pagerDropDown")
      });
      dropDownDiv.appendChild(input);
      defaultTextDiv.appendChild(this.pagerCons);
      this.pagerDropDownDiv.appendChild(dropDownDiv);
      this.pagerDropDownDiv.appendChild(defaultTextDiv);
      this.pagerModule.element.appendChild(this.pagerDropDownDiv);
      var pageSizesModule = this.pagerModule.pageSizes;
      var pageSizesArray = pageSizesModule.length ? this.convertValue(pageSizesModule) : [this.pagerModule.getLocalizedLabel("All"), "5", "10", "12", "20"];
      var defaultValue = this.pagerModule.pageSize;
      this.dropDownListObject = new DropDownList({
        dataSource: pageSizesArray,
        value: defaultValue.toString(),
        change: this.onChange.bind(this),
        placeholder: this.pagerModule.getLocalizedLabel("pagerDropDown"),
        cssClass: this.pagerModule.cssClass ? "e-alldrop " + this.pagerModule.cssClass : "e-alldrop"
      });
      this.dropDownListObject.appendTo(input);
      if (pageSizesModule.length) {
        this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();
      }
      pagerObj.pageSize = defaultValue;
      pagerObj.dataBind();
      pagerObj.trigger("dropDownChanged", { pageSize: defaultValue });
      this.addEventListener();
    };
    PagerDropDown2.prototype.onChange = function(e) {
      if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel("All")) {
        this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;
        this.pagerModule.isAllPage = true;
        this.refresh();
        e.value = this.pagerModule.pageSize;
        if (document.getElementsByClassName("e-popup-open e-alldrop").length) {
          document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display = "none";
        }
      } else {
        this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);
        this.pagerModule.isAllPage = false;
        if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel("pagerDropDown")) {
          this.refresh();
        }
      }
      this.pagerModule.dataBind();
      if (!this.pagerModule.isCancel) {
        this.pagerModule.trigger("dropDownChanged", {
          pageSize: this.pagerModule.isAllPage || this.pagerModule.isAllPage === void 0 && this.dropDownListObject.value === this.pagerModule.getLocalizedLabel("All") ? this.pagerModule.totalRecordsCount : parseInt(this.dropDownListObject.value, 10)
        });
      }
    };
    PagerDropDown2.prototype.refresh = function() {
      if (this.pagerCons) {
        if (this.isPageSizeAll(this.pagerModule.pageSize)) {
          this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel("pagerAllDropDown");
          this.pagerCons.parentElement.classList.add("e-page-all");
        } else {
          this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel("pagerDropDown");
          this.pagerCons.parentElement.classList.remove("e-page-all");
        }
        this.pagerDropDownDiv.classList.remove("e-hide");
      }
    };
    PagerDropDown2.prototype.beforeValueChange = function(prop) {
      if (typeof prop.newProp.value === "number") {
        var val = prop.newProp.value.toString();
        prop.newProp.value = val;
      }
    };
    PagerDropDown2.prototype.convertValue = function(pageSizeValue) {
      var item = pageSizeValue;
      for (var i = 0; i < item.length; i++) {
        item[parseInt(i.toString(), 10)] = parseInt(item[parseInt(i.toString(), 10)], 10) ? item[parseInt(i.toString(), 10)].toString() : this.pagerModule.getLocalizedLabel(item[parseInt(i.toString(), 10)]) !== "" ? this.pagerModule.getLocalizedLabel(item[parseInt(i.toString(), 10)]) : item[parseInt(i.toString(), 10)];
      }
      return item;
    };
    PagerDropDown2.prototype.isPageSizeAll = function(value) {
      var pageSizeNum = typeof value === "string" && value !== this.pagerModule.getLocalizedLabel("All") ? parseInt(value, 10) : value;
      if (pageSizeNum === this.pagerModule.totalRecordsCount || value === this.pagerModule.getLocalizedLabel("All")) {
        return true;
      } else {
        return false;
      }
    };
    PagerDropDown2.prototype.setDropDownValue = function(prop, value) {
      if (this.dropDownListObject) {
        var isbeforeAll = this.pagerModule.isAllPage;
        this.pagerModule.isAllPage = this.isPageSizeAll(value);
        if (this.pagerModule.isAllPage && typeof this.pagerModule.pageSizes === "object" && this.pagerModule.pageSizes.indexOf("All") === -1) {
          this.pagerModule.isAllPage = false;
        }
        this.pagerModule.checkAll = isbeforeAll && this.pagerModule.isAllPage ? true : false;
        this.dropDownListObject["" + prop] = this.pagerModule.isAllPage ? this.pagerModule.getLocalizedLabel("All") : value;
      }
    };
    PagerDropDown2.prototype.addEventListener = function() {
      this.dropDownListObject.on("beforeValueChange", this.beforeValueChange, this);
    };
    PagerDropDown2.prototype.removeEventListener = function() {
      this.dropDownListObject.off("beforeValueChange", this.beforeValueChange);
    };
    PagerDropDown2.prototype.destroy = function(args) {
      if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {
        this.removeEventListener();
        this.dropDownListObject.destroy();
        remove(this.pagerDropDownDiv);
      }
    };
    return PagerDropDown2;
  }()
);
var ExternalMessage = (
  /** @class */
  function() {
    function ExternalMessage2(pagerModule) {
      this.pagerModule = pagerModule;
    }
    ExternalMessage2.prototype.getModuleName = function() {
      return "externalMessage";
    };
    ExternalMessage2.prototype.render = function() {
      this.element = createElement("div", { className: "e-pagerexternalmsg", attrs: { "aria-label": this.pagerModule.getLocalizedLabel("ExternalMsg") } });
      this.pagerModule.element.appendChild(this.element);
      this.refresh();
    };
    ExternalMessage2.prototype.refresh = function() {
      if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {
        this.showMessage();
        this.element.innerHTML = this.pagerModule.externalMessage;
      } else {
        this.hideMessage();
      }
    };
    ExternalMessage2.prototype.hideMessage = function() {
      if (!isNullOrUndefined(this.element)) {
        this.element.style.display = "none";
      }
    };
    ExternalMessage2.prototype.showMessage = function() {
      this.element.style.display = "";
    };
    ExternalMessage2.prototype.destroy = function() {
      if (this.element && this.element.parentElement) {
        remove(this.element);
      }
    };
    return ExternalMessage2;
  }()
);
var Page = (
  /** @class */
  function() {
    function Page2(parent, pageSettings) {
      this.isInitialRender = true;
      this.isCancel = false;
      Pager.Inject(ExternalMessage, PagerDropDown);
      this.parent = parent;
      this.pageSettings = pageSettings;
      this.addEventListener();
    }
    Page2.prototype.getModuleName = function() {
      return "pager";
    };
    Page2.prototype.render = function() {
      var gObj = this.parent;
      this.pagerDestroy();
      if (!isNullOrUndefined(this.parent.pagerTemplate)) {
        this.pageSettings.template = this.parent.pagerTemplate;
        this.parent.pageTemplateChange = true;
      }
      this.element = this.parent.createElement("div", { className: "e-gridpager" });
      var pagerObj = extend({}, extend$1({}, getActualProperties(this.pageSettings)), {
        click: this.clickHandler.bind(this),
        dropDownChanged: this.onSelect.bind(this),
        enableRtl: gObj.enableRtl,
        locale: gObj.locale,
        created: this.addAriaAttr.bind(this)
      }, ["parentObj", "propName"]);
      pagerObj.cssClass = this.parent.cssClass ? this.parent.cssClass : "";
      this.pagerObj = new Pager(pagerObj, void 0, this.parent);
      this.pagerObj.root = gObj.root ? gObj.root : gObj;
      this.pagerObj.hasParent = true;
      this.pagerObj.on(pagerRefresh, this.renderReactPagerTemplate, this);
      this.pagerObj.allowServerDataBinding = false;
    };
    Page2.prototype.onSelect = function(e) {
      this.pageSettings.pageSize = e.pageSize;
      if (!this.isInitialLoad) {
        this.pageSettings.currentPage = 1;
      }
    };
    Page2.prototype.addAriaAttr = function() {
      if (!this.pageSettings.template) {
        var numericContainerNew = this.parent.createElement("div", { className: "e-numericcontainer" });
        var pagerContainer = this.element.querySelector(".e-pagercontainer");
        var frag = document.createDocumentFragment();
        var numericContainer = this.element.querySelector(".e-numericcontainer");
        var links2 = numericContainer.querySelectorAll("a");
        for (var i = 0; i < links2.length; i++) {
          if (this.parent.getContentTable()) {
            links2[parseInt(i.toString(), 10)].setAttribute("aria-owns", this.parent.getContentTable().id + " " + (i + 1));
          } else {
            links2[parseInt(i.toString(), 10)].setAttribute("aria-owns", this.parent.element.getAttribute("id") + "_content_table " + (i + 1));
          }
          var numericContainerDiv = this.parent.createElement("div");
          numericContainerDiv.appendChild(links2[parseInt(i.toString(), 10)]);
          frag.appendChild(numericContainerDiv);
        }
        numericContainerNew.appendChild(frag);
        pagerContainer.replaceChild(numericContainerNew, numericContainer);
        var classList2 = [".e-mfirst", ".e-mprev", ".e-first", ".e-prev", ".e-next", ".e-last", ".e-mnext", ".e-mlast"];
        for (var j = 0; j < classList2.length; j++) {
          var element2 = this.element.querySelector(classList2[parseInt(j.toString(), 10)]);
          if (this.parent.getContentTable()) {
            element2.setAttribute("aria-owns", this.parent.getContentTable().id + classList2[parseInt(j.toString(), 10)].replace(".e-", " "));
          }
        }
      }
    };
    Page2.prototype.dataReady = function(e) {
      this.updateModel(e);
    };
    Page2.prototype.refresh = function() {
      this.pagerObj.refresh();
    };
    Page2.prototype.goToPage = function(pageNo) {
      this.pagerObj.goToPage(pageNo);
    };
    Page2.prototype.setPageSize = function(pageSize) {
      this.pagerObj.setPageSize(pageSize);
    };
    Page2.prototype.updateModel = function(e) {
      this.parent.pageSettings.totalRecordsCount = e.count;
      var isAddAction = e.action === "add" && e.requestType === "save" || e.requestType === "batchsave";
      if (this.pagerObj.isAllPage && !isAddAction) {
        this.parent.pageSettings.pageSize = this.parent.pageSettings.totalRecordsCount;
      }
      if (isAddAction) {
        if (this.pagerObj.isAllPage && e.count === this.pageSettings.pageSize) {
          this.pagerObj.setProperties({ pageSize: e.count }, true);
        }
      }
      this.parent.dataBind();
    };
    Page2.prototype.onActionComplete = function(e) {
      this.parent.trigger(actionComplete, extend$1(e, {
        currentPage: this.parent.pageSettings.currentPage,
        requestType: "paging",
        type: actionComplete
      }));
    };
    Page2.prototype.onPropertyChanged = function(e) {
      if (e.module !== this.getModuleName()) {
        return;
      }
      var newProp = e.properties;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        this.pagerObj["" + prop] = newProp["" + prop];
      }
      this.pagerObj.dataBind();
    };
    Page2.prototype.clickHandler = function(e) {
      var gObj = this.parent;
      if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving && !this.isCancel) {
        if (!this.isForceCancel) {
          if (!isNullOrUndefined(e.newProp) && !isNullOrUndefined(e.newProp.pageSize)) {
            gObj.notify(preventBatch, { instance: this, handler: this.setPageSize, arg1: e.newProp.pageSize });
            this.pagerObj.setProperties({ pageSize: e.oldProp.pageSize }, true);
            this.parent.setProperties({ pageSettings: { pageSize: e.oldProp.pageSize } }, true);
            this.pagerObj.setProperties({
              currentPage: gObj.pageSettings.currentPage === this.pagerObj.currentPage ? this.pagerObj.previousPageNo : gObj.pageSettings.currentPage
            }, true);
          } else if (e.currentPage) {
            gObj.notify(preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });
            this.pagerObj.currentPage = gObj.pageSettings.currentPage === this.pagerObj.currentPage ? this.pagerObj.previousPageNo : gObj.pageSettings.currentPage;
          }
          this.isForceCancel = true;
          this.pagerObj.dataBind();
        } else {
          this.isForceCancel = false;
        }
        e.cancel = true;
        return;
      }
      gObj.pageSettings.pageSize = this.pagerObj.pageSize;
      gObj.prevPageMoving = false;
      var prevPage = this.pageSettings.currentPage;
      var args = {
        cancel: false,
        requestType: "paging",
        previousPage: prevPage,
        currentPage: e.currentPage,
        pageSize: gObj.pageSettings.pageSize,
        type: actionBegin
      };
      if (!this.isCancel) {
        this.pageSettings.currentPage = e.currentPage;
        this.parent.notify(modelChanged, args);
        gObj.pageRequireRefresh = false;
      }
      if (args.cancel) {
        e.cancel = true;
        this.parent.setProperties({ pageSettings: { currentPage: prevPage } }, true);
        this.pagerObj.setProperties({ currentPage: prevPage }, true);
        this.isCancel = true;
        return;
      }
      this.isCancel = false;
      this.parent.requestTypeAction = "paging";
    };
    Page2.prototype.keyPressHandler = function(e) {
      if (e.action in keyActions) {
        e.preventDefault();
        var element2 = this.element.querySelector(keyActions[e.action]);
        if (!element2.classList.contains("e-nextprevitemdisabled")) {
          element2.click();
        }
      }
    };
    Page2.prototype.updateExternalMessage = function(message) {
      if (!this.pagerObj.enableExternalMessage) {
        this.pagerObj.enableExternalMessage = true;
        this.pagerObj.dataBind();
      }
      this.pagerObj.externalMessage = message;
      this.pagerObj.dataBind();
    };
    Page2.prototype.appendToElement = function() {
      this.isInitialLoad = true;
      this.parent.element.appendChild(this.element);
      this.parent.setGridPager(this.element);
      this.pagerObj.isReact = this.parent.isReact;
      this.pagerObj.isVue = this.parent.isVue || this.parent.parentDetails && this.parent.parentDetails.parentInstObj && this.parent.parentDetails.parentInstObj.isVue;
      this.pagerObj.appendTo(this.element);
      this.isInitialLoad = false;
    };
    Page2.prototype.enableAfterRender = function(e) {
      if (e.module === this.getModuleName() && e.enable) {
        this.render();
        this.appendToElement();
        if (this.isReactTemplate()) {
          this.pagerObj.updateTotalPages();
          this.created();
        }
      }
    };
    Page2.prototype.addEventListener = function() {
      this.handlers = {
        load: this.render,
        end: this.appendToElement,
        ready: this.dataReady,
        complete: this.onActionComplete,
        updateLayout: this.enableAfterRender,
        inboundChange: this.onPropertyChanged,
        keyPress: this.keyPressHandler,
        created: this.created
      };
      if (this.parent.isDestroyed) {
        return;
      }
      if (this.parent.isReact || this.parent.isVue) {
        this.parent.addEventListener(create, this.handlers.created.bind(this));
      }
      this.evtHandlers = [
        { event: initialLoad, handler: this.handlers.load },
        { event: initialEnd, handler: this.handlers.end },
        { event: dataReady, handler: this.handlers.ready },
        { event: pageComplete, handler: this.handlers.complete },
        { event: uiUpdate, handler: this.handlers.updateLayout },
        { event: inBoundModelChanged, handler: this.handlers.inboundChange },
        { event: keyPressed, handler: this.handlers.keyPress },
        { event: destroy, handler: this.destroy }
      ];
      addRemoveEventListener(this.parent, this.evtHandlers, true, this);
    };
    Page2.prototype.created = function() {
      if (this.isInitialRender && this.isReactTemplate()) {
        this.isInitialRender = false;
        this.renderReactPagerTemplate();
      }
    };
    Page2.prototype.isReactTemplate = function() {
      return (this.parent.isReact || this.parent.isVue) && this.pagerObj.template && typeof this.pagerObj.template !== "string";
    };
    Page2.prototype.renderReactPagerTemplate = function() {
      if (!this.isInitialRender && this.isReactTemplate()) {
        var result = void 0;
        this.parent.destroyTemplate(["pagerTemplate"]);
        this.element.classList.add("e-pagertemplate");
        this.pagerObj.compile(this.pagerObj.template);
        var page = this.parent.pageSettings;
        var data = {
          currentPage: page.currentPage,
          pageSize: page.pageSize,
          pageCount: page.pageCount,
          totalRecordsCount: page.totalRecordsCount,
          totalPages: this.pagerObj.totalPages
        };
        var tempId = this.parent.id + "_pagertemplate";
        if (this.parent.isReact) {
          this.pagerObj.templateFn(data, this.parent, "pagerTemplate", tempId, null, null, this.pagerObj.element);
          this.parent.renderTemplates();
        } else {
          result = this.pagerObj.templateFn(data, this.parent, "pagerTemplate");
          appendChildren(this.pagerObj.element, result);
        }
      }
    };
    Page2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      if (this.parent.isReact || this.parent.isVue) {
        this.parent.removeEventListener(create, this.handlers.created);
      }
      this.parent.off(pagerRefresh, this.renderReactPagerTemplate);
      addRemoveEventListener(this.parent, this.evtHandlers, false);
    };
    Page2.prototype.destroy = function() {
      this.removeEventListener();
      if (this.isReactTemplate()) {
        this.parent.destroyTemplate(["pagerTemplate"]);
      }
      this.pagerObj.destroy();
    };
    Page2.prototype.pagerDestroy = function() {
      if (this.pagerObj && !this.pagerObj.isDestroyed) {
        this.pagerObj.destroy();
        remove(this.element);
      }
    };
    return Page2;
  }()
);
var keyActions = {
  pageUp: ".e-prev",
  pageDown: ".e-next",
  ctrlAltPageDown: ".e-last",
  ctrlAltPageUp: ".e-first",
  altPageUp: ".e-pp",
  altPageDown: ".e-np"
};
var __extends = /* @__PURE__ */ function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p in b2) if (b2.hasOwnProperty(p)) d2[p] = b2[p];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var GridComponent = (
  /** @class */
  function(_super) {
    __extends(GridComponent2, _super);
    function GridComponent2(props) {
      var _this = _super.call(this, props) || this;
      _this.initRenderCalled = false;
      _this.checkInjectedModules = true;
      _this.directivekeys = { "columns": { "column": { "stackedColumns": "stackedColumn" } }, "aggregates": { "aggregate": { "aggregateColumns": "aggregateColumn" } } };
      _this.statelessTemplateProps = null;
      _this.templateProps = ["template", "headerTemplate", "commandsTemplate", "filter.itemTemplate", "editTemplate", "filterTemplate", "columnChooserSettings.headerTemplate", "columnChooserSettings.template", "columnChooserSettings.footerTemplate"];
      _this.immediateRender = false;
      _this.isReactMock = true;
      _this.portals = [];
      return _this;
    }
    GridComponent2.prototype.render = function() {
      this.isReactMock = false;
      if ((this.element && !this.initRenderCalled || this.refreshing) && !this.isReactForeceUpdate) {
        _super.prototype.render.call(this);
        this.initRenderCalled = true;
      } else {
        return React.createElement("div", this.getDefaultAttributes(), [].concat(this.props.children, this.portals));
      }
    };
    return GridComponent2;
  }(Grid)
);
applyMixins(GridComponent, [ComponentBase, React.Component]);
const AllUsers = () => {
  const {
    users
  } = AllUsersData();
  const [userData, setUserData] = useState([]);
  useEffect(() => {
    if (users && users.length > 0) {
      console.log("Fetched users:", users);
      setTimeout(() => {
        setUserData(users);
        console.log("User data loaded into grid.");
      }, 300);
    }
  }, [users]);
  const roleTemplate = (props) => {
    const colorClass = props.role === "ADMIN" ? "text-red-600" : "text-green-600";
    return /* @__PURE__ */ jsx("span", {
      className: `font-bold ${colorClass}`,
      children: props.role
    });
  };
  return /* @__PURE__ */ jsxs("main", {
    className: "all-users wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: "ALL CUSTOMERS",
      description: "Check out all users"
    }), /* @__PURE__ */ jsxs(GridComponent, {
      dataSource: userData,
      allowPaging: true,
      pageSettings: {
        pageSize: 10
      },
      children: [/* @__PURE__ */ jsxs(ColumnsDirective, {
        children: [/* @__PURE__ */ jsx(ColumnDirective, {
          field: "id",
          headerText: "ID",
          width: "50",
          textAlign: "Left"
        }), /* @__PURE__ */ jsx(ColumnDirective, {
          field: "username",
          headerText: "Username",
          width: "120",
          textAlign: "Left"
        }), /* @__PURE__ */ jsx(ColumnDirective, {
          field: "email",
          headerText: "E-mail",
          width: "150",
          textAlign: "Left"
        }), /* @__PURE__ */ jsx(ColumnDirective, {
          field: "createdAt",
          headerText: "Date Joined",
          width: "100",
          textAlign: "Center",
          template: ({
            createdAt
          }) => formatDate(createdAt)
        }), /* @__PURE__ */ jsx(ColumnDirective, {
          field: "role",
          headerText: "ROLE",
          width: "100",
          textAlign: "Center",
          template: roleTemplate
        })]
      }), /* @__PURE__ */ jsx(Inject, {
        services: [Page]
      })]
    })]
  });
};
const allUsers = withComponentProps(AllUsers);
const route6 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: allUsers
}, Symbol.toStringTag, { value: "Module" }));
const AllProduct = () => {
  const [searchName, setSearchName] = useState("");
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [data, setData] = useState([]);
  const [viewMode, setViewMode] = useState("grid");
  const [currentPage, setCurrentPage] = useState(1);
  const itemsPerPage = 8;
  const {
    categories
  } = useCategories();
  useGetProductByName(searchName);
  const {
    products: categoryProducts
  } = useGetProductsByCategoryId(selectedCategory);
  const {
    products: allProducts
  } = AllProducts();
  const CreatedAtTemplate = (props) => /* @__PURE__ */ jsx("span", {
    children: formatDate(props.createdAt)
  });
  const UpdatedAtTemplate = (props) => /* @__PURE__ */ jsx("span", {
    children: formatDate(props.updatedAt)
  });
  useEffect(() => {
    const fetchProducts = async () => {
      try {
        console.log("Fetching all products from API...");
        const response = await getAllProducts();
        setTimeout(() => {
          setData(response);
          console.log("Products successfully fetched.");
        }, 300);
      } catch (error2) {
        console.error("Failed to load products", error2);
      }
    };
    fetchProducts();
  }, []);
  const handleFilter = () => {
    console.log("Filter button clicked.");
    if (!searchName && selectedCategory === null) {
      console.log("No filters applied. Showing all products.");
      setData(allProducts);
      return;
    }
    if (!searchName && selectedCategory !== null) {
      console.log(`Filtering by category ID using hook: ${selectedCategory}`);
      setData(categoryProducts);
      return;
    }
    let filtered = allProducts;
    if (searchName) {
      console.log(`Filtering by name: '${searchName}'`);
      filtered = filtered.filter((p) => p.name.toLowerCase().includes(searchName.toLowerCase()));
    }
    if (selectedCategory !== null) {
      console.log(`Further filtering by category ID: ${selectedCategory}`);
      filtered = filtered.filter((p) => p.categoryId === selectedCategory);
    }
    console.log("Final filtered data:", filtered);
    setData(filtered);
  };
  const handleReset = () => {
    console.log("Reset button clicked.");
    setSearchName("");
    setSelectedCategory(null);
    setData(allProducts);
  };
  const paginatedProducts = data.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
  const totalPages = Math.ceil(data.length / itemsPerPage);
  return /* @__PURE__ */ jsxs("main", {
    className: "all-users wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: "ALL PRODUCTS",
      description: "Check out all Products",
      createText: "CREATE",
      createUrl: "/product/create"
    }), /* @__PURE__ */ jsxs("div", {
      className: "flex flex-wrap gap-4 mb-6 items-center",
      children: [/* @__PURE__ */ jsx("input", {
        type: "text",
        placeholder: "Name",
        value: searchName,
        onChange: (e) => setSearchName(e.target.value),
        className: "border border-gray-300 rounded px-3 py-2"
      }), /* @__PURE__ */ jsxs("select", {
        value: selectedCategory !== null ? selectedCategory.toString() : "",
        onChange: (e) => setSelectedCategory(e.target.value ? BigInt(e.target.value) : null),
        className: "border border-gray-300 rounded px-3 py-2",
        children: [/* @__PURE__ */ jsx("option", {
          value: "",
          children: "Filter by Category"
        }), categories.map((cat) => /* @__PURE__ */ jsx("option", {
          value: cat.id.toString(),
          children: cat.name
        }, cat.id.toString()))]
      }), /* @__PURE__ */ jsx("button", {
        onClick: handleFilter,
        className: "bg-blue-600 text-white rounded px-4 py-2",
        children: "Filter"
      }), /* @__PURE__ */ jsx("button", {
        onClick: handleReset,
        className: "bg-gray-400 text-white rounded px-4 py-2",
        children: "Reset"
      }), /* @__PURE__ */ jsx("button", {
        onClick: () => {
          console.log(`Switching view mode to: ${viewMode === "grid" ? "cards" : "grid"}`);
          setViewMode(viewMode === "grid" ? "cards" : "grid");
        },
        className: "ml-auto !bg-primary-100 !h-10 !w-30 md:w-[240px] text-white rounded px-4 py-2",
        children: viewMode === "grid" ? "Card View" : "Grid View"
      })]
    }), viewMode === "grid" ? (
      // GridComponent View
      /* @__PURE__ */ jsxs(GridComponent, {
        dataSource: data,
        allowPaging: true,
        pageSettings: {
          pageSize: 10
        },
        children: [/* @__PURE__ */ jsxs(ColumnsDirective, {
          children: [/* @__PURE__ */ jsx(ColumnDirective, {
            field: "id",
            headerText: "ID",
            width: "50",
            textAlign: "Left"
          }), /* @__PURE__ */ jsx(ColumnDirective, {
            field: "name",
            headerText: "Name",
            width: "100",
            textAlign: "Left"
          }), /* @__PURE__ */ jsx(ColumnDirective, {
            field: "description",
            headerText: "Description",
            width: "200",
            textAlign: "Left"
          }), /* @__PURE__ */ jsx(ColumnDirective, {
            field: "price",
            headerText: "Price",
            width: "70",
            textAlign: "Center"
          }), /* @__PURE__ */ jsx(ColumnDirective, {
            field: "stockQuantity",
            headerText: "Stock",
            width: "70",
            textAlign: "Center"
          }), /* @__PURE__ */ jsx(ColumnDirective, {
            field: "categoryId",
            headerText: "Category ID",
            width: "100",
            textAlign: "Center"
          }), /* @__PURE__ */ jsx(ColumnDirective, {
            field: "createdAt",
            headerText: "Created On",
            width: "100",
            textAlign: "Center",
            template: CreatedAtTemplate
          }), /* @__PURE__ */ jsx(ColumnDirective, {
            field: "updatedAt",
            headerText: "Updated On",
            width: "100",
            textAlign: "Center",
            template: UpdatedAtTemplate
          })]
        }), /* @__PURE__ */ jsx(Inject, {
          services: [Page]
        })]
      })
    ) : (
      // Card View
      /* @__PURE__ */ jsx("section", {
        className: "flex flex-col gap-6",
        children: /* @__PURE__ */ jsxs("section", {
          className: "container",
          children: [/* @__PURE__ */ jsx("h1", {
            className: "text-xl font-semibold text-dark-100",
            children: "PRODUCTS"
          }), /* @__PURE__ */ jsx("div", {
            className: "grid grid-cols-1 md:grid-cols-4 gap-6 w-full",
            children: paginatedProducts.map((product2) => /* @__PURE__ */ jsx(ProductCard, {
              product: product2
            }, product2.id))
          }), /* @__PURE__ */ jsxs("div", {
            className: "flex justify-center items-center gap-4 mt-6",
            children: [/* @__PURE__ */ jsx("button", {
              onClick: () => setCurrentPage((prev) => Math.max(prev - 1, 1)),
              disabled: currentPage === 1,
              className: "px-4 py-2 bg-gray-300 rounded disabled:opacity-50",
              children: "Prev"
            }), /* @__PURE__ */ jsxs("span", {
              children: ["Page ", currentPage, " of ", totalPages]
            }), /* @__PURE__ */ jsx("button", {
              onClick: () => setCurrentPage((prev) => Math.min(prev + 1, totalPages)),
              disabled: currentPage === totalPages,
              className: "px-4 py-2 bg-gray-300 rounded disabled:opacity-50",
              children: "Next"
            })]
          })]
        })
      })
    )]
  });
};
const allProduct = withComponentProps(AllProduct);
const route7 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: allProduct
}, Symbol.toStringTag, { value: "Module" }));
const AllCategories = () => {
  const {
    categories
  } = useCategories();
  const {
    updateCategory
  } = useUpdateCategory();
  const {
    deleteCategory
  } = useDeleteCategory();
  const [editingRows, setEditingRows] = useState({});
  const handleEditClick = (category) => {
    console.log("Edit button clicked for category:", category);
    setEditingRows((prev) => ({
      ...prev,
      [category.id]: {
        name: category.name,
        description: category.description
      }
    }));
  };
  const handleDeleteClick = async (categoryId) => {
    if (!window.confirm("Are you sure you want to delete this category?")) return;
    console.log("Deleting category with ID:", categoryId);
    await deleteCategory(BigInt(categoryId));
    setTimeout(() => window.location.reload(), 300);
  };
  const handleInputChange = (e, categoryId) => {
    const {
      name,
      value
    } = e.target;
    setEditingRows((prev) => ({
      ...prev,
      [categoryId]: {
        ...prev[categoryId],
        [name]: value
      }
    }));
  };
  const handleSaveClick = async (categoryId) => {
    const data = editingRows[categoryId];
    if (!data) return;
    console.log("Saving category with ID:", categoryId, "New data:", data);
    await updateCategory(BigInt(categoryId), {
      id: categoryId,
      name: data.name,
      description: data.description
    });
    setEditingRows((prev) => {
      const updated = {
        ...prev
      };
      delete updated[categoryId];
      return updated;
    });
    setTimeout(() => window.location.reload(), 500);
  };
  const handleCancelClick = (categoryId) => {
    console.log("Cancel edit for category ID:", categoryId);
    setEditingRows((prev) => {
      const updated = {
        ...prev
      };
      delete updated[categoryId];
      return updated;
    });
  };
  const NameTemplate = (props) => {
    var _a;
    const isEditing = editingRows.hasOwnProperty(props.id);
    return isEditing ? /* @__PURE__ */ jsx("input", {
      type: "text",
      name: "name",
      value: ((_a = editingRows[props.id]) == null ? void 0 : _a.name) || "",
      onChange: (e) => handleInputChange(e, props.id),
      className: "border border-gray-300 p-1 w-full"
    }) : /* @__PURE__ */ jsx("span", {
      children: props.name
    });
  };
  const DescTemplate = (props) => {
    var _a;
    const isEditing = editingRows.hasOwnProperty(props.id);
    return isEditing ? /* @__PURE__ */ jsx("input", {
      type: "text",
      name: "description",
      value: ((_a = editingRows[props.id]) == null ? void 0 : _a.description) || "",
      onChange: (e) => handleInputChange(e, props.id),
      className: "border border-gray-300 p-1 w-full"
    }) : /* @__PURE__ */ jsx("span", {
      children: props.description
    });
  };
  const ActionTemplate = (props) => {
    const isEditing = editingRows.hasOwnProperty(props.id);
    return /* @__PURE__ */ jsx("div", {
      className: "flex gap-2",
      children: isEditing ? /* @__PURE__ */ jsxs(Fragment, {
        children: [/* @__PURE__ */ jsx("button", {
          onClick: () => handleSaveClick(props.id),
          className: "bg-green-500 text-white px-2 py-1 rounded",
          children: "Save"
        }), /* @__PURE__ */ jsx("button", {
          onClick: () => handleCancelClick(props.id),
          className: "bg-gray-500 text-white px-2 py-1 rounded",
          children: "Cancel"
        })]
      }) : /* @__PURE__ */ jsxs(Fragment, {
        children: [/* @__PURE__ */ jsx("button", {
          onClick: () => handleEditClick(props),
          className: "bg-blue-500 text-white px-2 py-1 rounded",
          children: "Update"
        }), /* @__PURE__ */ jsx("button", {
          onClick: () => handleDeleteClick(props.id),
          className: "bg-red-600 text-white px-2 py-1 rounded",
          children: "Delete"
        })]
      })
    });
  };
  return /* @__PURE__ */ jsxs("main", {
    className: "all-users wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: "ALL Categories",
      description: "Check out all Categories",
      createText: "CREATE",
      createUrl: "/category/create"
    }), /* @__PURE__ */ jsxs(GridComponent, {
      dataSource: categories,
      allowPaging: true,
      pageSettings: {
        pageSize: 15
      },
      children: [/* @__PURE__ */ jsxs(ColumnsDirective, {
        children: [/* @__PURE__ */ jsx(ColumnDirective, {
          field: "id",
          headerText: "ID",
          width: "50",
          textAlign: "Left"
        }), /* @__PURE__ */ jsx(ColumnDirective, {
          field: "name",
          headerText: "Name",
          width: "120",
          template: NameTemplate
        }), /* @__PURE__ */ jsx(ColumnDirective, {
          field: "description",
          headerText: "Description",
          width: "220",
          template: DescTemplate
        }), /* @__PURE__ */ jsx(ColumnDirective, {
          headerText: "Actions",
          width: "180",
          template: ActionTemplate
        })]
      }), /* @__PURE__ */ jsx(Inject, {
        services: [Page]
      })]
    })]
  });
};
const allCategories = withComponentProps(AllCategories);
const route8 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: allCategories
}, Symbol.toStringTag, { value: "Module" }));
const CreateProduct = () => {
  const [product, setProduct] = useState({
    name: "",
    description: "",
    price: 0,
    stockQuantity: 0,
    categoryId: 0,
    image: ""
  });
  const {
    categories
  } = useCategories();
  const navigate = useNavigate();
  const handleChange = (e) => {
    const {
      name,
      value,
      type,
      files
    } = e.target;
    if (type === "file" && files) {
      setProduct({
        ...product,
        [name]: files[0].name
      });
    } else {
      setProduct({
        ...product,
        [name]: type === "number" ? Number(value) : value
      });
    }
  };
  const delay2 = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
  const handleSubmit = async (e) => {
    e.preventDefault();
    console.log("📝 Submitting product:", product);
    if (!product.name || !product.description || product.price <= 0 || product.stockQuantity < 0 || product.categoryId <= 0) {
      alert("⚠️ Please fill out all fields correctly.");
      console.warn("🚨 Validation failed:", product);
      return;
    }
    try {
      const formattedProduct = {
        ...product,
        price: parseFloat(product.price.toString()),
        // ✅ to double
        stock: parseInt(product.stockQuantity.toString(), 10),
        // ✅ to int
        categoryId: parseInt(product.categoryId.toString(), 10)
        // ✅ to int
      };
      console.log(" Formatted product payload:", formattedProduct);
      await delay2(1e3);
      const response = await createProduct$1(formattedProduct);
      alert("✅ Product Created!");
      console.log("✅ Product Created:", response);
      setProduct({
        name: "",
        description: "",
        price: 0,
        stockQuantity: 0,
        categoryId: 0,
        image: ""
      });
      navigate("/all-product");
    } catch (error) {
      console.error("❌ Error creating product:", error);
    }
  };
  return /* @__PURE__ */ jsxs("main", {
    className: "flex flex-col gap-10 pb-20 wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: "Add a New Product",
      description: "CREATE A PRODUCT"
    }), /* @__PURE__ */ jsx("section", {
      className: "mt-2.5 wrapper-md",
      children: /* @__PURE__ */ jsx("form", {
        className: "product-form",
        onSubmit: handleSubmit,
        children: /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("label", {
            htmlFor: "name",
            children: "Name"
          }), /* @__PURE__ */ jsx("input", {
            type: "text",
            name: "name",
            id: "name",
            value: product.name,
            onChange: handleChange,
            placeholder: "Name",
            className: "form-input placeholder:text-gray-100"
          }), /* @__PURE__ */ jsx("label", {
            htmlFor: "description",
            children: "Description"
          }), /* @__PURE__ */ jsx("input", {
            type: "text",
            name: "description",
            id: "description",
            value: product.description,
            onChange: handleChange,
            placeholder: "Description",
            className: "form-input placeholder:text-gray-100"
          }), /* @__PURE__ */ jsx("label", {
            htmlFor: "price",
            children: "Price"
          }), /* @__PURE__ */ jsx("input", {
            type: "text",
            name: "price",
            id: "price",
            value: product.price,
            onChange: handleChange,
            placeholder: "Price",
            className: "form-input placeholder:text-gray-100"
          }), /* @__PURE__ */ jsx("label", {
            htmlFor: "stock",
            children: "Stock"
          }), /* @__PURE__ */ jsx("input", {
            type: "text",
            name: "stockQuantity",
            id: "stockQuantity",
            value: product.stockQuantity,
            onChange: handleChange,
            placeholder: "Stock",
            className: "form-input placeholder:text-gray-100"
          }), /* @__PURE__ */ jsx("label", {
            htmlFor: "categoryId",
            children: "Category Id"
          }), /* @__PURE__ */ jsxs("select", {
            value: product.categoryId !== 0 ? product.categoryId.toString() : "",
            onChange: (e) => setProduct({
              ...product,
              categoryId: e.target.value ? BigInt(e.target.value) : 0
            }),
            className: "form-input placeholder:text-gray-100",
            children: [/* @__PURE__ */ jsx("option", {
              value: "",
              children: "Category"
            }), categories.map((cat) => /* @__PURE__ */ jsx("option", {
              value: cat.id.toString(),
              children: cat.name
            }, cat.id.toString()))]
          }), /* @__PURE__ */ jsx("label", {
            htmlFor: "image",
            children: "Image URL"
          }), /* @__PURE__ */ jsx("input", {
            type: "text",
            name: "image",
            id: "image",
            value: product.image,
            onChange: handleChange,
            placeholder: "Image",
            className: "form-input placeholder:text-gray-100"
          }), /* @__PURE__ */ jsxs(ButtonComponent, {
            type: "submit",
            className: "button-class !bg-primary-100 !h-11 !w-full md:w-[240px]",
            children: [/* @__PURE__ */ jsx("img", {
              src: "/assets/icons/plus.svg",
              alt: "plus",
              className: "size-5"
            }), /* @__PURE__ */ jsx("span", {
              className: "p-16-semibold text-white",
              children: "SUBMIT"
            })]
          })]
        })
      })
    })]
  });
};
const createProduct = withComponentProps(CreateProduct);
const route9 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: createProduct
}, Symbol.toStringTag, { value: "Module" }));
const CreateCategory = () => {
  console.log(" CREATE CATEGORY COMPONENT RENDERED");
  const [category, setCategory] = useState({
    name: "",
    description: ""
  });
  const {
    addNewCategory,
    loading
  } = useAddCategory();
  const navigate = useNavigate();
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    const updatedCategory = {
      ...category,
      [name]: value
    };
    setCategory(updatedCategory);
    console.log("📝 Form State Updated:", updatedCategory);
  };
  const handleSubmit = async (e) => {
    e.preventDefault();
    console.log("🚀 Submitting New Category:", category);
    try {
      const response = await addNewCategory(category);
      alert("✅ Category Created!");
      console.log("✅ Category Created Successfully:", response);
      setCategory({
        name: "",
        description: ""
      });
      navigate("/all-categories");
    } catch (error) {
      console.error("❌ Error while creating category:", error);
    }
  };
  return /* @__PURE__ */ jsxs("main", {
    className: "flex flex-col gap-10 pb-20 wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: "Add a New Category",
      description: "CREATE A CATEGORY"
    }), /* @__PURE__ */ jsx("section", {
      className: "mt-2.5 wrapper-md",
      children: /* @__PURE__ */ jsx("form", {
        className: "product-form",
        onSubmit: handleSubmit,
        children: /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("label", {
            htmlFor: "name",
            children: "Name"
          }), /* @__PURE__ */ jsx("input", {
            type: "text",
            name: "name",
            id: "name",
            value: category.name,
            onChange: handleChange,
            placeholder: "Name",
            className: "form-input placeholder:text-gray-100",
            disabled: loading
          }), /* @__PURE__ */ jsx("label", {
            htmlFor: "description",
            children: "Description"
          }), /* @__PURE__ */ jsx("input", {
            type: "text",
            name: "description",
            id: "description",
            value: category.description,
            onChange: handleChange,
            placeholder: "Description",
            className: "form-input placeholder:text-gray-100",
            disabled: loading
          }), /* @__PURE__ */ jsxs(ButtonComponent, {
            type: "submit",
            className: "button-class !bg-primary-100 !h-11 !w-full md:w-[240px] mt-4",
            disabled: loading,
            children: [/* @__PURE__ */ jsx("img", {
              src: "/assets/icons/plus.svg",
              alt: "plus",
              className: "size-5"
            }), /* @__PURE__ */ jsx("span", {
              className: "p-16-semibold text-white",
              children: loading ? "CREATING..." : "SUBMIT"
            })]
          })]
        })
      })
    })]
  });
};
const createCategory = withComponentProps(CreateCategory);
const route10 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: createCategory
}, Symbol.toStringTag, { value: "Module" }));
const ProductDetail = () => {
  const {
    productId
  } = useParams$1();
  const navigate = useNavigate$1();
  const {
    product,
    error
  } = useProductById(Number(productId));
  const {
    deleteProduct,
    loading: deleteLoading
  } = useDeleteProduct();
  const [isEditing, setIsEditing] = useState(false);
  const [formProduct, setFormProduct] = useState(null);
  const [updateError, setUpdateError] = useState(null);
  const [updateLoading, setUpdateLoading] = useState(false);
  const [categoryName, setCategoryName] = useState("");
  useEffect(() => {
    if (product) {
      const fetchCategoryName = async () => {
        try {
          const name = await getCategoryNameById(BigInt(product.categoryId));
          setCategoryName(name);
        } catch (err) {
          console.error("❌ Error fetching category name:", err);
          setCategoryName("Unknown");
        }
      };
      fetchCategoryName();
    }
  }, [product]);
  console.log("📝 PRODUCT DETAIL PAGE LOADED — CATEGORY:", categoryName);
  if (error) return /* @__PURE__ */ jsx("p", {
    className: "text-red-500",
    children: error
  });
  if (!product) return /* @__PURE__ */ jsx("p", {
    children: "Loading product details..."
  });
  const imageUrl = product.imageUrl || "/assets/icons/product.png";
  const handleDelete = async () => {
    if (!window.confirm("Are you sure you want to delete this product?")) return;
    try {
      await deleteProduct(BigInt(productId));
      alert("🗑️ Product deleted successfully!");
      navigate("/all-product");
    } catch (err) {
      console.error("❌ Error deleting product:", err);
      alert("Failed to delete product.");
    }
  };
  const handleEditClick = () => {
    setIsEditing(true);
    setFormProduct({
      ...product
    });
  };
  const handleChange = (e) => {
    const {
      name,
      value
    } = e.target;
    if (!formProduct) return;
    setFormProduct({
      ...formProduct,
      [name]: value
    });
  };
  const handleSubmit = async (e) => {
    e.preventDefault();
    if (!formProduct) return;
    setUpdateLoading(true);
    console.log("🔄 Updating Product:", formProduct);
    try {
      const updatedProduct = {
        ...formProduct,
        price: parseFloat(formProduct.price),
        stock: parseInt(formProduct.stockQuantity),
        categoryId: parseInt(formProduct.categoryId)
      };
      await updateProductById(Number(productId), updatedProduct);
      alert("✅ Product Updated!");
      window.location.reload();
    } catch (error2) {
      console.error("❌ Error updating product:", error2);
      setUpdateError("Failed to update product.");
    } finally {
      setUpdateLoading(false);
    }
  };
  return /* @__PURE__ */ jsxs("main", {
    className: "product-detail wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: "PRODUCT DETAIL",
      description: "View and edit product details"
    }), /* @__PURE__ */ jsxs("section", {
      className: "container wrapper-md",
      children: [/* @__PURE__ */ jsx("header", {
        children: /* @__PURE__ */ jsx("h1", {
          className: "p-40-semibold text-dark-100",
          children: product.name
        })
      }), /* @__PURE__ */ jsx("section", {
        className: "gallery h-80 w-80 flex",
        children: /* @__PURE__ */ jsx("img", {
          src: imageUrl,
          alt: product.name,
          className: "w-full rounded-xl object-cover md:col-span-2 md:row-span-2 h-[330px]"
        })
      }), /* @__PURE__ */ jsxs("div", {
        className: "text-sm text-gray-600",
        children: ["Category: ", categoryName]
      }), /* @__PURE__ */ jsx("section", {
        className: "flex gap-3 md:gap-5 items-center flex-wrap mt-2",
        children: /* @__PURE__ */ jsx(ChipListComponent, {
          id: "product-chip",
          children: /* @__PURE__ */ jsxs(ChipsDirective, {
            children: [/* @__PURE__ */ jsx(ChipDirective, {
              text: `Stock: ${product.stockQuantity}`
            }), /* @__PURE__ */ jsx(ChipDirective, {
              text: `Created: ${formatDate(product.createdAt)}`
            }), /* @__PURE__ */ jsx(ChipDirective, {
              text: `Updated: ${formatDate(product.updatedAt)}`
            })]
          })
        })
      }), /* @__PURE__ */ jsx("section", {
        className: "title mt-4",
        children: /* @__PURE__ */ jsxs("h2", {
          children: ["Price: ₹", product.price]
        })
      }), /* @__PURE__ */ jsx("p", {
        className: "text-sm md:text-lg font-normal text-dark-400",
        children: product.description
      }), /* @__PURE__ */ jsxs(ButtonComponent, {
        onClick: handleEditClick,
        type: "button",
        className: "button-class !bg-blue-500/10 !h-11 !w-full md:w-[240px] mt-4",
        children: [/* @__PURE__ */ jsx("img", {
          src: "/assets/icons/refresh.svg",
          alt: "edit",
          className: "size-5"
        }), /* @__PURE__ */ jsx("span", {
          className: "p-16-semibold  text-green-500",
          children: "UPDATE"
        })]
      }), isEditing && /* @__PURE__ */ jsxs("form", {
        className: "product-form mt-6",
        onSubmit: handleSubmit,
        children: [["name", "description", "price", "stockQuantity", "categoryId", "imageUrl"].map((field) => /* @__PURE__ */ jsxs("div", {
          children: [/* @__PURE__ */ jsx("label", {
            htmlFor: field,
            children: field.replace(/([A-Z])/g, " $1")
          }), /* @__PURE__ */ jsx("input", {
            name: field,
            value: formProduct[field],
            onChange: handleChange,
            className: "form-input",
            placeholder: field,
            disabled: updateLoading
          })]
        }, field)), /* @__PURE__ */ jsxs(ButtonComponent, {
          type: "submit",
          className: "button-class !bg-primary-100 !h-11 !w-full md:w-[240px] mt-4",
          disabled: updateLoading,
          children: [/* @__PURE__ */ jsx("img", {
            src: "/assets/icons/plus.svg",
            alt: "plus",
            className: "size-5"
          }), /* @__PURE__ */ jsx("span", {
            className: "p-16-semibold text-white",
            children: updateLoading ? "Saving..." : "Save Changes"
          })]
        })]
      }), updateError && /* @__PURE__ */ jsx("p", {
        className: "text-red-500 mt-2",
        children: updateError
      }), /* @__PURE__ */ jsxs(ButtonComponent, {
        onClick: handleDelete,
        type: "button",
        disabled: deleteLoading,
        className: "button-class !bg-blue-500/10 !h-11 !w-full md:w-[240px] mt-4",
        children: [/* @__PURE__ */ jsx("img", {
          src: "/assets/icons/trash.svg",
          alt: "delete",
          className: "size-5"
        }), /* @__PURE__ */ jsx("span", {
          className: "p-16-semibold text-red-500",
          children: deleteLoading ? "Deleting..." : "DELETE"
        })]
      })]
    })]
  });
};
const productDetail = withComponentProps(ProductDetail);
const route11 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: productDetail
}, Symbol.toStringTag, { value: "Module" }));
const CustomerLayout = () => {
  if (typeof window === "undefined") {
    return null;
  }
  const authData = JSON.parse(localStorage.getItem("authData") || "null");
  if (!authData) {
    return /* @__PURE__ */ jsx(Navigate$1, {
      to: "/log-in",
      replace: true
    });
  }
  if (authData.role === "ADMIN") {
    return /* @__PURE__ */ jsx(Navigate$1, {
      to: "/dashboard",
      replace: true
    });
  }
  return /* @__PURE__ */ jsxs("div", {
    className: "admin-layout",
    children: [/* @__PURE__ */ jsx(MobileSidebar, {}), /* @__PURE__ */ jsx("aside", {
      className: "w-full max-w-[270px] hidden lg:block",
      children: /* @__PURE__ */ jsxs(SidebarComponent, {
        width: 270,
        enableGestures: false,
        children: [/* @__PURE__ */ jsx(UserNavItems, {}), " "]
      })
    }), /* @__PURE__ */ jsxs("aside", {
      className: "children",
      children: [/* @__PURE__ */ jsx(Outlet$1, {}), " "]
    })]
  });
};
const customerLayout = withComponentProps(CustomerLayout);
const route12 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: customerLayout
}, Symbol.toStringTag, { value: "Module" }));
const UserDashboard = () => {
  const [searchName, setSearchName] = useState("");
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [data, setData] = useState([]);
  const [currentPage, setCurrentPage] = useState(1);
  const itemsPerPage = 8;
  const {
    products: allProducts
  } = AllProducts();
  const {
    authData
  } = useAuth();
  const {
    categories
  } = useCategories();
  useGetProductByName(searchName);
  const {
    products: categoryProducts
  } = useGetProductsByCategoryId(selectedCategory);
  if (!authData) {
    return /* @__PURE__ */ jsx(Navigate, {
      to: "/log-in"
    });
  }
  useEffect(() => {
    const fetchProducts = async () => {
      try {
        console.log("Fetching all products from API...");
        const response = await getAllProducts();
        setTimeout(() => {
          setData(response);
          console.log("Products successfully fetched.");
        }, 300);
      } catch (error2) {
        console.error("Failed to load products", error2);
      }
    };
    fetchProducts();
  }, []);
  const handleFilter = () => {
    console.log("Filter button clicked.");
    if (!searchName && selectedCategory === null) {
      console.log("No filters applied. Showing all products.");
      setData(allProducts);
      return;
    }
    if (!searchName && selectedCategory !== null) {
      console.log(`Filtering by category ID using hook: ${selectedCategory}`);
      setData(categoryProducts);
      return;
    }
    let filtered = allProducts;
    if (searchName) {
      console.log(`Filtering by name: '${searchName}'`);
      filtered = filtered.filter((p) => p.name.toLowerCase().includes(searchName.toLowerCase()));
    }
    if (selectedCategory !== null) {
      console.log(`Further filtering by category ID: ${selectedCategory}`);
      filtered = filtered.filter((p) => p.categoryId === selectedCategory);
    }
    console.log("Final filtered data:", filtered);
    setData(filtered);
  };
  const handleReset = () => {
    console.log("Reset button clicked.");
    setSearchName("");
    setSelectedCategory(null);
    setData(allProducts);
  };
  const paginatedProducts = data.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);
  const totalPages = Math.ceil(data.length / itemsPerPage);
  return /* @__PURE__ */ jsxs("main", {
    className: "dashboard wrapper",
    children: [/* @__PURE__ */ jsx(Header, {
      title: `Welcome ${(authData == null ? void 0 : authData.username) ?? "Guest"} 👋🏼`,
      description: "Welcome to your dashboard"
    }), /* @__PURE__ */ jsxs("div", {
      className: "flex flex-wrap gap-4 mb-6 items-center",
      children: [/* @__PURE__ */ jsx("input", {
        type: "text",
        placeholder: "Name",
        value: searchName,
        onChange: (e) => setSearchName(e.target.value),
        className: "border border-gray-300 rounded px-3 py-2"
      }), /* @__PURE__ */ jsxs("select", {
        value: selectedCategory !== null ? selectedCategory.toString() : "",
        onChange: (e) => setSelectedCategory(e.target.value ? BigInt(e.target.value) : null),
        className: "border border-gray-300 rounded px-3 py-2",
        children: [/* @__PURE__ */ jsx("option", {
          value: "",
          children: "Filter by Category"
        }), categories.map((cat) => /* @__PURE__ */ jsx("option", {
          value: cat.id.toString(),
          children: cat.name
        }, cat.id.toString()))]
      }), /* @__PURE__ */ jsx("button", {
        onClick: handleFilter,
        className: "bg-blue-600 text-white rounded px-4 py-2",
        children: "Filter"
      }), /* @__PURE__ */ jsx("button", {
        onClick: handleReset,
        className: "bg-gray-400 text-white rounded px-4 py-2",
        children: "Reset"
      })]
    }), /* @__PURE__ */ jsx("section", {
      className: "flex flex-col gap-6",
      children: /* @__PURE__ */ jsxs("section", {
        className: "container",
        children: [/* @__PURE__ */ jsx("h1", {
          className: "text-xl font-semibold text-dark-100",
          children: "PRODUCTS"
        }), /* @__PURE__ */ jsx("div", {
          className: "grid grid-cols-1 md:grid-cols-4 gap-6 w-full",
          children: paginatedProducts.map((product2) => /* @__PURE__ */ jsx(ProductCard, {
            product: product2
          }, product2.id))
        }), /* @__PURE__ */ jsxs("div", {
          className: "flex justify-center items-center gap-4 mt-6",
          children: [/* @__PURE__ */ jsx("button", {
            onClick: () => setCurrentPage((prev) => Math.max(prev - 1, 1)),
            disabled: currentPage === 1,
            className: "px-4 py-2 bg-gray-300 rounded disabled:opacity-50",
            children: "Prev"
          }), /* @__PURE__ */ jsxs("span", {
            children: ["Page ", currentPage, " of ", totalPages]
          }), /* @__PURE__ */ jsx("button", {
            onClick: () => setCurrentPage((prev) => Math.min(prev + 1, totalPages)),
            disabled: currentPage === totalPages,
            className: "px-4 py-2 bg-gray-300 rounded disabled:opacity-50",
            children: "Next"
          })]
        })]
      })
    })]
  });
};
const userDashboard = withComponentProps(UserDashboard);
const route13 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: userDashboard
}, Symbol.toStringTag, { value: "Module" }));
const serverManifest = { "entry": { "module": "/assets/entry.client-CLOVFxnS.js", "imports": ["/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/index-DIYeVvcV.js"], "css": [] }, "routes": { "root": { "id": "root", "parentId": void 0, "path": "", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": true, "module": "/assets/root-BOAb-MrI.js", "imports": ["/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/index-DIYeVvcV.js", "/assets/with-props-5nfPBK-j.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/auth-api-ClrK1Plw.js"], "css": ["/assets/root-BAhS39Wq.css"], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/root/log-in": { "id": "routes/root/log-in", "parentId": "root", "path": "", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/log-in-j_lJ76js.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/useAuth-CWQz8NCq.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/button.component-B0WLNDez.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/root/register": { "id": "routes/root/register", "parentId": "root", "path": "register", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/register-DgOTY8P2.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/auth-api-ClrK1Plw.js", "/assets/index-B-PAt9DZ.js", "/assets/button.component-B0WLNDez.js", "/assets/utils-mUqetfhN.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/home": { "id": "routes/home", "parentId": "root", "path": "home", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/home-BTrWL9U9.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/admin-layout": { "id": "routes/admin/admin-layout", "parentId": "root", "path": void 0, "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/admin-layout-CMS8gMXs.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/MobileSidebar-CQ_9ujBj.js", "/assets/utils-mUqetfhN.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/authContext-DwKCA1uB.js", "/assets/index-B-PAt9DZ.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/dashboard": { "id": "routes/admin/dashboard", "parentId": "routes/admin/admin-layout", "path": "dashboard", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/dashboard-B_kbn35N.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/ProductCard-jHbfvcMz.js", "/assets/categoryComponent-08yfEJr3.js", "/assets/ProductComponent-DuU1GyGy.js", "/assets/userComponent-fmrvgmUY.js", "/assets/useAuth-CWQz8NCq.js", "/assets/button.component-B0WLNDez.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/products-api-CvKkBCNi.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/all-users": { "id": "routes/admin/all-users", "parentId": "routes/admin/admin-layout", "path": "all-users", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/all-users-BrYdBYfp.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/userComponent-fmrvgmUY.js", "/assets/grid.component-B_i_wA0Z.js", "/assets/template-DP_y5Sm2.js", "/assets/button.component-B0WLNDez.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/all-product": { "id": "routes/admin/all-product", "parentId": "routes/admin/admin-layout", "path": "all-product", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/all-product-DQCY4XwL.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/ProductCard-jHbfvcMz.js", "/assets/ProductComponent-DuU1GyGy.js", "/assets/categoryComponent-08yfEJr3.js", "/assets/products-api-CvKkBCNi.js", "/assets/grid.component-B_i_wA0Z.js", "/assets/template-DP_y5Sm2.js", "/assets/button.component-B0WLNDez.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/all-categories": { "id": "routes/admin/all-categories", "parentId": "routes/admin/admin-layout", "path": "all-categories", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/all-categories-BZf0snGF.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/categoryComponent-08yfEJr3.js", "/assets/grid.component-B_i_wA0Z.js", "/assets/template-DP_y5Sm2.js", "/assets/button.component-B0WLNDez.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/create-product": { "id": "routes/admin/create-product", "parentId": "routes/admin/admin-layout", "path": "product/create", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/create-product-D1aLK5rZ.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/categoryComponent-08yfEJr3.js", "/assets/products-api-CvKkBCNi.js", "/assets/button.component-B0WLNDez.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/create-category": { "id": "routes/admin/create-category", "parentId": "routes/admin/admin-layout", "path": "category/create", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/create-category-Cda7qcuv.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/categoryComponent-08yfEJr3.js", "/assets/button.component-B0WLNDez.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/admin/product-detail": { "id": "routes/admin/product-detail", "parentId": "routes/admin/admin-layout", "path": "/product/:productId", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/product-detail-BBMCEgyg.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/categoryComponent-08yfEJr3.js", "/assets/ProductComponent-DuU1GyGy.js", "/assets/products-api-CvKkBCNi.js", "/assets/button.component-B0WLNDez.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/customer/customer-layout": { "id": "routes/customer/customer-layout", "parentId": "root", "path": void 0, "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/customer-layout-BqU1HWED.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/MobileSidebar-CQ_9ujBj.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js", "/assets/index-B-PAt9DZ.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 }, "routes/customer/user-dashboard": { "id": "routes/customer/user-dashboard", "parentId": "routes/customer/customer-layout", "path": "user-dashboard", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasClientMiddleware": false, "hasErrorBoundary": false, "module": "/assets/user-dashboard-BBxxu69T.js", "imports": ["/assets/with-props-5nfPBK-j.js", "/assets/chunk-D4RADZKF-CEFUjEjZ.js", "/assets/utils-mUqetfhN.js", "/assets/authContext-DwKCA1uB.js", "/assets/Header-BRpT-8A_.js", "/assets/ProductCard-jHbfvcMz.js", "/assets/ProductComponent-DuU1GyGy.js", "/assets/useAuth-CWQz8NCq.js", "/assets/products-api-CvKkBCNi.js", "/assets/categoryComponent-08yfEJr3.js", "/assets/button.component-B0WLNDez.js", "/assets/template-DP_y5Sm2.js", "/assets/index-DIYeVvcV.js", "/assets/axiosAuthInterceptor-pnhKdU3P.js"], "css": [], "clientActionModule": void 0, "clientLoaderModule": void 0, "clientMiddlewareModule": void 0, "hydrateFallbackModule": void 0 } }, "url": "/assets/manifest-add23067.js", "version": "add23067", "sri": void 0 };
const assetsBuildDirectory = "build/client";
const basename = "/";
const future = { "unstable_middleware": false, "unstable_optimizeDeps": false, "unstable_splitRouteModules": false, "unstable_subResourceIntegrity": false, "unstable_viteEnvironmentApi": false };
const ssr = true;
const isSpaMode = false;
const prerender = [];
const routeDiscovery = { "mode": "lazy", "manifestPath": "/__manifest" };
const publicPath = "/";
const entry = { module: entryServer };
const routes = {
  "root": {
    id: "root",
    parentId: void 0,
    path: "",
    index: void 0,
    caseSensitive: void 0,
    module: route0
  },
  "routes/root/log-in": {
    id: "routes/root/log-in",
    parentId: "root",
    path: "",
    index: void 0,
    caseSensitive: void 0,
    module: route1
  },
  "routes/root/register": {
    id: "routes/root/register",
    parentId: "root",
    path: "register",
    index: void 0,
    caseSensitive: void 0,
    module: route2
  },
  "routes/home": {
    id: "routes/home",
    parentId: "root",
    path: "home",
    index: void 0,
    caseSensitive: void 0,
    module: route3
  },
  "routes/admin/admin-layout": {
    id: "routes/admin/admin-layout",
    parentId: "root",
    path: void 0,
    index: void 0,
    caseSensitive: void 0,
    module: route4
  },
  "routes/admin/dashboard": {
    id: "routes/admin/dashboard",
    parentId: "routes/admin/admin-layout",
    path: "dashboard",
    index: void 0,
    caseSensitive: void 0,
    module: route5
  },
  "routes/admin/all-users": {
    id: "routes/admin/all-users",
    parentId: "routes/admin/admin-layout",
    path: "all-users",
    index: void 0,
    caseSensitive: void 0,
    module: route6
  },
  "routes/admin/all-product": {
    id: "routes/admin/all-product",
    parentId: "routes/admin/admin-layout",
    path: "all-product",
    index: void 0,
    caseSensitive: void 0,
    module: route7
  },
  "routes/admin/all-categories": {
    id: "routes/admin/all-categories",
    parentId: "routes/admin/admin-layout",
    path: "all-categories",
    index: void 0,
    caseSensitive: void 0,
    module: route8
  },
  "routes/admin/create-product": {
    id: "routes/admin/create-product",
    parentId: "routes/admin/admin-layout",
    path: "product/create",
    index: void 0,
    caseSensitive: void 0,
    module: route9
  },
  "routes/admin/create-category": {
    id: "routes/admin/create-category",
    parentId: "routes/admin/admin-layout",
    path: "category/create",
    index: void 0,
    caseSensitive: void 0,
    module: route10
  },
  "routes/admin/product-detail": {
    id: "routes/admin/product-detail",
    parentId: "routes/admin/admin-layout",
    path: "/product/:productId",
    index: void 0,
    caseSensitive: void 0,
    module: route11
  },
  "routes/customer/customer-layout": {
    id: "routes/customer/customer-layout",
    parentId: "root",
    path: void 0,
    index: void 0,
    caseSensitive: void 0,
    module: route12
  },
  "routes/customer/user-dashboard": {
    id: "routes/customer/user-dashboard",
    parentId: "routes/customer/customer-layout",
    path: "user-dashboard",
    index: void 0,
    caseSensitive: void 0,
    module: route13
  }
};
export {
  serverManifest as assets,
  assetsBuildDirectory,
  basename,
  entry,
  future,
  isSpaMode,
  prerender,
  publicPath,
  routeDiscovery,
  routes,
  ssr
};
