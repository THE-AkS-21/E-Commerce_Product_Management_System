import{w as u}from"./with-props-5nfPBK-j.js";import{a as g,p as h,o as e}from"./chunk-D4RADZKF-CEFUjEjZ.js";import"./utils-mUqetfhN.js";import"./authContext-DwKCA1uB.js";import{H as x}from"./Header-BRpT-8A_.js";import{u as y}from"./categoryComponent-08yfEJr3.js";import{c as f}from"./products-api-CvKkBCNi.js";import{B as j}from"./button.component-B0WLNDez.js";import"./axiosAuthInterceptor-pnhKdU3P.js";import"./template-DP_y5Sm2.js";import"./index-DIYeVvcV.js";const C=()=>{const[t,i]=g.useState({name:"",description:"",price:0,stockQuantity:0,categoryId:0,image:""}),{categories:l}=y(),p=h(),o=a=>{const{name:r,value:s,type:c,files:n}=a.target;i(c==="file"&&n?{...t,[r]:n[0].name}:{...t,[r]:c==="number"?Number(s):s})},m=a=>new Promise(r=>setTimeout(r,a)),d=async a=>{if(a.preventDefault(),console.log("üìù Submitting product:",t),!t.name||!t.description||t.price<=0||t.stockQuantity<0||t.categoryId<=0){alert("‚ö†Ô∏è Please fill out all fields correctly."),console.warn("üö® Validation failed:",t);return}try{const r={...t,price:parseFloat(t.price.toString()),stock:parseInt(t.stockQuantity.toString(),10),categoryId:parseInt(t.categoryId.toString(),10)};console.log(" Formatted product payload:",r),await m(1e3);const s=await f(r);alert("‚úÖ Product Created!"),console.log("‚úÖ Product Created:",s),i({name:"",description:"",price:0,stockQuantity:0,categoryId:0,image:""}),p("/all-product")}catch(r){console.error("‚ùå Error creating product:",r)}};return e.jsxs("main",{className:"flex flex-col gap-10 pb-20 wrapper",children:[e.jsx(x,{title:"Add a New Product",description:"CREATE A PRODUCT"}),e.jsx("section",{className:"mt-2.5 wrapper-md",children:e.jsx("form",{className:"product-form",onSubmit:d,children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",children:"Name"}),e.jsx("input",{type:"text",name:"name",id:"name",value:t.name,onChange:o,placeholder:"Name",className:"form-input placeholder:text-gray-100"}),e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("input",{type:"text",name:"description",id:"description",value:t.description,onChange:o,placeholder:"Description",className:"form-input placeholder:text-gray-100"}),e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx("input",{type:"text",name:"price",id:"price",value:t.price,onChange:o,placeholder:"Price",className:"form-input placeholder:text-gray-100"}),e.jsx("label",{htmlFor:"stock",children:"Stock"}),e.jsx("input",{type:"text",name:"stockQuantity",id:"stockQuantity",value:t.stockQuantity,onChange:o,placeholder:"Stock",className:"form-input placeholder:text-gray-100"}),e.jsx("label",{htmlFor:"categoryId",children:"Category Id"}),e.jsxs("select",{value:t.categoryId!==0?t.categoryId.toString():"",onChange:a=>i({...t,categoryId:a.target.value?BigInt(a.target.value):0}),className:"form-input placeholder:text-gray-100",children:[e.jsx("option",{value:"",children:"Category"}),l.map(a=>e.jsx("option",{value:a.id.toString(),children:a.name},a.id.toString()))]}),e.jsx("label",{htmlFor:"image",children:"Image URL"}),e.jsx("input",{type:"text",name:"image",id:"image",value:t.image,onChange:o,placeholder:"Image",className:"form-input placeholder:text-gray-100"}),e.jsxs(j,{type:"submit",className:"button-class !bg-primary-100 !h-11 !w-full md:w-[240px]",children:[e.jsx("img",{src:"/assets/icons/plus.svg",alt:"plus",className:"size-5"}),e.jsx("span",{className:"p-16-semibold text-white",children:"SUBMIT"})]})]})})})]})},B=u(C);export{B as default};
