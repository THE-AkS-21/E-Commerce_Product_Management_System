import{C as Ma,a as Xl,b as Jl}from"./template-DP_y5Sm2.js";import{i as u,e as Q,g as oe,m as fi,F as Tn,S as Xt,p as Pt,b as B,c as $l,h as Te,j as de,k as Be,s as nt,n as ke,B as K,E as x,o as G,A as xi,P as C,C as rt,q as O,N as ki,t as gi,u as _e,v as pe,w as Ve,L as $i,D as Pa,x as uo,y as Ui,z as Ir,G as Ye,H as Lt,I as fe,J as Y,K as an,T as Zl,M as ve,O as Hs,Q as eh,R as mi,U as th,V as Oa,W as Nt,X as po,Y as Ri,Z as gt,_ as ih,$ as pr,a0 as rh,a1 as nh,a2 as sh,a3 as oh}from"./utils-mUqetfhN.js";import{a as Ba}from"./chunk-D4RADZKF-CEFUjEjZ.js";import{a as Hi,c as fr}from"./button.component-B0WLNDez.js";var ae=function(){function o(e){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="",typeof e=="string"?this.fromTable=e:e&&e instanceof Array&&(this.lookups=e),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return Object.defineProperty(o.prototype,"moduleName",{get:function(){return"query"},enumerable:!0,configurable:!0}),o.prototype.setKey=function(e){return this.key=e,this},o.prototype.using=function(e){return this.dataManager=e,this},o.prototype.execute=function(e,t,i,r){return e=e||this.dataManager,e?e.executeQuery(this,t,i,r):A.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},o.prototype.executeLocal=function(e){return e=e||this.dataManager,e?e.executeLocal(this):A.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},o.prototype.clone=function(){var e=new o;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e.lazyLoad=this.lazyLoad.slice(0),e},o.prototype.from=function(e){return this.fromTable=e,this},o.prototype.addParams=function(e,t){return typeof t=="function"?this.params.push({key:e,fn:t}):this.params.push({key:e,value:t}),this},o.prototype.distinct=function(e){return typeof e=="string"?this.distincts=[].slice.call([e],0):this.distincts=e.slice(0),this},o.prototype.expand=function(e){return typeof e=="string"?this.expands=[].slice.call([e],0):this.expands=e.slice(0),this},o.prototype.where=function(e,t,i,r,n,s){t=t?t.toLowerCase():null;var a=null;return typeof e=="string"?a=new xe(e,t,i,r,n,s):e instanceof xe&&(a=e),this.queries.push({fn:"onWhere",e:a}),this},o.prototype.search=function(e,t,i,r,n){typeof t=="string"&&(t=[t]),(!i||i==="none")&&(i="contains");var s=A.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:r,ignoreAccent:n,comparer:s}}),this},o.prototype.sortBy=function(e,t,i){return this.sortByForeignKey(e,t,i)},o.prototype.sortByForeignKey=function(e,t,i,r){var n=u(r)?"ascending":r,s,a;if(typeof e=="string"&&A.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),t="descending"),(!t||typeof t=="string")&&(n=t?t.toLowerCase():"ascending",t=A.fnSort(t)),i){s=o.filterQueries(this.queries,"onSortBy");for(var l=0;l<s.length;l++)if(a=s[l].e.fieldName,typeof a=="string"){if(a===e)return this}else if(a instanceof Array){for(var h=0;h<a.length;h++)if(a[h]===e||e.toLowerCase()===a[h]+" desc")return this}}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:n}}),this},o.prototype.sortByDesc=function(e){return this.sortBy(e,"descending")},o.prototype.group=function(e,t,i){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,comparer:t||null,format:i||null}}),this},o.prototype.page=function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},o.prototype.range=function(e,t){return this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},o.prototype.take=function(e){return this.queries.push({fn:"onTake",e:{nos:e}}),this},o.prototype.skip=function(e){return this.queries.push({fn:"onSkip",e:{nos:e}}),this},o.prototype.select=function(e){return typeof e=="string"&&(e=[].slice.call([e],0)),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},o.prototype.hierarchy=function(e,t){return this.subQuerySelector=t,this.subQuery=e,this},o.prototype.foreignKey=function(e){return this.fKey=e,this},o.prototype.requiresCount=function(){return this.isCountRequired=!0,this},o.prototype.aggregate=function(e,t){return this.queries.push({fn:"onAggregates",e:{field:t,type:e}}),this},o.filterQueries=function(e,t){return e.filter(function(i){return i.fn===t})},o.filterQueryLists=function(e,t){for(var i=e.filter(function(s){return t.indexOf(s.fn)!==-1}),r={},n=0;n<i.length;n++)r[i[n].fn]||(r[i[n].fn]=i[n].e);return r},o}(),xe=function(){function o(e,t,i,r,n,s){return r===void 0&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,typeof e=="string"?(this.field=e,this.operator=t.toLowerCase(),this.value=i,this.matchCase=s,this.ignoreCase=r,this.ignoreAccent=n,this.isComplex=!1,this.comparer=A.fnOperators.processOperator(this.operator)):(e instanceof o&&i instanceof o||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],this.matchCase=e.matchCase,this.ignoreCase=e.ignoreCase,this.ignoreAccent=e.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return o.and=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combinePredicates([].slice.call(e,0),"and")},o.prototype.and=function(e,t,i,r,n){return o.combine(this,e,t,i,"and",r,n)},o.or=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combinePredicates([].slice.call(e,0),"or")},o.prototype.or=function(e,t,i,r,n){return o.combine(this,e,t,i,"or",r,n)},o.ornot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combinePredicates([].slice.call(e,0),"or not")},o.prototype.ornot=function(e,t,i,r,n){return o.combine(this,e,t,i,"ornot",r,n)},o.andnot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.combinePredicates([].slice.call(e,0),"and not")},o.prototype.andnot=function(e,t,i,r,n){return o.combine(this,e,t,i,"andnot",r,n)},o.fromJson=function(e){if(e instanceof Array){for(var t=[],i=0,r=e.length;i<r;i++)t.push(this.fromJSONData(e[i]));return t}var n=e;return this.fromJSONData(n)},o.prototype.validate=function(e){var t=this.predicates?this.predicates:[],i,r;if(!this.isComplex&&this.comparer)return this.condition&&this.condition.indexOf("not")!==-1?(this.condition=this.condition.split("not")[0]===""?void 0:this.condition.split("not")[0],!this.comparer.call(this,A.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,A.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);this.condition&&this.condition.indexOf("not")!==-1?r=this.condition.indexOf("and")!==-1:r=this.condition==="and";for(var n=0;n<t.length;n++)if(n>0&&this.condition&&this.condition.indexOf("not")!==-1&&(t[n].condition=t[n].condition?t[n].condition+"not":"not"),i=t[n].validate(e),r){if(!i)return!1}else if(i)return!0;return r},o.prototype.toJson=function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,matchCase:this.matchCase}},o.combinePredicates=function(e,t){if(e.length===1){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new o(e[0],t,e.slice(1))},o.combine=function(e,t,i,r,n,s,a){return t instanceof o?o[n](e,t):typeof t=="string"?o[n](e,new o(t,i,r,s,a)):A.throwError("Predicate - "+n+" : invalid arguments")},o.fromJSONData=function(e){for(var t=e.predicates||[],i=t.length,r=[],n,s=0;s<i;s++)r.push(this.fromJSONData(t[s]));return e.isComplex?n=new o(r[0],e.condition,r.slice(1)):n=new o(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent),n},o}(),co={GroupGuid:"{271bbba0-1ee7}"},A=function(){function o(){}return o.getValue=function(e,t){return typeof e=="function"?e.call(t||{}):e},o.endsWith=function(e,t){return e.slice&&e.slice(-t.length)===t},o.notEndsWith=function(e,t){return e.slice&&e.slice(-t.length)!==t},o.startsWith=function(e,t){return e.slice(0,t.length)===t},o.notStartsWith=function(e,t){return e.slice(0,t.length)!==t},o.wildCard=function(e,t){var i,r;if(t.indexOf("[")!==-1&&(t=t.split("[").join("[[]")),t.indexOf("(")!==-1&&(t=t.split("(").join("[(]")),t.indexOf(")")!==-1&&(t=t.split(")").join("[)]")),t.indexOf("\\")!==-1&&(t=t.split("\\").join("[\\\\]")),t.indexOf("*")!==-1){t.charAt(0)!=="*"&&(t="^"+t),t.charAt(t.length-1)!=="*"&&(t=t+"$"),i=t.split("*");for(var n=0;n<i.length;n++)i[n].indexOf(".")===-1?i[n]=i[n]+".*":i[n]=i[n]+"*";t=i.join("")}(t.indexOf("%3f")!==-1||t.indexOf("?")!==-1)&&(r=t.indexOf("%3f")!==-1?t.split("%3f"):t.split("?"),t=r.join("."));var s=new RegExp(t,"g");return s.test(e)},o.like=function(e,t){return t.indexOf("%")!==-1?t.charAt(0)==="%"&&t.lastIndexOf("%")<2?(t=t.substring(1,t.length),o.startsWith(o.toLowerCase(e),o.toLowerCase(t))):t.charAt(t.length-1)==="%"&&t.indexOf("%")>t.length-3?(t=t.substring(0,t.length-1),o.endsWith(o.toLowerCase(e),o.toLowerCase(t))):(t.lastIndexOf("%")!==t.indexOf("%")&&t.lastIndexOf("%")>t.indexOf("%")+1&&(t=t.substring(t.indexOf("%")+1,t.lastIndexOf("%"))),e.indexOf(t)!==-1):!1},o.fnSort=function(e){return e=e?o.toLowerCase(e):"ascending",e==="ascending"?this.fnAscending:this.fnDescending},o.fnAscending=function(e,t){return u(e)&&u(t)?0:t==null?-1:typeof e=="string"?e.localeCompare(t):e==null?1:e-t},o.fnDescending=function(e,t){return u(e)&&u(t)?0:t==null?1:typeof e=="string"?e.localeCompare(t)*-1:e==null?-1:t-e},o.extractFields=function(e,t){for(var i={},r=0;r<t.length;r++)i=this.setValue(t[r],this.getObject(t[r],e),i);return i},o.select=function(e,t){for(var i=[],r=0;r<e.length;r++)i.push(this.extractFields(e[r],t));return i},o.group=function(e,t,i,r,n,s,a){r=r||1;var l=e,h="GroupGuid";if(l.GroupGuid===co[h]){for(var p=function(b){if(u(n))l[b].items=c.group(l[b].items,t,i,l.level+1,null,s,a),l[b].count=l[b].items.length;else{var E=-1,k=n.filter(function(F){return F.key===l[b].key});E=n.indexOf(k[0]),l[b].items=c.group(l[b].items,t,i,l.level+1,n[E].items,s,a),l[b].count=n[E].count}},c=this,d=0;d<l.length;d++)p(d);return l.childLevels+=1,l}var f={},g=[];g.GroupGuid=co[h],g.level=r,g.childLevels=0,g.records=l;for(var m=function(b){var E=v.getVal(l,b,t);if(u(s)||(E=s(E,t)),!f[E]&&(f[E]={key:E,count:0,items:[],aggregates:{},field:t},g.push(f[E]),!u(n))){var k=n.filter(function(F){return F.key===f[E].key});f[E].count=k[0].count}f[E].count=u(n)?f[E].count+=1:f[E].count,(!a||a&&i.length)&&f[E].items.push(l[b])},v=this,y=0;y<l.length;y++)m(y);if(i&&i.length)for(var R=function(b){for(var E={},k=void 0,F=i,W=0;W<i.length;W++)if(k=o.aggregates[i[W].type],u(n))k&&(E[F[W].field+" - "+F[W].type]=k(g[b].items,F[W].field));else{var te=n.filter(function(ne){return ne.key===g[b].key});k&&(E[F[W].field+" - "+F[W].type]=k(te[0].items,F[W].field))}g[b].aggregates=E},y=0;y<g.length;y++)R(y);if(a&&g.length&&i.length)for(var y=0;y<g.length;y++)g[y].items=[];return l.length&&g||l},o.buildHierarchy=function(e,t,i,r,n){var s,a={},l;for(r.result&&(r=r.result),r.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),s=0;s<r.length;s++){var h=this.getObject(e,r[s]);l=a[h]||(a[h]=[]),l.push(r[s])}for(s=0;s<i.length;s++){var h=this.getObject(n||e,i[s]);i[s][t]=a[h]}},o.getFieldList=function(e,t,i){if(i===void 0&&(i=""),t==null)return this.getFieldList(e,[],i);for(var r=e,n=Object.keys(e),s=0,a=n;s<a.length;s++){var l=a[s];typeof r[l]=="object"&&!(r[l]instanceof Array)?this.getFieldList(r[l],t,i+l+"."):t.push(i+l)}return t},o.getObject=function(e,t){if(!e)return t;if(t){if(e.indexOf(".")===-1)if(u(t[e])){var i=e.charAt(0).toLowerCase()+e.slice(1),r=e.charAt(0).toUpperCase()+e.slice(1);return u(t[i])?u(t[r])?null:t[r]:t[i]}else return t[e];for(var n=t,s=e.split("."),a=0;a<s.length&&n!=null;a++){if(n=n[s[a]],n===void 0){var l=s[a].charAt(0).toUpperCase()+s[a].slice(1);n=t[l]||t[l.charAt(0).toLowerCase()+l.slice(1)]||null}t=n}return n}},o.setValue=function(e,t,i){var r=e.toString().split("."),n=i||{},s=n,a,l=r.length,h;for(a=0;a<l;a++)h=r[a],a+1===l?s[h]=t===void 0?void 0:t:u(s[h])&&(s[h]={}),s=s[h];return n},o.sort=function(e,t,i){var r=this;return e.length<=1?e:e.slice().sort(function(n,s){return i(r.getVal([n],0,t),r.getVal([s],0,t),n,s)})},o.ignoreDiacritics=function(e){if(typeof e!="string")return e;var t=e.split(""),i=t.map(function(r){return r in o.diacritics?o.diacritics[r]:r});return i.join("")},o.ignoreDiacriticsForArrays=function(e){return Array.isArray(e)?e.map(function(t){return o.ignoreDiacritics(t)}):[]},o.merge=function(e,t,i,r){for(var n=[],s;e.length>0||t.length>0;)e.length>0&&t.length>0?r?s=r(this.getVal(e,0,i),this.getVal(t,0,i),e[0],t[0])<=0?e:t:s=e[0][i]<e[0][i]?e:t:s=e.length>0?e:t,n.push(s.shift());return n},o.getVal=function(e,t,i){return i?this.getObject(i,e[t]):e[t]},o.toLowerCase=function(e){return u(e)?"":typeof e=="string"?e.toLowerCase():e instanceof Date?e.toString().toLowerCase():e.toString()},o.callAdaptorFunction=function(e,t,i,r){if(t in e){var n=e[t](i,r);u(n)||(i=n)}return i},o.getAddParams=function(e,t,i){var r={};return o.callAdaptorFunction(e,"addParams",{dm:t,query:i,params:i?i.params:[],reqParams:r}),r},o.isPlainObject=function(e){return!!e&&e.constructor===Object},o.isCors=function(){var e=null,t="XMLHttpRequest";try{e=new window[t]}catch{}return!!e&&"withCredentials"in e},o.getGuid=function(e){var t="0123456789abcdef",i;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(r,n){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),i=s[0]%16|0}else i=Math.random()*16|0;return t[n===19?i&3|8:i]})},o.isNull=function(e){return e==null},o.getItemFromComparer=function(e,t,i){var r,n,s,a=0,l=typeof o.getVal(e,0,t)=="string";if(e.length)for(;u(r)&&a<e.length;)r=o.getVal(e,a,t),s=e[a++];for(;a<e.length;a++)n=o.getVal(e,a,t),!u(n)&&(l&&(r=+r,n=+n),i(r,n)>0&&(r=n,s=e[a]));return s},o.distinct=function(e,t,i){i=u(i)?!1:i;var r=[],n,s={};return e.forEach(function(a,l){n=typeof e[l]=="object"?o.getVal(e,l,t):e[l],n in s||(r.push(i?e[l]:n),s[n]=1)}),r},o.processData=function(e,t){var i=this.prepareQuery(e),r=new _(t);e.requiresCounts&&i.requiresCount();var n=r.executeLocal(i),s={result:e.requiresCounts?n.result:n,count:n.count,aggregates:JSON.stringify(n.aggregates)};return e.requiresCounts?s:n},o.prepareQuery=function(e){var t=this,i=new ae;if(e.select&&i.select(e.select),e.where){var r=o.parse.parseJson(e.where);r.filter(function(s){if(u(s.condition))i.where(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent);else{var a=[];s.field?a.push(new xe(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent)):a=a.concat(t.getPredicate(s.predicates)),s.condition==="or"?i.where(xe.or(a)):s.condition==="and"&&i.where(xe.and(a))}})}if(e.search){var n=o.parse.parseJson(e.search);n.filter(function(s){return i.search(s.key,s.fields,s.operator,s.ignoreCase,s.ignoreAccent)})}return e.aggregates&&e.aggregates.filter(function(s){return i.aggregate(s.type,s.field)}),e.sorted&&e.sorted.filter(function(s){return i.sortBy(s.name,s.direction)}),e.skip&&i.skip(e.skip),e.take&&i.take(e.take),e.group&&e.group.filter(function(s){return i.group(s)}),i},o.getPredicate=function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];if(r.field)t.push(new xe(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent));else{for(var n=[],s=this.getPredicate(r.predicates),a=0,l=Object.keys(s);a<l.length;a++){var h=l[a];n.push(s[h])}t.push(r.condition==="or"?xe.or(n):xe.and(n))}}return t},o.serverTimezoneOffset=null,o.timeZoneHandling=!0,o.throwError=function(e){try{throw new Error(e)}catch(t){throw t.message+`
`+t.stack}},o.aggregates={sum:function(e,t){for(var i=0,r,n=typeof o.getVal(e,0,t)!="number",s=0;s<e.length;s++)r=o.getVal(e,s,t),!isNaN(r)&&r!==null&&(n&&(r=+r),i+=r);return i},average:function(e,t){return o.aggregates.sum(e,t)/e.length},min:function(e,t){var i;return typeof t=="function"&&(i=t,t=null),o.getObject(t,o.getItemFromComparer(e,t,i||o.fnAscending))},max:function(e,t){var i;return typeof t=="function"&&(i=t,t=null),o.getObject(t,o.getItemFromComparer(e,t,i||o.fnDescending))},truecount:function(e,t){return new _(e).executeLocal(new ae().where(t,"equal",!0,!0)).length},falsecount:function(e,t){return new _(e).executeLocal(new ae().where(t,"equal",!1,!0)).length},count:function(e,t){return e.length}},o.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},o.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},o.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},o.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},o.diacritics={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B","Ƀ":"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D","Ꝺ":"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F","Ꝼ":"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J","Ɉ":"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M","Ɱ":"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N","Ƞ":"N",Ɲ:"N","Ꞑ":"N","Ꞥ":"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O","Ꝋ":"O","Ꝍ":"O",Ƣ:"OI","Ꝏ":"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q",Ｑ:"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S",Ｓ:"S","ẞ":"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U","Ʉ":"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W","Ⱳ":"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a","ⱥ":"a",ɐ:"a","ꜳ":"aa",æ:"ae",ǽ:"ae",ǣ:"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d","ꝺ":"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e","ɇ":"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f","ꝼ":"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h","ⱨ":"h","ⱶ":"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j","ɉ":"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n","ꞑ":"n","ꞥ":"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o","ꝋ":"o","ꝍ":"o",ɵ:"o",ƣ:"oi",ȣ:"ou","ꝏ":"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q",ｑ:"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r","ɍ":"r",ɽ:"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s","ȿ":"s","ꞩ":"s","ꞅ":"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v","ꝟ":"v",ʌ:"v","ꝡ":"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w","ⱳ":"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y","ɏ":"y","ỿ":"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z","ɀ":"z","ⱬ":"z","ꝣ":"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"},o.fnOperators={equal:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?o.toLowerCase(e)===o.toLowerCase(t):e===t},notequal:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),!o.fnOperators.equal(e,t,i)},lessthan:function(e,t,i){return i?o.toLowerCase(e)<o.toLowerCase(t):(u(e)&&(e=void 0),e<t)},greaterthan:function(e,t,i){return i?o.toLowerCase(e)>o.toLowerCase(t):e>t},lessthanorequal:function(e,t,i){return i?o.toLowerCase(e)<=o.toLowerCase(t):(u(e)&&(e=void 0),e<=t)},greaterthanorequal:function(e,t,i){return i?o.toLowerCase(e)>=o.toLowerCase(t):(u(e)&&(e=void 0),e>=t)},contains:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?!u(e)&&!u(t)&&o.toLowerCase(e).indexOf(o.toLowerCase(t))!==-1:!u(e)&&!u(t)&&e.toString().indexOf(t)!==-1},doesnotcontain:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?!u(e)&&!u(t)&&o.toLowerCase(e).indexOf(o.toLowerCase(t))===-1:!u(e)&&!u(t)&&e.toString().indexOf(t)===-1},isnotnull:function(e){return e!=null},isnull:function(e){return e==null},startswith:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?e&&t&&o.startsWith(o.toLowerCase(e),o.toLowerCase(t)):e&&t&&o.startsWith(e,t)},doesnotstartwith:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?e&&t&&o.notStartsWith(o.toLowerCase(e),o.toLowerCase(t)):e&&t&&o.notStartsWith(e,t)},like:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?e&&t&&o.like(o.toLowerCase(e),o.toLowerCase(t)):e&&t&&o.like(e,t)},isempty:function(e){return e===void 0||e===""},isnotempty:function(e){return e!==void 0&&e!==""},wildcard:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?(e||typeof e=="boolean")&&t&&typeof e!="object"&&o.wildCard(o.toLowerCase(e),o.toLowerCase(t)):(e||typeof e=="boolean")&&t&&o.wildCard(e,t)},endswith:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?e&&t&&o.endsWith(o.toLowerCase(e),o.toLowerCase(t)):e&&t&&o.endsWith(e,t)},doesnotendwith:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacritics(t)),i?e&&t&&o.notEndsWith(o.toLowerCase(e),o.toLowerCase(t)):e&&t&&o.notEndsWith(e,t)},processSymbols:function(e){var t=o.operatorSymbols[e];if(t){var i=o.fnOperators[t];return i}return o.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){var t=o.fnOperators[e];return t||o.fnOperators.processSymbols(e)},in:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacriticsForArrays(t)),i?!u(e)&&t&&t.length>0&&t.map(function(n){return o.toLowerCase(n)}).indexOf(o.toLowerCase(e))>-1:e instanceof Date?!u(e)&&t&&t.length>0&&Array.isArray(t)&&t.some(function(n){return n instanceof Date&&n.getTime()===e.getTime()}):!u(e)&&t&&t.length>0&&t.indexOf(e)>-1},notin:function(e,t,i,r){return r&&(e=o.ignoreDiacritics(e),t=o.ignoreDiacriticsForArrays(t)),i?!u(e)&&t&&t.length>0&&t.map(function(n){return o.toLowerCase(n)}).indexOf(o.toLowerCase(e))===-1:e instanceof Date?!u(e)&&t&&t.length>0&&Array.isArray(t)&&t.every(function(n){return!(n instanceof Date)||n.getTime()!==e.getTime()}):!u(e)&&t&&t.length>0&&t.indexOf(e)===-1}},o.parse={parseJson:function(e){return typeof e=="string"&&(/^[\s]*\[|^[\s]*\{(.)+:/g.test(e)||e.indexOf('"')===-1)?e=JSON.parse(e,o.parse.jsonReviver):e instanceof Array?o.parse.iterateAndReviveArray(e):typeof e=="object"&&e!==null&&o.parse.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)typeof e[t]=="object"&&e[t]!==null?o.parse.iterateAndReviveJson(e[t]):typeof e[t]=="string"&&(!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[t])||e[t].toString().indexOf('"')===-1)?e[t]=o.parse.jsonReviver("",e[t]):e[t]=o.parse.parseJson(e[t])},iterateAndReviveJson:function(e){for(var t,i=Object.keys(e),r=0,n=i;r<n.length;r++){var s=n[r];o.startsWith(s,"__")||(t=e[s],typeof t=="object"?t instanceof Array?o.parse.iterateAndReviveArray(t):t&&o.parse.iterateAndReviveJson(t):e[s]=o.parse.jsonReviver(e[s],t))}},jsonReviver:function(e,t){if(typeof t=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),r=o.timeZoneHandling?o.serverTimezoneOffset:null;if(i)return o.dateParse.toTimeZone(new Date(parseInt(i[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var n=t.indexOf("Z")>-1||t.indexOf("z")>-1,s=t.split(/[^0-9.]/);if(n){if(s[5].indexOf(".")>-1){var a=s[5].split(".");s[5]=a[0],s[6]=new Date(t).getUTCMilliseconds().toString()}else s[6]="00";t=o.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10),parseInt(s[6],10)),o.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10)),h=parseInt(s[6],10),p=parseInt(s[7],10);if(isNaN(h)&&isNaN(p))return l;t.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-p):l.setHours(l.getHours()+h,l.getMinutes()+p),t=o.dateParse.toTimeZone(l,o.serverTimezoneOffset,!1)}o.serverTimezoneOffset==null&&(t=o.dateParse.addSelfOffset(t))}}return t},isJson:function(e){return typeof e[0]=="string"?e:o.parse.parseJson(e)},isGuid:function(e){var t=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i,i=t.exec(e);return i!=null},replacer:function(e,t){return o.isPlainObject(e)?o.parse.jsonReplacer(e,t):e instanceof Array?o.parse.arrayReplacer(e):e instanceof Date?o.parse.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){for(var i,r=Object.keys(e),n=0,s=r;n<s.length;n++){var a=s[n];if(i=e[a],i instanceof Date){var l=i;o.serverTimezoneOffset==null?e[a]=o.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+o.serverTimezoneOffset*36e5),e[a]=o.dateParse.toTimeZone(o.dateParse.addSelfOffset(l),null).toJSON())}}return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)o.isPlainObject(e[t])?e[t]=o.parse.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=o.parse.jsonReplacer({date:e[t]}).date);return e},jsonDateReplacer:function(e,t){if(e==="value"&&t){if(typeof t=="string"){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(i)t=o.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)){var r=t.split(/[^0-9]/);t=o.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(t instanceof Date)return t=o.dateParse.addSelfOffset(t),o.serverTimezoneOffset===null?o.dateParse.toTimeZone(o.dateParse.addSelfOffset(t),null).toJSON():(t=o.dateParse.toTimeZone(t,t.getTimezoneOffset()/60-o.serverTimezoneOffset,!1),t.toJSON())}return t}},o.dateParse={addSelfOffset:function(e){return new Date(+e-e.getTimezoneOffset()*6e4)},toUTC:function(e){return new Date(+e+e.getTimezoneOffset()*6e4)},toTimeZone:function(e,t,i){if(t===null)return e;var r=i?o.dateParse.toUTC(e):e;return new Date(+r-t*36e5)},toLocalTime:function(e){var t=e,i=-t.getTimezoneOffset(),r=i>=0?"+":"-",n=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l},s=t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+"T"+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())+r+n(i/60)+":"+n(i%60);return s}},o}(),ri=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ah={GroupGuid:"{271bbba0-1ee7}"},za=function(){function o(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=o,this.dataSource=e,this.pvt={}}return o.prototype.processResponse=function(e,t,i,r){return e},o}(),hs=function(o){ri(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.processQuery=function(t,i){for(var r=t.dataSource.json.slice(0),n=r.length,s=!0,a,l,h={},p=0,c=[],d=[],f,g=0;g<i.lazyLoad.length;g++)p++,h[i.lazyLoad[g].key]=i.lazyLoad[g].value;var m={},v=!1;if(i.lazyLoad.length){for(var g=0;g<i.queries.length;g++)if(l=i.queries[g],l.fn==="onGroup"&&!u(l.e.format)){v=!0;break}}for(var g=0;g<i.queries.length;g++){if(l=i.queries[g],(l.fn==="onPage"||l.fn==="onGroup"||l.fn==="onSortBy"&&!v)&&i.lazyLoad.length){l.fn==="onGroup"&&c.push(l.e),l.fn==="onPage"&&(f=l.e),l.fn==="onSortBy"&&d.unshift(l.e);continue}a=this[l.fn].call(this,r,l.e,i),l.fn==="onAggregates"?m[l.e.field+" - "+l.e.type]=a:r=a!==void 0?a:r,(l.fn==="onPage"||l.fn==="onSkip"||l.fn==="onTake"||l.fn==="onRange")&&(s=!1),s&&(n=r.length)}if(p){var y={query:i,lazyLoad:h,result:r,group:c,page:f,sort:d},R=this.lazyLoadGroup(y);r=R.result,n=R.count}return i.isCountRequired&&(r={result:r,count:n,aggregates:m}),r},e.prototype.lazyLoadGroup=function(t){var i=0,r=this.getAggregate(t.query),n=t.result;if(u(t.lazyLoad.onDemandGroupInfo)){var p=t.group[0].fieldName;n=A.group(n,p,r,null,null,t.group[0].comparer,!0),i=n.length;var h=n;if(t.sort.length){var c=t.sort.length>1?t.sort.filter(function(f){return f.fieldName===p})[0]:t.sort[0];n=this.onSortBy(n,c,t.query,!0)}t.page&&(n=this.onPage(n,t.page,t.query)),this.formGroupResult(n,h)}else{for(var s=t.lazyLoad.onDemandGroupInfo,a=s.where.length-1;a>=0;a--)n=this.onWhere(n,s.where[a]);if(t.group.length!==s.level){var l=t.group[s.level].fieldName;n=A.group(n,l,r,null,null,t.group[s.level].comparer,!0),t.sort.length&&(n=this.onSortBy(n,t.sort[parseInt(s.level.toString(),10)],t.query,!0))}else for(var a=t.sort.length-1;a>=s.level;a--)n=this.onSortBy(n,t.sort[parseInt(a.toString(),10)],t.query,!1);i=n.length;var h=n;n=n.slice(s.skip),n=n.slice(0,s.take),t.group.length!==s.level&&this.formGroupResult(n,h)}return{result:n,count:i}},e.prototype.formGroupResult=function(t,i){if(t.length&&i.length){var r="GroupGuid",n="childLevels",s="level",a="records";t[r]=i[r],t[n]=i[n],t[s]=i[s],t[a]=i[a]}return t},e.prototype.getAggregate=function(t){var i=ae.filterQueries(t.queries,"onAggregates"),r=[];if(i.length)for(var n=void 0,s=0;s<i.length;s++)n=i[s].e,r.push({type:n.type,field:A.getValue(n.field,t)});return r},e.prototype.batchRequest=function(t,i,r){var n,s=i.deletedRecords.length;for(n=0;n<i.addedRecords.length;n++)this.insert(t,i.addedRecords[n]);for(n=0;n<i.changedRecords.length;n++)this.update(t,r.key,i.changedRecords[n]);for(n=0;n<s;n++)this.remove(t,r.key,i.deletedRecords[n]);return i},e.prototype.onWhere=function(t,i){return!t||!t.length?t:t.filter(function(r){if(i)return i.validate(r)})},e.prototype.onAggregates=function(t,i){var r=A.aggregates[i.type];return!t||!r||t.length===0?null:r(t,i.field)},e.prototype.onSearch=function(t,i){return!t||!t.length?t:(i.fieldNames.length===0&&A.getFieldList(t[0],i.fieldNames),t.filter(function(r){for(var n=0;n<i.fieldNames.length;n++)if(i.comparer.call(r,A.getObject(i.fieldNames[n],r),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1}))},e.prototype.onSortBy=function(t,i,r,n){if(!t||!t.length)return t;var s,a=A.getValue(i.fieldName,r);if(!a)return t.sort(i.comparer);if(a instanceof Array){a=a.slice(0);for(var l=a.length-1;l>=0;l--)a[l]&&(s=i.comparer,A.endsWith(a[l]," desc")&&(s=A.fnSort("descending"),a[l]=a[l].replace(" desc","")),t=A.sort(t,a[l],s));return t}return A.sort(t,n?"key":a,i.comparer)},e.prototype.onGroup=function(t,i,r){if(!t||!t.length)return t;var n=this.getAggregate(r);return A.group(t,A.getValue(i.fieldName,r),n,null,null,i.comparer)},e.prototype.onPage=function(t,i,r){var n=A.getValue(i.pageSize,r),s=(A.getValue(i.pageIndex,r)-1)*n,a=s+n;return!t||!t.length?t:t.slice(s,a)},e.prototype.onRange=function(t,i){return!t||!t.length?t:t.slice(A.getValue(i.start),A.getValue(i.end))},e.prototype.onTake=function(t,i){return!t||!t.length?t:t.slice(0,A.getValue(i.nos))},e.prototype.onSkip=function(t,i){return!t||!t.length?t:t.slice(A.getValue(i.nos))},e.prototype.onSelect=function(t,i){return!t||!t.length?t:A.select(t,A.getValue(i.fieldNames))},e.prototype.insert=function(t,i,r,n,s){return u(s)?t.dataSource.json.push(i):t.dataSource.json.splice(s,0,i)},e.prototype.remove=function(t,i,r,n){var s=t.dataSource.json,a;for(typeof r=="object"&&!(r instanceof Date)&&(r=A.getObject(i,r)),a=0;a<s.length&&A.getObject(i,s[a])!==r;a++);return a!==s.length?s.splice(a,1):null},e.prototype.update=function(t,i,r,n){var s=t.dataSource.json,a,l;for(u(i)||(l=oe(i,r)),a=0;a<s.length&&!(!u(i)&&oe(i,s[a])===l);a++);return a<s.length?fi(s[a],r):null},e}(za),zt=function(o){ri(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.processQuery=function(t,i,r){var n=this.getQueryRequest(i),s=ae.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=i.params,l=t.dataSource.url,h,p,c=null,d=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in s?(h=s.onPage,p=A.getValue(h.pageIndex,i),c=A.getValue(h.pageSize,i),p=(p-1)*c):"onRange"in s&&(h=s.onRange,p=h.start,c=h.end-h.start);for(var g=0;g<n.sorts.length;g++)h=A.getValue(n.sorts[g].e.fieldName,i),f.sorts.push(A.callAdaptorFunction(this,"onEachSort",{name:h,direction:n.sorts[g].e.direction},i));r&&(h=this.getFiltersFrom(r,i),h&&f.filters.push(A.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)));for(var g=0;g<n.filters.length;g++){var m=A.callAdaptorFunction(this,"onEachWhere",n.filters[g].e.toJson(),i);this.getModuleName&&this.getModuleName()==="ODataV4Adaptor"&&!u(n.filters[g].e.key)&&n.filters.length>1&&(m="("+m+")"),f.filters.push(m);for(var v=typeof f.filters[g]=="object"?Object.keys(f.filters[g]):[],y=0,R=v;y<R.length;y++){var b=R[y];A.isNull(f[b])&&delete f[b]}}for(var g=0;g<n.searches.length;g++)h=n.searches[g].e,f.searches.push(A.callAdaptorFunction(this,"onEachSearch",{fields:h.fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase,ignoreAccent:h.ignoreAccent},i));for(var g=0;g<n.groups.length;g++)f.groups.push(A.getValue(n.groups[g].e.fieldName,i));for(var g=0;g<n.aggregates.length;g++)h=n.aggregates[g].e,f.aggregates.push({type:h.type,field:A.getValue(h.field,i)});var E={};if(this.getRequestQuery(d,i,s,f,E),A.callAdaptorFunction(this,"addParams",{dm:t,query:i,params:a,reqParams:E}),i.lazyLoad.length)for(var g=0;g<i.lazyLoad.length;g++)E[i.lazyLoad[g].key]=i.lazyLoad[g].value;for(var k=Object.keys(E),F=0,W=k;F<W.length;F++){var b=W[F];(A.isNull(E[b])||E[b]===""||E[b].length===0)&&delete E[b]}!(d.skip in E&&d.take in E)&&c!==null&&(E[d.skip]=A.callAdaptorFunction(this,"onSkip",p,i),E[d.take]=A.callAdaptorFunction(this,"onTake",c,i));var te=this.pvt;return this.pvt={},this.options.requestType==="json"?{data:JSON.stringify(E,A.parse.jsonDateReplacer),url:l,pvtData:te,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(E,i,t),h=(t.dataSource.url.indexOf("?")!==-1?"&":"/")+h,{type:"GET",url:h.length?l.replace(/\/*$/,h):l,pvtData:te})},e.prototype.getRequestQuery=function(t,i,r,n,s){var a="param",l=s;l[t.from]=i.fromTable,t.apply&&i.distincts.length&&(l[t.apply]="onDistinct"in this?A.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&t.expand&&(l[t.expand]="onExpand"in this&&"onSelect"in r?A.callAdaptorFunction(this,"onExpand",{selects:A.getValue(r.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[t.select]="onSelect"in r&&!i.distincts.length?A.callAdaptorFunction(this,"onSelect",A.getValue(r.onSelect.fieldNames,i),i):"",l[t.count]=i.isCountRequired?A.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[t.search]=n.searches.length?A.callAdaptorFunction(this,"onSearch",n.searches,i):"",l[t.skip]="onSkip"in r?A.callAdaptorFunction(this,"onSkip",A.getValue(r.onSkip.nos,i),i):"",l[t.take]="onTake"in r?A.callAdaptorFunction(this,"onTake",A.getValue(r.onTake.nos,i),i):"",l[t.where]=n.filters.length||n.searches.length?A.callAdaptorFunction(this,"onWhere",n.filters,i):"",l[t.sortBy]=n.sorts.length?A.callAdaptorFunction(this,"onSortBy",n.sorts,i):"",l[t.group]=n.groups.length?A.callAdaptorFunction(this,"onGroup",n.groups,i):"",l[t.aggregates]=n.aggregates.length?A.callAdaptorFunction(this,"onAggregates",n.aggregates,i):"",l[a]=[]},e.prototype.convertToQueryString=function(t,i,r){return""},e.prototype.processResponse=function(t,i,r,n,s,a){if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("application/json")!==-1){var l=A.timeZoneHandling;i&&!i.timeZoneHandling&&(A.timeZoneHandling=!1),i.enableCache||(t=A.parse.parseJson(t)),A.timeZoneHandling=l}var h=s,p=h.pvtData||{},c=t?t.groupDs:[];if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("xml")!==-1)return r.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(h.data);if(d&&d.action==="batch"&&t&&t.addedRecords&&!u(a))return a.addedRecords=t.addedRecords,a;t&&t.d&&(t=t.d);var f={};t&&"count"in t&&(f.count=t.count),f.result=t&&t.result?t.result:t;var g=!1;if(Array.isArray(t.result)&&t.result.length){var m="key",v="value",y="level";if(u(t.result[0][m])||(f.result=this.formRemoteGroupedData(f.result,1,p.groups.length-1)),r&&r.lazyLoad.length&&p.groups.length){for(var R=0;R<r.lazyLoad.length;R++)if(r.lazyLoad[R][m]==="onDemandGroupInfo"){var b=r.lazyLoad[R][v][y];p.groups.length===b&&(g=!0)}}}return g||this.getAggregateResult(p,t,f,c,r),A.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},e.prototype.formRemoteGroupedData=function(t,i,r){for(var n=0;n<t.length;n++)t[n].items.length&&Object.keys(t[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(t[n].items,i+1,r-1);var s="GroupGuid",a="childLevels",l="level",h="records";return t[s]=ah[s],t[l]=i,t[a]=r,t[h]=t[0].items.length?this.getGroupedRecords(t,!u(t[0].items[h])):[],t},e.prototype.getGroupedRecords=function(t,i){for(var r=[],n="records",s=0;s<t.length;s++)if(i)r=r.concat(t[s].items[n]);else for(var a=0;a<t[s].items.length;a++)r.push(t[s].items[a]);return r},e.prototype.onGroup=function(t){return this.pvt.groups=t,t},e.prototype.onAggregates=function(t){this.pvt.aggregates=t},e.prototype.batchRequest=function(t,i,r,n,s){var a,l;return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.removeUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Q({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:r[a],key:r[l]},A.getAddParams(this,t,n)))}},e.prototype.beforeSend=function(t,i,r){},e.prototype.insert=function(t,i,r,n){return{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:i,table:r,action:"insert"},A.getAddParams(this,t,n)))}},e.prototype.remove=function(t,i,r,n,s){return{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{key:r,keyColumn:i,table:n,action:"remove"},A.getAddParams(this,t,s)))}},e.prototype.update=function(t,i,r,n,s){return{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:r,action:"update",keyColumn:i,key:A.getObject(i,r),table:n},A.getAddParams(this,t,s)))}},e.prototype.getFiltersFrom=function(t,i){var r=i.fKey,n,s=r,a=i.key,l=[];typeof t[0]!="object"&&(s=null);for(var h=0;h<t.length;h++)typeof t[0]=="object"?n=A.getObject(a||s,t[h]):n=t[h],l.push(new xe(r,"equal",n));return xe.or(l)},e.prototype.getAggregateResult=function(t,i,r,n,s){var a=i;if(i&&i.result&&(a=i.result),t&&t.aggregates&&t.aggregates.length){var l=t.aggregates,h=void 0,p=a,c={};i.aggregate&&(p=i.aggregate);for(var d=0;d<l.length;d++)h=A.aggregates[l[d].type],h&&(c[l[d].field+" - "+l[d].type]=h(p,l[d].field));r.aggregates=c}var f="key",g=Array.isArray(i.result)&&i.result.length&&!u(i.result[0][f]);if(t&&t.groups&&t.groups.length&&!g){for(var m=t.groups,d=0;d<m.length;d++){var v=null;u(n)||(n=A.group(n,m[d]));var y=ae.filterQueries(s.queries,"onGroup")[d].e;a=A.group(a,m[d],t.aggregates,v,n,y.comparer)}r.result=a}return r},e.prototype.getQueryRequest=function(t){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=ae.filterQueries(t.queries,"onSortBy"),i.groups=ae.filterQueries(t.queries,"onGroup"),i.filters=ae.filterQueries(t.queries,"onWhere"),i.searches=ae.filterQueries(t.queries,"onSearch"),i.aggregates=ae.filterQueries(t.queries,"onAggregates"),i},e.prototype.addParams=function(t){var i=t.reqParams;t.params.length&&(i.params={});for(var r=0,n=t.params;r<n.length;r++){var s=n[r];if(i[s.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[s.key]=s.value,s.fn&&(i[s.key]=s.fn.call(t.query,s.key,t.query,t.dm)),i.params[s.key]=i[s.key]}},e}(za),Ki=function(o){ri(e,o);function e(t){var i=o.call(this)||this;return i.options=Q({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),Q(i.options,t||{}),i}return e.prototype.getModuleName=function(){return"ODataAdaptor"},e.prototype.onPredicate=function(t,i,r){var n="",s,a,l=t.value,h=typeof l,p=t.field?e.getField(t.field):null;if(l instanceof Date&&(l="datetime'"+A.parse.replacer(l)+"'"),h==="string"&&(l=l.replace(/'/g,"''"),t.ignoreCase&&(l=l.toLowerCase()),t.operator!=="like"&&(l=encodeURIComponent(l)),t.operator!=="wildcard"&&t.operator!=="like"&&(l="'"+l+"'"),r&&(p="cast("+p+", 'Edm.String')"),A.parse.isGuid(l)&&(a="guid"),t.ignoreCase&&(a||(p="tolower("+p+")"),l=l.toLowerCase())),t.operator==="isempty"||t.operator==="isnull"||t.operator==="isnotempty"||t.operator==="isnotnull"?(s=t.operator.indexOf("isnot")!==-1?A.odBiOperator.notequal:A.odBiOperator.equal,l=t.operator==="isnull"||t.operator==="isnotnull"?null:"''"):s=A.odBiOperator[t.operator],s)return n+=p,n+=s,a&&(n+=a),n+l;if(!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?s=A.odv4UniOperator[t.operator]:s=A.odUniOperator[t.operator],s==="like")l=l,l.indexOf("%")!==-1&&(l.charAt(0)==="%"&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.startswith:A.odUniOperator.startswith):l.charAt(l.length-1)==="%"&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.endswith:A.odUniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains):s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains),l=encodeURIComponent(l),l="'"+l+"'";else if(s==="wildcard")if(l=l,l.indexOf("*")!==-1){var c=l.split("*"),d=void 0,f=0;if(l.indexOf("*")!==0&&c[0].indexOf("%3f")===-1&&c[0].indexOf("?")===-1&&(d=c[0],d="'"+d+"'",s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.startswith:A.odUniOperator.startswith,n+=s+"(",n+=p+",",a&&(n+=a),n+=d+")",f++),l.lastIndexOf("*")!==l.length-1&&c[c.length-1].indexOf("%3f")===-1&&c[c.length-1].indexOf("?")===-1&&(d=c[c.length-1],d="'"+d+"'",s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.endswith:A.odUniOperator.endswith,f>0&&(n+=" and "),n+=s+"(",n+=p+",",a&&(n+=a),n+=d+")",f++),c.length>2){for(var g=1;g<c.length-1;g++)if(c[g].indexOf("%3f")===-1&&c[g].indexOf("?")===-1){if(d=c[g],d="'"+d+"'",s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,f>0&&(n+=" and "),s==="substringof"||s==="not substringof"){var m=d;d=p,p=m}n+=s+"(",n+=p+",",a&&(n+=a),n+=d+")",f++}}f===0?(s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):s="wildcard"}else s=!u(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";if(s==="substringof"||s==="not substringof"){var m=l;l=p,p=m}return s!=="wildcard"&&(n+=s+"(",n+=p+",",a&&(n+=a),n+=l+")"),n},e.prototype.addParams=function(t){o.prototype.addParams.call(this,t),delete t.reqParams.params},e.prototype.onComplexPredicate=function(t,i,r){for(var n=[],s=0;s<t.predicates.length;s++)n.push("("+this.onEachWhere(t.predicates[s],i,r)+")");return n.join(" "+t.condition+" ")},e.prototype.onEachWhere=function(t,i,r){return t.isComplex?this.onComplexPredicate(t,i,r):this.onPredicate(t,i,r)},e.prototype.onWhere=function(t){return this.pvt.search&&t.push(this.onEachWhere(this.pvt.search,null,!0)),t.join(" and ")},e.prototype.onEachSearch=function(t){t.fields&&t.fields.length===0&&A.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],r=0;r<t.fields.length;r++)i.push(new xe(t.fields[r],t.operator,t.key,t.ignoreCase));this.pvt.search=i},e.prototype.onSearch=function(t){return this.pvt.search=xe.or(this.pvt.search),""},e.prototype.onEachSort=function(t){var i=[];if(t.name instanceof Array)for(var r=0;r<t.name.length;r++)i.push(e.getField(t.name[r])+(t.direction==="descending"?" desc":""));else i.push(e.getField(t.name)+(t.direction==="descending"?" desc":""));return i.join(",")},e.prototype.onSortBy=function(t){return t.reverse().join(",")},e.prototype.onGroup=function(t){return this.pvt.groups=t,[]},e.prototype.onSelect=function(t){for(var i=0;i<t.length;i++)t[i]=e.getField(t[i]);return t.join(",")},e.prototype.onAggregates=function(t){return this.pvt.aggregates=t,""},e.prototype.onCount=function(t){return t===!0?"allpages":""},e.prototype.beforeSend=function(t,i,r){A.endsWith(r.url,this.options.batch)&&r.type.toLowerCase()==="post"?(i.headers.set("Accept",this.options.multipartAccept),i.headers.set("DataServiceVersion","2.0")):i.headers.set("Accept",this.options.accept),i.headers.set("DataServiceVersion","2.0"),i.headers.set("MaxDataServiceVersion","2.0")},e.prototype.processResponse=function(t,i,r,n,s,a){var l="odata.metadata";if(s&&s.type==="GET"&&!this.rootUrl&&t[l]){var h=t[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}var p="pvtData";if(!u(t.d)){var c=r&&r.isCountRequired?t.d.results:t.d,d="__metadata";if(!u(c))for(var f=0;f<c.length;f++)u(c[f][d])||delete c[f][d]}var g=s&&s[p],m=this.processBatchResponse(t,r,n,s,a);if(m)return m;var v=n&&s.fetchRequest.headers.get("DataServiceVersion"),y=null,R=v&&parseInt(v,10)||2;if(r&&r.isCountRequired){var b="__count";(t[b]||t["odata.count"])&&(y=t[b]||t["odata.count"]),t.d&&(t=t.d),(t[b]||t["odata.count"])&&(y=t[b]||t["odata.count"])}R===3&&t.value&&(t=t.value),t.d&&(t=t.d),R<3&&t.results&&(t=t.results);var E={};return E.count=y,E.result=t,this.getAggregateResult(g,t,E,null,r),A.isNull(y)?E.result:{result:E.result,count:E.count,aggregates:E.aggregates}},e.prototype.convertToQueryString=function(t,i,r){var n=[],s="table",a=t[s]||"",l="$format";delete t[s],r.dataSource.requiresFormat&&(t[l]="json");for(var h=Object.keys(t),p=0,c=h;p<c.length;p++){var d=c[p];n.push(d+"="+t[d])}return n=n.join("&"),r.dataSource.url&&r.dataSource.url.indexOf("?")!==-1&&!a?n:n.length?a+"?"+n:a||""},e.prototype.localTimeReplacer=function(t,i){for(var r=0,n=u(i)?[]:Object.keys(i);r<n.length;r++){var s=n[r];i[s]instanceof Date&&(i[s]=A.dateParse.toLocalTime(i[s]))}return i},e.prototype.insert=function(t,i,r){return{url:(t.dataSource.insertUrl||t.dataSource.url).replace(/\/*$/,r?"/"+r:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},e.prototype.remove=function(t,i,r,n){var s;return typeof r=="string"&&!A.parse.isGuid(r)?s="('"+r+"')":s="("+r+")",{type:"DELETE",url:(t.dataSource.removeUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s}},e.prototype.update=function(t,i,r,n,s,a){this.options.updateType==="PATCH"&&!u(a)&&(r=this.compareAndRemove(r,a,i));var l;return typeof r[i]=="string"&&!A.parse.isGuid(r[i])?l="('"+r[i]+"')":l="("+r[i]+")",{type:this.options.updateType,url:(t.dataSource.updateUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+l,data:JSON.stringify(r,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},e.prototype.batchRequest=function(t,i,r,n,s){var a=r.guid=A.getGuid(this.options.batchPre),l=t.dataSource.batchUrl||this.rootUrl?(t.dataSource.batchUrl||this.rootUrl)+"/"+this.options.batch:(t.dataSource.batchUrl||t.dataSource.url).replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;var h={url:r.url,key:r.key,cid:1,cSet:A.getGuid(this.options.changeSet)},p="--"+a+`
`;return p+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+`
`,this.pvt.changeSet=0,p+=this.generateInsertRequest(i.addedRecords,h,t),p+=this.generateUpdateRequest(i.changedRecords,h,t,s?s.changedRecords:[]),p+=this.generateDeleteRequest(i.deletedRecords,h,t),p+=h.cSet+`--
`,p+="--"+a+"--",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:p}},e.prototype.generateDeleteRequest=function(t,i,r){if(!t)return"";var n="",s={method:"DELETE ",url:function(a,l,h){var p=A.getObject(h,a[l]);if(typeof p=="number"||A.parse.isGuid(p))return"("+p+")";if(p instanceof Date){var c=a[l][h];return"("+c.toJSON()+")"}else return"('"+p+"')"},data:function(a,l){return""}};return n=this.generateBodyContent(t,i,s,r),n+`
`},e.prototype.generateInsertRequest=function(t,i,r){if(!t)return"";var n="",s={method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+`

`}};return n=this.generateBodyContent(t,i,s,r),n},e.prototype.generateUpdateRequest=function(t,i,r,n){var s=this;if(!t)return"";var a="";t.forEach(function(h){return h=s.compareAndRemove(h,n.filter(function(p){return A.getObject(i.key,p)===A.getObject(i.key,h)})[0],i.key)});var l={method:this.options.updateType+" ",url:function(h,p,c){if(typeof h[p][c]=="number"||A.parse.isGuid(h[p][c]))return"("+h[p][c]+")";if(h[p][c]instanceof Date){var d=h[p][c];return"("+d.toJSON()+")"}else return"('"+h[p][c]+"')"},data:function(h,p){return JSON.stringify(h[p])+`

`}};return a=this.generateBodyContent(t,i,l,r),a},e.getField=function(t){return t.replace(/\./g,"/")},e.prototype.generateBodyContent=function(t,i,r,n){for(var s="",a=0;a<t.length;a++)s+=`
`+i.cSet+`
`,s+=this.options.changeSetContent+`

`,s+=r.method,r.method==="POST "?s+=(n.dataSource.insertUrl||n.dataSource.crudUrl||i.url)+r.url(t,a,i.key)+` HTTP/1.1
`:r.method==="PUT "||r.method==="PATCH "?s+=(n.dataSource.updateUrl||n.dataSource.crudUrl||i.url)+r.url(t,a,i.key)+` HTTP/1.1
`:r.method==="DELETE "&&(s+=(n.dataSource.removeUrl||n.dataSource.crudUrl||i.url)+r.url(t,a,i.key)+` HTTP/1.1
`),s+="Accept: "+this.options.accept+`
`,s+="Content-Id: "+this.pvt.changeSet+++`
`,s+=this.options.batchChangeSetContentType+`
`,u(t[a]["@odata.etag"])?s+=`
`:(s+="If-Match: "+t[a]["@odata.etag"]+`

`,delete t[a]["@odata.etag"]),s+=r.data(t,a);return s},e.prototype.processBatchResponse=function(t,i,r,n,s){if(r&&r.headers.get("Content-Type")&&r.headers.get("Content-Type").indexOf("xml")!==-1)return i.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&A.endsWith(n.url,this.options.batch)&&n.type.toLowerCase()==="post"){var a=r.headers.get("Content-Type"),l=void 0,h=void 0,p=t+"";if(a=a.substring(a.indexOf("=batchresponse")+1),p=p.split(a),p.length<2)return{};p=p[1];var c=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(p);c&&p.replace(c[0],"");var d=c?c[1]:"";p=p.split(d);for(var f=p.length;f>-1;f--)!/\bContent-ID:/i.test(p[f])||!/\bHTTP.+201/.test(p[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(p[f])[1],10),s.addedRecords[l]&&(h=A.parse.parseJson(/^\{.+\}/m.exec(p[f])[0]),Q({},s.addedRecords[l],this.processResponse(h))));return s}return null},e.prototype.compareAndRemove=function(t,i,r){var n=this;return u(i)||Object.keys(t).forEach(function(s){if(s!==r&&s!=="@odata.etag")if(A.isPlainObject(t[s])){n.compareAndRemove(t[s],i[s]);var a=Object.keys(t[s]).filter(function(l){return l!=="@odata.etag"});a.length===0&&delete t[s]}else(t[s]===i[s]||t[s]&&i[s]&&t[s].valueOf()===i[s].valueOf())&&delete t[s]}),t},e}(zt);(function(o){ri(e,o);function e(t){var i=o.call(this,t)||this;return i.options=Q({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),Q(i.options,t||{}),i}return e.prototype.getModuleName=function(){return"ODataV4Adaptor"},e.prototype.onCount=function(t){return t===!0?"true":""},e.prototype.onPredicate=function(t,i,r){var n="",s=t.value,a=s instanceof Date;if(i instanceof ae)for(var l=this.getQueryRequest(i),h=0;h<l.filters.length;h++)l.filters[h].e.key===t.value&&(r=!0);return n=o.prototype.onPredicate.call(this,t,i,r),a&&(n=n.replace(/datetime'(.*)'$/,"$1")),A.parse.isGuid(s)&&(n=n.replace("guid","").replace(/'/g,"")),n},e.prototype.onEachSearch=function(t){var i=this.pvt.searches||[];i.push(t.key),this.pvt.searches=i},e.prototype.onSearch=function(t){return this.pvt.searches.join(" OR ")},e.prototype.onExpand=function(t){var i=this,r={},n={},s=t.expands.slice(),a=[],l=t.selects.filter(function(h){return h.indexOf(".")>-1});return l.forEach(function(h){var p=h.split(".");if(p[0]in r||(r[p[0]]=[]),p.length===2)r[p[0]].length&&Object.keys(r).indexOf(p[0])!==-1?r[p[0]][0].indexOf("$expand")!==-1&&r[p[0]][0].indexOf(";$select=")===-1?r[p[0]][0]=r[p[0]][0]+";$select="+p[1]:r[p[0]][0]=r[p[0]][0]+","+p[1]:r[p[0]].push("$select="+p[1]);else{for(var c="$select="+p[p.length-1],d="",f="",g=1;g<p.length-1;g++)d=d+"$expand="+p[g]+"(",f=f+")";var m=d+c+f;if(r[p[0]].length&&Object.keys(r).indexOf(p[0])!==-1&&i.expandQueryIndex(r[p[0]],!0)){var v=i.expandQueryIndex(r[p[0]]);r[p[0]][v]=r[p[0]][v]+m.replace("$expand=",",")}else r[p[0]].push(m)}}),Object.keys(r).forEach(function(h){s.indexOf(h)===-1&&s.push(h)}),s.forEach(function(h){n[h]=h in r?h+"("+r[h].join(";")+")":h}),Object.keys(n).forEach(function(h){return a.push(n[h])}),a.join(",")},e.prototype.expandQueryIndex=function(t,i){for(var r=0;r<t.length;r++)if(t[r].indexOf("$expand")!==-1)return i?!0:r;return i?!1:0},e.prototype.onDistinct=function(t){var i=t.map(function(r){return Ki.getField(r)}).join(",");return"groupby(("+i+"))"},e.prototype.onSelect=function(t){return o.prototype.onSelect.call(this,t.filter(function(i){return i.indexOf(".")===-1}))},e.prototype.beforeSend=function(t,i,r){(r.type==="POST"||r.type==="PUT"||r.type==="PATCH")&&i.headers.set("Prefer","return=representation"),i.headers.set("Accept",this.options.accept)},e.prototype.processResponse=function(t,i,r,n,s,a){var l="@odata.context",h="@context";if(s&&s.type==="GET"&&!this.rootUrl&&(t[l]||t[h])){var p=t[l]?t[l].split("/$metadata#"):t[h].split("/$metadata#");this.rootUrl=p[0],this.resourceTableName=p[1]}var c="pvtData",d=s&&s[c],f=o.prototype.processBatchResponse.call(this,t,r,n,s,a);if(f)return f;var g=null,m="@odata.count",v="@count";r&&r.isCountRequired&&(m in t?g=t[m]:v in t&&(g=t[v])),t=u(t.value)?t:t.value;var y={};return y.count=g,y.result=t,this.getAggregateResult(d,t,y,null,r),A.isNull(g)?y.result:{result:y.result,count:g,aggregates:y.aggregates}},e})(Ki);(function(o){ri(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.getModuleName=function(){return"WebApiAdaptor"},e.prototype.insert=function(t,i,r){return{type:"POST",url:t.dataSource.url,data:JSON.stringify(i)}},e.prototype.remove=function(t,i,r,n){return{type:"DELETE",url:t.dataSource.url+"/"+r,data:JSON.stringify(r)}},e.prototype.update=function(t,i,r,n){return{type:"PUT",url:t.dataSource.url,data:JSON.stringify(r)}},e.prototype.batchRequest=function(t,i,r){var n=this,s=r.guid=A.getGuid(this.options.batchPre),a=t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;for(var l=[],h=function(g,m){i.addedRecords.forEach(function(v,y){var R={method:"POST ",url:function(b,E,k){return""},data:function(b,E){return JSON.stringify(b[E])+`

`}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("POST /api/"+(t.dataSource.insertUrl||t.dataSource.crudUrl||r.url)+R.url(i.addedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",v?JSON.stringify(v):"")})},p=0,c=i.addedRecords.length;p<c;p++)h(p);for(var d=function(g,m){i.changedRecords.forEach(function(v,y){var R={method:n.options.updateType+" ",url:function(b,E,k){return""},data:function(b,E){return JSON.stringify(b[E])+`

`}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("PUT /api/"+(t.dataSource.updateUrl||t.dataSource.crudUrl||r.url)+R.url(i.changedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",v?JSON.stringify(v):"")})},p=0,c=i.changedRecords.length;p<c;p++)d(p);for(var f=function(g,m){i.deletedRecords.forEach(function(v,y){var R={mtd:"DELETE ",url:function(b,E,k){var F=A.getObject(k,b[E]);if(typeof F=="number"||A.parse.isGuid(F))return"/"+F;if(F instanceof Date){var W=b[E][k];return"/"+W.toJSON()}else return"/'"+F+"'"},data:function(b,E){return""}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("DELETE /api/"+(t.dataSource.removeUrl||t.dataSource.crudUrl||r.url)+R.url(i.deletedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",v?JSON.stringify(v):"")})},p=0,c=i.deletedRecords.length;p<c;p++)f(p);return l.push("--"+s+"--",""),{type:"POST",url:a,contentType:"multipart/mixed; boundary="+s,data:l.join(`\r
`)}},e.prototype.beforeSend=function(t,i,r){i.headers.set("Accept","application/json, text/javascript, */*; q=0.01")},e.prototype.processResponse=function(t,i,r,n,s,a){var l="pvtData",h=s&&s[l],p=null,c={};if(s&&s.type.toLowerCase()!=="post"){var d=n&&s.fetchRequest.headers.get("DataServiceVersion"),f=d&&parseInt(d,10)||2;r&&r.isCountRequired&&(A.isNull(t.Count)||(p=t.Count)),f<3&&t.Items&&(t=t.Items),c.count=p,c.result=t,this.getAggregateResult(h,t,c,null,r)}return c.result=c.result||t,A.isNull(p)?c.result:{result:c.result,count:c.count,aggregates:c.aggregates}},e})(Ki);(function(o){ri(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.processQuery=function(t,i,r){var n=new zt().processQuery(t,i,r),s="data",a=A.parse.parseJson(n[s]),l={},h="value";if(a.param)for(var p=0;p<a.param.length;p++){var c=a.param[p],d=Object.keys(c)[0];l[d]=c[d]}l[h]=a;var f="pvtData",g="url";return{data:JSON.stringify(l,A.parse.jsonDateReplacer),url:n[g],pvtData:n[f],type:"POST",contentType:"application/json; charset=utf-8"}},e})(zt);var Na=function(o){ri(e,o);function e(){return o.call(this)||this}return e.prototype.insert=function(t,i,r,n,s){return this.pvt.position=s,this.updateType="add",{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:i,table:r,action:"insert"},A.getAddParams(this,t,n)))}},e.prototype.remove=function(t,i,r,n,s){return o.prototype.remove.call(this,t,i,r),{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{key:r,keyColumn:i,table:n,action:"remove"},A.getAddParams(this,t,s)))}},e.prototype.update=function(t,i,r,n,s){return this.updateType="update",this.updateKey=i,{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(Q({},{value:r,action:"update",keyColumn:i,key:r[i],table:n},A.getAddParams(this,t,s)))}},e.prototype.processResponse=function(t,i,r,n,s,a,l){var h,p=s?JSON.parse(s.data):t;if(t=p.action==="batch"?A.parse.parseJson(t):t,this.updateType==="add"&&o.prototype.insert.call(this,i,t,null,null,this.pvt.position),this.updateType==="update"&&o.prototype.update.call(this,i,this.updateKey,t),this.updateType=void 0,t.added)for(h=0;h<t.added.length;h++)o.prototype.insert.call(this,i,t.added[h]);if(t.changed)for(h=0;h<t.changed.length;h++)o.prototype.update.call(this,i,l.key,t.changed[h]);if(t.deleted)for(h=0;h<t.deleted.length;h++)o.prototype.remove.call(this,i,l.key,t.deleted[h]);return t},e.prototype.batchRequest=function(t,i,r,n,s){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(Q({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:r.url,key:r.key},A.getAddParams(this,t,n)))}},e.prototype.addParams=function(t){var i=new zt;i.addParams(t)},e.prototype.beforeSend=function(t,i,r){},e}(hs),lh=function(o){ri(e,o);function e(t){var i=o.call(this)||this;return i.options=Q({},i.options,{getData:function(){},addRecord:function(){},updateRecord:function(){},deleteRecord:function(){},batchUpdate:function(){}}),Q(i.options,t||{}),i}return e.prototype.getModuleName=function(){return"CustomDataAdaptor"},e}(zt);(function(o){ri(e,o);function e(t){var i=o.call(this)||this;return i.opt=t,i.schema=i.opt.response,i.query=i.opt.query,i.getVariables=i.opt.getVariables?i.opt.getVariables:function(){},i.getQuery=function(){return i.query},i}return e.prototype.getModuleName=function(){return"GraphQLAdaptor"},e.prototype.processQuery=function(t,i){var r=o.prototype.processQuery.apply(this,arguments),n=JSON.parse(r.data),s=["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"],a={},l="searchwhereparams";s.filter(function(c){a[c]=l.indexOf(c)>-1?JSON.stringify(n[c]):n[c]});var h=this.getVariables()||{};h.datamanager=a;var p=JSON.stringify({query:this.getQuery(),variables:h});return r.data=p,r},e.prototype.processResponse=function(t,i,r,n,s){var a=t,l,h,p=oe(this.schema.result,a.data);this.schema.count&&(l=oe(this.schema.count,a.data)),this.schema.aggregates&&(h=oe(this.schema.aggregates,a.data),h=u(h)?h:A.parse.parseJson(h));var c=s.pvtData||{},d={result:p,aggregates:h},f=d;return c&&c.groups&&c.groups.length&&this.getAggregateResult(c,f,d,null,r),u(l)?d.result:{result:d.result,count:l,aggregates:h}},e.prototype.insert=function(){var t=o.prototype.insert.apply(this,arguments);return this.generateCrudData(t,"insert")},e.prototype.update=function(){var t=o.prototype.update.apply(this,arguments);return this.generateCrudData(t,"update")},e.prototype.remove=function(){var t=o.prototype.remove.apply(this,arguments);return this.generateCrudData(t,"remove")},e.prototype.batchRequest=function(t,i,r,n,s){var a=o.prototype.batchRequest.apply(this,arguments),l=JSON.parse(a.data);return l.key=r.key,a.data=JSON.stringify(l),this.generateCrudData(a,"batch")},e.prototype.generateCrudData=function(t,i){var r=JSON.parse(t.data);return t.data=JSON.stringify({query:this.opt.getMutation(i),variables:r}),t},e})(zt);var hh=function(o){ri(e,o);function e(t,i,r){var n=o.call(this)||this;n.isCrudAction=!1,n.isInsertAction=!1,u(t)||(n.cacheAdaptor=t),n.pageSize=r,n.guidId=A.getGuid("cacheAdaptor");var s={keys:[],results:[]};window.localStorage.setItem(n.guidId,JSON.stringify(s));var a=n.guidId;return u(i)||setInterval(function(){for(var l=A.parse.parseJson(window.localStorage.getItem(a)),h=[],p=0;p<l.results.length;p++){var c=+new Date,d=+new Date(l.results[p].timeStamp);l.results[p].timeStamp=c-d,c-d>i&&h.push(p)}for(var p=0;p<h.length;p++)l.results.splice(h[p],1),l.keys.splice(h[p],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},i),n}return e.prototype.generateKey=function(t,i){var r=this.getQueryRequest(i),n=ae.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=t,a="onPage";a in n&&(s+=n[a].pageIndex),r.sorts.forEach(function(d){s+=d.e.direction+d.e.fieldName}),r.groups.forEach(function(d){s+=d.e.fieldName}),r.searches.forEach(function(d){s+=d.e.searchKey});for(var l=0;l<r.filters.length;l++){var h=r.filters[l];if(h.e.isComplex){var p=i.clone();p.queries=[];for(var c=0;c<h.e.predicates.length;c++)p.queries.push({fn:"onWhere",e:h.e.predicates[c],filter:i.queries.filter});s+=h.e.condition+this.generateKey(t,p)}else s+=h.e.field+h.e.operator+h.e.value}return s},e.prototype.processQuery=function(t,i,r){var n=this.generateKey(t.dataSource.url,i),s=A.parse.parseJson(window.localStorage.getItem(this.guidId)),a=s?s.results[s.keys.indexOf(n)]:null;return a!=null&&!this.isCrudAction&&!this.isInsertAction?a:(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},e.prototype.processResponse=function(t,i,r,n,s,a){if(this.isInsertAction||s&&this.cacheAdaptor.options.batch&&A.endsWith(s.url,this.cacheAdaptor.options.batch)&&s.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(t,i,r,n,s,a);t=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=r?this.generateKey(i.dataSource.url,r):i.dataSource.url,h={};h=A.parse.parseJson(window.localStorage.getItem(this.guidId));var p=h.keys.indexOf(l);for(p!==-1&&(h.results.splice(p,1),h.keys.splice(p,1)),h.results[h.keys.push(l)-1]={keys:l,result:t.result,timeStamp:new Date,count:t.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),t},e.prototype.beforeSend=function(t,i,r){!u(this.cacheAdaptor.options.batch)&&A.endsWith(r.url,this.cacheAdaptor.options.batch)&&r.type.toLowerCase()==="post"&&i.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),t.dataSource.crossDomain||i.headers.set("Accept",this.cacheAdaptor.options.accept)},e.prototype.update=function(t,i,r,n){return this.isCrudAction=!0,this.cacheAdaptor.update(t,i,r,n)},e.prototype.insert=function(t,i,r){return this.isInsertAction=!0,this.cacheAdaptor.insert(t,i,r)},e.prototype.remove=function(t,i,r,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(t,i,r,n)},e.prototype.batchRequest=function(t,i,r){return this.cacheAdaptor.batchRequest(t,i,r)},e}(zt),kr=function(o,e,t,i){return new(t||(t=Promise))(function(r,n){function s(h){try{l(i.next(h))}catch(p){n(p)}}function a(h){try{l(i.throw(h))}catch(p){n(p)}}function l(h){h.done?r(h.value):new t(function(p){p(h.value)}).then(s,a)}l((i=i.apply(o,e||[])).next())})},Dr=function(o,e){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,r,n,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(p){return l([h,p])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,r&&(n=h[0]&2?r.return:h[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,h[1])).done)return n;switch(r=0,n&&(h=[h[0]&2,n.value]),h[0]){case 0:case 1:n=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,r=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!n||h[1]>n[0]&&h[1]<n[3])){t.label=h[1];break}if(h[0]===6&&t.label<n[1]){t.label=n[1],n=h;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(h);break}n[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(o,t)}catch(p){h=[6,p],r=0}finally{i=n=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},_=function(){function o(e,t,i){var r=this;this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isEnableCache=!1,this.isInitialLoad=!0,this.isEnableCache=!1,!e&&!this.dataSource&&(e=[]),i=i||e.adaptor,e&&e.timeZoneHandling===!1&&(this.timeZoneHandling=e.timeZoneHandling);var n;if(e instanceof Array?n={json:e,offline:!0}:typeof e=="object"?(e.json||(e.json=[]),e.enablePersistence||(e.enablePersistence=!1),e.id||(e.id=""),e.ignoreOnPersist||(e.ignoreOnPersist=[]),n={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,enableCache:e.enableCache,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,jsonp:e.jsonp,dataType:e.dataType,offline:e.offline!==void 0?e.offline:e.adaptor instanceof Na||e.adaptor instanceof lh?!1:!e.url,requiresFormat:e.requiresFormat,enablePersistence:e.enablePersistence,id:e.id,ignoreOnPersist:e.ignoreOnPersist}):A.throwError("DataManager: Invalid arguments"),n.requiresFormat===void 0&&!A.isCors()&&(n.requiresFormat=u(n.crossDomain)?!0:n.crossDomain),n.dataType===void 0&&(n.dataType="json"),this.isEnableCache=n.enableCache,this.dataSource=n,this.defaultQuery=t,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new Ki,this.dataSource.offline=!1,this.ready=this.executeQuery(t||new ae),this.ready.then(function(a){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=a.result,r.adaptor=new hs})):this.adaptor=n.offline?new hs:new Ki,!n.jsonp&&this.adaptor instanceof Ki&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,this.isEnableCache){this.guidId=A.getGuid("cacheAdaptor");var s={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(s))}return n.enableCaching&&(this.adaptor=new hh(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return Object.defineProperty(o.prototype,"moduleName",{get:function(){return"datamanager"},enumerable:!0,configurable:!0}),o.prototype.getPersistedData=function(e){var t=localStorage.getItem(e||this.dataSource.id);return JSON.parse(t)},o.prototype.setPersistData=function(e,t,i){localStorage.setItem(t||this.dataSource.id,JSON.stringify(i||this.persistQuery))},o.prototype.setPersistQuery=function(e){var t=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(n){if(t.dataSource.ignoreOnPersist&&t.dataSource.ignoreOnPersist.length&&n.fn&&t.dataSource.ignoreOnPersist.some(function(l){return n.fn===l}))return!1;if(n.fn==="onWhere"){var s=n.e;if(s&&s.isComplex&&s.predicates instanceof Array){var a=s.predicates.map(function(l){if(l.predicates&&l.predicates instanceof Array){var h=l.predicates.map(function(v){var y=v.field,R=v.operator,b=v.value,E=v.ignoreCase,k=v.ignoreAccent,F=v.matchCase;return new xe(y,R,b,E,k,F)});return l.condition==="and"?xe.and(h):xe.or(h)}else{var p=l.field,c=l.operator,d=l.value,f=l.ignoreCase,g=l.ignoreAccent,m=l.matchCase;return new xe(p,c,d,f,g,m)}});n.e=new xe(a[0],s.condition,a.slice(1))}}return!0});var r=Q(new ae,this.persistQuery);return this.isInitialLoad=!1,r}else return this.persistQuery=e,this.isInitialLoad=!1,e},o.prototype.setDefaultQuery=function(e){return this.defaultQuery=e,this},o.prototype.executeLocal=function(e){!this.defaultQuery&&!(e instanceof ae)&&A.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||A.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e)),e=e||this.defaultQuery;var t=this.adaptor.processQuery(this,e);if(e.subQuery){var i=e.subQuery.fromTable,r=e.subQuery.lookups,n=e.isCountRequired?t.result:t;r&&r instanceof Array&&A.buildHierarchy(e.subQuery.fKey,i,n,r,e.subQuery.key);for(var s=0;s<n.length;s++)n[s][i]instanceof Array&&(n[s]=Q({},{},n[s]),n[s][i]=this.adaptor.processResponse(e.subQuery.using(new o(n[s][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)},o.prototype.executeQuery=function(e,t,i,r){var n=this,s="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e)),typeof e=="function"&&(r=i,i=t,t=e,e=null),e||(e=this.defaultQuery),e instanceof ae||A.throwError("DataManager - executeQuery() : A query is required to execute");var a=new pt,l={query:e};if(!this.dataSource.offline&&this.dataSource.url!==void 0&&this.dataSource.url!==""||!u(this.adaptor[s])||this.isCustomDataAdaptor(this.adaptor)){var h=this.isEnableCache?this.processQuery(e):this.adaptor.processQuery(this,e);u(this.adaptor[s])?!u(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,e)):(l=o.getDeferedArgs(e,h,l),a.resolve(l)):this.adaptor[s](h,a,l,e)}else o.nextTick(function(){var p=n.executeLocal(e);l=o.getDeferedArgs(e,p,l),a.resolve(l)});return(t||i)&&a.promise.then(t,i),r&&a.promise.then(r,r),a.promise},o.prototype.getQueryRequest=function(e){var t={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return t.sorts=ae.filterQueries(e.queries,"onSortBy"),t.groups=ae.filterQueries(e.queries,"onGroup"),t.filters=ae.filterQueries(e.queries,"onWhere"),t.searches=ae.filterQueries(e.queries,"onSearch"),t.aggregates=ae.filterQueries(e.queries,"onAggregates"),t},o.prototype.generateKey=function(e,t){var i=this.getQueryRequest(t),r=ae.filterQueryLists(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),n=e,s="onPage";i.sorts.forEach(function(d){n+=d.e.direction+d.e.fieldName}),i.groups.forEach(function(d){n+=d.e.fieldName}),i.searches.forEach(function(d){n+=d.e.searchKey});for(var a=0;a<i.filters.length;a++){var l=i.filters[a];if(l.e.isComplex){var h=t.clone();h.queries=[];for(var p=0;p<l.e.predicates.length;p++)h.queries.push({fn:"onWhere",e:l.e.predicates[p],filter:t.queries.filter});n+=l.e.condition+this.generateKey(e,h)}else n+=l.e.field+l.e.operator+l.e.value}if(!u(this.previousCacheQuery)&&this.previousCacheQuery!==n){var c={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(c))}return this.previousCacheQuery=n,s in r&&(n+=r[s].pageIndex),n},o.prototype.processQuery=function(e){var t=this.generateKey(this.dataSource.url,e),i=JSON.parse(window.localStorage.getItem(this.guidId)),r=i?i.results[i.keys.indexOf(t)]:null;return r!=null?A.parse.parseJson(r):this.adaptor.processQuery(this,e)},o.getDeferedArgs=function(e,t,i){return e.isCountRequired?(i.result=t.result,i.count=t.count,i.aggregates=t.aggregates):i.result=t,i},o.nextTick=function(e){(window.setImmediate||window.setTimeout)(e,0)},o.prototype.extendRequest=function(e,t,i){return Q({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:t,onFailure:i},e)},o.prototype.makeRequest=function(e,t,i,r){var n=this,s=!!r.subQuerySelector,a=function(v){i.error=v,t.reject(i)},l=function(v,y,R,b,E,k,F){i.xhr=R,i.count=y?parseInt(y.toString(),10):0,i.result=v,i.request=b,i.aggregates=k,i.actual=E,i.virtualSelectRecords=F,t.resolve(i)},h=function(v,y){var R=new pt,b={parent:i};r.subQuery.isChild=!0;var E=n.adaptor.processQuery(n,r.subQuery,v?n.adaptor.processResponse(v):y),k=n.makeRequest(E,R,b,r.subQuery);return s||R.then(function(F){v&&(A.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,v,F,r.subQuery.key),l(v,F.count,F.xhr))},a),k},p=function(v,y){if(n.isGraphQLAdaptor(n.adaptor)&&!u(v.errors))return a(v.errors);n.isCustomDataAdaptor(n.adaptor)&&(y=Q({},n.fetchReqOption,y)),y.contentType.indexOf("xml")===-1&&n.dateParse&&!n.isEnableCache&&(v=A.parse.parseJson(v));var R,b=n.afterReponseRequest(v);b.then(function(E){if(R=n.adaptor.processResponse(E,n,r,y.fetchRequest,y),n.isEnableCache){var k=r?n.generateKey(n.dataSource.url,r):n.dataSource.url,F={};F=JSON.parse(window.localStorage.getItem(n.guidId));var W=F.keys.indexOf(k);W!==-1&&(F.results.splice(W,1),F.keys.splice(W,1)),F.results[F.keys.push(k)-1]={keys:k,result:R.result,timeStamp:new Date,count:R.count},window.localStorage.setItem(n.guidId,JSON.stringify(F))}y.contentType.indexOf("xml")===-1&&n.dateParse&&n.isEnableCache&&(R=A.parse.parseJson(R));var te=0,ne=null,ye="virtualSelectRecords",L=E[ye];if(r.isCountRequired&&(te=R.count,ne=R.aggregates,R=R.result),!r.subQuery){l(R,te,y.fetchRequest,y.type,E,ne,L);return}s||h(R,y)}).catch(function(E){return n.dataManagerFailure(E,t,i)})},c=this.extendRequest(e,p,a);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=c;var g=c;this.adaptor.options.getData({data:g.data,onSuccess:g.onSuccess,onFailure:g.onFailure})}else{var d=this.useMiddleware(c),f;d.then(function(v){f=new Tn(c),f.beforeSend=function(){n.beforeSend(f.fetchRequest,f,v)},c=f.send(),c.catch(function(y){return!0}),n.requests.push(f)}).catch(function(v){return n.dataManagerFailure(v,t,i)})}if(s){var d=void 0,m=r.subQuerySelector.call(this,{query:r.subQuery,parent:r});m&&m.length?(d=Promise.all([c,h(null,m)]),d.then(function(){for(var y=[],R=0;R<arguments.length;R++)y[R]=arguments[R];var b=y[0],E=n.adaptor.processResponse(b[0],n,r,n.requests[0].fetchRequest,n.requests[0]),k=0;r.isCountRequired&&(k=E.count,E=E.result);var F=n.adaptor.processResponse(b[1],n,r.subQuery,n.requests[1].fetchRequest,n.requests[1]);k=0,r.subQuery.isCountRequired&&(k=F.count,F=F.result),A.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,E,F,r.subQuery.key),s=!1,l(E,k,n.requests[0].fetchRequest)})):s=!1}return c},o.prototype.dataManagerFailure=function(e,t,i){i.error=e,t.reject(i)},o.prototype.afterReponseRequest=function(e){return kr(this,void 0,void 0,function(){var t,i;return Dr(this,function(r){switch(r.label){case 0:return[4,this.applyPostRequestMiddlewares(e)];case 1:return t=r.sent(),i=new pt,i.resolve(t),[2,i.promise]}})})},o.prototype.applyPostRequestMiddlewares=function(e){return kr(this,void 0,void 0,function(){return Dr(this,function(t){return[2,e]})})},o.prototype.useMiddleware=function(e){return kr(this,void 0,void 0,function(){var t,i;return Dr(this,function(r){switch(r.label){case 0:return[4,this.applyPreRequestMiddlewares(e)];case 1:return t=r.sent(),i=new pt,i.resolve(t),[2,i.promise]}})})},o.prototype.applyPreRequestMiddlewares=function(e){return kr(this,void 0,void 0,function(){return Dr(this,function(t){return[2,e]})})},o.prototype.beforeSend=function(e,t,i){this.adaptor.beforeSend(this,e,t);var r=[];this.dataSource.headers&&(r=r.concat(this.dataSource.headers));var n;i&&i.headers&&(r=r.concat(i.headers));for(var s=0;r&&s<r.length;s++){n=[];for(var a=Object.keys(r[s]),l=0,h=a;l<h.length;l++){var p=h[l];n.push(p),e.headers.set(p,r[s][p])}}},o.prototype.saveChanges=function(e,t,i,r,n){var s=this;i instanceof ae&&(r=i,i=null);var a={url:i,key:t||this.dataSource.key},l=this.adaptor.batchRequest(this,e,a,r||new ae,n),h="dofetchRequest";if(this.dataSource.offline)return l;if(u(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(l,this.adaptor.options.batchUpdate,e);var p=new pt,c=new Tn(l);return c.beforeSend=function(){s.beforeSend(c.fetchRequest,c)},c.onSuccess=function(d,f){s.isGraphQLAdaptor(s.adaptor)&&(u(d.errors)||c.onFailure(JSON.stringify(d.errors))),p.resolve(s.adaptor.processResponse(d,s,null,f.fetchRequest,f,e,a))},c.onFailure=function(d){p.reject([{error:d}])},c.send().catch(function(d){return!0}),p.promise}else return this.adaptor[h](l)},o.prototype.insert=function(e,t,i,r){t instanceof ae&&(i=t,t=null);var n=this.adaptor.insert(this,e,t,i,r),s="dofetchRequest";return this.dataSource.offline?n:u(this.adaptor[s])?this.dofetchRequest(n,this.adaptor.options.addRecord):this.adaptor[s](n)},o.prototype.remove=function(e,t,i,r){typeof t=="object"&&(t=A.getObject(e,t)),i instanceof ae&&(r=i,i=null);var n=this.adaptor.remove(this,e,t,i,r),s="dofetchRequest";if(this.dataSource.offline)return n;if(u(this.adaptor[s])){var a=this.adaptor.options.deleteRecord;return this.dofetchRequest(n,a)}else return this.adaptor[s](n)},o.prototype.update=function(e,t,i,r,n){i instanceof ae&&(r=i,i=null),this.isEnableCache&&(this.cacheQuery=this.generateKey(this.dataSource.url,r));var s=this.adaptor.update(this,e,t,i,r,n),a="dofetchRequest";if(this.dataSource.offline)return s;if(u(this.adaptor[a])){var l=this.adaptor.options.updateRecord;return this.dofetchRequest(s,l)}else return this.adaptor[a](s)},o.prototype.isCustomDataAdaptor=function(e){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="CustomDataAdaptor"},o.prototype.isGraphQLAdaptor=function(e){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="GraphQLAdaptor"},o.prototype.successFunc=function(e,t,i){if(this.isGraphQLAdaptor(this.adaptor)){var r=typeof e=="object"?e:JSON.parse(e);u(r.errors)||this.failureFunc(JSON.stringify(r.errors))}this.isCustomDataAdaptor(this.adaptor)&&(t=Q({},this.fetchReqOption,t));try{A.parse.parseJson(e)}catch{e=[]}if(this.isEnableCache){var n=JSON.parse(t.data);if(n.action==="insert"||n.action==="remove"){var s={keys:[],results:[]};window.localStorage.setItem(this.guidId,JSON.stringify(s))}else if(n.action==="update"){var a=JSON.parse(window.localStorage.getItem(this.guidId)),r=a?a.results[a.keys.indexOf(this.cacheQuery)]:null;if(r&&r.result){for(var l=r.result,h=0;h<l.length;h++)if(l[h][n.keyColumn]===n.key){l[h]=n.value,window.localStorage.setItem(this.guidId,JSON.stringify(a));break}}}}e=this.adaptor.processResponse(A.parse.parseJson(e),this,null,t.fetchRequest,t,i),this.fetchDeffered.resolve(e)},o.prototype.failureFunc=function(e){this.isEnableCache&&(this.cacheQuery=""),this.fetchDeffered.reject([{error:e}])},o.prototype.dofetchRequest=function(e,t,i){var r=this;if(e=Q({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},e),this.fetchDeffered=new pt,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=e,t.call(this,{data:e.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this),changes:i});else{var n=new Tn(e);n.beforeSend=function(){r.beforeSend(n.fetchRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(s){return!0})}return this.fetchDeffered.promise},o.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},o}(),pt=function(){function o(){var e=this;this.promise=new Promise(function(t,i){e.resolve=t,e.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return o}(),Re={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"},ht;(function(o){o.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var e={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},t={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:o.defaultMappedFields,ariaAttributes:e,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function i(L,P,D,N,$){var V=Q({},t,D),H=Q({},e,V.ariaAttributes),z=g(P).typeof;return z==="string"||z==="number"?r(L,P,N,D,$):a(L,P,D,H.level,N,$)}o.createList=i;function r(L,P,D,N,$){var V=n(L,P,D,N,$);return ne(L,V,null,N)}o.createListFromArray=r;function n(L,P,D,N,$){var V=[],H=Q({},t,N);Re=F(H.moduleName);for(var z=b(),Z=0;Z<P.length;Z++)if(!u(P[Z])){var he=void 0;if(H.itemCreating&&typeof H.itemCreating=="function"){var Se={dataSource:P,curData:P[Z],text:P[Z],options:H};H.itemCreating(Se)}if(D?he=k(L,P[Z],void 0,null,null,[],null,z,Z,N):he=te(L,P[Z],void 0,null,null,N,$),H.itemCreated&&typeof H.itemCreated=="function"){var Se={dataSource:P,curData:P[Z],text:P[Z],item:he,options:H};H.itemCreated(Se)}V.push(he)}return V}o.createListItemFromArray=n;function s(L,P,D,N,$,V){var H=Q({},t,D);Re=F(H.moduleName);var z=V&&(V.getModuleName()==="listview"||V.getModuleName()==="multiselect")?H.fields:Q({},o.defaultMappedFields,H.fields),Z=Q({},e,H.ariaAttributes),he,Se=[];N&&(Z.level=N);var me=[],ce,ge;P&&P.length&&!u(g(P).item)&&!Object.prototype.hasOwnProperty.call(g(P).item,z.id)&&(he=b());for(var se=0;se<P.length;se++){var ie=nr(P[se],z);if(!u(P[se])){if(H.itemCreating&&typeof H.itemCreating=="function"){var ee={dataSource:P,curData:P[se],text:ie[z.text],options:H,fields:z};H.itemCreating(ee)}var it=P[se];H.itemCreating&&typeof H.itemCreating=="function"&&(ie=nr(P[se],z)),Object.prototype.hasOwnProperty.call(ie,z.id)&&!u(ie[z.id])&&(he=ie[z.id]);var ze=[];if(H.showCheckBox&&(H.itemNavigable&&(ie[z.url]||ie[z.urlAttributes])?Se.push(L("input",{className:Re.check,attrs:{type:"checkbox"}})):ze.push(L("input",{className:Re.check,attrs:{type:"checkbox"}}))),$===!0){if(H.showIcon&&Object.prototype.hasOwnProperty.call(ie,z.iconCss)&&!u(ie[z.iconCss])&&ze.push(L("span",{className:Re.icon+" "+ie[z.iconCss]})),ce=k(L,it,ie,z,H.itemClass,ze,!!(Object.prototype.hasOwnProperty.call(it,"isHeader")&&it.isHeader),he,se,D),ge=ce.querySelector("."+Re.anchorWrap),Object.prototype.hasOwnProperty.call(ie,z.tooltip)){var Ne=ie[z.tooltip];if(D&&D.enableHtmlSanitizer)Ne=Xt.sanitize(Ne);else{var Ee=L("span",{innerHTML:Ne});Ne=Ee.innerText,Ee=null}ce.setAttribute("title",Ne)}H.itemNavigable&&Se.length&&Pt(Se,ce.firstElementChild)}else{if(ce=te(L,it,ie,z,H.itemClass,D,V),ce.classList.add(Re.level+"-"+Z.level),ce.setAttribute("aria-level",Z.level.toString()),(Z.groupItemRole==="presentation"||Z.itemRole==="presentation")&&ce.removeAttribute("aria-level"),ge=ce.querySelector("."+Re.anchorWrap),Object.prototype.hasOwnProperty.call(ie,z.tooltip)){var Ne=ie[z.tooltip];if(D&&D.enableHtmlSanitizer)Ne=Xt.sanitize(Ne);else{var Ee=L("span",{innerHTML:Ne});Ne=Ee.innerText,Ee=null}ce.setAttribute("title",Ne)}if(Object.prototype.hasOwnProperty.call(ie,z.htmlAttributes)&&ie[z.htmlAttributes]){var Ce=ie[z.htmlAttributes];"class"in Ce&&typeof Ce.class=="string"&&Ce.class.trim()===""&&delete Ce.class,m(ce,Ce)}if(Object.prototype.hasOwnProperty.call(ie,z.enabled)&&ie[z.enabled]===!1&&ce.classList.add(Re.disabled),Object.prototype.hasOwnProperty.call(ie,z.isVisible)&&ie[z.isVisible]===!1&&(ce.style.display="none"),Object.prototype.hasOwnProperty.call(ie,z.imageUrl)&&!u(ie[z.imageUrl])&&!H.template){var ni={src:ie[z.imageUrl],alt:u(ie.name)?"Displaying Image":"Displaying "+ie.name+" Image"};fi(ni,ie[z.imageAttributes]);var wt=L("img",{className:Re.image,attrs:ni});ge?ge.insertAdjacentElement("afterbegin",wt):Pt([wt],ce.firstElementChild)}if(H.showIcon&&Object.prototype.hasOwnProperty.call(ie,z.iconCss)&&!u(ie[z.iconCss])&&!H.template){var It=L("div",{className:Re.icon+" "+ie[z.iconCss]});ge?ge.insertAdjacentElement("afterbegin",It):Pt([It],ce.firstElementChild)}ze.length&&Pt(ze,ce.firstElementChild),H.itemNavigable&&Se.length&&Pt(Se,ce.firstElementChild),E(L,ie,z,P,H,ce,Z.level)}if(ge&&B([ce],[Re.navigable]),H.itemCreated&&typeof H.itemCreated=="function"){var ee={dataSource:P,curData:P[se],text:ie[z.text],item:ce,options:H,fields:z};H.itemCreated(ee)}Se=[],me.push(ce)}}return me}o.createListItemFromJson=s;function a(L,P,D,N,$,V){var H=Q({},t,D),z=s(L,P,D,N,$,V);return ne(L,z,H.listClass,D)}o.createListFromJson=a;function l(L,P,D){if(Re=F(t.moduleName),!(!L||!L.length)){var N,$,V=Array.prototype.slice.call(L);for(P?$=h(P,V):$=D===!0?V.length:-1,N=V[$+(D===!0?-1:1)];N&&(!$l(N)||N.classList.contains(Re.disabled));)$=$+(D===!0?-1:1),N=V[$];return N}}o.getSiblingLI=l;function h(L,P){if(!(!P||!L)){var D=P;return D=Array.prototype.slice.call(P),D.indexOf(L)}}o.indexOf=h;function p(L,P,D){D===void 0&&(D="None");var N=Q({},o.defaultMappedFields,P),$=new ae().group(N.groupBy);$=c(D,"key",$);var V=d(L,$);L=[];for(var H=0;H<V.length;H++){var z=V[H].items,Z={},he="isHeader";Z[N.text]=V[H].key,Z[""+he]=!0;var Se=N.text;Se==="id"&&(Se="text",Z[""+Se]=V[H].key),Z._id="group-list-item-"+(V[H].key?V[H].key.toString().trim():"undefined"),Z.items=z,L.push(Z);for(var me=0;me<z.length;me++)L.push(z[me])}return L}o.groupDataSource=p;function c(L,P,D){if(D===void 0&&(D=new ae),L==="Ascending")D.sortBy(P,"ascending",!0);else if(L==="Descending")D.sortBy(P,"descending",!0);else for(var N=0;N<D.queries.length;N++)D.queries[N].fn==="onSortBy"&&D.queries.splice(N,1);return D}o.addSorting=c;function d(L,P){return new _(L).executeLocal(P)}o.getDataSource=d;function f(L,P){var D=Q({},t,P),N=Q({},o.defaultMappedFields,D.fields),$=L.cloneNode(!0),V=[];$.classList.add("json-parent");var H=$.querySelectorAll(".json-parent>li");$.classList.remove("json-parent");for(var z=0;z<H.length;z++){for(var Z=H[z],he=Z.querySelector("a"),Se=Z.querySelector("ul"),me={},ce=he?he.childNodes:Z.childNodes,ge=Object.keys(ce),se=0;se<ce.length;se++)ce[Number(ge[se])].hasChildNodes()||(me[N.text]=ce[Number(ge[se])].textContent);var ie=v(Z);ie.id?(me[N.id]=ie.id,delete ie.id):me[N.id]=b(),Object.keys(ie).length&&(me[N.htmlAttributes]=ie),he&&(ie=v(he),Object.keys(ie).length&&(me[N.urlAttributes]=ie)),Se&&(me[N.child]=f(Se,P)),V.push(me)}return V}o.createJsonFromElement=f;function g(L){for(var P={typeof:null,item:null},D=0;D<L.length;D++)if(!u(L[D]))return P={typeof:typeof L[D],item:L[D]};return P}function m(L,P){var D={};fi(D,P),D.class&&(B([L],D.class.split(" ")),delete D.class),de(L,D)}function v(L){for(var P={},D=L.attributes,N=0;N<D.length;N++)P[D[N].nodeName]=D[N].nodeValue;return P}function y(L,P,D,N,$,V){Re=F(t.moduleName);for(var H=L("ul",{className:Re.ul,attrs:{role:"presentation"}}),z=Q({},t,$),Z=Q({},o.defaultMappedFields,N),he=Mr(P),Se=[],me,ce=b(),ge=0;ge<D.length;ge++){var se=nr(D[ge],Z),ie=D[ge],ee=ie.isHeader;if(typeof D[ge]=="string"||typeof D[ge]=="number"?me=ie:me=se[Z.value],z.itemCreating&&typeof z.itemCreating=="function"){var it={dataSource:D,curData:ie,text:me,options:z,fields:Z};z.itemCreating(it)}z.itemCreating&&typeof z.itemCreating=="function"&&(se=nr(D[ge],Z),typeof D[ge]=="string"||typeof D[ge]=="number"?me=ie:me=se[Z.value]);var ze=L("li",{id:ce+"-"+ge,className:ee?Re.group:Re.li,attrs:{role:"presentation"}});if(ee)typeof D[ge]=="string"||typeof D[ge]=="number"?ze.innerText=ie:ze.innerText=se[Z.text];else{var Ne=ee?z.groupTemplateID:z.templateID;if(ee)if(V&&V.getModuleName()!=="listview"){var Ee=he(ie,V,"headerTemplate",Ne,!!z.isStringTemplate,null,ze);Ee&&Te(Ee,ze)}else Te(he(ie,V,"headerTemplate",Ne,!!z.isStringTemplate),ze);else if(V&&V.getModuleName()!=="listview"){var Ee=he(ie,V,"template",Ne,!!z.isStringTemplate,null,ze);Ee&&Te(Ee,ze)}else Te(he(ie,V,"template",Ne,!!z.isStringTemplate),ze);ze.setAttribute("data-value",u(me)?"null":me),ze.setAttribute("role","option")}if(z.itemCreated&&typeof z.itemCreated=="function"){var it={dataSource:D,curData:ie,text:me,item:ze,options:z,fields:Z};z.itemCreated(it)}Se.push(ze)}return Te(Se,H),H}o.renderContentTemplate=y;function R(L,P,D,N,$,V){for(var H=Mr(L),z=Q({},o.defaultMappedFields,D),Z=Q({},t,$),he=z.groupBy,Se=0,me=N;Se<me.length;Se++){var ce=me[Se],ge={};if(ge[""+he]=ce.textContent,ce.innerHTML="",V&&V.getModuleName()!=="listview"){var se=H(ge,V,"groupTemplate",Z.groupTemplateID,!!Z.isStringTemplate,null,ce);se&&Te(se,ce)}else Te(H(ge,V,"groupTemplate",Z.groupTemplateID,!!Z.isStringTemplate),ce)}return N}o.renderGroupTemplate=R;function b(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}o.generateId=b;function E(L,P,D,N,$,V,H){var z=P[D.child]||[],Z=P[D.hasChildren];if(z.length&&(Z=!0,V.classList.add(Re.hasChild),$.processSubChild)){var he=a(L,z,$,++H);V.appendChild(he)}if($.expandCollapse&&Z&&!$.template){V.firstElementChild.classList.add(Re.iconWrapper);var Se=$.expandIconPosition==="Left"?Pt:Te;Se([L("div",{className:"e-icons "+$.expandIconClass})],V.querySelector("."+Re.textContent))}}function k(L,P,D,N,$,V,H,z,Z,he){var Se=Q({},t,he),me=Q({},e,Se.ariaAttributes),ce=P,ge=P,se;typeof P!="string"&&typeof P!="number"&&typeof P!="boolean"&&(se=P,ce=typeof D[N.text]=="boolean"||typeof D[N.text]=="number"?D[N.text]:D[N.text]||"",ge=D[N.value]);var ie;!u(se)&&!u(D[N.id])&&D[N.id]!==""?ie=z:ie=z+"-"+Z;var ee=L("li",{className:(H===!0?Re.group:Re.li)+" "+(u($)?"":$),id:ie,attrs:me.groupItemRole!==""&&me.itemRole!==""?{role:H===!0?me.groupItemRole:me.itemRole}:{}});return se&&Object.prototype.hasOwnProperty.call(D,N.enabled)&&D[N.enabled].toString()==="false"&&ee.classList.add(Re.disabled),he&&he.enableHtmlSanitizer&&(ce=Xt.sanitize(ce)),H?ee.innerText=ce:(ee.setAttribute("data-value",u(ge)?"null":ge),ee.setAttribute("role","option"),se&&Object.prototype.hasOwnProperty.call(D,N.htmlAttributes)&&D[N.htmlAttributes]&&m(ee,D[N.htmlAttributes]),V.length&&!Se.itemNavigable&&Te(V,ee),se&&(D[N.url]||D[N.urlAttributes]&&D[N.urlAttributes].href)?ee.appendChild(W(L,se,N,ce,V,Se.itemNavigable)):(V.length&&Se.itemNavigable&&Te(V,ee),ee.appendChild(document.createTextNode(ce)))),ee}function F(L){return{li:"e-"+L+"-item",ul:"e-"+L+"-parent e-ul",group:"e-"+L+"-group-item",icon:"e-"+L+"-icon",text:"e-"+L+"-text",check:"e-"+L+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+L+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+L+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function W(L,P,D,N,$,V){var H=nr(P,D),z={href:H[D.url]};Object.prototype.hasOwnProperty.call(H,D.urlAttributes)&&H[D.urlAttributes]&&(fi(z,H[D.urlAttributes]),z.href=H[D.url]?H[D.url]:H[D.urlAttributes].href);var Z;if(!V)Z=L("a",{className:Re.text+" "+Re.url,innerHTML:N});else{Z=L("a",{className:Re.text+" "+Re.url});var he=L("div",{className:Re.anchorWrap});$&&$.length&&Te($,he),he.appendChild(document.createTextNode(N)),Te([he],Z)}return m(Z,z),Z}function te(L,P,D,N,$,V,H){var z=Q({},t,V),Z=Q({},e,z.ariaAttributes),he=P,Se,me,ce;typeof P!="string"&&typeof P!="number"&&(ce=P,he=D[N.text]||"",Se=u(D._id)?D[N.id]:D._id,me=!!(Object.prototype.hasOwnProperty.call(P,"isHeader")&&P.isHeader)),V&&V.enableHtmlSanitizer&&(he=Xt.sanitize(he));var ge=L("li",{className:(me===!0?Re.group:Re.li)+" "+(u($)?"":$),attrs:Z.groupItemRole!==""&&Z.itemRole!==""?{role:me===!0?Z.groupItemRole:Z.itemRole}:{}});if(u(Se)?ge.setAttribute("data-uid",b()):ge.setAttribute("data-uid",Se),me&&V&&V.groupTemplate){var se=Mr(V.groupTemplate);if(H&&H.getModuleName()!=="listview"){var ie=se(P,H,"groupTemplate",z.groupTemplateID,!!z.isStringTemplate,null,ge);ie&&Te(ie,ge)}else Te(se(P,H,"groupTemplate",z.groupTemplateID,!!z.isStringTemplate),ge)}else if(!me&&V&&V.template){var se=Mr(V.template);if(H&&H.getModuleName()!=="listview"){var ie=se(P,H,"template",z.templateID,!!z.isStringTemplate,null,ge);ie&&Te(ie,ge)}else Te(se(P,H,"template",z.templateID,!!z.isStringTemplate),ge)}else{var ee=L("div",{className:Re.textContent,attrs:Z.wrapperRole!==""?{role:Z.wrapperRole}:{}});if(ce&&(D[N.url]||D[N.urlAttributes]&&D[N.urlAttributes].href))ee.appendChild(W(L,ce,N,he,null,z.itemNavigable));else{var it=L("span",{className:Re.text,attrs:Z.itemText!==""?{role:Z.itemText}:{}});V&&V.enableHtmlSanitizer?it.innerText=he:it.innerHTML=he,ee.appendChild(it)}ge.appendChild(ee)}return ge}function ne(L,P,D,N){var $=Q({},t,N),V=Q({},e,$.ariaAttributes);Re=F($.moduleName);var H=L("ul",{className:Re.ul+" "+(u(D)?"":D),attrs:V.listRole!==""?{role:V.listRole}:{}});return Te(P,H),H}o.generateUL=ne;function ye(L,P,D,N){var $=Q({},t,N);Re=F($.moduleName);var V=$.expandIconPosition==="Left"?Pt:Te;return V([L("div",{className:"e-icons "+$.expandIconClass+" "+(u(D)?"":D)})],P.querySelector("."+Re.textContent)),P}o.generateIcon=ye})(ht||(ht={}));function nr(o,e){var t={};if(u(o)||typeof o=="string"||typeof o=="number"||!u(o.isHeader))return o;for(var i=0,r=Object.keys(e);i<r.length;i++){var n=r[i],s=e[""+n],a=!u(s)&&typeof s=="string"?oe(s,o):void 0;u(a)||(t[""+s]=a)}return t}function Mr(o){if(o)try{return typeof o!="function"&&document.querySelector(o)?Be(document.querySelector(o).innerHTML.trim()):Be(o)}catch{return Be(o)}}var Zt,Ii,Et,gr,qs=!1;function Vs(o,e){var t=!1,i={left:0,top:0},r=o;if(!o||!e)return i;for(u(e.offsetParent)&&e.style.position==="fixed"&&(t=!0);(e.offsetParent||t)&&o&&e.offsetParent!==o;)i.left+=o.offsetLeft,i.top+=o.offsetTop,o=o.offsetParent;for(o=r;(e.offsetParent||t)&&o&&e.offsetParent!==o;)i.left-=o.scrollLeft,i.top-=o.scrollTop,o=o.parentElement;return i}function mt(o,e,t,i,r){if(Ii=void 0,Ii=r,qs=!!i,!o)return{left:0,top:0};e||(e="left"),t||(t="top"),gr=o.ownerDocument,Et=o;var n={left:0,top:0};return uh(e.toLowerCase(),t.toLowerCase(),n)}function si(o,e){e.left=o}function oi(o,e){e.top=o}function uh(o,e,t){switch(Zt=Et.getBoundingClientRect(),e+o){case"topcenter":si(Dn(),t),oi(Qr(),t);break;case"topright":si(kn(),t),oi(Qr(),t);break;case"centercenter":si(Dn(),t),oi(Fn(),t);break;case"centerright":si(kn(),t),oi(Fn(),t);break;case"centerleft":si(Yr(),t),oi(Fn(),t);break;case"bottomcenter":si(Dn(),t),oi(Ln(),t);break;case"bottomright":si(kn(),t),oi(Ln(),t);break;case"bottomleft":si(Yr(),t),oi(Ln(),t);break;default:case"topleft":si(Yr(),t),oi(Qr(),t);break}return Et=null,t}function Ha(){return gr.documentElement.scrollTop||gr.body.scrollTop}function qa(){return gr.documentElement.scrollLeft||gr.body.scrollLeft}function Ln(){return qs?Zt.bottom:Zt.bottom+Ha()}function Fn(){return Qr()+Zt.height/2}function Qr(){return qs?Zt.top:Zt.top+Ha()}function Yr(){return Zt.left+qa()}function kn(){var o=Et&&((Et.classList.contains("e-date-wrapper")||Et.classList.contains("e-datetime-wrapper"))&&Et.classList.contains("e-rtl")||Et.classList.contains("e-ddl")&&Et.classList.contains("e-rtl")||Et.classList.contains("e-date-range-wrapper"))?Ii?Ii.width:0:Ii&&Zt.width>=Ii.width?Ii.width:0;return Et&&Et.classList.contains("e-rtl")&&Et.classList.contains("e-multiselect")&&(o=Ii.width),Zt.right+qa()-o}function Dn(){return Yr()+Zt.width/2}var Li,Ct;function Va(o,e,t,i){if(e===void 0&&(e=null),t===void 0&&(t={X:!1,Y:!1}),!t.Y&&!t.X)return{left:0,top:0};var r=o.getBoundingClientRect();if(Ct=e,Li=o.ownerDocument,i||(i=mt(o,"left","top")),t.X){var n=Ct?Ka():$a(),s=js(),a=Ks(),l=s-i.left,h=i.left+r.width-a;r.width>n?l>0&&h<=0?i.left=a-r.width:h>0&&l<=0?i.left=s:i.left=l>h?a-r.width:s:l>0?i.left+=l:h>0&&(i.left-=h)}if(t.Y){var p=Ct?Qa():Ja(),c=Us(),d=Qs(),f=c-i.top,g=i.top+r.height-d;r.height>p?f>0&&g<=0?i.top=d-r.height:g>0&&f<=0?i.top=c:i.top=f>g?d-r.height:c:f>0?i.top+=f:g>0&&(i.top-=g)}return i}function Gs(o,e,t,i){e===void 0&&(e=null);var r=mt(o,"left","top");t&&(r.left=t),i&&(r.top=i);var n=[];Ct=e,Li=o.ownerDocument;var s=o.getBoundingClientRect(),a=r.top,l=r.left,h=r.left+s.width,p=r.top+s.height,c=ja(a,p),d=Wa(l,h);return c.topSide&&n.push("top"),d.rightSide&&n.push("right"),d.leftSide&&n.push("left"),c.bottomSide&&n.push("bottom"),n}function ph(o,e,t,i,r,n,s,a,l){if(s===void 0&&(s=null),a===void 0&&(a={X:!0,Y:!0}),!(!e||!o||!r||!n||!a.X&&!a.Y)){var h={TL:null,TR:null,BL:null,BR:null},p={TL:null,TR:null,BL:null,BR:null},c;if(window.getComputedStyle(o).display==="none"){var d=o.style.visibility;o.style.visibility="hidden",o.style.display="block",c=o.getBoundingClientRect(),o.style.removeProperty("display"),o.style.visibility=d}else c=o.getBoundingClientRect();var f={posX:r,posY:n,offsetX:t,offsetY:i,position:{left:0,top:0}};Ct=s,Li=e.ownerDocument,dh(e,h,f,l,c),_s(p,f,c),a.X&&_a(e,p,h,f,c,!0),a.Y&&h.TL.top>-1&&Ua(e,p,h,f,c,!0),ch(o,f,c)}}function ch(o,e,t){var i=0,r=0;if(o.offsetParent!=null&&(getComputedStyle(o.offsetParent).position==="absolute"||getComputedStyle(o.offsetParent).position==="relative")){var n=mt(o.offsetParent,"left","top",!1,t);i=n.left,r=n.top}var s=1,a=1,l=Ga(o);if(l){var h=getComputedStyle(l).transform;if(h!=="none"){var p=new DOMMatrix(h);s=p.a,a=p.d}var c=getComputedStyle(l).zoom;if(c!=="none"){var d=Ws(document.body);s=d*s,a=d*a}}o.style.top=e.position.top/a+e.offsetY-r/a+"px",o.style.left=e.position.left/s+e.offsetX-i/s+"px"}function Ws(o){var e=getComputedStyle(o).zoom;return parseFloat(e)||1}function Ga(o){for(;o;){var e=window.getComputedStyle(o).transform,t=Ws(document.body);if(e&&e!=="none"||t&&t!==1)return o;if(o===document.body)return null;o=o.offsetParent||o.parentElement}return null}function dh(o,e,t,i,r){t.position=mt(o,t.posX,t.posY,i,r),e.TL=mt(o,"left","top",i,r),e.TR=mt(o,"right","top",i,r),e.BR=mt(o,"left","bottom",i,r),e.BL=mt(o,"right","bottom",i,r)}function _s(o,e,t){o.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},o.TR={top:o.TL.top,left:o.TL.left+t.width},o.BL={top:o.TL.top+t.height,left:o.TL.left},o.BR={top:o.TL.top+t.height,left:o.TL.left+t.width}}function Wa(o,e){var t=!1,i=!1;return o-hn()<js()&&(t=!0),e>Ks()&&(i=!0),{leftSide:t,rightSide:i}}function _a(o,e,t,i,r,n){var s=Wa(e.TL.left,e.TR.left);t.TL.left-hn()<=js()&&(s.leftSide=!1),t.TR.left>Ks()&&(s.rightSide=!1),(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&(i.posX==="right"?i.posX="left":i.posX="right",i.offsetX=i.offsetX+r.width,i.offsetX=-1*i.offsetX,i.position=mt(o,i.posX,i.posY,!1),_s(e,i,r),n&&_a(o,e,t,i,r,!1))}function Ua(o,e,t,i,r,n){var s=ja(e.TL.top,e.BL.top);t.TL.top-ln()<=Us()&&(s.topSide=!1),t.BL.top>=Qs()&&o.getBoundingClientRect().bottom<window.innerHeight&&(s.bottomSide=!1),(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&(i.posY==="top"?i.posY="bottom":i.posY="top",i.offsetY=i.offsetY+r.height,i.offsetY=-1*i.offsetY,i.position=mt(o,i.posX,i.posY,!1,r),_s(e,i,r),n&&Ua(o,e,t,i,r,!1))}function ja(o,e){var t=!1,i=!1;return o-ln()<Us()&&(t=!0),e>Qs()&&(i=!0),{topSide:t,bottomSide:i}}function Ka(){return Ct.getBoundingClientRect().width}function Qa(){return Ct.getBoundingClientRect().height}function Ya(){return Ct.getBoundingClientRect().left}function Xa(){return Ct.getBoundingClientRect().top}function Us(){return Ct?Xa():0}function js(){return Ct?Ya():0}function Ks(){return Ct?hn()+Ya()+Ka():hn()+$a()}function Qs(){return Ct?ln()+Xa()+Qa():ln()+Ja()}function ln(){return Li.documentElement.scrollTop||Li.body.scrollTop}function hn(){return Li.documentElement.scrollLeft||Li.body.scrollLeft}function Ja(){return window.innerHeight}function $a(){var o=window.innerWidth,e=document.documentElement.getBoundingClientRect(),t=u(document.documentElement)?0:e.width;return o-(o-t)}function Za(){Ct=null,Li=null}var el=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ue=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},tl=function(o){el(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return Ue([C("left")],e.prototype,"X",void 0),Ue([C("top")],e.prototype,"Y",void 0),e}(_e),Ze={ROOT:"e-popup",RTL:"e-rtl",OPEN:"e-popup-open",CLOSE:"e-popup-close"},Ys=function(o){el(e,o);function e(t,i){return o.call(this,i,t)||this}return e.prototype.onPropertyChanged=function(t,i){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"width":nt(this.element,{width:ke(t.width)});break;case"height":nt(this.element,{height:ke(t.height)});break;case"zIndex":nt(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":{var a=t.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break}case"offsetY":{var l=t.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break}case"content":this.setContent();break;case"actionOnScroll":t.actionOnScroll!=="none"?this.wireScrollEvents():this.unwireScrollEvents();break}}},e.prototype.getModuleName=function(){return"popup"},e.prototype.resolveCollision=function(){this.checkCollision()},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(Ze.ROOT,Ze.RTL,Ze.OPEN,Ze.CLOSE),this.content=null,this.relateTo=null,Za(),o.prototype.destroy.call(this)},e.prototype.render=function(){this.element.classList.add(Ze.ROOT);var t={};this.zIndex!==1e3&&(t.zIndex=this.zIndex),this.width!=="auto"&&(t.width=ke(this.width)),this.height!=="auto"&&(t.height=ke(this.height)),nt(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},e.prototype.wireEvents=function(){K.isDevice&&x.add(window,"orientationchange",this.orientationOnChange,this),this.actionOnScroll!=="none"&&this.wireScrollEvents()},e.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,i=this.getScrollableParent(this.getRelateToElement());t<i.length;t++){var r=i[t];x.add(r,"scroll",this.scrollRefresh,this)}},e.prototype.unwireEvents=function(){K.isDevice&&x.remove(window,"orientationchange",this.orientationOnChange),this.actionOnScroll!=="none"&&this.unwireScrollEvents()},e.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,i=this.getScrollableParent(this.getRelateToElement());t<i.length;t++){var r=i[t];x.remove(r,"scroll",this.scrollRefresh)}},e.prototype.getRelateToElement=function(){var t=this.relateTo===""||u(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),typeof this.relateTo=="string"?document.querySelector(this.relateTo):this.relateTo},e.prototype.scrollRefresh=function(t){if(this.actionOnScroll==="reposition"?!u(this.element)&&!(this.element.offsetParent===t.target||this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&t.target.parentElement==null)&&this.refreshPosition():this.actionOnScroll==="hide"&&this.hide(),this.actionOnScroll!=="none"&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),t.target);!i&&!this.targetInvisibleStatus?(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0):i&&(this.targetInvisibleStatus=!1)}},e.prototype.isElementOnViewport=function(t,i){for(var r=this.getScrollableParent(t),n=0;n<r.length;n++)if(!this.isElementVisible(t,r[n]))return!1;return!0},e.prototype.isElementVisible=function(t,i){var r=this.checkGetBoundingClientRect(t);if(!r.height||!r.width)return!1;if(u(this.checkGetBoundingClientRect(i))){var s=window,a={top:s.scrollY,left:s.scrollX,right:s.scrollX+s.outerWidth,bottom:s.scrollY+s.outerHeight},l=mt(t),h={top:l.top,left:l.left,right:l.left+r.width,bottom:l.top+r.height},p={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return p.top>0&&p.left>0&&p.right>0&&p.bottom>0}else{var n=i.getBoundingClientRect();return!(r.bottom<n.top)&&!(r.bottom>n.bottom)&&!(r.right>n.right)&&!(r.left<n.left)}},e.prototype.preRender=function(){},e.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(Ze.RTL):this.element.classList.remove(Ze.RTL)},e.prototype.setContent=function(){if(!u(this.content))if(this.element.innerHTML="",typeof this.content=="string")this.element.textContent=this.content;else{var t=this.getRelateToElement(),i=this.content.props;(!t.classList.contains("e-dropdown-btn")||u(i))&&this.element.appendChild(this.content)}},e.prototype.orientationOnChange=function(){var t=this;setTimeout(function(){t.refreshPosition()},200)},e.prototype.refreshPosition=function(t,i){u(t)||this.checkFixedParent(t),this.reposition(),i||this.checkCollision()},e.prototype.reposition=function(){var t,i,r=this.getRelateToElement();if(typeof this.position.X=="number"&&typeof this.position.Y=="number")t={left:this.position.X,top:this.position.Y};else if(typeof this.position.X=="string"&&typeof this.position.Y=="number"||typeof this.position.X=="number"&&typeof this.position.Y=="string"){var n=void 0,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY),typeof this.position.X=="string"?t={left:i.left,top:this.position.Y}:t={left:this.position.X,top:i.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(r){var a=this.element.clientHeight,s=this.element.style.display;this.element.style.display="block",t=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY,a),this.element.style.display=s}else t={left:0,top:0};u(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")},e.prototype.checkGetBoundingClientRect=function(t){var i;try{return i=t.getBoundingClientRect(),i}catch{return null}},e.prototype.getAnchorPosition=function(t,i,r,n,s,a){a===void 0&&(a=0);var l=this.checkGetBoundingClientRect(i),h=this.checkGetBoundingClientRect(t);if(u(l)||u(h))return null;var p=t,c={left:0,top:0};switch(i.offsetParent&&i.offsetParent.tagName==="BODY"&&t.tagName==="BODY"?c=mt(t):(i.classList.contains("e-dlg-modal")&&p.tagName!=="BODY"&&(i=i.parentElement),c=Vs(p,i)),r.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container"?c.left+=window.innerWidth/2-l.width/2:this.targetType==="container"?c.left+=h.width/2-l.width/2:c.left+=h.width/2;break;case"right":if(i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container")c.left+=window.innerWidth-l.width;else if(this.targetType==="container"){var d=1,f=Ga(i);if(f){var g=getComputedStyle(f).transform;if(g!=="none"){var m=new DOMMatrix(g);d=m.a}var v=getComputedStyle(f).zoom;if(v!=="none"){var y=Ws(document.body);d=y*d}}c.left+=(h.width-l.width)/d}else c.left+=h.width;break}switch(r.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container"?c.top+=window.innerHeight/2-l.height/2:this.targetType==="container"?c.top+=h.height/2-l.height/2:c.top+=h.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&p.tagName==="BODY"&&this.targetType==="container"?c.top+=window.innerHeight-l.height:this.targetType==="container"&&!i.classList.contains("e-dialog")?c.top+=h.height-l.height:this.targetType==="container"&&i.classList.contains("e-dialog")?c.top+=h.height-a:c.top+=h.height;break}return c.left+=n,c.top+=s,c},e.prototype.callFlip=function(t){var i=this.getRelateToElement();ph(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)},e.prototype.callFit=function(t){if(Gs(this.element,this.viewPortElement).length!==0)if(u(this.viewPortElement)){var i=Va(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=i.left+"px"),t.Y&&(this.element.style.top=i.top+"px")}else{var r=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(u(r)||u(n))return null;t&&t.Y===!0&&(n.top>r.top?this.element.style.top="0px":n.bottom<r.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(r.bottom-n.bottom)+"px")),t&&t.X===!0&&(n.right<r.right?this.element.style.left=parseInt(this.element.style.left,10)-(r.right-n.right)+"px":n.left>r.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-r.left)+"px"))}},e.prototype.checkCollision=function(){var t=this.collision.X,i=this.collision.Y;t==="none"&&i==="none"||(t==="flip"&&i==="flip"?this.callFlip({X:!0,Y:!0}):t==="fit"&&i==="fit"?this.callFit({X:!0,Y:!0}):(t==="flip"?this.callFlip({X:!0,Y:!1}):i==="flip"&&this.callFlip({Y:!0,X:!1}),t==="fit"?this.callFit({X:!0,Y:!1}):i==="fit"&&this.callFit({X:!1,Y:!0})))},e.prototype.show=function(t,i){var r=this;if(this.wireEvents(),this.zIndex===1e3||!u(i)){var n=u(i)?this.element:i;this.zIndex=il(n),nt(this.element,{zIndex:this.zIndex})}t=!u(t)&&typeof t=="object"?t:this.showAnimation,(this.collision.X!=="none"||this.collision.Y!=="none")&&(G([this.element],Ze.CLOSE),B([this.element],Ze.OPEN),this.checkCollision(),G([this.element],Ze.OPEN),B([this.element],Ze.CLOSE)),u(t)?(G([this.element],Ze.CLOSE),B([this.element],Ze.OPEN),this.trigger("open")):(t.begin=function(){r.isDestroyed||(G([r.element],Ze.CLOSE),B([r.element],Ze.OPEN))},t.end=function(){r.isDestroyed||r.trigger("open")},new xi(t).animate(this.element))},e.prototype.hide=function(t){var i=this;t=!u(t)&&typeof t=="object"?t:this.hideAnimation,u(t)?(G([this.element],Ze.OPEN),B([this.element],Ze.CLOSE),this.trigger("close")):(t.end=function(){i.isDestroyed||(G([i.element],Ze.OPEN),B([i.element],Ze.CLOSE),i.trigger("close"))},new xi(t).animate(this.element)),this.unwireEvents()},e.prototype.getScrollableParent=function(t){return this.checkFixedParent(t),fh(t,this.fixedParent)},e.prototype.checkFixedParent=function(t){for(var i=t.parentElement;i&&i.tagName!=="HTML";){var r=getComputedStyle(i);(r.position==="fixed"||r.position==="sticky")&&!u(this.element)&&this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&getComputedStyle(this.element.offsetParent).overflow!=="hidden"&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?ke(window.scrollY-parseInt(this.element.style.top,10)):ke(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!u(this.element)&&u(this.element.offsetParent)&&r.position==="fixed"&&this.element.style.position==="fixed"&&(this.fixedParent=!0)}},Ue([C("auto")],e.prototype,"height",void 0),Ue([C("auto")],e.prototype,"width",void 0),Ue([C(null)],e.prototype,"content",void 0),Ue([C("container")],e.prototype,"targetType",void 0),Ue([C(null)],e.prototype,"viewPortElement",void 0),Ue([C({X:"none",Y:"none"})],e.prototype,"collision",void 0),Ue([C("")],e.prototype,"relateTo",void 0),Ue([rt({},tl)],e.prototype,"position",void 0),Ue([C(0)],e.prototype,"offsetX",void 0),Ue([C(0)],e.prototype,"offsetY",void 0),Ue([C(1e3)],e.prototype,"zIndex",void 0),Ue([C(!1)],e.prototype,"enableRtl",void 0),Ue([C("reposition")],e.prototype,"actionOnScroll",void 0),Ue([C(null)],e.prototype,"showAnimation",void 0),Ue([C(null)],e.prototype,"hideAnimation",void 0),Ue([O()],e.prototype,"open",void 0),Ue([O()],e.prototype,"close",void 0),Ue([O()],e.prototype,"targetExitViewport",void 0),e=Ue([ki],e),e}(gi);function fh(o,e){for(var t=getComputedStyle(o),i=[],r=/(auto|scroll)/,n=o.parentElement;n&&n.tagName!=="HTML";){var s=getComputedStyle(n);!(t.position==="absolute"&&s.position==="static")&&r.test(s.overflow+s.overflowY+s.overflowX)&&i.push(n),n=n.parentElement}return e||i.push(document),i}function il(o){for(var e=o.parentElement,t=[];e&&e.tagName!=="BODY";){var i=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");i!=="auto"&&r!=="static"&&t.push(i),e=e.parentElement}for(var n=[],s=0;s<document.body.children.length;s++)if(!o.isEqualNode(document.body.children[s])){var i=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("position");i!=="auto"&&r!=="static"&&n.push(i)}n.push("999");var a=[];if(!u(o.parentElement)&&o.parentElement.tagName!=="BODY"){for(var l=[].slice.call(o.parentElement.children),s=0;s<l.length;s++)if(!o.isEqualNode(l[s])){var i=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("position");i!=="auto"&&r!=="static"&&a.push(i)}}var h=t.concat(n,a),p=Math.max.apply(Math,h)+1;return p>2147483647?2147483647:p}var Mn=["north-west","north","north-east","west","east","south-west","south","south-east"],xr="e-resize-handle",Ai="e-focused-handle",gh="e-dlg-resizable",fo=["e-restrict-left"],rl="e-resize-viewport",mh=["north","west","east","south"],De,Gt,Xs=0,Js=0,nl=0,sl=0,mr=0,vr=0,Qi,pi,$s,ci,Ie,Zi=null,un=null,pn=null,hi,cn=!0,go=0,Pn=!0;function vh(o){Zi=o.resizeBegin,un=o.resizing,pn=o.resizeComplete,De=mo(o.element),Ie=mo(o.boundary);for(var e=o.direction.split(" "),t=0;t<e.length;t++)if(mh.indexOf(e[t])>=0&&e[t])yh(e[t]);else if(e[t].trim()!==""){var i=pe("div",{className:"e-icons "+xr+" e-"+e[t]});De.appendChild(i)}Qi=o.minHeight,$s=o.minWidth,ci=o.maxWidth,pi=o.maxHeight,o.proxy&&o.proxy.element&&o.proxy.element.classList.contains("e-dialog")?vo(o.proxy):vo()}function yh(o){Zs();var e=pe("span",{attrs:{unselectable:"on",contenteditable:"false"}});e.setAttribute("class","e-dialog-border-resize e-"+o),o==="south"&&(e.style.height="2px",e.style.width="100%",e.style.bottom="0px",e.style.left="0px"),o==="north"&&(e.style.height="2px",e.style.width="100%",e.style.top="0px",e.style.left="0px"),o==="east"&&(e.style.height="100%",e.style.width="2px",e.style.right="0px",e.style.top="0px"),o==="west"&&(e.style.height="100%",e.style.width="2px",e.style.left="0px",e.style.top="0px"),De.appendChild(e)}function mo(o){var e;return u(o)||(typeof o=="string"?e=document.querySelector(o):e=o),e}function vo(o){for(var e=o||this,t=De.querySelectorAll("."+xr),i=0;i<t.length;i++){Gt=t[i],x.add(Gt,"mousedown",yo,e);var r=K.info.name==="msie"?"pointerdown":"touchstart";x.add(Gt,r,So,e)}var n=De.querySelectorAll(".e-dialog-border-resize");if(!u(n))for(var i=0;i<n.length;i++){Gt=n[i],x.add(Gt,"mousedown",yo,e);var r=K.info.name==="msie"?"pointerdown":"touchstart";x.add(Gt,r,So,e)}}function ol(o){return o.indexOf("mouse")>-1?"mouse":"touch"}function yo(o){if(o.preventDefault(),De=o.target.parentElement,Zs(),mr=o.pageX,vr=o.pageY,o.target.classList.add(Ai),!u(Zi)){var e=this;if(Zi(o,e)===!0)return}this.targetEle&&De&&De.querySelector("."+gh)&&(Ie=this.target==="body"?null:this.targetEle,ci=this.targetEle.clientWidth,pi=this.targetEle.clientHeight);var t=u(Ie)?document:Ie;x.add(t,"mousemove",cr,this),x.add(document,"mouseup",dn,this);for(var i=0;i<fo.length;i++)De.classList.contains(fo[i])?cn=!1:cn=!0}function dn(o){var e=K.info.name==="msie"?"pointermove":"touchmove",t=K.info.name==="msie"?"pointerup":"touchend",i=u(Ie)?document:Ie,r=K.info.name==="msie"?"pointerdown":"touchstart";if(x.remove(i,"mousemove",cr),x.remove(i,e,cr),x.remove(i,r,cr),u(document.body.querySelector("."+Ai))||document.body.querySelector("."+Ai).classList.remove(Ai),!u(pn)){var n=this;pn(o,n)}x.remove(document,"mouseup",dn),x.remove(document,t,dn)}function Zs(){Xs=parseFloat(getComputedStyle(De,null).getPropertyValue("width").replace("px","")),Js=parseFloat(getComputedStyle(De,null).getPropertyValue("height").replace("px","")),nl=De.getBoundingClientRect().left,sl=De.getBoundingClientRect().top}function So(o){De=o.target.parentElement,Zs();var e=De.classList.contains("e-dialog");(o.target.classList.contains(xr)||o.target.classList.contains("e-dialog-border-resize"))&&e&&o.target.classList.add(Ai);var t=o.touches?o.changedTouches[0]:o;if(mr=t.pageX,vr=t.pageY,!u(Zi)){var i=this;if(Zi(o,i)===!0)return}var r=K.info.name==="msie"?"pointermove":"touchmove",n=K.info.name==="msie"?"pointerup":"touchend",s=u(Ie)?document:Ie;x.add(s,r,cr,this),x.add(document,n,dn,this)}function cr(o){if(o.target.classList.contains(xr)&&o.target.classList.contains(Ai)?Gt=o.target:u(document.body.querySelector("."+Ai))||(Gt=document.body.querySelector("."+Ai)),!u(Gt)){for(var e="",t=0;t<Mn.length;t++)Gt.classList.contains("e-"+Mn[t])&&(e=Mn[t]);if(!u(un)){var i=this;un(o,i)}switch(e){case"south":On(o);break;case"north":Bn(o);break;case"west":zn(o);break;case"east":Nn(o);break;case"south-east":On(o),Nn(o);break;case"south-west":On(o),zn(o);break;case"north-east":Bn(o),Nn(o);break;case"north-west":Bn(o),zn(o);break}}}function Fi(o){return o.getBoundingClientRect()}function On(o){var e=document.documentElement.clientHeight,t=!1,i=o.touches?o.changedTouches[0]:o,r=i.pageY,n=Fi(De),s;u(Ie)||(s=Fi(Ie)),u(Ie)?u(Ie)&&(e-r>=0||n.top<0)&&(t=!0):t=!0;var a=Js+(r-vr);a=a>Qi?a:Qi;var l=0;u(Ie)||(l=s.top);var h=u(Ie)?0:Ie.offsetHeight-Ie.clientHeight,p=n.top-l-h/2;if(p=p<0?0:p,n.top>0&&p+a>pi){if(t=!1,De.classList.contains(rl))return;De.style.height=pi-parseInt(p.toString(),10)+"px";return}var c=0;if(t){n.top<0&&e+(n.height+n.top)>0&&(c=n.top,a+c<=30&&(a=n.height-(n.height+n.top)+30)),a+n.top>=pi&&(De.style.height=n.height+(e-(n.height+n.top))+"px");var d=u(Ie)?c:p;a>=Qi&&a+d<=pi&&(De.style.height=a+"px")}}function Bn(o){var e=!1,t,i=ol(o.type)==="mouse"?o.pageY:o.touches[0].pageY,r=Fi(De),n=u(Ie)?0:Ie.offsetHeight-Ie.clientHeight;u(Ie)||(t=Fi(Ie)),(!u(Ie)&&r.top-t.top>0||u(Ie)&&i>0||!u(Ie)&&Math.floor(r.top-t.top+r.height+(t.bottom-r.bottom))-n<=pi)&&(e=!0);var s=Js-(i-vr);if(e&&s>=Qi&&s<=pi){var a=0;u(Ie)||(a=t.top);var l=sl-a+(i-vr);l=l>0?l:1,De.style.height=s+"px",De.style.top=l+"px"}}function zn(o){var e=document.documentElement.clientWidth,t=!1,i;u(Ie)||(i=Fi(Ie));var r=ol(o.type)==="mouse"?o.pageX:o.touches[0].pageX,n=Fi(De),s=u(Ie)?0:Ie.offsetWidth-Ie.clientWidth,a=u(Ie)?0:i.left,l=u(Ie)?0:i.width;u(hi)&&(u(Ie)?hi=e:(hi=n.left-a-s/2+n.width,hi=hi+(l-s-hi))),(!u(Ie)&&Math.floor(n.left-i.left+n.width+(i.right-n.right))-s<=ci||u(Ie)&&r>=0)&&(t=!0);var h=Xs-(r-mr);if(cn&&(h=h>hi?hi:h),t&&h>=$s&&h<=ci){var p=0;u(Ie)||(p=i.left);var c=nl-p+(r-mr);c=c>0?c:1,h!==go&&Pn&&(De.style.width=h+"px"),cn&&(De.style.left=c+"px",c===1?Pn=!1:Pn=!0)}go=h}function Nn(o){var e=document.documentElement.clientWidth,t=!1,i;u(Ie)||(i=Fi(Ie));var r=o.touches?o.changedTouches[0]:o,n=r.pageX,s=Fi(De);(!u(Ie)&&(s.left-i.left+s.width<=ci||s.right-i.left>=s.width)||u(Ie)&&e-n>0)&&(t=!0);var a=Xs+(n-mr),l=0;if(u(Ie)||(l=i.left),s.left-l+a>ci){if(t=!1,De.classList.contains(rl))return;De.style.width=ci-(s.left-l)+"px"}t&&a>=$s&&a<=ci&&(De.style.width=a+"px")}function Sh(o){Qi=o}function Ch(o){ci=o}function bh(o){pi=o}function Co(){for(var o=De.querySelectorAll("."+xr),e=0;e<o.length;e++)Ve(o[e]);var t=De.querySelectorAll(".e-dialog-border-resize");if(!u(t))for(var e=0;e<t.length;e++)Ve(t[e])}function wh(){De=null,Gt=null,Ie=null,hi=null,Zi=null,un=null,pn=null}var eo=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),we=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Ih=function(o){eo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return we([C(!0)],e.prototype,"isFlat",void 0),we([C()],e.prototype,"buttonModel",void 0),we([C("Button")],e.prototype,"type",void 0),we([O()],e.prototype,"click",void 0),e}(_e),xh=function(o){eo(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return we([C("Fade")],e.prototype,"effect",void 0),we([C(400)],e.prototype,"duration",void 0),we([C(0)],e.prototype,"delay",void 0),e}(_e),Pr="e-dialog",Hn="e-rtl",qn="e-dlg-header-content",bo="e-dlg-header",Or="e-footer-content",Br="e-dlg-modal",Rh="e-dlg-content",wo="e-icon-dlg-close",Eh="e-dlg-overlay",Ht="e-dlg-target",Ah="e-dlg-container",Mt="e-scroll-disabled",Th="e-primary",Lh="e-icons",Fh="e-popup",Io="e-device",zr="e-dlg-fullscreen",xo="e-dlg-closeicon-btn",kh="e-popup-close",Ro="e-popup-open",Eo="Information",Ao="e-scroll-disabled",al="e-alert-dialog",ll="e-confirm-dialog",Vn="e-dlg-resizable",Wi="e-restrict-left",To="e-resize-viewport",Dh="e-dlg-ref-element",Gn="user action",Mh="close icon",Ph="escape",Oh="overlayClick",Bh="e-draggable",to=function(o){eo(e,o);function e(t,i){var r=o.call(this,t,i)||this;return r.needsID=!0,r}return e.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),this.width==="100%"&&(this.element.style.width=""),this.minHeight!==""&&(this.element.style.minHeight=ke(this.minHeight)),this.enableResize&&(this.setResize(),this.isModal&&(this.isModelResize=!0),this.animationSettings.effect==="None"&&this.getMinHeight()),this.renderComplete()},e.prototype.initializeValue=function(){this.dlgClosedBy=Gn},e.prototype.preRender=function(){var t=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(n){t.dlgClosedBy=Mh,t.hide(n)},this.dlgOverlayClickEventHandler=function(n){t.dlgClosedBy=Oh,n.preventFocus=!1,t.trigger("overlayClick",n,function(s){s.preventFocus||t.focusContent(),t.dlgClosedBy=Gn})};var i={close:"Close"};if(this.l10n=new $i("dialog",i,this.locale),this.checkPositionData(),u(this.target)){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=r}},e.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},e.prototype.isNumberValue=function(t){var i=/^[-+]?\d*\.?\d+$/.test(t);return i},e.prototype.checkPositionData=function(){if(!u(this.position)){if(!u(this.position.X)&&typeof this.position.X!="number"){var t=this.isNumberValue(this.position.X);if(t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}}if(!u(this.position.Y)&&typeof this.position.Y!="number"){var t=this.isNumberValue(this.position.Y);if(t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i}}}},e.prototype.getEle=function(t,i){for(var r=void 0,n=0;n<t.length;n++)if(t[n].classList.contains(i)){r=t[n];break}return r},e.prototype.getMinHeight=function(){var t="0px",i="0px";u(this.element.querySelector("."+qn))||(t=getComputedStyle(this.headerContent).height);var r=this.getEle(this.element.children,Or);u(r)||(i=getComputedStyle(r).height);var n=parseInt(t.slice(0,t.indexOf("p")),10),s=parseInt(i.slice(0,i.indexOf("p")),10);return Sh(n+30+(isNaN(s)?0:s)),n+30+s},e.prototype.onResizeStart=function(t,i){if(i.trigger("resizeStart",t),!t.cancel&&this.isModelResize&&!u(this.dlgContainer)&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)){this.setPopupPosition(),this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y);var r=this.getTargetContainer(this.target);if(r instanceof Element){var n=window.getComputedStyle(r);n.getPropertyValue("direction")==="rtl"?this.element.style.position="absolute":this.element.style.position="relative"}else this.element.style.position="relative";this.element.classList.contains(Wi)&&this.element.classList.remove(Wi),this.isModelResize=!1}return t.cancel},e.prototype.onResizing=function(t,i){i.trigger("resizing",t)},e.prototype.onResizeComplete=function(t,i){i.trigger("resizeStop",t),this.updatePersistData()},e.prototype.setResize=function(){if(this.enableResize){this.element.classList.add(Vn);for(var t=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,r="",n=0;n<this.resizeHandles.length;n++)if(this.resizeHandles[n]==="All"){r="south north east west north-east north-west south-east south-west";break}else{var s="";switch(this.resizeHandles[n].toString()){case"SouthEast":s="south-east";break;case"SouthWest":s="south-west";break;case"NorthEast":s="north-east";break;case"NorthWest":s="north-west";break;default:s=this.resizeHandles[n].toString();break}r+=s.toLocaleLowerCase()+" "}this.enableRtl&&r.trim()==="south-east"?r="south-west":this.enableRtl&&r.trim()==="south-west"&&(r="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Wi):this.isModal&&this.target===document.body&&this.element.classList.add(To),vh({element:this.element,direction:r,minHeight:parseInt(t.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else Co(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(Wi):this.element.classList.remove(To),this.element.classList.remove(Vn)},e.prototype.getFocusElement=function(t){var i='input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]',r=t.querySelectorAll(i);return{element:r[r.length-1]}},e.prototype.keyDown=function(t){var i=this;if(t.keyCode===9&&this.isModal){var r=void 0;u(this.btnObj)||(r=this.btnObj[this.btnObj.length-1]),u(this.btnObj)&&!u(this.ftrTemplateContent)&&(r=this.getFocusElement(this.ftrTemplateContent)),u(this.btnObj)&&u(this.ftrTemplateContent)&&!u(this.contentEle)&&(r=this.getFocusElement(this.contentEle)),!u(r)&&document.activeElement===r.element&&!t.shiftKey&&(t.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&t.shiftKey&&(t.preventDefault(),u(r)||r.element.focus())}var n=document.activeElement,s=["input","textarea"].indexOf(n.tagName.toLowerCase())>-1,a=!1;if(s||(a=n.hasAttribute("contenteditable")&&n.getAttribute("contenteditable")==="true"),t.keyCode===27&&this.closeOnEscape){this.dlgClosedBy=Ph;var l=document.querySelector(".e-popup-open:not(.e-dialog)");!u(l)&&!l.classList.contains("e-toolbar-pop")&&!l.classList.contains("e-slider-tooltip")||this.hide(t)}if(t.keyCode===13&&!t.ctrlKey&&n.tagName.toLowerCase()!=="textarea"&&s&&!u(this.primaryButtonEle)||t.keyCode===13&&t.ctrlKey&&(n.tagName.toLowerCase()==="textarea"||a)&&!u(this.primaryButtonEle)){var h,p=this.buttons.some(function(c,d){h=d;var f=c.buttonModel;return!u(f)&&f.isPrimary===!0});p&&typeof this.buttons[h].click=="function"&&!this.primaryButtonEle.disabled&&setTimeout(function(){i.buttons[h].click.call(i,t)})}},e.prototype.initialize=function(){u(this.target)||(this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target),this.isBlazorServerRender()||B([this.element],Pr),K.isDevice&&B([this.element],Io),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},e.prototype.initRender=function(){var t=this;if(this.initialRender=!0,this.isBlazorServerRender()||de(this.element,{role:"dialog"}),this.zIndex===1e3?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.setTargetContent(),this.header!==""&&!u(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),this.footerTemplate!==""&&!u(this.footerTemplate)?this.setFooterTemplate():!u(this.buttons[0])&&!u(this.buttons[0].buttonModel)&&this.setButton(),this.allowDragging&&!u(this.headerContent)&&this.setAllowDragging(),de(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal(),this.element.classList.contains(al)!==!0&&this.element.classList.contains(ll)!==!0&&!u(this.element.parentElement)){var i=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:Dh}),i.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}if(u(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new Ys(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(s){var a={container:t.isModal?t.dlgContainer:t.element,element:t.element,target:t.target,preventFocus:!1};t.enableResize&&t.resetResizeIcon(),t.trigger("open",a,function(l){l.preventFocus||t.focusContent()})},close:function(s){t.isModal&&B([t.dlgOverlay],"e-fade"),t.unBindEvent(t.element),t.isModal&&(t.dlgContainer.style.display="none"),t.trigger("close",t.closeArgs);var a=document.activeElement;!u(a)&&!u(a.blur)&&a.blur(),!u(t.storeActiveElement)&&!u(t.storeActiveElement.focus)&&t.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(B([this.element],kh),this.isModal&&this.setOverlayZindex()),this.visible){if(this.show(),this.isModal){var r=this.getTargetContainer(this.target);if(r instanceof Element){var n=window.getComputedStyle(r);n.getPropertyValue("direction")==="rtl"&&this.setPopupPosition()}}}else this.isModal&&(this.dlgOverlay.style.display="none");this.initialRender=!1},e.prototype.getTargetContainer=function(t){var i=null;if(typeof t=="string")if(t.startsWith("#"))i=document.getElementById(t.substring(1));else if(t.startsWith(".")){var r=document.getElementsByClassName(t.substring(1));i=r.length>0?r[0]:null}else!(t instanceof HTMLElement)&&t!==document.body&&(i=document.querySelector(t));else t instanceof HTMLElement&&(i=t);return i},e.prototype.resetResizeIcon=function(){var t=this.getMinHeight();if(this.targetEle.offsetHeight<t){var i=this.enableRtl?"e-south-west":"e-south-east",r=this.element.querySelector("."+i);u(r)||(r.style.bottom="-"+t.toString()+"px")}},e.prototype.setOverlayZindex=function(t){var i;u(t)?i=parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:i=t,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},e.prototype.positionChange=function(){this.isModal?!isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},e.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},e.prototype.setAllowDragging=function(){var t=this,i="."+qn;this.element.classList.contains(Bh)||(this.dragObj=new Pa(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:i,dragStart:function(r){t.trigger("dragStart",r,function(n){})},dragStop:function(r){if(t.isModal){t.IsDragStop=!0,u(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y);var n=t.getTargetContainer(t.target);if(n instanceof Element){var s=window.getComputedStyle(n);s.getPropertyValue("direction")==="rtl"?t.element.style.position="absolute":t.element.style.position="relative"}else t.element.style.position="relative"}t.trigger("dragStop",r),t.isModelResize=!1,t.element.classList.remove(Wi),t.updatePersistData()},drag:function(r){t.trigger("drag",r)}}),u(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},e.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var t=0;t<this.buttons.length;t++)if(!u(this.buttons[t].buttonModel)){var i=u(this.buttons[t].type)?"button":this.buttons[t].type.toLowerCase(),r=this.createElement("button",{className:this.cssClass,attrs:{type:i,tabindex:"0"}});this.buttonContent.push(r.outerHTML)}this.setFooterTemplate()}for(var n,t=0,s=this.element.children;t<s.length;t++)s[t].classList.contains(Or)&&(n=s[t].querySelectorAll("button"));for(var t=0;t<this.buttons.length;t++)u(this.buttons[t].buttonModel)||(this.isBlazorServerRender()||(this.btnObj[t]=new Hi(this.buttons[t].buttonModel)),!u(this.ftrTemplateContent)&&n.length>0&&(typeof this.buttons[t].click=="function"&&x.add(n[t],"click",this.buttons[t].click,this),typeof this.buttons[t].click=="object"&&x.add(n[t],"click",this.buttonClickHandler.bind(this,t),this)),!this.isBlazorServerRender()&&!u(this.ftrTemplateContent)&&(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]))},e.prototype.buttonClickHandler=function(t){this.trigger("buttons["+t+"].click",{})},e.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:Rh,id:this.element.id+"_dialog-content"}),this.headerEle?de(this.element,{"aria-describedby":this.element.id+"_title "+this.element.id+"_dialog-content"}):de(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!u(this.content)&&this.content!==""||!this.initialRender)&&(typeof this.content=="string"?this.setTemplate(this.content,this.contentEle,"content"):this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),u(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),this.height==="auto"&&(!this.isBlazorServerRender()&&K.isIE&&this.element.style.width===""&&!u(this.width)&&(this.element.style.width=ke(this.width)),this.setMaxHeight())},e.prototype.setTemplate=function(t,i,r){var n,s;i.classList.contains(bo)?s=this.element.id+"header":i.classList.contains(Or)?s=this.element.id+"footerTemplate":s=this.element.id+"content",u(t.outerHTML)?(typeof t=="string"||typeof t!="string"||uo())&&(typeof t=="string"&&(t=this.sanitizeHelper(t)),this.isVue||typeof t!="string"?n=Be(t):i.innerHTML=t):i.appendChild(t);var a=[];if(!u(n)){for(var l=!0,h=0,p=n({},this,r,s,l);h<p.length;h++){var c=p[h];a.push(c)}Te([].slice.call(a),i)}},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var i=Xt.beforeSanitize(),r={cancel:!1,helper:null};Q(i,i,r),this.trigger("beforeSanitizeHtml",i),i.cancel&&!u(i.helper)?t=i.helper(t):i.cancel||(t=Xt.serializeValue(i,t))}return t},e.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!u(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=t,K.isIE&&this.height==="auto"&&!u(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},e.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?B([this.element],Hn):G([this.element],Hn)),u(this.element.querySelector(".e-resize-handle"))||(Co(),this.setResize())},e.prototype.setTargetContent=function(){var t=this;if(u(this.content)||this.content===""){var i=this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"")!=="";(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(r){r.nodeType!==8&&t.innerContentElement.appendChild(r)}))}},e.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:bo}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),de(this.element,{"aria-describedby":this.element.id+"_title"}),de(this.element,{"aria-labelledby":this.element.id+"_dialog-header"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!u(this.headerContent)&&this.setAllowDragging()},e.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:Or}),this.footerTemplate!==""&&!u(this.footerTemplate)?this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"):this.ftrTemplateContent.innerHTML=this.buttonContent.join(""),this.element.appendChild(this.ftrTemplateContent)},e.prototype.createHeaderContent=function(){u(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:qn}))},e.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:xo,attrs:{type:"button"}}),this.closeIconBtnObj=new Hi({cssClass:"e-flat",iconCss:wo+" "+Lh}),this.closeIconTitle(),u(this.headerContent)?(this.createHeaderContent(),Pt([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):Pt([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},e.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",t),this.closeIcon.setAttribute("aria-label",t)},e.prototype.setCSSClass=function(t){t&&(G([this.element],t.split(" ")),this.isModal&&!u(this.dlgContainer)&&G([this.dlgContainer],t.split(" "))),this.cssClass&&(B([this.element],this.cssClass.split(" ")),this.isModal&&!u(this.dlgContainer)&&B([this.dlgContainer],this.cssClass.split(" ")))},e.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:Ah}),this.setCSSClass(),this.element.classList.remove(Ro),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),B([this.element],Br),this.dlgOverlay=this.createElement("div",{className:Eh}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},e.prototype.getValidFocusNode=function(t){for(var i,r=0;r<t.length;r++){if(i=t[r],(i.clientHeight>0||i.tagName.toLowerCase()==="a"&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},e.prototype.focusableElements=function(t){if(!u(t)){var i='input,select,textarea,button,a,[contenteditable="true"],[tabindex]',r=t.querySelectorAll(i);return this.getValidFocusNode(r)}return null},e.prototype.getAutoFocusNode=function(t){var i=t.querySelector("."+xo),r="[autofocus]",n=t.querySelectorAll(r),s=this.getValidFocusNode(n);if(!u(s))i=s;else if(s=this.focusableElements(this.contentEle),u(s)){if(!u(this.primaryButtonEle))return this.element.querySelector("."+Th)}else return i=s;return i},e.prototype.disableElement=function(t,i){var r=t?t.matches||t.webkitMatchesSelector||t.msGetRegionContent:null;if(r){for(;t;t=t.parentNode)if(t instanceof Element&&r.call(t,i))return t}return null},e.prototype.focusContent=function(){var t=this.getAutoFocusNode(this.element),i=u(t)?this.element:t,r=K.userAgent;(r.indexOf("MSIE ")>0||r.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},e.prototype.bindEvent=function(t){x.add(t,"keydown",this.keyDown,this)},e.prototype.unBindEvent=function(t){x.remove(t,"keydown",this.keyDown)},e.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},e.prototype.isBlazorServerRender=function(){return uo()},e.prototype.getModuleName=function(){return"dialog"},e.prototype.onPropertyChanged=function(t,i){if(this.element.classList.contains(Pr))for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"content":!u(this.content)&&this.content!==""?(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),!u(this.contentEle)&&this.contentEle.getAttribute("role")!=="dialog"?(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),typeof this.content=="function"?(this.clearTemplate(["content"]),Ve(this.contentEle),this.contentEle=null,this.setContent()):typeof this.content=="string"?this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()):this.setContent()):u(this.contentEle)||(Ve(this.contentEle),this.contentEle=null);break;case"header":this.header===""||u(this.header)?this.headerEle&&(Ve(this.headerEle),this.headerEle=null):this.setHeader();break;case"footerTemplate":if(this.footerTemplate===""||u(this.footerTemplate)){if(!this.ftrTemplateContent)return;Ve(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(wo).length>0?!this.showCloseIcon&&(this.header===""||u(this.header))?(Ve(this.headerContent),this.headerContent=null):this.showCloseIcon||Ve(this.closeIcon):(this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":nt(this.element,{height:ke(t.height)}),this.updatePersistData();break;case"width":nt(this.element,{width:ke(t.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":{this.unWireButtonEvents(),this.destroyButtons(),u(this.ftrTemplateContent)||(Ve(this.ftrTemplateContent),this.ftrTemplateContent=null),this.footerTemplate="",this.setButton();break}case"allowDragging":this.allowDragging&&!u(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(t.target);break;case"position":if(this.checkPositionData(),this.isModal){var a=this.position.X,l=this.position.Y;u(i.position)||(u(i.position.X)||(a=i.position.X),u(i.position.Y)||(l=i.position.Y)),this.dlgContainer.classList.contains("e-dlg-"+a+"-"+l)&&this.dlgContainer.classList.remove("e-dlg-"+a+"-"+l)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(),this.isModelResize=this.enableResize&&this.isModal,this.enableResize&&this.dialogOpen&&this.resetResizeIcon();break;case"minHeight":this.minHeight!==""&&(this.element.style.minHeight=ke(this.minHeight));break}}},e.prototype.setTarget=function(t){this.popupObj.relateTo=t,this.target=t,this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize(),u(this.targetEle)||(this.isModal&&!u(this.dlgContainer)?this.targetEle.appendChild(this.dlgContainer):u(this.element)||this.targetEle.appendChild(this.element))},e.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)u(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",u(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(G([this.element],Br),G([document.body],[Ht,Mt]),Ve(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&x.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.setzIndex=function(t,i){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=il(t);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=r,i&&(this.popupObj.zIndex=this.zIndex)},e.prototype.windowResizeHandler=function(){Ch(this.targetEle.clientWidth),bh(this.targetEle.clientHeight),this.setMaxHeight()},e.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},e.prototype.removeAllChildren=function(t){for(;t.children[0];)this.removeAllChildren(t.children[0]),t.removeChild(t.children[0])},e.prototype.destroy=function(){if(!this.isDestroyed){var t=[Hn,Br,Vn,Wi,zr,Io],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];G([this.targetEle],[Ht,Mt]),!u(this.element)&&this.element.classList.contains(zr)&&G([document.body],[Ht,Mt]),this.isModal&&G([u(this.targetEle)?document.body:this.targetEle],Mt),this.unWireEvents(),this.unWireButtonEvents(),this.destroyButtons(),u(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),u(this.dragObj)||this.dragObj.destroy(),!u(this.popupObj.element)&&this.popupObj.element.classList.contains(Fh)&&this.popupObj.destroy(),G([this.element],t),!u(this.cssClass)&&this.cssClass!==""&&G([this.element],this.cssClass.split(" ")),!u(this.refElement)&&!u(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Ve(this.refElement),this.refElement=void 0),this.isModal&&(Ve(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Ve(this.dlgContainer)),this.element.innerHTML=this.clonedEle.innerHTML;for(var r=0;r<i.length;r++)this.element.removeAttribute(i[r]);this.ftrTemplateContent=null,this.headerContent=null,!this.isReact&&!this.isVue&&!u(this.contentEle)&&this.removeAllChildren(this.contentEle),this.contentEle=null,wh(),o.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},e.prototype.wireWindowResizeEvent=function(){this.boundWindowResizeHandler=this.windowResizeHandler.bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)},e.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.boundWindowResizeHandler),this.boundWindowResizeHandler=null},e.prototype.wireEvents=function(){this.showCloseIcon&&x.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&x.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.unWireEvents=function(){this.showCloseIcon&&x.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&x.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler)},e.prototype.refreshPosition=function(){this.popupObj.refreshPosition(),this.element.classList.contains(Br)&&this.positionChange()},e.prototype.getDimension=function(){var t=this.element.offsetWidth,i=this.element.offsetHeight;return{width:t,height:i}},e.prototype.show=function(t){var i=this;if(this.element.classList.contains(Pr)){if(!this.element.classList.contains(Ro)||!u(t)){u(t)||this.fullScreen(t);var r={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",r,function(n){if(!n.cancel){if(i.element.style.maxHeight!==r.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=r.maxHeight),i.enableResize&&i.boundWindowResizeHandler==null&&!i.initialRender&&i.wireWindowResizeEvent(),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!u(i.dlgOverlay))if(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",G([i.dlgOverlay],"e-fade"),u(i.targetEle))B([document.body],[Ht,Mt]);else{i.targetEle===document.body?i.dlgContainer.style.position="fixed":i.dlgContainer.style.position="absolute",i.dlgOverlay.style.position="absolute";var s=i.getTargetContainer(i.target);if(s instanceof Element){var a=window.getComputedStyle(s);a.getPropertyValue("direction")==="rtl"?i.element.style.position="absolute":i.element.style.position="relative"}else i.element.style.position="relative";B([i.targetEle],[Ht,Mt])}var l={name:i.animationSettings.effect==="None"&&Ui==="Enable"?"ZoomIn":i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay},h=i.isModal?i.element.parentElement:i.element;if(i.calculatezIndex&&(i.setzIndex(h,!0),nt(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),i.animationSettings.effect==="None"&&Ui==="Enable"?i.popupObj.show(l):i.animationSettings.effect==="None"?i.popupObj.show():i.popupObj.show(l),i.isModal){var s=i.getTargetContainer(i.target);if(s instanceof Element){var a=window.getComputedStyle(s);a.getPropertyValue("direction")==="rtl"&&!i.IsDragStop&&i.setPopupPosition()}}i.dialogOpen=!0;var p=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=p}})}this.isReact&&this.renderReactTemplates()}},e.prototype.hide=function(t){var i=this;if(this.element.classList.contains(Pr)&&this.preventVisibility){var r={cancel:!1,isInteracted:!!t,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:t,closedBy:this.dlgClosedBy};this.closeArgs=r,this.trigger("beforeClose",r,function(n){if(!n.cancel){i.enableResize&&i.unWireWindowResizeEvent();var s={name:i.animationSettings.effect==="None"&&Ui==="Enable"?"ZoomOut":i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.animationSettings.effect==="None"&&Ui==="Enable"||(i.animationSettings.effect==="None"?i.popupObj.hide():i.popupObj.hide(s)),setTimeout(function(){i.isModal&&!u(i.targetEle)&&i.targetEle.classList.contains(Ht)&&i.targetEle.classList.contains(Mt)&&G([i.targetEle],[Ht,Mt]),document.body.classList.contains(Ht)&&document.body.classList.contains(Mt)&&G([document.body],[Ht,Mt])},i.animationSettings.duration+i.animationSettings.delay),i.dialogOpen=!1;var a=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=a}i.dlgClosedBy=Gn})}},e.prototype.fullScreen=function(t){if(this.element.offsetTop,this.element.offsetLeft,t){this.isModal||(this.element.style.top=document.scrollingElement.scrollTop+"px"),B([this.element],zr);var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=u(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=i,B([document.body],[Ht,Mt]),this.allowDragging&&!u(this.dragObj)&&this.dragObj.destroy()}else G([this.element],zr),G([document.body],[Ht,Mt]),this.allowDragging&&!u(this.headerContent)&&this.setAllowDragging();return t},e.prototype.getButtons=function(t){return u(t)?this.btnObj:this.btnObj[t]},e.prototype.unWireButtonEvents=function(){if(this.buttons.length>0&&this.footerTemplate===""&&this.ftrTemplateContent)for(var t=0;t<this.buttons.length;t++)this.buttons[t].click&&typeof this.buttons[t].click=="function"&&this.ftrTemplateContent.children[t]&&x.remove(this.ftrTemplateContent.children[t],"click",this.buttons[t].click)},e.prototype.destroyButtons=function(){if(!u(this.btnObj))for(var t=0;t<this.btnObj.length;t++)this.btnObj[t]&&!this.btnObj[t].isDestroyed&&this.btnObj[t].destroy()},we([C("")],e.prototype,"content",void 0),we([C(!0)],e.prototype,"enableHtmlSanitizer",void 0),we([C(!1)],e.prototype,"enablePersistence",void 0),we([C(!1)],e.prototype,"showCloseIcon",void 0),we([C(!1)],e.prototype,"isModal",void 0),we([C("")],e.prototype,"header",void 0),we([C(!0)],e.prototype,"visible",void 0),we([C(!1)],e.prototype,"enableResize",void 0),we([C(["South-East"])],e.prototype,"resizeHandles",void 0),we([C("auto")],e.prototype,"height",void 0),we([C("")],e.prototype,"minHeight",void 0),we([C("100%")],e.prototype,"width",void 0),we([C("")],e.prototype,"cssClass",void 0),we([C(1e3)],e.prototype,"zIndex",void 0),we([C(null)],e.prototype,"target",void 0),we([C("")],e.prototype,"footerTemplate",void 0),we([C(!1)],e.prototype,"allowDragging",void 0),we([Ir([{}],Ih)],e.prototype,"buttons",void 0),we([C(!0)],e.prototype,"closeOnEscape",void 0),we([rt({},xh)],e.prototype,"animationSettings",void 0),we([rt({X:"center",Y:"center"},tl)],e.prototype,"position",void 0),we([O()],e.prototype,"created",void 0),we([O()],e.prototype,"open",void 0),we([O()],e.prototype,"beforeSanitizeHtml",void 0),we([O()],e.prototype,"beforeOpen",void 0),we([O()],e.prototype,"close",void 0),we([O()],e.prototype,"beforeClose",void 0),we([O()],e.prototype,"dragStart",void 0),we([O()],e.prototype,"dragStop",void 0),we([O()],e.prototype,"drag",void 0),we([O()],e.prototype,"overlayClick",void 0),we([O()],e.prototype,"resizeStart",void 0),we([O()],e.prototype,"resizing",void 0),we([O()],e.prototype,"resizeStop",void 0),we([O()],e.prototype,"destroyed",void 0),e=we([ki],e),e}(gi),Lo;(function(o){function e(p){var c=pe("div",{className:al});document.body.appendChild(c);var d,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return typeof p=="string"?d=i({content:p,position:{X:"center",Y:"top"},isModal:!0,header:Eo,buttons:f},c):d=i(r(p),c),d.close=function(){p&&p.close&&p.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(Ao)):d.element.remove()},d}o.alert=e;function t(p){var c=pe("div",{className:ll});document.body.appendChild(c);var d,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}];return typeof p=="string"?d=i({position:{X:"center",Y:"top"},content:p,isModal:!0,header:Eo,buttons:f},c):d=i(n(p),c),d.close=function(){p&&p.close&&p.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(Ao)):d.element.remove()},d}o.confirm=t;function i(p,c){var d=new to(p);return d.appendTo(c),d}function r(p){var c={};return c.buttons=[],c=s(c,p),c=a(c,p),c}function n(p){var c={};return c.buttons=[],c=s(c,p),c=l(c,p),c}function s(p,c){return p.header=u(c.title)?null:c.title,p.content=u(c.content)?"":c.content,p.isModal=u(c.isModal)?!0:c.isModal,p.showCloseIcon=u(c.showCloseIcon)?!1:c.showCloseIcon,p.allowDragging=u(c.isDraggable)?!1:c.isDraggable,p.closeOnEscape=u(c.closeOnEscape)?!1:c.closeOnEscape,p.position=u(c.position)?{X:"center",Y:"top"}:c.position,p.animationSettings=u(c.animationSettings)?{effect:"Fade",duration:400,delay:0}:c.animationSettings,p.cssClass=u(c.cssClass)?"":c.cssClass,p.zIndex=u(c.zIndex)?1e3:c.zIndex,p.open=u(c.open)?null:c.open,p.width=u(c.width)?"auto":c.width,p.height=u(c.height)?"auto":c.height,p}function a(p,c){var d=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return u(c.okButton)?p.buttons=d:p.buttons[0]=h(p.buttons[0],c.okButton,d[0]),p}function l(p,c){var d={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return u(c.okButton)?p.buttons[0]=d:p.buttons[0]=h(p.buttons[0],c.okButton,d),u(c.cancelButton)?p.buttons[1]=f:p.buttons[1]=h(p.buttons[1],c.cancelButton,f),p}function h(p,c,d){var f=d;return u(c.text)||(f.buttonModel.content=c.text),u(c.icon)||(f.buttonModel.iconCss=c.icon),u(c.cssClass)||(f.buttonModel.cssClass=c.cssClass),u(c.click)||(f.click=c.click),u(c.isFlat)||(f.isFlat=c.isFlat),f}})(Lo||(Lo={}));var hl=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Me=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},zh=1500,Nh=500,Fo=0,ko=8,Hh=2,Qt=2,Wn="e-tooltip",Do="e-rtl",qh="e-bigger",Mo="e-icons",Po="e-tooltip-close",_n="e-tooltip-wrap",Oo="e-tip-content",_i="e-arrow-tip",Bo="e-arrow-tip-outer",Nr="e-arrow-tip-inner",sr="e-tip-bottom",Un="e-tip-top",zo="e-tip-left",jn="e-tip-right",Kn="e-popup",or="e-popup-open",Qn="e-popup-close",Hr="e-lib",Vh="e-hidden",No="e-tooltip-popup-container",Gh=function(o){hl(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return Me([C({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),Me([C({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(_e),Wh=function(o){hl(e,o);function e(t,i){var r=o.call(this,t,i)||this;return r.mouseMoveEvent=null,r.mouseMoveTarget=null,r.containerElement=null,r.isBodyContainer=!0,r}return e.prototype.initialize=function(){this.formatPosition(),B([this.element],Wn)},e.prototype.formatPosition=function(){var t,i;this.position&&(this.position.indexOf("Top")===0||this.position.indexOf("Bottom")===0?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1]))},e.prototype.renderArrow=function(){this.setTipClass(this.position);var t=this.createElement("div",{className:_i+" "+this.tipClass});t.appendChild(this.createElement("div",{className:Bo+" "+this.tipClass})),t.appendChild(this.createElement("div",{className:Nr+" "+this.tipClass})),this.tooltipEle.appendChild(t)},e.prototype.setTipClass=function(t){t.indexOf("Right")===0?this.tipClass=zo:t.indexOf("Bottom")===0?this.tipClass=Un:t.indexOf("Left")===0?this.tipClass=jn:this.tipClass=sr},e.prototype.renderPopup=function(t){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(t);this.tooltipEle.classList.remove(Hr),this.popupObj=new Ys(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.getScalingFactor=function(t){if(!t)return{x:1,y:1};var i={x:1,y:1},r=t.closest('[style*="transform: scale"]');if(r&&r!==this.tooltipEle&&r.contains(this.tooltipEle)){var n=window.getComputedStyle(r),s=n.getPropertyValue("transform"),a=s.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);i.x=a[0],i.y=a[3]}return i},e.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="block";var i=this.element.closest('[style*="zoom"]');i&&(i.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(i).zoom));var r=mt(t,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.getScalingFactor(t),s=this.calculateTooltipOffset(this.position,n.x,n.y),a=this.calculateElementPosition(r,s),l=a[0],h=a[1],p=this.collisionFlipFit(t,l,h);return p.left=p.left/n.x,p.top=p.top/n.y,this.tooltipEle.style.display="",p},e.prototype.windowResize=function(){this.reposition(this.findTarget())},e.prototype.reposition=function(t){if(this.popupObj&&t){var i=this.getTooltipPosition(t);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},e.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},e.prototype.closePopupHandler=function(){this.isReact&&!(this.opensOn==="Click"||typeof this.content=="function")&&this.clearTemplate(["content"]),this.clear();var t={type:this.tooltipEventArgs.event?this.tooltipEventArgs.event.type:null,cancel:!1,target:this.tooltipEventArgs.target,event:this.tooltipEventArgs.event?this.tooltipEventArgs.event:null,element:this.tooltipEle,isInteracted:!u(this.tooltipEventArgs.event)};this.trigger("afterClose",t),t=null},e.prototype.calculateTooltipOffset=function(t,i,r){i===void 0&&(i=1),r===void 0&&(r=1);var n={top:0,left:0},s,a,l,h,p,c,d,f;if(i!==1||r!==1){var g=this.tooltipEle.getBoundingClientRect(),m=void 0;l=Math.round(g.width),h=Math.round(g.height),p=Ye("."+_i,this.tooltipEle),p&&(m=p.getBoundingClientRect()),s=p?Math.round(m.width):0,a=p?Math.round(m.height):0,c=this.showTipPointer?Fo:ko,d=a/2+Qt+(h-this.tooltipEle.clientHeight*r),f=s/2+Qt+(l-this.tooltipEle.clientWidth*i)}else l=this.tooltipEle.offsetWidth,h=this.tooltipEle.offsetHeight,p=Ye("."+_i,this.tooltipEle),s=p?p.offsetWidth:0,a=p?p.offsetHeight:0,c=this.showTipPointer?Fo:ko,d=a/2+Qt+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),f=s/2+Qt+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(c+=Hh),t){case"RightTop":n.left+=s+c,n.top-=h-d;break;case"RightCenter":n.left+=s+c,n.top-=h/2;break;case"RightBottom":n.left+=s+c,n.top-=d;break;case"BottomRight":n.top+=a+c,n.left-=f;break;case"BottomCenter":n.top+=a+c,n.left-=l/2;break;case"BottomLeft":n.top+=a+c,n.left-=l-f;break;case"LeftBottom":n.left-=s+l+c,n.top-=d;break;case"LeftCenter":n.left-=s+l+c,n.top-=h/2;break;case"LeftTop":n.left-=s+l+c,n.top-=h-d;break;case"TopLeft":n.top-=h+a+c,n.left-=l-f;break;case"TopRight":n.top-=h+a+c,n.left-=f;break;default:n.top-=h+a+c,n.left-=l/2;break}return n.left+=this.offsetX,n.top+=this.offsetY,n},e.prototype.updateTipPosition=function(t){var i=Lt("."+_i+",."+Bo+",."+Nr,this.tooltipEle),r=[sr,Un,zo,jn];G(i,r),this.setTipClass(t),B(i,this.tipClass)},e.prototype.adjustArrow=function(t,i,r,n){var s=Ye("."+_i,this.tooltipEle);if(!(this.showTipPointer===!1||s===null)){this.updateTipPosition(i);var a,l;this.tooltipEle.style.display="block";var h=this.tooltipEle.clientWidth,p=this.tooltipEle.clientHeight,c=Ye("."+Nr,this.tooltipEle),d=s.offsetWidth,f=s.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===sr||this.tipClass===Un){if(this.tipClass===sr?(l="99.9%",c.style.top="-"+(f-2)+"px"):(l=-(f-1)+"px",c.style.top="-"+(f-6)+"px"),t){var g=r!=="Center"||h>t.offsetWidth||this.mouseTrail;g&&r==="Left"||!g&&this.tipPointerPosition==="End"?a=h-d-Qt+"px":g&&r==="Right"||!g&&this.tipPointerPosition==="Start"?a=Qt+"px":g&&(this.tipPointerPosition==="End"||this.tipPointerPosition==="Start")?a=this.tipPointerPosition==="End"?t.offsetWidth+(this.tooltipEle.offsetWidth-t.offsetWidth)/2-d/2-Qt+"px":(this.tooltipEle.offsetWidth-t.offsetWidth)/2-d/2+Qt+"px":a=h/2-d/2+"px"}}else{this.tipClass===jn?(a="99.9%",c.style.left="-"+(d-2)+"px"):(a=-(d-1)+"px",c.style.left=-d+(d-2)+"px");var g=n!=="Center"||p>t.offsetHeight||this.mouseTrail;g&&n==="Top"||!g&&this.tipPointerPosition==="End"?l=p-f-Qt+"px":g&&n==="Bottom"||!g&&this.tipPointerPosition==="Start"?l=Qt+"px":l=p/2-f/2+"px"}s.style.top=l,s.style.left=a}},e.prototype.renderContent=function(t){var i=this,r=Ye("."+Oo,this.tooltipEle);if(this.cssClass&&B([this.tooltipEle],this.cssClass.split(" ")),t&&!u(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),u(this.content))t&&!u(t.getAttribute("data-content"))&&(r.innerHTML=t.getAttribute("data-content"));else if(r.innerHTML="",this.content instanceof HTMLElement)r.appendChild(this.content);else if(typeof this.content=="string")if(this.isAngular?this.setProperties({content:Xt.sanitize(this.content)},!0):this.content=this.enableHtmlSanitizer?Xt.sanitize(this.content):this.content,this.enableHtmlParse){var n=Be(this.content),s=n({},this,"content",this.element.id+"content",void 0,void 0,r,this.root);s&&Te(s,r)}else r.textContent=this.content;else{var a=Be(this.content),s=a({},this,"content",this.element.id+"content",void 0,void 0,r);s&&(this.isAngular&&setTimeout(function(){i.reposition(t)},1),Te(s,r)),this.renderReactTemplates()}},e.prototype.renderCloseIcon=function(){if(!this.isSticky){var t=this.tooltipEle.querySelector("."+Mo+"."+Po);t&&fe(t);return}var i=this.createElement("div",{className:Mo+" "+Po,attrs:{role:"button","aria-label":"Press escape to close the Tooltip"}});this.tooltipEle.appendChild(i),x.add(i,K.touchStartEvent,this.onStickyClose,this)},e.prototype.addDescribedBy=function(t,i){var r=(t.getAttribute("aria-describedby")||"").split(/\s+/);r.indexOf(i)<0&&r.push(i),de(t,{"aria-describedby":r.join(" ").trim(),"data-tooltip-id":i})},e.prototype.removeDescribedBy=function(t){var i=t.getAttribute("data-tooltip-id"),r=(t.getAttribute("aria-describedby")||"").split(/\s+/),n=r.indexOf(i);n!==-1&&r.splice(n,1),t.removeAttribute("data-tooltip-id");var s=r.join(" ").trim();s?t.setAttribute("aria-describedby",s):t.removeAttribute("aria-describedby")},e.prototype.tapHoldHandler=function(t){clearTimeout(this.autoCloseTimer),this.targetHover(t.originalEvent)},e.prototype.touchEndHandler=function(){var t=this;if(!this.isSticky){var i=function(){t.close()};this.autoCloseTimer=setTimeout(i,zh)}},e.prototype.targetClick=function(t){var i;if(this.target?i=Y(t.target,this.target):i=this.element,!u(i)){var r=t;i.getAttribute("data-tooltip-id")===null?r.type==="mousedown"&&r.button===2||this.targetHover(t):this.isSticky||this.hideTooltip(this.animation.close,t,i)}},e.prototype.targetHover=function(t){var i;if(this.target?i=Y(t.target,this.target):i=this.element,!(u(i)||i.getAttribute("data-tooltip-id")!==null&&this.closeDelay===0)){!u(this.tooltipEle)&&this.tooltipEle.getAttribute("e-animation-id")&&(xi.stop(this.tooltipEle),this.clear());for(var r=[].slice.call(Lt('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)),n=0,s=r;n<s.length;n++){var a=s[n];this.restoreElement(a)}this.showTooltip(i,this.animation.open,t)}},e.prototype.mouseMoveBeforeOpen=function(t){this.mouseMoveEvent=t},e.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&x.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},e.prototype.showTooltip=function(t,i,r){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=t,x.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:r?r.type:null,cancel:!1,target:t,event:r||null,element:this.tooltipEle,isInteracted:!u(r)};var s=function(a){n.beforeRenderCallback(a,t,r,i)};this.trigger("beforeRender",this.tooltipEventArgs,s.bind(this))},e.prototype.beforeRenderCallback=function(t,i,r,n){t.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,u(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?an(this.element.getAttribute("id")):an("tooltip"),this.tooltipEle=this.createElement("div",{className:_n+" "+Kn+" "+Hr,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}}),this.tooltipEle.style.width=ke(this.width),this.tooltipEle.style.height=ke(this.height),this.tooltipEle.style.position="absolute",this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,r,n,this)):i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(i,this.ctrlId+"_content"),this.renderContent(i),xi.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,r,n,this)))},e.prototype.appendContainer=function(t){typeof this.container=="string"?this.container==="body"?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=Ye(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer=this.containerElement.tagName==="BODY"),this.isBodyContainer||B([this.containerElement],No),this.containerElement.appendChild(t.tooltipEle)},e.prototype.tooltipBeforeRender=function(t,i){t&&(K.isDevice&&B([i.tooltipEle],qh),i.width!=="auto"&&(i.tooltipEle.style.maxWidth=ke(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:Oo})),this.appendContainer(i),G([i.tooltipEle],Vh),i.addDescribedBy(t,i.ctrlId+"_content"),i.renderContent(t),B([i.tooltipEle],or),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(t),i.adjustArrow(t,i.position,i.tooltipPositionX,i.tooltipPositionY),xi.stop(i.tooltipEle),i.reposition(t))},e.prototype.tooltipAfterRender=function(t,i,r,n){if(t){G([n.tooltipEle],or),B([n.tooltipEle],Qn),n.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:t,event:i||null,element:n.tooltipEle,isInteracted:!u(i)},n.needTemplateReposition()&&!n.mouseTrail&&(r.effect==="None"||r.effect==="FadeIn"||this.isReact&&typeof n.content!="string")&&(n.tooltipEle.style.display="none");var s=function(a){n.beforeOpenCallback(a,t,r,i)};n.trigger("beforeOpen",n.tooltipEventArgs,s.bind(n))}},e.prototype.beforeOpenCallback=function(t,i,r,n){var s=this;if(t.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var a={name:r.effect==="None"&&Ui==="Enable"?"FadeIn":this.animation.open.effect,duration:r.duration,delay:r.delay,timingFunction:"easeOut"};if(r.effect==="None"&&(a=void 0),this.openDelay>0){var l=function(){s.mouseTrail&&x.add(i,"mousemove touchstart mouseenter",s.onMouseMove,s),s.popupObj&&(s.popupObj.show(a,i),s.mouseMoveEvent&&s.mouseTrail&&s.onMouseMove(s.mouseMoveEvent))};this.showTimer=setTimeout(l,this.openDelay)}else this.popupObj&&this.popupObj.show(a,i)}n&&this.wireMouseEvents(n,i)},e.prototype.needTemplateReposition=function(){var t=this;return!u(t.viewContainerRef)&&typeof t.viewContainerRef!="string"||this.isReact},e.prototype.checkCollision=function(t,i,r){var n={left:i,top:r,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},s=Gs(this.tooltipEle,this.checkCollideTarget(),i,r);return s.length>0&&(n.horizontal=s.indexOf("left")>=0?"Right":s.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=s.indexOf("top")>=0?"Bottom":s.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.calculateElementPosition=function(t,i){return[this.isBodyContainer?t.left+i.left:t.left-this.containerElement.getBoundingClientRect().left+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?t.top+i.top:t.top-this.containerElement.getBoundingClientRect().top+i.top+window.pageYOffset+this.containerElement.scrollTop]},e.prototype.collisionFlipFit=function(t,i,r){var n=this.checkCollision(t,i,r),s=n.position;if(this.tooltipPositionY!==n.vertical&&(s=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(s.indexOf("Left")===0&&(n.vertical=s==="LeftTop"||s==="LeftCenter"?"Top":"Bottom",s=n.vertical+"Left"),s.indexOf("Right")===0&&(n.vertical=s==="RightTop"||s==="RightCenter"?"Top":"Bottom",s=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:s},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)s=this.position;else{var a=n.vertical,l=n.horizontal;if(n.position!==s){var h=mt(t,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(t,s,l,a);var p=this.getScalingFactor(t),c=this.calculateTooltipOffset(s,p.x,p.y);c.top-=this.getOffSetPosition("TopBottom",s,this.offsetY),c.left-=this.getOffSetPosition("RightLeft",s,this.offsetX),n.position=s;var d=this.calculateElementPosition(h,c);n.left=d[0],n.top=d[1]}else this.adjustArrow(t,s,l,a)}var f={left:n.left,top:n.top},g=this.isBodyContainer?Va(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},f):f;this.tooltipEle.style.display="block";var m=Ye("."+_i,this.tooltipEle);if(this.showTipPointer&&m!=null&&(s.indexOf("Bottom")===0||s.indexOf("Top")===0)){var v=parseInt(m.style.left,10)-(g.left-n.left);v<0?v=0:v+m.offsetWidth>this.tooltipEle.clientWidth&&(v=this.tooltipEle.clientWidth-m.offsetWidth),m.style.left=v.toString()+"px"}return this.tooltipEle.style.display="",f.left=g.left,f.top=g.top,f},e.prototype.getOffSetPosition=function(t,i,r){return t.indexOf(this.position.split(/(?=[A-Z])/)[0])!==-1&&t.indexOf(i.split(/(?=[A-Z])/)[0])!==-1?2*r:0},e.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},e.prototype.hideTooltip=function(t,i,r){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var s=function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(t,i,r)};this.hideTimer=setTimeout(s,this.closeDelay)}else this.tooltipHide(t,i,r)},e.prototype.tooltipHide=function(t,i,r){var n=this,s;i?s=this.target?r||i.target:this.element:s=Ye('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:s,event:i||null,element:this.tooltipEle,isInteracted:!u(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?n.isHidden=!1:(n.mouseMoveBeforeRemove(),n.popupHide(t,s,i))})},e.prototype.popupHide=function(t,i,r){i&&r&&this.restoreElement(i),this.isHidden=!0;var n={name:t.effect==="None"&&Ui==="Enable"?"FadeOut":this.animation.close.effect,duration:t.duration,delay:t.delay,timingFunction:"easeIn"};t.effect==="None"&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},e.prototype.restoreElement=function(t){this.unwireMouseEvents(t),u(t.getAttribute("data-content"))||(t.setAttribute("title",t.getAttribute("data-content")),t.removeAttribute("data-content")),this.removeDescribedBy(t)},e.prototype.clear=function(){var t=this.findTarget();t&&this.restoreElement(t),this.tooltipEle&&(G([this.tooltipEle],Qn),B([this.tooltipEle],or)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&fe(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},e.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},e.prototype.tooltipMouseOut=function(t){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,t,this.findTarget())},e.prototype.onMouseOut=function(t){var i=t.relatedTarget;if(i&&!this.mouseTrail){var r=Y(i,"."+_n+"."+Hr+"."+Kn);r?x.add(r,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,t,this.findTarget()),this.closeDelay===0&&(this.animation.close.effect==="None"||this.isReact&&typeof this.content!="string")&&this.clear())}else this.hideTooltip(this.animation.close,t,this.findTarget()),this.clear();this.popupObj&&!this.popupObj.element.classList.contains(or)&&this.clear()},e.prototype.tooltipElementMouseOut=function(t){this.hideTooltip(this.animation.close,t,this.findTarget()),x.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onStickyClose=function(){this.close()},e.prototype.onMouseMove=function(t){var i=0,r=0;if(t.type.indexOf("touch")>-1?(t.preventDefault(),i=t.touches[0].pageX,r=t.touches[0].pageY):(i=t.pageX,r=t.pageY),!u(this.tooltipEle)){xi.stop(this.tooltipEle),G([this.tooltipEle],Qn),B([this.tooltipEle],or),this.adjustArrow(t.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(t.target),s=this.calculateTooltipOffset(this.position,n.x,n.y),a=i+s.left+this.offsetX,l=r+s.top+this.offsetY,h=this.checkCollision(t.target,a,l);if(this.tooltipPositionX!==h.horizontal||this.tooltipPositionY!==h.vertical){var p=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?h.vertical+h.horizontal:h.horizontal+h.vertical;h.position=p,this.adjustArrow(t.target,h.position,h.horizontal,h.vertical);var c=this.calculateTooltipOffset(h.position,n.x,n.y);h.left=i+c.left-this.offsetX,h.top=r+c.top-this.offsetY}this.tooltipEle.style.left=h.left+"px",this.tooltipEle.style.top=h.top+"px"}},e.prototype.keyDown=function(t){this.tooltipEle&&t.keyCode===27&&this.close()},e.prototype.touchEnd=function(t){this.tooltipEle&&Y(t.target,"."+Wn)===null&&!this.isSticky&&this.close()},e.prototype.scrollHandler=function(t){this.tooltipEle&&!this.isSticky&&!Y(t.target,"."+_n+"."+Hr+"."+Kn)&&!this.isSticky&&this.close()},e.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},e.prototype.preRender=function(){this.tipClass=sr,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},e.prototype.wireEvents=function(t){for(var i=this.getTriggerList(t),r=0,n=i;r<n.length;r++){var s=n[r];if(s==="Custom")return;s==="Focus"&&this.wireFocusEvents(),s==="Click"&&x.add(this.element,K.touchStartEvent,this.targetClick,this),s==="Hover"&&(K.isDevice?(this.touchModule=new Zl(this.element,{tapHoldThreshold:Nh,tapHold:this.tapHoldHandler.bind(this)}),x.add(this.element,K.touchEndEvent,this.touchEndHandler,this)):x.add(this.element,"mouseover",this.targetHover,this))}this.windowResizeBound=this.windowResize.bind(this),this.keyDownBound=this.keyDown.bind(this),this.touchEndBound=this.touchEnd.bind(this),this.scrollWheelBound=this.scrollHandler.bind(this),document.addEventListener("wheel",this.scrollWheelBound),document.addEventListener("scroll",this.scrollWheelBound),document.addEventListener("touchend",this.touchEndBound),document.addEventListener("keydown",this.keyDownBound),window.addEventListener("resize",this.windowResizeBound)},e.prototype.getTriggerList=function(t){return t?(t==="Auto"&&(t=K.isDevice?"Hover":"Hover Focus"),t.split(" ")):[]},e.prototype.wireFocusEvents=function(){if(u(this.target))x.add(this.element,"focusin",this.targetHover,this);else{var t=[].slice.call(Lt(this.target,this.element));if(this.targetsList=t,!u(this.targetsList)&&this.targetsList.length>0)for(var i=0,r=t;i<r.length;i++){var n=r[i];x.add(n,"focus",this.targetHover,this)}else x.add(this.element,"focusin",this.targetHover,this)}},e.prototype.wireMouseEvents=function(t,i){this.tooltipEle&&(this.isSticky||(t.type==="focus"&&x.add(i,"blur",this.onMouseOut,this),t.type==="focusin"&&x.add(i,"focusout",this.onMouseOut,this),t.type==="mouseover"&&x.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(x.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),x.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&this.openDelay===0&&x.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unwireEvents=function(t){for(var i=this.getTriggerList(t),r=0,n=i;r<n.length;r++){var s=n[r];if(s==="Custom")return;s==="Focus"&&this.unwireFocusEvents(),s==="Click"&&x.remove(this.element,K.touchStartEvent,this.targetClick),s==="Hover"&&(K.isDevice?(this.touchModule&&this.touchModule.destroy(),x.remove(this.element,K.touchEndEvent,this.touchEndHandler)):x.remove(this.element,"mouseover",this.targetHover))}document.removeEventListener("touchend",this.touchEndBound),this.touchEndBound=null,document.removeEventListener("wheel",this.scrollWheelBound),document.removeEventListener("scroll",this.scrollWheelBound),this.scrollWheelBound=null,window.removeEventListener("resize",this.windowResizeBound),this.windowResizeBound=null,document.removeEventListener("keydown",this.keyDownBound),this.keyDownBound=null},e.prototype.unwireFocusEvents=function(){if(u(this.target))x.remove(this.element,"focusin",this.targetHover);else{var t=[].slice.call(Lt(this.target,this.element));if(!u(this.targetsList)&&this.targetsList.length>0)for(var i=0,r=t;i<r.length;i++){var n=r[i];x.remove(n,"focus",this.targetHover)}else x.remove(this.element,"focusin",this.targetHover)}},e.prototype.unwireMouseEvents=function(t){if(!this.isSticky){for(var i=this.getTriggerList(this.opensOn),r=0,n=i;r<n.length;r++){var s=n[r];s==="Focus"&&(x.remove(t,"blur",this.onMouseOut),x.remove(t,"focusout",this.onMouseOut)),s==="Hover"&&!K.isDevice&&x.remove(t,"mouseleave",this.onMouseOut)}this.closeDelay&&(x.remove(t,"mouseenter",this.tooltipHover),x.remove(t,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&x.remove(t,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){var t=Ye('[data-tooltip-id= "'+this.ctrlId+'_content"]',document);return t},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.onPropertyChanged=function(t,i){for(var r=this.findTarget(),n=0,s=Object.keys(t);n<s.length;n++){var a=s[n];switch(a){case"width":this.tooltipEle&&r&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=ke(t.width),this.reposition(r));break;case"height":this.tooltipEle&&r&&(this.tooltipEle.style.height=ke(t.height),this.reposition(r));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(t.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&r){var l=Ye("."+Nr,this.tooltipEle);l&&(l.style.top=l.style.left=null),this.reposition(r)}break;case"tipPointerPosition":this.tooltipEle&&r&&this.reposition(r);break;case"offsetX":if(this.tooltipEle){var h=t.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var p=t.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+p).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&G([this.tooltipEle],i.cssClass.split(" ")),t.cssClass&&B([this.tooltipEle],t.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?B([this.tooltipEle],Do):G([this.tooltipEle],Do));break;case"isSticky":this.tooltipEle&&r&&(this.renderCloseIcon(),this.reposition(r));break;case"container":u(this.containerElement)||G([this.containerElement],No),this.container=t.container,this.tooltipEle&&r&&(this.appendContainer(this),this.reposition(r))}}},e.prototype.open=function(t,i){u(i)&&(i=this.animation.open),u(t)&&(t=this.element),t.style.display!=="none"&&this.showTooltip(t,i)},e.prototype.close=function(t){t||(t=this.animation.close),this.hideTooltip(t)},e.prototype.refresh=function(t){if(this.tooltipEle&&this.renderContent(t),this.popupObj&&t&&this.reposition(t),!u(this.targetsList)&&!u(this.target)){var i=Lt(this.target,this.element);i.length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))}},e.prototype.destroy=function(){o.prototype.destroy.call(this),this.tooltipEle&&fe(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Za(),G([this.element],Wn),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var t=Lt('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element),i=0,r=t;i<r.length;i++){var n=r[i];this.restoreElement(n)}this.containerElement=null,this.tipClass=null,this.tooltipPositionX=null,this.tooltipPositionY=null,this.ctrlId=null,this.tooltipEventArgs=null,this.touchModule=null,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.targetsList=null},Me([C("auto")],e.prototype,"width",void 0),Me([C("auto")],e.prototype,"height",void 0),Me([C()],e.prototype,"content",void 0),Me([C("body")],e.prototype,"container",void 0),Me([C()],e.prototype,"target",void 0),Me([C("TopCenter")],e.prototype,"position",void 0),Me([C(0)],e.prototype,"offsetX",void 0),Me([C(0)],e.prototype,"offsetY",void 0),Me([C(!0)],e.prototype,"showTipPointer",void 0),Me([C(!0)],e.prototype,"enableHtmlParse",void 0),Me([C(!1)],e.prototype,"windowCollision",void 0),Me([C("Auto")],e.prototype,"tipPointerPosition",void 0),Me([C("Auto")],e.prototype,"opensOn",void 0),Me([C(!1)],e.prototype,"mouseTrail",void 0),Me([C(!1)],e.prototype,"isSticky",void 0),Me([rt({},Gh)],e.prototype,"animation",void 0),Me([C(0)],e.prototype,"openDelay",void 0),Me([C(0)],e.prototype,"closeDelay",void 0),Me([C()],e.prototype,"cssClass",void 0),Me([C(!0)],e.prototype,"enableHtmlSanitizer",void 0),Me([C("")],e.prototype,"htmlAttributes",void 0),Me([O()],e.prototype,"beforeRender",void 0),Me([O()],e.prototype,"beforeOpen",void 0),Me([O()],e.prototype,"afterOpen",void 0),Me([O()],e.prototype,"beforeClose",void 0),Me([O()],e.prototype,"afterClose",void 0),Me([O()],e.prototype,"beforeCollision",void 0),Me([O()],e.prototype,"created",void 0),Me([O()],e.prototype,"destroyed",void 0),e=Me([ki],e),e}(gi),Je={},_h=30,Uh=30,Ho=30,jh=30,Kh=30,Qh=30,Yh=36,Xh=36,Yn="e-spin-show",Xr="e-spin-hide",qo="e-spin-material",Vo="e-spin-material3",Go="e-spin-tailwind3",Wo="e-spin-fabric",_o="e-spin-fluent",Uo="e-spin-fluent2",jo="e-spin-tailwind",Jh="e-spin-bootstrap",Ko="e-spin-bootstrap4",Qo="e-spin-bootstrap5",Yo="e-spin-high-contrast",us="e-spinner-pane",io="e-spinner-inner",In="e-path-circle",$h="e-path-arc",Zh="e-spin-label",ps="e-spin-template",Xo=null,eu=null;function fn(o,e){var t;if(o.target){var i,r=u(e)?pe:e,n=Iu(o.target,r);if(!u(o.cssClass)){var s=o.cssClass.split(" ").filter(function(p){return p.trim()!==""});(t=n.wrap.classList).add.apply(t,s)}if(!u(o.template)||!u(Xo)){var a=u(o.template)?Xo:o.template;n.wrap.classList.add(ps),Cu(n.wrap,a,eu)}else{var l=u(o.type)?du(n.wrap):o.type,h=u(o.width)?void 0:o.width;i=bu(h,l),fu(l,n.wrap,i,r),u(o.label)||tu(n.inner_wrap,o.label,r)}n.wrap.classList.add(Xr),n=null}}function tu(o,e,t){var i=t("div",{});return i.classList.add(Zh),i.innerHTML=e,o.appendChild(i),i}function iu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Material",radius:e},Er(o,i,t,qo),Ar(e,o,"Material",qo)}function ru(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Tailwind3",radius:e},Er(o,i,t,Go),Ar(e,o,"Tailwind3",Go)}function nu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Material3",radius:e},Er(o,i,t,Vo),Ar(e,o,"Material3",Vo)}function su(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Bootstrap4",radius:e},Er(o,i,t,Ko),Ar(e,o,"Bootstrap4",Ko)}function ou(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Bootstrap5",radius:e},Er(o,i,t,Qo),Ar(e,o,"Bootstrap5",Qo)}function au(o,e,t){var i={},r=0;Je[""+e].timeOut=0,i[""+e]=wu(e,t,0,0);var n={uniqueID:e,container:o,globalInfo:i,timeOutVar:r};ul(n)}function lu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Fabric",radius:e},Rr(o,i,Wo),Tr(e,o,Wo)}function hu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Fluent",radius:e},Rr(o,i,_o),Tr(e,o,_o)}function uu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Fluent2",radius:e},Rr(o,i,Uo),Tr(e,o,Uo)}function pu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Tailwind",radius:e},Rr(o,i,jo),Tr(e,o,jo)}function cu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"HighContrast",radius:e},Rr(o,i,Yo),Tr(e,o,Yo)}function du(o){var e=window.getComputedStyle(o,":after").getPropertyValue("content");return e.replace(/['"]+/g,"")}function fu(o,e,t,i){var r=e.querySelector("."+io),n=r.querySelector("svg");switch(u(n)||r.removeChild(n),o){case"Material":iu(r,t,i);break;case"Material3":nu(r,t,i);break;case"Fabric":lu(r,t);break;case"Fluent":hu(r,t);break;case"Fluent2":uu(r,t);break;case"Bootstrap":gu(r,t);break;case"HighContrast":cu(r,t);break;case"Bootstrap4":su(r,t,i);break;case"Bootstrap5":ou(r,t,i);break;case"Tailwind":case"Tailwind-dark":pu(r,t);break;case"Tailwind3":ru(r,t,i);break}}function gu(o,e,t){var i=Ut();Je[""+i]={timeOut:0,type:"Bootstrap",radius:e},mu(o,i),vu(o,e)}function mu(o,e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=64,n=32,s=2;i.setAttribute("id",e),i.setAttribute("class",Jh),i.setAttribute("viewBox","0 0 "+r+" "+r),o.insertBefore(i,o.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",In+"_"+a),l.setAttribute("r",s+""),l.setAttribute("transform","translate("+n+","+n+")"),i.appendChild(l)}}function vu(o,e){var t=o.querySelector("svg.e-spin-bootstrap"),i=0,r=0,n=24;t.style.width=t.style.height=e+"px";for(var s=90,a=0;a<=7;a++){var l=cs(i,r,n,s),h=t.querySelector("."+In+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),s=s>=360?0:s,s=s+45}}function yu(o,e){var t=[],i=o,r=e,n=!1,s=1;a(i);function a(l){t.push(l),(l!==r||s===1)&&(l<=i&&l>1&&!n?l=parseFloat((l-.2).toFixed(2)):l===1?(l=7,l=parseFloat((l+.2).toFixed(2)),n=!0):l<8&&n?(l=parseFloat((l+.2).toFixed(2)),l===8&&(n=!1)):l<=8&&!n&&(l=parseFloat((l-.2).toFixed(2))),++s,a(l))}return t}function Su(o){for(var e=o.querySelector("svg.e-spin-bootstrap"),t=e.getAttribute("id"),i=1;i<=8;i++){var r=o.getElementsByClassName("e-path-circle_"+(i===8?0:i))[0];n(r,i,i,yu(i,i),t)}function n(s,a,l,h,p){var c=0;d(a);function d(f){Je[""+p].isAnimate&&(++c,s.setAttribute("r",f+""),c>=h.length&&(c=0),Je[p].timeOut=setTimeout(d.bind(null,h[c]),18))}}}function Cu(o,e,t){u(t)||o.classList.add(t);var i=o.querySelector(".e-spinner-inner");i.innerHTML=e}function bu(o,e){var t;switch(e){case"Material":t=_h;break;case"Material3":t=Uh;break;case"Fabric":t=Ho;break;case"Tailwind":case"Tailwind-dark":case"Tailwind3":t=Ho;break;case"Fluent":t=jh;break;case"Fluent2":t=Kh;break;case"Bootstrap4":t=Yh;break;case"Bootstrap5":t=Xh;break;default:t=Qh}return o=o?parseFloat(o+""):t,e==="Bootstrap"?o:o/2}function wu(o,e,t,i){return{radius:e,count:t,previousId:i}}function Ut(){for(var o="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<5;t++)o+=e.charAt(Math.floor(Math.random()*e.length));return o}function Rr(o,e,t,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",e),r.setAttribute("class",t);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",In);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",$h),o.insertBefore(r,o.firstChild),r.appendChild(n),r.appendChild(s)}function Er(o,e,t,i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",i),r.setAttribute("id",e),n.setAttribute("class",In),o.insertBefore(r,o.firstChild),r.appendChild(n)}function Iu(o,e){var t=e("div",{}),i=e("div",{});return t.classList.add(us),i.classList.add(io),i.setAttribute("aria-disabled","true"),o.appendChild(t),t.appendChild(i),{wrap:t,inner_wrap:i}}function ul(o){var e=1,t=149,i=1333,r=75;xu(e,t,Au,i,o.globalInfo[o.uniqueID].count,r,o),o.globalInfo[o.uniqueID].count=++o.globalInfo[o.uniqueID].count%4}function xu(o,e,t,i,r,n,s){var a=++s.globalInfo[s.uniqueID].previousId,l=new Date().getTime(),h=e-o,p=Ru(s.globalInfo[s.uniqueID].radius*2+""),c=pl(p),d=-90*(s.globalInfo[s.uniqueID].count||0);f(s);function f(m){var v=Math.max(0,Math.min(new Date().getTime()-l,i));g(t(v,o,h,i),m.container),a===m.globalInfo[m.uniqueID].previousId&&v<i?Je[m.uniqueID].timeOut=setTimeout(f.bind(null,m),1):ul(m)}function g(m,v){if(!u(v.querySelector("svg.e-spin-material"))||!u(v.querySelector("svg.e-spin-material3"))||!u(v.querySelector("svg.e-spin-tailwind3"))){var y=void 0;if(!u(v.querySelector("svg.e-spin-material"))&&!u(v.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?y=v.querySelector("svg.e-spin-material"):!u(v.querySelector("svg.e-spin-material3"))&&!u(v.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))?y=v.querySelector("svg.e-spin-material3"):!u(v.querySelector("svg.e-spin-tailwind3"))&&!u(v.querySelector("svg.e-spin-tailwind3").querySelector("path.e-path-circle"))&&(y=v.querySelector("svg.e-spin-tailwind3")),!u(y)){var R=y.querySelector("path.e-path-circle");R.setAttribute("stroke-dashoffset",cl(p,c,m,n)+""),R.setAttribute("transform","rotate("+d+" "+p/2+" "+p/2+")")}}}}function Ar(o,e,t,i){var r=o*2,n=e.querySelector("svg."+i),s=n.querySelector("path.e-path-circle"),a=pl(r),l=r/2+"px";n.setAttribute("viewBox","0 0 "+r+" "+r),n.style.width=n.style.height=r+"px",n.style.transformOrigin=l+" "+l+" "+l,s.setAttribute("d",Eu(r,a)),(t==="Material"||t==="Material3"||t==="Fluent2"||t==="Tailwind3")&&(s.setAttribute("stroke-width",a+""),s.setAttribute("stroke-dasharray",(r-a)*Math.PI*.75+""),s.setAttribute("stroke-dashoffset",cl(r,a,1,75)+""))}function Ru(o){var e=parseFloat(o);return e}function Eu(o,e){var t=o/2,i=e/2;return"M"+t+","+i+"A"+(t-i)+","+(t-i)+" 0 1 1 "+i+","+t}function pl(o){return 10/100*o}function cl(o,e,t,i){return(o-e)*Math.PI*(3*i/100-t/100)}function Au(o,e,t,i){var r=(o/=i)*o,n=r*o;return e+t*(6*n*r+-15*r*r+10*n)}function Tr(o,e,t){var i=o,r=o,n=o*2,s=315,a=45,l=e.querySelector("."+t),h=l.querySelector(".e-path-circle"),p=l.querySelector(".e-path-arc"),c=n/2+"px";h.setAttribute("d",Lu(i,r,o)),p.setAttribute("d",Tu(i,r,o,s,a)),l.setAttribute("viewBox","0 0 "+n+" "+n),l.style.transformOrigin=c+" "+c+" "+c,l.style.width=l.style.height=n+"px"}function cs(o,e,t,i){var r=(i-90)*Math.PI/180;return{x:o+t*Math.cos(r),y:e+t*Math.sin(r)}}function Tu(o,e,t,i,r){var n=cs(o,e,t,r),s=cs(o,e,t,i),a=["M",n.x,n.y,"A",t,t,0,0,0,s.x,s.y].join(" ");return a}function Lu(o,e,t){var i=["M",o,e,"m",-t,0,"a",t,t,0,1,0,t*2,0,"a",t,t,0,1,0,-t*2,0].join(" ");return i}function ji(o){dl(o,!1),o=null}function dl(o,e){var t;if(o)if(o.classList.contains(us))t=o;else{var i=o.querySelectorAll("."+us);if(K.isIE){for(var r=0;r<i.length;r++)if(i[r].parentElement&&i[r].parentElement===o){t=i[r];break}}else t=Array.from(i).find(function(h){return h.parentElement===o})||null}if(o&&t){var n=t.querySelector("."+io),s=e?!t.classList.contains(ps)&&!t.classList.contains(Xr):!t.classList.contains(ps)&&!t.classList.contains(Yn);if(s){var a=t.querySelector("svg");if(u(a))return;var l=a.getAttribute("id");switch(Je[""+l].isAnimate=!e,Je[""+l].type){case"Material":case"Material3":case"Tailwind3":e?clearTimeout(Je[l].timeOut):au(n,l,Je[l].radius);break;case"Bootstrap":e?clearTimeout(Je[l].timeOut):Su(n);break}}e?ve(t,[Xr],[Yn]):ve(t,[Yn],[Xr]),o=null}}function gn(o){dl(o,!0),o=null}var J={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"},Jo=["title","style","class"],Pe;(function(o){var e=!0;function t(S,I){S.element.__eventHandlers={};var M=u(I)?pe:I,q={container:null,buttons:[],clearButton:null};if(S.floatLabelType,e=S.bindClearAction,u(S.floatLabelType)||S.floatLabelType==="Never"?(q.container=$(S,J.INPUTGROUP,J.INPUTCUSTOMTAG,"span",M),S.element.parentNode.insertBefore(q.container,S.element),B([S.element],J.INPUT),q.container.appendChild(S.element)):m(S,q,M),s(S),!u(S.properties)&&!u(S.properties.showClearButton)&&S.properties.showClearButton&&(se(S.properties.showClearButton,S.element,q,!0,M),q.clearButton.setAttribute("role","button"),q.container.classList.contains(J.FLOATINPUT)&&B([q.container],J.INPUTGROUP)),!u(S.buttons))for(var U=0;U<S.buttons.length;U++)q.buttons.push(at(S.buttons[U],q.container,M));return!u(S.element)&&S.element.tagName==="TEXTAREA"&&B([q.container],J.TEXTAREA),Dt(q.container,S.element),q=R(S,q),Ne(q.container,M),q}o.createInput=t;function i(S){var I=k(S.element);(I.classList.contains("e-input-group")||I.classList.contains("e-outline")||I.classList.contains("e-filled"))&&I.classList.add("e-input-focus"),S.floatLabelType!=="Never"&&setTimeout(function(){o.calculateWidth(S.element,I)},80)}function r(S){var I=k(S.element);(I.classList.contains("e-input-group")||I.classList.contains("e-outline")||I.classList.contains("e-filled"))&&I.classList.remove("e-input-focus"),S.floatLabelType!=="Never"&&setTimeout(function(){o.calculateWidth(S.element,I)},80)}function n(S){l(S.floatLabelType,S.element)}function s(S){l(S.floatLabelType,S.element);var I=function(){return i(S)},M=function(){return r(S)},q=function(){return n(S)};S.element.addEventListener("focus",I),S.element.addEventListener("blur",M),S.element.addEventListener("input",q),S.element.__eventHandlers.inputFocusHandler={focusHandler:I},S.element.__eventHandlers.inputBlurHandler={blurHandler:M},S.element.__eventHandlers.inputHandler={inputHandler:q}}o.bindInitialEvent=s;function a(S){if(!u(S.element)&&!u(S.element.__eventHandlers)&&!u(S.element.__eventHandlers.inputFocusHandler)&&!u(S.element.__eventHandlers.inputBlurHandler)&&!u(S.element.__eventHandlers.inputHandler)){var I=S.element.__eventHandlers.inputFocusHandler.focusHandler,M=S.element.__eventHandlers.inputBlurHandler.blurHandler,q=S.element.__eventHandlers.inputHandler.inputHandler;S.element.removeEventListener("focus",I),S.element.removeEventListener("blur",M),S.element.removeEventListener("input",q),delete S.element.__eventHandlers.inputFocusHandler,delete S.element.__eventHandlers.inputBlurHandler,delete S.element.__eventHandlers.inputHandler}}function l(S,I){var M=I.value,q=I.parentElement,U=q&&q.parentElement;M!==""&&!u(M)?q&&q.classList.contains("e-input-group")?q.classList.add("e-valid-input"):U&&U.classList.contains("e-input-group")&&U.classList.add("e-valid-input"):S!=="Always"&&(q&&q.classList.contains("e-input-group")?q.classList.remove("e-valid-input"):U&&U.classList.contains("e-input-group")&&U.classList.remove("e-valid-input"))}function h(){var S=k(this).getElementsByClassName("e-float-text")[0];u(S)||(B([S],J.LABELTOP),S.classList.contains(J.LABELBOTTOM)&&G([S],J.LABELBOTTOM))}function p(){var S=k(this);if(S.getElementsByTagName("textarea")[0]?S.getElementsByTagName("textarea")[0].value==="":S.getElementsByTagName("input")[0].value===""){var I=S.getElementsByClassName("e-float-text")[0];u(I)||(I.classList.contains(J.LABELTOP)&&G([I],J.LABELTOP),B([I],J.LABELBOTTOM))}}function c(S){S.addEventListener("focus",h),S.addEventListener("blur",p)}o.wireFloatingEvents=c;function d(S){u(S)||(S.removeEventListener("focus",h),S.removeEventListener("blur",p))}function f(S){N(S.element,S.floatLabelType)}function g(S){N(S.element,S.floatLabelType)}function m(S,I,M){var q=u(M)?pe:M;S.floatLabelType==="Auto"&&c(S.element),u(I.container)?(I.container=$(S,J.FLOATINPUT,J.FLOATCUSTOMTAG,"div",q),I.container.classList.add(J.INPUTGROUP),S.element.parentNode&&S.element.parentNode.insertBefore(I.container,S.element)):(u(S.customTag)||I.container.classList.add(J.FLOATCUSTOMTAG),I.container.classList.add(J.FLOATINPUT));var U=q("span",{className:J.FLOATLINE}),j=q("label",{className:J.FLOATTEXT});if(!u(S.element.id)&&S.element.id!==""&&(j.id="label_"+S.element.id.replace(/ /g,"_"),de(S.element,{"aria-labelledby":j.id})),!u(S.element.placeholder)&&S.element.placeholder!==""&&(j.innerText=V(S.element.placeholder),S.element.removeAttribute("placeholder")),!u(S.properties)&&!u(S.properties.placeholder)&&S.properties.placeholder!==""&&(j.innerText=V(S.properties.placeholder)),j.innerText||I.container.classList.add(J.NOFLOATLABEL),I.container.classList.contains("e-float-icon-left")){var be=I.container.querySelector(".e-input-in-wrap");be.appendChild(S.element),be.appendChild(U),be.appendChild(j)}else I.container.appendChild(S.element),I.container.appendChild(U),I.container.appendChild(j);if(E(S.element.value,j),S.floatLabelType==="Always"&&(j.classList.contains(J.LABELBOTTOM)&&G([j],J.LABELBOTTOM),B([j],J.LABELTOP)),S.floatLabelType==="Auto"){var Ge=function(){return f(S)},We=function(){return g(S)};S.element.addEventListener("input",Ge),S.element.addEventListener("blur",We),S.element.__eventHandlers.floatInputHandler={inputFloatHandler:Ge},S.element.__eventHandlers.floatBlurHandler={blurFloatHandler:We}}else v(S);u(S.element.getAttribute("id"))||j.setAttribute("for",S.element.getAttribute("id"))}function v(S){if(!u(S.element)&&!u(S.element.__eventHandlers)&&!u(S.element.__eventHandlers.floatInputHandler)&&!u(S.element.__eventHandlers.floatBlurHandler)){var I=S.element.__eventHandlers.floatInputHandler.inputFloatHandler,M=S.element.__eventHandlers.floatBlurHandler.blurFloatHandler;S.element.removeEventListener("input",I),S.element.removeEventListener("blur",M),delete S.element.__eventHandlers.floatInputHandler,delete S.element.__eventHandlers.floatBlurHandler}}function y(S,I){S==="Always"&&I.classList.contains("e-outline")&&I.classList.add("e-valid-input")}function R(S,I){if(!u(S.properties))for(var M=0,q=Object.keys(S.properties);M<q.length;M++){var U=q[M];switch(U){case"cssClass":z(S.properties.cssClass,[I.container]),y(S.floatLabelType,I.container);break;case"enabled":ge(S.properties.enabled,S.element,S.floatLabelType,I.container);break;case"enableRtl":ce(S.properties.enableRtl,[I.container]);break;case"placeholder":Se(S.properties.placeholder,S.element);break;case"readonly":me(S.properties.readonly,S.element);break}}return I}function b(S,I,M){u(I)||(S&&!M?G([I],J.CLEARICONHIDE):B([I],J.CLEARICONHIDE))}function E(S,I,M){if(M===void 0&&(M=null),S)B([I],J.LABELTOP),I.classList.contains(J.LABELBOTTOM)&&G([I],J.LABELBOTTOM);else{var q=M!=null?M!==document.activeElement:!0;q&&(I.classList.contains(J.LABELTOP)&&G([I],J.LABELTOP),B([I],J.LABELBOTTOM))}}function k(S){var I=u(S.parentNode)?S:S.parentNode;return I&&I.classList.contains("e-input-in-wrap")&&(I=I.parentNode),I}function F(S,I,M,q){var U=u(q)?pe:q,j=U("span",{className:J.CLEARICON}),be=I.container;if(!u(M))be.appendChild(j);else{var Ge=I.container.classList.contains(J.FLOATINPUT)?I.container.querySelector("."+J.FLOATTEXT):S;Ge.insertAdjacentElement("afterend",j)}return B([j],J.CLEARICONHIDE),L(S,j),j.setAttribute("aria-label","close"),j}function W(S,I,M){I.classList.contains(J.DISABLE)||I.readOnly||(S.preventDefault(),I!==document.activeElement&&I.focus(),I.value="",B([M],J.CLEARICONHIDE))}function te(S,I){b(S.value,I)}function ne(S,I){b(S.value,I,S.readOnly)}function ye(S,I){setTimeout(function(){u(I)||(B([I],J.CLEARICONHIDE),I=!u(S)&&S.classList.contains("e-combobox")?null:I)},200)}function L(S,I,M){if(e===void 0||e){var q=function(Ge){return W(Ge,S,I)};I.addEventListener("click",q),S.__eventHandlers.clearClickHandler={clickHandlerEvent:q}}var U=function(){return te(S,I)},j=function(){return ne(S,I)},be=function(){return ye(S,I)};S.addEventListener("input",U),S.addEventListener("focus",j),S.addEventListener("blur",be),S.__eventHandlers.clearInputHandler={inputHandlerEvent:U},S.__eventHandlers.clearFocusHandler={focusHandlerEvent:j},S.__eventHandlers.clearBlurHandler={blurHandlerEvent:be}}o.wireClearBtnEvents=L;function P(S,I){if(!u(S)&&!u(S.__eventHandlers)){if(!u(S.__eventHandlers.clearClickHandler)){var M=S.__eventHandlers.clearClickHandler.clickHandlerEvent;(e===void 0||e)&&(u(I)||I.removeEventListener("click",M)),delete S.__eventHandlers.clearClickHandler}if(!u(S.__eventHandlers.clearInputHandler)&&!u(S.__eventHandlers.clearFocusHandler)&&!u(S.__eventHandlers.clearBlurHandler)){var q=S.__eventHandlers.clearInputHandler.inputHandlerEvent,U=S.__eventHandlers.clearFocusHandler.focusHandlerEvent,j=S.__eventHandlers.clearBlurHandler.blurHandlerEvent;S.removeEventListener("input",q),S.removeEventListener("focus",U),S.removeEventListener("blur",j),delete S.__eventHandlers.clearInputHandler,delete S.__eventHandlers.clearFocusHandler,delete S.__eventHandlers.clearBlurHandler}}}function D(S,I){I===void 0&&(I=null),a(S),S.floatLabelType==="Auto"&&v(S),S.properties.showClearButton&&P(S.element,I),u(S.buttons)||Ce(!1,null,S.buttons),d(S.element),u(S.element)||(delete S.element.__eventHandlers,S.element.classList.contains(J.INPUT)&&S.element.classList.remove(J.INPUT))}o.destroy=D;function N(S,I){var M=k(S);if(M.classList.contains(J.FLOATINPUT)&&I==="Auto"){var q=k(S).getElementsByClassName("e-float-text")[0];E(S.value,q,S)}}function $(S,I,M,q,U){var j=u(U)?pe:U,be;return u(S.customTag)?be=j(q,{className:I}):(be=j(S.customTag,{className:I}),be.classList.add(M)),be.classList.add("e-control-wrapper"),be}function V(S){var I="";if(!u(S)&&S!==""){var M=document.createElement("span");M.innerHTML='<input  placeholder="'+S+'"/>';var q=M.children[0];I=q.placeholder}return I}function H(S,I,M,q){if(I.value=S,M!=="Never"&&Z(I,I.parentElement),!u(M)&&M==="Auto"&&N(I,M),!u(q)&&q){var U=k(I);if(!u(U)){var j=U.getElementsByClassName(J.CLEARICON)[0];u(j)||(I.value&&!u(U)&&U.classList.contains("e-input-focus")?G([j],J.CLEARICONHIDE):B([j],J.CLEARICONHIDE))}}l(M,I)}o.setValue=H;function z(S,I,M){!u(M)&&M!==""&&G(I,M.split(" ")),!u(S)&&S!==""&&B(I,S.split(" "))}o.setCssClass=z;function Z(S,I,M){if(!(M!=="multiselect"&&!wt(S))){var q=M==="multiselect"?S:S.clientWidth-parseInt(getComputedStyle(S,null).getPropertyValue("padding-left"),10);!u(I)&&!u(I.getElementsByClassName("e-float-text-content")[0])&&(I.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&I.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(q<I.getElementsByClassName("e-float-text-content")[0].clientWidth||q===I.getElementsByClassName("e-float-text-content")[0].clientWidth)&&I.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}}o.calculateWidth=Z;function he(S,I){typeof S=="number"?I.style.width=ke(S):typeof S=="string"&&(I.style.width=S.match(/px|%|em/)?S:ke(S)),Z(I.firstChild,I)}o.setWidth=he;function Se(S,I){S=V(S);var M=k(I);if(M.classList.contains(J.FLOATINPUT))if(!u(S)&&S!==""){var q=M.getElementsByClassName("e-float-text-content")[0];q&&q.children[0]?q.children[0].textContent=S:M.getElementsByClassName(J.FLOATTEXT)[0].textContent=S,M.classList.remove(J.NOFLOATLABEL),I.removeAttribute("placeholder")}else{M.classList.add(J.NOFLOATLABEL);var q=M.getElementsByClassName("e-float-text-content")[0];q?q.children[0].textContent="":M.getElementsByClassName(J.FLOATTEXT)[0].textContent=""}else!u(S)&&S!==""?de(I,{placeholder:S}):I.removeAttribute("placeholder")}o.setPlaceholder=Se;function me(S,I,M){S?de(I,{readonly:""}):I.removeAttribute("readonly"),u(M)||N(I,M)}o.setReadonly=me;function ce(S,I){S?B(I,J.RTL):G(I,J.RTL)}o.setEnableRtl=ce;function ge(S,I,M,q){var U={disabled:"","aria-disabled":"true"},j=!u(q);S?(I.classList.remove(J.DISABLE),ie(U,I),j&&G([q],J.DISABLE)):(I.classList.add(J.DISABLE),ee(U,I),j&&B([q],J.DISABLE)),u(M)||N(I,M)}o.setEnabled=ge;function se(S,I,M,q,U){var j=u(U)?pe:U;S?M.clearButton=F(I,M,q,j):(fe(M.clearButton),M.clearButton=null)}o.setClearButton=se;function ie(S,I){for(var M=0,q=Object.keys(S);M<q.length;M++){var U=q[M],j=k(I);U==="disabled"&&I.classList.remove(J.DISABLE),U==="disabled"&&j.classList.contains(J.INPUTGROUP)&&j.classList.remove(J.DISABLE),U==="placeholder"&&j.classList.contains(J.FLOATINPUT)?j.getElementsByClassName(J.FLOATTEXT)[0].textContent="":I.removeAttribute(U)}}o.removeAttributes=ie;function ee(S,I){for(var M=0,q=Object.keys(S);M<q.length;M++){var U=q[M],j=k(I);U==="disabled"&&I.classList.add(J.DISABLE),U==="disabled"&&j.classList.contains(J.INPUTGROUP)&&j.classList.add(J.DISABLE),U==="placeholder"&&j.classList.contains(J.FLOATINPUT)?j.getElementsByClassName(J.FLOATTEXT)[0].textContent=S[""+U]:I.setAttribute(U,S[""+U])}}o.addAttributes=ee;function it(S){var I=S.container;if(!u(I)&&I.classList.contains(J.FLOATINPUT)){var M=I.querySelector("textarea")?I.querySelector("textarea"):I.querySelector("input"),q=I.querySelector("."+J.FLOATTEXT).textContent,U=I.querySelector(".e-clear-icon")!==null;Ve(I.querySelector("."+J.FLOATLINE)),Ve(I.querySelector("."+J.FLOATTEXT)),ve(I,[J.INPUTGROUP],[J.FLOATINPUT]),d(M),de(M,{placeholder:q}),M.classList.add(J.INPUT),!U&&M.tagName==="INPUT"&&M.removeAttribute("required")}}o.removeFloating=it;function ze(S,I,M,q){var U=u(q)?pe:q,j=Y(S,"."+J.INPUTGROUP),be=j.tagName;be=be!=="DIV"&&be!=="SPAN"?be:null;var Ge={element:S,floatLabelType:I,customTag:be,properties:{placeholder:M}};if(I!=="Never"){var We=j.querySelector(".e-clear-icon"),yt={container:j};S.classList.remove(J.INPUT),m(Ge,yt,U),Ne(yt.container,U),Z(Ge.element,yt.container);var Kt=j.classList.contains("e-float-icon-left");if(u(We))if(Kt){var Kl=j.querySelector(".e-input-in-wrap");We=Kl.querySelector(".e-input-group-icon")}else We=j.querySelector(".e-input-group-icon");if(u(We))Kt&&(We=j.querySelector(".e-input-group-icon"));else{var Ql=j.querySelector("."+J.FLOATLINE),Yl=j.querySelector("."+J.FLOATTEXT),An=Kt?j.querySelector(".e-input-in-wrap"):j;An.insertBefore(S,We),An.insertBefore(Ql,We),An.insertBefore(Yl,We)}}else v(Ge);y(I,S.parentElement)}o.addFloating=ze;function Ne(S,I){if(S.classList.contains("e-outline")&&S.getElementsByClassName("e-float-text")[0]){var M=I("span",{className:J.FLOATTEXTCONTENT});M.innerHTML=S.getElementsByClassName("e-float-text")[0].innerHTML,S.getElementsByClassName("e-float-text")[0].innerHTML="",S.getElementsByClassName("e-float-text")[0].appendChild(M)}}o.createSpanElement=Ne;function Ee(S,I){for(var M=0;M<I.length;M++)Ce(S,I[parseInt(M.toString(),10)].container)}o.setRipple=Ee;function Ce(S,I,M){var q=[];q.push(M);var U=u(M)?I.querySelectorAll(".e-input-group-icon"):q;if(S&&U.length>0)for(var j=0;j<U.length;j++)U[parseInt(j.toString(),10)].addEventListener("mousedown",It,!1),U[parseInt(j.toString(),10)].addEventListener("mouseup",vt,!1);else if(U.length>0)for(var j=0;j<U.length;j++)U[parseInt(j.toString(),10)].removeEventListener("mousedown",It,this),U[parseInt(j.toString(),10)].removeEventListener("mouseup",vt,this)}function ni(S,I){!S.classList.contains("e-disabled")&&!S.querySelector("input").readOnly&&I.classList.add("e-input-btn-ripple")}function wt(S){if(!S)return!1;for(var I=S;I&&I!==document.body;){var M=window.getComputedStyle(I);if(M.display==="none")return!1;I=I.parentElement}return!0}function It(){for(var S=this,I=this.parentElement;!I.classList.contains("e-input-group");)I=I.parentElement;ni(I,S)}function vt(){var S=this;setTimeout(function(){S.classList.remove("e-input-btn-ripple")},500)}function Ke(S,I){var M=I("span",{className:S});return M.classList.add("e-input-group-icon"),M}function rr(S,I,M,q,U){var j=typeof I=="string"?I.split(","):I;if(S.toLowerCase()==="append")for(var be=0,Ge=j;be<Ge.length;be++){var We=Ge[be];at(We,M,U)}else for(var yt=0,Kt=j;yt<Kt.length;yt++){var We=Kt[yt];ft(We,M,q,U)}M.getElementsByClassName("e-input-group-icon")[0]&&M.getElementsByClassName("e-float-text-overflow")[0]&&M.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")}o.addIcon=rr;function ft(S,I,M,q){var U=u(q)?pe:q,j=Ke(S,U);I.classList.add("e-float-icon-left");var be=I.querySelector(".e-input-in-wrap");if(u(be)){be=U("span",{className:"e-input-in-wrap"}),M.parentNode.insertBefore(be,M);var Ge=I.querySelectorAll(M.tagName+" ~ *");be.appendChild(M);for(var We=0;We<Ge.length;We++){var yt=Ge[parseInt(We.toString(),10)],Kt=be.parentElement;(!yt.classList.contains("e-float-line")||!(Kt&&Kt.classList.contains("e-filled"))&&Kt)&&be.appendChild(yt)}}return be.parentNode.insertBefore(j,be),Ce(!0,I,j),j}o.prependSpan=ft;function at(S,I,M){var q=u(M)?pe:M,U=Ke(S,q),j=I.classList.contains("e-float-icon-left")?I.querySelector(".e-input-in-wrap"):I;return j.appendChild(U),Ce(!0,I,U),U}o.appendSpan=at;function Dt(S,I){I.type==="hidden"?S.classList.add("e-hidden"):S.classList.contains("e-hidden")&&S.classList.remove("e-hidden")}o.validateInputType=Dt;function Ci(S,I){if(!u(S))for(var M=0,q=Object.keys(S);M<q.length;M++){var U=q[M];Jo.indexOf(U)<0&&I.setAttribute(U,S[""+U])}}o.updateHTMLAttributesToElement=Ci;function bi(S,I,M){z($e(S),[M],$e(I))}o.updateCssClass=bi;function $e(S){var I=S;return!u(S)&&S!==""&&(I=S.replace(/\s+/g," ").trim()),I}o.getInputValidClassList=$e;function jt(S,I){if(!u(S))for(var M=0,q=Object.keys(S);M<q.length;M++){var U=q[M];if(Jo.indexOf(U)>-1)if(U==="class"){var j=this.getInputValidClassList(S[""+U]);j!==""&&B([I],j.split(" "))}else if(U==="style"){var be=I.getAttribute(U);be=u(be)?S[""+U]:be+S[""+U],I.setAttribute(U,be)}else I.setAttribute(U,S[""+U])}}o.updateHTMLAttributesToWrapper=jt;function Fr(S){return!S||/^\s*$/.test(S)}o.isBlank=Fr})(Pe||(Pe={}));var fl=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xf=function(o){fl(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.moduleName="column",e.complexTemplate={"filter.itemTemplate":"filter.itemTemplate"},e}(Ma),Rf=function(o){fl(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.propertyName="columns",e.moduleName="columns",e}(Ma),Lr=function(){function o(e){this.intl=new Hs,u(e)||(this.intl.culture=e)}return o.prototype.getFormatFunction=function(e){return!u(e)&&(e.type==="dateTime"||e.type==="datetime"||e.type==="date"||e.type==="time")?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},o.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},o.prototype.fromView=function(e,t,i){return(i==="date"||i==="datetime"||i==="number")&&!u(t)?t(e):e},o.prototype.toView=function(e,t){var i=e;return!u(t)&&!u(e)&&(i=t(e)),i},o.prototype.setCulture=function(e){u(e)||eh(e)},o}(),gl=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jr=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},tt=function(){function o(e,t){var i=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},this.templateOptions={enableAriaLabel:!0},fi(this,e),this.parent=t,this.type==="none"?this.type=null:this.type&&(this.type=typeof this.type=="string"?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),u(this.uid)&&(this.uid=Ei("grid-column"));var r=new Lr;if(e.format&&(e.format.skeleton||e.format.format&&typeof e.format.format=="string")&&(this.setFormatter(r.getFormatFunction(Q({},e.format))),this.setParser(r.getParserFunction(e.format))),this.toJSON=function(){for(var s={},a=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(i),h=0;h<l.length;h++)if(l[parseInt(h.toString(),10)]==="columns"){s[l[parseInt(h.toString(),10)]]=[];for(var p=0;p<i[l[parseInt(h.toString(),10)]].length;p++)s[l[parseInt(h.toString(),10)]].push(i[l[parseInt(h.toString(),10)]][parseInt(p.toString(),10)].toJSON())}else a.indexOf(l[parseInt(h.toString(),10)])<0&&(s[l[parseInt(h.toString(),10)]]=i[l[parseInt(h.toString(),10)]]);return s},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(s){return s.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=qe(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=qe(this.headerTemplate)),!u(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=qe(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=qe(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=qe(this.filterTemplate)),this.isForeignColumn()&&(u(this.editType)||this.editType==="dropdownedit"||this.editType==="defaultedit")&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=Q({dataSource:this.dataSource,query:new ae,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var n=this.sortComparer;this.sortComparer=function(s,a,l,h){if(typeof n=="string"&&(n=Si(n,window)),i.sortDirection==="Descending"){var p=s;s=a,a=p;var c=l;l=h,h=c}return n(s,a,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(s,a){return s=Si(i.foreignKeyValue,Gi(i,{},s)[0]),a=Si(i.foreignKeyValue,Gi(i,{},a)[0]),i.sortDirection==="Descending"?A.fnDescending(s,a):A.fnAscending(s,a)})}return o.prototype.getSortDirection=function(){return this.sortDirection},o.prototype.setSortDirection=function(e){this.sortDirection=e},o.prototype.getFreezeTableName=function(){return this.freezeTable},o.prototype.setProperties=function(e){for(var t=Object.keys(e),i=function(s){if(t[parseInt(s.toString(),10)]==="columns")for(var a=e[t[parseInt(s.toString(),10)]],l=function(p){r.columns.find(function(c){return c.field===a[parseInt(p.toString(),10)].field}).setProperties(a[parseInt(p.toString(),10)])},h=0;h<a.length;h++)l(h);else r[t[parseInt(s.toString(),10)]]=e[t[parseInt(s.toString(),10)]];r.parent&&r.parent.isReact&&(t[parseInt(s.toString(),10)]==="template"?(r.templateFn=qe(e[t[parseInt(s.toString(),10)]]),r.parent.refreshReactColumnTemplateByUid(r.uid,!0)):t[parseInt(s.toString(),10)]==="headerTemplate"?(r.headerTemplateFn=qe(e[t[parseInt(s.toString(),10)]]),r.parent.refreshReactHeaderTemplateByUid(r.uid)):t[parseInt(s.toString(),10)]==="editTemplate"?r.editTemplateFn=qe(e[t[parseInt(s.toString(),10)]]):t[parseInt(s.toString(),10)]==="filterTemplate"?r.filterTemplateFn=qe(e[t[parseInt(s.toString(),10)]]):t[parseInt(s.toString(),10)]==="commandsTemplate"&&(r.templateFn=qe(e[t[parseInt(s.toString(),10)]])))},r=this,n=0;n<t.length;n++)i(n)},o.prototype.isForeignColumn=function(){return!!(this.dataSource&&this.foreignKeyValue)},o.prototype.getFormatter=function(){return this.formatFn},o.prototype.setFormatter=function(e){this.formatFn=e},o.prototype.getParser=function(){return this.parserFn},o.prototype.setParser=function(e){this.parserFn=e},o.prototype.getColumnTemplate=function(){return this.templateFn},o.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},o.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},o.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},o}();(function(){function o(){}return Jr([C()],o.prototype,"title",void 0),Jr([C()],o.prototype,"type",void 0),Jr([C()],o.prototype,"buttonOption",void 0),o})();var Fu=function(o){gl(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return Jr([C(null)],e.prototype,"columns",void 0),e}(tt);(function(o){gl(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e})(Fu);var ds="load",mn="rowDataBound",fs="queryCellInfo",gs="headerCellInfo",_t="actionBegin",dt="actionComplete",ku="actionFailure",Ti="dataBound",Xn="rowSelecting",Jn="rowSelected",$n="rowDeselecting",Zn="rowDeselected",ar="cellSelecting",qr="cellSelected",$o="cellDeselecting",Zo="cellDeselected",es="columnSelecting",ts="columnSelected",Du="columnDeselecting",Mu="columnDeselected",Pu="columnDragStart",Ou="columnDrag",Bu="columnDrop",ea="beforePrint",ta="printComplete",zu="detailDataBound",Nu="batchAdd",ml="batchCancel",Hu="batchDelete",qu="recordDoubleClick",Vu="recordClick",Gu="beforeDataBound",ia="beforeOpenAdaptiveDialog",ra="resizeStop",Wu="checkBoxChange",_u="beforeCopy",Uu="beforePaste",ju="beforeAutoFill",is="filterchoicerequest",Ku="filterAfterOpen",Qu="filterBeforeOpen",Yu="filterSearchBegin",ro="initial-load",xn="initial-end",er="data-ready",Xe="content-ready",et="ui-update",ei="on-empty",At="inbound-model-changed",yr="model-changed",vl="colgroup-refresh",vi="header-refreshed",Xu="paging-complete",na="searching-complete",Ju="grouping-complete",sa="group-aggregates",ms="refresh-footer-rendered",$u="refresh-aggregate-cell",Zu="rowselected",ep="cellselected",vs="destroy-autofill-elements",ys="beforecellfocused",Ss="cellfocused",Jt="key-pressed",tr="click",ti="destroy",no="column-visible-changed",oa="scroll",yl="column-width-changed",Sl="column-position-changed",aa="rows-added",Cs="rows-removed",tp="column-drag-stop",ip="header-drop",bs="datasource-modified",rp="refresh-complete",np="dblclick",sp="toolbar-refresh",op="bulk-save",Sr="auto-col",ws="tooltip-destroy",Is="update-data",xs="prevent-batch",ap="crud-Action",la="add-delete-Action",lp="double-tap",$r="freezerender",hp="filterDialogCreated",up="filter-menu-close",pp="initForeignKeyColumn",ha="getForeignKeyData",Zr="generateQuery",Cl="showEmptyGrid",bl="foreignKeyData",Rs="dataStateChange",ua="dataSourceChanged",cp="rtl-updated",wl="beforeFragAppend",pa="textWrapRefresh",ca="recordAdded",Es="cancel-Begin",dp="editNextValCell",da="hierarchyprint",fp="expandchildgrid",gp="printGrid-Init",mp="row-position-changed",Il="partial-refresh",vp="select-virtual-Row",As="columns-prepared",yp="cbox-filter-begin",fa="cbox-filter-complete",ga="filter-Prevent",Sp="filter-cbox-value",Cp="restore-Focus",xl="detail-indentcell-info",bp="virtaul-cell-focus",wp="virtual-scroll-edit",Ip="edit-reset",xp="get-virtual-data",Rp="refresh-infinite-mode-blocks",Ep="reset-infinite-blocks",Ap="infinite-scroll-handler",Tp="infinite-page-query",Lp="infinite-show-hide",Fp="append-infinite-content",kp="remove-infinite-rows",Dp="set-infinite-cache",ma="infinite-edit-handler",Mp="close-filter-dialog",Pp="reset-columns",Op="group-cache",Bp="lazy-load-scroll-handler",va="group-collapse",zp="beforeCheckboxRenderer",rs="refreshResizeHandlers",Np="set-freeze-selection",Ts="before-refresh-on-data-change",Hp="immutable-batch-cancel",qp="check-scroll-reset",Vp="prevent-frozen-scroll-refresh",Gp="refresh-infinite-current-view-data",Rl="filter-dialog-close",Ls="refresh-cutsom-filter-ok-button",Wp="refresh-cutsom-filter-clear-button",_p="render-responsive-cmenu",Up="filter-cmenu-select",jp="custom-filter-close",Kp="set-fullscreen-dialog",El="refresh-Expand-and-Collapse",Qp="row-mode-change",en="enter-key-handler",Yp="set-virtual-page-query",ya="pager-refresh",Xp="close-edit",Jp="reset-virtual-focus",$p="before-checkbox-renderer-query",Zp="destroy-child-grid",ec="sticky-scroll-complete",Sa="refresh-infinite-persist-selection",tc="after-filter-column-menu-close",ic="beforeCheckboxfilterRenderer",rc="commandColumnDestroy",nc="cancelcnfrmDlg",vn="refresh-Frozen-Position",sc="refresh-Resize-Position",Fs="refresh-Split-Frozen-Column",Vr="render-Responsive-Change-Action",ns="render-Responsive-Column-Chooser-Div",Yi="show-Add-New-Row-Focus",oc="last-rowcell-border-updated",Al="destroy-edit-form",ac="detach-detail-template",re;(function(o){o[o.Data=0]="Data",o[o.Header=1]="Header",o[o.Summary=2]="Summary",o[o.GroupSummary=3]="GroupSummary",o[o.CaptionSummary=4]="CaptionSummary",o[o.Filter=5]="Filter",o[o.Indent=6]="Indent",o[o.GroupCaption=7]="GroupCaption",o[o.GroupCaptionEmpty=8]="GroupCaptionEmpty",o[o.Expand=9]="Expand",o[o.HeaderIndent=10]="HeaderIndent",o[o.StackedHeader=11]="StackedHeader",o[o.DetailHeader=12]="DetailHeader",o[o.DetailExpand=13]="DetailExpand",o[o.CommandColumn=14]="CommandColumn",o[o.DetailFooterIntent=15]="DetailFooterIntent",o[o.RowDragIcon=16]="RowDragIcon",o[o.RowDragHIcon=17]="RowDragHIcon"})(re||(re={}));var Ft;(function(o){o[o.Header=0]="Header",o[o.Content=1]="Content",o[o.Summary=2]="Summary"})(Ft||(Ft={}));var Ca;(function(o){o[o.Add=0]="Add",o[o.Edit=1]="Edit",o[o.Update=2]="Update",o[o.Delete=3]="Delete",o[o.Cancel=4]="Cancel",o[o.Print=5]="Print",o[o.Search=6]="Search",o[o.ColumnChooser=7]="ColumnChooser",o[o.PdfExport=8]="PdfExport",o[o.ExcelExport=9]="ExcelExport",o[o.CsvExport=10]="CsvExport",o[o.WordExport=11]="WordExport"})(Ca||(Ca={}));var ue;(function(o){o[o.isEdit=0]="isEdit",o[o.isAdd=1]="isAdd",o[o.isSort=2]="isSort",o[o.isFilter=3]="isFilter",o[o.isColMenu=4]="isColMenu",o[o.isColumnChooser=5]="isColumnChooser"})(ue||(ue={}));var ba;(function(o){o[o.isInitial=0]="isInitial",o[o.isSearch=1]="isSearch"})(ba||(ba={}));var lc=function(){function o(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),!(this.parent.isDestroyed||this.getModuleName()==="foreignKey")&&(this.parent.on(aa,this.addRows,this),this.parent.on(mp,this.reorderRows,this),this.parent.on(Cs,this.removeRows,this),this.parent.on(bs,this.initDataManager,this),this.parent.on(ti,this.destroy,this),this.parent.on(Is,this.crudActions,this),this.parent.on(la,this.getData,this),this.parent.on(Sr,this.refreshFilteredCols,this),this.parent.on(As,this.refreshFilteredCols,this))}return o.prototype.reorderRows=function(e){this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords().splice(e.toIndex,0,this.parent.getCurrentViewRecords().splice(e.fromIndex,1)[0]):this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},o.prototype.getModuleName=function(){return"data"},o.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof _?e.dataSource:u(e.dataSource)?new _:new _(e.dataSource),e.isAngular&&!(e.query instanceof ae)?e.setProperties({query:new ae},!0):(this.isQueryInvokedFromData=!0,e.query instanceof ae||(e.query=new ae))},o.prototype.generateQuery=function(e,t){var i=this.parent,r=u(i.getQuery())?new ae:i.getQuery().clone();if(this.parent.columnQueryMode==="ExcludeHidden")r.select(this.parent.getColumns().filter(function(l){return!(l.isPrimaryKey!==!0&&l.visible===!1||l.field===void 0)}).map(function(l){return l.field}));else if(this.parent.columnQueryMode==="Schema"){for(var n=[],s=this.parent.columns,a=0;a<s.length;a++)n.push(s[parseInt(a.toString(),10)].field);r.select(n)}return this.filterQuery(r),this.searchQuery(r),this.aggregateQuery(r),this.sortQuery(r),$t(this.parent)?this.virtualGroupPageQuery(r):this.pageQuery(r,e),(u(t)||!t)&&this.groupQuery(r),r},o.prototype.aggregateQuery=function(e){for(var t=this.parent.aggregates,i=0;i<t.length;i++)for(var r=t[parseInt(i.toString(),10)],n=0;n<r.columns.length;n++)for(var s=r.columns[parseInt(n.toString(),10)],a=s.type instanceof Array?s.type:[s.type],l=0;l<a.length;l++)e.aggregate(a[parseInt(l.toString(),10)].toLowerCase(),s.field);return e},o.prototype.virtualGroupPageQuery=function(e){var t="fn";if(e.queries.length)for(var i=0;i<e.queries.length;i++)e.queries[parseInt(i.toString(),10)][""+t]==="onPage"&&e.queries.splice(i,1);return e},o.prototype.pageQuery=function(e,t){var i=this.parent,r="fn",n={query:e,skipPage:!1};if(i.notify(Yp,n),n.skipPage)return e;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&t!==!0){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(var s=0;s<e.queries.length;s++)e.queries[parseInt(s.toString(),10)][""+r]==="onPage"&&e.queries.splice(s,1);!u(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify(Tp,e):e.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!i.isManualRefresh&&!this.dataManager.dataSource.offline&&!(this.dataManager.adaptor instanceof Na)?null:i.pageSettings.pageSize)}return e},o.prototype.groupQuery=function(e){var t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=t.groupSettings.columns,r=0,n=i.length;r<n;r++){var s=this.getColumnByField(i[parseInt(r.toString(),10)]);s||this.parent.log("initial_action",{moduleName:"group",columnName:i[parseInt(r.toString(),10)]});var a=s.enableGroupByFormat,l=s.format;a?e.group(i[parseInt(r.toString(),10)],this.formatGroupColumn.bind(this),l):e.group(i[parseInt(r.toString(),10)],null)}}return e},o.prototype.sortQuery=function(e){var t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){for(var i=t.sortSettings.columns,r=[],n=i.length-1;n>-1;n--){var s=this.getColumnByField(i[parseInt(n.toString(),10)].field);if(s)s.setSortDirection(i[parseInt(n.toString(),10)].direction);else return this.parent.log("initial_action",{moduleName:"sort",columnName:i[parseInt(n.toString(),10)].field}),e;var a=i[parseInt(n.toString(),10)].direction;s.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?i[parseInt(n.toString(),10)].direction:s.sortComparer.bind(s)),t.groupSettings.columns.indexOf(i[parseInt(n.toString(),10)].field)===-1?s.isForeignColumn()||s.sortComparer?e.sortByForeignKey(s.field,a,void 0,i[parseInt(n.toString(),10)].direction.toLowerCase()):e.sortBy(s.field,a):r.push({direction:a,field:s.field})}for(var n=0,l=r.length;n<l;n++)if(typeof r[parseInt(n.toString(),10)].direction=="string")e.sortBy(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction);else{var s=this.getColumnByField(r[parseInt(n.toString(),10)].field);e.sortByForeignKey(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction,void 0,s.getSortDirection().toLowerCase())}}return e},o.prototype.searchQuery=function(e,t,i){var r=this.parent.searchSettings,n=!u(r.fields)&&r.fields.length?r.fields:this.getSearchColumnFieldNames(),s=[],a=!1;if(!u(this.parent.searchSettings.key)&&this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(function(d){return n.indexOf(d.field)>-1});var l=i?t.dataSource.adaptor:this.dataManager.adaptor;if(a||l.getModuleName&&l.getModuleName()==="ODataV4Adaptor"){n=i?[t.foreignKeyValue]:n;for(var h=0;h<n.length;h++){var p=i?t:this.getColumnByField(n[parseInt(h.toString(),10)]);p.isForeignColumn()&&!i?s=this.fGeneratePredicate(p,s):s.push(new xe(n[parseInt(h.toString(),10)],r.operator,r.key,r.ignoreCase,r.ignoreAccent))}var c=xe.or(s);c.key=r.key,e.where(c)}else e.search(r.key,n,r.operator,r.ignoreCase,r.ignoreAccent)}return e},o.prototype.filterQuery=function(e,t,i){var r=this.parent,n=[],s=this.parent.getForeignKeyColumns(),a;if(r.allowFiltering&&r.filterSettings.columns.length){for(var l=t||r.filterSettings.columns,h={},p=0,c=r.getColumns();p<c.length;p++){var d=c[p];h[d.field]=d.filter.type?d.filter.type:r.filterSettings.type}for(var f=[],g=[],m=0,v=l;m<v.length;m++){var d=v[m],y=d.isForeignKey?r.getColumnByUid(d.uid):r.getColumnByField(d.field);u(d.type)&&y&&(y.type==="date"||y.type==="datetime"||y.type==="dateonly")&&(d.type=d.isForeignKey?r.getColumnByUid(d.uid).type:r.getColumnByField(d.field).type),d.isForeignKey?f.push(d):g.push(d)}if(g.length){for(var R=0,b=g.length;R<b;R++)g[parseInt(R.toString(),10)].uid=g[parseInt(R.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(g[parseInt(R.toString(),10)].field,g[parseInt(R.toString(),10)].isForeignKey).uid;for(var E=Ta.getPredicate(g),k=0,F=Object.keys(E);k<F.length;k++){var W=F[k];n.push(E[""+W])}}if(f.length)for(var te=0,ne=f;te<ne.length;te++){var d=ne[te];d.uid=d.uid||this.parent.grabColumnByFieldFromAllCols(d.field,d.isForeignKey).uid;var ye=this.parent.grabColumnByUidFromAllCols(d.uid);if(ye||this.parent.log("initial_action",{moduleName:"filter",columnName:d.field}),ye.isForeignColumn()&&ao(d.field,s)&&!i)ye.columnData.length||(a=!0),n=this.fGeneratePredicate(ye,n);else for(var E=Ta.getPredicate(l),L=0,P=Object.keys(E);L<P.length;L++){var W=P[L];n.push(E[""+W])}}n.length&&!a?e.where(xe.and(n)):this.parent.notify(Cl,{})}return e},o.prototype.fGeneratePredicate=function(e,t){var i={};return e&&(this.parent.notify(Zr,{predicate:i,column:e}),i.predicate.predicates.length&&t.push(i.predicate)),t},o.prototype.getData=function(e,t){var i=this;e===void 0&&(e={requestType:""});var r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource){var n=this.eventPromise(e,t,r);return n.promise}else{var s=void 0;switch(e.requestType){case"delete":t=t||this.generateQuery();var a=Object.keys(e.data).length;if(a===1)s=this.dataManager.remove(r,e.data[0],t.fromTable,t);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=e.data,s=this.dataManager.saveChanges(l,r,t.fromTable,t.requiresCount())}break;case"save":t=t||this.generateQuery(),e.index=u(e.index)?0:e.index,s=this.dataManager.insert(e.data,t.fromTable,t,e.index);break}var h="promise";return e[""+h]=s,s&&!Array.isArray(s)&&!s.hasOwnProperty("deletedRecords")?s.then(function(){return i.insert(t,e)}):this.insert(t,e)}},o.prototype.insert=function(e,t){return t.requestType==="save"&&(t.query=e,this.parent.notify(ca,t)),this.executeQuery(e)},o.prototype.executeQuery=function(e){var t=this;if(this.dataManager.ready){var i=new pt,r=this.dataManager.ready;return r.then(function(){t.dataManager.executeQuery(e).then(function(n){i.resolve(n)})}).catch(function(n){i.reject(n)}),i.promise}else return this.dataManager.executeQuery(e)},o.prototype.formatGroupColumn=function(e,t){var i=this.serviceLocator,r=this.getColumnByField(t),n=e;r.type||(r.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof e),u(r.getFormatter())&&Os(i,r);var s=Lr.prototype.toView(e,r.getFormatter());return s},o.prototype.crudActions=function(e){var t=this.generateQuery(),i=null,r="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,n),e.requestType){case"save":i=this.dataManager.update(n,e.data,t.fromTable,t,e.previousData);break}e[""+r]=i||e[""+r],this.parent.notify(ap,e)},o.prototype.saveChanges=function(e,t,i,r){if(r===void 0&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){var n=new pt,s={requestType:"batchsave",changes:e,key:t,query:r,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger(ua,s),n.promise}else{var a=this.dataManager.saveChanges(e,t,r.fromTable,r,i);return a}},o.prototype.getKey=function(e){if(e&&e.length)return e[0]},o.prototype.isRemote=function(){return this.dataManager.dataSource.offline!==!0&&this.dataManager.dataSource.url!==void 0&&this.dataManager.dataSource.url!==""},o.prototype.addRows=function(e){for(var t=e.records.length;t>0;t--)this.parent.dataSource instanceof _&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1]):!this.parent.getDataModule().isRemote()&&!u(this.parent.dataSource)&&!this.parent.dataSource.result&&this.parent.dataSource.splice(e.toIndex,0,e.records[t-1])},o.prototype.removeRows=function(e){var t=this.dataManager.dataSource.json;this.parent.dataSource instanceof _&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=t.filter(function(i){return e.records.indexOf(i)===-1}):!this.parent.getDataModule().isRemote()&&!u(this.parent.dataSource)&&!this.parent.dataSource.result&&(this.parent.dataSource=t.filter(function(i){return e.records.indexOf(i)===-1}))},o.prototype.getColumnByField=function(e){var t;return this.parent.columnModel.some(function(i){return t=i,i.field===e})&&t},o.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(aa,this.addRows),this.parent.off(Cs,this.removeRows),this.parent.off(bs,this.initDataManager),this.parent.off(ti,this.destroy),this.parent.off(Is,this.crudActions),this.parent.off(la,this.getData),this.parent.off(Sr,this.refreshFilteredCols),this.parent.off(As,this.refreshFilteredCols))},o.prototype.getState=function(){return this.dataState},o.prototype.setState=function(e){return this.dataState=e},o.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},o.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},o.prototype.getStateEventArgument=function(e){var t=new zt,i=new _({url:"",adaptor:new zt}),r=t.processQuery(i,e),n=JSON.parse(r.data);return Q(n,r.pvtData)},o.prototype.eventPromise=function(e,t,i){var r=this,n=e,s=this.getStateEventArgument(t),a=new pt,l=new pt;if((e.requestType!==void 0||this.parent.groupSettings.disablePageWiseAggregates&&t.queries.some(function(c){return c.fn==="onGroup"}))&&this.dataState.isDataChanged!==!1)if(s.action=e,e.requestType==="save"||e.requestType==="delete"||e.requestType==="batchsave"){var h=e;h.key=i;var p="promise";h[""+p]=l.promise,h.state=s,this.setState({isPending:!0,resolver:l.resolve}),n.endEdit=l.resolve,n.cancelEdit=l.reject,this.parent.trigger(ua,h),l.promise.then(function(){r.setState({isPending:!0,resolver:a.resolve,group:s.group,aggregates:s.aggregates}),h.requestType==="save"&&r.parent.notify(ca,h),r.parent.trigger(Rs,s)}).catch(function(){})}else this.setState({isPending:!0,resolver:a.resolve,group:s.group,aggregates:s.aggregates}),this.parent.trigger(Rs,s);else this.setState({}),a.resolve(this.parent.dataSource);return a},o.prototype.getSearchColumnFieldNames=function(){for(var e=[],t=this.parent.getColumns(),i=0,r=t;i<r.length;i++){var n=r[i];n.allowSearching&&!u(n.field)&&e.push(n.field)}return e},o.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&Dd(this.parent,this.parent.filterSettings.columns)},o}(),ir=function(){function o(e,t){fi(this,e),this.parent=t}return o.prototype.clone=function(){var e=new o({});return fi(e,this),e.cells=this.cells.map(function(t){return t.clone()}),e},o.prototype.setRowValue=function(e){if(this.parent){var t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}},o.prototype.setCellValue=function(e,t){if(this.parent){var i=this.data[""+e].toString()!==t.toString();if(i){var r=this.parent.getPrimaryKeyFieldNames()[0],n=this.data[""+r];this.parent.setCellValue(n,e,t),this.makechanges(r,this.data)}else return}},o.prototype.makechanges=function(e,t){if(this.parent){var i=this.parent,r=i.getDataModule().dataManager;r.update(e,t)}},o}(),Cr=function(){function o(e){this.isSpanned=!1,this.isRowSpanned=!1,fi(this,e)}return o.prototype.clone=function(){var e=new o({});return fi(e,this),e},o}(),ks=function(){function o(e,t){this.serviceLocator=e,this.parent=t}return o.prototype.render=function(e,t,i,r){var n=this.serviceLocator.getService("cellRendererFactory"),s=n.getCellRenderer(t.cells[parseInt(i.toString(),10)].cellType||re.Data),a=t.cells[parseInt(i.toString(),10)].cellSpan?t.cells[parseInt(i.toString(),10)].cellSpan:e.colSpan?e.colSpan+i<=t.cells.length?e.colSpan:t.cells.length-i:1,l=e.rowSpan,h=0,p;if(t.index>0){var c=this.parent.getRowsObject(),d=this.parent.groupSettings.columns.length>0&&!c[t.index-1].isDataRow?c[t.index].cells:c[t.index-1].cells,f=t.cells[parseInt(i.toString(),10)],g="uid";p=d.filter(function(y){return y.column.uid===f.column[""+g]})[0]}for(var m=p&&p.colSpanRange>1&&p.rowSpanRange>1?p.colSpanRange:a,v=i+1;v<i+m&&v<t.cells.length;v++)t.cells[parseInt(v.toString(),10)].visible===!1?h++:t.cells[parseInt(v.toString(),10)].isSpanned=!0;if(h>0){for(var v=i+a;v<i+a+h&&v<t.cells.length;v++)t.cells[parseInt(v.toString(),10)].isSpanned=!0;i+a+h>=t.cells.length&&(a-=i+a+h-t.cells.length)}return t.cells[parseInt(i.toString(),10)].cellSpan&&(t.data[e.column.field]=t.cells[parseInt(i.toString(),10)].spanText,r=s.render(t.cells[parseInt(i.toString(),10)],t.data,{index:u(t.index)?"":t.index.toString()})),a>1&&de(r,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(de(r,{rowspan:l.toString(),"aria-rowspan":l.toString()}),t.cells[parseInt(i.toString(),10)].isRowSpanned=!0,t.cells[parseInt(i.toString(),10)].rowSpanRange=Number(l),a>1&&(t.cells[parseInt(i.toString(),10)].colSpanRange=Number(a))),t.index>0&&p.rowSpanRange>1&&(t.cells[parseInt(i.toString(),10)].isSpanned=!0,t.cells[parseInt(i.toString(),10)].rowSpanRange=Number(p.rowSpanRange-1),t.cells[parseInt(i.toString(),10)].colSpanRange=p.rowSpanRange>0?p.colSpanRange:1),this.parent.enableColumnVirtualization&&!t.cells[parseInt(i.toString(),10)].cellSpan&&!this.containsKey(e.column.field,e.data[e.column.field])&&this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),r},o.prototype.backupMergeCells=function(e,t,i){this.setMergeCells(this.generteKey(e,t),i)},o.prototype.generteKey=function(e,t){return e+"__"+t.toString()},o.prototype.splitKey=function(e){return e.split("__")},o.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},o.prototype.getMergeCells=function(){return this.parent.mergeCells},o.prototype.setMergeCells=function(e,t){this.parent.mergeCells[""+e]=t},o.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),i=0,r=Object.keys(t);i<r.length;i++){var n=r[i],s=t[""+n],a=this.splitKey(n),l=this.getIndexFromAllColumns(a[0]),h=this.parent.getColumnIndexesInView(),p=s-(h[0]-l);if(l<h[0]&&p>1)for(var c=0,d=e;c<d.length;c++){var f=d[c];if(f.data[a[0]].toString()===a[1].toString()){f.cells[0].cellSpan=p,f.cells[0].spanText=a[1];break}}}return e},o.prototype.getIndexFromAllColumns=function(e){var t=qi(this.parent.getVisibleColumns(),function(i,r){if(i.field===e)return r})[0];return t},o}(),Le="e-rowcell",Bt="e-gridheader",yi="e-gridcontent",tn="e-gridfooter",st="e-headercontent",Gr="e-movablecontent",Ds="e-movableheader",ot="e-content",di="e-table",ut="e-row",Xi="e-gridchkbox",dr="e-editedrow",Ji="e-addedrow",hc="changedRecords",yn="addedRecords",Tl="deletedRecords",qt="Left-Right",uc="frozen-right",je="aria-colindex",He="aria-rowindex",Fe="tbody",Ot="colgroup",wa="created",Ia="initialFrozenColumnIndex",br=function(){function o(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return o.prototype.render=function(e,t,i,r,n){return this.refreshRow(e,t,i,r,n)},o.prototype.refresh=function(e,t,i,r,n){var s=this;i&&(e.data=lo({},e.changes),this.refreshMergeCells(e));var a=this.parent.element.querySelector("[data-uid="+e.uid+"]"),l=this.refreshRow(e,t,r,n,null,i),h=[].slice.call(l.cells),p=[].slice.call(a.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&p.length)for(var c=function(E){if(E.template)return setTimeout(function(){s.parent.refreshReactColumnTemplateByUid(E.uid,!0)},0),"break"},d=0,f=t;d<f.length;d++){var g=f[d],m=c(g);if(m==="break")break}var v=[].slice.call(l.attributes);v.map(function(E){a.setAttribute(E.name,E.value)}),a.innerHTML="";for(var y=0,R=h;y<R.length;y++){var b=R[y];a.appendChild(b)}},o.prototype.refreshRow=function(e,t,i,r,n,s){var a=u(n)?this.element.cloneNode():n,l={data:e.data},h={data:e.data},p=this.parent.getColumns().filter(function(se){return se.type==="checkbox"&&se.field})[0],c=!1,d=this.parent.isFrozenGrid(),f=!0;p&&(c=Si(p.field,l.data));var g=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=g.indexOf(e.index)>-1||c),e.isDataRow&&this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(e.isSelected=!0,g.indexOf(e.index)===-1&&g.push(e.index)),this.buildAttributeFromRow(a,e),de(a,Q({},i,{})),Yt(a,e.attributes);for(var m=this.serviceLocator.getService("cellRendererFactory"),v=function(se,ie){var ee=e.cells[parseInt(se.toString(),10)];ee.isSelected=e.isSelected,ee.isColumnSelected=ee.column.isSelected;var it=m.getCellRenderer(e.cells[parseInt(se.toString(),10)].cellType||re.Data),ze={index:u(e.index)?"":e.index.toString()};e.isExpand&&e.cells[parseInt(se.toString(),10)].cellType===re.DetailExpand&&(ze.class=y.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var Ne=!y.parent.enableRtl&&y.parent.groupSettings&&f&&y.parent.groupSettings.columns.length&&(y.parent.gridLines==="Vertical"||y.parent.gridLines==="Both"),Ee=it.render(e.cells[parseInt(se.toString(),10)],e.data,ze,e.isExpand,s);if(e.cells[parseInt(se.toString(),10)].cellType!==re.Filter){if(e.cells[parseInt(se.toString(),10)].cellType===re.Data||e.cells[parseInt(se.toString(),10)].cellType===re.CommandColumn){ee.visible&&Ne&&(Ee.classList.add("e-grid-group-first-cell"),f=!1);var Ce=y.parent.parentDetails&&y.parent.parentDetails.parentInstObj&&y.parent.parentDetails.parentInstObj.isReact,ni=y.parent.printGridParent&&y.parent.printGridParent.isReact;if((y.parent.isReact&&y.parent.requireTemplateRef||Ce&&y.parent.parentDetails.parentInstObj.requireTemplateRef||ni&&y.parent.printGridParent.requireTemplateRef)&&ee.isTemplate){var wt=y;wt.parent.renderTemplates(function(){if(typeof ee.column.template!="string"){var yt=Ee.getAttribute("aria-label");Ee.setAttribute("aria-label",Ee.innerText+yt)}wt.parent.trigger(fs,Q(h,{cell:Ee,column:ee.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt(se.toString(),10)].foreignKeyData,requestType:wt.parent.requestTypeAction}))})}else y.parent.trigger(fs,Q(h,{cell:Ee,column:ee.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt(se.toString(),10)].foreignKeyData,requestType:y.parent.requestTypeAction}));var It=!1;if(e.index>0&&(y.isSpan||y.parent.isSpan&&s)){var vt=y.parent.getRowsObject(),Ke=y.parent.groupSettings.columns.length>0&&!vt[e.index-1].isDataRow?vt[e.index].cells:vt[e.index-1].cells,rr="uid",ft=Ke.filter(function(yt){return yt.column.uid===e.cells[parseInt(se.toString(),10)].column[""+rr]})[0];It=ft.isRowSpanned?ft.isRowSpanned:ft.rowSpanRange>1}if(h.rowSpan>1||h.colSpan>1){if(y.resetrowSpanvalue(y.parent.frozenRows>e.index?y.parent.frozenRows:y.parent.currentViewData.length,h,e.index),h.column.visible===!1)h.colSpan=1;else if(d){var at=y.parent.getColumns(),Dt=y.parent.getFrozenRightColumnsCount(),Ci=y.parent.getFrozenLeftCount(),bi=at.length-Dt,$e=h.column.index;if(Ci>$e&&Ci<$e+h.colSpan){var jt=$e+h.colSpan-Ci;h.colSpan=h.colSpan-jt}else if(bi<=$e&&at.length<$e+h.colSpan){var jt=$e+h.colSpan-at.length;h.colSpan=h.colSpan-jt}else if(h.column.freeze==="Fixed"){for(var jt=1,Fr=$e,S=Fr+1;S<Fr+h.colSpan&&at[parseInt(S.toString(),10)].freeze==="Fixed";S++)jt++;h.colSpan=jt}else if(bi>$e&&bi<$e+h.colSpan){var jt=$e+h.colSpan-bi;h.colSpan=h.colSpan-jt}}}if(h.colSpan>1||e.cells[parseInt(se.toString(),10)].cellSpan>1||h.rowSpan>1||It){y.parent.isSpan=!0,y.isSpan=!0;var I=new ks(y.serviceLocator,y.parent);Ee=I.render(h,e,se,Ee),d&&qd(y.parent,h.column,Ee,h.colSpan)}}if((ee.cellType===re.Header||ee.cellType===re.StackedHeader)&&Ne&&(ee.visible||ee.cellType===re.StackedHeader)){var M=y.parent.getVisibleColumns(),q="field",U="type";(ee.column[""+U]&&ee.column[""+U]==="checkbox"||ee.cellType===re.Header&&ee.column[""+q]&&M.length&&M[0].field===ee.column[""+q]||ee.cellType===re.StackedHeader)&&(Ee.classList.add("e-grid-group-first-cell"),f=!1)}if(ee.cellType===re.Header&&(e.cells[parseInt(se.toString(),10)].colSpan>1||e.cells[parseInt(se.toString(),10)].rowSpan>1)){var I=new ks(y.serviceLocator,y.parent);Ee=I.render(e.cells[parseInt(se.toString(),10)],e,se,Ee)}if(y.isSpan){var vt=y.parent.getRowsObject(),j=y.parent.enableRtl;if(vt[e.index-1]){var Ke=vt[e.index-1].cells,ft=Ke[se-1],be=Ke[parseInt(se.toString(),10)],Ge=Ke[se+1],We=Ke[parseInt(se.toString(),10)].column.freeze;ft&&(ft.isRowSpanned||ft.rowSpanRange>1)&&ft.visible&&(!j&&(!be.isRowSpanned||ft.rowSpanRange>be.rowSpanRange)&&Ee.classList.add("e-rowcell-firstchild"),d&&(ft.column.freeze==="Fixed"&&We==="Fixed"?Ee.classList.add(j?"e-removefreezerightborder":"e-removefreezeleftborder"):!j&&se===1&&We==="Left"&&Ee.classList.add("e-addfreezefirstchildborder"))),Ge&&(Ge.isRowSpanned||Ge.rowSpanRange>1)&&Ge.visible&&(j&&(!be.isRowSpanned||Ge.rowSpanRange>be.rowSpanRange)&&Ee.classList.add("e-rowcell-lastchild"),d&&Ge.column.freeze==="Fixed"&&We==="Fixed"&&h.colSpan<2&&Ee.classList.add(j?"e-removefreezeleftborder":"e-removefreezerightborder"))}}h.rowSpan>1&&y.parent.currentViewData.length-e.index===h.rowSpan&&Ee.classList.add("e-row-span-lastrowcell"),e.cells[parseInt(se.toString(),10)].isSpanned||a.appendChild(Ee)}},y=this,R=0,b=e.cells.length;R<b;R++)v(R);var E=0;if(this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(a.classList.contains("e-groupcaptionrow")){var k=[].slice.call(a.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));if(k.length&&G(k,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),a.querySelector(".e-summarycell"))Md(a,this.parent);else{for(var F=0;F<a.childNodes.length;F++){var W=a.childNodes[parseInt(F.toString(),10)];if(W.classList.add("e-leftfreeze"),ct(W,F*30,this.parent.enableRtl,"Left"),W.classList.contains("e-groupcaption")){var te=parseInt(W.getAttribute("colspan"),10),ne=Gl(this.parent,F);W.setAttribute("colspan",ne.toString()),E=te-ne}}if(E){var W=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:E.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}});a.appendChild(W)}}}if((a.querySelectorAll(".e-leftfreeze").length||a.classList.contains("e-columnheader"))&&(a.querySelectorAll(".e-indentcell").length||a.querySelectorAll(".e-grouptopleftcell").length))for(var W=a.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),R=0;R<W.length;R++)W[parseInt(R.toString(),10)].classList.add("e-leftfreeze"),ct(W[parseInt(R.toString(),10)],R*30,this.parent.enableRtl,"Left")}var ye={row:a,rowHeight:this.parent.rowHeight};if(e.isDataRow){var L=Q(l,ye);L.isSelectable=!0;var P=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,D=L.row.querySelectorAll(".e-templatecell");if((this.parent.isReact&&this.parent.requireTemplateRef||P&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&D.length){var N=this;N.parent.renderTemplates(function(){N.parent.trigger(mn,L),L.isSelectable||(e.isSelectable=L.isSelectable,N.disableRowSelection(N,e,ye,L))})}else this.parent.trigger(mn,L);e.isSelectable=L.isSelectable;var $=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var V=this.parent.getPrimaryKeyFieldNames()[0],H=e.data?e.data[""+V]:null,z=L.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;z.some(function(se){return se[""+V]===H})||z.push(e.data)}if(L.isSelectable||this.disableRowSelection(this,e,ye,L),this.parent.childGrid||$||this.parent.detailTemplate){var W=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];W&&W.classList.add("e-detailrowvisible")}}this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),e.cssClass&&a.classList.add(e.cssClass),e.lazyLoadCssClass&&a.classList.add(e.lazyLoadCssClass),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both")&&a.classList.add("e-verticalwrap");var Z=this.parent.enableColumnVirtualization;if(!Z&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(var R=0;R<this.parent.aggregates.length;R++){var he="properties",Se="columns";if(this.parent.aggregates[parseInt(R.toString(),10)][""+he][""+Se][0].footerTemplate){var me=[].slice.call(a.getElementsByClassName("e-summarycell"));if(me.length){var ce=me[me.length-1];B([ce],["e-lastsummarycell"]);var ge=me[0];B([ge],["e-firstsummarycell"])}}}return a},o.prototype.resetrowSpanvalue=function(e,t,i){if(e>i&&e<i+t.rowSpan){var r=i+t.rowSpan-e;t.rowSpan=t.rowSpan-r}},o.prototype.disableRowSelection=function(e,t,i,r){var n=this.parent.getSelectedRowIndexes();this.parent.selectionModule.isPartialSelection=!0,t.isSelected=!1;var s=n.indexOf(t.index);s>-1&&n.splice(s,1);for(var a=i.row.querySelectorAll(".e-rowcell.e-gridchkbox"),l=r.row.querySelector(".e-rowdragdrop"),h=e.parent.groupSettings.columns.length+(l||e.parent.isDetail()?1:0),p=0;p<a.length;p++)a[parseInt(p.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),a[parseInt(p.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(t.cells.length)for(var p=h;p<t.cells.length;p++){var c=r.row.querySelector('.e-rowcell[aria-colindex="'+(t.cells[parseInt(p.toString(),10)].index+1)+'"]');c&&G([c],["e-selectionbackground","e-active"])}l&&G([l],["e-selectionbackground","e-active"])},o.prototype.refreshMergeCells=function(e){for(var t=0,i=e.cells;t<i.length;t++){var r=i[t];r.isSpanned=!1}return e},o.prototype.buildAttributeFromRow=function(e,t){var i={},r={dataUID:"data-uid",ariaSelected:"aria-selected"},n=[];t.isDataRow&&n.push(ut),t.isAltRow&&n.push("e-altrow"),t.isCaptionRow&&n.push("e-groupcaptionrow"),t.isAggregateRow&&t.parentUid&&n.push("e-groupfooterrow"),u(t.index)||(i[He]=t.index+1),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i[r.dataUID]=t.uid),t.isSelected&&(i[r.ariaSelected]=!0),t.visible===!1&&n.push("e-hide"),i.class=n,Yt(e,i)},o}(),Rn=function(){function o(e){this.parent=e}return o.prototype.generateRows=function(e,t){var i=[],r=this.parent.enableVirtualization&&t?t.startIndex:0;r=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):r,this.parent.enableImmutableMode&&t&&t.startIndex&&(r=t.startIndex);for(var n=0,s=Object.keys(e).length;n<s;n++,r++)i[parseInt(n.toString(),10)]=this.generateRow(e[parseInt(n.toString(),10)],r);return i},o.prototype.ensureColumns=function(){var e=[];if(this.parent.detailTemplate||this.parent.childGrid){var t={};this.parent.notify(xl,t),e.push(this.generateCell(t,null,re.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,re.RowDragIcon)),e},o.prototype.generateRow=function(e,t,i,r,n,s,a){var l={};l.foreignKeyData={},l.uid=Ei("grid-row"),l.data=e,l.index=t,l.indent=r,l.tIndex=s,l.isDataRow=!0,l.parentGid=n,l.parentUid=a,this.parent.isPrinting&&(this.parent.hierarchyPrintMode==="All"?l.isExpand=!0:this.parent.hierarchyPrintMode==="Expanded"&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(t.toString(),10)]&&(l.isExpand=this.parent.expandedRows[parseInt(t.toString(),10)].isExpand)),l.cssClass=i,l.isAltRow=this.parent.enableAltRow?t%2!==0:!1,l.isAltRow=this.parent.enableAltRow?t%2!==0:!1,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),p=new ir(l,this.parent);return p.cells=this.parent.getFrozenMode()==="Right"?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),p},o.prototype.refreshForeignKeyRow=function(e){for(var t=this.parent.getForeignKeyColumns(),i=0;i<t.length;i++)mi(t[parseInt(i.toString(),10)].field,Gi(t[parseInt(i.toString(),10)],e.data),e.foreignKeyData)},o.prototype.generateCells=function(e){for(var t=this.parent.getColumns(),i=[],r=0;r<t.length;r++)i.push(this.generateCell(t[parseInt(r.toString(),10)],e.uid,u(t[parseInt(r.toString(),10)].commands)?void 0:re.CommandColumn,null,r,e.foreignKeyData));return i},o.prototype.generateCell=function(e,t,i,r,n,s){var a={visible:e.visible,isDataCell:!u(e.field||e.template),isTemplate:!u(e.template),rowID:t,column:e,cellType:u(i)?re.Data:i,colSpan:r,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&oe(e.field,s)};return(a.isDataCell||a.column.type==="checkbox"||a.commands)&&(a.index=n),new Cr(a)},o.prototype.refreshRows=function(e){for(var t=0;t<e.length;t++)this.refreshForeignKeyRow(e[parseInt(t.toString(),10)]),e[parseInt(t.toString(),10)].cells=this.generateCells(e[parseInt(t.toString(),10)]);return e},o.prototype.getInfiniteIndex=function(e){return e.requestType==="infiniteScroll"||e.requestType==="delete"||e.action==="add"?u(e.startIndex)?e.index:e.startIndex:0},o}(),Ll=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fl=function(){function o(e){this.parent=e}return o.prototype.getData=function(){for(var e=this,t=[],i=this.parent.aggregates.slice(),r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)].columns.filter(function(s){return!(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate)||e.columnSelector(s)});n.length&&t.push({columns:n})}return t},o.prototype.columnSelector=function(e){return e.footerTemplate!==void 0},o.prototype.getColumns=function(e){var t=[];if((this.parent.detailTemplate||!u(this.parent.childGrid))&&t.push(new tt({})),this.parent.allowGrouping)for(var i=0;i<this.parent.groupSettings.columns.length;i++)t.push(new tt({}));return this.parent.isRowDragable()&&!e&&t.push(new tt({})),t.push.apply(t,this.parent.getColumns()),t},o.prototype.generateRows=function(e,t,i,r,n){if(e.length===0&&(t===void 0||!(t.count||t.loadSummaryOnEmpty)))return[];for(var s=this.buildSummaryData(e,t),a=[],l=this.getData(),h=0;h<l.length;h++)a.push(this.getGeneratedRow(l[parseInt(h.toString(),10)],s[parseInt(h.toString(),10)],t?t.level:void 0,i,r,t?t.parentUid:void 0,n));return a},o.prototype.getGeneratedRow=function(e,t,i,r,n,s,a){var l=[],h=this.getIndentByLevel(),p=!u(this.parent.childGrid),c=this.parent.getIndentCount();this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?h.push("e-indentcelltop"):this.parent.isRowDragable()&&!r&&(h=["e-indentcelltop"]);for(var d=a||this.getColumns(r),f=0;f<d.length;f++)l.push(this.getGeneratedCell(d[parseInt(f.toString(),10)],e,f>=c?this.getCellType():f===0&&this.parent.childGrid?re.DetailFooterIntent:re.Indent,h[parseInt(f.toString(),10)],p));var g=new ir({data:t,attributes:{class:"e-summaryrow"}});return g.cells=l,g.uid=Ei("grid-row"),g.parentUid=s,g.isAggregateRow=!0,g.visible=l.some(function(m){return m.isDataCell&&m.visible}),g},o.prototype.getGeneratedCell=function(e,t,i,r,n){var s=t.columns.filter(function(p){return p.columnName===e.field})[0],a={"e-mappinguid":e.uid,index:e.index};if(e.textAlign){var l={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};l[e.textAlign.toLowerCase()]&&(a.class=l[e.textAlign.toLowerCase()])}r&&(a.class=r),u(r)&&n&&(a.class="e-detailindentcelltop");var h={visible:e.visible,isDataCell:!u(s),isTemplate:s&&!u(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate),column:s||{},attributes:a,cellType:i};return h.column.headerText=e.headerText,new Cr(h)},o.prototype.buildSummaryData=function(e,t){for(var i=[],r=this.getData(),n={},s=0;s<r.length;s++){n={};for(var a=r[parseInt(s.toString(),10)].columns,l=0;l<a.length;l++)n=this.setTemplate(a[parseInt(l.toString(),10)],t&&t.aggregates?t:e,n);i.push(n)}return i},o.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},o.prototype.setTemplate=function(e,t,i){var r=e.type,n={},s=e.getFormatter()||function(){return function(f){return f}}(),a=t;r instanceof Array||(r=[e.type]);for(var l=0;l<r.length;l++){var h=e.field+" - "+r[parseInt(l.toString(),10)].toLowerCase(),p=e.columnName,c=!!(this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&a.items),d=(r[parseInt(l.toString(),10)]!=="Custom"||c)&&a.aggregates&&h in a.aggregates?a.aggregates[""+h]:xd(r[parseInt(l.toString(),10)],a.aggregates?a:t,e,this.parent);i[""+p]=i[""+p]||{},i[""+p][""+h]=d,i[""+p][r[parseInt(l.toString(),10)]]=u(d)?" ":s(d),a.field&&(i[""+p].field=a.field,i[""+p].key=a.key)}return n.format=e.getFormatter(),e.setTemplate(n),i},o.prototype.getCellType=function(){return re.Summary},o}(),pc=function(o){Ll(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.columnSelector=function(t){return t.groupFooterTemplate!==void 0},e.prototype.getIndentByLevel=function(t){return t===void 0&&(t=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&(t-=1),this.parent.groupSettings.columns.map(function(i,r){return r<=t-1?"":"e-indentcelltop"})},e.prototype.getCellType=function(){return re.GroupSummary},e}(Fl),cc=function(o){Ll(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.columnSelector=function(t){return t.groupCaptionTemplate!==void 0},e.prototype.getData=function(){var t={columns:[]};return[o.prototype.getData.call(this).reduce(function(i,r){return i.columns=i.columns.concat(r.columns),i},t)]},e.prototype.isEmpty=function(){return(this.getData()[0].columns||[]).length===0},e.prototype.getCellType=function(){return re.CaptionSummary},e}(Fl),dc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),fc=function(o){dc(e,o);function e(t){var i=o.call(this,t)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=t,i.summaryModelGen=new pc(t),i.captionModelGen=new cc(t),i}return e.prototype.generateRows=function(t,i){if(this.parent.groupSettings.columns.length===0)return o.prototype.generateRows.call(this,t,i);this.isInfiniteScroll=i.requestType==="infiniteScroll",this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var r=0,n=t.length;r<n;r++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,t[parseInt(r.toString(),10)],t.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},e.prototype.getGroupedRecords=function(t,i,r,n,s,a,l){var h,p=r;if(u(i.items))if(u(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,t,n,this.rows.length,l));else for(var c=0,d=i.length;c<d;c++)this.getGroupedRecords(t,i[parseInt(c.toString(),10)],i.level,n,t,this.rows.length,l);else{var f=void 0,g=this.generateCaptionRow(i,t,n,s,a,l);if(this.isInfiniteScroll&&(f=this.getPreCaption(t,g.data.key)),f?g.uid=f.uid:this.rows=this.rows.concat(g),i.items&&i.items.length&&this.getGroupedRecords(t+1,i.items,i.items.level,n,t+1,this.rows.length,g.uid),this.parent.aggregates.length&&this.isRenderAggregate(g)){var m=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(i,{level:p,parentUid:g.uid}));for(var v=m-1;v>=0;v--)if(this.rows[parseInt(v.toString(),10)].isCaptionRow)this.rows[parseInt(v.toString(),10)].aggregatesCount=this.rows.length-m;else if(!this.rows[parseInt(v.toString(),10)].isCaptionRow&&!this.rows[parseInt(v.toString(),10)].isDataRow)break}f&&this.setInfiniteRowVisibility(f)}},e.prototype.isRenderAggregate=function(t){return this.parent.enableInfiniteScrolling?this.renderInfiniteAgg?(this.getPreCaption(t.indent,t.data.key),this.renderInfiniteAgg=t.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!1:!this.parent.enableInfiniteScrolling},e.prototype.getPreCaption=function(t,i){var r=this.parent.getRowsObject().concat(this.rows),n;this.infiniteChildCount=0;for(var s=r.length;s--;){if(r[parseInt(s.toString(),10)].isCaptionRow&&r[parseInt(s.toString(),10)].indent===t){var a=r[parseInt(s.toString(),10)].data.key;(a&&a.toString()===i.toString()&&a instanceof Date||a===i)&&(n=r[parseInt(s.toString(),10)])}if(r[parseInt(s.toString(),10)].indent===t||r[parseInt(s.toString(),10)].indent<t)break;r[parseInt(s.toString(),10)].indent===t+1&&this.infiniteChildCount++}return n},e.prototype.getCaptionRowCells=function(t,i,r){var n=[],s=[],a=this.parent.getColumnByField(t),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(b){return b.field===t})[0]);var h=this.parent.groupSettings.columns.length,p=this.parent;if(!this.parent.enableColumnVirtualization||l.indexOf(i)!==-1){for(var c=0;c<i;c++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,re.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(p.detailTemplate||p.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var d=this.captionModelGen.generateRows(r)[0];Q(r,d.data);var f=0;d.cells.some(function(b,E){return f=E,b.visible&&b.isDataCell}),s=d.cells.slice(f).filter(function(b){return b.visible}),d.visible&&s[0].column.field===this.parent.getVisibleColumns()[0].field&&(s=s.slice(1)),this.parent.getVisibleColumns().length===1&&(s=[]),i=i-s.length}for(var g=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],m=!0,v=0;v<g.length;v++){var y=m&&l.indexOf(i)!==-1;y&&(m=!1);var R=!this.parent.enableColumnVirtualization||y?re.GroupCaption:re.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&R===re.GroupCaption?i+h:i,p.isRowDragable()&&i++,n.push(this.generateCell(a,null,R,i))}return n.push.apply(n,s),n},e.prototype.generateCaptionRow=function(t,i,r,n,s,a){var l={},h="records",p=this.parent.getColumnByField(t.field);l.data=Q({},t),p&&(l.data.field=t.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=r,l.childGid=n,l.tIndex=s,l.isCaptionRow=!0,l.parentUid=a,l.gSummary=u(t.items[""+h])?t.items.length:t.items[""+h].length,l.uid=Ei("grid-row");var c=new ir(l);return c.indent=i,this.getForeignKeyData(c),c.cells=this.getCaptionRowCells(t.field,i,c.data),c},e.prototype.getForeignKeyData=function(t){var i=t.data,r=this.parent.getColumnByField(i.field);if(r&&r.isForeignColumn&&r.isForeignColumn()){var n=u(i.key)?"":r.valueAccessor(r.foreignKeyValue,Gi(r,{},i.key)[0],r);mi("foreignKey",n,t.data)}},e.prototype.generateDataRows=function(t,i,r,n,s){for(var a=[],l=this.parent.getColumnIndexesInView(),h=0,p=t.length;h<p;h++,n++){a[parseInt(h.toString(),10)]=this.generateRow(t[parseInt(h.toString(),10)],this.index,h?void 0:"e-firstchildrow",i,r,n,s);for(var c=0;c<i;c++)this.parent.enableColumnVirtualization&&l.indexOf(i)===-1||a[parseInt(h.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return a},e.prototype.generateIndentCell=function(){return this.generateCell({},null,re.Indent)},e.prototype.refreshRows=function(t){for(var i=this.parent.getColumnIndexesInView(),r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)].isDataRow){t[parseInt(r.toString(),10)].cells=this.generateCells(t[parseInt(r.toString(),10)]);for(var n=0;n<t[parseInt(r.toString(),10)].indent;n++)this.parent.enableColumnVirtualization&&i.indexOf(t[parseInt(r.toString(),10)].indent)===-1||t[parseInt(r.toString(),10)].cells.unshift(this.generateIndentCell())}else{var s=this.generateCaptionRow(t[parseInt(r.toString(),10)].data,t[parseInt(r.toString(),10)].indent);t[parseInt(r.toString(),10)].cells=s.cells}return t},e.prototype.setInfiniteRowVisibility=function(t){if(!t.isExpand||t.visible===!1)for(var i=0,r=this.rows;i<r.length;i++){var n=r[i];n.parentUid===t.uid&&(n.visible=!1,n.isCaptionRow&&this.setInfiniteRowVisibility(n))}},e.prototype.ensureRowVisibility=function(){for(var t=0;t<this.rows.length;t++){var i=this.rows[parseInt(t.toString(),10)];if(i.isCaptionRow)for(var r=t+1;r<this.rows.length;r++){var n=this.rows[parseInt(r.toString(),10)];i.uid===n.parentUid&&(this.rows[parseInt(r.toString(),10)].visible=i.isExpand)}}},e}(Rn),gc=function(){function o(e,t){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.drop=function(r){i.parent.notify(Bu,{target:r.target,droppedElement:r.droppedElement}),fe(r.droppedElement)},this.infiniteCache={},this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.tempFreezeRows=[],this.rafCallback=function(r){var n=r;return function(){if(i.ariaService.setBusy(i.getPanel().querySelector("."+ot),!1),!i.parent.isDestroyed){var s=i.rows.slice(0);if(i.parent.enableInfiniteScrolling){if(i.parent.groupSettings.enableLazyLoading)for(var a=0;a<i.visibleRows.length;a++)i.setRowsInLazyGroup(i.visibleRows[parseInt(a.toString(),10)],a);s=i.parent.getRowsObject();var l=n.prevPage;if(i.parent.infiniteScrollSettings.enableCache&&l){var h=i.parent.infiniteScrollSettings.maxBlocks;s=[];for(var p=parseInt(i.rowElements[0].getAttribute("aria-rowindex"),10),c=Math.ceil(p/i.parent.pageSettings.pageSize),a=0,d=c;a<h;a++,d++)i.infiniteCache[parseInt(d.toString(),10)]&&(s=s.concat(i.infiniteCache[parseInt(d.toString(),10)]))}}if(i.parent.notify(Xe,{rows:s,args:n}),i.parent.editSettings.showAddNewRow&&i.parent.addNewRowFocus&&(i.parent.notify(Yi,{}),i.parent.addNewRowFocus=!1),i.parent.autoFit&&i.parent.preventAdjustColumns(),i.parent.isInitialLoad||i.parent.focusModule.setFirstFocusableTabIndex(),i.isLoaded){i.parent.isManualRefresh=!1,i.parent.enableInfiniteScrolling&&i.parent.groupSettings.enableLazyLoading&&r.requestType==="sorting"&&(i.parent.infiniteScrollModule.groupCaptionAction=void 0);var f=i.parent.parentDetails&&i.parent.parentDetails.parentInstObj&&i.parent.parentDetails.parentInstObj.isReact;if((i.parent.isReact||f)&&i.parent.element.querySelectorAll(".e-templatecell").length){var g=i;g.parent.renderTemplates(function(){g.parent.trigger(Ti,{},function(){g.parent.allowTextWrap&&g.parent.notify($r,{case:"textwrap"})})})}else i.parent.trigger(Ti,{},function(){i.parent.allowTextWrap&&i.parent.notify($r,{case:"textwrap"})});i.parent.allowTextWrap&&i.parent.height==="auto"&&(i.parent.getContentTable().scrollHeight>i.parent.getContent().clientHeight?i.parent.scrollModule.setPadding():i.parent.scrollModule.removePadding())}if(n){var m=(n.requestType||"").toLowerCase()+"-complete";i.parent.notify(m,n),r.requestType==="batchsave"&&(r.cancel=!1,i.parent.trigger(dt,r))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=t,this.widthService=t.getService("widthService"),this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(no,this.setVisible,this),this.parent.on(vl,this.colGroupRefresh,this),this.parent.on(et,this.enableAfterRender,this),this.parent.on(Rp,this.refreshContentRows,this),this.parent.on(ys,this.beforeCellFocused,this),this.parent.on(ti,this.droppableDestroy,this))}return o.prototype.beforeCellFocused=function(e){e.byKey&&(e.keyArgs.action==="upArrow"||e.keyArgs.action==="downArrow")?this.pressedKey=e.keyArgs.action:this.pressedKey=void 0},o.prototype.renderPanel=function(){var e=this.parent,t=this.parent.element.querySelector("."+yi);if(t){this.ariaService.setOptions(this.parent.element.querySelector("."+ot),{busy:!1}),this.setPanel(t);return}t=this.parent.createElement("div",{className:yi});var i=this.parent.createElement("div",{className:ot});this.ariaService.setOptions(i,{busy:!1}),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(t),i.classList.add("e-virtual-content")),t.appendChild(i),this.setPanel(t),e.element.appendChild(t)},o.prototype.renderHorizontalScrollbar=function(e){var t=this.parent.createElement("div",{className:"e-movablescrollbar"}),i=this.parent.createElement("div",{className:"e-movablechild"}),r=Tt().toString();this.setScrollbarHeight(i,r),this.setScrollbarHeight(t,r),t.appendChild(i),e.appendChild(t)},o.prototype.setScrollbarHeight=function(e,t){e.style.minHeight=t+"px",e.style.maxHeight=t+"px"},o.prototype.renderTable=function(){var e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!u(t)&&!u(i)&&(fe(t),fe(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+di)),this.parent.selectionSettings.type==="Multiple"&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},o.prototype.createContentTable=function(e){var t=this.getPanel().firstElementChild;this.getTable()&&fe(this.getTable());var i=t.querySelector("."+di)?t.querySelector("."+di):this.parent.createElement("table",{className:di,attrs:{role:"presentation",id:this.parent.element.id+e}});return i.style.cssText="border-collapse: separate; border-spacing: .25px;",this.setColGroup(this.parent.getHeaderTable().querySelector(Ot).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(Fe,{attrs:{role:"rowgroup"}})),t.appendChild(i),t},o.prototype.refreshContentRows=function(e){var t=this;e===void 0&&(e={});var i=this.parent;if(i.currentViewData.length!==0){i.editSettings&&i.editModule&&i.editSettings.mode==="Batch"&&i.editModule.formObj&&i.editSettings.showConfirmDialog===!1&&i.editModule.destroyForm();var r=this.currentMovableRows||i.currentViewData,n=i.isReact&&!u(i.rowTemplate),s=this.parent.printGridParent&&this.parent.printGridParent.isReact,a=n||s?i.createElement(Fe,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=Q([],r));var l=n?i.createElement(Fe,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),h,p;(i.isReact||s)&&i.rowTemplate&&(h=a,p=l);var c=i.getColumns(),d,f,g,m=new br(this.serviceLocator,null,this.parent),v=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll",y=this.isInfiniteColumnvirtualization()&&e.requestType!=="virtualscroll",R=!!(i.enableInfiniteScrolling&&(i.childGrid||i.detailTemplate)),b=R&&(e.action==="add"&&e.requestType==="save"||e.requestType==="delete");b&&(e.startIndex=0,i.notify(ac,{})),v&&(i.childGrid||i.detailTemplate)&&!i.infiniteScrollSettings.enableCache||(R&&(this.parent.infiniteScrollModule.infiniteDetailDestroy=!0),i.notify(Zp,v&&(i.childGrid||i.detailTemplate)&&i.infiniteScrollSettings.enableCache?e:{})),this.rowElements=[],this.rows=[],this.tempFreezeRows=[];var E,k=!!(this.parent.frozenRows&&this.parent.groupSettings.columns.length);$t(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(Ce){return e.requestType===Ce})&&this.emptyVcRows();var F;F=this.checkCache(F,e),!this.isAddRows&&!this.useGroupCache&&(F=this.generator.generateRows(r,e)),this.setGroupCache(F,e),this.parent.notify(Dp,{isInfiniteScroll:v,modelData:F,args:e});var W=this.parent.registeredTemplate;if(!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&W&&W.template&&!e.isFrozen){for(var te=[],ne=0;ne<W.template.length;ne++)for(var ye=0;ye<W.template[parseInt(ne.toString(),10)].rootNodes.length;ye++)u(W.template[parseInt(ne.toString(),10)].rootNodes[parseInt(ye.toString(),10)].parentNode)&&te.push(W.template[parseInt(ne.toString(),10)]);this.parent.destroyTemplate(["template"],te)}if((this.parent.isReact||this.parent.isVue)&&!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&!e.isFrozen){var L=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"];e.requestType==="infiniteScroll"&&this.parent.infiniteScrollSettings.enableCache&&(L=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),En(this.parent,L)}if(this.parent.enableColumnVirtualization){var P=new ks(this.serviceLocator,this.parent);P.updateVirtualCells(F)}this.tbody=this.getTable().querySelector(Fe);var D=0,N=!0;if($t(i)&&i.vcRows.length){var $="top",V=u(e.virtualInfo.offsets)?u(e.scrollTop)?0:e.scrollTop[""+$]:e.virtualInfo.offsets.top;if(V!==0){for(var H=i.vGroupOffsets,z=i.pageSettings.pageSize/2,Z=Object.keys(H).map(function(Ce){return H[""+Ce]}),he=0;he<Z.length;he++)if(V<Z[parseInt(he.toString(),10)])if(!u(e.virtualInfo)&&e.virtualInfo.direction==="up"){D=he>0?(he-1)*z:he*z;break}else{D=he*z,(this.parent.contentModule.isEndBlock(he)||this.parent.contentModule.isEndBlock(he+1))&&(e.virtualInfo.blockIndexes=[he,he+1]);break}Math.round(V+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(N=!1)}}var Se=i.frozenRows&&this.parent.enableVirtualization&&e.requestType==="reorder";if(i.frozenRows&&e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo.axis==="X"||Se){var me=e.virtualInfo.blockIndexes,ce=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],Se&&(e.virtualInfo.page=1);var ge=Se?this.initialPageRecords:r,se=this.vgenerator.generateRows(ge,e);se.splice(this.parent.frozenRows);for(var ne=0;ne<this.parent.frozenRows;ne++)d=m.render(se[parseInt(ne.toString(),10)],c),Ns(d),l.appendChild(d);e.virtualInfo.blockIndexes=me,e.virtualInfo.page=ce,Se&&e.virtualInfo.page===1&&F.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(l,F,m,e,r,c),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]),(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&e.requestType==="delete"||b)&&(this.visibleRows=[]);for(var ie=function(Ce,ni){if(ee.rows.push(F[parseInt(Ce.toString(),10)]),ee.parent.groupSettings.enableLazyLoading&&!ee.useGroupCache&&ee.parent.groupSettings.columns.length&&((ee.parent.enableVirtualization?ee.parent.lazyLoadRender:ee.parent.contentModule).refRowsObj[ee.parent.pageSettings.currentPage].push(F[parseInt(Ce.toString(),10)]),ee.setRowsInLazyGroup(F[parseInt(Ce.toString(),10)],Ce),u(F[parseInt(Ce.toString(),10)].indent)))return"continue";if(ee.setInfiniteVisibleRows(e,F[parseInt(Ce.toString(),10)]),$t(i)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&ee.rowElements.length>=e.virtualInfo.blockIndexes.length*ee.parent.contentModule.getBlockSize()&&N)return ee.parent.currentViewData.records=ee.rows.map(function($e){return $e.data}),"break";if(i.rowTemplate){var vt=i.element.id+"rowTemplate",Ke=void 0;if(i.isReact||s){var rr=i.frozenRows&&Ce<i.frozenRows,ft=Q({index:Ce},r[parseInt(Ce.toString(),10)]);if(i.getRowTemplate()(ft,i,"rowTemplate",vt,null,null,rr?l:a),i.requireTemplateRef){var at=ee;return at.parent.renderTemplates(function(){i.frozenRows&&Ce<i.frozenRows?d=p.childNodes[parseInt(Ce.toString(),10)]:g=h.childNodes[parseInt(Ce.toString(),10)];var $e={data:F[parseInt(Ce.toString(),10)].data,row:g||d};at.parent.trigger(mn,$e),(F[parseInt(Ce.toString(),10)].isDataRow||at.parent.enableVirtualization&&at.parent.groupSettings.enableLazyLoading)&&at.rowElements.push($e.row),at.ariaService.setOptions(at.parent.element,{colcount:i.getColumns().length.toString()}),Ce===F.length-1&&(h=null,p=null)}),"continue"}}else Ke=i.getRowTemplate()(Q({index:Ce},r[parseInt(Ce.toString(),10)]),i,"rowTemplate",vt,void 0,void 0,void 0,ee.parent.root);if(!i.isReact&&Ke[0].tagName==="TBODY"){for(var Dt=0;Dt<Ke.length;Dt++){var Ci=Ke[parseInt(Dt.toString(),10)].nodeName.toLowerCase()==="tr";(Ci||Ke[parseInt(Dt.toString(),10)].querySelectorAll&&Ke[parseInt(Dt.toString(),10)].querySelectorAll("tr").length)&&(d=Ci?Ke[parseInt(Dt.toString(),10)]:Ke[parseInt(Dt.toString(),10)].querySelector("tr"))}i.frozenRows&&Ce<i.frozenRows?l.appendChild(d):a.appendChild(d)}else i.frozenRows&&Ce<i.frozenRows?d=i.isReact?l.lastElementChild:St(l,Ke):(i.isReact||(d=St(a,Ke)),g=i.isReact?a.lastElementChild:d.lastElementChild);var bi={data:F[parseInt(Ce.toString(),10)].data,row:g||d};ee.parent.trigger(mn,bi)}else{d=m.render(F[parseInt(Ce.toString(),10)],c),Ns(d);var wt=ee.ensureFrozenHeaderRender(e);i.frozenRows&&(Ce<i.frozenRows||k)&&!v&&e.requestType!=="virtualscroll"&&wt&&ee.ensureVirtualFrozenHeaderRender(e)?l.appendChild(d):a.appendChild(d);var It=parseInt(d.getAttribute("aria-rowindex"),10)-1;It+1===i.frozenRows&&(k=!1),F[parseInt(Ce.toString(),10)].isExpand&&i.notify(fp,d.cells[i.groupSettings.columns.length])}(F[parseInt(Ce.toString(),10)].isDataRow||ee.parent.enableVirtualization&&ee.parent.groupSettings.enableLazyLoading)&&(!u(i.rowTemplate)&&(i.isAngular||i.isVue3||i.isVue)?ee.rowElements.push(g||d):ee.rowElements.push(d)),ee.ariaService.setOptions(ee.parent.element,{colcount:i.getColumns().length.toString()})},ee=this,ne=D,it=F.length;ne<it;ne++){var ze=ie(ne);if(ze==="break")break}var Ne=i.parentDetails&&i.parentDetails.parentInstObj&&i.parentDetails.parentInstObj.isReact;if((i.isReact||Ne)&&!i.requireTemplateRef&&i.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(El,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),i.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),i.frozenRows&&e.requestType!=="virtualscroll"&&!v&&this.ensureVirtualFrozenHeaderRender(e)||e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo&&e.virtualInfo.sentinelInfo.axis==="X"){if(f=i.getHeaderTable().querySelector(Fe),n){var Ee=f.parentElement;fe(f),Ee.appendChild(l)}else f.innerHTML="",f.appendChild(l);i.isInitialLoad||i.scrollModule.setHeight()}e.rows=this.rows.slice(0),Hl(function(){if(t.parent.notify(wl,e),!t.parent.enableVirtualization&&(!t.parent.enableColumnVirtualization||y)&&!v&&(i.isReact||(t.tbody.innerHTML=""),u(t.tbody.parentElement)?fe(i.getContentTable().querySelector(Fe)):fe(t.tbody),t.tbody=t.parent.createElement(Fe,{attrs:{role:"rowgroup"}})),i.rowTemplate&&th(i.element.id+"rowTemplate"),!u(t.parent.infiniteScrollModule)&&(t.parent.enableInfiniteScrolling&&!t.isInfiniteColumnvirtualization()||y)){if(t.isAddRows=!1,t.parent.notify(kp,{args:e}),t.parent.notify(Fp,{tbody:t.tbody,frag:a,args:e,rows:t.rows,rowElements:t.rowElements,visibleRows:t.visibleRows,tableName:E}),t.isInfiniteColumnvirtualization()&&t.parent.isFrozenGrid()){var Ce=t.parent.getContent().querySelector(".e-virtualtable"),ni=Bs(Ce);t.parent.contentModule.resetStickyLeftPos(ni.width),t.widthService.refreshFrozenScrollbar()}}else t.useGroupCache=!1,t.appendContent(t.tbody,a,e);if(t.parent.editSettings.showAddNewRow&&(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)){var wt=t.parent.element.querySelector(".e-addrow-removed");wt&&fe(wt)}var It=!t.parent.element.querySelector("."+Ji);t.parent.editSettings.showAddNewRow&&t.parent.editSettings.mode==="Normal"&&(It&&((t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&(t.parent.isAddNewRow=!0),t.parent.isEdit=!1,t.parent.addRecord()),(It||(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(vt){return e.requestType===vt}))&&t.parent.notify(Yi,{})),t.parent.getVisibleFrozenRightCount()&&t.parent.getContent()&&ho(t.parent)>0&&t.parent.element.classList.add("e-right-shadow"),a=null},this.rafCallback(Q({},e)))}},o.prototype.isInfiniteColumnvirtualization=function(){return this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling},o.prototype.enableCacheOnInfiniteColumnVirtual=function(){return this.isInfiniteColumnvirtualization()&&this.parent.infiniteScrollSettings.enableCache},o.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},o.prototype.appendContent=function(e,t,i,r){var n=this.parent.isReact&&!u(this.parent.rowTemplate);if(n?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e)),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both"))for(var s=e.querySelectorAll("td"),a=0;a<s.length;a++){var l=parseFloat(document.defaultView.getComputedStyle(s[parseInt(a.toString(),10)],"::before").getPropertyValue("height")),h=s[parseInt(a.toString(),10)].offsetHeight;l>h&&(s[parseInt(a.toString(),10)].style.height=l+"px",s[parseInt(a.toString(),10)].style.boxSizing="content-box")}this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},o.prototype.setRowsInLazyGroup=function(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(e,t)},o.prototype.setGroupCache=function(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(Op,{args:t,data:e})},o.prototype.ensureFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&(e.requestType==="reorder"||e.requestType==="refresh")||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&this.parent.infiniteScrollModule.requestType==="delete"&&this.parent.pageSettings.currentPage!==1)},o.prototype.ensureVirtualFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&e.requestType==="delete")},o.prototype.checkCache=function(e,t){if(this.parent.infiniteScrollSettings.enableCache&&t.requestType==="infiniteScroll"){if(this.isAddRows=!u(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows){var i=this.infiniteCache[this.parent.pageSettings.currentPage];e=this.parent.pageSettings.currentPage===1?i.slice(this.parent.frozenRows):i}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(t.requestType==="paging"||t.requestType==="columnstate"||t.requestType==="reorder"||t.requestType==="virtualscroll")&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows(t.requestType==="reorder")):null},o.prototype.setInfiniteVisibleRows=function(e,t){this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!(this.isInfiniteColumnvirtualization()&&e.requestType==="virtualscroll")&&this.visibleRows.push(t)},o.prototype.getCurrentBlockInfiniteRecords=function(){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var t=this.parent.getRows(),i=parseInt(t[this.parent.frozenRows].getAttribute(He),10)-1,r=Math.ceil((i+1)/this.parent.pageSettings.pageSize);i=parseInt(t[t.length-1].getAttribute(He),10)-1;for(var n=Math.ceil((i+(t.length?1:0))/this.parent.pageSettings.pageSize),s=r;s<=n;s++)e=e.length?e.concat(this.infiniteCache[parseInt(s.toString(),10)]):this.infiniteCache[parseInt(s.toString(),10)];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}return e},o.prototype.getReorderedRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},o.prototype.virtualFrozenHdrRefresh=function(e,t,i,r,n,s){if(this.parent.frozenRows&&this.parent.enableVirtualization&&(r.requestType==="reorder"||r.requestType==="refresh")){for(var a=void 0,l=this.getReorderedRows(r),h=0;h<l.length;h++)a=i.render(l[parseInt(h.toString(),10)],s),e.appendChild(a);r.virtualInfo.page===1&&t.splice(0,this.parent.frozenRows)}},o.prototype.getInfiniteRows=function(){var e=[];if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var t=Object.keys(this.infiniteCache),i=0;i<t.length;i++)e=e.concat(this.infiniteCache[t[parseInt(i.toString(),10)]]);else e=this.visibleRows;return e},o.prototype.getInfiniteMovableRows=function(){var e=this.getCurrentBlockInfiniteRecords(),t=this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[];return t},o.prototype.getPanel=function(){return this.contentPanel},o.prototype.setPanel=function(e){this.contentPanel=e},o.prototype.getTable=function(){return this.contentTable},o.prototype.setTable=function(e){this.contentTable=e},o.prototype.getRows=function(){var e=this.getInfiniteRows();return e.length?e:this.rows},o.prototype.getRowElements=function(){return this.rowElements},o.prototype.setRowElements=function(e){this.rowElements=e},o.prototype.getColGroup=function(){return this.colgroup},o.prototype.setColGroup=function(e){return u(e)||(e.id="content-"+e.id),this.colgroup=e},o.prototype.setVisible=function(e){var t=this.parent,i=this.getRows(),r;i.some(function(v){return v.isDataRow&&(r=v),v.isDataRow});var n=!0;!t.groupSettings.columns.length&&r&&(n=!1);for(var s=t.getDataRows(),a={},l=this.infiniteRowVisibility(),h=l||this.rows.filter(function(v){return!v.isDetailRow}),p=0,c=e.length;p<c;p++){var d=e[parseInt(p.toString(),10)],f=this.parent.getNormalizedColumnIndex(d.uid),g=this.parent.getColumnIndexByUid(d.uid),m=d.visible===!0?"":"none";f!==-1&&r&&f<r.cells.length&&nt(this.getColGroup().childNodes[parseInt(f.toString(),10)],{display:m}),n||this.setDisplayNone(s,g,m,h),!this.parent.invokedFromMedia&&d.hideAtMedia&&this.parent.updateMediaColumns(d),this.parent.invokedFromMedia=!1}n?this.refreshContentRows({requestType:"refresh"}):(this.parent.notify(Il,{rows:h,args:a}),this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.notify(Yi,{}))},o.prototype.setDisplayNone=function(e,t,i,r){Ud(e,t,i,r,this.parent,this.parent.isRowDragable()),this.parent.notify(Lp,{visible:i,index:t,isFreeze:this.isInfiniteFreeze})},o.prototype.infiniteRowVisibility=function(e){var t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,this.parent.infiniteScrollSettings.enableCache?t=this.getCurrentBlockInfiniteRecords():t=e?this.visibleFrozenRows:this.visibleRows),t},o.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=this.getHeaderColGroup();this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},o.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+Bt).querySelector(Ot+":not(.e-masked-colgroup)").cloneNode(!0)},o.prototype.initializeContentDrop=function(){var e=this.parent;this.droppable=new Oa(e.element,{accept:".e-dragclone",drop:this.drop})},o.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},o.prototype.canSkip=function(e,t,i){return u(t)||u(e.visible)||t.cells[parseInt(i.toString(),10)].visible===e.visible},o.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new fc(this.parent):new Rn(this.parent)},o.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(Fe).innerHTML="")},o.prototype.setSelection=function(e,t,i){this.parent.notify(Np,{uid:e,set:t,clearAll:i});for(var r=this.getRows().filter(function(l){return i||e===l.uid}),n=0;n<r.length;n++){r[parseInt(n.toString(),10)].isSelected=t;for(var s=r[parseInt(n.toString(),10)].cells,a=0;a<s.length;a++)s[parseInt(a.toString(),10)].isSelected=t}},o.prototype.getRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),u(e)?void 0:this.parent.getDataRows()[parseInt(e.toString(),10)]},o.prototype.getInfiniteRowIndex=function(e){if(this.parent.infiniteScrollSettings.enableCache&&!u(e)){var t=this.parent.frozenRows,i=t>e?0:t,r=parseInt(this.parent.getRows()[parseInt(i.toString(),10)].getAttribute(He),10)-1;e=t>e?e:e-r+t}return e},o.prototype.getVirtualRowIndex=function(e){return e},o.prototype.enableAfterRender=function(e){e.module==="group"&&e.enable&&(this.generator=this.getModelGenerator())},o.prototype.setRowObjects=function(e){this.rows=e},o.prototype.immutableModeRendering=function(e){var t=this;e===void 0&&(e={});var i=this.parent;i.hideSpinner();var r=i.getPrimaryKeyFieldNames()[0],n={},s={},a=[],l={},h=i.getRowsObject().slice(),p=this.getBatchEditedRecords(r,h),c={},d=Object.keys(p).length!==0;if(i.getContent().querySelector(".e-emptyrow")||e.requestType==="reorder"||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(i.currentViewData.length===0)return;var f={},g=i.createElement(Fe,{attrs:{role:"rowgroup"}}),m=i.currentViewData,v=[].slice.call(this.getTable().querySelector(Fe).children);if(this.prevCurrentView.length){var y=this.prevCurrentView.length,R=m.length;if(y===R)for(var b=0;b<R;b++){if(this.parent.editSettings.mode==="Batch"&&v[parseInt(b.toString(),10)].classList.contains("e-insertedrow")){v.splice(b,1),--b;continue}s[m[parseInt(b.toString(),10)][""+r]]=n[this.prevCurrentView[parseInt(b.toString(),10)][""+r]]=b,c[parseInt(b.toString(),10)]=m[parseInt(b.toString(),10)][""+r],f[h[parseInt(b.toString(),10)].uid]=v[parseInt(b.toString(),10)],l[parseInt(b.toString(),10)]=this.prevCurrentView[parseInt(b.toString(),10)][""+r]}else{for(var b=0;b<R;b++)s[m[parseInt(b.toString(),10)][""+r]]=b,c[parseInt(b.toString(),10)]=m[parseInt(b.toString(),10)][""+r];for(var b=0;b<y;b++){if(this.parent.editSettings.mode==="Batch"&&v[parseInt(b.toString(),10)].classList.contains("e-insertedrow")){v.splice(b,1),--b;continue}f[h[parseInt(b.toString(),10)].uid]=v[parseInt(b.toString(),10)],n[this.prevCurrentView[parseInt(b.toString(),10)][""+r]]=b,l[parseInt(b.toString(),10)]=this.prevCurrentView[parseInt(b.toString(),10)][""+r]}}}for(var b=0;b<m.length;b++){var E=n[m[parseInt(b.toString(),10)][""+r]];if(u(E)){var W=new br(this.serviceLocator,null,i),te={startIndex:b},ne=this.generator.generateRows([m[parseInt(b.toString(),10)]],te);a.push(ne[0]);var F=W.render(ne[0],i.getColumns());g.appendChild(F),this.refreshImmutableContent(b,F,a[parseInt(b.toString(),10)])}else{var k=!1;this.parent.enableDeepCompare&&(k=this.objectEqualityChecker(this.prevCurrentView[parseInt(E.toString(),10)],m[parseInt(b.toString(),10)]));var F=f[h[parseInt(E.toString(),10)].uid];if(a.push(h[parseInt(E.toString(),10)]),this.rowElements[parseInt(E.toString(),10)]&&this.rowElements[parseInt(E.toString(),10)].getAttribute("data-uid")===a[parseInt(b.toString(),10)].uid&&(d&&u(p[c[parseInt(b.toString(),10)]])||!d&&(k||this.prevCurrentView[parseInt(E.toString(),10)]===m[parseInt(b.toString(),10)]))){E!==b&&this.refreshImmutableContent(b,F,a[parseInt(b.toString(),10)]),g.appendChild(F);continue}(d&&!u(p[c[parseInt(b.toString(),10)]])||!this.parent.enableDeepCompare&&m[parseInt(b.toString(),10)]!==this.prevCurrentView[parseInt(E.toString(),10)]||this.parent.enableDeepCompare&&!k)&&h[parseInt(E.toString(),10)].setRowValue(m[parseInt(b.toString(),10)]),g.appendChild(F),this.refreshImmutableContent(b,F,a[parseInt(b.toString(),10)])}}if(this.rows=a,this.rowElements=[].slice.call(g.children),fe(this.getTable().querySelector(Fe)),this.getTable().appendChild(g),this.parent.trigger(Ti,{},function(){t.parent.allowTextWrap&&t.parent.notify($r,{case:"textwrap"})}),e){var ye=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(ye,e)}}},o.prototype.objectEqualityChecker=function(e,t){for(var i=Object.keys(e),r=!0,n=0;n<i.length;n++)if(e[i[parseInt(n.toString(),10)]]!==t[i[parseInt(n.toString(),10)]]){var s=e[i[parseInt(n.toString(),10)]]instanceof Date&&t[i[parseInt(n.toString(),10)]]instanceof Date;if(!s||e[i[parseInt(n.toString(),10)]].getTime()!==t[i[parseInt(n.toString(),10)]].getTime()){r=!1;break}}return r},o.prototype.getBatchEditedRecords=function(e,t){var i={},r=this.parent.getBatchChanges(),n=[],s=[];Object.keys(r).length&&(n=r.changedRecords,s=r.addedRecords);var a={cancel:!1};this.parent.notify(Hp,{rows:t,args:a}),s.length&&(this.parent.editSettings.newRowPosition==="Bottom"?t.splice(t.length-1,s.length):a.cancel||t.splice(0,s.length));for(var l=0;l<n.length;l++)i[n[parseInt(l.toString(),10)][""+e]]=l;return i},o.prototype.refreshImmutableContent=function(e,t,i){i.isAltRow=this.parent.enableAltRow?e%2!==0:!1,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute(He,(e+1).toString()),this.updateCellIndex(t,e)},o.prototype.updateCellIndex=function(e,t){for(var i=0;i<e.cells.length;i++)e.cells[parseInt(i.toString(),10)].setAttribute("index",t.toString())},o}(),mc=function(){function o(e,t){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(r){var n=i.parent,s=i.draggable.currentStateTarget,a=T(s,"e-headercell");if(!(n.allowReordering||n.allowGrouping)||!u(a)&&a.getElementsByClassName("e-checkselectall").length>0)return!1;var l=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=s.classList.contains("e-headercell")?s:a;if(!h||!n.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var p=h.offsetHeight,c=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv"),d;if(c){if(h.querySelector(".e-stackedheadercelldiv")?d=n.getStackedHeaderColumnByHeaderText(c.innerText.trim(),n.columns):d=n.getColumnByUid(c.getAttribute("e-mappinguid")),i.column=d,i.column.lockColumn)return!1;l.setAttribute("e-mappinguid",i.column.uid)}if(d&&!u(d.headerTemplate)){if(u(d.headerTemplate))l.innerHTML=d.headerTemplate;else{var f=n.getColumnIndexByField(d.field),g=d.getHeaderTemplate()(Q({index:f},d),n,"headerTemplate",null,null,null,null,n.root),m=n.isReact&&typeof d.headerTemplate!="string",v=n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isReact;(m||v)&&n.renderTemplates(),St(l,g)}!u(l.firstChild)&&l.firstChild.nodeType===1&&(l.firstChild.style.pointerEvents="none")}else l.innerHTML=c?d.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(p-6).toString()+"px",n.element.appendChild(l),l},this.dragStart=function(r){var n=i.parent;n.element.querySelector(".e-gridpopup").style.display="none",n.notify(Pu,{target:i.draggable.currentStateTarget,column:i.column,event:r.event})},this.drag=function(r){var n=i.parent,s=r.target;if(s){var a=Y(s,".e-grid"),l=i.parent.element.querySelector(".e-cloneproperties");if((!a||a.getAttribute("id")!==n.element.getAttribute("id"))&&(ve(l,["e-notallowedcur"],["e-defaultcur"]),n.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),!n.groupSettings.allowReordering))return;n.notify(Ou,{target:r.target,column:i.column,event:r.event})}},this.dragStop=function(r){var n=i.parent,s;n.element.querySelector(".e-gridpopup").style.display="none",(!T(r.target,"e-headercell")&&!T(r.target,"e-groupdroparea")||!n.allowReordering&&T(r.target,"e-headercell")||!r.helper.getAttribute("e-mappinguid")&&T(r.target,"e-groupdroparea"))&&(fe(r.helper),s=!0),n.notify(tp,{target:r.target,event:r.event,column:i.column,cancel:s})},this.drop=function(r){var n=i.parent,s=r.droppedElement.getAttribute("e-mappinguid"),a=Y(r.target,".e-grid");fe(r.droppedElement),!(a&&a.getAttribute("id")!==n.element.getAttribute("id")||!(n.allowReordering||n.allowGrouping))&&n.notify(ip,{target:r.target,uid:s,droppedElement:r.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(this.parent.enableColumnVirtualization||this.parent.on(no,this.setVisible,this),this.parent.on(Sl,this.colPosRefresh,this),this.parent.on(xn,this.renderCustomToolbar,this),this.parent.rowRenderingMode==="Vertical"&&this.parent.on(et,this.updateCustomResponsiveToolbar,this))}return o.prototype.renderPanel=function(){var e=this.parent.element.querySelector("."+Bt),t=e!=null;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});var i=t?e.querySelector("."+st):this.parent.createElement("div",{className:st});this.toggleStackClass(e),e.appendChild(i),this.setPanel(e),t||this.parent.element.appendChild(e)},o.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+di)),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(vi,{rows:this.rows})},o.prototype.getPanel=function(){return this.headerPanel},o.prototype.setPanel=function(e){this.headerPanel=e},o.prototype.getTable=function(){return this.headerTable},o.prototype.setTable=function(e){this.headerTable=e},o.prototype.getColGroup=function(){return this.colgroup},o.prototype.setColGroup=function(e){return this.colgroup=e},o.prototype.getRows=function(){var e=this.getTable();return e.tHead.rows},o.prototype.createHeaderTable=function(){var e=this.createTable(),t=this.getPanel().querySelector("."+st);return t.appendChild(e),t},o.prototype.createHeader=function(e,t){var i=this.parent;this.getTable()&&fe(this.getTable());var r=this.parent.createElement("table",{className:di,attrs:{role:"presentation"}});r.style.cssText="border-collapse: separate; border-spacing: .25px;";var n=this.createHeaderContent(t),s=n.thead,a=this.parent.createElement(Fe,{className:this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var l=this.parent.createElement(Ot),h=this.parent.createElement("tr",{attrs:{role:"row"},className:(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"e-hide":""}),p,c=this.rows=n.rows,d=0,f=c.length;d<f;d++)for(var g=0,m=c[parseInt(d.toString(),10)].cells.length;g<m;g++)p=this.parent.createElement("td"),h.appendChild(p);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(l),a.appendChild(h),r.appendChild(this.setColGroup(l)),r.appendChild(s),r.appendChild(a),r.appendChild(this.caption),r},o.prototype.createTable=function(e){return e===void 0&&(e=null),this.createHeader(e)},o.prototype.createHeaderContent=function(e){var t=this.parent,i=t.getColumns(),r=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),n=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),s=new br(this.serviceLocator,re.Header,t);s.element=n;var a=[],l;this.colDepth=kd(t.columns);for(var h=0,p=this.colDepth;h<p;h++)a[parseInt(h.toString(),10)]=this.generateRow(h),a[parseInt(h.toString(),10)].cells=[];if(a=this.ensureColumns(a),a=this.getHeaderCells(a,e),t.isRowDragable()&&this.parent.getFrozenMode()==="Right")for(var h=0,p=a.length;h<p;h++)a[parseInt(h.toString(),10)].cells.push(this.generateCell({},re.RowDragHIcon));var c=i.filter(function(f){return f.headerTemplate});c.length&&(this.parent.isReact||this.parent.isVue)&&En(this.parent,["headerTemplate"]);for(var h=0,p=this.colDepth;h<p;h++)l=s.render(a[parseInt(h.toString(),10)],i),this.parent.rowHeight&&l.querySelector(".e-headercell")&&(l.style.height=this.parent.rowHeight+"px"),Ns(l),r.appendChild(l);var d={thead:r,rows:a};return d},o.prototype.updateColGroup=function(e){var t=this.parent.getColumns(),i,r=this.parent.getColumnIndexesInView();if(e.id=this.parent.element.id+Ot,this.parent.allowGrouping)for(var n=0,s=this.parent.groupSettings.columns.length;n<s;n++)this.parent.enableColumnVirtualization&&r.indexOf(n)===-1||(i=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(i));(this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(i)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i));for(var n=0,s=t.length;n<s;n++)i=this.parent.createElement("col"),t[parseInt(n.toString(),10)].visible===!1&&nt(i,{display:"none"}),e.appendChild(i);return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(i)),e},o.prototype.ensureColumns=function(e){for(var t=this.parent,i=this.parent.getColumnIndexesInView(),r=0,n=e.length;r<n;r++){if(t.allowGrouping)for(var s=0,a=t.groupSettings.columns.length;s<a;s++)this.parent.enableColumnVirtualization&&i.indexOf(s)===-1||e[parseInt(r.toString(),10)].cells.push(this.generateCell({},re.HeaderIndent));if(t.detailTemplate||t.childGrid){var l={};this.parent.notify(xl,l),e[parseInt(r.toString(),10)].cells.push(this.generateCell(l,re.DetailHeader))}t.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&e[parseInt(r.toString(),10)].cells.push(this.generateCell({},re.RowDragHIcon))}return e},o.prototype.getHeaderCells=function(e,t){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var n=0;n<(u(r)?0:r.length);n++)this.lockColsRendered=!1,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===r.length-1,i,t,!1);for(var n=0,s=u(r)?0:r.length;n<s;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===s-1,i,t,!1);return e},o.prototype.appendCells=function(e,t,i,r,n,s,a,l,h){var p=s?h?"e-laststackcell":"e-lastcell":"",c=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered;if(!e.columns)c&&t[parseInt(i.toString(),10)].cells.push(this.generateCell(e,re.Header,this.colDepth-i,(r?"":n?"e-firstcell":"")+p,i,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;else{this.isFirstCol=!1;var d=this.getCellCnt(e,0);if(d){var f=this.getStackedLockColsCount(e,0),g=this.parent.lockcolPositionCount===0||!this.lockColsRendered&&f!==0||this.lockColsRendered&&d-f!==0;g&&t[parseInt(i.toString(),10)].cells.push(new Cr({cellType:re.StackedHeader,column:e,colSpan:this.getColSpan(d,f),className:r?"":n?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var m=0;m<e.columns.length;m++)t=this.appendCells(e.columns[parseInt(m.toString(),10)],t,i+1,r,m===0,m===e.columns.length-1&&s,a,l,!1);if(this.lockColsRendered)for(var m=0,v=e.columns.length;m<v;m++){r=r&&m===0;var y=this.isFirstCol=e.columns[parseInt(m.toString(),10)].visible&&!r,R=m===v-1&&s;t=this.appendCells(e.columns[parseInt(m.toString(),10)],t,i+1,r,y&&!R,R,a,l,!0)}}return t},o.prototype.getStackedLockColsCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[parseInt(i.toString(),10)],t);else e.lockColumn&&t++;return t},o.prototype.getColSpan=function(e,t){return e=this.lockColsRendered?e-t:t,e},o.prototype.generateRow=function(e){return new ir({})},o.prototype.generateCell=function(e,t,i,r,n,s){var a={visible:e.visible,isDataCell:!1,isTemplate:!u(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:r,index:n,colIndex:s};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new Cr(a)},o.prototype.setVisible=function(e){for(var t=this.parent,i,r,n=0,s=e.length;n<s;n++){var a=e[parseInt(n.toString(),10)];r=t.getNormalizedColumnIndex(a.uid),i=a.visible?"":"none",nt(this.getColGroup().children[parseInt(r.toString(),10)],{display:i}),t.editSettings.showAddNewRow&&t.element.querySelector(".e-addedrow")&&nt(t.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(r.toString(),10)],{display:i})}this.refreshUI(),this.parent.editSettings.showAddNewRow&&(this.parent.isAddNewRow=!0)},o.prototype.colPosRefresh=function(){this.refreshUI()},o.prototype.refreshUI=function(){var e=this.getPanel();this.toggleStackClass(e);var t=this.getTable(),i=void 0;if(t){fe(t),this.parent.editSettings.showAddNewRow&&!this.parent.isAddNewRow&&t.querySelector(".e-addedrow")&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(t.querySelector(".e-addedrow").classList.add("e-addrow-removed"),this.parent.isAddNewRow=!0),t.removeChild(t.firstChild),t.removeChild(t.childNodes[0]);var r=this.parent.createElement(Ot),n=this.createHeaderContent(i);this.rows=n.rows,t.insertBefore(n.thead,t.firstChild),this.updateColGroup(r),t.insertBefore(this.setColGroup(r),t.firstChild),this.appendContent(t),this.parent.notify(vl,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),this.initializeHeaderDrag();for(var s=[].slice.call(e.querySelectorAll("tr.e-columnheader")),a=0,l=s;a<l.length;a++){var h=l[a],p=[].slice.call(h.getElementsByClassName("e-grouptopleftcell"));p.length&&p[p.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(vi,{rows:this.rows}),this.parent.enableColumnVirtualization&&T(t,Ds)&&this.parent.notify(vi,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&this.parent.textWrapSettings.wrapMode==="Header"&&xt(s,!0)}var c=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");u(c)||(c.tabIndex=0)},o.prototype.toggleStackClass=function(e){var t=this.parent.columns,i=u(t)?!1:t.some(function(r){return!u(r.columns)});i?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},o.prototype.appendContent=function(e){this.getPanel().querySelector("."+st).appendChild(e)},o.prototype.getCellCnt=function(e,t){if(e.columns)for(var i=0,r=e.columns.length;i<r;i++)t=this.getCellCnt(e.columns[parseInt(i.toString(),10)],t);else e.visible&&t++;return t},o.prototype.initializeHeaderDrag=function(){var e=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new Pa(e.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(ti,this.droppableDestroy,this))},o.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new Oa(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop}),this.parent.on(ti,this.droppableDestroy,this)},o.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy(),this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},o.prototype.renderCustomToolbar=function(){var e=this,t=this.parent;if(t.rowRenderingMode==="Vertical"&&!t.toolbar&&(t.allowSorting||t.allowFiltering&&t.filterSettings.type!=="FilterBar")){for(var i=t.createElement("div",{className:"e-res-toolbar e-toolbar"}),r=t.createElement("div",{className:"e-toolbar-items"}),n=t.createElement("div",{className:"e-toolbar-left"}),s=this.parent.allowFiltering&&this.parent.allowSorting?2:1,a=0;a<s;a++){var l=t.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=s===1?this.parent.allowSorting?"sort":"filter":a===1?"sort":"filter",p=t.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),c=t.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});p.appendChild(c);var d=new Hi({cssClass:this.parent.cssClass?this.parent.cssClass:""});d.appendTo(p),p.onclick=function(f){f.target.classList.contains("e-ressort-btn")||f.target.classList.contains("e-ressort-icon")||f.target.querySelector(".e-ressort-icon")?e.parent.showResponsiveCustomSort():e.parent.showResponsiveCustomFilter()},l.appendChild(p),n.appendChild(l)}r.appendChild(n),i.appendChild(r),t.element.insertBefore(i,this.parent.element.querySelector("."+Bt))}else t.enableAdaptiveUI&&!t.toolbar&&t.getContent().classList.add("e-responsive-header")},o.prototype.updateCustomResponsiveToolbar=function(e){var t=this.parent.element.querySelector(".e-responsive-toolbar");e.module==="toolbar"&&(t?fe(t):this.renderCustomToolbar())},o}(),kt=function(){function o(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:Le,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}return o.prototype.getGui=function(){return""},o.prototype.format=function(e,t,i){if(!u(e.format)){if(e.type==="number"&&isNaN(parseInt(t,10))&&(t=null),e.type==="dateonly"&&typeof t=="string"&&t){var r=t.split(/[^0-9.]/);t=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))}t=this.formatter.toView(t,e.getFormatter())}return u(t)?"":t.toString()},o.prototype.evaluate=function(e,t,i,r,n,s){var a,l;if(t.column.template){var h=this.parent.isReact&&typeof t.column.template!="string"&&!(t.column.template.prototype&&t.column.template.prototype.CSPTemplate),p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,c=this.parent.printGridParent&&this.parent.printGridParent.isReact,d=["index"],f=lo({},i,(a={},a[bl]=n,a.column=t.column,a)),g=this.parent.element.id+t.column.uid,m="isStringTemplate";if(h||p||c){var v={index:r[d[0]]};t.column.getColumnTemplate()(Q(v,f),this.parent,"columnTemplate",g,this.parent[""+m],null,e)}else l=t.column.getColumnTemplate()(Q({index:r[d[0]]},f),this.parent,"template",g,this.parent[""+m],void 0,void 0,this.parent.root);return!h&&!p&&!c&&St(e,l),this.parent.notify("template-result",{template:l}),l=null,t.column.templateOptions.enableAriaLabel&&e.setAttribute("aria-label",e.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+t.column.headerText),!1}return!0},o.prototype.invokeFormatter=function(e,t,i){if(!u(e.formatter))if(yd(e.formatter,"getValue")){var r=e.formatter;t=new r().getValue(e,i)}else typeof e.formatter=="function"?t=e.formatter(e,i):t=e.formatter.getValue(e,i);return t},o.prototype.render=function(e,t,i,r,n){return this.refreshCell(e,t,i,n)},o.prototype.refreshTD=function(e,t,i,r){var n=this.parent.editSettings.mode==="Batch"&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){var s=e.cellIndex,a=e.parentElement;fe(e);var l=this.refreshCell(t,i,r,n);this.cloneAttributes(l,e),a.cells.length!==s-1?a.insertBefore(l,a.cells[parseInt(s.toString(),10)]):a.appendChild(l)}else{var h=this.refreshCell(t,i,r,n);e.innerHTML="";var p=h.getAttribute("aria-label");p&&e.setAttribute("aria-label",p);for(var c=[].slice.call(h.childNodes),d=0,f=c;d<f.length;d++){var g=f[d];e.appendChild(g)}}},o.prototype.cloneAttributes=function(e,t){for(var i=t.attributes,r=i.length,n;r--;)n=i[parseInt(r.toString(),10)],e.setAttribute(n.name,n.value)},o.prototype.refreshCell=function(e,t,i,r){var n,s=this.element.cloneNode(),a=e.column,l;e.isForeignKey&&(l=e.foreignKeyData[0]||(n={},n[a.foreignKeyValue]=a.format?null:"",n));var h=this.getGui(),p=e.isForeignKey?this.getValue(a.foreignKeyValue,l,a):this.getValue(a.field,t,a);if((a.type==="date"||a.type==="datetime")&&!u(p)&&(p=new Date(p)),a.type==="dateonly"&&!u(p)&&typeof p=="string"){var c=p.split(/[^0-9.]/);p=new Date(parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))}if(p=this.format(a,p,t),h=p.toString(),a.type==="boolean"&&!a.displayAsCheckBox){var d=p!=="true"&&p!=="false"?null:p==="true"?"True":"False";h=d?this.localizer.getConstant(d):h}var f=this.invokeFormatter(a,p,t);if(h=u(a.formatter)?h:u(f)?"":f.toString(),this.evaluate(s,e,t,i,l,r)&&a.type!=="checkbox")this.appendHtml(s,this.parent.sanitize(h),a.getDomSetter?a.getDomSetter():"innerHTML");else if(a.type==="checkbox"){s.classList.add(Xi),this.parent.selectionSettings.persistSelection?p=p==="true":p=!1;var g=fr(this.parent.createElement,!1,{checked:p,label:" "});this.parent.cssClass&&B([g],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+e.rowID,g.insertBefore(this.rowChkBox.cloneNode(),g.firstChild),s.appendChild(g)}if(this.parent.checkAllRows==="Check"&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(s,e,i),a.type==="boolean"&&a.displayAsCheckBox){var m=isNaN(parseInt(p.toString(),10))?p==="true":parseInt(p.toString(),10)>0,g=fr(this.parent.createElement,!1,{checked:m,label:" "});s.innerHTML="",s.classList.add("e-gridchkbox-cell"),g.classList.add("e-checkbox-disabled"),this.parent.cssClass&&B([g],[this.parent.cssClass]),s.appendChild(g)}if(s.classList.contains("e-summarycell")&&!t.key){var v=s.getAttribute("e-mappinguid");a=this.parent.getColumnByUid(v),s.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+e.column.headerText)}return this.parent.isFrozenGrid()&&(!t||t&&!t.key)&&_l(this.parent,a,s),s},o.prototype.appendHtml=function(e,t,i){return i===void 0&&(i="innerHTML"),e[""+i]=t,e},o.prototype.setAttributes=function(e,t,i){var r=t.column;if(this.buildAttributeFromCell(e,t,r.type==="checkbox"),Yt(e,i),Yt(e,t.attributes),r.customAttributes&&Yt(e,r.customAttributes),this.parent.rowRenderingMode==="Vertical"&&Yt(e,{"data-cell":r.headerText}),r.textAlign){var n={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};n[r.textAlign.toLowerCase()]&&e.classList.add(n[r.textAlign.toLowerCase()])}r.clipMode==="Clip"||!r.clipMode&&this.parent.clipMode==="Clip"?e.classList.add("e-gridclip"):(r.clipMode==="EllipsisWithTooltip"||!r.clipMode&&this.parent.clipMode==="EllipsisWithTooltip"&&!(this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Content"||this.parent.textWrapSettings.wrapMode==="Both")))&&r.type!=="checkbox"&&e.classList.add("e-ellipsistooltip")},o.prototype.buildAttributeFromCell=function(e,t,i){var r={},n=[];t.colSpan&&(r.colSpan=t.colSpan),t.rowSpan&&(r.rowSpan=t.rowSpan),t.isTemplate&&n.push("e-templatecell"),t.isSelected&&(n.push.apply(n,["e-selectionbackground","e-active"]),i&&e.querySelector(".e-frame").classList.add("e-check")),t.isColumnSelected&&n.push.apply(n,["e-columnselection"]),t.cellType===re.Header?r[je]=t.colIndex+1:u(t.index)||(r[je]=t.index+1),t.visible||n.push("e-hide"),r.class=n,Yt(e,r)},o.prototype.getValue=function(e,t,i){return i.valueAccessor(e,t,i)},o}(),kl=function(){function o(){}return o.prototype.setOptions=function(e,t){for(var i=Object.keys(t),r=0;r<i.length;r++)Di(e,Mi[i[parseInt(r.toString(),10)]],t[i[parseInt(r.toString(),10)]])},o.prototype.setExpand=function(e,t){Di(e,Mi.expand,t)},o.prototype.setSort=function(e,t){Di(e,Mi.sort,t,typeof t=="boolean")},o.prototype.setBusy=function(e,t){Di(e,Mi.busy,t),Di(e,Mi.invalid,null,!0)},o.prototype.setGrabbed=function(e,t,i){Di(e,Mi.grabbed,t,i)},o.prototype.setDropTarget=function(e,t){Di(e,Mi.dropeffect,"copy",!t)},o}();function Di(o,e,t,i){if(i&&o){o.removeAttribute(e);return}o&&o.setAttribute(e,t)}var Mi={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},vc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Dl=function(o){vc(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),t.ariaService=new kl,t.hTxtEle=t.parent.createElement("span",{className:"e-headertext"}),t.sortEle=t.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),t.gui=t.parent.createElement("div"),t.chkAllBox=t.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":t.localizer.getConstant("SelectAllCheckbox")}}),t}return e.prototype.getGui=function(){return this.gui.cloneNode()},e.prototype.render=function(t,i,r){var n=this.element.cloneNode(),s=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(t,n,s)},e.prototype.refresh=function(t,i){this.clean(i);var r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(t,i,r)},e.prototype.clean=function(t){t.innerHTML=""},e.prototype.prepareHeader=function(t,i,r){var n=t.column,s={},a="",l=this.getGui(),h;if(de(l,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),u(n.headerValueAccessor)||(h=this.getValue(n.headerText,n)),this.parent.rowHeight&&this.parent.allowSorting&&n.allowSorting&&!u(n.field)&&i.classList.add("e-sort-icon"),n.type!=="checkbox"){var p=n.headerText;u(h)||(p=h);var c=this.hTxtEle.cloneNode();c[n.getDomSetter()]=this.parent.sanitize(p),l.appendChild(c)}else{n.editType="booleanedit";var d=fr(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+n.uid,d.insertBefore(this.chkAllBox.cloneNode(),d.firstChild),this.parent.cssClass&&B([d],[this.parent.cssClass]),l.appendChild(d),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,t),this.appendHtml(i,l),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&this.parent.filterSettings.type!=="FilterBar"&&n.allowFiltering&&!u(n.field)&&!(this.parent.showColumnMenu&&n.showColumnMenu)){de(r,{"e-mappinguid":"e-flmenu-"+n.uid}),a=a.length?a+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon");var f=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length){for(var g=this.parent.getForeignKeyColumns(),m=0;m<this.parent.columns.length;m++)for(var v=0;v<this.parent.filterSettings.columns.length;v++)if(this.parent.filterSettings.columns[parseInt(v.toString(),10)].field===n.field||g.length&&n.foreignKeyValue===this.parent.filterSettings.columns[parseInt(v.toString(),10)].field){r.classList.add("e-filtered"),f.push(n.field);break}}i.appendChild(r.cloneNode())}t.className&&i.classList.add(t.className),n.customAttributes&&Yt(i,n.customAttributes),this.parent.allowSorting&&n.allowSorting&&(s.sort="none",a=a.length?a+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&n.allowGrouping||this.parent.allowReordering&&n.allowReordering)&&(s.grabbed=!1,a=a.length?a+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&n.type!=="checkbox"&&!n.template&&(a=a.length?a+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(n,i);var y,R=this.parent,b=R.getColumnIndexByField(n.field);if(!u(n.headerTemplate)){var E=R.element.id+n.uid+"headerTemplate",k="isStringTemplate",F=n,W=this.parent.isReact&&typeof n.headerTemplate!="string"&&!(n.headerTemplate.prototype&&n.headerTemplate.prototype.CSPTemplate),te=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,ne=this.parent.printGridParent&&this.parent.printGridParent.isReact;if(W||te||ne){var ye={index:b};i.firstElementChild.innerHTML="",n.getHeaderTemplate()(Q(ye,F),R,"headerTemplate",E,this.parent[""+k],null,i.firstElementChild),this.parent.renderTemplates()}else y=n.getHeaderTemplate()(Q({index:b},F),R,"headerTemplate",E,this.parent[""+k],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",St(i.firstElementChild,y)}if(this.ariaService.setOptions(i,s),!u(n.headerTextAlign)||!u(n.textAlign)){var L=n.headerTextAlign||n.textAlign;L.toLowerCase()==="right"||L.toLowerCase()==="left"?i.classList.add(L.toLowerCase()==="right"?"e-rightalign":"e-leftalign"):L.toLowerCase()==="center"?i.classList.add("e-centeralign"):L.toLowerCase()==="justify"&&i.classList.add("e-justifyalign")}if(n.clipMode==="Clip"||!n.clipMode&&this.parent.clipMode==="Clip"?i.classList.add("e-gridclip"):(n.clipMode==="EllipsisWithTooltip"||!n.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&!(R.allowTextWrap&&(R.textWrapSettings.wrapMode==="Header"||R.textWrapSettings.wrapMode==="Both"))&&n.type!=="checkbox"&&i.classList.add("e-ellipsistooltip"),a){var P=this.parent.createElement("span",{id:"headerTitle-"+n.uid,innerHTML:a});P.style.display="none",i.appendChild(P),i.setAttribute("aria-describedby",P.id)}i.setAttribute("aria-rowspan",(u(t.rowSpan)?1:t.rowSpan).toString()),i.setAttribute("aria-colspan","1");var D=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if((this.parent.isReact&&this.parent.requireTemplateRef||D&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!u(n.headerTemplate)){var N=this;N.parent.renderTemplates(function(){N.parent.trigger(gs,{cell:t,node:i})})}else this.parent.trigger(gs,{cell:t,node:i});return this.parent.isFrozenGrid()&&_l(this.parent,n,i),i},e.prototype.getValue=function(t,i){return i.headerValueAccessor(t,i)},e.prototype.extendPrepareHeader=function(t,i){if(this.parent.showColumnMenu&&t.showColumnMenu&&!u(t.field)){var r=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length){for(var s=0;s<this.parent.columns.length;s++)for(var a=0;a<this.parent.filterSettings.columns.length;a++)if(this.parent.filterSettings.columns[parseInt(a.toString(),10)].field===t.field){r.classList.add("e-filtered"),n.push(t.field);break}}i.classList.add("e-fltr-icon"),i.appendChild(r)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=t.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(l)}return i},e.prototype.appendHtml=function(t,i){return t.appendChild(i),t},e}(kt),yc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),xa=function(o){yc(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),t}return e.prototype.render=function(t,i,r){var n=this.element.cloneNode(),s=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":t.column.uid}}),a=t.column;if(n.appendChild(s),u(a.headerTemplate)?this.appendHtml(s,this.parent.sanitize(a.headerText),a.getDomSetter()):St(s,a.getHeaderTemplate()(a,this.parent,"headerTemplate",null,null,null,null,this.parent.root)),t.column.toolTip&&n.setAttribute("title",t.column.toolTip),a.clipMode==="Clip"||!a.clipMode&&this.parent.clipMode==="Clip"?n.classList.add("e-gridclip"):(a.clipMode==="EllipsisWithTooltip"||!a.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&n.classList.add("e-ellipsistooltip"),!u(t.column.textAlign)){var l={right:"e-rightalign",left:"e-leftalign",center:"e-centeralign",justify:"e-justifyalign"};l[t.column.textAlign.toLowerCase()]&&n.classList.add(l[t.column.textAlign.toLowerCase()])}if(t.column.customAttributes&&Yt(n,t.column.customAttributes),n.setAttribute("colspan",t.colSpan.toString()),n.setAttribute("aria-colspan",t.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var h=this.parent.createElement("div");h.className=t.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(h)}if(t.className&&n.classList.add(t.className),this.parent.trigger(gs,{cell:t,node:n}),sn(a)==="Left")if(n.classList.add("e-leftfreeze"),a.border==="Left"&&n.classList.add("e-freezeleftborder"),a.index===0)ct(n,this.parent.getIndentCount()*30,this.parent.enableRtl,"Left");else{for(var p=this.parent.getColumns(),c=this.parent.getIndentCount()*30,d=0;d<p.length&&!(a.index<p[parseInt(d.toString(),10)].index);d++)p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()));ct(n,c,this.parent.enableRtl,"Left")}else if(sn(a)==="Right"){n.classList.add("e-rightfreeze");for(var p=this.parent.getColumns(),c=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0,d=p.length-1;d>=0&&!(Ra(a,p[parseInt(d.toString(),10)].uid)||a.index>p[parseInt(d.toString(),10)].index);d--)p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()));ct(n,c,this.parent.enableRtl,"Right"),a.border==="Right"&&n.classList.add("e-freezerightborder")}else if(sn(a)==="Fixed"){n.classList.add("e-fixedfreeze");var p=this.parent.getColumns(),c=0;this.parent.getVisibleFrozenLeftCount()?c=this.parent.getIndentCount()*30:this.parent.getFrozenMode()==="Right"&&(c=this.parent.groupSettings.columns.length*30);for(var d=0;d<p.length;d++)a.index>p[parseInt(d.toString(),10)].index&&(p[parseInt(d.toString(),10)].freeze==="Left"||p[parseInt(d.toString(),10)].isFrozen||p[parseInt(d.toString(),10)].freeze==="Fixed")&&p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()));ct(n,c-1,this.parent.enableRtl,"Left"),c=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0;for(var d=p.length-1;d>=0;d--)if(a.index<p[parseInt(d.toString(),10)].index){if(Ra(a,p[parseInt(d.toString(),10)].uid)||a.index>p[parseInt(d.toString(),10)].index)break;(p[parseInt(d.toString(),10)].freeze==="Right"||p[parseInt(d.toString(),10)].freeze==="Fixed")&&p[parseInt(d.toString(),10)].visible&&(c+=parseFloat(p[parseInt(d.toString(),10)].width.toString()))}ct(n,c-1,this.parent.enableRtl,"Right")}else n.classList.add("e-unfreeze");return n},e}(kt),Sc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ms=function(o){Sc(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-indentcell"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return Yt(r,t.attributes),r},e}(kt),Ml=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Cc=function(o){Ml(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.cellUid=0,t.element=t.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:t.parent.element.id+"captioncell",tabindex:"-1"}}),t}return e.prototype.render=function(t,i){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var r=this.element.cloneNode(),n=this.parent,s=t.column,a=s.getDomSetter?s.getDomSetter():"innerHTML",l,h,p;i.headerText=t.column.headerText,t.isForeignKey&&(h=this.format(t.column,t.column.valueAccessor("foreignKey",i,t.column)));for(var c=t.isForeignKey?h:t.column.enableGroupByFormat?i.key:this.format(t.column,t.column.valueAccessor("key",i,t.column)),d=0;d<n.aggregates.length;d++)for(var f=function(W){if(n.getVisibleColumns()[0].field===n.aggregates[parseInt(d.toString(),10)].columns[parseInt(W.toString(),10)].field&&n.aggregates[parseInt(d.toString(),10)].columns[parseInt(W.toString(),10)].groupCaptionTemplate){var te=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(W.toString(),10)].groupCaptionTemplate;if(typeof te=="string"&&te.includes("$"))p=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(W.toString(),10)].groupCaptionTemplate.split("$")[0]+i[n.getVisibleColumns()[0].field][n.aggregates[parseInt(d.toString(),10)].columns[parseInt(W.toString(),10)].type]+n.aggregates[parseInt(d.toString(),10)].columns[parseInt(W.toString(),10)].groupCaptionTemplate.split("}")[1];else{var ne=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(W.toString(),10)],ye=ne.getTemplate(re.CaptionSummary),L="";if(!u(ye)){var P=ye.fn(i[ne.columnName],g.parent,ye.property,L),D=g.parent.printGridParent&&g.parent.printGridParent.isReact;(g.parent.isReact||D)&&typeof ne.groupCaptionTemplate!="string"?g.parent.renderTemplates(function(){P&&P.length&&(u(n.groupSettings.captionTemplate)?r.innerText+=" "+P[0].textContent:r.appendChild(P[0]))}):P&&P.length&&(u(n.groupSettings.captionTemplate)?p=P[0].textContent:p=P)}}return"break"}},g=this,m=0;m<n.aggregates[parseInt(d.toString(),10)].columns.length;m++){var v=f(m);if(v==="break")break}if(u(n.groupSettings.captionTemplate))n.groupSettings.enableLazyLoading?r[""+a]=this.parent.sanitize(t.column.headerText)+": "+this.parent.sanitize(c)+(p?"   "+p:""):r[""+a]=this.parent.sanitize(t.column.headerText)+": "+this.parent.sanitize(c)+" - "+i.count+" "+(i.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(p?"   "+p:"");else{var y=this.parent.isReact&&typeof n.groupSettings.captionTemplate!="string"&&!(n.groupSettings.captionTemplate.prototype&&n.groupSettings.captionTemplate.prototype.CSPTemplate),R=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,b=this.parent.printGridParent&&this.parent.printGridParent.isReact;if(y||R||b){var E=n.element.id+"captionTemplate",k="groupKey",F="key";i[""+k]=i[""+F],qe(n.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",E,null,null,r),this.parent.renderTemplates()}else this.parent.isVue||n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isVue?l=qe(n.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",null,null,null,null,n.root):l=qe(n.groupSettings.captionTemplate)(i);!y&&!R&&!b&&(St(r,l),p&&p.length&&p[0].textContent&&r.appendChild(p[0]))}return r.setAttribute("colspan",t.colSpan.toString()),r.setAttribute("aria-label",r.innerHTML+this.localizer.getConstant("GroupCaption")),r.setAttribute("title",r.textContent),r},e}(kt),bc=function(o){Ml(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.innerHTML="&nbsp;",r.setAttribute("colspan",t.colSpan.toString()),r},e}(kt),wc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ic=function(o){wc(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return e.prototype.render=function(t,i,r,n){var s=this.element.cloneNode();return s.setAttribute("ej-mappingname",i.field),s.setAttribute("ej-mappingvalue",i.key),s.setAttribute("aria-expanded",n?"true":"false"),s.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?(t.cellType=re.Indent,s.className=n?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(s.className=n?"e-recordplusexpand":"e-recordpluscollapse",s.appendChild(this.parent.createElement("a",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:n?this.localizer.getConstant("Expanded"):this.localizer.getConstant("Collapsed")}}))),s},e}(Ms),xc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rc=function(o){xc(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-grouptopleftcell"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),r},e}(kt),Ec=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ac=function(o){Ec(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-detailheadercell"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),r},e}(kt),Tc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Lc=function(o){Tc(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),t}return e.prototype.render=function(t,i,r){var n=this.element.cloneNode();return r&&!u(r.class)?(n.className="",n.className=r.class,n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),t.isSelected&&n.classList.add("e-selectionbackground","e-active"),n},e}(kt),Fc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),kc=function(o){Fc(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();if(r.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),t.isSelected&&(r.classList.add("e-selectionbackground"),r.classList.add("e-active")),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;ct(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(kt),Dc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mc=function(o){Dc(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-rowdragheader"}),t}return e.prototype.render=function(t,i){var r=this.element.cloneNode();if(r.appendChild(pe("div",{className:"e-emptycell"})),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;ct(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(kt),Pc=function(){function o(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new lc(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return o.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(Ft.Header),this.contentRenderer=this.renderer.getRenderer(Ft.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),this.parent.height!=="auto"&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},o.prototype.refresh=function(e){var t=this;e===void 0&&(e={requestType:"refresh"});var i=this.parent;i.notify(e.requestType+"-begin",e),i.trigger(_t,e,function(r){if(r===void 0&&(r={requestType:"refresh"}),r.cancel){if(i.notify(Es,r),r.action==="clearFilter"&&t.parent.filterSettings.type==="Menu"){t.parent.filterSettings.columns[t.parent.filterModule.filterObjIndex]=t.parent.filterModule.prevFilterObject;var n=t.parent.showColumnMenu&&t.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",s=t.parent.element.querySelector('[e-mappinguid="'+t.parent.filterModule.column.uid+'"]').parentElement,a=s.querySelector(n);u(t.parent.filterModule.prevFilterObject)||a.classList.add("e-filtered")}if(r.action==="clear-filter"&&(t.parent.filterSettings.type==="CheckBox"||t.parent.filterSettings.type==="Excel")&&(t.parent.filterSettings.columns=t.parent.filterModule.checkboxPrevFilterObject),r.requestType==="grouping"){var l=i.groupSettings.columns.indexOf(r.columnName);if(l!==-1){i.setProperties({groupSettings:{Columns:i.groupSettings.columns.splice(l,1)}},!0),i.setProperties({sortSettings:{Columns:i.sortSettings.columns.splice(l,1)}},!0);var h=i.getColumnByField(r.columnName),p=i.getColumnHeaderByField(h.field);h.visible=!u(p)&&!p.classList.contains("e-hide")}}return}if(t.parent.notify(Al,r),r.requestType==="virtualscroll"&&(t.parent.getDataModule().isRemote()||"result"in t.parent.dataSource)&&r.virtualInfo&&r.virtualInfo.direction==="down"&&(t.parent.contentModule.prevInfo=r.virtualInfo),t.parent.groupModule&&r.preventFocusOnGroup&&(t.parent.groupModule.preventFocusOnGroup=r.preventFocusOnGroup),i.allowSelection&&(r.action==="clearFilter"||r.action==="clear-filter"||r.requestType==="searching"&&r.searchString===""||r.action==="add")&&(i.selectionModule.rmtHdrChkbxClicked=!1,i.selectionModule.isPartialSelection&&(i.selectionModule.isHdrSelectAllClicked=!1)),i.allowPaging&&i.pageSettings.pageSizes&&i.pagerModule.pagerObj.isAllPage&&r.action==="add"&&r.requestType==="save"&&i.pagerModule.pagerObj.checkAll&&i.setProperties({pageSettings:{pageSize:i.pageSettings.pageSize+1}},!0),r.requestType==="delete"&&i.allowPaging){var c=r.data.length,d=i.pageSettings.totalRecordsCount-c,f=i.getCurrentViewRecords().length;(!(f-c)&&d&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===d||d&&d<=c)&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:d,currentPage:Math.ceil(d/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=d)}r.requestType==="reorder"&&t.parent.dataSource&&"result"in t.parent.dataSource||(r.requestType==="paging"||r.requestType==="columnstate"||r.requestType==="reorder")&&t.parent.groupSettings.enableLazyLoading&&t.parent.groupSettings.columns.length&&(t.parent.enableVirtualization?t.parent.lazyLoadRender:t.parent.contentModule).getGroupCache()[t.parent.pageSettings.currentPage]?t.contentRenderer.refreshContentRows(r):t.refreshDataManager(r)})},o.prototype.resetTemplates=function(){var e=this.parent,t=e.getColumns();if(e.detailTemplate){var i=e.element.id+"detailTemplate";po[""+i]=[],Nt(i)}e.groupSettings.captionTemplate&&Nt(e.element.id+"captionTemplate"),e.rowTemplate&&Nt(e.element.id+"rowTemplate"),e.toolbarTemplate&&Nt(e.element.id+"toolbarTemplate"),e.pageSettings.template&&Nt(e.element.id+"_template");for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].template&&(po[e.element.id+t[parseInt(r.toString(),10)].uid]=[],Nt(e.element.id+t[parseInt(r.toString(),10)].uid)),t[parseInt(r.toString(),10)].headerTemplate&&Nt(e.element.id+t[parseInt(r.toString(),10)].uid+"headerTemplate"),t[parseInt(r.toString(),10)].filterTemplate&&Nt(e.element.id+t[parseInt(r.toString(),10)].uid+"filterTemplate");for(var n="guid",s=0;s<e.aggregates.length;s++)for(var a=0;a<e.aggregates[parseInt(s.toString(),10)].columns.length;a++){if(e.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].footerTemplate){var l=e.element.id+e.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"footerTemplate";Nt(l)}if(e.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].groupFooterTemplate){var l=e.element.id+e.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"groupFooterTemplate";Nt(l)}if(e.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].groupCaptionTemplate){var l=e.element.id+e.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"groupCaptionTemplate";Nt(l)}}},o.prototype.refreshComplete=function(e){this.parent.trigger(dt,e)},o.prototype.refreshDataManager=function(e){var t=this;e===void 0&&(e={});var i=this.parent,r=i.loadingIndicator.indicatorType==="Shimmer"&&e.requestType!=="virtualscroll"&&e.requestType!=="infiniteScroll"||(e.requestType==="virtualscroll"||e.requestType==="infiniteScroll")&&i.enableVirtualMaskRow;e.requestType!=="virtualscroll"&&!e.isCaptionCollapse&&!r&&this.parent.showSpinner(),r&&i.showMaskRow(e.requestType==="virtualscroll"?e.virtualInfo.sentinelInfo.axis:e.requestType==="infiniteScroll"?e.direction:void 0),this.parent.notify(Ep,e),this.emptyGrid=!1;var n,s=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+ot),!0),s){var a=new pt;n=this.getFData(a,e)}n?n=n.then(function(c){var d=t.data.generateQuery().requiresCount();if(t.emptyGrid){var f=new pt;return f.resolve({result:[],count:0}),f.promise}return t.data.getData(e,d)}):(i.allowPaging&&!i.getDataModule().dataManager.dataSource.offline&&i.pageSettings&&i.pageSettings.pageSizes&&i.pagerModule&&i.pagerModule.pagerObj&&i.pagerModule.pagerObj.isAllPage&&(i.pagerModule.pagerObj.isAllPage=void 0),n=this.data.getData(e,this.data.generateQuery().requiresCount()));var l=this.parent.getForeignKeyColumns(),h=l.length;if(this.parent.columnQueryMode==="ExcludeHidden"&&h&&(h=l.filter(function(c){return c.visible!==!1}).length),h&&(!s||this.parent.searchSettings.key.length)){var p=new pt;n=n.then(function(c){return t.parent.notify(ha,{dataManager:n,result:c,promise:p,action:e}),p.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(n=n.then(function(c){return t.validateGroupRecords(c)})),n.then(function(c){return t.dataManagerSuccess(c,e)}).catch(function(c){return t.dataManagerFailure(c,e)})},o.prototype.getFData=function(e,t){return this.parent.notify(ha,{isComplex:!0,promise:e,action:t}),e.promise},o.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||!u(e.searchSettings.key)&&e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},o.prototype.foreignKey=function(e){var t=this;return e.some(function(i){var r=!1;return r=t.parent.filterSettings.columns.some(function(n){return i.uid===n.uid}),!!(r||t.parent.searchSettings.key.length)})},o.prototype.sendBulkRequest=function(e){var t=this;e.requestType="batchsave";var i=this.parent;if(i.allowPaging&&i.pageSettings.pageSizes&&i.pagerModule.pagerObj.isAllPage&&i.pagerModule.pagerObj.checkAll){var r=e.changes.addedRecords.length;r&&i.setProperties({pageSettings:{pageSize:i.pageSettings.pageSize+r}},!0)}i.allowPaging&&(e.changes.addedRecords.length||e.changes.deletedRecords.length||e.changes.changedRecords.length)&&i.pageSettings&&i.pageSettings.pageSizes&&i.pagerModule&&i.pagerModule.pagerObj&&!i.getDataModule().dataManager.dataSource.offline&&i.pagerModule.pagerObj.isAllPage&&(i.pagerModule.pagerObj.isAllPage=void 0);var n=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),s=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline){this.refreshDataManager({requestType:"batchsave"});return}else n.then(function(a){t.data.getData(e,s).then(function(l){return t.dmSuccess(l,e)}).catch(function(l){return t.dmFailure(l,e)})}).catch(function(a){return t.dmFailure(a,e)})},o.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},o.prototype.dmFailure=function(e,t){this.dataManagerFailure(e,t)},o.prototype.renderEmptyRow=function(){this.emptyRow(!0)},o.prototype.emptyRow=function(e){var t=this.parent,i=this.contentRenderer.getTable().querySelector(Fe);u(i)||fe(i),i=this.parent.createElement(Fe,{attrs:{role:"rowgroup"}});var r=t.allowRowDragAndDrop&&u(t.rowDropSettings.targetID)?1:0;(t.detailTemplate||t.childGrid)&&++r;var n=t.editSettings.showAddNewRow&&t.editSettings.newRowPosition==="Bottom"?"e-emptyrow e-show-added-row":"e-emptyrow",s=this.parent.createElement("tr",{className:n,attrs:{role:"row"}}),a;if(t.emptyRecordTemplate){var l=t.element.id+"emptyRecordTemplate";a=this.parent.createElement("td",{attrs:{colspan:(t.getVisibleColumns().length+r+t.groupSettings.columns.length).toString()}}),t.isVue||t.parentDetails&&t.parentDetails.parentInstObj&&t.parentDetails.parentInstObj.isVue?a.appendChild(t.getEmptyRecordTemplate()(t.dataSource,t,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[1]):a.appendChild(t.getEmptyRecordTemplate()(t.dataSource,t,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[0]),t.isReact&&this.parent.renderTemplates()}else a=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(t.getVisibleColumns().length+r+(u(t.groupSettings.columns)?0:t.groupSettings.columns.length)).toString()}});t.isFrozenGrid()&&(a.classList.add("e-leftfreeze"),a.style.left="0px"),t.frozenRows&&t.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty"),s.appendChild(a),i.appendChild(s),this.contentRenderer.renderEmpty(i),e&&(this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.trigger(Ti,{}),this.parent.notify(ei,{rows:[new ir({isDataRow:!0,cells:[new Cr({isDataCell:!0,visible:!0})]})]}),t.editSettings.showAddNewRow&&(t.addRecord(),this.parent.notify(Yi,{})))},o.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},o.prototype.updateColumnType=function(e){for(var t=this.parent.getColumns(),i,r="customFormat",n="equalTo",s=e&&e.items?e.items[0]:e,a=this.locator.getService("valueFormatter"),l=0,h=t.length;l<h;l++){i=Si(t[parseInt(l.toString(),10)].field||"",s),u(t[parseInt(l.toString(),10)][""+r])||(t[parseInt(l.toString(),10)].format=t[parseInt(l.toString(),10)][""+r]),!u(t[parseInt(l.toString(),10)].validationRules)&&!u(t[parseInt(l.toString(),10)].validationRules[""+n])&&(t[parseInt(l.toString(),10)].validationRules[""+n][0]=this.parent.element.id+t[parseInt(l.toString(),10)].validationRules[""+n][0]),t[parseInt(l.toString(),10)].isForeignColumn()&&t[parseInt(l.toString(),10)].columnData&&(i=Si(t[parseInt(l.toString(),10)].foreignKeyValue||"",t[parseInt(l.toString(),10)].columnData[0])),u(i)?t[parseInt(l.toString(),10)].type=t[parseInt(l.toString(),10)].type||null:(this.isColTypeDef=!0,t[parseInt(l.toString(),10)].type||(t[parseInt(l.toString(),10)].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var p=new Lr;t[parseInt(l.toString(),10)].format&&(t[parseInt(l.toString(),10)].format.skeleton||t[parseInt(l.toString(),10)].format.format&&typeof t[parseInt(l.toString(),10)].format.format=="string")&&(t[parseInt(l.toString(),10)].setFormatter(p.getFormatFunction(Q({},t[parseInt(l.toString(),10)].format))),t[parseInt(l.toString(),10)].setParser(p.getParserFunction(t[parseInt(l.toString(),10)].format))),typeof t[parseInt(l.toString(),10)].format=="string"?Os(this.locator,t[parseInt(l.toString(),10)]):!t[parseInt(l.toString(),10)].format&&t[parseInt(l.toString(),10)].type==="number"&&t[parseInt(l.toString(),10)].setParser(a.getParserFunction({format:"n2"})),t[parseInt(l.toString(),10)].type==="dateonly"&&!t[parseInt(l.toString(),10)].format&&(t[parseInt(l.toString(),10)].format="yMd",Os(this.locator,t[parseInt(l.toString(),10)]))}},o.prototype.dataManagerSuccess=function(e,t){var i=this,r=this.parent;this.contentRenderer=this.renderer.getRenderer(Ft.Content),this.headerRenderer=this.renderer.getRenderer(Ft.Header),e.actionArgs=t;var n=!!(r.childGrid||r.detailTemplate),s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!r.groupSettings.enableLazyLoading&&(t.requestType==="delete"&&!n||t.requestType==="save"&&this.parent.infiniteScrollModule.requestType==="add"&&!(r.sortSettings.columns.length||r.filterSettings.columns.length||this.parent.groupSettings.columns.length||r.searchSettings.key||n));r.trigger(Gu,e,function(a){if(!a.cancel){a.result=u(a.result)?[]:a.result;var l=Object.keys(a.result).length;if(!i.parent.isDestroyed){if(!r.getColumns().length&&!l&&!(r.columns.length&&r.columns[0]instanceof tt)){r.hideSpinner();return}if(i.isInfiniteEnd(t)&&!l){i.parent.notify(ma,{e:t,result:e.result,count:e.count,agg:e.aggregates});return}if(i.parent.isEdit=!1,i.parent.notify(Ip,{}),i.parent.notify(ws,{}),t&&!((t.requestType==="infiniteScroll"||t.requestType==="delete"||t.action==="add")&&r.enableInfiniteScrolling)&&i.parent.notify(rc,{type:"refreshCommandColumn"}),i.contentRenderer.prevCurrentView=!u(i.parent.currentViewData)&&i.parent.currentViewData.slice(),r.currentViewData=a.result,r.notify(Gp,{args:t,data:a.result}),a.count&&!r.allowPaging&&(r.enableVirtualization||r.enableInfiniteScrolling)&&(r.totalDataRecordsCount=a.count),!l&&a.count&&r.allowPaging&&t&&t.requestType!=="delete"){i.parent.groupSettings.enableLazyLoading&&(t.requestType==="grouping"||t.requestType==="ungrouping")&&i.parent.notify(Ju,t),r.prevPageMoving=!0,r.pageSettings.totalRecordsCount=a.count,t.requestType!=="paging"&&(r.pageSettings.currentPage=Math.ceil(a.count/r.pageSettings.pageSize)),r.dataBind();return}if((!r.getColumns().length&&l||!i.isLayoutRendered)&&!$t(r)&&(r.removeMaskRow(),i.updatesOnInitialRender(a)),!i.isColTypeDef&&r.getCurrentViewRecords()&&(i.data.dataManager.dataSource.offline&&r.dataSource&&r.dataSource.length?i.updateColumnType(r.dataSource[0]):i.updateColumnType(r.getCurrentViewRecords()[0])),!i.parent.isInitialLoad&&i.parent.groupSettings.disablePageWiseAggregates&&!i.parent.groupSettings.columns.length&&(a.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),(i.parent.isReact||i.parent.isVue)&&!u(t)&&t.requestType!=="infiniteScroll"&&!t.isFrozen&&En(i.parent,["footerTemplate"]),i.parent.isAngular&&i.parent.allowGrouping&&i.parent.groupSettings.captionTemplate&&!(!u(t)&&t.requestType==="infiniteScroll")&&i.parent.destroyTemplate(["groupSettings_captionTemplate"]),i.parent.notify(er,Q({count:a.count,result:a.result,aggregates:a.aggregates,loadSummaryOnEmpty:!1},t)),(r.groupSettings.columns.length||t&&t.requestType==="ungrouping")&&t&&t.requestType!=="filtering"&&i.headerRenderer.refreshUI(),l){if($t(r)){var h="content";t.scrollTop={top:i.contentRenderer[""+h].scrollTop}}s?i.parent.notify(ma,{e:t,result:e.result,count:e.count,agg:e.aggregates}):i.parent.enableImmutableMode?i.contentRenderer.immutableModeRendering(t):i.contentRenderer.refreshContentRows(t)}else{if(t&&t.isCaptionCollapse)return;if(!r.getColumns().length){r.element.innerHTML="",alert(i.l10n.getConstant("EmptyDataSourceError"));return}if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector("."+ot),!1),r.removeMaskRow(),i.renderEmptyRow(),r.enableColumnVirtualization&&!l&&i.parent.notify(Xe,{rows:r.getRowsObject(),args:{}}),t){var p=(t.requestType||"").toLowerCase()+"-complete";i.parent.notify(p,t),t.requestType==="batchsave"&&(t.cancel=!1,t.rows=[],t.isFrozen=!t.isFrozen,i.parent.trigger(dt,t))}i.parent.autoFit&&i.parent.preventAdjustColumns(),i.parent.hideSpinner()}i.parent.notify(sp,{}),i.setRowCount(i.parent.getCurrentViewRecords().length),"query"in e&&(i.parent.getDataModule().isQueryInvokedFromData=!1)}}})},o.prototype.dataManagerFailure=function(e,t){u(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+ot),{busy:!1,invalid:!0}),this.setRowCount(1)),this.parent.trigger(ku,e&&e.error?e:{error:e}),this.parent.hideSpinner(),this.parent.removeMaskRow(),!(t.requestType==="save"||t.requestType==="delete"||t.name==="bulk-save")&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:e}))},o.prototype.setRowCount=function(e){this.ariaService.setOptions(this.parent.element,{rowcount:e?e.toString():"1"})},o.prototype.isInfiniteEnd=function(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&e.requestType==="delete"},o.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0;var t=!1;this.parent.columns.length<1&&(this.buildColumns(e.result[0]),t=!0),Cn(this.parent.columns,null,this.parent),t&&this.parent.notify(Fs,{}),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Sr,{})},o.prototype.iterateComplexColumns=function(e,t,i){for(var r=Object.keys(e),n=0;n<r.length;n++){var s=typeof e[r[parseInt(n.toString(),10)]]=="object"&&e[r[parseInt(n.toString(),10)]]&&!(e[r[parseInt(n.toString(),10)]]instanceof Date)?Object.keys(e[r[parseInt(n.toString(),10)]]):[];s.length?this.iterateComplexColumns(e[r[parseInt(n.toString(),10)]],t+(r[parseInt(n.toString(),10)]+"."),i):(i[this.counter]=t+r[parseInt(n.toString(),10)],this.counter++)}},o.prototype.buildColumns=function(e){var t=[],i={};this.iterateComplexColumns(e,"",i);for(var r=Object.keys(i).filter(function(a){return i[""+a]!=="BlazId"}).map(function(a){return i[""+a]}),n=0,s=r.length;n<s;n++)t[parseInt(n.toString(),10)]={field:r[parseInt(n.toString(),10)]},this.parent.enableColumnVirtualization&&(t[parseInt(n.toString(),10)].width=u(t[parseInt(n.toString(),10)].width)?200:t[parseInt(n.toString(),10)].width);this.parent.setProperties({columns:t},!0)},o.prototype.instantiateRenderer=function(){this.renderer.addRenderer(Ft.Header,new mc(this.parent,this.locator)),this.renderer.addRenderer(Ft.Content,new gc(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(re.Header,new Dl(this.parent,this.locator)),e.addCellRenderer(re.Data,new kt(this.parent,this.locator)),e.addCellRenderer(re.StackedHeader,new xa(this.parent,this.locator)),e.addCellRenderer(re.Indent,new Ms(this.parent,this.locator)),e.addCellRenderer(re.GroupCaption,new Cc(this.parent,this.locator)),e.addCellRenderer(re.GroupCaptionEmpty,new bc(this.parent,this.locator)),e.addCellRenderer(re.Expand,new Ic(this.parent,this.locator)),e.addCellRenderer(re.HeaderIndent,new Rc(this.parent,this.locator)),e.addCellRenderer(re.StackedHeader,new xa(this.parent,this.locator)),e.addCellRenderer(re.DetailHeader,new Ac(this.parent,this.locator)),e.addCellRenderer(re.RowDragHIcon,new Mc(this.parent,this.locator)),e.addCellRenderer(re.DetailExpand,new Lc(this.parent,this.locator)),e.addCellRenderer(re.DetailFooterIntent,new Ms(this.parent,this.locator)),e.addCellRenderer(re.RowDragIcon,new kc(this.parent,this.locator))},o.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on(ro,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(yr,this.refresh,this),this.parent.on(rp,this.refreshComplete,this),this.parent.on(op,this.sendBulkRequest,this),this.parent.on(Cl,function(){e.emptyGrid=!0},this),this.parent.on(Sr,this.dynamicColumnChange,this))},o.prototype.validateGroupRecords=function(e){var t=this,i=e.result.length-1;if(i<0)return Promise.resolve(e);var r=e.result[0],n=e.result[parseInt(i.toString(),10)],s=[],a=function(v){for(var y=[r,n],R=0;R<y.length;R++)s.push(new xe("field","==",y[parseInt(R.toString(),10)].field).and(t.getPredicate("key","equal",y[parseInt(R.toString(),10)].key)));v.where(xe.or(s))},l=new ae;a(l);var h=new _(e.result),p=h.executeLocal(l),c=this.data.generateQuery(!0),d=[];if(this.data.isRemote()){for(var f=[r,n],g=0;g<f.length;g++)d.push(this.getPredicate(f[parseInt(g.toString(),10)].field,"equal",f[parseInt(g.toString(),10)].key));c.where(xe.or(d))}else a(c);var m=new pt;return this.data.getData({},c).then(function(v){t.updateGroupInfo(p,v.result),m.resolve(e)}).catch(function(v){return m.reject(v)}),m.promise},o.prototype.getPredicate=function(e,t,i){return i instanceof Date?Ni({field:e,operator:t,value:i}):new xe(e,t,i)},o.prototype.updateGroupInfo=function(e,t){for(var i=new _(t),r=e,n=0;n<r.length;n++){var s=i.executeLocal(new ae().where(new xe("field","==",r[parseInt(n.toString(),10)].field).and(this.getPredicate("key","equal",r[parseInt(n.toString(),10)].key))))[0];if(!u(s)){r[parseInt(n.toString(),10)].count=s.count;var a=r[parseInt(n.toString(),10)].items,l=s.items;a.GroupGuid&&(r[parseInt(n.toString(),10)].items=this.updateGroupInfo(r[parseInt(n.toString(),10)].items,s.items));for(var h=this.parent.aggregates,p=0;p<h.length;p++)for(var c=h[parseInt(p.toString(),10)],d=0;d<c.columns.length;d++)for(var f=c.columns[parseInt(d.toString(),10)],g=f.type instanceof Array?f.type:[f.type],m=0;m<g.length;m++){var v=f.field+" - "+g[parseInt(m.toString(),10)].toLowerCase(),y=a.level?l.records:s.items,R=this.parent;if(g[parseInt(m.toString(),10)]==="Custom"){var b=a.level?l:s,E=f.customAggregate;typeof E=="string"&&(E=oe(E,window)),r[parseInt(n.toString(),10)].aggregates[""+v]=E?E.call(R,b,c.columns[parseInt(d.toString(),10)]):""}else r[parseInt(n.toString(),10)].aggregates[""+v]=A.aggregates[g[parseInt(m.toString(),10)].toLowerCase()](y,c.columns[parseInt(d.toString(),10)].field)}}}return e},o}(),Oc=function(){function o(){this.cellRenderMap={}}return o.prototype.addCellRenderer=function(e,t){e=typeof e=="string"?e:Ri(re,e),u(this.cellRenderMap[""+e])&&(this.cellRenderMap[""+e]=t)},o.prototype.getCellRenderer=function(e){if(e=typeof e=="string"?e:Ri(re,e),u(this.cellRenderMap[""+e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[""+e]},o}(),Bc=function(){function o(e,t){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}return o.prototype.addEventListener=function(){this.evtHandlers=[{event:Rl,handler:this.closeCustomDialog},{event:Ls,handler:this.refreshCustomFilterOkBtn},{event:_p,handler:this.renderResponsiveContextMenu},{event:Up,handler:this.renderCustomFilterDiv},{event:jp,handler:this.customExFilterClose},{event:Wp,handler:this.refreshCustomFilterClearBtn}],ii(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(dt,this.onActionCompleteFn)},o.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},o.prototype.renderCustomFilterDiv=function(){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),t=e.querySelector(".e-dlg-custom-header"),i=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",t.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var r=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),r.appendChild(this.customExcelFilterParent)},o.prototype.renderResponsiveContextMenu=function(e){if(this.action===ue.isFilter){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),r=i.querySelector(".e-dlg-closeicon-btn"),n=i.querySelector(".e-dlg-custom-header");if(e.isOpen){t.firstChild.style.display="none",t.appendChild(e.target),r.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header;var s=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});s.appendChild(a),this.backBtn=new Hi({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(s),n.parentElement.insertBefore(s,n)}else this.backBtn&&!this.isCustomDlgRender&&(t.firstChild.style.display="",fe(this.backBtn.element),r.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:ue.isFilter},e.col))}},o.prototype.refreshCustomFilterClearBtn=function(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")},o.prototype.refreshCustomFilterOkBtn=function(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled),this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=e.disabled)},o.prototype.columnMenuResponsiveContent=function(e,t,i){var r=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+e.toLowerCase()+"div"+(i?" e-disabled":"")}),n=this.parent.createElement("span",{className:"e-icons e-res"+e.toLowerCase()+"-icon e-btn-icon"}),s=this.parent.createElement("span",{innerHTML:t,className:"e-rescolumn-menu e-res-header-text"});r.appendChild(n),r.appendChild(s),this.customColumnDiv.appendChild(r)},o.prototype.renderResponsiveContent=function(e,t){var i=this,r=this.parent,n=this.action===ue.isColumnChooser;if(e||n)return this.filterParent=this.parent.createElement("div",{className:(n?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(n?"columchooser":e.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=r.createElement("div",{className:"columndiv columnmenudiv"}),this.customColumnDiv.style.width="100%",this.parent.showColumnMenu&&this.parent.rowRenderingMode==="Horizontal"&&this.action===ue.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",r.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",r.localeObj.getConstant("AutoFit")),t.allowGrouping&&r.allowGrouping&&(this.columnMenuResponsiveContent("Group",r.localeObj.getConstant("Group"),r.groupSettings.columns.indexOf(t.field)>=0),this.columnMenuResponsiveContent("UnGroup",r.localeObj.getConstant("Ungroup"),r.groupSettings.columns.indexOf(t.field)<0)),t.allowSorting&&r.allowSorting){for(var s="None",a=this.parent.sortSettings.columns,l=0;l<a.length;l++)if(a[parseInt(l.toString(),10)].field===t.field){s=a[parseInt(l.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",r.localeObj.getConstant("SortAscending"),s==="Ascending"),this.columnMenuResponsiveContent("descending",r.localeObj.getConstant("SortDescending"),s==="Descending")}r.showColumnChooser&&this.columnMenuResponsiveContent("Column",r.localeObj.getConstant("Columnchooser")),t.allowFiltering&&r.allowFiltering&&this.columnMenuResponsiveContent("Filter",r.localeObj.getConstant("FilterMenu"))}else{var h=r.getColumns(),p=r.createElement("div",{className:"e-ressortbutton-parent"}),c=[],d=this.action===ue.isSort,f=this.action===ue.isFilter;if(f)for(var l=0;l<r.filterSettings.columns.length;l++)c.push(r.filterSettings.columns[parseInt(l.toString(),10)].field);for(var l=0;l<h.length;l++)if(!(!h[parseInt(l.toString(),10)].visible||!h[parseInt(l.toString(),10)].allowSorting&&d||!h[parseInt(l.toString(),10)].allowFiltering&&f)){var g=r.createElement("div",{className:"e-responsivecoldiv"});g.setAttribute("data-e-mappingname",h[parseInt(l.toString(),10)].field),g.setAttribute("data-e-mappinguid",h[parseInt(l.toString(),10)].uid);var m=r.createElement("span",{innerHTML:h[parseInt(l.toString(),10)].headerText,className:"e-res-header-text"});if(g.appendChild(m),this.customColumnDiv.appendChild(g),d){var v=this.getSortedFieldsAndDirections("field"),y=v.indexOf(h[parseInt(l.toString(),10)].field),R=r.createElement("button",{id:r.element.id+h[parseInt(l.toString(),10)].field+"sortbutton"}),b=p.cloneNode();b.appendChild(R),g.appendChild(b);var E=new Hi({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"});E.appendTo(R);var k=void 0;u(this.parent.sortSettings.columns[parseInt(y.toString(),10)])||(k=this.parent.sortSettings.columns[parseInt(y.toString(),10)].direction==="Ascending"?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText")),R.innerHTML=y>-1?k:this.parent.localeObj.getConstant("NoneText"),R.onclick=function(ne){i.sortButtonClickHandler(ne.target)}}if(f&&c.indexOf(h[parseInt(l.toString(),10)].field)>-1){var F=r.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),W=r.createElement("span",{className:"e-icons e-res-icon e-filterset"});W.setAttribute("colType",h[parseInt(l.toString(),10)].type),F.appendChild(W),g.appendChild(F)}}}return x.add(this.customColumnDiv,K.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},o.prototype.getSortedFieldsAndDirections=function(e){for(var t=[],i=0;i<this.parent.sortSettings.columns.length;i++)t.push(this.parent.sortSettings.columns[parseInt(i.toString(),10)][""+e]);return t},o.prototype.sortButtonClickHandler=function(e){if(e){var t=T(e,"e-responsivecoldiv"),i=t.getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));var r=e.textContent,n=r===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):r===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),s=n===this.parent.localeObj.getConstant("AscendingText")?"Ascending":n===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";e.innerHTML=n,this.setSortedCols(i,s)}},o.prototype.resetSortButtons=function(e){for(var t=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)]!==e&&(t[parseInt(i.toString(),10)].innerHTML=this.parent.localeObj.getConstant("NoneText"))},o.prototype.setSortedCols=function(e,t){var i=this.getCurrentSortedFields(),r=i.indexOf(e);this.parent.allowMultiSorting&&r>-1&&(this.sortedCols.splice(r,1),this.sortPredicate.splice(r,1)),this.isSortApplied=!0,t!=="None"&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:t}))},o.prototype.getCurrentSortedFields=function(){for(var e=[],t=0;t<this.sortedCols.length;t++)e.push(this.sortedCols[parseInt(t.toString(),10)]);return e},o.prototype.customFilterColumnClickHandler=function(e){var t=this.parent,i=e.target;if(T(i,"columnmenudiv")&&this.action===ue.isColMenu&&!T(i,"e-disabled")){var r=this.menuCol?this.menuCol:this.filteredCol;T(i,"e-responsiveautofitalldiv")?(t.autoFitColumns([]),this.closeCustomFilter()):T(i,"e-responsiveautofitdiv")?(t.autoFitColumns(r.field),this.closeCustomFilter()):T(i,"e-responsivegroupdiv")?(t.groupColumn(r.field),this.closeCustomFilter()):T(i,"e-responsiveungroupdiv")?(t.ungroupColumn(r.field),this.closeCustomFilter()):T(i,"e-responsiveascendingdiv")?(t.sortColumn(r.field,"Ascending"),this.closeCustomFilter()):T(i,"e-responsivedescendingdiv")?(t.sortColumn(r.field,"Descending"),this.closeCustomFilter()):T(i,"e-responsivecolumndiv")?(t.notify(Vr,{action:5}),t.showResponsiveCustomColumnChooser()):T(i,"e-responsivefilterdiv")&&(t.notify(Vr,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,t.filterModule&&t.filterModule.responsiveDialogRenderer.showResponsiveDialog(r)),e.preventDefault()}if(this.action===ue.isFilter&&t.filterSettings.type!=="FilterBar"){if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){var n=i.getAttribute("data-e-mappingname");if(n||(n=i.parentElement.getAttribute("data-e-mappingname")),n){var s=t.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(s)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){var a=T(i,"e-responsivecoldiv");if(a){var n=a.getAttribute("data-e-mappingname"),s=t.getColumnByField(n);(s.filter.type==="Menu"||!s.filter.type&&t.filterSettings.type==="Menu")&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(s),this.removeCustomDlgFilterEle(i)}}}},o.prototype.showResponsiveDialog=function(e,t){if(this.isCustomDialog&&this.action===ue.isFilter&&!this.isRowResponsive||t&&this.action===ue.isColMenu)this.menuCol=t,this.renderCustomFilterDialog(null,t);else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===ue.isColumnChooser&&this.parent.notify(ns,{action:"open"}),this.action===ue.isSort){var i={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(ia,i),i.cancel)return}if(this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element),this.parent.enableAdaptiveUI&&this.parent.filterSettings&&(this.parent.filterSettings.type==="CheckBox"||this.parent.filterSettings.type==="Excel")&&this.parent.filterSettings.enableInfiniteScrolling&&this.parent.filterSettings.loadingIndicator==="Shimmer"){var r=this.parent.filterSettings.type==="CheckBox"?this.parent.filterModule.filterModule.checkBoxBase:this.parent.filterModule.filterModule.excelFilterBase;r.showMask()}}},o.prototype.setTopToChildDialog=function(e){var t=e.querySelector(".e-dialog");if(t){var i=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;t.style.top=i+"px"}},o.prototype.renderCustomFilterDialog=function(e,t){var i=this.parent,r=this.action===ue.isColMenu;if(!(this.action===ue.isFilter&&i.filterSettings.type==="FilterBar")){var n=r?"e-customcolumnmenudiv ":"",s=this.parent.createElement("div",{id:i.element.id+(r?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?n+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:n+"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(s),this.customFilterDlg=this.getDialogOptions(e,!0,null,t);var a={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(ia,a),!a.cancel&&(this.customFilterDlg.appendTo(s),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},o.prototype.getDialogOptions=function(e,t,i,r){var n=new to({isModal:!0,showCloseIcon:!(i==="columnchooser"&&this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization),closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e,r),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),s="isStringTemplate";if(n[""+s]=!0,t){n.header=this.renderResponsiveHeader(e,void 0,!0);var a=this.action===ue.isColMenu?"e-customcolumnmenu ":"";n.cssClass=a+"e-customfilter"}else n.header=this.renderResponsiveHeader(e),n.cssClass=this.parent.rowRenderingMode==="Vertical"&&this.action===ue.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i;return n},o.prototype.renderResponsiveDialog=function(e){var t=this.parent;if(!(this.action===ue.isFilter&&t.filterSettings.type==="FilterBar")){var i=this.action===ue.isFilter?"filter":"sort";i=this.action===ue.isColumnChooser?"columnchooser":i;var r=this.parent.createElement("div",{id:t.element.id+"responsive"+i,className:this.parent.cssClass?"e-res"+i+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(r),this.customResponsiveDlg=this.getDialogOptions(e,!1,i),this.customResponsiveDlg.appendTo(r)}},o.prototype.dialogCreated=function(){Wd(this.parent)},o.prototype.dialogOpen=function(){if(this.action===ue.isSort&&this.parent.allowMultiSorting)for(var e=0;e<this.parent.sortSettings.columns.length;e++){this.sortedCols.push(this.parent.sortSettings.columns[parseInt(e.toString(),10)].field);var t=this.parent.sortSettings.columns[parseInt(e.toString(),10)].field,i=this.parent.sortSettings.columns[parseInt(e.toString(),10)].direction;this.sortPredicate.push({field:t,direction:i})}},o.prototype.beforeDialogClose=function(e){if(this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===ue.isFilter){if(e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu){this.parent.notify(Vr,{action:4});var t=document.querySelector(".e-resfilter");t&&fe(t)}}else if(this.action===ue.isSort)this.closeCustomDialog();else if(this.action===ue.isColMenu){this.closeCustomFilter();var t=document.querySelector(".e-rescolummenu");t&&fe(t)}else if(this.action===ue.isColumnChooser){this.parent.notify(ns,{action:"clear"});var t=document.querySelector(".e-rescolumnchooser");t&&fe(t),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu&&this.parent.notify(Vr,{action:4}),this.isCustomDialog=!1,this.isDialogClose=!1}this.parent.off(en,this.keyHandler)},o.prototype.sortColumn=function(){if(!this.isSortApplied){this.closeCustomDialog();return}this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[parseInt(e.toString(),10)].field,this.sortPredicate[parseInt(e.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()},o.prototype.getHeaderTitle=function(e,t){var i=this.parent,r;return this.action===ue.isEdit?r=i.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===ue.isAdd?r=i.localeObj.getConstant("AddFormTitle"):this.action===ue.isFilter?r=t?t.headerText||t.field:i.localeObj.getConstant("FilterTitle"):this.action===ue.isSort?r=i.localeObj.getConstant("Sort"):this.action===ue.isColMenu?r=i.localeObj.getConstant("ColumnMenu"):this.action===ue.isColumnChooser&&(r=i.localeObj.getConstant("ChooseColumns")),r},o.prototype.getDialogName=function(e){var t;return e===ue.isAdd||e===ue.isEdit?t="dialogEdit_wrapper_title":e===ue.isFilter?t="responsive_filter_dialog_wrapper":e===ue.isColumnChooser&&(t="responsive_column_chooser_dialog_wrapper"),t},o.prototype.getButtonText=function(e){var t;return e===ue.isAdd||e===ue.isEdit?t="Save":(e===ue.isFilter||this.action===ue.isSort||e===ue.isColumnChooser||this.action===ue.isColumnChooser)&&(t="OKButton"),t},o.prototype.renderResponsiveHeader=function(e,t,i){var r=this,n=this.parent;n.on(en,this.keyHandler,this);var s=n.element.id+this.getDialogName(this.action);if(this.parent.columnChooserSettings.headerTemplate&&!this.parent.enableColumnVirtualization&&this.getHeaderTitle(t,e)===n.localeObj.getConstant("ChooseColumns")){var a=this.parent.columnChooserModule.renderHeader();return a}var l=n.createElement("div",{className:"e-res-custom-element"}),h=n.createElement("div",{className:"e-dlg-custom-header",id:s});h.innerHTML=this.getHeaderTitle(t,e),l.appendChild(h);var p=n.createElement("button");i||(this.saveBtn=new Hi({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),p.innerHTML=n.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(p),p.onclick=function(v){r.dialogHdrBtnClickHandler()});var c=this.action===ue.isSort,d=this.action===ue.isFilter;if(d||c){var f=c?"sort":"filter",g=n.createElement("button");if(this.filterClearBtn=new Hi({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+f+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+f+"-clear-btn"}),d){var m=n.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});g.appendChild(m)}else g.innerHTML=n.localeObj.getConstant("Clear");l.appendChild(g),this.filterClearBtn.appendTo(g),g.onclick=function(v){T(v.target,"e-customfilter")?(r.parent.filterModule.clearFiltering(),r.removeCustomDlgFilterEle()):d?r.filterClear():(r.resetSortButtons(),r.sortedCols=[],r.sortPredicate=[],r.isSortApplied=!0)},l.appendChild(g)}return i||l.appendChild(p),l},o.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},o.prototype.removeCustomFilterElement=function(){var e=document.getElementById(this.parent.element.id+"customcolumnmenu");if(e){fe(e);var t=document.querySelector(".e-customfilter");t&&fe(t)}var i=document.querySelector(".e-rescolumnchooser");i&&fe(i)},o.prototype.hideResponsiveColumnChooser=function(){var e=document.querySelector(".e-rescolumnchooser");e&&(fe(e),this.isCustomDialog=!1,this.isDialogClose=!1)},o.prototype.dialogHdrBtnClickHandler=function(){this.action===ue.isEdit||this.action===ue.isAdd?this.parent.endEdit():this.action===ue.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===ue.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===ue.isColumnChooser&&(this.parent.notify(ns,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},o.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");fe(e);return}this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},o.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),fe(e)),this.closeCustomFilter(),this.action===ue.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},o.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),fe(e))}this.isCustomDialog=!1,this.isDialogClose=!1},o.prototype.removeCustomDlgFilterEle=function(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?fe(e.parentElement):fe(e);else for(var t=this.customColumnDiv.children,i=0;i<t.length;i++)e=t[parseInt(i.toString(),10)].querySelector(".e-filtersetdiv"),e&&(fe(e),i--)},o.prototype.keyHandler=function(e){e.keyCode===13&&(this.action===ue.isFilter&&e.target.classList.contains("e-searchinput")||this.action===ue.isEdit||this.action===ue.isAdd)&&this.dialogHdrBtnClickHandler()},o.prototype.editComplate=function(e){(e.requestType==="save"||e.requestType==="cancel")&&this.parent.off(en,this.keyHandler)},o.prototype.removeEventListener=function(){this.customColumnDiv&&x.remove(this.customColumnDiv,K.isDevice?"touchend":"click",this.customFilterColumnClickHandler),ii(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(dt,this.onActionCompleteFn)},o}(),zc=function(){function o(){this.services={}}return o.prototype.register=function(e,t){u(this.services[""+e])&&(this.services[""+e]=t)},o.prototype.getService=function(e){if(u(this.services[""+e]))throw"The service "+e+" is not registered";return this.services[""+e]},o.prototype.registerAdaptiveService=function(e,t,i){t?(e.responsiveDialogRenderer=new Bc(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=i):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)},o}(),Nc=function(){function o(){this.rendererMap={}}return o.prototype.addRenderer=function(e,t){var i=Ri(Ft,e);u(this.rendererMap[""+i])&&(this.rendererMap[""+i]=t)},o.prototype.getRenderer=function(e){var t=Ri(Ft,e);if(u(this.rendererMap[""+t]))throw"The renderer "+t+" is not found";return this.rendererMap[""+t]},o}(),so=function(){function o(e){this.parent=e}return o.prototype.setWidthToColumns=function(){var e=0,t=this.parent.getColumnIndexesInView(),i=!0,r=0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;e<n;e++){if(this.parent.enableColumnVirtualization&&t.indexOf(e)===-1){i=!1;continue}this.setColumnWidth(new tt({width:"30px"}),e)}(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new tt({width:"30px"}),e),e++),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(this.setColumnWidth(new tt({width:"30px"}),e),e++);for(var s=this.parent.getColumns(),a=0;a<s.length;a++)this.setColumnWidth(s[parseInt(a.toString(),10)],i&&this.parent.enableColumnVirtualization?void 0:a+e);if(this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&this.setColumnWidth(new tt({width:"30px"}),this.parent.groupSettings.columns.length+s.length),r=this.getTableWidth(this.parent.getColumns()),r!=="auto"){this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(r);var l=s.filter(function(c){return!u(c.maxWidth)}),h=this.parent.getHeaderTable(),p=this.parent.getContentTable();this.parent.allowResizing&&this.parent.element.getBoundingClientRect().width>r&&l.length===s.length&&h&&p&&B([h,p],["e-tableborder"])}},o.prototype.setMinwidthBycalculation=function(e){var t=this,i=0,r=this.parent.getColumns().filter(function(c){return t.parent.allowResizing?(u(c.width)||c.width==="auto")&&u(c.maxWidth):u(c.width)||c.width==="auto"});if(r.length){!u(this.parent.width)&&this.parent.width!=="auto"&&typeof this.parent.width=="string"&&this.parent.width.indexOf("%")===-1?i=parseInt(this.parent.width,10)-e:i=this.parent.element.getBoundingClientRect().width-e;for(var n=0,s=0,a=r;s<a.length;s++){var l=a[s];n+=u(l.minWidth)?0:typeof l.minWidth=="string"?parseInt(l.minWidth,10):l.minWidth}for(var h=0;h<r.length;h++){e===0&&this.parent.allowResizing&&this.isWidthUndefined()&&h!==r.length-1&&this.setUndefinedColumnWidth(r);var p=this.parent.getColumnIndexByField(r[parseInt(h.toString(),10)].field)+this.parent.getIndentCount();e!==0&&i<n?this.setWidth(r[parseInt(h.toString(),10)].minWidth,p):e!==0&&i>n&&this.setWidth("",p,!0)}}},o.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[parseInt(t.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[parseInt(t.toString(),10)].field)))},o.prototype.setColumnWidth=function(e,t,i){if(!(this.parent.getColumns().length<1)){var r=u(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),s=this.getTableWidth(this.parent.getColumns());if(n!==null){if(this.setWidth(n,r),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&s!=="auto"&&this.setMinwidthBycalculation(s),this.parent.allowResizing&&(i==="resize"||this.parent.getFrozenColumns())){var a=this.parent.getContentTable();this.setWidthToTable(this.parent.getFrozenColumns()&&a.style.width.indexOf("px")===-1&&s<a.clientWidth)}this.parent.notify(yl,{index:r,width:n,column:e,module:i})}}},o.prototype.setWidth=function(e,t,i){if(this.parent.groupSettings.columns.length>t&&zs(this.parent)&&!(this.parent.resizeModule&&this.parent.resizeModule.resizeProcess)){var r=this.parent.element.offsetWidth;e=(30/r*100).toFixed(1)+"%"}var n=this.parent.getHeaderTable(),s=this.parent.getContentTable(),a=ke(e),l=n.querySelector(Ot).children[parseInt(t.toString(),10)];l&&!i?l.style.width=a:l&&i&&(l.style.width="");var h=s.querySelector(Ot).children[parseInt(t.toString(),10)];if(h&&!i?h.style.width=a:h&&i&&(h.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var p=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),c=[],d=0;d<p.length;d++)if(T(p[parseInt(d.toString(),10)],"e-grid").id===this.parent.element.id)for(var f=0;f<p[parseInt(d.toString(),10)].querySelector("colgroup").children.length;f++)c.push(p[parseInt(d.toString(),10)].querySelector("colgroup").children[parseInt(f.toString(),10)]);p.length&&c.length&&c[parseInt(t.toString(),10)]&&(c[parseInt(t.toString(),10)].style.width=a)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},o.prototype.refreshFrozenScrollbar=function(){var e={cancel:!1};if(this.parent.notify(Vp,e),!e.cancel){var t=Tt(),i=this.parent.element.querySelector(".e-movablescrollbar"),r=this.parent.getContent().firstElementChild.getBoundingClientRect().width;if(this.parent.enableColumnVirtualization){var n=this.parent.getContent().querySelector(".e-virtualtrack");n&&(r=n.scrollWidth)}this.parent.height!=="auto"&&(r=r+t),i.firstElementChild.style.width=r+"px"}},o.prototype.getSiblingsHeight=function(e){var t=this.getHeightFromDirection(e,"previous"),i=this.getHeightFromDirection(e,"next");return t+i},o.prototype.getHeightFromDirection=function(e,t){for(var i=e[t+"ElementSibling"],r=0,n=[Bt,tn,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];i;)n.some(function(s){return i.classList.contains(s)})&&(r+=i.offsetHeight),i=i[t+"ElementSibling"];return r},o.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter(function(t){return u(t.width)&&u(t.minWidth)}).length;return this.parent.getColumns().length===e},o.prototype.getWidth=function(e){if(this.parent.allowResizing&&u(e.width)&&(u(e.minWidth)&&u(e.maxWidth)&&!this.isWidthUndefined()?e.width=200:e.maxWidth&&(e.width=e.maxWidth)),!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},o.prototype.getTableWidth=function(e,t){for(var i=0,r=!1,n=0,s=e;n<s.length;n++){var a=s[n];if(a.visible!==!1){var l=this.getWidth(a);(a.width==="auto"||!a.width)&&(this.parent.allowResizing&&!t?a.maxWidth||(r=!0):l=0),l!==null&&(i+=parseInt(l.toString(),10))}}return i=r?"auto":i,i},o.prototype.setWidthToTable=function(e){var t=ke(this.getTableWidth(this.parent.getColumns()));(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new tt({width:"30px"})),t=this.isAutoResize()||t==="auto"||e?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t;var i=this.parent.element.querySelector(".e-table.e-inline-edit");i&&(i.style.width=t)},o.prototype.isAutoResize=function(){return this.parent.allowResizing&&this.parent.resizeSettings.mode==="Auto"},o}(),Hc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qc=function(){function o(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.virtualSelectionInfo={},this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.firstHeaderCellClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.groupedFrozenRow=0,this.parent=e,this.rowModelGen=new Rn(this.parent),this.addEventListener()}return o.prototype.focusCheck=function(e){var t=e.target;this.focusByClick=!0,this.firstHeaderCellClick=!0,this.skipFocus=t.classList.contains("e-grid")},o.prototype.onFocus=function(e){if(!(this.parent.isDestroyed||K.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&e&&e.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&this.parent.frozenRows===0),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&(this.parent.editSettings.mode!=="Batch"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[yn].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new ir({isDataRow:!0})]}),this.getContent().selector,!1);var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator(),this.active);this.getContent().matrix.select(t[0],t[1]),this.skipFocus&&!(e&&e.target===this.parent.element)&&(this.focus(e),this.skipFocus=!1)}},o.prototype.passiveFocus=function(e){if(!this.parent.isDestroyed){var t=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(e.target===t&&e.relatedTarget&&!T(e.relatedTarget,"e-grid")&&!this.firstHeaderCellClick){var i=[0,0];this.active.matrix.matrix[i[0]][i[1]]===0&&(i=Vt(this.active.matrix.matrix,i,!0)),this.active.matrix.current=i,this.currentInfo.element=e.target,this.currentInfo.elementToFocus=e.target,this.currentInfo.element.querySelector(".e-checkselectall")?(this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)):B([this.currentInfo.element],["e-focused","e-focus"])}this.firstHeaderCellClick=!1,e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,B([this.currentInfo.element],["e-focused","e-focus"]))}},o.prototype.onBlur=function(e){this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");var t=!!(T(e.target,"e-gantt")&&e.target.classList.contains("e-rowcell")&&!u(e.target.nextElementSibling)&&e.target.nextElementSibling.classList.contains("e-rowcell"));(this.parent.isEdit||e&&(!e.relatedTarget||Y(e.relatedTarget,".e-grid")||Y(e.relatedTarget,".e-grid-popup"))&&!(this.parent.element.classList.contains("e-childgrid")&&!this.parent.element.matches(":focus-within")))&&!(!t&&u(e.relatedTarget)&&parseInt(e.target.getAttribute("aria-colindex"),10)-1===0&&parseInt(e.target.getAttribute("index"),10)===0)&&!(!t&&u(e.relatedTarget)&&!Y(document.activeElement,".e-grid")&&!u(e.sourceCapabilities))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},o.prototype.setFirstFocusableTabIndex=function(){var e=this.parent;if(e.element.tabIndex=-1,e.allowGrouping&&e.groupSettings.showDropArea){var t=e.groupModule,i=t.getFocusableGroupedItems();i.length>0?(t.element.tabIndex=-1,i[0].tabIndex=0):t.element.tabIndex=0;return}if(e.toolbar||e.toolbarTemplate){var r=e.toolbarModule.element,n=this.parent.toolbarModule.getFocusableToolbarItems();n.length>0&&n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")?(r.tabIndex=-1,n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0):r.tabIndex=0;return}if(e.getColumns().length){var s=e.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(s.tabIndex=0,this.setActive(!1),!u(this.active)&&(u(this.active.target)||!this.active.target.classList.contains("e-columnmenu"))){var a=[0,0];this.active.matrix.matrix[a[0]][a[1]]===0&&(a=Vt(this.active.matrix.matrix,a,!0)),this.active.matrix.current=a}return}},o.prototype.setLastContentCellTabIndex=function(){var e=this.parent.getContentTable();if(e.rows[e.rows.length-1]){var t=e.rows[e.rows.length-1].lastElementChild;t.tabIndex=0}},o.prototype.onClick=function(e,t,i){if(!(T(e.target,"e-filterbarcell")&&(T(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))){var r=!u(Y(e.target,"."+yi)),n=!u(Y(e.target,"."+Bt));if(r=r&&n?!r:r,!(!r&&u(Y(e.target,"."+Bt))||e.target.classList.contains(ot)||e.target.classList.contains(st)||!u(Y(e.target,".e-unboundcell"))&&!t)){this.setActive(r);var s={cancel:!1,byKey:!1,byClick:!u(e.target),clickArgs:e};if(this.parent.notify(ys,s),!(s.cancel||Y(e.target,".e-inline-edit")&&!this.parent.editSettings.showAddNewRow&&this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))&&(this.setActive(r),this.getContent())){var a=this.getContent().onClick(e,t);if(a===!1)return;this.focus(),this.currentInfo.element.classList.contains("e-rowcell")&&e.type&&e.type==="click"&&!i&&B([this.currentInfo.element],["e-focused","e-focus"]),i&&e&&e.target&&B([e.target],["e-focused","e-focus"])}}}},o.prototype.handleFilterNavigation=function(e,t,i){e.target===document.querySelector(t)&&e.key==="Tab"&&e.shiftKey?(e.preventDefault(),document.querySelector(i).focus()):e.target===document.querySelector(i)&&e.key==="Tab"&&!e.shiftKey&&document.activeElement===document.querySelector(i)&&(e.preventDefault(),document.querySelector(t).focus())},o.prototype.onKeyPress=function(e){if(this.content&&this.content.target&&(this.content.target=null),this.parent.allowPaging){var t=this.parent.pagerModule.pagerObj.element,i=this.parent.pagerModule.pagerObj.getFocusablePagerElements(t,[]);if(this.parent.childGrid&&!T(e.target,"e-gridpager")&&this.allowToPaging(e)&&i.length&&(i[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if(e.action==="shiftTab"&&i.length&&i[0]===e.target){this.setActive(!0);var r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[r[0]][r[1]]===0&&(r=Vt(this.active.matrix.matrix,r,!1)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(r)?r:this.findBatchEditCell(r,!1):r,e.preventDefault(),this.focus(e);return}if(e.action==="tab"&&this.parent.element.classList.contains("e-childgrid")&&(!this.parent.pageSettings.pageSizes&&i.length&&i[i.length-1]===e.target||this.parent.pagerModule.pagerObj.getDropDownPage()===e.target)){var n=T(this.parent.element,"e-detailcell");G([this.parent.element],["e-focus"]),G([n],["e-focused"]),n.tabIndex=-1}else{this.parent.pagerModule.pagerObj.changePagerFocus(e);return}}if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&(e.keyCode===38||e.shiftKey&&e.keyCode===9)){e.preventDefault(),this.focus(e);return}else if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&e.keyCode===9){e.preventDefault(),this.parent.pagerModule.pagerObj.setPagerFocus();return}if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var s=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[s,a]}}if(this.parent.filterSettings.type==="Excel"&&this.handleFilterNavigation(e,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="CheckBox"){var l=this.parent.getColumnByUid(this.focusedColumnUid),h=l&&l.filter&&l.filter.hideSearchbox?".e-chk-hidden":".e-searchinput.e-input";this.handleFilterNavigation(e,h,".e-checkboxfilter .e-footer-content button:nth-child(2)")}if(this.parent.filterSettings.type==="Menu"&&this.handleFilterNavigation(e,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),this.parent.showColumnChooser&&this.handleFilterNavigation(e,".e-ccdlg .e-ccsearch.e-cc.e-input",".e-ccdlg .e-footer-content button:nth-child(2)"),!this.skipOn(e)){if(e.target&&T(e.target,"e-gridcontent")){var p=[].slice.call(this.parent.getContentTable().rows),c=p[p.length-1].lastElementChild;e.target===c&&(this.setActive(!0),this.setLastContentCellActive())}if(e.action==="shiftTab"&&e.target&&(e.target===this.parent.element||T(e.target,"e-toolbar")||T(e.target,"e-groupdroparea"))){if(e.target===this.parent.element){this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}if(T(e.target,"e-groupdroparea")){this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}if(T(e.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var d=this.parent.groupModule,f=d.getFocusableGroupedItems();e.preventDefault(),f.length>0?f[f.length-1].focus():d.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}}var g=!1;if(e.action==="tab"&&e.target&&(e.target===this.parent.element||T(e.target,"e-toolbar")||T(e.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(e.target===this.parent.element||e.target.classList.contains("e-groupdroparea"))){var d=this.parent.groupModule,f=d.getFocusableGroupedItems();if(f.length>0){e.preventDefault(),f[0].focus();return}if(!e.target.classList.contains("e-groupdroparea")){e.preventDefault(),d.element.focus();return}}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(e.target===this.parent.element||T(e.target,"e-groupdroparea")||e.target.classList.contains("e-toolbar"))){var m=this.parent.toolbarModule.element,v=this.parent.toolbarModule.getFocusableToolbarItems();if(v.length>0){e.preventDefault(),v[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();return}if(!e.target.classList.contains("e-toolbar")){e.preventDefault(),m.focus();return}}(e.target===this.parent.element||T(e.target,"e-toolbar")||T(e.target,"e-groupdroparea"))&&(g=!0)}g&&(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=e.action;var y={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(ys,y),!y.cancel){var R=this.getContent().matrix.current,b=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0;this.currentInfo.outline=!0;var E=this.getContent().jump(e.action,R);this.swap=E,E.swap&&!(this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab"))&&(this.setActive(!E.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(R,E,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent());var k=this.content.lastIdxCell?!1:this.getContent().onKeyPress(e);if(e.target&&T(e.target,"e-gridheader")){if(e.action==="tab"&&R.toString()===this.active.matrix.current.toString()){var F=Vt(this.active.matrix.matrix,this.active.matrix.current,!0),r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[r[0]][r[1]]===0&&(r=Vt(this.active.matrix.matrix,r,!1));var W=oe(F[0]+".cells."+F[1],this.active.matrix.getRowsFromIndex(F[0],this.active));if(W&&W.getBoundingClientRect().width===0&&this.active.matrix.matrix.length-1===F[0]&&(r=this.active.matrix.nextVisibleCellFocus(F[0],F[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),this.active.matrix.current.toString()===r.toString()&&this.content.matrix.matrix.length){k=!0,this.setActive(!0);var te=[0,0];this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden","true"),this.active.matrix.matrix[te[0]][te[1]]===0&&(te=Vt(this.active.matrix.matrix,[0,0],!0));var ne=oe(te[0]+".cells."+te[1],this.active.matrix.getRowsFromIndex(te[0],this.active));if(ne&&ne.getBoundingClientRect().width===0&&(te=this.active.matrix.nextVisibleCellFocus(te[0],te[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(te)?te:this.findBatchEditCell(te,!0):te,this.parent.enableVirtualization&&!this.parent.enableColumnVirtualization&&this.parent.contentModule.prevInfo.blockIndexes[0]!==1){e.preventDefault(),this.removeFocus();var ye=this.parent.contentModule;ye.firstCellFocus=!0,ye.content.scrollTop=0;return}}else this.active.matrix.current.toString()!==F.toString()&&(this.active.matrix.current=F)}if(e.action==="shiftTab"&&R.toString()===this.active.matrix.current.toString()){var L=Vt(this.active.matrix.matrix,this.active.matrix.current,!1),P=oe(L[0]+".cells."+L[1],this.active.matrix.getRowsFromIndex(L[0],this.active));if(P&&P.getBoundingClientRect().width===0&&L[0]===0&&(L=this.active.matrix.nextVisibleCellFocus(L[0],L[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),L.toString()===this.active.matrix.current.toString()){this.focusOutFromHeader(e);return}if(this.active.matrix.current.toString()!==L.toString()&&!k){k=!0;var D=oe(L[0]+".cells."+L[1],this.active.matrix.getRowsFromIndex(L[0],this.active));D&&D.getBoundingClientRect().width===0&&L[0]===0&&(L=this.active.matrix.nextVisibleCellFocus(L[0],L[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),this.active.matrix.current=L}}}if(e.target&&T(e.target,"e-gridcontent")&&(this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden"),this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab")&&(this.active.matrix.current=this.findBatchEditCell(b,e.action==="tab"),e.action==="tab"&&b.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),e.action==="shiftTab"&&R.toString()===this.active.matrix.current.toString())){if(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length===this.parent.columns.length){this.focusOutFromHeader(e);return}var te=[0,0];this.active.matrix.matrix[te[0]][te[1]]===0&&(te=Vt(this.active.matrix.matrix,[0,0],!0));var ne=oe(te[0]+".cells."+te[1],this.active.matrix.getRowsFromIndex(te[0],this.active));ne&&ne.getBoundingClientRect().width===0&&(te=this.active.matrix.nextVisibleCellFocus(te[0],te[1],e.action,this.active.keyActions[e.action],this.active,this.active.matrix.current[1])),!k&&(te.toString()===this.active.matrix.current.toString()||this.parent.editSettings.mode==="Batch"&&b.toString()===this.active.matrix.current.toString())&&(k=!0,this.setActive(!1),this.setLastContentCellActive())}if(k===!1){if(this.clearIndicator(),e.action==="shiftTab"&&R.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(e)&&R.toString()!==[0,0].toString()){if(e.preventDefault(),e.keyCode===40){this.parent.pagerModule.pagerObj.setPagerContainerFocus();return}else if(e.keyCode===9){this.parent.pagerModule.pagerObj.setPagerFocus();return}}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}if(this.header.action=e.action,this.header.currentTarget=null,this.header.focusType="key",e.target&&T(e.target,"e-fltrtemp")&&(e.action==="tab"||e.action==="shiftTab")){var N=e.target,$=[].slice.call(Y(N,"th").querySelectorAll(".e-fltrtemp-focus"));if($.length){var V=$.indexOf(N),H=e.action==="tab"&&V<$.length-1||e.action==="shiftTab"&&V>0;H&&(this.setActive(!1),this.active.matrix.current=R,this.active.currentTarget=N)}}g&&T(this.active.getTable(),"e-gridheader")&&e.target&&e.target.id===this.parent.element.id+"_searchbar"&&(this.parent.searchModule.headerFocus=!0),e.preventDefault(),this.focus(e)}}},o.prototype.isValidBatchEditCell=function(e){var t=this.active.getTable().rows[e[0]].cells[e[1]],i=Y(t,"tr"),r=parseInt(t.getAttribute("aria-colindex"),10)-1,n=this.parent.getColumns()[parseInt(r.toString(),10)];return!!(this.active.matrix.matrix[e[0]][e[1]]===1&&(!i.classList.contains("e-row")||(i.classList.contains("e-insertedrow")||!n.isPrimaryKey)&&n.allowEditing))},o.prototype.findBatchEditCell=function(e,t,i){for(var r=e,n=e,s=!1;!s;){var a=n;n=Vt(this.active.matrix.matrix,n,t);var l=oe(n[0]+".cells."+n[1],this.active.getTable().rows);if(l&&l.getBoundingClientRect().width===0&&(n=this.active.matrix.nextVisibleCellFocus(n[0],n[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1])),a.toString()===n.toString()||i&&a[0]!==n[0]){s=!0;continue}this.isValidBatchEditCell(n)&&(r=n,s=!0)}return r},o.prototype.setLastContentCellActive=function(){var e=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[e[0]][e[1]]===0&&(e=Vt(this.active.matrix.matrix,e,!1));var t=oe(e[0]+".cells."+e[1],this.active.matrix.getRowsFromIndex(e[0],this.active));t&&t.getBoundingClientRect().width===0&&(e=this.active.matrix.nextVisibleCellFocus(e[0],e[1],this.activeKey,this.active.keyActions[this.activeKey],this.active,this.active.matrix.current[1])),this.active.matrix.current=e},o.prototype.focusOutFromChildGrid=function(e){var t=T(this.parent.element,"e-table"),i=T(t,"e-grid").ej2_instances[0],r=T(this.parent.element,"e-detailcell"),n=T(this.parent.element,"e-detailrow").getAttribute("data-uid"),s=[].slice.call(i.getContentTable().rows),a=s.map(function(d){return d.getAttribute("data-uid")}).indexOf(n);if(!(e.action==="tab"&&a>=s.length-1)){G([this.parent.element],["e-focus"]),G([r],["e-focused"]),r.tabIndex=-1,e.preventDefault();var l;if(i.focusModule.removeFocus(),e.action==="shiftTab"){for(var h=s[a-1],p=h.cells,c=p.length-1;c>=0;c--)if(l=p[parseInt(c.toString(),10)],!l.classList.contains("e-hide")){i.focusModule.active.matrix.current=[a-1,c];break}}else l=s[a+1].cells[0],i.focusModule.active.matrix.current=[a+1,0];i.focusModule.currentInfo.element=l,i.focusModule.currentInfo.elementToFocus=l,B([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},o.prototype.focusOutFromHeader=function(e){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var t=this.parent.toolbarModule.element,i=this.parent.toolbarModule.getFocusableToolbarItems();e.preventDefault(),i.length>0?i[i.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus():t.focus();return}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var r=this.parent.groupModule,n=r.getFocusableGroupedItems();e.preventDefault(),n.length>0?n[n.length-1].focus():r.element.focus();return}this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus())},o.prototype.allowToPaging=function(e){return!(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode!==40)},o.prototype.skipOn=function(e){var t=e.target;if(!t)return!1;if(!this.parent.isEdit&&t&&t.closest(".e-unboundcell")&&this.currentInfo.skipAction&&(e.action==="shiftTab"&&this.commandColumnFocusElement(t.closest(".e-unboundcell"),!1)===t||e.action==="tab"&&this.commandColumnFocusElement(t.closest(".e-unboundcell"),!0)===t))return this.currentInfo.skipAction=!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(T(e.target,"e-groupheadercell")&&!(e.target===i[0]&&e.action==="shiftTab"||e.target===i[i.length-1]&&e.action==="tab"))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var r=this.parent.toolbarModule.element,n=r.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(T(e.target,"e-toolbar-item")&&!(n.length>0&&(T(e.target,"e-toolbar-item")===n[0]&&e.action==="shiftTab"||T(e.target,"e-toolbar-item")===n[n.length-1]&&e.action==="tab")))return!0}var s=Y(t,"th")&&!Y(t,"th").tabIndex;if(e.target.classList.contains("e-filterbaroperator")&&(e.keyCode===13||e.keyCode===27)){var a=Y(e.target,".e-filterbarcell");a.querySelector("input").focus()}var l=this.parent.editSettings.showAddNewRow&&Y(document.activeElement,".e-addedrow")!==null;(s&&Y(document.activeElement,".e-filterbarcell")!==null||l)&&this.removeFocus();var h=Y(document.activeElement,".e-filterbarcell")!==null;if(this.parent.enableHeaderFocus&&h){var p=this.active.matrix,c=p.current;h=p.matrix[c[0]].lastIndexOf(1)!==c[1]}if(this.parent.isEdit&&(e.action==="tab"||e.action==="shiftTab")&&this.parent.editSettings.mode==="Normal"&&!this.parent.editSettings.showAddNewRow&&!u(T(t,"e-addedrow"))){var d=this.parent.editModule.formObj.element.querySelectorAll('input:not([type="hidden"],.e-numeric-hidden,.e-disabled), select:not([aria-hidden="true"]), button:not(.e-hide), textarea:not(.e-hide,.e-disabled,[disabled])'),a=t.classList.contains("e-ddl")?t.querySelector("input"):t,f=e.action==="tab"&&a===d[d.length-1],g=e.action==="shiftTab"&&a===d[0];if(f||g){e.preventDefault();var m=d[f?0:d.length-1];m=m.parentElement.classList.contains("e-ddl")?m.parentElement:m,m.focus()}}return e.action==="delete"||this.parent.editSettings.mode!=="Batch"&&(this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&(!u(this.parent.element.querySelector(".e-editedrow"))||!u(T(t,"e-addedrow"))&&!u(Y(e.target,"input"))&&!u(document.querySelector(".e-popup-open"))||!u(T(t,"e-addedrow"))&&t&&!t.querySelector(".e-cancel-icon")&&!u(T(t,"e-unboundcell"))))||["insert","f2"].indexOf(e.action)>-1)||h&&this.parent.enableHeaderFocus||(h||l)&&e.action!=="tab"&&e.action!=="shiftTab"||Y(document.activeElement,"#"+this.parent.element.id+"_searchbar")!==null&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||Y(t,"."+yi)===null&&Y(t,"."+Bt)===null&&!(e.target===this.parent.element||T(e.target,"e-toolbar")||T(e.target,"e-groupdroparea"))||e.action==="space"&&!t.classList.contains(Xi)&&Y(t,"."+Xi)===null&&Y(t,".e-headerchkcelldiv")===null||Y(t,".e-filter-popup")!==null},o.prototype.focusVirtualElement=function(e){var t=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(xp,i);var r=this.actions.some(function(s){return s===t.activeKey}),n=this.parent.contentModule?this.parent.contentModule.selectedRowIndex>-1:!1;i.isAdd||Object.keys(i.virtualData).length||r||i.isCancel||n?(this.parent.notify(Jp,{isCancel:!1}),i.isCancel=!1,(this.parent.enableVirtualization&&!this.parent.selectVirtualRowOnAdd&&(!e||e&&e.action!=="ctrlHome"&&e.action!=="ctrlEnd")||!this.parent.enableVirtualization)&&(this.parent.contentModule.selectedRowIndex=-1),this.parent.selectVirtualRowOnAdd=!1,r&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},o.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},o.prototype.getContent=function(){return this.active||this.content},o.prototype.setActive=function(e){this.active=e?this.content:this.header},o.prototype.setFocusedElement=function(e,t){var i=this;this.currentInfo.elementToFocus=e,setTimeout(function(){if(!u(i.currentInfo.elementToFocus)){var r=u(i.parent.element.querySelector(".e-flmenu"))?document.querySelector(".e-grid-popup .e-flmenu"):i.parent.element.querySelector(".e-flmenu");(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&u(r)?i.focusVirtualElement(t):(u(r)||T(document.activeElement,"e-flmenu-valuediv")!==r.querySelector(".e-flmenu-valuediv"))&&i.currentInfo.elementToFocus.focus()}},0)},o.prototype.focus=function(e){this.parent.notify(bp,e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},o.prototype.removeFocus=function(e){if(this.currentInfo.element){if(this.parent.isReact&&!this.parent.isEdit&&this.currentInfo.element.classList.contains("e-rowcell")&&!this.currentInfo.element.parentElement&&!(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length)&&this.parent.getRowByIndex(this.prevIndexes.rowIndex)){var t=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex);this.currentInfo.element=t||this.currentInfo.element}G([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1}},o.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&(B([e.element],["e-focused"]),B([e.elementToFocus],["e-focus"]))},o.prototype.focusHeader=function(){this.setActive(!1),this.resetFocus()},o.prototype.focusContent=function(){this.setActive(!0),this.resetFocus()},o.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},o.prototype.addFocus=function(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&(!u(t)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!!e.element){var i=e.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&B([e.element],["e-focused"]),B([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify(Ss,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!u(t),byClick:u(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!u(t),swapInfo:this.swap});var r=this.getContent().matrix.current,n=r[0],s=r[1];this.prevIndexes={rowIndex:n,cellIndex:s},this.focusedColumnUid=this.parent.getColumnByIndex(s).uid,this.focusByClick=!1}}},o.prototype.refreshMatrix=function(e){var t=this;return function(i){e&&!t.content&&(t.content=new Pl(t.parent)),!e&&!t.header&&(t.header=new Gc(t.parent));var r=e?t.content:t.header,n=t.parent.frozenRows,s=0;if(n&&t.parent.editSettings.mode==="Batch"&&(s=t.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+t.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),!u(t.parent.groupSettings.columns)&&t.parent.groupSettings.columns.length&&n&&e){n=0;for(var a=0;a<i.rows.length&&(n++,i.rows[parseInt(a.toString(),10)].index+1!==t.parent.frozenRows);a++);t.groupedFrozenRow=n}var l=e?i.rows.slice(n+s):i.rows,h=e?i.rows.slice(0,n+s):i.rows;t.parent.isCollapseStateEnabled()&&e&&(l=l.filter(function(L){return L.visible!==!1}));var p=!u(t.parent.rowTemplate);if(n&&(t.parent.editSettings.mode==="Batch"&&e&&(i.name==="batchDelete"||i.name==="batchAdd"||i.name==="batchCancel"||i.args&&i.args.requestType==="batchsave")||i.args&&(i.args.requestType==="delete"||i.args.requestType==="save"))){var c=t.header.matrix.matrix,d=t.parent.headerModule.rows.length;c.splice(d,c.length-d)}var f=r.matrix.generate(h,r.selector,p);r.matrix.generate(l,r.selector,p);var g=t.parent.enableVirtualization||t.parent.enableInfiniteScrolling;if(t.parent.editSettings.showAddNewRow&&e&&t.header&&t.header.matrix&&(!g||g&&t.parent.isAddNewRow)){var m=t.header.matrix.matrix,v=t.parent.allowFiltering&&t.parent.filterSettings.type==="FilterBar"?2:1;r.matrix.rows=t.parent.frozenRows&&t.parent.editSettings.newRowPosition==="Top"?r.matrix.rows:++r.matrix.rows,t.parent.editSettings.newRowPosition==="Top"?(t.parent.frozenRows||g?f:r.matrix.matrix).unshift(t.refreshAddNewRowMatrix(m[m.length-v])):r.matrix.matrix.push(t.refreshAddNewRowMatrix(m[m.length-v])),t.parent.isAddNewRow=!1}if((!(t.parent.isFrozenGrid()&&i.args&&(i.args.requestType==="sorting"||i.args.requestType==="batchsave"||i.args.requestType==="paging"))||n&&t.parent.editSettings.mode==="Batch"&&e&&(i.name==="batchDelete"||i.name==="batchAdd"||i.name==="batchCancel"||i.args.requestType==="batchsave"))&&r.generateRows(h,{matrix:f,handlerInstance:t.header}),!K.isDevice&&i&&i.args&&(!t.focusByClick&&i.args.requestType==="paging"&&!t.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(t.skipFocus=!1,t.parent.element.focus()),i.args.requestType==="grouping"&&(t.skipFocus=!0)),i&&i.args&&i.args.requestType==="virtualscroll"){if(t.currentInfo.uid){var y,R=i.rows.some(function(L,P){return y=P,L.uid===t.currentInfo.uid});if(R){t.content.matrix.current[0]=y,t.content.matrix.current[1]=t.parent.getColumnIndexByUid(t.focusedColumnUid)||0;var b=t.parent.getVisibleFrozenLeftCount(),E=t.parent.getVisibleFrozenRightCount();t.parent.enableColumnVirtualization&&!(b&&E)&&t.parent.isFrozenGrid()&&i.args.virtualInfo.direction==="right"&&(t.content.matrix.current[1]=t.content.matrix.current[1]-(b+(E?E+1:0)));var k=!!(t.parent.allowGrouping&&t.parent.groupSettings.columns.length);k&&(t.content.matrix.current[1]=t.prevIndexes.cellIndex,t.virtualSelectionInfo.isPending&&(t.content.matrix.current[0]=t.virtualSelectionInfo.direction==="downArrow"?t.content.matrix.current[0]+1:t.content.matrix.current[0]-1));var F=t.getContent().getFocusInfo().elementToFocus;if(F){var W=F.getBoundingClientRect(),te=t.parent.element.getBoundingClientRect(),ne=0,ye=0;t.parent.enableColumnVirtualization&&!(b&&E)&&t.parent.isFrozenGrid()&&i.args.virtualInfo.direction==="right"&&(b?ne=t.parent.leftrightColumnWidth("left"):ye=t.parent.leftrightColumnWidth("right")),(W.top>=0&&W.left>=0&&W.right-ne-ye<=Math.min(te.right,window.innerWidth||document.documentElement.clientWidth)+ye&&W.bottom<=Math.min(te.bottom,window.innerHeight||document.documentElement.clientHeight)||k)&&(t.isVirtualScroll=!0,t.focus(k&&t.virtualSelectionInfo.isPending?t.virtualSelectionInfo.event:void 0))}}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var F=t.parent.element.querySelector("#"+i.args.focusElement.id);F&&F.focus()}t.virtualSelectionInfo={}}i&&i.args&&i.args.requestType==="infiniteScroll"&&(t.isInfiniteScroll=!0)}},o.prototype.refreshAddNewRowMatrix=function(e){for(var t=this.parent.getColumns(),i=this.parent.getIndentCount(),r=i;r<e.length-1;r++)t[r-i]&&t[r-i].visible&&t[r-i].allowEditing?e[parseInt(r.toString(),10)]=1:e[parseInt(r.toString(),10)]=0;return e},o.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(x.add(this.parent.element,"mousedown",this.focusCheck,this),x.add(this.parent.element,"touchstart",this.focusCheck,this),x.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(t){return e.passiveFocus(t)},!0),x.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Jt,handler:this.onKeyPress},{event:tr,handler:this.onClick},{event:Xe,handler:this.refMatrix},{event:Il,handler:this.refMatrix},{event:El,handler:this.refMatrix},{event:Yi,handler:this.showAddNewRowFocus},{event:vi,handler:this.refreshMatrix()},{event:Xp,handler:this.restoreFocus},{event:Cp,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"custom-filter-close",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:Nu,handler:this.refMatrix},{event:ml,handler:this.refMatrix},{event:Hu,handler:this.refMatrix},{event:zu,handler:this.refMatrix},{event:ei,handler:this.refMatrix},{event:Ss,handler:this.internalCellFocus}],ii(this.parent,this.evtHandlers,!0,this))},o.prototype.showAddNewRowFocus=function(){if(this.parent.editSettings.showAddNewRow){var e=this.parent.editSettings.newRowPosition==="Top"?0:this.content.matrix.matrix.length-1,t=this.parent.getIndentCount();if(this.parent.editSettings.newRowPosition==="Top"&&(this.parent.frozenRows||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var i=this.header.matrix.matrix.length-(this.groupedFrozenRow?this.groupedFrozenRow:this.parent.frozenRows);t=this.findNextCellFocus(this.header.matrix.matrix[i-1],t),this.header.matrix.current=[i-1,t],this.active=this.header}else t=this.findNextCellFocus(this.content.matrix.matrix[parseInt(e.toString(),10)],t),this.content.matrix.current=[e,t],this.active=this.content;var r=this.parent.element.querySelector(".e-addedrow");r&&r.querySelectorAll("tr")&&r.querySelector("tr").cells[parseInt(t.toString(),10)].querySelector("input")&&r.querySelector("tr").cells[parseInt(t.toString(),10)].querySelector("input").select()}},o.prototype.findNextCellFocus=function(e,t){for(var i=t;i<e.length;i++)if(e[parseInt(i.toString(),10)]===1)return i;return t},o.prototype.filterfocus=function(){this.parent.filterSettings.type!=="FilterBar"&&(this.removeFocus(),this.restoreFocus())},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(x.remove(this.parent.element,"mousedown",this.focusCheck),x.remove(this.parent.element,"touchstart",this.focusCheck),x.remove(this.parent.element,"focus",this.onFocus),x.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),ii(this.parent,this.evtHandlers,!1))},o.prototype.destroy=function(){this.removeEventListener()},o.prototype.restoreFocus=function(e){if(!(e&&e.requestType==="sorting"&&u(e.target))){var t=this.parent.groupModule;if(this.parent.allowGrouping&&t&&(t.groupSortFocus||t.groupTextFocus)){t.groupSortFocus=!1,t.groupTextFocus=!1;return}this.firstHeaderCellClick=!0,this.addFocus(this.getContent().getFocusInfo());var i=["add","save","delete","cancel","batchsave","batchDelete","batchCancel"],r=this.getContent().getFocusInfo();e&&i.indexOf(e.requestType)>-1&&r&&r.elementToFocus&&r.elementToFocus.matches(".e-rowcell.e-focus")&&B([r.elementToFocus],["e-focused","e-focus"])}},o.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling&&!(this.parent.groupModule&&this.parent.groupModule.preventFocusOnGroup)){var t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=i.length&&!this.parent.groupSettings.showGroupedColumn&&!u(t.matrix[i[0]])?t.matrix[i[0]].indexOf(1):e.requestType==="grouping"?i[1]+1:i[1]-1;break}this.getContent().matrix.current=i,this.prevIndexes={rowIndex:i[0],cellIndex:i[1]};var r=this.parent.groupModule;if(this.parent.allowGrouping&&r&&r.groupCancelFocus){var n=r.getFocusableGroupedItems();n.length?n[0].parentElement.getAttribute("ej-mappingname")===e.columnName?n[3].focus():n[0].focus():r.element.focus(),r.groupCancelFocus=!1;return}this.addFocus(this.getContent().getFocusInfo())}},o.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||G([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},o.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},o.prototype.forgetPrevious=function(){this.forget=!0},o.prototype.setActiveByKey=function(e,t){if(this.parent.frozenRows!==0){var i,r={home:function(){return{toHeader:!i.isContent,toFrozen:!0}},end:function(){return{toHeader:!i.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in r){i=t.getInfo();var n=r[""+e]();this.setActive(!n.toHeader),this.getContent().matrix.current=t.matrix.current}}},o.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&(e.keyArgs.action==="enter"&&e.parent.classList.contains("e-detailcell")||(e.keyArgs.action==="tab"||e.keyArgs.action==="shiftTab")&&e.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var t;e.parent&&e.parent.closest(".e-unboundcell")&&e.keyArgs.action==="shiftTab"?t=this.commandColumnFocusElement(e.parent,!0):t=this.getContent().getFocusable(this.getFocusedElement()),this.setFocusedElement(t),this.currentInfo.skipAction=!0}},o.prototype.commandColumnFocusElement=function(e,t){var i=e.querySelectorAll("button:not(.e-hide)");return t?i[i.length-1]:i[0]},o}(),Vc=function(){function o(){this.matrix=[],this.current=[]}return o.prototype.set=function(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[parseInt(e.toString(),10)]=this.matrix[parseInt(e.toString(),10)]||[],this.matrix[parseInt(e.toString(),10)][parseInt(t.toString(),10)]=i?1:0},o.prototype.get=function(e,t,i,r,n,s){var a=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));var l=!0;if(u(this.matrix[parseInt(e.toString(),10)]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[parseInt(e.toString(),10)].length-1)),a+i[1]>this.matrix[parseInt(e.toString(),10)].length-1&&n(e,t,r))return[e,a];var h=this.first(this.matrix[parseInt(e.toString(),10)],t,i,!0,r);t=h===null?a:h;var p=oe(e+"."+t,this.matrix);e===this.rows&&(r==="downArrow"||r==="enter")&&(i[0]=-1);var c;if(s){var d=this.getRowsFromIndex(e,s);c=oe(e+".cells."+t,d)}if(c&&c.getBoundingClientRect().width===0){var f=this.nextVisibleCellFocus(e,t,r,i,s,a);e=f[0],t=f[1]}if(h===null){for(var g=0;g<this.rows;g++)if(this.matrix[parseInt(g.toString(),10)].some(function(m){return m===1})){l=!1;break}if(l)return e=this.current.length?this.current[0]:0,[e,t]}return this.inValid(p)||!n(e,t,r)?this.get(e,a,i,r,n):[e,t]},o.prototype.getRowsFromIndex=function(e,t){return t.getTable().rows[parseInt(e.toString(),10)].classList.contains("e-addedrow")?t.getTable().rows[parseInt(e.toString(),10)].querySelector("table").rows:t.getTable().rows},o.prototype.nextVisibleCellFocus=function(e,t,i,r,n,s){var a=this.getRowsFromIndex(e,n),l=oe(e+".cells."+t,a),h=n.matrix.matrix,p=h.length-1,c=i==="tab",d=i==="shiftTab",f=i==="enter"||i==="shiftEnter"||i==="downArrow"||i==="upArrow";if(f)return[e,t];for(;l&&l.getBoundingClientRect().width===0;){if(c&&e===p&&t===h[parseInt(e.toString(),10)].lastIndexOf(1)||d&&e===0&&t===h[parseInt(e.toString(),10)].indexOf(1))return t=s,[e,t];c?t===h[parseInt(e.toString(),10)].lastIndexOf(1)?(e++,t=h[parseInt(e.toString(),10)].indexOf(1),t=this.first(this.matrix[parseInt(e.toString(),10)],t,r,!0,i),a=this.getRowsFromIndex(e,n)):(t++,t=this.first(this.matrix[parseInt(e.toString(),10)],t,r,!0,i)):d?t===h[parseInt(e.toString(),10)].indexOf(1)?(e--,t=h[parseInt(e.toString(),10)].lastIndexOf(1),t=this.first(this.matrix[parseInt(e.toString(),10)],t,r,!0,i),a=this.getRowsFromIndex(e,n)):(t--,t=this.first(this.matrix[parseInt(e.toString(),10)],t,r,!0,i)):i==="rightArrow"||i==="shiftRight"?t===h[parseInt(e.toString(),10)].lastIndexOf(1)?t=s:(t++,t=this.first(this.matrix[parseInt(e.toString(),10)],t,r,!0,i)):i==="leftArrow"||i==="shiftLeft"?t===h[parseInt(e.toString(),10)].indexOf(1)?t=s:(t--,t=this.first(this.matrix[parseInt(e.toString(),10)],t,r,!0,i)):i===null&&(t++,t=this.first(this.matrix[parseInt(e.toString(),10)],t,r,!0,i)),l=oe(e+".cells."+t,a)}return[e,t]},o.prototype.first=function(e,t,i,r,n){return(t<0||t===e.length)&&this.inValid(e[parseInt(t.toString(),10)])&&n!=="upArrow"&&n!=="downArrow"||!e.some(function(s){return s===1})?null:this.inValid(e[parseInt(t.toString(),10)])?this.first(e,["upArrow","downArrow","shiftUp","shiftDown","enter","shiftEnter"].indexOf(n)!==-1?r?0:++t:t+i[1],i,!1,n):t},o.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[parseInt(e.toString(),10)].length-1)),this.current=[e,t]},o.prototype.generate=function(e,t,i){this.rows=e.length-1,this.matrix=[];for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)].cells.filter(function(l){return l.isSpanned!==!0});this.columns=Math.max(n.length-1,this.columns|0);for(var s=0,a=0;a<n.length;a++)n[parseInt(a.toString(),10)].column&&n[parseInt(a.toString(),10)].column.columns?s=this.columnsCount(n[parseInt(a.toString(),10)].column.columns,s):s++,this.set(r,a,e[parseInt(r.toString(),10)].visible===!1?!1:t(e[parseInt(r.toString(),10)],n[parseInt(a.toString(),10)],i));this.columns=Math.max(s-1,this.columns|0)}return this.matrix},o.prototype.columnsCount=function(e,t){for(var i=e,r=t,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].columns?r=this.columnsCount(i[parseInt(n.toString(),10)].columns,r):r++;return r},o.prototype.inValid=function(e){return e===0||e===void 0},o}(),Pl=function(){function o(e){var t=this;this.matrix=new Vc,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(i){var r={home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]};return r[""+i]||null}}return o.prototype.getTable=function(){return this.parent.getContentTable()},o.prototype.onKeyPress=function(e){var t=/(Mac)/i.test(navigator.platform);if(t&&e.metaKey){if(e.action==="home")e.action="ctrlHome";else if(e.action==="end")e.action="ctrlEnd";else if(["downArrow","upArrow","leftArrow","rightArrow"].indexOf(e.action)!==-1)return}var i=this.keyActions[e.action],r=this.getCurrentFromAction(e.action,i,e.action in this.keyActions,e);if(r){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===r.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode===40||e.keyCode===40)){if(r.toString()===[this.matrix.rows,this.matrix.columns].toString()||r.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===r.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&r.toString()===[0,1].toString())return!1;r=this.editNextRow(r[0],r[1],e.action)}this.matrix.select(r[0],r[1])}},o.prototype.editNextRow=function(e,t,i){var r=this.parent,n=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),s=r.getColumnIndexByField(r.getVisibleColumns()[0].field),a=this.getTable().rows[parseInt(e.toString(),10)],l=r.editSettings.showAddNewRow&&a.classList.contains("e-addedrow")?a.querySelectorAll("td:not(.e-editcell)")[parseInt(t.toString(),10)]:a.cells[parseInt(t.toString(),10)];if(i==="tab"&&n){e++;var h=this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-detailrowcollapse").length;t=s+h}return i==="shiftTab"&&n&&(e--,t=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),!l.classList.contains(Le)&&!l.classList.contains("e-headercell")&&!l.classList.contains("e-groupcaption")&&!l.classList.contains("e-filterbarcell")?this.editNextRow(e,t,i):[e,t]},o.prototype.getCurrentFromAction=function(e,t,i,r){if(t===void 0&&(t=[0,0]),!i&&!this.indexesByKey(e)||this.matrix.current.length===0)return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(t),s=n[0],a=n[1],l=n[2],h=n[3];if(this.parent.allowGrouping&&!u(this.parent.groupSettings.columns)&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&e==="enter")for(var p=s;p<this.matrix.matrix.length;p++){var c=this.getTable().rows[p+1];if(c&&c.cells[parseInt(a.toString(),10)]&&c.cells[parseInt(a.toString(),10)].classList.contains("e-rowcell"))return[p+1,a];if(p===this.matrix.matrix.length-1)return[s,a]}if(e==="ctrlEnd"||e==="end"){var d=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];e==="end"&&(d=[s,this.matrix.matrix[parseInt(s.toString(),10)].length-1]),this.matrix.matrix[d[0]][d[1]]===0&&(d=Vt(this.matrix.matrix,d,!1)),s=d[0],a=d[1]+1}var f=this.matrix.get(s,a,[l,h],e,this.validator(),this);return f},o.prototype.checkRowCellFocus=function(e){return e.classList.contains(Le)?e.classList.contains("e-focused"):!0},o.prototype.onClick=function(e,t){var i=e.target;if(this.target=i,i=i.classList.contains(Le)?i:Y(i,"td"),i=i||Y(e.target,"td.e-detailrowcollapse")||Y(e.target,"td.e-detailrowexpand"),i=Y(e.target,"td.e-detailcell")&&u(Y(Y(e.target,".e-grid"),"td.e-detailcell"))?null:i,i=i&&Y(i,"table").classList.contains(di)?i:null,!i)return!1;var r=i.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&T(i,"e-addedrow")&&(r=T(i,"e-addedrow").rowIndex);var n=[r,i.cellIndex],s=n[0],a=n[1],l=this.matrix.current,h=l[0],p=l[1],c=oe(s+"."+a,this.matrix.matrix);if(this.matrix.inValid(c)||!t&&h===s&&p===a&&this.checkRowCellFocus(i)||!T(e.target,Le)&&!T(e.target,"e-groupcaption")&&!T(e.target,"e-recordpluscollapse")&&!T(e.target,"e-recordplusexpand")&&!T(e.target,"e-detailrowcollapse")&&!T(e.target,"e-detailrowexpand")&&!T(e.target,"e-templatecell"))return!1;this.matrix.select(s,a)},o.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],r=i===void 0?0:i,n=t[1],s=n===void 0?0:n;this.matrix.current=[r,s];var a=this.getTable().rows[parseInt(r.toString(),10)];return e.element=u(a)?null:this.parent.editSettings.showAddNewRow&&a.classList.contains("e-addedrow")?a.querySelectorAll("td:not(.e-editcell)")[parseInt(s.toString(),10)]:a.cells[parseInt(s.toString(),10)],e.element&&(e.elementToFocus=(!e.element.classList.contains("e-unboundcell")||this.parent.editSettings.showAddNewRow&&e.element.classList.contains("e-unboundcell")&&T(e.element,"e-addedrow"))&&!e.element.classList.contains("e-detailcell")?this.getFocusable(e.element):e.element,e.elementToFocus=e.element.classList.contains("e-detailcell")&&e.element.querySelector(".e-childgrid")?e.element.querySelector(".e-childgrid"):e.elementToFocus,this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&e.elementToFocus.tagName.toLowerCase()==="input"&&e.elementToFocus.classList.contains("e-dropdownlist")&&(e.elementToFocus=e.elementToFocus.parentElement),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e},o.prototype.getFocusable=function(e){var t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!u(Y(e,".e-templatecell"));if(this.parent.isEdit){var r=this.parent.editSettings.showAddNewRow&&T(e,"e-addedrow")?", button:not(.e-hide)":"";t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea'+r}var n=[].slice.call(e.querySelectorAll(t));if(e.classList.contains("e-fltrtemp")){var s=[].slice.call(e.querySelectorAll(".e-fltrtemp-focus"));if(this.focusType==="click"&&this.target&&this.target.classList.contains("e-fltrtemp-focus"))return this.target;if(this.focusType==="key"&&s.length&&(this.action==="tab"||this.action==="shiftTab")){var a=s.indexOf(this.currentTarget);return a===-1?s[this.action==="tab"?0:s.length-1]:s[this.action==="tab"?a+1:a-1]}}return n.length?i&&n.length>1&&!(this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&this.target)?this.target?this.target:e:n[0]:e},o.prototype.selector=function(e,t,i){var r=[re.Expand,re.GroupCaption,re.CaptionSummary,re.GroupSummary];return(e.isDataRow&&t.visible&&(t.isDataCell||t.isTemplate)||e.isDataRow&&t.cellType===re.DetailExpand&&u(t.visible)||!e.isDataRow&&r.indexOf(t.cellType)>-1&&!((t.cellType===re.GroupSummary||t.cellType===re.CaptionSummary)&&!(t.isDataCell&&t.visible))||t.column&&t.visible&&t.column.type==="checkbox"||t.cellType===re.CommandColumn||e.isDataRow&&i)&&!(e.edit==="delete"&&e.isDirty)},o.prototype.nextRowFocusValidate=function(e){for(var t=e,i=e,r=this.matrix.rows;i<=r;i++)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1)e=e+1;else return e;return this.lastIdxCell=!0,t},o.prototype.previousRowFocusValidate=function(e){for(var t=e,i=e,r=0;i>=r;i--)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1){if(e=e-1,e<0)return this.lastIdxCell=!0,t}else return e;return t},o.prototype.jump=function(e,t){this.lastIdxCell=!1;var i=this.parent.frozenRows!==0&&e==="shiftEnter",r=(e==="upArrow"||i)&&t[0]===0;this.matrix.matrix[t[0]]&&e==="tab"&&this.matrix.matrix.length&&t[1]===this.matrix.matrix[t[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==t[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),e==="shiftTab"&&t[0]!==0&&this.matrix.matrix[t[0]].indexOf(1)===t[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[t[0]].length);var n=!1,s=T(document.activeElement,"e-addedrow")&&this.parent.editSettings.showAddNewRow?T(document.activeElement,"e-addedrow"):document.activeElement.parentElement;if((this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!u(s)&&s.classList.contains(ut)){var a=parseInt(s.getAttribute(He),10)-1;n=a>0}var l={swap:n?!1:(e==="upArrow"||i)&&t[0]===0,toHeader:r};return l},o.prototype.getNextCurrent=function(e,t,i,r){e===void 0&&(e=[]);var n=[];return(r==="rightArrow"||r==="tab")&&(n[0]=e[0],n[1]=-1),(r==="downArrow"||r==="enter")&&(n[0]=-1,n[1]=e[1]),n},o.prototype.generateRows=function(e,t){var i,r=t.matrix,n=t.handlerInstance,s=n.matrix.matrix.length,a=this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"?s+1:s;n.matrix.matrix=n.matrix.matrix.slice(0,a),n.matrix.rows=a,(i=n.matrix.matrix).push.apply(i,r),n.matrix.rows+=r.length},o.prototype.getInfo=function(e){var t=this.getFocusInfo(),i=this.matrix.current,r=i[0],n=i[1],s=t.element.classList.contains(Le),a=s||e&&e.action!=="enter"&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(t.element.parentElement.getAttribute(He),10)-1,r),Math.min(parseInt(t.element.getAttribute(je),10)-1,n)],h=l[0],p=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&s&&(h=this.parent.getDataRows().indexOf(t.element.parentElement)),this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&(h=r,p=n),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e&&e.action==="downArrow"&&h++,{isContent:!0,isDataCell:s,indexes:[h,p],isSelectable:a}},o.prototype.validator=function(){var e=this.getTable();return function(t,i,r){if(!u(e.rows[parseInt(t.toString(),10)])){var n=void 0;i=e.querySelector(".e-emptyrow")?0:i,e.rows[parseInt(t.toString(),10)].cells[0].classList.contains("e-editcell")?n=e.rows[parseInt(t.toString(),10)].cells[0].querySelectorAll("td")[parseInt(i.toString(),10)]:n=e.rows[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)];var s=n.getBoundingClientRect().width!==0;if(r==="enter"||r==="shiftEnter")return s&&n.classList.contains(Le);if((r==="shiftUp"||r==="shiftDown")&&n.classList.contains(Le))return s;if(r!=="shiftUp"&&r!=="shiftDown")return s}return!1}},o.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],r=i===void 0?-1:i,n=t[1],s=n===void 0?-1:n;if(r<0||s<0)return!0;var a=oe(r+".cells."+s,this.getTable().rows);return a&&(e.action==="enter"||e.action==="shiftEnter")?a.classList.contains(Le)&&!a.classList.contains("e-unboundcell")||a.classList.contains("e-editedbatchcell")&&!a.classList.contains("e-detailcell"):!0},o.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},o}(),Gc=function(o){Hc(e,o);function e(t){return o.call(this,t)||this}return e.prototype.getTable=function(){return this.parent.getHeaderTable()},e.prototype.onClick=function(t){this.focusType="click";var i=t.target;if(this.target=i,i=i.classList.contains("e-headercell")?i:Y(i,"th"),!i&&(this.parent.frozenRows!==0||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&(i=t.target.classList.contains(Le)?t.target:Y(t.target,"td")),t.target.classList.contains("e-columnheader")||t.target.querySelector(".e-stackedheadercell"))return!1;if(i){var r=i.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&T(i,"e-addedrow")&&(r=T(i,"e-addedrow").rowIndex);var n=[r,i.cellIndex],s=n[0],a=n[1],l=oe(s+"."+a,this.matrix.matrix);if(this.matrix.inValid(l))return!1;this.matrix.select(r,i.cellIndex)}},e.prototype.getFocusInfo=function(){var t={},i=this.matrix.current,r=i[0],n=r===void 0?0:r,s=i[1],a=s===void 0?0:s,l=this.getTable().rows[parseInt(n.toString(),10)];return t.element=u(l)?null:this.parent.editSettings.showAddNewRow&&l.classList.contains("e-addedrow")?l.querySelectorAll("td:not(.e-editcell)")[parseInt(a.toString(),10)]:l.cells[parseInt(a.toString(),10)],u(t.element)||(t.elementToFocus=this.getFocusable(t.element),t.outline=!t.element.classList.contains("e-filterbarcell")),t},e.prototype.selector=function(t,i){return i.visible&&(i.column.field!==void 0||i.isTemplate||!u(i.column.template)||!u(i.column.commands)||i.column.type==="checkbox")||i.cellType===re.StackedHeader},e.prototype.jump=function(t,i){var r=this.parent.frozenRows!==0&&t==="enter",n,s;return this.parent.enableHeaderFocus&&t==="tab"&&(s=this.matrix.matrix.length-1===i[0],n=i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),n&&(s?this.matrix.current[0]=0:this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1)),{swap:(t==="downArrow"||r)&&i[0]===this.matrix.matrix.length-1||t==="tab"&&s&&n}},e.prototype.getNextCurrent=function(t,i,r,n){t===void 0&&(t=[]);var s=[];return(n==="rightArrow"||n==="shiftRight"&&this.getGridSeletion()||n==="tab")&&(s[0]=t[0],s[1]=-1),(n==="upArrow"||n==="shiftEnter")&&(s[0]=this.matrix.matrix.length,s[1]=t[1]),s},e.prototype.generateRows=function(t){var i=this.matrix.matrix.length;if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"){this.matrix.rows=++this.matrix.rows;for(var r=t[0].cells,n=0,s=0;s<r.length;s++)r[parseInt(s.toString(),10)].column&&r[parseInt(s.toString(),10)].column.columns?n=this.checkFilterColumn(r[parseInt(s.toString(),10)].column.columns,i,n):(this.matrix.set(i,n,r[parseInt(s.toString(),10)].visible&&r[parseInt(s.toString(),10)].column.allowFiltering!==!1),n++)}},e.prototype.checkFilterColumn=function(t,i,r){for(var n=t,s=r,a=0;a<n.length;a++)n[parseInt(a.toString(),10)].columns?s=this.checkFilterColumn(n[parseInt(a.toString(),10)].columns,i,s):(this.matrix.set(i,s,n[parseInt(a.toString(),10)].visible&&n[parseInt(a.toString(),10)].allowFiltering!==!1),s++);return s},e.prototype.getInfo=function(t){return Q(o.prototype.getInfo.call(this,t),{isContent:!1,isHeader:!0})},e.prototype.validator=function(){return function(){return!0}},e.prototype.shouldFocusChange=function(t){var i=this.matrix.current,r=i[0],n=i[1];if(r<0||n<0)return!0;var s=oe(r+".cells."+n,this.getTable().rows);return s&&(t.action==="enter"||t.action==="altDownArrow")?!s.classList.contains("e-headercell"):!0},e.prototype.getHeaderType=function(){return"HeaderFocus"},e}(Pl),Wc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pi=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},_c=function(o){Wc(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return Pi([C(12)],e.prototype,"pageSize",void 0),Pi([C(8)],e.prototype,"pageCount",void 0),Pi([C(1)],e.prototype,"currentPage",void 0),Pi([C()],e.prototype,"totalRecordsCount",void 0),Pi([C(!1)],e.prototype,"enableQueryString",void 0),Pi([C(!1)],e.prototype,"pageSizes",void 0),Pi([C(null)],e.prototype,"template",void 0),e}(_e),Uc=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Oi=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},jc=function(o){Uc(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return Oi([C("startsWith")],e.prototype,"operator",void 0),Oi([C(!1)],e.prototype,"ignoreAccent",void 0),Oi([C(null)],e.prototype,"headerTemplate",void 0),Oi([C(null)],e.prototype,"template",void 0),Oi([C(null)],e.prototype,"footerTemplate",void 0),Oi([C(!0)],e.prototype,"enableSearching",void 0),Oi([C(null)],e.prototype,"renderCustomColumnChooser",void 0),e}(_e),Kc=function(){function o(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.virtualSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.isRowDeselect=!1,this.autoFillRLselection=!0,this.isFocusLastCell=!1,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return o.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},o.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},o.prototype.fDataUpdate=function(e){if(!this.isMultiSelection&&(!u(e.cellIndex)||!u(e.rowIndex))){var t=this.getRowObj(u(e.rowIndex)?u(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e},o.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1},o.prototype.getModuleName=function(){return"selection"},o.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+Bt)&&!e.querySelector("."+yi)||(this.hidePopUp(),this.clearSelection(),this.destroyAutoFillElements(),this.removeEventListener(),this.unWireEvents(),x.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),x.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},o.prototype.isEditing=function(){return(this.parent.editSettings.mode==="Normal"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.editSettings.showAddNewRow&&!this.parent.isPersistSelection},o.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if(e.editSettings.mode==="Batch"&&e.editModule){var t=ss(this.parent.getCurrentViewRecords());t=e.editSettings.newRowPosition==="Bottom"?t.concat(this.parent.editModule.getBatchChanges()[yn]):this.parent.editModule.getBatchChanges()[yn].concat(t);for(var i=this.parent.editModule.getBatchChanges()[Tl],r=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<i.length;n++)for(var s=0;s<t.length;s++)if(i[parseInt(n.toString(),10)][""+r]===t[parseInt(s.toString(),10)][""+r]){t.splice(s,1);break}return t}else if(this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection){var a=e.getCurrentViewRecords().filter(function(l){return l.key===void 0});return a}else return e.getCurrentViewRecords()},o.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection){this.addRowsToSelection([e]);return}var i=this.parent,r=i.getRowByIndex(e),n=r&&i.getRowObjectFromUID(r.getAttribute("data-uid"));if(!(this.isPartialSelection&&n&&n.isDataRow&&!n.isSelectable)){var s,a=!1;if(i.enableVirtualization&&e>-1){var l={selectedIndex:e,isAvailable:!0};if(this.parent.notify(vp,l),r&&i.getRowObjectFromUID(r.getAttribute("data-uid")))s=i.getRowObjectFromUID(r.getAttribute("data-uid")).data;else{if(l.isAvailable&&!i.selectionSettings.persistSelection){var h=this.parent.getSelectedRecords();h.length>0&&this.clearRowSelection()}return}}else s=this.getRowObj(e).data;if(!(!this.isRowType()||!r||this.isEditing())){var p=r.hasAttribute("aria-selected");if(this.activeTarget(),!t||!this.selectedRowIndexes.length)t=!1;else{var c=this.selectionSettings.checkboxMode==="ResetOnRowClick",d=!this.parent.isCheckBoxSelection&&this.selectionSettings.type==="Multiple";!c&&!d||this.selectedRowIndexes.length===1&&(c||d)?t=this.isKeyAction&&this.parent.isCheckBoxSelection?!1:this.selectedRowIndexes.indexOf(e)!==-1:t=!1}this.isKeyAction=!1;var f,g="cancel";if(!t)f={data:s,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(Xn,this.fDataUpdate(f),this.rowSelectingCallBack(f,t,e,s,a,p,g));else{if(this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&this.selectionSettings.persistSelection){if(this.rowDeselect($n,[n.index],[n.data],[r],[n.foreignKeyData],this.actualTarget),this.isCancelDeSelect)return;this.parent.isCheckBoxSelection||(this.selectedRowIndexes=[],this.selectedRecords=[],this.isRowSelected=!1,this.selectRowIndex(-1)),this.rowDeselect(Zn,[n.index],[n.data],[r],[n.foreignKeyData],this.actualTarget,void 0,void 0,void 0)}this.rowSelectingCallBack(f,t,e,s,a,p,g)(f)}}}},o.prototype.rowSelectingCallBack=function(e,t,i,r,n,s,a){var l=this;return function(h){if(!u(h)&&h[""+a]===!0){l.disableInteracted();return}l.index=i,l.toggle=t,l.data=r,l.removed=n,s&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"?(l.clearSelectedRow(i),l.selectRowCallBack()):!s&&l.selectionSettings.persistSelection&&l.parent.isCheckBoxSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"&&l.selectRowCallBack(),l.selectionSettings.checkboxMode==="ResetOnRowClick"&&(l.isCheckboxReset=!0,l.clearSelection()),(!l.selectionSettings.persistSelection||l.selectionSettings.checkboxMode==="ResetOnRowClick"||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())}},o.prototype.selectRowCallBack=function(){var e=this.parent,t,i=this.index,r=this.toggle,n=this.data,s=this.removed,a=e.getRowByIndex(i);!r&&!s&&(this.selectedRowIndexes.indexOf(i)<=-1&&this.updateRowSelection(a,i),this.selectRowIndex(i)),r||(t={data:n,rowIndex:i,row:a,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},this.onActionComplete(t,Jn)),this.isInteracted=!1,this.updateRowProps(i)},o.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},o.prototype.selectedDataUpdate=function(e,t,i,r,n){for(var s=0,a=r.length;s<a;s++){var l=this.parent.getDataRows()[r[parseInt(s.toString(),10)]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(r[parseInt(s.toString(),10)]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(e.push(h.data),i.push(l),t.push(h.foreignKeyData)):this.isPartialSelection&&n&&n.splice(n.indexOf(r[parseInt(s.toString(),10)]),1)}},o.prototype.selectRows=function(e){var t=this,i=this.parent,r=e.slice(),n=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;var s=[],a=[],l="cancel",h=[];if(!(!this.isRowType()||this.isEditing())){this.selectedDataUpdate(h,a,s,e,r),this.activeTarget();var p={cancel:!1,rowIndexes:r,row:s,rowIndex:n,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:h,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:a};this.parent.trigger(Xn,this.fDataUpdate(p),function(c){if(!u(c)&&c[""+l]===!0){t.disableInteracted();return}t.selectionSettings.persistSelection&&i.allowRowDragAndDrop&&t.isDragged||t.clearRow(),t.selectRowIndex(r.slice(-1)[0]);var d=function(E,k){t.updateRowSelection(i.getRowByIndex(E),E,k),t.updateRowProps(n)};if(t.isSingleSel())d(n);else for(var f=0,g=r;f<g.length;f++){var m=g[f];d(m,!!i.enableVirtualization)}if(t.checkVirtualCheckBox()&&!t.parent.isPersistSelection)if(r.length===t.totalRecordsCount)t.virtualSelectedData=t.virtualCheckBoxData().slice(),t.selectedRowIndexes=Object.keys(t.virtualSelectedData).map(function(E){return parseInt(E,10)}),t.setCheckAllState();else{var v=r.filter(function(E){return t.selectedRowIndexes.indexOf(E)===-1});if(v.length>0){for(var y=t.virtualCheckBoxData().slice(),R=0;R<v.length;R++){var b=y[v[R]];u(b)||(t.virtualSelectedData.push(b),t.selectedRowIndexes.push(v[R]))}t.setCheckAllState()}}c={rowIndexes:r,row:s,rowIndex:n,target:t.actualTarget,prevRow:i.getRows()[t.prevRowIndex],previousRowIndex:t.prevRowIndex,data:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked,foreignKeyData:a},t.isRowSelected&&t.onActionComplete(c,Jn),t.isInteracted=!1})}},o.prototype.addRowsToSelection=function(e){var t=this.parent,i="cancel",r=this.target;this.isMultiSelection=!0;var n=[],s=[],a=[],l=t.getSelectedRowIndexes().concat(e),h=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]);if(!((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)){var p,c=this.parent.getColumns().filter(function(y){return y.type==="checkbox"});this.isMultiCtrlRequest&&!c.length&&this.selectedDataUpdate(a,s,n,l);for(var d=0,f=e;d<f.length;d++){var g=f[d],m=this.getRowObj(g),v=this.selectedRowIndexes.indexOf(g)>-1;if(!(this.isPartialSelection&&m&&m.isDataRow&&!m.isSelectable)){if(this.selectRowIndex(g),v&&(c.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect($n,[g],[m.data],[h],[m.foreignKeyData],r),this.isCancelDeSelect)return;this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.splice(this.virtualSelectedData.indexOf(m.data),1),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(g),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(Zn,[g],[m.data],[h],[m.foreignKeyData],r,void 0,void 0,void 0),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),p={cancel:!1,data:a.length?a:m.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:s.length?s:m.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.parent.trigger(Xn,this.fDataUpdate(p)),!u(p)&&p[""+i]===!0){this.disableInteracted();return}this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,g)}if(v||(p={data:a.length?a:m.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:s.length?s:m.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.onActionComplete(p,Jn)),this.isInteracted=!1,this.updateRowProps(g),this.isSingleSel())break}}}},o.prototype.getCollectionFromIndexes=function(e,t){for(var i=[],r=e<=t?{i:e,max:t}:{i:t,max:e},n=r.i,s=r.max;n<=s;n++)i.push(n);return e>t&&i.reverse(),i},o.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},o.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&this.parent.checkAllRows!=="Check"||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},o.prototype.clearSelectedRow=function(e){if(this.toggle){var t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},o.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},o.prototype.getPkValue=function(e,t){return e&&Ed(e)?Si(e,t):t[""+e]},o.prototype.updatePersistCollection=function(e,t){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!u(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var r=this.getRowObj(e),n=r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;r.isSelected=t,t&&!this.isPartialSelection||this.isPartialSelection&&r.isSelectable&&r.isSelected?(this.selectedRowState[""+n]=t,delete this.unSelectedRowState[""+n],this.persistSelectedData.some(function(s){return i.getPkValue(i.primaryKey,s)===n})||this.persistSelectedData.push(r.data)):this.updatePersistDelete(n)}},o.prototype.updatePersistDelete=function(e,t){var i=this;delete this.selectedRowState[""+e],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+e]=!0);var r,n=this.persistSelectedData.some(function(s,a){return r=a,i.getPkValue(i.primaryKey,s)===e});n&&(this.persistSelectedData.splice(r,1),t&&this.parent.partialSelectedRecords.splice(r,1))},o.prototype.updateCheckBoxes=function(e,t,i){if(!u(e)){var r=e.querySelector(".e-checkselect");u(r)||(nn(r.nextElementSibling,t),Vi(r,t),(u(this.checkedTarget)||!u(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},o.prototype.updateRowSelection=function(e,t,i){if(e){if(this.selectedRowIndexes.indexOf(t)===-1&&(this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&this.virtualSelectedData.push(this.parent.getRowObjectFromUID(e.getAttribute("data-uid")).data),this.selectedRowIndexes.push(t),this.selectedRecords.push(e)),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus&&!(this.parent.isFocusFirstCell||this.isFocusLastCell)){var r=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&this.mouseButton===2&&(r=this.parent.contextMenuModule.cell),!r||i)return;this.focus.onClick({target:r},!0)}else if(this.parent.isFocusFirstCell||this.isFocusLastCell){this.parent.isFocusFirstCell=!1;var n=this.isFocusLastCell?"last-child":"first-child",r=e.querySelector(".e-selectionbackground.e-rowcell:not(.e-hide, .e-detailrowcollapse, .e-detailrowexpand, .e-rowdragdrop, .e-gridchkbox):"+n);this.isFocusLastCell=!1,r&&this.focus.onClick({target:r},!0,!0)}}},o.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=ss(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!u(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");if(e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection){this.persistSelectedData=[],this.selectedRowState={},this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[];for(var t=this.parent.getRowsObject(),i=0;i<t.length;i++)t[i].isDataRow&&(t[i].isSelectable?this.parent.partialSelectedRecords.push(t[i].data):this.parent.disableSelectedRecords.push(t[i].data))}this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},o.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){var t=this.parent.getDataRows(),i=[],r=[],n=[],s=[],a=this.target;this.isRowDeselect=!0;for(var l=0,h=this.selectedRowIndexes.length;l<h;l++){var p=void 0;this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache?p=this.parent.getRowByIndex(this.selectedRowIndexes[parseInt(l.toString(),10)]):p=this.parent.editSettings.mode==="Batch"?this.parent.getRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]];var c=this.getRowObj(p);c&&(i.push(c.data),r.push(p),n.push(this.selectedRowIndexes[parseInt(l.toString(),10)]),s.push(c.foreignKeyData))}this.selectionSettings.persistSelection&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect($n,n,i,r,s,a,null,function(){if(e.isCancelDeSelect&&(e.isRowClicked||e.checkSelectAllClicked||e.isInteracted&&!e.parent.isPersistSelection)){if(e.parent.isPersistSelection)if(e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall"))==="Intermediate"||e.parent.isPersistSelection)for(var d=0;d<e.selectedRecords.length;d++)e.updatePersistCollection(e.selectedRecords[parseInt(d.toString(),10)],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0);e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1));return}for(var f=[].slice.call(t.filter(function(m){return m.hasAttribute("aria-selected")})),g=0;g<f.length;g++)e.disableUI||(f[parseInt(g.toString(),10)].removeAttribute("aria-selected"),e.addRemoveClassesForRow(f[parseInt(g.toString(),10)],!1,!0,"e-selectionbackground","e-active")),e.isPrevRowSelection||e.updatePersistCollection(f[parseInt(g.toString(),10)],!1),e.updateCheckBoxes(f[parseInt(g.toString(),10)]);(e.parent.enableVirtualization||e.parent.enableInfiniteScrolling&&e.parent.infiniteScrollSettings.enableCache)&&e.selectedRecords.length&&!f.length&&!e.parent.selectionSettings.persistSelection&&!e.disableUI&&!e.parent.isCheckBoxSelection&&e.addRemoveClassesForRow(null,!1,!0),e.virtualSelectedData=[],e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.isPrevRowSelection=!1,e.rowDeselect(Zn,n,i,r,s,a,null,void 0,null),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))},null),this.isRowDeselect=!1}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},o.prototype.rowDeselect=function(e,t,i,r,n,s,a,l,h){var p=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||!this.isRowDeselect||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&this.focus.activeKey==="space")||!this.selectionSettings.persistSelection){var c="cancel",d=t.length===1&&this.deSelectedData.length===1,f={rowIndex:t[0],data:this.selectionSettings.persistSelection&&this.parent.checkAllRows==="Uncheck"&&!d&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"?this.deSelectedData:i,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};e==="rowDeselected"&&delete f.cancel;var g="row",m="target",v="rowIndex",y="rowIndexes",R="data",b="foreignKeyData";f[""+g]=r,f[""+m]=this.actualTarget;var E=this.actualTarget&&!u(Y(this.actualTarget,"thead"));E||t.length>1?(f[""+v]=t[0],f[""+y]=t):t.length===1&&(f[""+R]=f[""+R][0],f[""+g]=f[""+g][0],f[""+b]=f[""+b][0],this.isAddRowsToSelection&&(f[""+y]=t)),this.parent.trigger(e,f,function(k){p.isCancelDeSelect=k[""+c],(!p.isCancelDeSelect||!p.isRowClicked&&!p.isInteracted&&!p.checkSelectAllClicked)&&(p.updatePersistCollection(r[0],!1),p.updateCheckBoxes(r[0],void 0,t[0])),l!==void 0&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&l!==void 0&&l()},o.prototype.getRowObj=function(e){return e===void 0&&(e=this.currentIndex),u(e)?{}:(typeof e=="number"&&(e=this.parent.getRowByIndex(e)),e?this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{}:{})},o.prototype.selectCell=function(e,t){if(!(!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache))){var i=this.parent,r,n=i.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex));this.currentIndex=e.rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(!this.isCellType()||!n||this.isEditing())){var a=n.classList.contains("e-cellselectionbackground");if(t=t&&!gt(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&a,t)this.successCallBack(r,t,e,n,s)(r);else{r={data:s,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1};var l="currentCell";r[""+l]=n;var h="previousRowCellIndex";r[""+h]=this.prevECIdxs,this.parent.trigger(ar,this.fDataUpdate(r),this.successCallBack(r,t,e,n,s)),this.cellselected=!0}}}},o.prototype.successCallBack=function(e,t,i,r,n){var s=this;return function(a){var l="cancel",h="currentCell";if(!(!u(a)&&a[""+l]===!0)&&(t||(a[""+h]=a[""+h]?a[""+h]:r),s.clearCell(),t||s.updateCellSelection(r,i.rowIndex,i.cellIndex),!t)){var p={data:n,cellIndex:i,currentCell:r,selectedRowCellIndex:s.selectedRowCellIndexes,previousRowCell:s.prevECIdxs?s.getCellIndex(s.prevECIdxs.rowIndex,s.prevECIdxs.cellIndex):void 0},c="previousRowCellIndex";p[""+c]=s.prevECIdxs,s.updateCellProps(i,i),s.onActionComplete(p,qr)}}},o.prototype.getCellIndex=function(e,t){return this.parent.getCellFromIndex(e,t)},o.prototype.selectCellsByRange=function(e,t){var i=this;if(this.isCellType()){var r=this.parent,n=this.parent.isSpan?Ea(this.parent,e.rowIndex,e.cellIndex):r.getCellFromIndex(e.rowIndex,e.cellIndex),s,a,l=e,h=t=t||e,p;this.currentIndex=e.rowIndex;var c="cancel",d=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var f={data:d,cellIndex:e,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},g="previousRowCellIndex";f[""+g]=this.prevECIdxs,this.parent.trigger(ar,this.fDataUpdate(f),function(m){if(!(!u(m)&&m[""+c]===!0)){if(i.clearCell(),e.rowIndex>t.rowIndex){var v=e;e=t,t=v}for(var y=e.rowIndex;y<=t.rowIndex;y++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(s=y===e.rowIndex?e.cellIndex:0,a=y===t.rowIndex?t.cellIndex:i.getLastColIndex(y)):(s=e.cellIndex,a=t.cellIndex),p=[];for(var R=s<a?s:a,b=s>a?s:a;R<=b;R++)n=i.parent.isSpan?Ea(r,y,R):r.getCellFromIndex(y,R),n&&(p.push(R),i.updateCellSelection(n),i.addAttribute(n));i.selectedRowCellIndexes.push({rowIndex:y,cellIndexes:p})}var E={data:d,cellIndex:h,currentCell:r.getCellFromIndex(h.rowIndex,h.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0},k="previousRowCellIndex";E[""+k]=i.prevECIdxs,i.isDragged||(i.onActionComplete(E,qr),i.cellselected=!0),i.updateCellProps(l,h)}})}}},o.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0]);this.currentIndex=e[0].rowIndex;var r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var n={data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},s="previousRowCellIndex";n[""+s]=this.prevECIdxs,this.onActionBegin(n,ar);for(var a=0,l=e.length;a<l;a++)for(var h=0,p=e[parseInt(a.toString(),10)].cellIndexes.length;h<p;h++)i=t.getCellFromIndex(e[parseInt(a.toString(),10)].rowIndex,e[parseInt(a.toString(),10)].cellIndexes[parseInt(h.toString(),10)]),i&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[parseInt(a.toString(),10)].rowIndex,cellIndex:e[parseInt(a.toString(),10)].cellIndexes[parseInt(h.toString(),10)]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});var c={data:r,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},d="previousRowCellIndex";c[""+d]=this.prevECIdxs,this.onActionComplete(c,qr)}}},o.prototype.addCellsToSelection=function(e){if(!(!this.isCellType()||this.isCellType()&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache))){var t=this.parent,i,r;this.currentIndex=e[0].rowIndex;var n="cancel",s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){this.hideAutoFill();var a;a=t.getRowsObject()[e[0].rowIndex],t.groupSettings.columns.length>0&&(a=t.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var l=[],h=0,p=e;h<p.length;h++){for(var c=p[h],d=0,f=this.selectedRowCellIndexes.length;d<f;d++)if(this.selectedRowCellIndexes[parseInt(d.toString(),10)].rowIndex===c.rowIndex){r=d;break}i=t.getCellFromIndex(c.rowIndex,this.getColIndex(c.rowIndex,c.cellIndex));var g=c.cellIndex;t.groupSettings.columns.length>0?l.push(a.cells[g+t.groupSettings.columns.length].foreignKeyData):l.push(a.cells[parseInt(g.toString(),10)].foreignKeyData);var m={cancel:!1,data:s,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?t.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},v="previousRowCellIndex";m[""+v]=this.prevECIdxs;var y=r>-1;if(y){var R=this.selectedRowCellIndexes[parseInt(r.toString(),10)].cellIndexes;R.indexOf(c.cellIndex)>-1||this.selectionSettings.mode==="Both"&&i.classList.contains("e-gridchkbox")&&!i.getAttribute("aria-selected")?(this.cellDeselect($o,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],s,[i],l),R.splice(R.indexOf(c.cellIndex),1),R.length===0&&this.selectedRowCellIndexes.splice(r,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(Zo,[{rowIndex:c.rowIndex,cellIndexes:[c.cellIndex]}],s,[i],l)):(y=!1,this.onActionBegin(m,ar),this.addRowCellIndex({rowIndex:c.rowIndex,cellIndex:c.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(m,ar),!u(m)&&m[""+n]===!0)return;this.updateCellSelection(i,c.rowIndex,c.cellIndex)}if(!y){var b={data:s,cellIndex:e[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};b[""+v]=this.prevECIdxs,this.onActionComplete(b,qr),this.cellselected=!0}this.updateCellProps(c,c)}}}},o.prototype.getColIndex=function(e,t){var i=this.parent.getColumnByIndex(t),r=Ul(this.parent,i,e);if(r)for(var n=0;n<r.length;n++){var s=parseInt(r[parseInt(n.toString(),10)].getAttribute(je),10)-1;if(s===t)return n}return-1},o.prototype.getLastColIndex=function(e){var t=this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute(je),10)-1},o.prototype.clearCell=function(){this.clearCellSelection()},o.prototype.cellDeselect=function(e,t,i,r,n){var s="cancel";if(r&&r.length>0)for(var a=0,l=r;a<l.length;a++){var h=l[a];h&&h.classList.contains(Xi)&&this.updateCheckBoxes(Y(h,"tr"))}var p={cells:r,data:i,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,p),this.isPreventCellSelect=p[""+s]},o.prototype.updateCellSelection=function(e,t,i){u(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains(Xi)&&this.updateCheckBoxes(Y(e,"tr"),!0),this.addAttribute(e)},o.prototype.addAttribute=function(e){this.target=e,u(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},o.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},o.prototype.addRowCellIndex=function(e){for(var t,i,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[parseInt(r.toString(),10)].rowIndex===e.rowIndex){t=!0,i=r;break}t?this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(i.toString(),10)].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},o.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,r=[],n=[],s=[],a=this.getCurrentBatchRecordChanges();this.hideAutoFill();for(var l=0,h=i.length;l<h;l++){r.push(a[i[parseInt(l.toString(),10)].rowIndex]);for(var p=this.getRowObj(i[parseInt(l.toString(),10)].rowIndex),c=0,d=i[parseInt(l.toString(),10)].cellIndexes.length;c<d;c++)p.cells&&s.push(p.cells[i[parseInt(l.toString(),10)].cellIndexes[parseInt(c.toString(),10)]].foreignKeyData),n.push(e.getCellFromIndex(i[parseInt(l.toString(),10)].rowIndex,i[parseInt(l.toString(),10)].cellIndexes[parseInt(c.toString(),10)]))}if(this.cellDeselect($o,i,r,n,s),this.isPreventCellSelect===!0)return;for(var l=0,h=t.length;l<h;l++)t[parseInt(l.toString(),10)].classList.remove("e-cellselectionbackground"),t[parseInt(l.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(Zo,i,r,n,s)}},o.prototype.getSelectedCellsElement=function(){for(var e=this.parent,t=e.getDataRows(),i=[],r=0,n=t.length;r<n;r++)i=i.concat([].slice.call(t[parseInt(r.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return i},o.prototype.mouseMoveHandler=function(e){e.preventDefault(),this.stopTimer();var t=this.parent.element.getBoundingClientRect(),i=this.x,r=this.y,n=Ps(e),s=n.x-t.left,a=n.y-t.top,l,h=Y(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=Y(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),i>s&&(l=s,s=i,i=l),r>a&&(l=a,a=r,r=l),this.element.style.left=i+"px",this.element.style.top=r+"px",this.element.style.width=s-i+"px",this.element.style.height=a-r+"px"),h&&!e.ctrlKey&&!e.shiftKey){var p=parseInt(h.getAttribute(He),10)-1;if(!this.isCellDrag)this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,p),this.isRowDragSelected=!0;else{var c=T(e.target,Le);c&&(this.startAFCell=this.startCell,this.endAFCell=T(e.target,Le),p>-1&&this.selectLikeExcel(e,p,parseInt(c.getAttribute(je),10)-1))}}!e.ctrlKey&&!e.shiftKey&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.isCellDrag&&this.updateScrollPosition(e,n,this.parent.getContent())},o.prototype.updateScrollPosition=function(e,t,i){var r=this,n=i.getBoundingClientRect();n.left>=t.x-20-(this.parent.enableRtl&&this.parent.height!=="auto"?Tt():0)?this.timer1=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,r.parent.enableRtl?"right":"left",e)},200):n.left+i.clientWidth-20-(!this.parent.enableRtl&&this.parent.height!=="auto"?Tt():0)<t.x&&(this.timer1=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,r.parent.enableRtl?"left":"right",e)},200)),n.top>=t.y-this.parent.getRowHeight()*.5?this.timer2=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,"up",e)},200):n.top+i.clientHeight-this.parent.getRowHeight()*.5-(i.firstElementChild.scrollWidth>i.firstElementChild.offsetWidth?Tt():0)<=t.y&&(this.timer2=window.setInterval(function(){r.setScrollPosition(i.firstElementChild,"down",e)},200))},o.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null),this.timer2&&(window.clearInterval(this.timer2),this.timer2=null),this.preventFocus=!1},o.prototype.setScrollPosition=function(e,t,i){var r=-1,n=-1;switch((this.endAFCell||this.prevECIdxs)&&(r=this.endAFCell?parseInt(this.endAFCell.getAttribute("index"),10):this.prevECIdxs.rowIndex,n=this.endAFCell?parseInt(this.endAFCell.getAttribute("aria-colindex"),10)-1:this.prevECIdxs.cellIndex),t){case"up":if(i&&Y(i.target,".e-headercontent"))return;this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes.length===1&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes.length>1&&this.startAFCell.getBoundingClientRect().top>0)&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r-=1,this.parent.frozenRows&&(r+=this.parent.frozenRows+1),r<1?e.scrollTop=0:e.scrollTop-=this.parent.getRowByIndex(r).offsetHeight;break;case"down":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r<this.parent.getRows().length-1?(r+=1,this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(r,this.selectedRowCellIndexes[0].cellIndexes[0])),e.scrollTop+=this.parent.getRowByIndex(r).offsetHeight):e.scrollTop=e.scrollHeight;break;case"left":if(n>0&&r>-1){this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[0].cellIndexes.length>0&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes[0].cellIndexes.length>1&&(!this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left>0||this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left<this.parent.element.offsetWidth))&&(n=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1);var s=this.findNextCell(e,t,n,r);n=s?parseInt(s.getAttribute("aria-colindex"),10)-1:-1,this.parent.enableRtl&&s?n<1?e.scrollLeft=e.scrollWidth:e.scrollLeft+=s.offsetWidth:s&&(n<1?e.scrollLeft=0:e.scrollLeft-=s.offsetWidth)}break;case"right":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(n=parseInt(this.startAFCell.getAttribute("aria-colindex"),10)-1);var a=this.parent.getCellFromIndex(r,n),l=this.findNextCell(e,t,n,r);l&&this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex,parseInt(l.getAttribute("aria-colindex"),10)-1)),n=l?parseInt(l.getAttribute("aria-colindex"),10)-1:-1,this.parent.enableRtl&&l?n<this.parent.columns.length-1?e.scrollLeft-=a.offsetWidth:e.scrollLeft=-e.scrollWidth:l&&(n<this.parent.columns.length-1?e.scrollLeft+=a.offsetWidth:e.scrollLeft=e.scrollWidth),this.isAutoFillSel&&(n===this.parent.columns.length-1||n===-1)&&this.startAFCell&&this.endAFCell&&(this.positionAFBorders(),e.scrollLeft=this.parent.enableRtl?-e.scrollWidth:e.scrollWidth);break}if(r>-1&&r<this.parent.getRows().length&&n>-1){var h={target:this.parent.getCellFromIndex(r,n)};if(this.isAutoFillSel&&h.target.classList.contains("e-cellselectionbackground")&&(t==="down"&&parseInt(h.target.getAttribute("index"),10)===this.parent.getRows().length-1||t==="right"&&parseInt(h.target.getAttribute("aria-colindex"),10)-1===this.parent.columns.length-1))return;this.endAFCell=h.target,this.preventFocus=!0,this.selectLikeExcel(h,r,n)}},o.prototype.findNextCell=function(e,t,i,r){var n=this.parent.getCellFromIndex(r,t==="left"?i-1:i+1);if(n&&n.classList.contains("e-hide")){var s=n.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),a=Array.from(s).indexOf(n.nextElementSibling);return a>0&&a<s.length-1?(n=s[a+(t==="left"?-1:1)],n):(e.scrollLeft=0,null)}return n},o.prototype.selectLikeExcel=function(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())},o.prototype.setFrozenBorders=function(e,t,i){var r=t.style.borderWidth.toString().split(" "),n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"],s=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+i])).filter(function(R){return R.style.display===""}),a=[].slice.call(e.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(R){return R.style.display===""}),l=this.parent.enableRtl;if(s.length)for(var h=s[0].getAttribute("index"),p=s[0].getAttribute("aria-colindex"),c=s[s.length-1].getAttribute("index"),d=s[s.length-1].getAttribute("aria-colindex"),f=0;f<s.length;f++)s[parseInt(f.toString(),10)].getAttribute("index")===h&&(r.length===1||r.length===3&&parseInt(r[0],10)===2||r.length===4&&parseInt(r[0],10)===2)&&s[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),s[parseInt(f.toString(),10)].getAttribute("aria-colindex")===p&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&(!l&&parseInt(r[3],10)===2||l&&parseInt(r[1],10)===2))&&s[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border"),s[parseInt(f.toString(),10)].getAttribute("index")===c&&(r.length===1||r.length===3&&parseInt(r[2],10)===2||r.length===4&&parseInt(r[2],10)===2)&&s[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),s[parseInt(f.toString(),10)].getAttribute("aria-colindex")===d&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&!l&&parseInt(r[1],10)===2||l&&parseInt(r[3],10)===2)&&s[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border");if(a.length)for(var h=a[0].getAttribute("index"),p=(parseInt(a[0].getAttribute("aria-colindex"),10)-1).toString(),c=a[a.length-1].getAttribute("index"),d=(parseInt(a[a.length-1].getAttribute("aria-colindex"),10)-1).toString(),f=0;f<a.length;f++){var g=a[parseInt(f.toString(),10)].getAttribute("index"),m=(parseInt(a[parseInt(f.toString(),10)].getAttribute("aria-colindex"),10)-1).toString();g===h&&(!this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&T(e,"e-content")||!T(e,"e-content"))&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),g===c&&(!this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&T(e,"e-headercontent")||!T(e,"e-headercontent"))&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border");var v=a[parseInt(f.toString(),10)].parentElement.children[parseInt(m,10)-1];m===p&&(!v||v&&!v.classList.contains("e-cellselectionbackground"))&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border");var y=a[parseInt(f.toString(),10)].parentElement.children[parseInt(m,10)+1];m===d&&(!y||y&&!y.classList.contains("e-cellselectionbackground"))&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border")}},o.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===qt&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===qt&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")))},o.prototype.drawBorders=function(){this.selectionSettings.cellSelectionMode==="BoxWithBorder"&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},o.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e},o.prototype.isLastRow=function(e){var t=[].slice.call(Y(e,Fe).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]},o.prototype.isFirstRow=function(e){var t=[].slice.call(Y(e,Fe).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},o.prototype.isFirstCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[0]===e},o.prototype.setBorders=function(e,t,i){var r=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(function(v){return v.style.display===""});if(r.length&&this.parent.isFrozenGrid()){var n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"];r=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+i]+":not(.e-hide)")).filter(function(v){return v.style.display===""})}if(r.length){var s=this.parent.isFrozenGrid(),a=r[0],l=r[r.length-1],h=a.getBoundingClientRect(),p=l.getBoundingClientRect(),c=a.offsetParent.getBoundingClientRect();(a.offsetParent.classList.contains("e-content")||a.offsetParent.classList.contains("e-headercontent"))&&(c=a.offsetParent.querySelector("table").getBoundingClientRect());var d=!s&&this.isLastRow(l)&&(i==="1"||i==="2"||i==="5")?2:0,f=0,g=s&&(i==="2"||i==="4")&&this.isFirstCell(a)?1:0,m=(this.parent.getFrozenMode()==="Right"&&(i==="1"||i==="3")||this.parent.getFrozenMode()===qt&&(i==="5"||i==="6"))&&this.isFirstCell(a)?1:0;this.parent.enableRtl?(t.style.right=c.right-h.right-g+"px",t.style.width=h.right-p.left+g+1+"px"):(t.style.left=h.left-c.left-g-m+"px",t.style.width=p.right-h.left+g-m+1+"px"),t.style.top=h.top-c.top-f+"px",t.style.height=p.top-h.top>0?p.top-c.top+p.height+(s?0:1)-(h.top-c.top)-d+f+"px":p.height+f-d+(s?0:1)+"px",this.selectDirection+=i}else t.style.display="none"},o.prototype.positionBorders=function(){this.updateStartEndCells(),!(!this.startCell||!this.bdrElement||!this.selectedRowCellIndexes.length)&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===qt&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===qt&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},o.prototype.applyBothFrozenBorders=function(e){var t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=t?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border);break}},o.prototype.applyBorders=function(e){var t=this.parent.enableRtl;if(this.parent.getFrozenMode()===qt)this.applyBothFrozenBorders(e);else switch(e.length){case 4:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=t?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=t?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=t?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=t?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=t?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=t?this.top_left:this.top_right);break;case 2:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?t?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:t?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:t?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border));break}},o.prototype.createBorders=function(){if(!this.bdrElement){var e=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr"});if(e.style.cssText="width: 2px; border-width: 0;",this.bdrElement=this.parent.getContentTable().parentElement.appendChild(e),this.parent.isFrozenGrid()){var t=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr"});if(t.style.cssText="height: 2px; border-width: 0;",this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(t),this.parent.getFrozenMode()===qt){var i=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr"});i.style.cssText="height: 2px; border-width: 0;",this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(i)}}if(this.parent.frozenRows){var r=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr"});r.style.height="2px",this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(r)}if(this.parent.frozenRows&&this.parent.isFrozenGrid()){var n=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr"});if(n.style.height="2px",this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(n),this.parent.getFrozenMode()===qt){var s=pe("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr"});s.style.height="2px",this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(s)}}}},o.prototype.showHideBorders=function(e,t){if(this.bdrElement){if(this.bdrElement.style.display=e,this.parent.isFrozenGrid()){var i=this.parent.getContentTable();G(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),G(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),G(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),G(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),t||(this.mcBdrElement.style.display=e),this.parent.getFrozenMode()===qt&&(this.frcBdrElement.style.display=e)}if(this.parent.frozenRows){var i=this.parent.getHeaderTable();G(i.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),G(i.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),G(i.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),G(i.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=e}this.parent.frozenRows&&this.parent.isFrozenGrid()&&(t||(this.mhBdrElement.style.display=e),this.parent.getFrozenMode()===qt&&(this.frhBdrElement.style.display=e))}},o.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},o.prototype.positionAFBorders=function(){if(!(!this.startCell||!this.bdrAFLeft)){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,r=t.top-e.top>=0&&(T(this.startAFCell,Gr)||T(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(T(this.startAFCell,Gr)||T(this.startAFCell,Ds))&&this.isFirstCell(this.startAFCell)?1:0,s=this.isLastRow(this.endAFCell)&&(T(this.endAFCell,Gr)||T(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,p=this.startAFCell.offsetParent.parentElement.scrollLeft,c=h-this.startAFCell.offsetTop,d=p-this.startAFCell.offsetLeft,f=this.parent.element.clientHeight-Tt();this.parent.allowPaging&&(f-=this.parent.element.querySelector(".e-pager").offsetHeight),this.parent.aggregates.length&&(f-=this.parent.getFooterContent().offsetHeight);var g=this.parent.element.clientWidth-(this.parent.height!=="auto"?Tt():0);c=c>0?Math.floor(c)-1:0,d=d>0?d:0;var m=e.left-l.left;if(this.parent.enableRtl){var y=T(this.startAFCell,Gr)||T(this.startAFCell,Ds)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=g<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px";var R=l.right-e.right-n+y-1;R>0?this.bdrAFRight.style.right=R+"px":this.bdrAFRight.style.right="0px",this.bdrAFTop.style.left=t.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.parent.height!=="auto"&&Tt()?(this.bdrAFTop.style.left=Tt()+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-Tt()+"px"):this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=m-n+d-1+"px",this.bdrAFRight.style.left=t.left-l.left-2+t.width+"px",this.bdrAFRight.style.width=g<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=m+d-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",g<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var v=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-g;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-v+"px"}if(this.bdrAFLeft.style.top=e.top-l.top-r+c+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-a.top+t.height+1-(e.top-a.top)+r-s-c+"px":t.height+r-s-c+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=f<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,f<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var b=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-f;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-b+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},o.prototype.createAFBorders=function(){if(!this.bdrAFLeft){var e=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft"});e.style.width="2px",this.bdrAFLeft=this.parent.element.appendChild(e);var t=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright"});t.style.width="2px",this.bdrAFRight=this.parent.element.appendChild(t);var i=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom"});i.style.height="2px",this.bdrAFBottom=this.parent.element.appendChild(i);var r=pe("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop"});r.style.height="2px",this.bdrAFTop=this.parent.element.appendChild(r)}},o.prototype.destroyAutoFillElements=function(){this.bdrAFLeft&&(this.bdrAFLeft.remove(),this.bdrAFRight.remove(),this.bdrAFBottom.remove(),this.bdrAFTop.remove(),this.bdrAFLeft=this.bdrAFRight=this.bdrAFBottom=this.bdrAFTop=null),this.autofill&&(this.autofill.remove(),this.autofill=null)},o.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},o.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},o.prototype.updateValue=function(e,t,i){var r=this.createBeforeAutoFill(e,t,i);if(!r.cancel){var n=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&(n.type==="number"?this.parent.editModule.updateCell(e,n.field,parseFloat(r.value)):this.parent.editModule.updateCell(e,n.field,r.value))}},o.prototype.createBeforeAutoFill=function(e,t,i){var r=this.parent.getColumnByIndex(t),n={column:r,value:i.innerText};return this.parent.trigger(ju,n),n},o.prototype.getAutoFillCells=function(e,t){var i=".e-cellselectionbackground",r=[].slice.call(this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll(i));return r},o.prototype.selectLikeAutoFill=function(e,t){var i=parseInt(T(this.startAFCell,ut).getAttribute(He),10)-1,r=parseInt(this.startAFCell.getAttribute(je),10)-1,n=parseInt(T(this.endAFCell,ut).getAttribute(He),10)-1,s=parseInt(this.endAFCell.getAttribute(je),10)-1,a=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case(!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!T(e.target,Le)):this.startAFCell=this.parent.getCellFromIndex(i,r),this.endAFCell=this.parent.getCellFromIndex(i+a,r+l),this.drawAFBorders();break;case(this.autoFillRLselection&&r+l<s&&s-r-l+1>n-i-a&&s-r-l+1>i-n):if(this.endAFCell=this.parent.getCellFromIndex(i+a,s),n=parseInt(T(this.endAFCell,ut).getAttribute(He),10)-1,s=parseInt(this.endAFCell.getAttribute(je),10)-1,!t)this.drawAFBorders();else{for(var h=parseInt(this.endCell.getAttribute(je),10)-1,p=i;p<=n;p++)for(var c=this.getAutoFillCells(p,r),d=0,f=h+1;f<=s;f++)d>l&&(d=0),this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:s})}break;case(this.autoFillRLselection&&r>s&&r-s+1>n-i-a&&r-s+1>i-n):if(this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.endCell,!t)this.drawAFBorders();else{for(var p=i;p<=i+a;p++){var c=this.getAutoFillCells(p,r);c.reverse();for(var d=0,f=this.startCellIndex-1;f>=s;f--)d>l&&(d=0),this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:i,cellIndex:s},{rowIndex:i+a,cellIndex:this.startCellIndex+l})}break;case i>n:if(this.startAFCell=this.parent.getCellFromIndex(n,r),this.endAFCell=this.endCell,!t)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(He),10)-1,m=g,p=i-1;p>=n;p--){m===this.startIndex-1&&(m=g);var c=this.getAutoFillCells(m,r),d=0;m--;for(var f=this.startCellIndex;f<=this.startCellIndex+l;f++)this.updateValue(p,f,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:n,cellIndex:r+l},{rowIndex:i+a,cellIndex:r})}break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,r+l),!t)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(He),10)-1,m=this.startIndex,p=g+1;p<=n;p++){m===g+1&&(m=this.startIndex);var c=this.getAutoFillCells(m,r);m++;for(var d=0,v=this.startCellIndex;v<=this.startCellIndex+l;v++)this.updateValue(p,v,c[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:g-a,cellIndex:r},{rowIndex:n,cellIndex:r+l})}break}},o.prototype.mouseUpHandler=function(e){this.stopTimer(),document.body.classList.remove("e-disableuserselect"),this.element&&!u(this.element.parentElement)&&fe(this.element),this.isDragged&&this.selectedRowCellIndexes.length===1&&this.selectedRowCellIndexes[0].cellIndexes.length===1?this.mUPTarget=T(e.target,Le):this.mUPTarget=null;var t=Y(e.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&this.selectionSettings.mode==="Cell"&&t&&t.classList.contains(Le)){var i=parseInt(t.parentElement.getAttribute(He),10)-1,r=parseInt(t.getAttribute(je),10)-1;this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:r})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){this.preventFocus=!0;var n=T(e.target,Le);this.endAFCell=n||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,!u(this.endAFCell)&&!u(this.startAFCell)&&(this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.parent.aggregates.length>0&&this.parent.notify(ms,{})),this.isAutoFillSel=!1,this.preventFocus=!1}x.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&x.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),x.remove(document,"mouseup",this.mouseUpHandler)},o.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},o.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute(je),10)-1,t=parseInt(this.target.getAttribute("index"),10),i=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,r=this.getAutoFillCells(i,e).filter(function(g){return g.style.display===""}),n=this.parent.getColumnByIndex(e),s=n.getFreezeTableName()==="movable",a=t<this.parent.frozenRows,l=this.parent.getFrozenMode()===qt&&n.getFreezeTableName()===uc;Ye("#"+this.parent.element.id+"_autofill",T(this.target,di))||(Ye("#"+this.parent.element.id+"_autofill",this.parent.element)&&Ye("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=pe("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),a?s?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):s?this.parent.getContentTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(a?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill)));var h=r[r.length-1];if(h&&h.offsetParent){var p=h.getBoundingClientRect(),c=h.offsetParent.getBoundingClientRect();(h.offsetParent.classList.contains("e-content")||h.offsetParent.classList.contains("e-headercontent"))&&(c=h.offsetParent.querySelector("table").getBoundingClientRect());var d=this.isLastCell(h)?4:0,f=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=c.right-p.right+p.width-4-d+"px":this.autofill.style.left=p.left-c.left+p.width-4-d+"px",this.autofill.style.top=p.top-c.top+p.height-5-f+"px"}this.autofill.style.display=""}else this.hideAutoFill()},o.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var t=e.target,i=this.parent,r,n=T(t,"e-grid");if(!(n&&n.id!==i.element.id||T(t,st)&&!this.parent.frozenRows||T(t,"e-editedbatchcell")||T(t,dr))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),T(t,Le)&&!e.shiftKey&&!e.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,r=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||Y(t,"td").classList.contains("e-selectionbackground")){this.isDragged=!1;return}r=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}r&&this.enableDrag(e,!0)}this.updateStartEndCells(),(t.classList.contains("e-autofill")||t.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},o.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(He),10)-1,this.startCellIndex=parseInt(T(this.startCell,Le).getAttribute(je),10)-1)},o.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(He),10)-1,this.startCellIndex=parseInt(T(this.startCell,Le).getAttribute(je),10)-1)},o.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var r=Y(e.target,"tr");this.startDIndex=parseInt(r.getAttribute(He),10)-1,this.startDCellIndex=parseInt(T(e.target,Le).getAttribute(je),10)-1}document.body.classList.add("e-disableuserselect");var n=i.element.getBoundingClientRect(),s=Ps(e);this.x=s.x-n.left,this.y=s.y-n.top,x.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&x.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),x.add(document,"mouseup",this.mouseUpHandler,this)},o.prototype.clearSelAfterRefresh=function(e){var t=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";if(e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!t&&this.clearSelection(),(e.requestType==="virtualscroll"||t)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),r=[];this.selectedRowState={},this.persistSelectedData=[];for(var n=0;n<i.length;n++){r.push(i[parseInt(n.toString(),10)].index);var s=this.getPkValue(this.primaryKey,i[parseInt(n.toString(),10)].data);this.selectedRowState[""+s]=!0,this.persistSelectedData.push(i[parseInt(n.toString(),10)].data)}this.selectedRowIndexes=r}},o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:et,handler:this.enableAfterRender},{event:xn,handler:this.initializeSelection},{event:Zu,handler:this.onActionComplete},{event:ep,handler:this.onActionComplete},{event:At,handler:this.onPropertyChanged},{event:Ss,handler:this.onCellFocused},{event:wl,handler:this.clearSelAfterRefresh},{event:Sl,handler:this.columnPositionChanged},{event:Xe,handler:this.initialEnd},{event:Cs,handler:this.rowsRemoved},{event:vi,handler:this.refreshHeader},{event:vs,handler:this.destroyAutoFillElements},{event:ti,handler:this.destroy}],ii(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(_t,this.actionBeginFunction),this.parent.addEventListener(dt,this.actionCompleteFunction),this.addEventListener_checkbox())},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(x.remove(document,"mouseup",this.mouseUpHandler),x.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),x.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),ii(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(_t,this.actionBeginFunction),this.parent.removeEventListener(dt,this.actionCompleteFunction),this.removeEventListener_checkbox(),this.parent.off(vs,this.destroyAutoFillElements))},o.prototype.wireEvents=function(){this.isMacOS=navigator.userAgent.indexOf("Mac OS")!==-1,this.isMacOS?(x.add(this.parent.element,"keydown",this.keyDownHandler,this),x.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||x.add(this.parent.element,"keydown",this.keyDownHandler,this)},o.prototype.unWireEvents=function(){this.isMacOS?(x.remove(this.parent.element,"keydown",this.keyDownHandler),x.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||x.remove(this.parent.element,"keydown",this.keyDownHandler)},o.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},o.prototype.refreshHeader=function(){var e=this.parent.getColumns().filter(function(t){return t.type==="checkbox"});e.length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData()),this.setCheckAllState()},o.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++){var i=this.getPkValue(this.primaryKey,e.records[parseInt(t.toString(),10)]);delete this.selectedRowState[""+i],--this.totalRecordsCount}this.setCheckAllState()},o.prototype.beforeFragAppend=function(e){e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&this.clearSelection()},o.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},o.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},o.prototype.render=function(e){x.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),x.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},o.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var t=this.parent;u(e.properties.type)||(this.selectionSettings.type==="Single"?(t.element.removeAttribute("aria-multiselectable"),this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):this.selectionSettings.type==="Multiple"&&t.element.setAttribute("aria-multiselectable","true")),(!u(e.properties.mode)||!u(e.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection();var i=this.parent.getColumns().filter(function(r){return r.type==="checkbox"});i.length&&(t.isCheckBoxSelection=this.selectionSettings.checkboxMode!=="ResetOnRowClick"),this.drawBorders()}},o.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},o.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(Xe,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},o.prototype.checkBoxSelectionChanged=function(){var e=this.parent;e.off(Xe,this.checkBoxSelectionChanged);var t=e.getColumns().filter(function(i){return i.type==="checkbox"});t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,u(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),!e.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},o.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},o.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&Object.keys(this.selectedRowState).length===0||!e.isPersistSelection)&&this.dataSuccess(!u(this.parent.dataSource)&&this.parent.dataSource.result||this.parent.getDataModule().isRemote()?this.parent.getCurrentViewRecords():this.parent.renderModule.data.dataManager.dataSource.json)},o.prototype.dataSuccess=function(e){for(var t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[parseInt(t.toString(),10)]),r=e[parseInt(t.toString(),10)][this.chkField];u(this.selectedRowState[""+i])&&r&&typeof r=="boolean"&&(this.selectedRowState[""+i]=r,this.parent.isPersistSelection&&this.persistSelectedData.push(e[parseInt(t.toString(),10)]))}},o.prototype.setRowSelection=function(e){if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)if(e){var d=Object.keys(this.selectedRowState),f=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var g=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData,m=0,v=g;m<v.length;m++){var h=v[m];if(!u(h[this.primaryKey])){var y=h[this.primaryKey].toString();d.indexOf(y)===-1&&f.indexOf(y)===-1&&(this.selectedRowState[h[this.primaryKey]]=!0)}}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(e)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var t=this.parent.getRowsObject().filter(function(R){return R.isSelectable}),i=0,r=t;i<r.length;i++){var n=r[i];this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=!0}else{var s=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var a=0,l=this.isPartialSelection?s:s.records;a<l.length;a++){var h=l[a];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}else for(var p=0,c=s;p<c.length;p++){var h=c[p];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}}else this.selectedRowState={}},o.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},o.prototype.getAvailableSelectedData=function(e){var t=new _(e).executeLocal(this.parent.getDataModule().generateQuery(!0));return this.parent.groupSettings.columns.length&&t&&t.records&&(t=t.records.slice()),t},o.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!u(e)&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var t=[],i=0;i<e.length;i++){var r=this.getRowObj(e[parseInt(i.toString(),10)]),n=r&&r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;if(!(this.isPartialSelection&&!r.isSelectable)){var s=void 0,a=e[parseInt(i.toString(),10)].querySelector(".e-checkselect");this.selectedRowState[""+n]||this.parent.checkAllRows==="Check"&&this.selectedRowState[""+n]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||this.parent.checkAllRows==="Uncheck"&&this.chkAllCollec.indexOf(n)>0&&!this.parent.selectedRowIndex||this.parent.checkAllRows==="Intermediate"&&!u(this.chkField)&&r.data[this.chkField]?(t.push(parseInt(e[parseInt(i.toString(),10)].getAttribute(He),10)-1),s=!0):(s=!1,this.checkedTarget!==a&&this.parent.isCheckBoxSelection&&a&&nn(a.nextElementSibling,s)),this.updatePersistCollection(e[parseInt(i.toString(),10)],s)}}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick")&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},o.prototype.actionBegin=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!u(t)){var i=Y(t,"."+dr);if(i){this.parent.editSettings.mode==="Dialog"&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var r=this.getRowObj(i);if(!r)return;this.selectedRowState[this.getPkValue(this.primaryKey,r.data)]=r.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&e.requestType==="paging"&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[])},o.prototype.actionComplete=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){if(e.action==="add"){if(this.isCheckedOnAdd){var t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,t.data)]=t.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if(e.requestType==="delete"&&this.parent.isPersistSelection){for(var i=e.data,r=i.slice(),n=0;n<r.length;n++){var s=this.getPkValue(this.primaryKey,r[parseInt(n.toString(),10)]);u(s)||this.updatePersistDelete(s,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if(e.requestType==="paging"){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var a=this.parent.getRowsObject(),l=[],n=0;n<a.length;n++)a[parseInt(n.toString(),10)].isSelectable&&l.push(a[parseInt(n.toString(),10)].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},o.prototype.onDataBound=function(){var e=this.parent.getColumns().filter(function(n){return n.type==="checkbox"});if(e.length&&!this.parent.getDataModule().isRemote()&&(this.gridCurrentRecord=this.getData()),!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked||this.isPartialSelection&&this.parent.isPersistSelection&&this.isHdrSelectAllClicked)&&(this.parent.checkAllRows==="Intermediate"?this.setRowSelection(!0):this.parent.checkAllRows==="Uncheck"&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var t=this.parent.getRowsObject(),i=[],r=0;r<t.length;r++)t[parseInt(r.toString(),10)].isSelected&&i.push(r);i.length&&this.selectRows(i),this.initialRowSelection=!0}},o.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),i=0;i<t.length;i++)this.updatePersistCollection(t[parseInt(i.toString(),10)],e);this.parent.checkAllRows==="Uncheck"?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[]):this.parent.checkAllRows==="Check"&&(this.setRowSelection(!0),this.persistSelectedData=!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection?this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice():this.persistSelectedData)}},o.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1)),this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(this.virtualSelectedData=this.virtualCheckBoxData().slice(),this.selectedRowIndexes=Object.keys(this.virtualSelectedData).map(function(n){return parseInt(n,10)}))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!u(i)){var r=i.querySelector(".e-edit-checkselect");u(r)||nn(r.nextElementSibling,e)}},o.prototype.checkSelectAll=function(e){var t=this,i=this.getCheckAllStatus(e),r=i==="Check";if(this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(i==="Uncheck"||this.isCheckboxReset||i==="Intermediate"&&this.parent.isPersistSelection)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,i==="Intermediate"&&(!this.chkField&&!this.parent.isPersistSelection&&(r=this.getCurrentBatchRecordChanges().some(function(a){return t.getPkValue(t.primaryKey,a)in t.selectedRowState})),this.parent.isPersistSelection)){if(this.parent.allowPaging&&this.isPartialSelection)for(var n=this.parent.getRowsObject(),s=0;s<n.length;s++)if(n[s].isDataRow&&n[s].isSelectable&&!n[s].isSelected){r=!1;break}else r=!0;else if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result){for(var s=0;s<this.getCurrentBatchRecordChanges().length;s++)if(!u(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+s])))if(Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+s]).toString()))r=!0;else{r=!1;break}}}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!r),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(e,!r)},o.prototype.getCheckAllStatus=function(e){var t;u(e)?u(this.getCheckAllBox())||(t=this.getCheckAllBox().nextElementSibling.classList):t=e.nextElementSibling.classList;var i="None";return t instanceof DOMTokenList&&(t.contains("e-check")?i="Check":t.contains("e-uncheck")?i="Uncheck":t.contains("e-stop")&&(i="Intermediate")),i},o.prototype.checkSelect=function(e){var t=Y(this.checkedTarget,"."+Le),i=this.parent;this.isMultiCtrlRequest=!0;var r=0;if(this.isHeaderCheckboxClicked=!1,$t(i)){var n=t.parentElement.getAttribute("data-uid");this.parent.enableVirtualization&&this.parent.groupSettings.columns.length?r=parseInt(t.parentElement.getAttribute(He),10)-1:r=i.getRows().map(function(s){return s.getAttribute("data-uid")}).indexOf(n)}else r=parseInt(t.parentElement.getAttribute(He),10)-1;this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Ji).length>0&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.editSettings.showAddNewRow&&++r,this.rowCellSelectionHandler(r,parseInt(t.getAttribute(je),10)-1),this.moveIntoUncheckCollection(Y(t,"."+ut)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},o.prototype.moveIntoUncheckCollection=function(e){if(this.parent.checkAllRows==="Check"||this.parent.checkAllRows==="Uncheck"){var t=this.getRowObj(e),i=t&&t.data?this.getPkValue(this.primaryKey,t.data):null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},o.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger(Wu,{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},o.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&this.parent.checkAllRows!=="Uncheck")for(var e=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),t=0,i=e;t<i.length;t++){var r=i[t];this.selectedRowIndexes.push(r.index)}if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&this.parent.checkAllRows==="Check"){var e=this.parent.getRowsObject().filter(function(l){return l.isSelectable});if(e.length!==this.selectedRowIndexes.length)for(var n=0,s=e;n<s.length;n++){var r=s[n];this.selectedRowIndexes.indexOf(r.index)<=-1&&this.selectedRowIndexes.push(r.index)}}},o.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if(this.parent.checkAllRows==="Check"){this.selectedRowIndexes=[];for(var t=this.parent.groupSettings.columns.length?this.getData().records.length:this.getData().length,i=0;i<t;i++)this.selectedRowIndexes.push(i)}else if(this.parent.checkAllRows==="Uncheck")this.selectedRowIndexes=[];else{var r=this.parent.getRowByIndex(e);if(e&&r&&r.getAttribute("aria-selected")==="false"){var n=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(n,1)}}},o.prototype.isAllSelected=function(e){if(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData(this.persistSelectedData).length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection)if(this.parent.allowPaging&&!this.selectionSettings.persistSelection&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var t=this.parent.partialSelectedRecords,i=0;i<t.length;i++){var r=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}else return this.isSelectAllRowCount(e);else{var t=this.getData();this.parent.groupSettings.columns.length&&t.records&&(t=t.records);for(var i=0;i<t.length;i++){var r=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}},o.prototype.someDataSelected=function(){if((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(var e=this.getAvailableSelectedData(this.persistSelectedData),t=0;t<e.length;t++){var i=this.getPkValue(this.primaryKey,e[parseInt(t.toString(),10)]);if(this.selectedRowState[""+i])return!1}for(var r=this.isPartialSelection?this.getAvailableSelectedData(this.parent.partialSelectedRecords):this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),t=0;t<r.length;t++){var i=this.getPkValue(this.primaryKey,r[parseInt(t.toString(),10)]);if(this.selectedRowState[""+i])return!1}return!0},o.prototype.setCheckAllState=function(e,t){if(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick"){var i=!1,r=!1,n=Object.keys(this.selectedRowState).length;this.parent.element.classList.contains("e-treelistgrid")&&this.parent.isPersistSelection&&!this.parent.enableVirtualization&&!this.parent.getDataModule().isRemote()&&Array.isArray(this.parent.dataSource)&&n===this.parent.dataSource.length&&n>this.totalRecordsCount&&(n=this.totalRecordsCount),this.parent.isPersistSelection||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!((this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(r=!0,i=this.isAllSelected(n));var s=this.getCheckAllBox();if(s){var a=s.nextElementSibling;G([a],["e-check","e-stop","e-uncheck"]),Vi(s,!1),s.indeterminate=!1;var l=this.parent.getDataModule().isRemote()?[]:this.gridCurrentRecord;if(this.parent.groupSettings.columns.length&&l.records&&(l=l.records),this.totalRecordsCount=this.checkVirtualCheckBox()?l.length:this.totalRecordsCount,i&&r&&(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result||l.length)||!r&&(n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(n)||this.isHdrSelectAllClicked&&!this.parent.isPersistSelection)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&l.length&&n===l.length||(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(n===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(n)||n===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(n)))||n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(B([a],["e-check"]),Vi(s,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!r||r&&this.someDataSelected())||n===0&&this.getCurrentBatchRecordChanges().length===0)&&!this.parent.allowPaging||this.parent.allowPaging&&(n===0||n&&r&&this.someDataSelected())?(B([a],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(B([a],["e-stop"]),this.parent.checkAllRows="Intermediate",s.indeterminate=!0),n===0&&this.getCurrentBatchRecordChanges().length===0?B([a.parentElement],["e-checkbox-disabled"]):G([a.parentElement],["e-checkbox-disabled"]),this.isPartialSelection){var h=this.parent.getRowsObject().filter(function(p){return p.isSelectable}).length;h===0&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?B([a.parentElement],["e-checkbox-disabled"]):G([a.parentElement],["e-checkbox-disabled"])}(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.updateSelectedRowIndex(e)}}},o.prototype.checkVirtualCheckBox=function(){return this.parent.enableVirtualization&&!(this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isCheckBoxSelection&&!this.isPartialSelection},o.prototype.virtualCheckBoxData=function(){var e=this.getData();return this.parent.groupSettings.columns.length&&e.records&&(e=e.records),e},o.prototype.isSelectAllRowCount=function(e){var t=0,i=this.parent.getRowsObject();if(this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var r=this.parent.getDataModule().isRemote()||!u(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length;return r===i.length?(t=i.filter(function(l){return l.isSelectable}).length,t&&e===t):!1}else if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var n=this.getAvailableSelectedData(this.parent.disableSelectedRecords).length,s=this.getAvailableSelectedData(this.parent.partialSelectedRecords).length,a=this.getAvailableSelectedData(this.persistSelectedData).length;return t=n+s,t===this.totalRecordsCount&&a!==0&&a===s}else return t=i.filter(function(l){return l.isSelectable}).length,t&&e===t},o.prototype.keyDownHandler=function(e){(K.info.name==="opera"&&e.keyCode===17||K.info.name==="mozilla"&&e.keyCode===224||(K.info.name==="safari"||K.info.name==="chrome")&&(e.keyCode===91||e.keyCode===93))&&(this.cmdKeyPressed=!0);var t=T(e.target,"e-headercell"),i=T(e.target,Le),r=t?t.children[0].classList.contains("e-headerchkcelldiv"):i?i.classList.contains("e-gridchkbox"):!1;r&&!this.parent.allowKeyboard&&e.keyCode===32&&e.preventDefault()},o.prototype.keyUpHandler=function(e){(K.info.name==="opera"&&e.keyCode===17||K.info.name==="mozilla"&&e.keyCode===224||(K.info.name==="safari"||K.info.name==="chrome")&&(e.keyCode===91||e.keyCode===93))&&(this.cmdKeyPressed=!1)},o.prototype.clickHandler=function(e){var t=e.target;this.actualTarget=t,!this.isAutoFillSel&&!e.ctrlKey&&!e.shiftKey&&(this.startAFCell=this.endAFCell=null),this.selectionSettings.persistSelection&&(this.deSelectedData=ss(this.persistSelectedData)),(T(t,ut)||T(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.cmdKeyPressed=e.metaKey,this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.popUpClickHandler(e);var i=!1;this.preventFocus=!0;var r,n=T(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&T(t,ut)),this.selectionSettings.persistSelection&&this.isPartialSelection&&T(t,"e-headerchkcelldiv")&&!t.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(r=n.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),t=T(t,Le),this.parent.isReact&&t&&!t.parentElement&&t.classList.contains("e-rowcell")&&(t=this.parent.getCellFromIndex(parseInt(t.getAttribute("index"),10),parseInt(t.getAttribute("aria-colindex"),10)-1)),this.isRowDragSelected&&u(t)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(t&&t.parentElement.classList.contains(ut)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,!u(r))this.checkedTarget=r,r.classList.contains("e-checkselectall")?this.checkSelectAll(r):this.checkSelect(r);else{var s=0;s=parseInt(t.parentElement.getAttribute(He),10)-1,this.parent.isPersistSelection&&!this.parent.editSettings.showAddNewRow&&this.parent.element.getElementsByClassName(Ji).length>0&&++s,(!this.mUPTarget||!this.mUPTarget.isEqualNode(t))&&this.rowCellSelectionHandler(s,parseInt(t.getAttribute(je),10)-1),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(Y(t,"."+ut)),this.setCheckAllState())}!this.parent.isCheckBoxSelection&&K.isDevice&&!this.isSingleSel()&&this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){var a=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(a))}this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.isMultiShiftRequest=!1,u(Y(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},o.prototype.popUpClickHandler=function(e){var t=e.target;Y(t,".e-headercell")||e.target.classList.contains(Le)||Y(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},o.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||Cd(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},o.prototype.rowCellSelectionHandler=function(e,t){if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest)this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!Y(this.target,"."+Le).classList.contains(Xi)?this.selectRowsByRange(gt(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(gt(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders();else{if(this.addRowsToSelection([e]),this.selectionSettings.mode==="Both"){var i=this.parent.getColumns().find(function(n){return n.type==="checkbox"}),r=i&&i.index!==t;r&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle):(!i||r)&&this.addCellsToSelection([{rowIndex:e,cellIndex:t}])}else this.addCellsToSelection([{rowIndex:e,cellIndex:t}]);this.showHideBorders("none")}this.isDragged=!1},o.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if(e.keyArgs.action==="upArrow")this.parent.allowFiltering?e.isJump=e.element.tagName==="INPUT":e.isJump=e.element.tagName==="TH";else if(e.keyArgs.action==="downArrow"){var t=Number(e.element.parentElement.getAttribute(He))-1;e.isJump=t===0}else e.keyArgs.action==="ctrlHome"&&(e.isJump=!0);var i=(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&e.keyArgs.action==="space")&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),r=e.container.isHeader&&e.element.tagName!=="TD"&&!Y(e.element,"."+Le)&&!(e.byKey&&e.keyArgs.action==="space");if(!e.byKey||i){i&&!(this.parent.isCheckBoxSelection||this.selectionSettings.persistSelection&&(e.parent.classList.contains("e-recordplusexpand")||e.parent.classList.contains("e-recordpluscollapse")||e.parent.classList.contains("e-groupcaption")))&&this.clearSelection();return}var n=e.container.isContent?e.container.indexes:e.indexes,s=n[0],a=n[1],l=this.focus.getPrevIndexes();if((e.element.parentElement.querySelector(".e-rowcelldrag")||e.element.parentElement.querySelector(".e-dtdiagonalright")||e.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(l.cellIndex=l.cellIndex-1),this.parent.frozenRows)if(e.container.isHeader&&(e.element.tagName==="TD"||Y(e.element,"."+Le))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&e.keyArgs.action==="upArrow"&&h++,s-=h,l.rowIndex=u(l.rowIndex)?null:l.rowIndex-h}else s+=this.parent.frozenRows,l.rowIndex=l.rowIndex===0||!u(l.rowIndex)?l.rowIndex+this.parent.frozenRows:null;if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(s=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)-1),!((r||["ctrlPlusA","escape"].indexOf(e.keyArgs.action)===-1&&e.keyArgs.action!=="space"&&s===l.rowIndex&&a===l.cellIndex)&&!this.selectionSettings.allowColumnSelection)){this.parent.enableVirtualization&&(s=parseInt(e.element.parentElement.getAttribute("aria-rowindex"),10)-1,!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.parent.totalDataRecordsCount>=1&&(e.keyArgs.action==="ctrlHome"?(s=0,this.parent.isFocusFirstCell=!0):e.keyArgs.action==="ctrlEnd"&&(s=this.parent.totalDataRecordsCount-1,this.isFocusLastCell=!0))),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e.keyArgs.action==="downArrow"&&s--,this.preventFocus=!0;var p=this.getKeyColIndex(e);if(this.needColumnSelection&&(a=p),this.parent.element.classList.contains("e-gridcell-read")&&(e.keyArgs.action==="tab"||e.keyArgs.action==="shiftTab"||e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")){var c=this.target.getAttribute("aria-label");c=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(a).field,this.target.setAttribute("aria-label",c)}switch(e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(s,a);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,a);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,a);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,a);break;case"home":case"end":a=e.keyArgs.action==="end"?this.getLastColIndex(s):0,this.applyHomeEndKey(s,a);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,a);break;case"escape":this.clearSelection(),this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s);break}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.updateAutoFillPosition()}},o.prototype.getKeyColIndex=function(e){var t,i=null,r=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&T(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,r){if(e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")return i;t=r.getAttribute("e-mappinguid");var n=this.getstackedColumns(this.parent.getColumnByUid(t).columns),s=this.parent.getColumnIndexByUid(n[n.length-1].uid),a=this.parent.getColumnIndexByUid(n[0].uid);i=this.prevColIndex>=s?a:s}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i},o.prototype.ctrlPlusA=function(){if(this.isRowType()&&!this.isSingleSel()){var e=this.parent.getRowsObject();this.selectRowsByRange(e[0].index,e[e.length-1].index)}this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},o.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},o.prototype.applyDownUpKey=function(e,t){var i=this.parent;this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows?(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)):(this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)},o.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute(je),10)-1,i=this.contentRenderer.getRowByIndex(e);if(i&&(this.target=i.getElementsByClassName(Le)[parseInt(t.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")){var r=this.target.getAttribute("aria-label");r=this.target.innerHTML,this.target.setAttribute("aria-label",r)}}},o.prototype.applyRightLeftKey=function(e,t){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},o.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},o.prototype.shiftDownKey=function(e,t){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(gt(this.prevRowIndex)?this.isPartialSelection?this.selectRow(e,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},o.prototype.applyShiftLeftRightKey=function(e,t){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},o.prototype.getstackedColumns=function(e){for(var t=[],i=0,r=e.length;i<r;i++)e[parseInt(i.toString(),10)].columns?this.getstackedColumns(e[parseInt(i.toString(),10)].columns):t.push(e[parseInt(i.toString(),10)]);return t},o.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.parent.enableVirtualization||this.parent.enableColumnVirtualization||this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},o.prototype.addRemoveClassesForRow=function(e,t,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(e){var s=[].slice.call(e.getElementsByClassName(Le)),a=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),l=e.querySelector(".e-rowdragdrop");a&&s.push(a),l&&s.push(l),zi.apply(void 0,[s,t].concat(r))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)},o.prototype.isRowType=function(){return this.selectionSettings.mode==="Row"||this.selectionSettings.mode==="Both"},o.prototype.isCellType=function(){return this.selectionSettings.mode==="Cell"||this.selectionSettings.mode==="Both"},o.prototype.isSingleSel=function(){return this.selectionSettings.type==="Single"},o.prototype.getRenderer=function(){return u(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(Ft.Content)),this.contentRenderer},o.prototype.getSelectedRecords=function(){var e=[];return!this.selectionSettings.persistSelection&&this.selectedRecords.length?e=this.parent.getRowsObject().filter(function(t){return t.isSelected}).map(function(t){return t.data}):e=this.persistSelectedData,this.checkVirtualCheckBox()&&!this.parent.isPersistSelection&&(e=this.virtualSelectedData),e},o.prototype.selectColumn=function(e){var t=this.parent;if(!u(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnByIndex(e),r=t.getColumnHeaderByUid(i.uid),n=r.classList.contains("e-columnselection");if(t.selectionSettings.allowColumnSelection){var s=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!this.selectionSettings.enableToggle||s||!n){var a={columnIndex:e,headerCell:r,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,es),a.cancel){this.disableInteracted();return}(s||!(n&&t.selectionSettings.enableToggle&&e===this.prevColIndex))&&this.updateColSelection(r,e);var l={columnIndex:e,headerCell:r,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(l,ts)}this.updateColProps(e)}}},o.prototype.selectColumnsByRange=function(e,t){var i=this.parent;if(!u(i.getColumns()[parseInt(e.toString(),10)])){var r=[];if(i.selectionSettings.type==="Single"||u(t))r[0]=e;else for(var n=e<t,s=e;n?s<=t:s>=t;n?s++:s--)r.push(s);this.selectColumns(r)}},o.prototype.selectColumns=function(e){var t=this.parent,i=this.getselectedCols();if(t.selectionSettings.type==="Single"&&(e=[e[0]]),!!t.selectionSettings.allowColumnSelection){this.clearColDependency();var r={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,es),r.cancel){this.disableInteracted();return}for(var n=0,s=e.length;n<s;n++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[parseInt(n.toString(),10)]).uid),e[parseInt(n.toString(),10)]);i=this.getselectedCols();var a={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,ts),this.updateColProps(e[0])}},o.prototype.selectColumnWithExisting=function(e){var t=this.parent;if(!u(t.getColumns()[parseInt(e.toString(),10)])){var i=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid),r=this.getselectedCols();if(t.selectionSettings.type==="Single"&&this.clearColDependency(),!!t.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{var n={columnIndex:e,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,es),n.cancel){this.disableInteracted();return}this.updateColSelection(i,e),r=this.getselectedCols();var s={columnIndex:e,headerCell:r,column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(s,ts)}this.updateColProps(e)}}},o.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var t=this.parent;if(!u(e)&&this.selectedColumnsIndexes.indexOf(e)===-1)return;var i=u(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,r=t.getColumnByIndex(i),n=t.getColumnHeaderByUid(r.uid),s={columnIndex:i,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:r,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted},a=this.columnDeselect(s,Du);if(a){this.disableInteracted();return}for(var l=u(e)?[].slice.call(t.getHeaderContent().getElementsByClassName("e-columnselection")):[n],h=this.getSelectedColumnCells(e),p=0,c=l.length;p<c;p++)zi([l[parseInt(p.toString(),10)]],!1,"e-columnselection");for(var p=0,c=h.length;p<c;p++)zi([h[parseInt(p.toString(),10)]],!1,"e-columnselection");u(e)?(this.columnDeselect(s,Mu),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(d){return d.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[parseInt(e.toString(),10)].isSelected=!1)}},o.prototype.getselectedCols=function(){var e=this.parent,t;if(this.selectedColumnsIndexes.length>1){t=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)t.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[parseInt(i.toString(),10)]).uid))}else t=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return t},o.prototype.getSelectedColumnCells=function(e){for(var t=this.parent,i=!u(this.parent.rowTemplate),r=i?t.getRows():t.getDataRows(),n=[],s=u(e)?".e-columnselection":'[aria-colindex="'+(e+1)+'"]',a=0,l=r.length;a<l;a++)n=n.concat([].slice.call(r[parseInt(a.toString(),10)].querySelectorAll(s)));return n},o.prototype.columnDeselect=function(e,t){return t==="columnDeselected"&&delete e.cancel,this.onActionComplete(e,t),e.cancel},o.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},o.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},o.prototype.updateColSelection=function(e,t){if(!u(this.parent.getColumns()[parseInt(t.toString(),10)])){var i=!u(this.parent.rowTemplate),r=i?this.parent.getRows():this.parent.getDataRows();this.selectedColumnsIndexes.push(t),this.parent.getColumns()[parseInt(t.toString(),10)].isSelected=!0,t=t+this.parent.getIndentCount(),zi([e],!0,"e-columnselection");for(var n=0,s=r.length;n<s;n++)if(r[parseInt(n.toString(),10)].classList.contains(ut))if((r[parseInt(n.toString(),10)].classList.contains(dr)||r[parseInt(n.toString(),10)].classList.contains(Ji))&&this.parent.editSettings.mode==="Normal"&&!u(r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)]))zi([r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection");else if(this.parent.isSpan&&this.parent.isFrozenGrid())for(var a=r[parseInt(n.toString(),10)].querySelectorAll(".e-rowcell"),l=0;l<a.length;l++)a[parseInt(l.toString(),10)].getAttribute("aria-colindex")===e.getAttribute("aria-colindex")&&zi([a[parseInt(l.toString(),10)]],!0,"e-columnselection");else u(r[parseInt(n.toString(),10)].childNodes[parseInt(t.toString(),10)])||zi([r[parseInt(n.toString(),10)].childNodes[parseInt(t.toString(),10)]],!0,"e-columnselection")}},o.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(gt(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},o.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(er,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Ti,this.onDataBoundFunction),this.parent.on(Sa,this.onDataBoundFunction),this.parent.on(Xe,this.checkBoxSelectionChanged,this),this.parent.on(Ts,this.initPerisistSelection,this),this.parent.on(ei,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(dt,this.actionCompleteFunc),this.parent.on(tr,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(ra,this.resizeEndFn)},o.prototype.removeEventListener_checkbox=function(){this.parent.off(er,this.dataReady),this.parent.removeEventListener(Ti,this.onDataBoundFunction),this.parent.removeEventListener(dt,this.actionCompleteFunc),this.parent.off(Sa,this.onDataBoundFunction),this.parent.off(ei,this.setCheckAllForEmptyGrid),this.parent.off(tr,this.clickHandler),this.parent.removeEventListener(ra,this.resizeEndFn),this.parent.off(Ts,this.initPerisistSelection)},o.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;var t=e.nextElementSibling;G([t],["e-check","e-stop","e-uncheck"]),B([t.parentElement],["e-checkbox-disabled"])}},o.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var t=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!t&&(this.disableUI=!this.parent.enableImmutableMode&&!(e.requestType==="save"&&e.action==="add"),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},o.prototype.actionCompleteHandler=function(e){e.requestType==="save"&&this.parent.isPersistSelection&&this.refreshPersistSelection()},o.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,u(this.parent.selectedRowIndex)||this.parent.selectedRowIndex===-1||!this.parent.enablePersistence?this.parent.selectedRowIndex=e:this.parent.selectedRowIndex=-1},o.prototype.disableInteracted=function(){this.isInteracted=!1},o.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},o}(),Qc=function(){function o(e){this.headerFocus=!1,this.parent=e,this.addEventListener()}return o.prototype.hasNonNumericCharacters=function(e){for(var t=!1,i=0,r=e;i<r.length;i++){var n=r[i];if((n<"0"||n>"9")&&n!==".")return!0;if(n==="."){if(t)return!0;t=!0}}return!1},o.prototype.search=function(e){var t=this.parent;if(e=u(e)?"":e,oo(t)){t.notify(xs,{instance:this,handler:this.search,arg1:e});return}if(e!==t.searchSettings.key){if(this.headerFocus=!1,e!==""&&!this.hasNonNumericCharacters(e)){var i=e.split(".");e==="."||e.indexOf(".")===-1||i[0].startsWith("0")&&i[0].length>1?t.searchSettings.key=e.toString():t.searchSettings.key=parseFloat(e).toString()}else t.searchSettings.key=e.toString();t.dataBind()}else this.refreshSearch?t.refresh():this.headerFocus=!1},o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(At,this.onPropertyChanged,this),this.parent.on(na,this.onSearchComplete,this),this.parent.on(ti,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(dt,this.actionCompleteFunc),this.parent.on(Es,this.cancelBeginEvent,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(At,this.onPropertyChanged),this.parent.off(na,this.onSearchComplete),this.parent.off(ti,this.destroy),this.parent.removeEventListener(dt,this.actionCompleteFunc),this.parent.off(Es,this.cancelBeginEvent))},o.prototype.destroy=function(){this.removeEventListener()},o.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(u(e.properties.key)?this.parent.notify(yr,{requestType:"searching",type:_t}):this.parent.notify(yr,{requestType:"searching",type:_t,searchString:this.parent.searchSettings.key}))},o.prototype.onSearchComplete=function(e){this.parent.trigger(dt,Q(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:dt}))},o.prototype.onActionComplete=function(e){this.refreshSearch&&e.requestType==="refresh"&&this.headerFocus&&(this.headerFocus=!1,this.parent.focusModule.focus(),B([this.parent.focusModule.currentInfo.element],["e-focused"])),this.refreshSearch=e.requestType!=="searching"},o.prototype.cancelBeginEvent=function(e){e.requestType==="searching"&&this.parent.setProperties({searchSettings:{key:""}},!0)},o.prototype.getModuleName=function(){return"search"},o}(),Yc=function(){function o(e){this.colName=[],this.isShowHide=!1,this.parent=e,this.addEventListener(),this.widthService=new so(e)}return o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ml,handler:this.batchChanges},{event:nc,handler:this.resetColumnState}],ii(this.parent,this.evtHandlers,!0,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||ii(this.parent,this.evtHandlers,!1)},o.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},o.prototype.show=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify(ws,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!0;this.setVisible(r)},o.prototype.hide=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify(ws,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!1;this.setVisible(r)},o.prototype.getToggleFields=function(e){var t=[];return typeof e=="string"?t=[e]:t=e,t},o.prototype.getColumns=function(e,t){var i=this,r=qi(e,function(n){return qi(i.parent.columnModel,function(s){if(s[""+t]===n)return s})[0]});return r},o.prototype.batchActionPrevent=function(e,t){return t===void 0&&(t=[]),oo(this.parent)?(this.colName=e,this.changedCol=t,this.parent.closeEdit(),!1):!0},o.prototype.resetColumnState=function(){if(this.isShowHide)for(var e=0;e<this.colName.length;e++)this.colName[parseInt(e.toString(),10)].visible=!this.colName[parseInt(e.toString(),10)].visible},o.prototype.setVisible=function(e,t){var i=this;if(t===void 0&&(t=[]),this.isShowHide=!0,!!this.batchActionPrevent(e,t)){t=t.length>0?t:e;var r={requestType:"columnstate",cancel:!1,columns:t},n="cancel";if(this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(_t,r,function(a){var l=i.parent.getColumns();if(e=u(e)?l:e,a[""+n]){i.parent.notify(Pp,{showHideArgs:a}),e.length>0&&(e[0].visible=!0);return}i.parent.notify(Al,r),$t(i.parent)&&i.parent.contentModule.emptyVcRows();var h=i.parent.element.querySelector(".e-addedrow");i.parent.editSettings.showAddNewRow&&h&&(fe(h),(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&(i.parent.isAddNewRow=!0),i.parent.addNewRowFocus=!0,i.parent.isEdit=!1),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization?i.parent.notify(vn,{isModeChg:!0}):i.parent.isFrozenGrid()&&e.length?i.parent.notify(vn,{isModeChg:!0}):i.parent.notify(no,e);var p={requestType:"columnstate",columns:t};i.parent.trigger(dt,p);var c=!i.parent.element.querySelector(".e-addedrow");i.parent.editSettings.showAddNewRow&&c&&(i.parent.isEdit=!1,i.parent.addRecord(),i.parent.enableVirtualization||i.parent.enableInfiniteScrolling||i.parent.notify(Yi,{})),i.parent.columnQueryMode!=="All"&&i.parent.refresh()}),!this.parent.groupSettings.columns.length){if(this.parent.autoFit)this.parent.preventAdjustColumns();else if(this.parent.allowResizing&&this.parent.resizeSettings.mode==="Normal"){var s=this.parent.getHeaderTable().style.width.indexOf("px")===-1;this.widthService.setWidthToTable(s)}}}},o}(),Xc=function(){function o(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new so(e),this.addEventListener()}return o.prototype.getModuleName=function(){return"scroll"},o.prototype.setWidth=function(e){if(this.parent.element.style.width=ke(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element){var t=this.parent.toolbarModule.toolbar.element,i=t.querySelector(".e-toolbar-left"),r=t.querySelector(".e-toolbar-center"),n=t.querySelector(".e-toolbar-right"),s=t.querySelector(".e-toolbar-items"),a=i?i.clientWidth:0,l=r?r.clientWidth:0,h=n?n.clientWidth:0,p=s?s.clientWidth:0,c=t?t.clientWidth:0;(!this.parent.enableAdaptiveUI||a>c||l>c||h>c||p>c)&&this.parent.toolbarModule.toolbar.refreshOverflow()}},o.prototype.setHeight=function(){var e=0,t=this.parent.getContent().querySelector("."+ot),i=this.parent.height;if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&this.parent.height!=="auto"&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-o.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&this.parent.height!=="auto"&&this.parent.height!=="100%"){var r=this.parent.getHeaderContent().querySelector(Fe+":not(.e-masked-tbody)");if(e=r?r.offsetHeight:0,r&&e){var n=r.getElementsByClassName(Ji).length,s=n*this.parent.getRowHeight();e-=s}else!this.parent.isInitialLoad&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight());t.style.height=ke(parseInt(i,10)-e)}else t.style.height=ke(i);this.ensureOverflow(t),this.parent.isFrozenGrid()&&this.refresh()},o.prototype.setPadding=function(){var e=this.parent.getHeaderContent(),t=o.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties();e.querySelector("."+st).style[i.border]=t>0?"1px":"0px",e.style[i.padding]=t>0?t+"px":"0px"},o.prototype.removePadding=function(e){var t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector("."+st);i.style[t.border]="",i.parentElement.style[t.padding]="";var r=this.parent.getFooterContent();r&&r.classList.contains("e-footerpadding")&&r.classList.remove("e-footerpadding")},o.prototype.refresh=function(){if(this.parent.height==="100%"){var e=this.parent.getContent();this.parent.element.style.height="100%";var t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)"}},o.prototype.getThreshold=function(){var e=K.info.name;return e==="mozilla"?.5:1},o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ei,this.wireEvents,this),this.parent.on(Xe,this.wireEvents,this),this.parent.on(et,this.onPropertyChanged,this),this.parent.on(pa,this.wireEvents,this),this.parent.on(vi,this.setScrollLeft,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ei,this.wireEvents),this.parent.off(Xe,this.wireEvents),this.parent.off(et,this.onPropertyChanged),this.parent.off(pa,this.wireEvents),this.parent.off(vi,this.setScrollLeft),this.unwireEvents())},o.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(x.remove(this.header,"touchstart pointerdown",this.setPageXY),x.remove(this.header,"touchmove pointermove",this.onTouchScroll));var e=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(e&&x.remove(e,"scroll",this.onCustomScrollbarScroll),this.content&&(x.remove(this.content,"scroll",this.onCustomScrollbarScroll),x.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(K.userAgent.toLowerCase())&&K.isDevice||x.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header&&(x.remove(this.header,"scroll",this.onCustomScrollbarScroll),x.remove(this.header,"touchstart pointerdown",this.setPageXY),x.remove(this.header,"touchmove pointermove",this.onTouchScroll))),this.content&&x.remove(this.content,"scroll",this.contentScrollHandler),this.header&&x.remove(this.header,"scroll",this.headerScrollHandler),this.contentScrollHandler=null,this.headerScrollHandler=null,this.parent.aggregates.length&&this.parent.getFooterContent()&&x.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},o.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+st).scrollLeft=this.previousValues.left},o.prototype.onContentScroll=function(e){var t=this,i=e,r=i.classList.contains(st);return function(n){if(!(t.content.querySelector(Fe)===null||t.parent.isPreventScrollEvent)){var s=n.target;if(t.parent.frozenRows&&(t.content.scrollTop>0&&t.parent.frozenRows?B([t.parent.element],"e-top-shadow"):G([t.parent.element],"e-top-shadow")),t.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){var a=t.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),l=t.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])'),h=t.parent.enableRtl?Math.abs(s.scrollLeft):s.scrollLeft,p=h<=1;!p&&t.parent.getVisibleFrozenLeftCount()?B([t.parent.element],"e-left-shadow"):G([t.parent.element],"e-left-shadow");var c=t.parent.enableRtl?Math.abs(s.scrollLeft):s.scrollLeft,d=Math.round(c+s.clientWidth)>=s.scrollWidth-1;d&&t.parent.getVisibleFrozenRightCount()?G([t.parent.element],"e-right-shadow"):B([t.parent.element],"e-right-shadow");var f=[].slice.call(t.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));if((f.length===1&&a.length||t.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||l.length)&&s.scrollLeft!==t.previousValues.left){s.scrollLeft=t.previousValues.left;return}if(f.length!==1&&(a.length||l.length)&&s.scrollTop!==t.previousValues.top){s.scrollTop=t.previousValues.top;return}}var g=s.scrollLeft;if(!u(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&(!t.parent.isEdit||t.parent.editSettings.showAddNewRow&&!t.parent.element.querySelector(".e-editedrow"))&&t.parent.notify(Ap,{target:n.target,isLeft:t.previousValues.left!==g}),t.parent.groupSettings.columns.length&&t.parent.groupSettings.enableLazyLoading){var m=t.previousValues.top<t.parent.getContent().firstElementChild.scrollTop;t.parent.notify(Bp,{scrollDown:m})}t.parent.notify(wp,{});var v=s.classList.contains("e-summarycontent");if(t.previousValues.left===g){t.previousValues.top=r?s.scrollTop:t.previousValues.top;return}t.parent.notify(Mp,n),i.scrollLeft=g,v&&(t.header.scrollLeft=g),t.previousValues.left=g,t.parent.notify(oa,{left:g})}}},o.prototype.onCustomScrollbarScroll=function(e,t){var i=this,r=e,n=t;return function(s){if(i.content.querySelector(Fe)!==null){var a=s.target,l=a.scrollLeft;i.previousValues.left!==l&&(r.scrollLeft=l,n.scrollLeft=l,i.previousValues.left=l,i.parent.notify(oa,{left:l}),i.parent.isDestroyed)}}},o.prototype.onTouchScroll=function(e){var t=this,i=e;return function(r){if(r.pointerType!=="mouse"){var n=t.parent.isFrozenGrid(),s=t.getPointXY(r),a=i.scrollLeft+(t.pageXY.x-s.x),l=t.parent.getHeaderContent().querySelector("."+st),h=t.parent.getContent().querySelector("."+ot);if(!(t.previousValues.left===a||a<0||l.scrollWidth-l.clientWidth<a)){if(r.preventDefault(),l.scrollLeft=a,h.scrollLeft=a,n&&t.parent.enableColumnVirtualization){var p=t.parent.getContent().querySelector(".e-movablescrollbar");p.scrollLeft=a}t.pageXY.x=s.x,t.previousValues.left=a}}}},o.prototype.setPageXY=function(){var e=this;return function(t){t.pointerType!=="mouse"&&(e.pageXY=e.getPointXY(t))}},o.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},o.prototype.getScrollbleParent=function(e){if(e===null)return null;var t=u(e.tagName)?e.scrollingElement:e,i=document.defaultView.getComputedStyle(t,null).overflowY;return t.scrollHeight>t.clientHeight&&i!=="hidden"&&i!=="visible"||e.tagName==="HTML"||e.tagName==="BODY"?e:this.getScrollbleParent(e.parentNode)},o.prototype.addStickyListener=function(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e&&this.parentElement?(this.eventElement=this.parentElement.tagName==="HTML"||this.parentElement.tagName==="BODY"?document:this.parentElement,x.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(x.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},o.prototype.resizeFrozenRowBorder=function(){var e;this.parent.element.querySelector(".e-frozenrow-border")?e=this.parent.element.querySelector(".e-frozenrow-border"):(e=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-gridcontent")));var t=this.parent.height!=="auto"?o.getScrollBarWidth():0;e.style.width=this.parent.element.offsetWidth-t-.5+"px"},o.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+ot),this.header=this.parent.getHeaderContent().querySelector("."+st);var i=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&this.header&&this.content&&(x.add(this.header,"touchstart pointerdown",this.setPageXY(),this),x.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),t&&i&&this.parent.enableColumnVirtualization&&(x.add(i,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),x.add(this.content,"scroll",this.onCustomScrollbarScroll(i,this.header),this),x.add(this.header,"scroll",this.onCustomScrollbarScroll(i,this.content),this),x.add(this.header,"touchstart pointerdown",this.setPageXY(),this),x.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),x.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(K.userAgent.toLowerCase())&&K.isDevice||x.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),x.add(this.content,"scroll",this.contentScrollHandler,this),x.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&x.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var r=this.parent.getContentTable(),n,s,a;Hl(function(){n=e.header.scrollLeft,s=r.scrollHeight,a=e.parent.getContent().clientHeight},function(){var l={cancel:!1};e.parent.notify(qp,l),s<a&&e.parent.height!=="auto"&&(e.setLastRowCell(),e.parent.notify(oc,l)),e.parent.frozenRows&&e.resizeFrozenRowBorder(),!e.parent.enableVirtualization&&!e.parent.enableInfiniteScrolling&&(l.cancel||(e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top)),e.parent.enableColumnVirtualization||(e.content.scrollLeft=n,e.parent.isFrozenGrid()&&(e.previousValues.left=n))}),this.parent.isPreventScrollEvent=!1},o.prototype.setLastRowCell=function(){var e=this.parent.getContentTable();G(e.querySelectorAll("td"),"e-lastrowcell"),e.querySelector("tr:nth-last-child(2)")&&this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Bottom"&&B(e.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell"),B(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isSpan&&B(e.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell")},o.prototype.getCssProperties=function(e){var t={},i=u(e)?this.parent.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},o.prototype.ensureOverflow=function(e){e.style.overflowY=this.parent.height==="auto"?"auto":"scroll"},o.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,this.parent.height==="auto"&&this.removePadding(),this.wireEvents(),this.setHeight();var t="width";this.setWidth(!u(e.properties[""+t]))}},o.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var e=this.parent.getContent().getClientRects()[0];if(e){var t=window.devicePixelRatio,i=this.parent.getHeaderContent(),r=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),s=i.offsetHeight+(r?r.offsetHeight:0)+(n?n.offsetHeight:0),a=this.parentElement.getClientRects()[0].top,l=e.top-(a<0?0:a),h=e.left,p=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(t!==1&&(l=Math.ceil(l)),l<s&&e.bottom>0){i.classList.add("e-sticky");var c=0;n&&this.parent.groupSettings.showDropArea&&(this.setSticky(n,c,e.width,h,!0),c+=n.getClientRects()[0].height),r&&(this.setSticky(r,c,e.width,h,!0),c+=r.getClientRects()[0].height),this.setSticky(i,c,e.width,h,!0),u(p)||(p.style.position="fixed",p.style.top=s+"px")}else if(i.classList.contains("e-sticky")){this.setSticky(i,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1);var d=this.parent.element.querySelector(".e-ccdlg");if(d&&d.classList.remove("e-sticky"),!u(p)){p.style.position="absolute";var f=e.top-a;p.style.top=f+"px"}}this.parent.notify(ec,{})}}},o.prototype.setSticky=function(e,t,i,r,n){n?e.classList.add("e-sticky"):e.classList.remove("e-sticky"),e.style.width=i!=null?i+"px":"",e.style.top=t!=null?t+"px":"",e.style.left=r!==null?parseInt(e.style.left,10)!==r?r+"px":e.style.left:""},o.prototype.destroy=function(){var e=this.parent.element;if(!(!e||!e.querySelector("."+Bt)&&!e.querySelector("."+yi))){this.removeEventListener();var t=this.parent.getContent().querySelector("."+ot);x.remove(t,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),G([this.parent.getHeaderContent().querySelector("."+st)],st),G([t],ot),t.style.height="",this.parent.element.style.width=""}},o.getScrollBarWidth=function(){return Tt()},o}(),Ol=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),ui=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Jc=function(o){Ol(e,o);function e(){var t=o!==null&&o.apply(this,arguments)||this;return t.templateFn={},t}return e.prototype.setFormatter=function(t){this.formatFn=t},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setTemplate=function(t){t===void 0&&(t={}),this.footerTemplate!==void 0&&(this.templateFn[Ri(re,re.Summary)]={fn:Be(this.footerTemplate,t),property:"footerTemplate"}),this.groupFooterTemplate!==void 0&&(this.templateFn[Ri(re,re.GroupSummary)]={fn:Be(this.groupFooterTemplate,t),property:"groupFooterTemplate"}),this.groupCaptionTemplate!==void 0&&(this.templateFn[Ri(re,re.CaptionSummary)]={fn:Be(this.groupCaptionTemplate,t),property:"groupCaptionTemplate"})},e.prototype.getTemplate=function(t){return this.templateFn[Ri(re,t)]},e.prototype.setPropertiesSilent=function(t){this.setProperties(t,!0)},ui([C()],e.prototype,"type",void 0),ui([C()],e.prototype,"field",void 0),ui([C()],e.prototype,"columnName",void 0),ui([C()],e.prototype,"format",void 0),ui([C()],e.prototype,"footerTemplate",void 0),ui([C()],e.prototype,"groupFooterTemplate",void 0),ui([C()],e.prototype,"groupCaptionTemplate",void 0),ui([C()],e.prototype,"customAggregate",void 0),e}(_e),$c=function(o){Ol(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return ui([Ir([],Jc)],e.prototype,"columns",void 0),e}(_e),Zc=function(){function o(e,t){this.copyContent="",this.isSelect=!1,this.parent=e,this.serviceLocator=t,this.addEventListener()}return o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Xe,this.initialEnd,this),this.parent.on(Jt,this.keyDownHandler,this),this.parent.on(tr,this.clickHandler,this),this.parent.on(ei,this.initialEnd,this),x.add(this.parent.element,"keydown",this.pasteHandler,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Jt,this.keyDownHandler),this.parent.off(Xe,this.initialEnd),this.parent.off(tr,this.clickHandler),this.parent.off(ei,this.initialEnd),x.remove(this.parent.element,"keydown",this.pasteHandler))},o.prototype.clickHandler=function(e){var t=e.target;t=T(t,"e-rowcell")},o.prototype.pasteHandler=function(e){var t=this,i=this.parent,r=/(Mac)/i.test(navigator.platform),n=this.parent.getSelectedRowCellIndexes();if(!i.isEdit&&e.keyCode===67&&r&&e.metaKey&&this.copy(),n.length&&e.keyCode===86&&(!r&&e.ctrlKey||r&&e.metaKey)&&!i.isEdit){var s=Y(document.activeElement,"."+Le);if(!this.clipBoardTextArea||!s||!i.editSettings.allowEditing||i.editSettings.mode!=="Batch"||i.selectionSettings.mode!=="Cell"||i.selectionSettings.cellSelectionMode==="Flow")return;this.activeElement=document.activeElement;var a=window.scrollX,l=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){t.activeElement.focus(),window.scrollTo(a,l),t.paste(t.clipBoardTextArea.value,n[0].rowIndex,n[0].cellIndexes[0])},r?100:10)}},o.prototype.paste=function(e,t,i){for(var r=this.parent,n=i,s=t,a,l,h,p=e.split(`
`),c,d=0;d<p.length;d++){if(c=p[parseInt(d.toString(),10)].split("	"),n=i,d===p.length-1&&p[parseInt(d.toString(),10)]===""||gt(r.getRowByIndex(s))){n++;break}for(var f=0;f<c.length;f++){if(h=r.getCellFromIndex(s,n),!h){n++;break}if(a=r.getColumnByIndex(n),l=a.getParser()?a.getParser()(c[parseInt(f.toString(),10)]):c[parseInt(f.toString(),10)],a.allowEditing&&!a.isPrimaryKey){var g={column:a,data:l,rowIndex:s};this.parent.trigger(Uu,g),s=g.rowIndex,g.cancel||r.editModule&&(a.type==="number"?this.parent.editModule.updateCell(s,a.field,parseFloat(g.data)):r.editModule.updateCell(s,a.field,g.data))}n++}s++}r.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:s-1,cellIndex:n-1});var m=this.parent.getCellFromIndex(s-1,n-1);m&&ve(m,["e-focus","e-focused"],[]),this.clipBoardTextArea.value=""},o.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(Xe,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.clipBoardTextArea.style.opacity="0",this.parent.element.appendChild(this.clipBoardTextArea)},o.prototype.keyDownHandler=function(e){e.action==="ctrlPlusC"?this.copy():e.action==="ctrlShiftPlusH"&&this.copy(!0)},o.prototype.setCopyData=function(e){if(window.getSelection().toString()===""){this.clipBoardTextArea.value=this.copyContent="";var t=this.parent.getDataRows();if(this.parent.selectionSettings&&this.parent.selectionSettings.allowColumnSelection&&this.parent.selectionModule&&this.parent.selectionModule.selectedColumnsIndexes.length){if(e){for(var i=this.parent.selectionModule.selectedColumnsIndexes,r=[],n=0;n<i.length;n++){var s=i[parseInt(n.toString(),10)],a=this.parent.getColumnHeaderByIndex(s);a&&!a.classList.contains("e-hide")&&r.push(a)}this.getCopyData(r,!1,"	",e),this.copyContent+=`
`}for(var l=0;l<t.length;l++){var h=[];l>0&&(this.copyContent+=`
`),h.push.apply(h,[].slice.call(t[parseInt(l.toString(),10)].querySelectorAll(".e-columnselection:not(.e-hide)"))),this.getCopyData(h,!1,"	",e)}}else if(this.parent.selectionSettings.mode!=="Cell"){var p=this.parent.getSelectedRowIndexes().sort(function(k,F){return k-F});if(e){for(var c=[],n=0;n<this.parent.getVisibleColumns().length;n++)c[parseInt(n.toString(),10)]=this.parent.getVisibleColumns()[parseInt(n.toString(),10)].headerText;this.getCopyData(c,!1,"	",e),this.copyContent+=`
`}if((this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&p.length>t.length){p=[];for(var n=0;n<t.length;n++){var d=t[parseInt(n.toString(),10)];d.getAttribute("aria-selected")==="true"&&p.push(parseInt(d.getAttribute("data-rowindex"),10))}}for(var n=0;n<p.length;n++){n>0&&(this.copyContent+=`
`);var f=[],g=p[parseInt(n.toString(),10)];!$t(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(g=t.map(function(F){return F.getAttribute("data-rowindex")}).indexOf(p[parseInt(n.toString(),10)].toString()));var m=t[parseInt(g.toString(),10)];u(m)||(f.push.apply(f,[].slice.call(m.querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(f,!1,"	",e))}}else if(this.parent.selectionModule&&this.parent.selectionModule.selectedRowCellIndexes.length){var v=this.checkBoxSelection();if(v.status){if(e){for(var y=[],n=0;n<v.colIndexes.length;n++){var R=this.parent.getColumnHeaderByIndex(v.colIndexes[parseInt(n.toString(),10)]);R.classList.contains("e-hide")||y.push(R)}this.getCopyData(y,!1,"	",e),this.copyContent+=`
`}for(var n=0;n<v.rowIndexes.length;n++){n>0&&(this.copyContent+=`
`);var b=[].slice.call(t[v.rowIndexes[parseInt(n.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));this.getCopyData(b,!1,"	",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,`
`,e)}var E={data:this.copyContent,cancel:!1};if(this.parent.trigger(_u,E),E.cancel)return;this.clipBoardTextArea.value=this.copyContent=E.data,K.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},o.prototype.getCopyData=function(e,t,i,r){for(var n=typeof e[0]!="string",s=0;s<e.length;s++){if(r&&t){var a=parseInt(e[parseInt(s.toString(),10)].getAttribute(je),10)-1;this.copyContent+=this.parent.getColumns()[parseInt(a.toString(),10)].headerText+`
`}n?e[parseInt(s.toString(),10)].classList.contains("e-hide")||(this.copyContent+=e[parseInt(s.toString(),10)].innerText):this.copyContent+=e[parseInt(s.toString(),10)],s<e.length-1&&(this.copyContent+=i)}},o.prototype.copy=function(e){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},o.prototype.getModuleName=function(){return"clipboard"},o.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&(fe(this.clipBoardTextArea),this.clipBoardTextArea=null)},o.prototype.checkBoxSelection=function(){var e=this.parent,t={status:!1};if(e.selectionSettings.mode==="Cell"){var i=e.getSelectedRowCellIndexes(),r=void 0,n=[],s=void 0;for(s=0;s<i.length&&(i[parseInt(s.toString(),10)].cellIndexes.length&&n.push(i[parseInt(s.toString(),10)].rowIndex),!(i[parseInt(s.toString(),10)].cellIndexes.length&&(r||(r=JSON.stringify(i[parseInt(s.toString(),10)].cellIndexes.sort())),r!==JSON.stringify(i[parseInt(s.toString(),10)].cellIndexes.sort()))));s++);n.sort(function(a,l){return a-l}),s===i.length&&(t={status:!0,rowIndexes:n,colIndexes:i[0].cellIndexes})}return t},o}(),ai="https://ej2.syncfusion.com/documentation/grid",Sn="https://ej2.syncfusion.com/documentation/",li="[EJ2Grid.Warning]",Bi="[EJ2Grid.Error]",Wr="[EJ2Grid.Info]",ed=function(){function o(e){this.parent=e,this.parent.on("initial-end",this.patchadaptor,this)}return o.prototype.getModuleName=function(){return"logger"},o.prototype.log=function(e,t){e instanceof Array||(e=[e]);for(var i=e,r=0;r<i.length;r++){var n=td[i[parseInt(r.toString(),10)]],s=n.check(t,this.parent);s.success&&console[n.logType](n.generateMessage(t,this.parent,s.options))}},o.prototype.patchadaptor=function(){var e=this.parent.getDataModule().dataManager.adaptor,t=e.beforeSend;t&&(e.beforeSend=function(i,r,n){t.call(e,i,r,n)})},o.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},o}(),td={module_missing:{type:"module_missing",logType:"warn",check:function(o,e){var t=e.getInjectedModules().map(function(r){return r.prototype.getModuleName()}),i=e.requiredModules().map(function(r){return r.member}).filter(function(r){return t.indexOf(r)===-1});return{success:i.filter(function(r){return r!=="resize"}).length>0,options:i}},generateMessage:function(o,e,t){return t=t.filter(function(i){return i!=="resize"}).reduce(function(i,r){return i+("* "+r+`
`)},""),li+`: MODULES MISSING
The following modules are not injected:.
`+(""+t)+("Refer to "+ai+"/module.html for documentation on importing feature modules.")}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(){return{success:typeof Promise>"u"}},generateMessage:function(){return Bi+`: PROMISE UNDEFINED
Promise object is not present in the global environment,please use polyfil to support Promise object in your environment.
`+("Refer to "+Sn+"/base/browser.html?#required-polyfills for more information.")}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(o,e){return{success:e.enableColumnVirtualization?e.getPrimaryKeyFieldNames().length===0:e.getColumns().filter(function(t){return t.isPrimaryKey}).length===0}},generateMessage:function(){return li+`: PRIMARY KEY MISSING
Editing is enabled but primary key column is not specified.
`+("Refer to "+ai+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(o,e){return{success:e.selectionSettings.persistSelection&&e.getColumns().filter(function(t){return t.isPrimaryKey}).length===0}},generateMessage:function(){return li+`: PRIMARY KEY MISSING
selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.
`+("Refer to "+ai+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},actionfailure:{type:"actionfailure",logType:"error",check:function(){return{success:!0}},generateMessage:function(o,e){var t="",i=id(o),r=rd(o);return r!==""?t=r:i!==""?t=i:t=o.error,li+": "+t}},locale_missing:{type:"locale_missing",logType:"warn",check:function(o,e){var t=A.getObject("locale."+e.locale+".grid",$i);return{success:e.locale!=="en-US"&&u(t)}},generateMessage:function(o,e){return li+`: LOCALE CONFIG MISSING
`+("Locale configuration for '"+e.locale+`' is not provided.
`)+("Refer to "+ai+`/globalization-and-localization.html?#localization 
             for documentation on setting locale configuration.`)}},limitation:{type:"limitation",logType:"warn",check:function(o,e){var t=o,i;switch(t){case"freeze":i={success:!gt(e.detailTemplate)||!gt(e.childGrid),options:{name:"freeze"}};break;case"virtualization":i={success:!gt(e.detailTemplate)||!gt(e.childGrid),options:{name:"virtualization"}};break;default:i={success:!1};break}return i},generateMessage:function(o,e,t){var i=t.name,r;switch(i){case"freeze":r=`Frozen rows and columns do not support the following features:
* Details Template
* Hierarchy Grid
`;break;case"virtualization":r=`Virtualization does not support the following features.
* Details Template.
* Hierarchy Grid.
`;break;default:r="";break}return li+(": "+i.toUpperCase()+` LIMITATIONS
`)+r}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(o,e){return{success:!(e.columns.length||e.dataSource instanceof _||!u(e.dataSource)&&e.dataSource.length)}},generateMessage:function(){return li+`: GRID CONFIG MISSING
dataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.
`+("Refer to "+ai+"/columns.html for documentation on configuring the grid data and columns.")}},virtual_height:{type:"virtual_height",logType:"error",check:function(o,e){return{success:u(e.height)||e.height==="auto"}},generateMessage:function(){return Bi+`: GRID HEIGHT MISSING 
height property is required to use virtualization.
`+("Refer to "+ai+"/virtual.html for documentation on configuring the virtual grid.")}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(o){return{success:Array.isArray(o)||Array.isArray(o.result)}},generateMessage:function(){return Bi+`: RETRUN VALUE MISSING  
Remote service returns invalid data. 
`+("Refer to "+ai+"/edit.html for documentation on configuring editing with remote data.")}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(o,e){return{success:e.getDataModule().isRemote()}},generateMessage:function(){return li+`: SORT COMPARER NOT WORKING  
Sort comparer will not work with remote data.`+("Refer to "+ai+"/sorting/#custom-sort-comparer for documentation on using the sort comparer.")}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(o){return{success:o.column.minWidth&&o.column.minWidth>=o.width||o.column.maxWidth&&o.column.maxWidth<=o.width}},generateMessage:function(){return Wr+`: RESIZING COLUMN REACHED MIN OR MAX  
The column resizing width is at its min or max.`}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(o){var e=!0,t;switch(o.moduleName){case"reorder":u(o.destColumn)?t="reordering action is disabled for the "+o.column.headerText+" column":t="reordering action is disabled for the "+(o.column.allowReordering?o.destColumn.headerText:o.column.headerText)+" column";break;case"group":t="grouping action is disabled for the "+o.columnName+" column.";break;case"filter":t="filtering action is disabled for the "+o.columnName+" column.";break;case"sort":t="sorting action is disabled for the "+o.columnName+" column.";break}return{success:e,options:{fn:t}}},generateMessage:function(o,e,t){return Wr+(`: ACTION DISABLED 
 `+t.fn)}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(o){return{success:!0,options:{args:o}}},generateMessage:function(o,e,t){return Wr+(`: EXPORTING INPROGRESS 
 Grid `+t.args+"ing is in progress")}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(o){return{success:!0,options:{args:o}}},generateMessage:function(o,e,t){return Wr+(`: EXPORTING COMPLETED 
 Grid `+t.args+"ing is complete")}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(){return{success:!0}},generateMessage:function(){return Bi+`: FOREIGNKEY CONFIG 
  Grid foreign key column needs a valid data source/service.`+("Refer to "+ai+"/columns/#foreign-key-column for documentation on configuring foreign key columns.")}},initial_action:{type:"initial_action",logType:"error",check:function(o){var e=!0,t;switch(o.moduleName){case"group":t="The "+o.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":t="The "+o.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":t="The "+o.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column.";break}return{success:e,options:{fn:t}}},generateMessage:function(o,e,t){return Bi+(`: INITIAL ACTION FAILURE 
 `+t.fn)}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(o,e){return{success:e.getColumns().length<=e.frozenColumns||e.currentViewData.length&&e.frozenRows>=e.currentViewData.length}},generateMessage:function(o,e){return Bi+(`: OUT OF RANGE ERROR-
 `+(e.getColumns().length<=e.frozenColumns?"FROZEN COLUMNS,":""))+((e.frozenRows>=e.currentViewData.length?"FROZEN ROWS":"")+" invalid")}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(o){return{success:u(o.column.type),options:o.column.headerText}},generateMessage:function(o,e,t){return Bi+(`: COLUMN TYPE MISSING-
  `+t+" column type was invalid or not defined.")+("Please go through below help link: "+Sn+"/grid/columns/#column-type")}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(o){return{success:o.dataState.dataSource&&!(o.dataState.dataSource instanceof _||"result"in o.dataState.dataSource||o.dataState.dataSource instanceof Array)&&!u(o.dataState.dataStateChange)}},generateMessage:function(){return li+`: DATASOURCE SYNTAX WARNING
DataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used`}}},id=function(o){var e=o.error;return e.indexOf&&e.indexOf("Format options")!==0?"":`INVALID FORMAT
For more information, refer to the following documentation links:
`+("Number format: "+Sn+`/common/internationalization#supported-format-string
`)+("Date format: "+Sn+`/common/internationalization#manipulating-datetime
`)+("Message: "+e)},rd=function(o){var e=A.getObject("error.error",o);if(u(e))return"";var t="";try{t=JSON.parse(e.responseText)}catch{t=""}return`XMLHTTPREQUEST FAILED
`+("Url: "+e.responseURL+`
`)+("Status: "+e.status+" - "+e.statusText+`
`)+(t!==""?"Message: "+t:"")},bt=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),w=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},nd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C()],e.prototype,"field",void 0),w([C()],e.prototype,"direction",void 0),w([C(!1)],e.prototype,"isFromGroup",void 0),e}(_e),sd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([Ir([],nd)],e.prototype,"columns",void 0),w([C(!0)],e.prototype,"allowUnsort",void 0),e}(_e),od=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C()],e.prototype,"field",void 0),w([C()],e.prototype,"operator",void 0),w([C()],e.prototype,"value",void 0),w([C()],e.prototype,"matchCase",void 0),w([C(!1)],e.prototype,"ignoreAccent",void 0),w([C()],e.prototype,"predicate",void 0),w([C({})],e.prototype,"actualFilterValue",void 0),w([C({})],e.prototype,"actualOperator",void 0),w([C()],e.prototype,"type",void 0),w([C()],e.prototype,"ejpredicate",void 0),w([C()],e.prototype,"uid",void 0),w([C()],e.prototype,"isForeignKey",void 0),w([C()],e.prototype,"condition",void 0),e}(_e),ad=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C(!1)],e.prototype,"enableCache",void 0),w([C(3)],e.prototype,"maxBlocks",void 0),w([C(3)],e.prototype,"initialBlocks",void 0),e}(_e),ld=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([Ir([],od)],e.prototype,"columns",void 0),w([C("FilterBar")],e.prototype,"type",void 0),w([C("OnEnter")],e.prototype,"mode",void 0),w([C(!0)],e.prototype,"showFilterBarStatus",void 0),w([C(1500)],e.prototype,"immediateModeDelay",void 0),w([C()],e.prototype,"operators",void 0),w([C(!1)],e.prototype,"ignoreAccent",void 0),w([C(!1)],e.prototype,"enableInfiniteScrolling",void 0),w([C(50)],e.prototype,"itemsCount",void 0),w([C("Shimmer")],e.prototype,"loadingIndicator",void 0),w([C(!1)],e.prototype,"enableCaseSensitivity",void 0),w([C(!1)],e.prototype,"showFilterBarOperator",void 0),e}(_e),hd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C("Row")],e.prototype,"mode",void 0),w([C("Flow")],e.prototype,"cellSelectionMode",void 0),w([C("Single")],e.prototype,"type",void 0),w([C(!1)],e.prototype,"checkboxOnly",void 0),w([C(!1)],e.prototype,"persistSelection",void 0),w([C("Default")],e.prototype,"checkboxMode",void 0),w([C(!1)],e.prototype,"enableSimpleMultiRowSelection",void 0),w([C(!0)],e.prototype,"enableToggle",void 0),w([C(!1)],e.prototype,"allowColumnSelection",void 0),e}(_e),ud=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C([])],e.prototype,"fields",void 0),w([C("")],e.prototype,"key",void 0),w([C("contains")],e.prototype,"operator",void 0),w([C(!0)],e.prototype,"ignoreCase",void 0),w([C(!1)],e.prototype,"ignoreAccent",void 0),e}(_e),pd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C()],e.prototype,"targetID",void 0),e}(_e),cd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C("Both")],e.prototype,"wrapMode",void 0),e}(_e),dd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C("Normal")],e.prototype,"mode",void 0),e}(_e),fd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C(!0)],e.prototype,"showDropArea",void 0),w([C(!1)],e.prototype,"allowReordering",void 0),w([C(!1)],e.prototype,"showToggleButton",void 0),w([C(!1)],e.prototype,"showGroupedColumn",void 0),w([C(!0)],e.prototype,"showUngroupButton",void 0),w([C(!1)],e.prototype,"disablePageWiseAggregates",void 0),w([C([])],e.prototype,"columns",void 0),w([C()],e.prototype,"captionTemplate",void 0),w([C(!1)],e.prototype,"enableLazyLoading",void 0),e}(_e),gd=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C(!1)],e.prototype,"allowAdding",void 0),w([C(!1)],e.prototype,"allowEditing",void 0),w([C(!1)],e.prototype,"allowDeleting",void 0),w([C("Normal")],e.prototype,"mode",void 0),w([C(!0)],e.prototype,"allowEditOnDblClick",void 0),w([C(!0)],e.prototype,"showConfirmDialog",void 0),w([C(!1)],e.prototype,"showDeleteConfirmDialog",void 0),w([C()],e.prototype,"template",void 0),w([C()],e.prototype,"headerTemplate",void 0),w([C()],e.prototype,"footerTemplate",void 0),w([C("Top")],e.prototype,"newRowPosition",void 0),w([C({})],e.prototype,"dialog",void 0),w([C(!1)],e.prototype,"allowNextRowEdit",void 0),w([C(!1)],e.prototype,"showAddNewRow",void 0),e}(_e),md=function(o){bt(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return w([C("Spinner")],e.prototype,"indicatorType",void 0),e}(_e),Bl=function(o){bt(e,o);function e(i,r){var n=o.call(this,i,r)||this;return n.isPreventScrollEvent=!1,n.inViewIndexes=[],n.keyA=!1,n.frozenRightCount=0,n.freezeColumnRefresh=!0,n.rightcount=0,n.frozenLeftCount=0,n.leftcount=0,n.tablesCount=1,n.movableCount=0,n.movablecount=0,n.fixedcount=0,n.fixedCount=0,n.visibleFrozenLeft=0,n.visibleFrozenFixed=0,n.isPreparedFrozenColumns=!1,n.visibleFrozenRight=0,n.visibleMovable=0,n.frozenLeftColumns=[],n.frozenRightColumns=[],n.movableColumns=[],n.fixedColumns=[],n.stackedLeft=[],n.stackedRight=[],n.stackedFixed=[],n.stackedMovable=[],n.stackedarrayLeft=[],n.stackedarrayRight=[],n.stackedarrayFixed=[],n.stackedarrayMovable=[],n.media={},n.autoFitColumnsResize=!1,n.tableIndex=0,n.componentRefresh=gi.prototype.refresh,n.isChangeDataSourceCall=!1,n.mergedColumns=!1,n.isVirtualAdaptive=!1,n.requireTemplateRef=!0,n.vRows=[],n.vcRows=[],n.vGroupOffsets={},n.rowUid=0,n.translateX=0,n.isManualRefresh=!1,n.isAutoFitColumns=!1,n.enableDeepCompare=!1,n.totalDataRecordsCount=0,n.disableSelectedRecords=[],n.partialSelectedRecords=[],n.isSpan=!1,n.islazyloadRequest=!1,n.isAddNewRow=!1,n.addNewRowFocus=!0,n.selectVirtualRowOnAdd=!1,n.lockcolPositionCount=0,n.prevPageMoving=!1,n.pageTemplateChange=!1,n.isAutoGen=!1,n.isAutoGenerateColumns=!1,n.pageRequireRefresh=!0,n.mediaBindInstance={},n.commandDelIndex=void 0,n.preventAutoFit=!1,n.asyncTimeOut=50,n.isExportGrid=!1,n.isWidgetsDestroyed=!1,n.enableLogger=!1,n.needsID=!0,t.Inject(Kc),mi("mergePersistData",n.mergePersistGridData,n),n}t=e,e.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],r={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},n=0;n<i.length;n++)for(var s=this[i[parseInt(n.toString(),10)]],a=0,l=r[i[parseInt(n.toString(),10)]];a<l.length;a++){var h=l[a];delete s[""+h]}var p=this.pageSettings.template,c=Object.assign({template:void 0},this.pageSettings);this.enableVirtualization&&this.enablePersistence&&this.contentModule&&this.contentModule.getPageFromTop&&!u(this.scrollPosition)&&!u(this.scrollPosition.top)&&(c.properties.currentPage=this.contentModule.getPageFromTop(this.scrollPosition.top,{block:1})),this.setProperties({pageSettings:c},!0);var d=this.groupSettings.captionTemplate,f=d&&this.isAngular;f&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!u(this.pagerTemplate);var g=this.addOnPersist(i);return c.template=p,this.setProperties({pageSettings:c},!0),f&&(this.groupSettings.captionTemplate=d),g},e.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var i=[];return this.isDestroyed||(this.allowFiltering&&i.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator],name:"Filter"}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this,this.serviceLocator],name:"ExcelExport"}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.allowSorting&&i.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator],name:"Sort"}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowSelection&&i.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator],name:"Selection"}),this.resizeCheck()&&i.push({member:"resize",args:[this],name:"Resize"}),this.allowReordering&&i.push({member:"reorder",args:[this],name:"Reorder"}),this.allowRowDragAndDrop&&i.push({member:"rowDragAndDrop",args:[this],name:"RowDD"}),this.allowGrouping&&i.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator],name:"Group"}),this.aggregates.length&&i.push({member:"aggregate",args:[this,this.serviceLocator],name:"Aggregate"}),this.isDetail()&&i.push({member:"detailRow",args:[this,this.serviceLocator],name:"DetailRow"}),(this.toolbar||this.toolbarTemplate)&&i.push({member:"toolbar",args:[this,this.serviceLocator],name:"Toolbar"}),(this.enableVirtualization||this.enableColumnVirtualization)&&i.push({member:"virtualscroll",args:[this,this.serviceLocator],name:"VirtualScroll"}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&i.push({member:"freeze",args:[this,this.serviceLocator],name:"Freeze"}),!u(this.columns)&&this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this,this.serviceLocator],name:"CommandColumn"}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this,this.serviceLocator],name:"Edit"}),this.extendRequiredModules(i)),i},e.prototype.extendRequiredModules=function(i){this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this,this.serviceLocator],name:"InfiniteScroll"}),this.groupSettings.enableLazyLoading&&i.push({member:"lazyLoadGroup",args:[this,this.serviceLocator],name:"LazyLoadGroup"}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this,this.serviceLocator],name:"ContextMenu"}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this,this.serviceLocator],name:"ColumnMenu"}),this.showColumnChooser&&i.push({member:"columnChooser",args:[this,this.serviceLocator],name:"ColumnChooser"}),!u(this.columns)&&this.isForeignKeyEnabled(this.columns)&&i.push({member:"foreignKey",args:[this,this.serviceLocator],name:"ForeignKey"}),this.enableLogger&&i.push({member:"logger",args:[this],name:"Logger"})},e.prototype.resizeCheck=function(){var i=!!this.getColumns().filter(function(s){return s.autoFit===!0}).length;!u(this.columnModel)&&this.columnModel.length&&!(this.columnModel[0]instanceof tt)&&(this.columnModel=[]);var r=!!(this.showColumnMenu&&(!this.columnMenuItems||this.columnMenuItems.filter(function(s){return s==="AutoFit"||s==="AutoFitAll"}).length)),n=!!(this.contextMenuItems&&this.contextMenuItems.filter(function(s){return s==="AutoFit"||s==="AutoFitAll"}).length);return this.allowResizing||this.autoFitColumnsResize||i||r||n},e.prototype.preRender=function(){this.serviceLocator=new zc,this.initProperties(),this.initializeServices()},e.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=gi.prototype.refresh,this.freezeColumnRefresh=!0,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",FilterTitle:"Filter",FilterIcon:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",In:"In",NotIn:"Not In",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",SortIcon:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},e.prototype.render=function(){if(this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),fn({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new Pc(this,this.serviceLocator),this.searchModule=new Qc(this),this.scrollModule=new Xc(this),this.notify(ro,{}),this.pageSettings.enableQueryString){var i=new URL(window.location.href).searchParams.get("page");if(!u(i)&&window.location.href.indexOf("?page=")>0){var r=parseInt(i,10);this.setProperties({pageSettings:{currentPage:r}},!0),this.pageSettings.currentPage=r}}if((this.getDataModule().dataManager.dataSource.offline===!0||this.getDataModule().dataManager.dataSource.url===void 0)&&!(!u(this.dataSource)&&this.dataSource.result)&&(this.isVirtualAdaptive=!0),this.aggregateModule&&this.aggregates.length)for(var n=0;n<this.aggregates.length;n++)for(var s=0;s<this.aggregates[parseInt(n.toString(),10)].columns.length;s++){var a=this.aggregates[parseInt(n.toString(),10)].columns[parseInt(s.toString(),10)];a.types&&(a.type=a.types)}if(this.isReact){var l={requireTemplateRef:this.requireTemplateRef};this.trigger(ds,l),l.requireTemplateRef||(this.requireTemplateRef=l.requireTemplateRef)}else this.trigger(ds);Cn(this.columns,this.enableColumnVirtualization,this),this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.isPreparedFrozenColumns=!0,this.enablePersistence&&this.notify(As,{}),this.getMediaColumns(),rn(this.columns),this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.loadingIndicator.indicatorType==="Spinner"&&this.showSpinner(),this.notify(xn,{}),this.loadingIndicator.indicatorType==="Shimmer"&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},e.prototype.setInitialFrozenColumnIndex=function(i){for(var r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)];n[""+Ia]=n.index,n.columns&&this.setInitialFrozenColumnIndex(n.columns)}},e.prototype.showSpinner=function(){this.isExportGrid||ji(this.element)},e.prototype.hideSpinner=function(){this.isExportGrid||gn(this.element)},e.prototype.showMaskRow=function(i,r){if(!(u(this.headerModule)||u(this.contentModule))){var n=this.getHeaderContent().firstChild,s=this.getContent().firstChild,a=this.getFooterContent();if(r){var l=r.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),p='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var c=0;c<h;c++){l.innerHTML+=p,l.querySelector(".e-ftrchk.e-mask-ftrchk").style.width="100%",l.querySelector(".e-checkbox-wrapper").style.width="100%";var d=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));d[0].classList.add("e-mask-checkbox-filter-intent"),d[1].classList.add("e-mask-checkbox-filter-span-intent")}return}if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(s.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var f=s.getBoundingClientRect().height,g=f===0?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:f,m=Math.ceil(g/this.getRowHeight());this.rowRenderingMode!=="Vertical"&&(this.headerMaskTable=this.createEmptyMaskTable(n,1)),this.contentMaskTable=this.createEmptyMaskTable(s,m);return}if(this.maskRowContentScroll=!!((this.enableVirtualization||this.enableColumnVirtualization)&&i),!this.contentMaskTable){var v=s;(this.enableVirtualization||this.enableColumnVirtualization)&&(v=v.querySelector(".e-virtualtable")),u(v.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(v,this.getContentMaskColumns(),i))}if(!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&i==="X")){var v=n;this.enableColumnVirtualization&&i==="X"&&(v=v.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(v,this.getContentMaskColumns(),i)}if(a&&a.querySelector(".e-summaryrow")){var y=a.firstChild;if(!this.footerContentMaskTable){var R=y;this.footerContentMaskTable=this.createMaskTable(R)}}this.enableVirtualization&&i||x.add(s,"scroll",this.translateMaskRow,this)}},e.prototype.getContentMaskColumns=function(){return this.getColumns()},e.prototype.createEmptyMaskTable=function(i,r){var n=this.createElement("table",{className:"e-table e-masked-table"}),s=this.createElement("tbody",{className:"e-masked-tbody"}),a=this.createElement("tr",{className:"e-masked-row e-row"});a.style.height=this.getRowHeight()+"px";var l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),a.appendChild(l);for(var h=0;h<r;h++)s.appendChild(a.cloneNode(!0));return n.appendChild(s),i.appendChild(n),n},e.prototype.createMaskTable=function(i,r,n){var s=i,a=!!Y(s,".e-gridheader"),l=!!Y(s,".e-gridcontent"),h=!!Y(s,".e-gridfooter"),p=this.getContent().firstChild,c=p.scrollHeight,d=s.querySelector("table"),f=d.cloneNode();f.removeAttribute("role"),f.removeAttribute("id"),ih(f,"position: absolute; z-index: 5; width: "+d.getBoundingClientRect().width+"px;"),a&&!(this.enableColumnVirtualization&&n==="X")&&(f.style.transform="translate(0px,"+d.querySelector("thead").getBoundingClientRect().height+"px)"),f.setAttribute("class","e-table e-masked-table");var g=d.querySelector("colgroup").cloneNode(!0);if(g.removeAttribute("id"),g.setAttribute("class","e-masked-colgroup"),f.appendChild(g),a&&this.enableColumnVirtualization&&n==="X"){var m=this.createMaskRow(g,r);if(this.isFrozenGrid())for(var v=[].slice.call(m.querySelectorAll(".e-rowcell")),y=0;y<v.length;y++)y<this.frozenLeftCount?(this.frozenLeftCount-1===y&&v[parseInt(y.toString(),10)].classList.add("e-freezeleftborder"),v[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),v[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),v[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):v.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(v.length-this.frozenRightCount===y&&v[parseInt(y.toString(),10)].classList.add("e-freezerightborder"),v[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),v[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),v[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");var R=d.querySelector("thead"),b=[].slice.call(R.querySelectorAll("tr")),E=R.cloneNode();E.removeAttribute("role"),E.setAttribute("class","e-masked-thead");for(var k=b.length,y=0;y<k;y++)E.appendChild(m.cloneNode(!0)),E.childNodes[parseInt(y.toString(),10)].style.height=b[parseInt(y.toString(),10)].getBoundingClientRect().height+"px";f.appendChild(E)}var F=d.querySelector("tbody").cloneNode();F.removeAttribute("role"),F.setAttribute("class","e-masked-tbody");var W=d.querySelector("tbody");if(l||a){var te=p,k=Math.ceil(te.getBoundingClientRect().height/this.getRowHeight());if(this.allowPaging&&this.pageSettings.pageSize!==this.currentViewData.length&&this.pagerModule.pagerObj.totalPages!==this.pageSettings.currentPage){var m=this.createMaskRow(g,r),ne=m.cloneNode(!0);ne.classList.add("e-altrow");for(var y=0;y<this.pageSettings.pageSize-this.currentViewData.length;y++)F.appendChild(y%2===1?ne.cloneNode(!0):m.cloneNode(!0))}if(W.querySelector(".e-emptyrow")||!W.childNodes.length||l&&this.childGrid){var m=this.createMaskRow(g,r),ne=m.cloneNode(!0);ne.classList.add("e-altrow");for(var y=0;y<k;y++){var ye=1;F.appendChild((y+ye)%2===0?ne.cloneNode(!0):m.cloneNode(!0))}}else{var L='tr:not(.e-hide):not([style*="display:none"]):not([style*="display: none"])',b=[].slice.call(W.querySelectorAll(L)),P=W.querySelector(".e-addedrow, .e-editedrow"),D=void 0;if(P){if(D=b.indexOf(P),this.isFrozenGrid()&&this.enableColumnVirtualization)for(var v=[].slice.call(b[D+1].querySelectorAll(".e-rowcell")),y=0;y<v.length;y++)y<this.frozenLeftCount?(v[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),v[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),v[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):v.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(v[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),v[parseInt(y.toString(),10)].setAttribute("aria-colindex",(y+1).toString()),v[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");P.classList.contains("e-addedrow")?b.splice(D,2):b.splice(D,1)}k=(this.enableVirtualization||this.enableColumnVirtualization)&&n?b.length:k<=b.length?k:b.length;for(var y=0;y<k;y++)F.appendChild(this.applyMaskRow(b[parseInt(y.toString(),10)].cloneNode(!0),b[parseInt(y.toString(),10)].getBoundingClientRect().height));if(P&&P.classList.contains("e-editedrow")&&D<k){var N=F.childNodes[parseInt(D.toString(),10)];N.style.height=this.getRowHeight()+"px",N.classList.add("e-row"),P.classList.contains("e-altrow")&&N.classList.add("e-altrow")}}}if(f.appendChild(F),h){var $=d.querySelector("tfoot"),V=$.cloneNode();V.setAttribute("class","e-masked-tfoot");for(var b=[].slice.call($.querySelectorAll("tr")),y=0;y<b.length;y++)V.appendChild(this.applyMaskRow(b[parseInt(y.toString(),10)].cloneNode(!0),b[parseInt(y.toString(),10)].getBoundingClientRect().height));f.appendChild(V)}if(a&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+st).style.position="relative"),s.insertBefore(f,s.firstChild),l&&!(this.enableVirtualization&&n)){var H=c-f.getBoundingClientRect().height;H=H<0?0:H;var z=p.scrollTop<=H?p.scrollTop:H;this.enableVirtualization&&(z-=Bs(Y(s,".e-virtualtable")).height),f.style.transform="translate(0px,"+z+"px)"}return f},e.prototype.applyMaskRow=function(i,r){var n=i;n.removeAttribute("role"),n.removeAttribute("aria-rowindex"),n.removeAttribute("data-uid"),n.classList.add("e-masked-row"),n.style.height=r+"px";for(var s=[].slice.call(n.childNodes),a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),this.enableColumnVirtualization&&l.classList.contains("e-fixedfreeze")&&(G([l],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),B([l],["e-unfreeze"])),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return n},e.prototype.createMaskRow=function(i,r){var n=i,s=r,a=this.createElement("tr",{className:"e-masked-row e-row"});this.rowRenderingMode!=="Vertical"&&(a.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,p=0;h<n.childNodes.length;h++){var c=n.childNodes[parseInt(h.toString(),10)],d=l.cloneNode();d.innerHTML=this.getShimmerTemplate(),c.classList.contains("e-group-intent")||c.classList.contains("e-detail-intent")||c.classList.contains("e-drag-intent")?c.classList.contains("e-group-intent")?d.firstChild.classList.add("e-mask-group-intent"):c.classList.contains("e-detail-intent")?d.firstChild.classList.add("e-mask-detail-intent"):c.classList.contains("e-drag-intent")&&d.firstChild.classList.add("e-mask-drag-intent"):(this.rowRenderingMode==="Vertical"&&s[parseInt(p.toString(),10)]&&d.setAttribute("data-cell",s[parseInt(p.toString(),10)].headerText?s[parseInt(p.toString(),10)].headerText:s[parseInt(p.toString(),10)].field),c.style.display==="none"?d.classList.add("e-hide"):(d.style.textAlign=s[parseInt(p.toString(),10)]&&s[parseInt(p.toString(),10)].textAlign?s[parseInt(p.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",s[parseInt(p.toString(),10)]&&(s[parseInt(p.toString(),10)].type==="checkbox"||s[parseInt(p.toString(),10)].displayAsCheckBox)&&d.firstChild.classList.add("e-mask-checkbox-intent")),p++),a.appendChild(d)}return a},e.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},e.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var i=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),r=0;r<i.length;r++)i[parseInt(r.toString(),10)]&&i[parseInt(r.toString(),10)].classList.add("e-shimmer-wave")},e.prototype.translateMaskRow=function(i){for(var r=i.target,n=r.querySelectorAll(".e-masked-table"),s=0;s<n.length;s++){var a=n[parseInt(s.toString(),10)];if(a){var l=r.scrollHeight-a.getBoundingClientRect().height;l=l<0?0:l;var h=r.scrollTop<=l?r.scrollTop:l;this.enableVirtualization&&(h-=Bs(Y(a,".e-virtualtable")).height),a.style.transform="translate(0px,"+h+"px)"}}},e.prototype.removeMaskRow=function(){if(!u(this.contentModule)){var i=this.getContent().firstChild;x.remove(i,"scroll",this.translateMaskRow)}this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+st).style.position="");for(var r=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],n=0;n<r.length;n++){var s=r[parseInt(n.toString(),10)];s&&fe(s)}this.headerMaskTable=null,this.contentMaskTable=null,this.footerContentMaskTable=null},e.prototype.refreshMaskRow=function(){var i=this.getContent().firstChild;if(!(!this.isInitialLoad&&!this.getColumns().length)&&this.contentMaskTable&&i.querySelector(".e-masked-table")){var r=i;this.enableVirtualization&&(r=r.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(r)}},e.prototype.refreshMaskRowColgroupWidth=function(i){var r=i.querySelector("table:not(.e-masked-table)"),n=r.querySelector(Ot).cloneNode(!0),s=i.querySelector(".e-masked-table");n.removeAttribute("id"),n.setAttribute("class","e-masked-colgroup");for(var a=0;a<n.childNodes.length;a++)n.childNodes[parseInt(a.toString(),10)].removeAttribute("class");fe(s.querySelector(".e-masked-colgroup")),s.insertBefore(n,s.firstChild),s.style.width=r.getBoundingClientRect().width+"px"},e.prototype.updateStackedFilter=function(){this.allowFiltering&&this.filterSettings.type==="FilterBar"&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},e.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var i=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!u(i))for(var r=0;r<i.length;r++)!u(i[parseInt(r.toString(),10)].hideAtMedia)&&(u(i[parseInt(r.toString(),10)].visible)||i[parseInt(r.toString(),10)].visible)&&this.pushMediaColumn(i[parseInt(r.toString(),10)],r)}this.updateFrozenColumnsWidth()},e.prototype.pushMediaColumn=function(i,r){this.mediaCol.push(i),this.media[i.uid]=window.matchMedia(i.hideAtMedia),this.mediaQueryUpdate(r,this.media[i.uid]),this.mediaBindInstance[parseInt(r.toString(),10)]=this.mediaQueryUpdate.bind(this,r),this.media[i.uid].addListener(this.mediaBindInstance[parseInt(r.toString(),10)])},e.prototype.updateMediaColumns=function(i){if(!this.enableColumnVirtualization){for(var r=this.getColumnIndexByUid(i.uid),n=0;n<this.mediaCol.length;n++)if(i.uid===this.mediaCol[parseInt(n.toString(),10)].uid){this.mediaCol.splice(n,1);return}this.pushMediaColumn(i,r)}},e.prototype.mediaQueryUpdate=function(i,r){var n=this.getColumns()[parseInt(i.toString(),10)];this.mediaCol.some(function(s){return s.uid===n.uid})&&(n.visible=r.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,n.visible?this.showHider.show(n.headerText,"headerText"):this.showHider.hide(n.headerText,"headerText")))},e.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var i=this.element.querySelector("."+tn);this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&i&&B([i],["e-footerpadding"]);var r=this.getColumns().filter(function(n){return n.type==="checkbox"});(r.length===0||r.length&&this.selectionSettings.checkboxMode==="ResetOnRowClick")&&(this.isCheckBoxSelection=!1),this.rowRenderingMode==="Vertical"&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),G([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh(),this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},e.prototype.removeMediaListener=function(){for(var i=0;i<this.mediaCol.length;i++)this.media[this.mediaCol[parseInt(i.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(i.toString(),10)].index])},e.prototype.eventInitializer=function(){},e.prototype.destroy=function(){var i=this.element;if(i){var r=!!(i.querySelector("."+Bt)&&i.querySelector("."+yi));r&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(ti,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),r&&o.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!K.isIE&&(this.element.innerHTML="");for(var n=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],s=0;s<n.length;s++)this[n[parseInt(s.toString(),10)]]&&(this[n[parseInt(s.toString(),10)]]=null);this.element.innerHTML="",ve(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},e.prototype.destroyDependentModules=function(){var i=this.element;!i||!i.querySelector("."+Bt)&&!i.querySelector("."+yi)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},e.prototype.getModuleName=function(){return"grid"},e.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):(this.element.classList.remove("e-afenabled"),this.notify(vs,{}))},e.prototype.setCSSClass=function(i){this.cssClass&&B([this.element],this.cssClass.split(" ")),i&&G([this.element],i.split(" "))},e.prototype.onPropertyChanged=function(i,r){var n=!1,s=!1,a=!1,l,h={requestType:"refresh"},p=null,c=null;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var d=Object.keys(i);d.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),s=!0);for(var f=0,g=d;f<g.length;f++){var m=g[f];switch(m){case"allowPaging":this.notify(et,{module:"pager",enable:this.allowPaging}),n=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(At,{module:"pager",properties:i.pageSettings});break}if(this.pagerModule&&this.pagerModule.isCancel){this.pagerModule.isCancel=!1;return}this.notify(At,{module:"pager",properties:i.pageSettings}),(u(i.pageSettings.currentPage)&&u(i.pageSettings.pageSize)&&u(i.pageSettings.totalRecordsCount)||!u(r.pageSettings)&&i.pageSettings.currentPage!==r.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageRequireRefresh&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(n=!0),this.pageRequireRefresh||(this.pageRequireRefresh=!0),this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1);break;case"allowSorting":this.notify(et,{module:"sort",enable:this.allowSorting}),n=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(et,{module:"filter",enable:this.allowFiltering}),n=!0,this.filterSettings.type!=="FilterBar"||this.editSettings.showAddNewRow&&this.filterSettings.type==="FilterBar"?this.refreshHeader():this.height==="100%"&&this.scrollModule.refresh();break;case"height":case"width":this.notify(et,{module:"scroll",properties:{width:i.width,height:i.height}}),this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(et,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(et,{module:"selection",enable:this.allowSelection}),this.renderModule.refresh();break;case"cssClass":this.setCSSClass(r.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=qe(this.rowTemplate),n=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=qe(this.emptyRecordTemplate),n=!0;break;case"detailTemplate":this.detailTemplateFn=qe(this.detailTemplate),n=!0;break;case"allowGrouping":this.notify(et,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),n=!0,l=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(n=!0,p=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null,c=p?p.ej2_instances[0]:null,this.childGrid&&c&&u(c.childGrid.childGrid)){var v=Object.assign({},c.childGrid,{childGrid:i.childGrid});for(c.setProperties({childGrid:v},!0);!u(c.parentDetails);){var y=document.querySelector("#"+c.parentDetails.parentID),R=y?y.ej2_instances[0]:null;if(R){var b=Object.assign({},R.childGrid);b.childGrid=c.childGrid,R.setProperties({childGrid:b},!0)}c=R}}this.headerModule.refreshUI();break;case"toolbar":this.notify(et,{module:"toolbar"}),this.height==="100%"&&this.scrollModule.refresh();break;case"groupSettings":this.notify(At,{module:"group",properties:i.groupSettings,oldProperties:r.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(n=!0),this.notify(et,{module:"aggregate",properties:i}),this.height==="100%"&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.isFrozenGrid()&&this.log("frozen_rows_columns"),a=!0,s=!0,this.addNewRowFocus=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(n=!0),this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(m,i,s)}}l&&this.updateDefaultCursor(),s?a||this.getFrozenColumns()||this.frozenRows||this.frozenLeftColumns.length||this.frozenRightColumns.length?this.freezeRefresh():this.refresh():n&&(this.notify(yr,h),n=!1,this.maintainSelection(i.selectedRowIndex))}},e.prototype.extendedPropertyChange=function(i,r,n){switch(i){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=r.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),this.height!=="auto"&&(this.scrollModule.removePadding(!r.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=r.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=r.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=r.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify(cp,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.resizeModule&&this.resizeModule.render(),this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?B([this.element],"e-grid-min-height"):G([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(et,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(et,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(et,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.toolbarModule&&this.toolbarModule.refreshToolbarItems(),this.notify(et,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(At,{module:"filter",properties:r.filterSettings});break;case"searchSettings":this.notify(At,{module:"search",properties:r.searchSettings});break;case"sortSettings":this.notify(At,{module:"sort"});break;case"selectionSettings":this.notify(At,{module:"selection",properties:r.selectionSettings});break;case"editSettings":this.notify(At,{module:"edit",properties:r.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify($r,{case:"textwrap",isModeChg:i==="textWrapSettings"}),this.refreshHeader(),this.height==="100%"&&this.scrollModule.refresh();break;case"dataSource":var s=this.getDataModule().getState();if(this.allowPaging&&this.pageSettings.pageSizes&&!this.getDataModule().isRemote()&&!(s&&s.isPending)&&this.pagerModule.pagerObj.isAllPage){var a=this.dataSource instanceof _?this.dataSource.dataSource.json.length:"result"in this.dataSource?this.dataSource.count:this.dataSource.length,l=Array.isArray(this.pageSettings.pageSizes)&&this.pageSettings.pageSizes.indexOf("All")>-1?!0:this.pageSettings.pageSizes;!l&&this.pageSettings.pageSize!==a?this.pagerModule.pagerObj.isAllPage=!1:(this.setProperties({pageSettings:{pageSize:a}},!0),this.pagerModule.pagerObj.setProperties({pageSize:a},!0))}if(this.allowSelection&&this.isPersistSelection&&!(s&&s.isPending)&&this.clearSelection(),!u(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(r).deepWatch)for(var h=this.getPrimaryKeyFieldNames()[0],p=0,c=Object.keys(r.dataSource);p<c.length;p++)this.setRowData(oe(h,this.dataSource[c[parseInt(p.toString(),10)]]),this.dataSource[c[parseInt(p.toString(),10)]]);else if(s.isPending){var d=u(this.dataSource)?[]:this.dataSource.result,f=s.group||[];if(f.length&&!this.groupSettings.enableLazyLoading&&!(d.length&&d[0].field))for(var p=0;p<f.length;p++)d=A.group(d,f[parseInt(p.toString(),10)],s.aggregates||[]);this.dataSource={result:d,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),s.resolver(this.dataSource)}else{if(!u(this.dataSource)&&this.dataSource.result&&this.dataSource.count&&this.groupSettings.columns.length){var d=this.dataSource.result,f=this.groupSettings.columns;if(f.length&&!(d.length&&d[0].field))for(var p=0;p<f.length;p++)d=A.group(d,f[parseInt(p.toString(),10)]);this.dataSource={result:d,count:this.dataSource.count}}this.getDataModule().setState({isDataChanged:!1}),this.notify(bs,{}),n||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(Ts,{}))}this.scrollRefresh();break;case"enableHover":var g=r.enableHover?B:G;g([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(r.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(Kp,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(Qp,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(r.enableStickyHeader);break;case"allowPdfExport":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();break;case"allowExcelExport":this.toolbarModule&&this.toolbarModule.refreshToolbarItems();break}},e.prototype.maintainSelection=function(i){var r=this;if(i!==-1){var n=function(){r.selectRow(i),r.off(Xe,n)};this.on(Xe,n,this)}},e.prototype.setProperties=function(i,r){o.prototype.setProperties.call(this,i,r);var n="filterSettings";i[""+n]&&this.filterModule&&r&&this.filterModule.refreshFilter()},e.prototype.getTablesCount=function(){return this.tablesCount},e.prototype.updateDefaultCursor=function(){for(var i=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),r=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),n=this.getColumns(),s=0;s<i.length;s++){var a=i[parseInt(s.toString(),10)];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(!n[parseInt(s.toString(),10)].allowReordering||!n[parseInt(s.toString(),10)].allowSorting||!n[parseInt(s.toString(),10)].allowGrouping?a.classList.add("e-defaultcursor"):a.classList.add("e-mousepointer"))}for(var l=0;l<r.length;l++)this.allowReordering&&r[parseInt(l.toString(),10)].classList.add("e-mousepointer")},e.prototype.updateColumnModel=function(i,r){for(var n=0,s=u(i)?0:i.length;n<s;n++)i[parseInt(n.toString(),10)].columns?this.updateColumnModel(i[parseInt(n.toString(),10)].columns,!0):this.columnModel.push(i[parseInt(n.toString(),10)]);(u(r)||!r)&&this.updateLockableColumns()},e.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},e.prototype.isFrozenGrid=function(){return this.getFrozenColumns()!==0||this.frozenLeftColumns.length!==0||this.frozenRightColumns.length!==0||this.fixedColumns.length!==0},e.prototype.getFrozenMode=function(){return this.frozenName},e.prototype.updateLockableColumns=function(){for(var i=this.columnModel,r=0,n=0,s=this.getFrozenColumns(),a=0;a<i.length;a++)i[parseInt(a.toString(),10)].lockColumn&&(a<s?(i.splice(r,0,i.splice(a,1)[0]),r++):(i.splice(s+n,0,i.splice(a,1)[0]),n++))},e.prototype.checkLockColumns=function(i){for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns?this.checkLockColumns(i[parseInt(r.toString(),10)].columns):i[parseInt(r.toString(),10)].lockColumn&&this.lockcolPositionCount++},e.prototype.leftrightColumnWidth=function(i){var r=i==="left"?this.getFrozenLeftColumns():i==="right"?this.getFrozenRightColumns():[],n=0;return r.filter(function(s){s.visible&&(n+=parseInt(s.width.toString(),10))}),n},e.prototype.getColumns=function(i){var r=this,n=this.inViewIndexes.map(function(f){return f-r.groupSettings.columns.length}).filter(function(f){return f>-1}),s=n.length;(!this.enableColumnVirtualization||u(this.columnModel)||this.columnModel.length===0||i)&&(this.columnModel=[],this.updateColumnModel(this.columns));var a=s===0?this.columnModel:this.getVisibleColumns().slice(n[0],n[s-1]+1),l=[],h=[],p=[],c=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&s===0;c&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]);for(var d=0;d<a.length;d++)a[parseInt(d.toString(),10)].freeze==="Left"||a[parseInt(d.toString(),10)].isFrozen?(l.push(a[parseInt(d.toString(),10)]),c&&this.frozenLeftColumns.push(a[parseInt(d.toString(),10)])):a[parseInt(d.toString(),10)].freeze==="Right"?(h.push(a[parseInt(d.toString(),10)]),c&&this.frozenRightColumns.push(a[parseInt(d.toString(),10)])):p.push(a[parseInt(d.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(l=this.frozenLeftColumns),this.frozenRightColumns.length&&(h=this.frozenRightColumns)),l.concat(p).concat(h)},e.prototype.getStackedHeaderColumnByHeaderText=function(i,r){for(var n=0;n<r.length;n++){var s=r[parseInt(n.toString(),10)];if(s.field===i||s.headerText===i){this.stackedColumn=s;break}else s.columns&&this.getStackedHeaderColumnByHeaderText(i,s.columns)}return this.stackedColumn},e.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},e.prototype.getQuery=function(){return this.query},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setColumnIndexesInView=function(i){this.inViewIndexes=i},e.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},e.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},e.prototype.setGridHeaderContent=function(i){this.headerModule.setPanel(i)},e.prototype.getContentTable=function(){return this.contentModule.getTable()},e.prototype.setGridContentTable=function(i){this.contentModule.setTable(i)},e.prototype.getContent=function(){return this.contentModule.getPanel()},e.prototype.setGridContent=function(i){this.contentModule.setPanel(i)},e.prototype.getHeaderTable=function(){return this.headerModule.getTable()},e.prototype.setGridHeaderTable=function(i){this.headerModule.setTable(i)},e.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(tn)[0],this.footerElement},e.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(tn)[0],this.footerElement.firstChild.firstChild},e.prototype.getPager=function(){return this.gridPager},e.prototype.setGridPager=function(i){this.gridPager=i},e.prototype.getRowByIndex=function(i){return this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender.getRowByIndex(i):this.contentModule.getRowByIndex(i)},e.prototype.getMovableRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},e.prototype.getFrozenRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},e.prototype.getRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},e.prototype.getRowInfo=function(i){var r=i,n={target:i};if(!u(i)&&u(T(r,"e-detailrowcollapse")&&u(T(r,"e-recordplusexpand")))){var s=Y(r,"."+Le);if(!s){var a=Y(r,"."+ut);if(!u(a)&&!a.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid")),h=parseInt(a.getAttribute(He),10)-1;n={row:a,rowData:l.data,rowIndex:h}}return n}var p=parseInt(s.getAttribute(je),10)-1,c=Y(s,"."+ut);if(!u(s)&&!isNaN(p)&&!u(c)){var h=parseInt(c.getAttribute(He),10)-1,d=this.contentModule.getRows(),f=p+this.getIndentCount(),g=d.filter(function(R){return R.uid===c.getAttribute("data-uid")}),m={},v=void 0;Object.keys(g).length&&(m=g[0].data,v=g[0].cells[parseInt(f.toString(),10)].column),n={cell:s,cellIndex:p,row:c,rowIndex:h,rowData:m,column:v,target:i}}}return n},e.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},e.prototype.getDataRows=function(){return this.getAllDataRows()},e.prototype.getAllDataRows=function(i){if(u(this.getContentTable().querySelector(Fe)))return[];var r=this.getContentTable().querySelector(Fe),n=[].slice.call(r.children);if(this.editSettings.showAddNewRow&&(n[0].classList.contains("e-addedrow")?n.shift():n[n.length-1].classList.contains("e-addedrow")&&n.pop()),this.frozenRows){var s=this.getHeaderTable().querySelector(Fe),a=[].slice.call(s.children);n=this.addMovableRows(a,n),this.editSettings.showAddNewRow&&a[0].classList.contains("e-addedrow")&&a.shift()}var l=this.generateDataRows(n,i);return l},e.prototype.addMovableRows=function(i,r){for(var n=0,s=r.length;n<s;n++)i.push(r[parseInt(n.toString(),10)]);return i},e.prototype.generateDataRows=function(i,r){for(var n=[],s=0,a=i.length;s<a;s++)i[parseInt(s.toString(),10)].classList.contains(ut)&&(!i[parseInt(s.toString(),10)].classList.contains("e-hiddenrow")||r)&&(this.isCollapseStateEnabled()?n[parseInt(i[parseInt(s.toString(),10)].getAttribute("aria-rowindex"),10)-1]=i[parseInt(s.toString(),10)]:n.push(i[parseInt(s.toString(),10)]));return n},e.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},e.prototype.getAllMovableDataRows=function(i){return this.getAllDataRows(i)},e.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},e.prototype.getAllFrozenDataRows=function(i){return this.getAllDataRows(i)},e.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},e.prototype.getAllFrozenRightDataRows=function(i){return this.getAllDataRows(i)},e.prototype.setCellValue=function(i,r,n){var s="cells",a="data",l="index",h="uid",p=this.getPrimaryKeyFieldNames()[0],c=new kt(this,this.serviceLocator),d=this.getColumnIndexByField(r),f=this.getColumnByField(r),g=this.contentModule.getRows(),m=g.filter(function(E){return oe(p,E.data)===i})[0],v=m?this.element.querySelector("[data-uid="+m[""+h]+"]"):null;if(!u(v)){typeof n=="string"&&(n=this.sanitize(n)),mi(r,n,m[""+a]);var y=this.enableVirtualization?v.children[parseInt(d.toString(),10)]:this.getCellFromIndex(m[""+l],d);if(!u(y)){var R=0;this.groupSettings.columns.length&&(d=d+this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&d++,this.isRowDragable()&&d++;var b=m[""+s][d-R];c.refreshTD(y,b,m[""+a],{index:m[""+l]}),this.isReact&&(y=this.enableVirtualization?v.children[parseInt(d.toString(),10)]:this.getCellFromIndex(m[""+l],d)),this.aggregates.length>0&&(this.notify(ms,{}),this.groupSettings.columns.length>0&&this.notify(sa,{})),!u(m)&&!u(m.changes)&&(m.changes[""+r]=n),this.trigger(fs,{cell:y,column:f,data:m[""+a]}),this.isReact&&y.getAttribute("tabindex")==="0"&&y.classList.contains("e-focused")&&y.focus()}}},e.prototype.refreshReactColumnTemplateByUid=function(i,r){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var s=!!(n.childGrid&&n.element.querySelectorAll(".e-childgrid").length),a=s?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows();n.refreshReactTemplateTD(a,s),r&&n.renderTemplates()})},e.prototype.refreshReactTemplateTD=function(i,r,n){for(var s="cells",a="index",l=this.getIndentCount(),h=0,p=!1,c=0;c<i.length;c++){var d=this.getRowObjectFromUID(i[parseInt(c.toString(),10)].getAttribute("data-uid"));if(r&&!d&&T(i[parseInt(c.toString(),10)],"e-childgrid")){var f=T(i[parseInt(c.toString(),10)],"e-childgrid").ej2_instances[0];d=f.getRowObjectFromUID(i[parseInt(c.toString(),10)].getAttribute("data-uid")),h=f.getIndentCount(),p=!0}if(d&&d.isDataRow&&!u(d.index)&&!i[parseInt(c.toString(),10)].classList.contains("e-editedrow"))for(var g=0;g<d[""+s].length;g++){var m=d[""+s][parseInt(g.toString(),10)];if(m.isTemplate){var v=new kt(this,this.serviceLocator),y=r?i[parseInt(c.toString(),10)].children[m.index+(p?h:l)]:this.getCellFromIndex(c,n?m.index:g-l);v.refreshTD(y,m,d.data,{index:d[""+a]})}}p=!1}},e.prototype.refreshGroupCaptionFooterTemplate=function(){for(var i=!!(this.childGrid&&this.element.querySelectorAll(".e-childgrid").length),r=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),n=0;n<r.length;n++){var s=this,a=this.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"));if(i&&!a&&T(r[parseInt(n.toString(),10)],"e-childgrid")&&(s=T(r[parseInt(n.toString(),10)],"e-childgrid").ej2_instances[0],a=s.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"))),a){var l=a.cells.filter(function(p){return p.isDataCell}),h={cells:l,data:a.data,dataUid:a.uid};s.notify($u,h)}}},e.prototype.refreshReactHeaderTemplateByUid=function(i){if(this.isReact)for(var r="cells",n=this.headerModule.rows,s=this.getNormalizedColumnIndex(i),a=function(p){var c=n[parseInt(p.toString(),10)][""+r][parseInt(s.toString(),10)];if(c&&c.column.uid===i){var d=new Dl(l,l.serviceLocator),f=T(l.element.querySelectorAll("[e-mappinguid="+i+"]")[0],"e-templatecell");d.refresh(c,f);var g=l.sortSettings.columns,m=g.findIndex(function(R){return R.field===c.column.field});if(m!==-1){var v=l.getColumnHeaderByField(c.column.field);l.ariaService.setSort(v,g[parseInt(m.toString(),10)].direction.toLowerCase()),g.length>1&&v.querySelector(".e-headercelldiv").insertBefore(l.createElement("span",{className:"e-sortnumber",innerHTML:(m+1).toString()}),v.querySelector(".e-headertext"));var y=v.querySelector(".e-sortfilterdiv");g[parseInt(m.toString(),10)].direction==="Ascending"?ve(y,["e-ascending","e-icon-ascending"],[]):ve(y,["e-descending","e-icon-descending"],[])}}},l=this,h=0;h<n.length;h++)a(h)},e.prototype.setRowData=function(i,r){var n="uid",s=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(s=s.filter(function(c){return c.isDataRow}));var l=s.filter(function(c){return oe(a,c.data)===i})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l[""+n]+"]")):void 0;if(!u(l)&&h.length){if(l.changes=r,this.frozenRows){var p=this.getRowsObject()[l.index];this.setFrozenRowData(p,r)}else this.setFrozenRowData(l,r);this.aggregates.length>0&&(this.notify(ms,{}),this.groupSettings.columns.length>0&&this.notify(sa,{}))}else return},e.prototype.setFrozenRowData=function(i,r){var n=new br(this.serviceLocator,null,this);i.changes=r,Td(i,this.getForeignKeyColumns(),i.changes),n.refresh(i,this.getColumns(),!0)},e.prototype.getCellFromIndex=function(i,r){var n=this.getColumnByIndex(r);return Vd(this,n,i,r)},e.prototype.getMovableCellFromIndex=function(i,r){return this.getCellFromIndex(i,r)},e.prototype.getFrozenRightCellFromIndex=function(i,r){return this.getCellFromIndex(i,r)},e.prototype.getColumnHeaderByIndex=function(i){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(i.toString(),10)]},e.prototype.getMovableColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},e.prototype.getFrozenRightColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},e.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.getColumnHeaderByIndex(i)},e.prototype.getRowObjectFromUID=function(i){var r=this.contentModule.getRows(),n=this.rowObject(r,i);return u(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(n=this.rowObject(this.vRows,i)),n},e.prototype.rowObject=function(i,r){if(i)for(var n=0,s=i;n<s.length;n++){var a=s[n];if(a.uid===r)return a}return null},e.prototype.getRowsObject=function(){return this.contentModule.getRows()},e.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},e.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},e.prototype.getColumnHeaderByField=function(i){var r=this.getColumnByField(i);return r?this.getColumnHeaderByUid(r.uid):void 0},e.prototype.getColumnHeaderByUid=function(i){var r=this.getHeaderContent().querySelector("[e-mappinguid="+i+"]");return r?r.parentElement:void 0},e.prototype.getColumnByIndex=function(i){var r;return this.getColumns().some(function(n,s){return r=n,s===i}),r},e.prototype.getColumnByField=function(i){return qi(this.getColumns(),function(r){if(r.field===i)return r})[0]},e.prototype.getColumnIndexByField=function(i){for(var r=this.getColumns(),n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].field===i)return n;return-1},e.prototype.getColumnByUid=function(i,r){var n=r?this.columns:this.getColumns();return qi(n.concat(this.getStackedColumns(this.columns)),function(s){if(s.uid===i)return s})[0]},e.prototype.getStackedColumns=function(i,r){r===void 0&&(r=[]);for(var n=0,s=i;n<s.length;n++){var a=s[n];a.columns&&(r.push(a),this.getStackedColumns(a.columns,r))}return r},e.prototype.getColumnIndexByUid=function(i){var r=qi(this.getColumns(),function(n,s){if(n.uid===i)return s})[0];return u(r)?-1:r},e.prototype.getUidByColumnField=function(i){return qi(this.getColumns(),function(r){if(r.field===i)return r.uid})[0]},e.prototype.getNormalizedColumnIndex=function(i){var r=this.getColumnIndexByUid(i);return r+this.getIndentCount()},e.prototype.getIndentCount=function(){var i=0;return this.allowGrouping&&(i+=this.groupSettings.columns.length),this.isDetail()&&i++,this.isRowDragable()&&u(this.rowDropSettings.targetID)&&i++,i},e.prototype.getColumnFieldNames=function(){for(var i=[],r,n=0,s=this.getColumns().length;n<s;n++)r=this.getColumns()[parseInt(n.toString(),10)],r.visible&&i.push(r.field);return i},e.prototype.getRowTemplate=function(){return this.rowTemplateFn},e.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},e.prototype.getDetailTemplate=function(){return this.detailTemplateFn},e.prototype.getEditTemplate=function(){return this.editTemplateFn},e.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},e.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},e.prototype.getColumnChooserTemplate=function(){return this.columnChooserTemplateFn},e.prototype.getColumnChooserHeaderTemplate=function(){return this.columnChooserHeaderTemplateFn},e.prototype.getColumnChooserFooterTemplate=function(){return this.columnChooserFooterTemplateFn},e.prototype.getPrimaryKeyFieldNames=function(){for(var i=[],r=0;r<this.columnModel.length;r++)this.columnModel[parseInt(r.toString(),10)].isPrimaryKey&&i.push(this.columnModel[parseInt(r.toString(),10)].field);return i},e.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},e.prototype.refreshHeader=function(){this.headerModule.refreshUI()},e.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},e.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},e.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},e.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},e.prototype.getSelectedColumnsUid=function(){var i=this,r=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(n){return r.push(i.getColumns()[parseInt(n.toString(),10)].uid)}),r},e.prototype.getDataModule=function(){return this.renderModule.data},e.prototype.showColumns=function(i,r){r=r||"headerText",this.showHider.show(i,r)},e.prototype.hideColumns=function(i,r){r=r||"headerText",this.showHider.hide(i,r)},e.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},e.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},e.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},e.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},e.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var i=this.getColumns(),r=!0,n=0,s=0,a=0,l=i.some(function(d){return(d.freeze==="Left"||d.freeze==="Right"||d.freeze==="Fixed"||d.isFrozen)&&d.width==="auto"}),h=function(d){var f=i[parseInt(d.toString(),10)];if(u(f.width)&&(f.freeze==="Left"||f.freeze==="Right"||f.freeze==="Fixed"||f.isFrozen)&&(f.width=Math.max(200,f.minWidth?parseFloat(f.minWidth.toString()):0),!u(f.maxWidth)&&parseFloat(f.maxWidth.toString())<f.width&&(f.width=f.maxWidth)),f.width==="auto"&&l){var g=0;if(r){i.filter(function(v){if(v.visible&&(v.width==="auto"&&n++,v.width!=="auto")){var y=u(v.width)?Math.max(200,v.minWidth?parseFloat(v.minWidth.toString()):0):parseFloat(v.width.toString());g+=y}});var m=p.isPercentageWidthGrid()||p.width==="auto"?p.element.getBoundingClientRect().width:parseFloat(p.width.toString());s=p.height==="auto"?m-g:m-g-Tt(),s<0&&(s=0),a=parseFloat((s/n).toString()),i.filter(function(v){v.visible&&v.minWidth&&parseFloat(v.minWidth.toString())>a&&(s=s-parseFloat(v.minWidth.toString()),n--)}),r=!1}f.minWidth&&parseFloat(f.minWidth.toString())>a?f.width=parseFloat(f.minWidth.toString()):f.width=s/n}},p=this,c=0;c<i.length;c++)h(c)},e.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns),this.updateFrozenColumnsWidth(),this.isAutoGenerateColumns=!0},e.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.fixedColumns=[],this.splitFrozenCount(this.columns),this.leftcount=this.frozenLeftCount,this.rightcount=this.frozenRightCount,this.movablecount=this.movableCount,this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount?this.frozenName="Left-Right":this.frozenColumns||this.frozenRows?this.frozenName="Left":this.frozenName=void 0},e.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},e.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},e.prototype.getVisibleMovableCount=function(){return this.visibleMovable},e.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},e.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},e.prototype.getMovableColumns=function(){return this.movableColumns},e.prototype.splitStackedColumns=function(i){for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns?this.splitStackedColumns(i[parseInt(r.toString(),10)].columns):i[parseInt(r.toString(),10)].freeze==="Left"||i[parseInt(r.toString(),10)].isFrozen?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.leftcount++):i[parseInt(r.toString(),10)].freeze==="Right"?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.rightcount++):i[parseInt(r.toString(),10)].freeze==="Fixed"?(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenFixed++,this.fixedcount++):(i[parseInt(r.toString(),10)].visible!==!1&&this.visibleMovable++,this.movablecount++)},e.prototype.pushStackedColumns=function(i,r,n,s,a){n[parseInt(r.toString(),10)]={headerText:s.headerText},s.textAlign&&(n[parseInt(r.toString(),10)].textAlign=s.textAlign),s.customAttributes&&(n[parseInt(r.toString(),10)].customAttributes=s.customAttributes);for(var l=0;l<i.length;l++)if(i[parseInt(l.toString(),10)].columns)r=r+1,this.pushStackedColumns(i[parseInt(l.toString(),10)].columns,r,n,i[parseInt(l.toString(),10)],a),r=r-1;else{var h=[];h=n.slice().slice(0,r+1),i[parseInt(l.toString(),10)].freeze==="Left"||i[parseInt(l.toString(),10)].isFrozen?(this.stackedLeft.push(h),this.stackedarrayLeft.push(i[parseInt(l.toString(),10)])):i[parseInt(l.toString(),10)].freeze==="Right"?(this.stackedRight.push(h),this.stackedarrayRight.push(i[parseInt(l.toString(),10)])):i[parseInt(l.toString(),10)].freeze==="Fixed"?(this.stackedFixed.push(h),this.stackedarrayFixed.push(i[parseInt(l.toString(),10)])):(this.stackedMovable.push(h),this.stackedarrayMovable.push(i[parseInt(l.toString(),10)]))}},e.prototype.pushallcol=function(i,r,n,s,a){if(n.headerText===r.headerText)if(a)n.columns.push(s);else{var l={headerText:i.headerText,columns:[]};i.textAlign&&(l.textAlign=i.textAlign),i.customAttributes&&(l.customAttributes=i.customAttributes),n.columns.push(l)}else if(n.columns&&n.columns.length)for(var h=0;h<n.columns.length;h++)this.pushallcol(i,r,n.columns[parseInt(h.toString(),10)],s,a)},e.prototype.resetStackedColumns=function(i,r,n){for(var s={},a=[],l=1;l<=i.length;l++)for(var h=i[l-1],p=0;p<h.length;p++)if(!s.columns&&l===1?(s={headerText:h[parseInt(p.toString(),10)].headerText,textAlign:h[parseInt(p.toString(),10)].textAlign,customAttributes:h[parseInt(p.toString(),10)].customAttributes,columns:[]},a.push(h[parseInt(p.toString(),10)])):a.indexOf(h[parseInt(p.toString(),10)])===-1&&(this.pushallcol(h[parseInt(p.toString(),10)],h[p-1],s),a.push(h[parseInt(p.toString(),10)])),p===h.length-1){this.pushallcol(null,h[parseInt(p.toString(),10)],s,r[l-1],!0);for(var c=0;c!==i.length-1&&l!==i.length;){var d=h.map(function(g){return g.headerText}).join(", "),f=i[parseInt(l.toString(),10)].map(function(g){return g.headerText}).join(", ");d===f&&(l++,this.pushallcol(null,h[parseInt(p.toString(),10)],s,r[l-1],!0)),c++}}n==="Left"?this.frozenLeftColumns.push(s):n==="Right"?this.frozenRightColumns.push(s):this.movableColumns.push(s)},e.prototype.splitFrozenCount=function(i){if(this.frozenColumns||this.changedProperties&&this.changedProperties.frozenColumns===0){var r=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns;if(!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns)for(var n=0;n<r.length;n++)this.frozenColumns>n?r[parseInt(n.toString(),10)].freeze="Left":r[parseInt(n.toString(),10)].freeze==="Right"||r[parseInt(n.toString(),10)].freeze==="Fixed"?r[parseInt(n.toString(),10)].freeze=r[parseInt(n.toString(),10)].freeze:r[parseInt(n.toString(),10)].freeze=void 0}for(var n=0;n<(u(i)?0:i.length);n++)if(i[parseInt(n.toString(),10)].columns){this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0;var s=[];this.splitStackedColumns(i[parseInt(n.toString(),10)].columns),this.leftcount&&!this.rightcount&&!this.movablecount&&!this.fixedcount?(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(i[parseInt(n.toString(),10)])):this.rightcount&&!this.leftcount&&!this.movablecount&&!this.fixedcount?(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(i[parseInt(n.toString(),10)])):this.movablecount&&!this.leftcount&&!this.rightcount&&!this.fixedcount?(this.movableCount+=this.movablecount,this.movableColumns.push(i[parseInt(n.toString(),10)])):this.fixedcount&&!this.leftcount&&!this.rightcount&&!this.movablecount?(this.fixedCount+=this.fixedcount,this.fixedColumns.push(i[parseInt(n.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(i[parseInt(n.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(i[parseInt(n.toString(),10)].columns,0,s,i[parseInt(n.toString(),10)],{headerText:i[parseInt(n.toString(),10)].headerText,textAlign:i[parseInt(n.toString(),10)].textAlign,customAttributes:i[parseInt(n.toString(),10)].customAttributes,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[])}else i[parseInt(n.toString(),10)].freeze==="Right"?(i[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.frozenRightColumns.push(i[parseInt(n.toString(),10)]),this.frozenRightCount++):i[parseInt(n.toString(),10)].freeze==="Left"||i[parseInt(n.toString(),10)].isFrozen?(i[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(i[parseInt(n.toString(),10)]),this.frozenLeftCount++):i[parseInt(n.toString(),10)].freeze==="Fixed"?(this.fixedColumns.push(i[parseInt(n.toString(),10)]),this.fixedCount++,this.movableColumns.push(i[parseInt(n.toString(),10)]),this.movableCount++):(i[parseInt(n.toString(),10)].visible!==!1&&this.visibleMovable++,this.movableColumns.push(i[parseInt(n.toString(),10)]),this.movableCount++);if(this.frozenLeftColumns.length){var r=this.frozenLeftColumns[this.frozenLeftColumns.length-1];this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(r instanceof tt?this.lastVisibleLeftCol(this.frozenLeftColumns):r)}if(this.frozenRightColumns.length){var r=this.frozenRightColumns[0];this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(r instanceof tt?this.firstVisibleRightCol(this.frozenRightColumns):r)}if((this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh){var r=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns);this.setProperties({columns:r},!0),this.freezeColumnRefresh=!1}},e.prototype.removeBorder=function(i){for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].columns&&i[parseInt(r.toString(),10)].columns.length?((i[parseInt(r.toString(),10)].border==="Right"||i[parseInt(r.toString(),10)].border==="Left")&&(i[parseInt(r.toString(),10)].border=void 0),this.removeBorder(i[parseInt(r.toString(),10)].columns)):(i[parseInt(r.toString(),10)].border==="Right"||i[parseInt(r.toString(),10)].border==="Left")&&(i[parseInt(r.toString(),10)].border=void 0)},e.prototype.isVisibleColumns=function(i,r){if(i.columns&&i.columns.length)for(var n=0;n<i.columns.length;n++)this.isVisibleColumns(i.columns[parseInt(n.toString(),10)],r),i.columns[parseInt(n.toString(),10)].visible&&u(i.columns[parseInt(n.toString(),10)].columns)&&(!u(i.columns[parseInt(n.toString(),10)].freeze)||i.columns[parseInt(n.toString(),10)].isFrozen)&&r.push("true");else i.visible&&(!u(i.freeze)||i.isFrozen)&&r.push("true")},e.prototype.lastVisibleLeftCol=function(i){for(var r,n=i.length-1;n>=0;n--){var s=[];if(this.isVisibleColumns(i[parseInt(n.toString(),10)],s),i[parseInt(n.toString(),10)].visible&&s.indexOf("true")!==-1){r=i[parseInt(n.toString(),10)];break}}return r},e.prototype.firstVisibleRightCol=function(i){for(var r,n=0;n<i.length;n++){var s=[];if(this.isVisibleColumns(i[parseInt(n.toString(),10)],s),i[parseInt(n.toString(),10)].visible&&s.indexOf("true")!==-1){r=i[parseInt(n.toString(),10)];break}}return r},e.prototype.frozenLeftBorderColumns=function(i){if(!u(i))if(i.columns&&i.columns.length){i.border="Left";var r=i.columns[i.columns.length-1];this.frozenLeftBorderColumns(r instanceof tt&&r.columns?this.lastVisibleLeftCol(i.columns):r)}else i.border="Left"},e.prototype.frozenRightBorderColumns=function(i){if(!u(i))if(i.columns&&i.columns.length){i.border="Right";var r=i.columns[0];this.frozenRightBorderColumns(r instanceof tt&&r.columns?this.firstVisibleRightCol(i.columns):r)}else i.border="Right"},e.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},e.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},e.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,r=this.columnModel,n=0;n<this.frozenColumns;n++)r[parseInt(n.toString(),10)].visible&&i++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible&&(r[parseInt(n.toString(),10)].freeze==="Left"||r[parseInt(n.toString(),10)].freeze==="Right")&&i++;return i},e.prototype.getVisibleFrozenCount=function(i,r){if(!this.frozenLeftCount&&!this.leftcount&&(!this.frozenRightCount||!this.rightcount))for(var n=0,s=i.length;n<s;n++)i[parseInt(n.toString(),10)].columns?r=this.getVisibleFrozenCount(i[parseInt(n.toString(),10)].columns,r):i[parseInt(n.toString(),10)].isFrozen&&i[parseInt(n.toString(),10)].visible&&r++;return r},e.prototype.getFrozenCount=function(i,r,n){for(var s=0,a=u(i)?0:i.length;s<a;s++)i[parseInt(s.toString(),10)].columns?r=this.getFrozenCount(i[parseInt(s.toString(),10)].columns,r,n):(i[parseInt(s.toString(),10)].isFrozen&&n>this.frozenColumns-1&&r++,n++);return r},e.prototype.goToPage=function(i){this.pagerModule&&this.pagerModule.goToPage(i)},e.prototype.updateExternalMessage=function(i){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(i)},e.prototype.sortColumn=function(i,r,n){this.sortModule&&this.sortModule.sortColumn(i,r,n)},e.prototype.changeDataSource=function(i,r){this.isChangeDataSourceCall=!0,this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0),r&&r.length&&this.setProperties({columns:r},!0),i&&(u(r)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:i},!0)),this.freezeRefresh(),this.isChangeDataSourceCall=!1},e.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},e.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},e.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},e.prototype.filterByColumn=function(i,r,n,s,a,l,h,p){this.filterModule&&this.filterModule.filterByColumn(i,r,n,s,a,l,h,p)},e.prototype.clearFiltering=function(i){this.filterModule&&this.filterModule.clearFiltering(i)},e.prototype.removeFilteredColsByField=function(i,r){this.filterModule&&this.filterModule.removeFilteredColsByField(i,r)},e.prototype.selectRow=function(i,r){this.selectionModule&&this.selectionModule.selectRow(i,r)},e.prototype.selectRows=function(i){this.selectionModule&&this.selectionModule.selectRows(i)},e.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},e.prototype.selectCell=function(i,r){this.selectionModule&&this.selectionModule.selectCell(i,r)},e.prototype.selectCellsByRange=function(i,r){this.selectionModule.selectCellsByRange(i,r)},e.prototype.search=function(i){this.searchModule&&this.searchModule.search(i)},e.prototype.print=function(){this.printModule&&this.printModule.print()},e.prototype.deleteRecord=function(i,r){this.editModule&&this.editModule.deleteRecord(i,r)},e.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},e.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},e.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},e.prototype.addRecord=function(i,r){this.editModule&&this.editModule.addRecord(i,r)},e.prototype.deleteRow=function(i){this.editModule&&this.editModule.deleteRow(i)},e.prototype.editCell=function(i,r){this.editModule&&this.editModule.editCell(i,r)},e.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},e.prototype.updateCell=function(i,r,n){this.editModule&&this.editModule.updateCell(i,r,n)},e.prototype.updateRow=function(i,r){this.editModule&&this.editModule.updateRow(i,r)},e.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},e.prototype.enableToolbarItems=function(i,r){this.toolbarModule&&this.toolbarModule.enableItems(i,r)},e.prototype.copy=function(i){this.clipboardModule&&this.clipboardModule.copy(i)},e.prototype.recalcIndentWidth=function(){var i=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&!(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell.e-indentRefreshed")||!this.getContentTable())){var r=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,n=[].slice.call(this.getHeaderTable().querySelector(Ot).childNodes),s=[].slice.call(this.getContentTable().querySelector(Ot).childNodes),a=r/30,l=this.getFrozenMode()==="Right"?this.groupSettings.columns.length+this.getColumns().length:0,h=this.element.offsetWidth,p=function(c,d){if(zs(i)){var f=(d/h*100).toFixed(1)+"%";n[parseInt(c.toString(),10)].style.width=f,s[parseInt(c.toString(),10)].style.width=f}else n[parseInt(c.toString(),10)].style.width=d+"px",s[parseInt(c.toString(),10)].style.width=d+"px";i.notify(yl,{index:c,width:d})};for(a>=1&&(r=30/a),r<1&&(r=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(r=30);l<this.groupSettings.columns.length;)p(l,r),l++;this.isDetail()&&(p(l,r),l++),this.isRowDragable()&&p(l,r),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").classList.add("e-indentRefreshed")}},e.prototype.resetIndentWidth=function(){if(!this.isDestroyed){if(zs(this)&&(this.getHeaderTable().querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit&&this.preventAdjustColumns()),(this.width==="auto"||typeof this.width=="string"&&this.width.indexOf("%")!==-1)&&this.getColumns().filter(function(r){return(!r.width||r.width==="auto")&&r.minWidth}).length>0){var i=this.widthService.getTableWidth(this.getColumns(),!0);this.widthService.setMinwidthBycalculation(i)}this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&this.textWrapSettings.wrapMode!=="Content"&&this.notify(rs,{}),this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder(),this.enableStickyHeader&&this.scrollModule.makeStickyHeader(),this.enableAutoFill&&this.selectionSettings.type==="Multiple"&&this.selectionSettings.mode==="Cell"&&this.selectionModule.selectedRowCellIndexes.length&&(this.selectionModule.updateAutoFillPosition(),this.selectionModule.drawBorders())}},e.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},e.prototype.reorderColumns=function(i,r){this.reorderModule&&this.reorderModule.reorderColumns(i,r)},e.prototype.reorderColumnByIndex=function(i,r){this.reorderModule&&this.reorderModule.reorderColumnByIndex(i,r)},e.prototype.reorderColumnByTargetIndex=function(i,r){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(i,r)},e.prototype.reorderRows=function(i,r){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(i,r)},e.prototype.refreshDataSource=function(i){this.notify("refreshdataSource",i)},e.prototype.disableRowDD=function(i){var r=this.getHeaderTable(),n=this.getContentTable(),s=r.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),a=this.getRows(),l=i?"none":"";nt(r.querySelector(Ot).childNodes[0],{display:l}),nt(n.querySelector(Ot).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var p=a[parseInt(h.toString(),10)].firstElementChild;i?B([p],"e-hide"):G([p],["e-hide"])}for(var c=0;c<r.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;c++){var p=s[parseInt(c.toString(),10)];i?B([p],"e-hide"):G([p],["e-hide"])}},e.prototype.autoFitColumns=function(i,r,n){var s=this.getInjectedModules(),a=s.find(function(l){return typeof l=="function"&&!u(l.prototype)?l.prototype.getModuleName()==="resize":l.name==="Resize"});!this.resizeModule&&a&&(this.autoFitColumnsResize=!0,this.injectModules()),this.resizeModule&&this.resizeModule.autoFitColumns(i,r,n)},e.prototype.preventAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){for(var i=this.getColumns(),r=this.getHeaderTable(),n=0,s=0;s<i.length;s++)if(i[parseInt(s.toString(),10)].visible){if(this.groupSettings.columns.length&&this.groupSettings.columns.indexOf(i[parseInt(s.toString(),10)].field)>-1){var a=[].slice.call(r.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"));if(a[parseInt(s.toString(),10)].style.display==="none")continue}if(i[parseInt(s.toString(),10)].width)n+=parseFloat(i[parseInt(s.toString(),10)].width.toString());else{n=0;break}}if(n){var l=this.isPercentageWidthGrid(),h=this.widthUnit(l),p=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())for(var c=this.defaultIndentWidth(l),d=c.toString()+h,f=[].slice.call(r.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),g=[].slice.call(p.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),s=0;s<f.length;s++)f[parseInt(s.toString(),10)].style.setProperty("width",d),g[parseInt(s.toString(),10)].style.setProperty("width",d),n+=c;(l&&n<100||!l&&n<p.parentElement.clientWidth)&&(u(p.querySelector(".e-emptyrow"))?B([r,p],["e-tableborder"]):(B([r],["e-tableborder"]),G([p],["e-tableborder"])));var m=n.toString()+h;r.style.setProperty("width",m),p.style.setProperty("width",m)}else this.restoreAdjustColumns()}},e.prototype.restoreAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){var i=this.getHeaderTable(),r=this.getContentTable();if(G([i,r],["e-tableborder"]),i.style.removeProperty("width"),r.style.removeProperty("width"),this.groupSettings.columns.length||this.isDetail()||this.isRowDragable()){var n=this.isPercentageWidthGrid(),s=this.defaultIndentWidth(n).toString()+this.widthUnit(n),a=[].slice.call(i.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));a.forEach(function(l){l.style.setProperty("width",s)}),i.querySelector(".e-emptycell").classList.remove("e-indentRefreshed"),this.recalcIndentWidth()}}},e.prototype.widthUnit=function(i){return i?"%":"px"},e.prototype.defaultIndentWidth=function(i){return i?parseFloat((30/this.element.offsetWidth*100).toFixed(1)):30},e.prototype.isPercentageWidthGrid=function(){var i=this.getColumns().find(function(r){return!u(r.width)});return i?i.width.toString().indexOf("%")>-1:!1},e.prototype.createColumnchooser=function(i,r,n){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(i,r,n)},e.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new so(this)),this.serviceLocator.register("cellRendererFactory",new Oc),this.serviceLocator.register("rendererFactory",new Nc),this.serviceLocator.register("localization",this.localeObj=new $i(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Lr(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Yc(this)),this.serviceLocator.register("ariaService",this.ariaService=new kl),this.serviceLocator.register("focus",this.focusModule=new qc(this))},e.prototype.processModel=function(){var i=this.groupSettings.columns,r=this.sortSettings.columns,n,s;if(this.allowGrouping)for(var a=function(d,f){n=!1,s=0;for(var g=r.length;s<g;s++)if(r[parseInt(s.toString(),10)].field===i[parseInt(d.toString(),10)]){n=!0;break}if(n?l.allowSorting?l.sortedColumns.push(r[parseInt(s.toString(),10)].field):r[parseInt(s.toString(),10)].direction="Ascending":r.push({field:i[parseInt(d.toString(),10)],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var m=l.enableColumnVirtualization?l.columns.filter(function(v){return v.field===i[parseInt(d.toString(),10)]})[0]:l.getColumnByField(i[parseInt(d.toString(),10)]);m?m.visible=!1:l.log("initial_action",{moduleName:"group",columnName:i[parseInt(d.toString(),10)]})}},l=this,h=0,p=i.length;h<p;h++)a(h,p);if(!i.length)for(var h=0;h<r.length;h++)this.sortedColumns.push(r[parseInt(h.toString(),10)].field);if(this.rowTemplateFn=qe(this.rowTemplate),this.emptyRecordTemplateFn=qe(this.emptyRecordTemplate),this.detailTemplateFn=qe(this.detailTemplate),this.editTemplateFn=qe(this.editSettings.template),this.editHeaderTemplateFn=qe(this.editSettings.headerTemplate),this.editFooterTemplateFn=qe(this.editSettings.footerTemplate),this.columnChooserTemplateFn=qe(this.columnChooserSettings.template),this.columnChooserHeaderTemplateFn=qe(this.columnChooserSettings.headerTemplate),this.columnChooserFooterTemplateFn=qe(this.columnChooserSettings.footerTemplate),!u(this.parentDetails)){var c=u(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",c,!0)}this.initForeignColumn()},e.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(pp,this.getForeignKeyColumns())},e.prototype.enableVerticalRendering=function(){this.rowRenderingMode==="Vertical"?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},e.prototype.gridRender=function(){var i;this.updateRTL(),this.rowRenderingMode==="Vertical"&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||K.isSafari())&&this.element.classList.add("e-mac-safari"),K.isDevice&&(this.element.classList.add("e-device"),this.adaptiveUIMode==="Desktop"&&(this.enableAdaptiveUI=!1)),this.adaptiveUIMode==="Mobile"&&!(K.isDevice||this.rowRenderingMode==="Vertical")&&(this.enableAdaptiveUI=!1),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?(i=this.element.classList).add.apply(i,this.cssClass.split(" ")):this.element.classList.add(this.cssClass)),this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&K.info.name==="mozilla"&&this.element.classList.add("e-disableuserselect"),this.editSettings.showAddNewRow&&(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.editSettings.newRowPosition="Top"),ve(this.element,["e-responsive","e-default"],[]);var r=this.serviceLocator.getService("rendererFactory");this.headerModule=r.getRenderer(Ft.Header),this.contentModule=r.getRenderer(Ft.Content),this.printModule=new zl(this,this.scrollModule),this.clipboardModule=new Zc(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},e.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.height!=="auto"&&this.scrollModule.setPadding()},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.createGridPopUpElement=function(){var i=this.createElement("div",{className:"e-gridpopup"});i.style.display="none";var r=this.createElement("div",{className:ot,attrs:{tabIndex:"-1"}});Te([r,this.createElement("div",{className:"e-uptail e-tail"})],i),r.appendChild(this.createElement("span")),Te([r,this.createElement("div",{className:"e-downtail e-tail"})],i),this.element.appendChild(i)},e.prototype.updateGridLines=function(){switch(ve(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines");break}this.updateResizeLines()},e.prototype.updateResizeLines=function(){this.allowResizing&&!(this.gridLines==="Vertical"||this.gridLines==="Both")?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},e.prototype.applyTextWrap=function(){if(this.allowTextWrap){var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":xt(this.element,!1),xt(this.getContent(),!1),xt(i,!0);break;case"Content":xt(this.getContent(),!0),xt(this.element,!1),xt(i,!1);break;default:xt(this.element,!0),xt(this.getContent(),!1),xt(i,!1)}this.textWrapSettings.wrapMode!=="Content"&&this.notify(rs,{})}},e.prototype.removeTextWrap=function(){xt(this.element,!1);var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));xt(i,!1),xt(this.getContent(),!1),this.textWrapSettings.wrapMode!=="Content"&&this.notify(rs,{})},e.prototype.createTooltip=function(){this.toolTipObj=new Wh({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},e.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1),this.componentRefresh()},e.prototype.getTooltipStatus=function(i){var r=this.getHeaderTable(),n=this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"?"e-gridcontent":"e-gridheader",s=this.createTable(r,n,"header"),a=this.createTable(r,n,"content"),l=i.classList.contains("e-headercell")?s:a,h=i.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=i.className;var p=l.querySelector(h);p.innerHTML="",Array.from(i.childNodes).forEach(function(d){p.appendChild(d.cloneNode(!0))});var c=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(s),document.body.removeChild(a),!!(c>i.getBoundingClientRect().width&&!i.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"&&c>i.getBoundingClientRect().width*.55-(this.height!=="auto"?16:0))},e.prototype.mouseMoveHandler=function(i){if(this.isEllipsisTooltip()){var r=T(i.target,"e-ellipsistooltip");i.type==="mouseout"&&(this.prevElement!==r||r!==T(i.relatedTarget,"e-ellipsistooltip"))&&(this.toolTipObj.close(),this.prevElement=null);var n=i.target.tagName,s=["A","BUTTON","INPUT"];if(r&&i.type!=="mouseout"&&!(K.isDevice&&s.indexOf(n)!==-1)&&this.getTooltipStatus(r)){var a=this.getColumns()[parseInt(r.getAttribute(je),10)-1],l=a&&a.disableHtmlEncode?"innerText":"innerHTML",h=this.createElement("div");if(r.getElementsByClassName("e-headertext").length){var p=r.getElementsByClassName("e-headertext")[0];h[""+l]=this.sanitize(p.innerText),this.toolTipObj.content=h}else h[""+l]=this.sanitize(r.innerText),this.toolTipObj.content=h;this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0),a&&a.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),r!==this.prevElement&&this.toolTipObj.open(r),this.prevElement=r}}},e.prototype.isEllipsisTooltip=function(){var i=this.getColumns();if(this.clipMode==="EllipsisWithTooltip")return!0;for(var r=0;r<i.length;r++)if(i[parseInt(r.toString(),10)].clipMode==="EllipsisWithTooltip")return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},e.prototype.createTable=function(i,r,n){var s=this.createElement("div");s.className=this.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";var a=this.createElement("div");a.className=r;var l=this.createElement("table");l.className=i.className,l.style.cssText="table-layout: auto;width: auto";var h=n==="header"?"th":"td",p=this.createElement("tr",{attrs:{role:"row"}}),c=this.createElement(h);return p.appendChild(c),l.appendChild(p),a.appendChild(l),s.appendChild(a),document.body.appendChild(s),s},e.prototype.onKeyPressed=function(i){(i.action==="tab"||i.action==="shiftTab")&&this.toolTipObj.close()},e.prototype.wireEvents=function(){x.add(this.element,"click",this.mouseClickHandler,this),x.add(this.element,"touchend",this.mouseClickHandler,this),x.add(this.element,"focusout",this.focusOutHandler,this),x.add(this.element,"dblclick",this.dblClickHandler,this),x.add(this.element,"keydown",this.keyPressHandler,this),x.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=this.element.tabIndex===-1?0:this.element.tabIndex),this.keyboardModule=new pr(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),x.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),x.add(this.element,"mouseover",this.mouseMoveHandler,this),x.add(this.element,"mouseout",this.mouseMoveHandler,this),x.add(this.getContent(),"touchstart",this.tapEvent,this),x.add(document.body,"keydown",this.keyDownHandler,this)},e.prototype.unwireEvents=function(){x.remove(this.element,"click",this.mouseClickHandler),x.remove(this.element,"touchend",this.mouseClickHandler),x.remove(this.element,"focusout",this.focusOutHandler),x.remove(this.element,"dblclick",this.dblClickHandler),x.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),x.remove(this.element,"mouseover",this.mouseMoveHandler),x.remove(this.element,"mouseout",this.mouseMoveHandler),x.remove(this.element,"keydown",this.keyPressHandler),x.remove(this.getContent(),"touchstart",this.tapEvent),x.remove(document.body,"keydown",this.keyDownHandler),x.remove(window,"resize",this.resetIndentWidth)},e.prototype.addListener=function(){this.isDestroyed||(this.on(er,this.dataReady,this),this.on(Xe,this.recalcIndentWidth,this),this.on(vi,this.recalcIndentWidth,this),this.on(vn,this.refreshFrozenPosition,this),this.on(Fs,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Ti,this.dataBoundFunction),this.on(Jt,this.onKeyPressed,this))},e.prototype.removeListener=function(){this.isDestroyed||(this.off(er,this.dataReady),this.off(Xe,this.recalcIndentWidth),this.off(vi,this.recalcIndentWidth),this.on(vn,this.refreshFrozenPosition,this),this.on(Fs,this.refreshSplitFrozenColumn,this),this.removeEventListener(Ti,this.dataBoundFunction),this.off(Jt,this.onKeyPressed))},e.prototype.getCurrentViewRecords=function(){return $t(this)?u(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},e.prototype.mouseClickHandler=function(i){if(!(this.isChildGrid(i)||T(i.target,"e-gridpopup")&&i.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(i))&&!((!this.allowRowDragAndDrop&&(T(i.target,yi)||i.target.tagName==="TD")||T(i.target,"e-headercell")&&T(i.target,"e-headercell").querySelector(".e-checkselectall")||!(this.allowGrouping||this.allowReordering)&&T(i.target,"e-gridheader"))&&i.touches)){T(i.target,"e-gridheader")&&this.allowRowDragAndDrop&&!T(i.target,"e-filterbarcell")&&i.target&&["A","BUTTON","INPUT"].indexOf(i.target.tagName)===-1&&i.preventDefault();var r=this.getRowInfo(i.target),n="cancel";r[""+n]=!1;var s=!1,a=Y(i.target,"tr");if(a&&a.getAttribute("data-uid")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid"));s=l?l.isDataRow:!1}s&&this.trigger(Vu,r),this.notify(tr,i)}},e.prototype.checkEdit=function(i){var r=T(i.target,ut),n=this.editSettings.mode!=="Batch"&&this.isEdit&&r&&(r.classList.contains(dr)||r.classList.contains(Ji)&&!this.editSettings.showAddNewRow);return!T(i.target,"e-unboundcelldiv")&&(n||T(i.target,Le)&&T(i.target,Le).classList.contains("e-editedbatchcell"))},e.prototype.dblClickHandler=function(i){var r=T(i.target,"e-grid");if(!(u(r)||r.id!==this.element.id||Y(i.target,".e-unboundcelldiv"))){var n=!1,s=Y(i.target,"tr");if(s&&s.getAttribute("data-uid")){var a=this.getRowObjectFromUID(s.getAttribute("data-uid"));n=a?a.isDataRow:!1}var l=this.getRowInfo(i.target);l.target=i.target,n&&this.trigger(qu,l),this.notify(np,i)}},e.prototype.focusOutHandler=function(i){if(!this.isChildGrid(i)){T(i.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var r=this.element.querySelector(".e-cancel:not(.e-hide)");r&&!r.parentElement.classList.contains("e-tbar-btn")&&r.classList.add("e-hide");var n=i.relatedTarget,s=n?n.getAttribute("aria-owns"):null;(!n||!T(n,"e-grid")&&(!u(s)&&s)!==i.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!K.isDevice&&(this.editSettings.mode==="Batch"&&!((T(n,"e-ddl")||T(n,"e-ddt"))&&(T(n,"e-multi-select-list-wrapper")||T(n,"e-input-filter"))&&T(n,"e-input-group"))&&(T(n,"e-uploader")||!(n&&u(T(n,"e-input-group")))&&!T(i.target,"edit-custom-template"))&&(this.editModule.saveCell(),this.notify(dp,{})),this.editSettings.mode==="Normal"&&!this.isWidgetsDestroyed&&this.editModule.editFormValidate()),this.editSettings.showAddNewRow&&(this.editModule.isShowAddedRowValidate=!1),this.keyPress=!1}},e.prototype.isChildGrid=function(i){var r=T(i.target,"e-grid");return!!(r&&r.id!==this.element.id||T(i.target,"e-unboundcelldiv")&&u(r))},e.prototype.mergePersistGridData=function(i){var r=this.getLocalData();if(!(u(r)||r==="")||!u(i)){var n=u(i)?JSON.parse(r):i,s=Object.keys(n);this.isProtectedOnChange=!0;for(var a=0,l=s;a<l.length;a++){var h=l[a];typeof this[""+h]=="object"&&!u(this[""+h])?Array.isArray(this[""+h])&&h==="columns"?(this.setFrozenCount(),rn(this[""+h]),this.mergeColumns(n[""+h],this[""+h]),this.mergedColumns=!0,this[""+h]=n[""+h]):Q(this[""+h],n[""+h]):this[""+h]=n[""+h]}this.isProtectedOnChange=!1}},e.prototype.mergeColumns=function(i,r){for(var n=i,s=this.isFrozenGrid(),a=function(p){var c=r.filter(function(d){return s?d.index===n[parseInt(p.toString(),10)][""+Ia]:d.index===n[parseInt(p.toString(),10)].index})[0];u(c)||(s&&(c=Q({},c,{},!0),c.freeze=n[parseInt(p.toString(),10)].freeze),c.columns&&c.columns.length?(l.mergeColumns(n[parseInt(p.toString(),10)].columns,c.columns),n[parseInt(p.toString(),10)]=Q(c,n[parseInt(p.toString(),10)],{},!0)):n[parseInt(p.toString(),10)]=Q(c,n[parseInt(p.toString(),10)],{},!0))},l=this,h=0;h<n.length;h++)a(h)},e.prototype.isDetail=function(){return!u(this.detailTemplate)||!u(this.childGrid)},e.prototype.isCommandColumn=function(i){var r=this;return i.some(function(n){return n.columns?r.isCommandColumn(n.columns):!!(n.commands||n.commandsTemplate)})},e.prototype.isForeignKeyEnabled=function(i){var r=this;return i.some(function(n){return n.columns?r.isForeignKeyEnabled(n.columns):!!(n.dataSource&&n.foreignKeyValue)})},e.prototype.keyPressHandler=function(i){var r=Q(i,{cancel:!1});this.trigger("keyPressed",r),(r.cancel===!0||this.isEdit&&i&&T(i.target,"e-gridform")&&T(i.target,"e-ddl")&&i.action==="open"&&i.altKey===!0&&i.code==="ArrowDown")&&i.stopImmediatePropagation()},e.prototype.keyDownHandler=function(i){if(i.altKey){if(i.keyCode===74&&(this.keyA?(this.notify(va,{target:i.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(G([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),i.keyCode===87){var r=this.focusModule;if(r){if(!this.currentViewData.length)return;r.focusContent(),r.addOutline()}}i.keyCode===65&&(this.keyA=!0),i.keyCode===72&&this.keyA&&(this.notify(va,{target:i.target,collapse:!0}),this.keyA=!1)}i.keyCode===13&&this.notify(en,i)},e.prototype.keyActionHandler=function(i){this.isChildGrid(i)||this.editModule&&(this.editModule.alertDObj&&this.editModule.alertDObj.visible||this.editModule.dialogObj&&this.editModule.dialogObj.visible)||this.isEdit&&(!this.editSettings.showAddNewRow||this.editSettings.showAddNewRow&&this.element.querySelector(dr))&&i.action!=="escape"&&i.action!=="enter"&&i.action!=="shiftEnter"&&i.action!=="tab"&&i.action!=="shiftTab"||(this.keyPress=!0,this.allowKeyboard&&(i.action==="ctrlPlusP"&&(i.preventDefault(),this.print()),this.notify(Jt,i)))},e.prototype.setInjectedModules=function(i){this.injectedModules=i},e.prototype.updateColumnObject=function(){Cn(this.columns,this.enableColumnVirtualization,this),rn(this.columns),this.initForeignColumn(),this.notify(Sr,{})},e.prototype.refreshFrozenPosition=function(i){i&&i.isModeChg?(this.refreshColumns(),this.notify(sc,{})):this.refreshColumns()},e.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(i){return i.isForeignColumn()})},e.prototype.getRowHeight=function(i){return this.rowHeight?this.rowHeight:Rd(this.element,i)},e.prototype.refreshColumns=function(){if(this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization){var i=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.getHeaderContent().querySelector("."+st).scrollLeft=i,this.getContent().querySelector("."+ot).scrollLeft=i}},e.prototype.excelExport=function(i,r,n,s){if(this.exportGrids&&this.exportGrids.length){var a=this.exportGrids.slice();return this.exportMultipleExcelGrids(a,i,r,n,s)}else return this.excelExportModule?this.excelExportModule.Map(this,i,r,n,!1,s):null},e.prototype.csvExport=function(i,r,n,s){return this.excelExportModule?this.excelExportModule.Map(this,i,r,n,!0,s):null},e.prototype.pdfExport=function(i,r,n,s){if(this.exportGrids&&this.exportGrids.length){var a=this.exportGrids.slice();return this.exportMultiplePdfGrids(a,i,r,n,s)}else return this.pdfExportModule?this.pdfExportModule.Map(this,i,r,n,s):null},e.prototype.exportMultiplePdfGrids=function(i,r,n,s,a){var l=this;if(i.length!==0){var h=i.shift(),p=document.getElementById(h).ej2_instances[0],c=p.pdfExportModule?p.pdfExportModule.Map(p,r,n,s,a):Promise.resolve();return c.then(function(d){return n=i.length!==1,l.exportMultiplePdfGrids(i,r,n,d,a)})}return null},e.prototype.exportMultipleExcelGrids=function(i,r,n,s,a){var l=this;if(i.length!==0){var h=i.shift(),p=document.getElementById(h).ej2_instances[0],c=p.excelExportModule?p.excelExportModule.Map(p,r,n,s,!1,a):null;return c.then(function(d){return n=i.length!==1,l.exportMultipleExcelGrids(i,r,n,d,a)})}return null},e.prototype.groupColumn=function(i){this.groupModule&&this.groupModule.groupColumn(i)},e.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},e.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},e.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},e.prototype.ungroupColumn=function(i){this.groupModule&&this.groupModule.ungroupColumn(i)},e.prototype.openColumnChooser=function(i,r){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,r)},e.prototype.scrollRefresh=function(){var i=this,r=function(){i.scrollModule.refresh(),i.off(Xe,r)};this.on(Xe,r,this)},e.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},e.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},e.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},e.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},e.prototype.selectCells=function(i){this.selectionModule&&this.selectionModule.selectCells(i)},e.prototype.selectRowsByRange=function(i,r){this.selectionModule&&this.selectionModule.selectRowsByRange(i,r)},e.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},e.prototype.ensureModuleInjected=function(i){return this.getInjectedModules().indexOf(i)>=0},e.prototype.destroyTemplate=function(i,r){this.clearTemplate(i,r)},e.prototype.log=function(i,r){var n=this.getInjectedModules(),s=n.find(function(a){return a.name==="Logger"});s||(t.Inject(ed),this.enableLogger=!0,this.injectModules()),this.loggerModule&&this.loggerModule.log(i,r)},e.prototype.applyBiggerTheme=function(i){this.element.classList.contains("e-bigger")&&i.classList.add("e-bigger")},e.prototype.getPreviousRowData=function(){var i=this.getRowsObject()[this.getRows().length-1].data;return i},e.prototype.hideScroll=function(){var i=this.getContent().querySelector("."+ot);i.scrollHeight<=i.clientHeight&&(this.scrollModule.removePadding(),i.style.overflowY="auto")},e.prototype.getRowIndexByPrimaryKey=function(i){var r=this.getPrimaryKeyFieldNames()[0];i=typeof i=="object"?i[""+r]:i;for(var n=this.getRowsObject(),s=0;s<n.length;s++)if(!(n[parseInt(s.toString(),10)].isDetailRow||n[parseInt(s.toString(),10)].isCaptionRow)){var a=n[parseInt(s.toString(),10)].data[""+r];if(r.split(".").length>1&&(a=_d(r,n[parseInt(s.toString(),10)].data)),a===i)return n[parseInt(s.toString(),10)].index}return-1},e.prototype.grabColumnByFieldFromAllCols=function(i,r){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,a=0;a<s.length;a++)if(!r&&i===s[parseInt(a.toString(),10)].field||r&&s[parseInt(a.toString(),10)].isForeignColumn()&&i===s[parseInt(a.toString(),10)].foreignKeyValue){n=s[parseInt(a.toString(),10)];break}return n},e.prototype.grabColumnByUidFromAllCols=function(i){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,s=0;s<n.length;s++)i===n[parseInt(s.toString(),10)].uid&&(r=n[parseInt(s.toString(),10)]);return r},e.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length){var i=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof _?this.renderModule.data.getData(this.dataSource,i):this.dataSource instanceof _?this.dataSource.executeLocal(i):new _(this.dataSource,i).executeLocal(i)}return[]},e.prototype.getUserAgent=function(){var i=K.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(i)},e.prototype.tapEvent=function(i){this.getUserAgent()&&(Wt.timer?(clearTimeout(Wt.timer),Wt.timer=null,this.dblClickHandler(i),this.notify(lp,i)):Wt.timer=setTimeout(function(){Wt.timer=null},300))},e.prototype.getRowUid=function(i){return""+i+this.rowUid++},e.prototype.getRowElementByUID=function(i){var r,n=[],s=[].slice.call(this.getContent().querySelector(Fe).children);this.frozenRows?(n=[].slice.call(this.getHeaderContent().querySelector(Fe).children),n=n.concat(s)):n=s;for(var a=0,l=n;a<l.length;a++){var h=l[a];if(h.getAttribute("data-uid")===i){r=h;break}}return r},e.prototype.getHiddenColumns=function(){for(var i=[],r=0,n=this.columnModel;r<n.length;r++){var s=n[r];s.visible===!1&&i.push(s)}return i},e.prototype.calculatePageSizeByParentHeight=function(i){if(this.allowPaging&&(this.allowTextWrap&&this.textWrapSettings.wrapMode==="Header"||!this.allowTextWrap)){var r=0;i.indexOf("%")!==-1&&(i=parseInt(i,10)/100*this.element.clientHeight);var n=this.getNoncontentHeight()+this.getRowHeight();if(i>n){var s=0;s=i-this.getNoncontentHeight(),r=s/this.getRowHeight()}if(r>0)return Math.floor(r)}return 0},e.prototype.getNoncontentHeight=function(){var i=0;if(this.getHeaderContent()&&!u(this.getHeaderContent().clientHeight)&&(i+=this.getHeaderContent().clientHeight),this.toolbar&&!u(this.element.querySelector(".e-toolbar").clientHeight)&&(i+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!u(this.element.querySelector(".e-gridpager").clientHeight)&&(i+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!u(this.element.querySelector(".e-columnheader").clientHeight)&&(i+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!u(this.element.querySelector(".e-groupdroparea").clientHeight)&&(i+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!u(this.element.querySelector(".e-summaryrow").clientHeight))for(var r=0;r<this.element.getElementsByClassName("e-summaryrow").length;r++)i+=this.element.getElementsByClassName("e-summaryrow")[parseInt(r.toString(),10)].clientHeight;return i},e.prototype.getSummaryValues=function(i,r){return A.aggregates[i.type.toLowerCase()](r,i.field)},e.prototype.serverExcelExport=function(i,r){this.isExcel=!0,this.exportGrid(i,r)},e.prototype.serverPdfExport=function(i,r){this.isExcel=!1,this.exportGrid(i,r)},e.prototype.serverCsvExport=function(i,r){this.isExcel=!0,this.exportGrid(i,r)},e.prototype.exportGrid=function(i,r){var n=this,s=this,a=s.getDataModule().generateQuery(!0),l=new zt().processQuery(new _({url:""}),a),h=JSON.parse(l.data),p=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),c=["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"];p.filterSettings.columns=h.where,p.searchSettings.fields=h.search&&h.search[0].fields||[],p.sortSettings.columns=h.sorted,p.columns=this.setHeaderText(p.columns,c);var d=this.createElement("form",{id:"ExportForm"});d.style.display="none";var f=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});f.value=JSON.stringify(p),d.method="POST",d.action=i,d.appendChild(f),r&&r.headers&&Array.isArray(r.headers)&&r.headers.forEach(function(g){Object.keys(g).forEach(function(m){var v=typeof g[""+m]=="string"?g[""+m]:JSON.stringify(g[""+m]),y=n.createElement("input",{attrs:{name:m,value:v,type:"hidden"}});d.appendChild(y)})}),document.body.appendChild(d),d.submit(),d.remove()},e.prototype.setHeaderText=function(i,r){for(var n=0;n<i.length;n++){var s=this.getColumnByUid(i[parseInt(n.toString(),10)].uid);i[parseInt(n.toString(),10)].headerText=s.headerText,u(s.template)||(i[parseInt(n.toString(),10)].template="true"),i[parseInt(n.toString(),10)].format&&(i[parseInt(n.toString(),10)].format=Gd(this.getFormat(i[parseInt(n.toString(),10)].format),i[parseInt(n.toString(),10)].type,!1,rh),(s.type==="datetime"||s.type==="date"||s.type==="time")&&(i[parseInt(n.toString(),10)].format=i[parseInt(n.toString(),10)].format.toString().replace("AM/PM","tt"))),i[parseInt(n.toString(),10)].columns&&this.setHeaderText(i[parseInt(n.toString(),10)].columns,r);for(var a=Object.keys(i[parseInt(n.toString(),10)]),l=0;l<a.length;l++)r.indexOf(a[parseInt(l.toString(),10)])<0&&delete i[parseInt(n.toString(),10)][a[parseInt(l.toString(),10)]]}return i},e.prototype.getFormat=function(i){return typeof i=="object"?u(i.format)?i.skeleton:i.format:i},e.prototype.isCollapseStateEnabled=function(){var i="isExpanded";return this[""+i]===!1},e.prototype.updateRowValue=function(i,r){var n={requestType:"save",data:r};this.showSpinner(),this.notify(Is,n),this.refresh()},e.prototype.setForeignKeyData=function(){this.dataBind();var i=this.getDataModule().getForeignKeyDataState();i.isPending?(this.getDataModule().setForeignKeyDataState({}),i.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},e.prototype.resetFilterDlgPosition=function(i){var r=this.getColumnHeaderByField(i);if(r){var n=r.querySelector(".e-filtermenudiv"),s=this.element.querySelector(".e-filter-popup");if(n){var a=this.element.getBoundingClientRect(),l=n.getBoundingClientRect();s&&(s.offsetWidth+l.right>a.right?s.style.left=(l.right-s.offsetWidth-a.left).toString()+"px":s.style.left=(l.right-a.left).toString()+"px")}}},e.prototype.renderTemplates=function(i){var r=this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact,n=this.printGridParent&&this.printGridParent.isReact;if((r||n)&&this.portals){var s=n?this.printGridParent:this.parentDetails.parentInstObj;s.portals=s.portals.concat(this.portals),s.renderTemplates(i),this.portals=void 0}else{var a="portals";this.notify("reactTemplateRender",this[""+a]),this.renderReactTemplates(i)}},e.prototype.batchUpdate=function(i){this.processRowChanges(i)},e.prototype.batchAsyncUpdate=function(i){this.processBulkRowChanges(i)},e.prototype.processBulkRowChanges=function(i){var r=this;if(!this.dataToBeUpdated)this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i),setTimeout(function(){r.processRowChanges(r.dataToBeUpdated),r.dataToBeUpdated=null},this.asyncTimeOut);else for(var n=[yn,hc,Tl],s=this.getPrimaryKeyFieldNames()[0],a=0;a<n.length;a++)i[n[parseInt(a.toString(),10)]]&&zd(this,i,n[parseInt(a.toString(),10)],s)},e.prototype.processRowChanges=function(i){var r=this,n=this.getPrimaryKeyFieldNames()[0];i=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i);var s=this.getDataModule().saveChanges(i,n,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?s.then(function(){r.setNewData()}):this.setNewData()},e.prototype.setNewData=function(){var i=this,r=JSON.parse(JSON.stringify(this.getCurrentViewRecords())),n=this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount());n.then(function(s){i.bulkRefresh(s.result,r,s.count)})},e.prototype.deleteRowElement=function(i){var r=this.getRowElementByUID(i.uid);fe(r)},e.prototype.bulkRefresh=function(i,r,n){for(var s=this,a=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(v){i.filter(function(y){return y[""+l]===a[parseInt(v.toString(),10)].data[""+l]}).length||(p.deleteRowElement(a[parseInt(v.toString(),10)]),a.splice(v,1),v--),c=v},p=this,c,d=0;d<a.length;d++)h(d),d=c;for(var f=function(v){var y;r.filter(function(R){R[""+l]===i[parseInt(v.toString(),10)][""+l]&&(R!==i[parseInt(v.toString(),10)]&&s.setRowData(i[parseInt(v.toString(),10)][""+l],i[parseInt(v.toString(),10)]),y=!0)}),y||g.renderRowElement(i[parseInt(v.toString(),10)],v)},g=this,d=0;d<i.length;d++)f(d);this.currentViewData=i;var m=[].slice.call(this.getContentTable().getElementsByClassName(ut));Bd(this,this.getRowsObject(),m),Nd(this),this.allowPaging&&this.notify(At,{module:"pager",properties:{totalRecordsCount:n}})},e.prototype.renderRowElement=function(i,r){var n=new br(this.serviceLocator,null,this),s=new Rn(this),a=s.generateRows([i]),l=n.render(a[0],this.getColumns());this.addRowObject(a[0],r);var h=this.getContentTable().querySelector(Fe);if(h.querySelector(".e-emptyrow")){var p=h.querySelector(".e-emptyrow");p.parentNode.removeChild(p),this.frozenRows&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}this.frozenRows&&r<this.frozenRows?h=this.getHeaderContent().querySelector(Fe):h=this.getContent().querySelector(Fe),h=this.getContent().querySelector(Fe),h.appendChild(l)},e.prototype.addRowObject=function(i,r){this.getRowsObject().splice(r,1,i)},e.prototype.updateVisibleExpandCollapseRows=function(){for(var i=this.getRowsObject(),r=0,n=i.length;r<n;r++)(i[parseInt(r.toString(),10)].isDataRow||i[parseInt(r.toString(),10)].isAggregateRow)&&this.getRowElementByUID(i[parseInt(r.toString(),10)].uid)&&this.getRowElementByUID(i[parseInt(r.toString(),10)].uid).style.display==="none"?i[parseInt(r.toString(),10)].visible=!1:i[parseInt(r.toString(),10)].visible=!0},e.prototype.sanitize=function(i){return this.enableHtmlSanitizer?Xt.sanitize(i):i},e.prototype.getHeight=function(i){return!Number.isInteger(i)&&i.indexOf("%")!==-1?i=parseInt(i,10)/100*this.element.clientHeight:!Number.isInteger(i)&&this.height!=="auto"?i=parseInt(i,10):i=this.height,i},e.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},e.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},e.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(Fe)},e.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(Fe)},e.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(Fe)},e.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(Fe)},e.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(Fe)},e.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(Fe)},e.prototype.showResponsiveCustomFilter=function(i){this.filterModule&&this.filterModule.showCustomFilter(i||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomSort=function(i){this.sortModule&&this.sortModule.showCustomSort(i||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomColumnChooser=function(i){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(i||this.rowRenderingMode==="Vertical")},e.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},e.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},e.prototype.getCurrentVisibleColumns=function(i){for(var r=[],n=i?this.getColumns():this.columnModel,s=0,a=n;s<a.length;s++){var l=a[s];l.visible&&r.push(l)}return r},e.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)};var t;return w([C([])],e.prototype,"currentViewData",void 0),w([C()],e.prototype,"parentDetails",void 0),w([C()],e.prototype,"showHider",void 0),w([C([])],e.prototype,"columns",void 0),w([C(!0)],e.prototype,"enableAltRow",void 0),w([C(!0)],e.prototype,"enableHover",void 0),w([C(!1)],e.prototype,"enableAutoFill",void 0),w([C(!0)],e.prototype,"allowKeyboard",void 0),w([C(!1)],e.prototype,"enableStickyHeader",void 0),w([C(!1)],e.prototype,"enableHtmlSanitizer",void 0),w([C(!1)],e.prototype,"allowTextWrap",void 0),w([rt({},cd)],e.prototype,"textWrapSettings",void 0),w([rt({},dd)],e.prototype,"resizeSettings",void 0),w([C(!1)],e.prototype,"allowPaging",void 0),w([rt({},_c)],e.prototype,"pageSettings",void 0),w([rt({},md)],e.prototype,"loadingIndicator",void 0),w([C(!0)],e.prototype,"enableVirtualMaskRow",void 0),w([C(!1)],e.prototype,"enableVirtualization",void 0),w([C(!1)],e.prototype,"enableColumnVirtualization",void 0),w([C(!1)],e.prototype,"enableInfiniteScrolling",void 0),w([rt({},ud)],e.prototype,"searchSettings",void 0),w([C(!1)],e.prototype,"allowSorting",void 0),w([C("Ellipsis")],e.prototype,"clipMode",void 0),w([C(!0)],e.prototype,"allowMultiSorting",void 0),w([C(!1)],e.prototype,"allowExcelExport",void 0),w([C(!1)],e.prototype,"allowPdfExport",void 0),w([rt({},sd)],e.prototype,"sortSettings",void 0),w([rt({},ad)],e.prototype,"infiniteScrollSettings",void 0),w([C(!0)],e.prototype,"allowSelection",void 0),w([C(-1)],e.prototype,"selectedRowIndex",void 0),w([rt({},hd)],e.prototype,"selectionSettings",void 0),w([C(!1)],e.prototype,"allowFiltering",void 0),w([C("Horizontal")],e.prototype,"rowRenderingMode",void 0),w([C(!1)],e.prototype,"enableAdaptiveUI",void 0),w([C("Both")],e.prototype,"adaptiveUIMode",void 0),w([C(!1)],e.prototype,"allowReordering",void 0),w([C(!1)],e.prototype,"allowResizing",void 0),w([C(!1)],e.prototype,"allowRowDragAndDrop",void 0),w([rt({},pd)],e.prototype,"rowDropSettings",void 0),w([rt({},ld)],e.prototype,"filterSettings",void 0),w([C(!1)],e.prototype,"allowGrouping",void 0),w([C(!1)],e.prototype,"enableImmutableMode",void 0),w([C(!1)],e.prototype,"showColumnMenu",void 0),w([C(!1)],e.prototype,"autoFit",void 0),w([rt({},fd)],e.prototype,"groupSettings",void 0),w([rt({},gd)],e.prototype,"editSettings",void 0),w([Ir([],$c)],e.prototype,"aggregates",void 0),w([C(!1)],e.prototype,"showColumnChooser",void 0),w([rt({},jc)],e.prototype,"columnChooserSettings",void 0),w([C(!1)],e.prototype,"enableHeaderFocus",void 0),w([C("auto")],e.prototype,"height",void 0),w([C("auto")],e.prototype,"width",void 0),w([C("Default")],e.prototype,"gridLines",void 0),w([C()],e.prototype,"rowTemplate",void 0),w([C()],e.prototype,"emptyRecordTemplate",void 0),w([C()],e.prototype,"detailTemplate",void 0),w([C()],e.prototype,"childGrid",void 0),w([C()],e.prototype,"queryString",void 0),w([C("AllPages")],e.prototype,"printMode",void 0),w([C("Expanded")],e.prototype,"hierarchyPrintMode",void 0),w([C([])],e.prototype,"dataSource",void 0),w([C(null)],e.prototype,"rowHeight",void 0),w([C()],e.prototype,"query",void 0),w([C("USD")],e.prototype,"currencyCode",void 0),w([C()],e.prototype,"exportGrids",void 0),w([C()],e.prototype,"toolbar",void 0),w([C()],e.prototype,"contextMenuItems",void 0),w([C()],e.prototype,"columnMenuItems",void 0),w([C()],e.prototype,"toolbarTemplate",void 0),w([C()],e.prototype,"pagerTemplate",void 0),w([C(0)],e.prototype,"frozenRows",void 0),w([C(0)],e.prototype,"frozenColumns",void 0),w([C("")],e.prototype,"cssClass",void 0),w([C("All")],e.prototype,"columnQueryMode",void 0),w([C({})],e.prototype,"currentAction",void 0),w([C("")],e.prototype,"ej2StatePersistenceVersion",void 0),w([O()],e.prototype,"created",void 0),w([O()],e.prototype,"destroyed",void 0),w([O()],e.prototype,"load",void 0),w([O()],e.prototype,"rowDataBound",void 0),w([O()],e.prototype,"queryCellInfo",void 0),w([O()],e.prototype,"headerCellInfo",void 0),w([O()],e.prototype,"actionBegin",void 0),w([O()],e.prototype,"actionComplete",void 0),w([O()],e.prototype,"actionFailure",void 0),w([O()],e.prototype,"dataBound",void 0),w([O()],e.prototype,"recordDoubleClick",void 0),w([O()],e.prototype,"recordClick",void 0),w([O()],e.prototype,"rowSelecting",void 0),w([O()],e.prototype,"rowSelected",void 0),w([O()],e.prototype,"rowDeselecting",void 0),w([O()],e.prototype,"rowDeselected",void 0),w([O()],e.prototype,"cellSelecting",void 0),w([O()],e.prototype,"cellSelected",void 0),w([O()],e.prototype,"cellDeselecting",void 0),w([O()],e.prototype,"cellDeselected",void 0),w([O()],e.prototype,"columnSelecting",void 0),w([O()],e.prototype,"columnSelected",void 0),w([O()],e.prototype,"columnDeselecting",void 0),w([O()],e.prototype,"columnDeselected",void 0),w([O()],e.prototype,"columnDragStart",void 0),w([O()],e.prototype,"columnDrag",void 0),w([O()],e.prototype,"columnDrop",void 0),w([O()],e.prototype,"printComplete",void 0),w([O()],e.prototype,"beforePrint",void 0),w([O()],e.prototype,"pdfQueryCellInfo",void 0),w([O()],e.prototype,"pdfHeaderQueryCellInfo",void 0),w([O()],e.prototype,"pdfAggregateQueryCellInfo",void 0),w([O()],e.prototype,"excelAggregateQueryCellInfo",void 0),w([O()],e.prototype,"exportDetailDataBound",void 0),w([O()],e.prototype,"exportDetailTemplate",void 0),w([O()],e.prototype,"excelQueryCellInfo",void 0),w([O()],e.prototype,"excelHeaderQueryCellInfo",void 0),w([O()],e.prototype,"beforeExcelExport",void 0),w([O()],e.prototype,"excelExportComplete",void 0),w([O()],e.prototype,"beforePdfExport",void 0),w([O()],e.prototype,"pdfExportComplete",void 0),w([O()],e.prototype,"rowDragStartHelper",void 0),w([O()],e.prototype,"detailDataBound",void 0),w([O()],e.prototype,"rowDragStart",void 0),w([O()],e.prototype,"rowDrag",void 0),w([O()],e.prototype,"rowDrop",void 0),w([O()],e.prototype,"toolbarClick",void 0),w([O()],e.prototype,"beforeOpenColumnChooser",void 0),w([O()],e.prototype,"beforeOpenAdaptiveDialog",void 0),w([O()],e.prototype,"batchAdd",void 0),w([O()],e.prototype,"batchDelete",void 0),w([O()],e.prototype,"batchCancel",void 0),w([O()],e.prototype,"beforeBatchAdd",void 0),w([O()],e.prototype,"beforeBatchDelete",void 0),w([O()],e.prototype,"beforeBatchSave",void 0),w([O()],e.prototype,"beginEdit",void 0),w([O()],e.prototype,"commandClick",void 0),w([O()],e.prototype,"cellEdit",void 0),w([O()],e.prototype,"cellSave",void 0),w([O()],e.prototype,"cellSaved",void 0),w([O()],e.prototype,"resizeStart",void 0),w([O()],e.prototype,"resizing",void 0),w([O()],e.prototype,"resizeStop",void 0),w([O()],e.prototype,"keyPressed",void 0),w([O()],e.prototype,"beforeDataBound",void 0),w([O()],e.prototype,"contextMenuOpen",void 0),w([O()],e.prototype,"contextMenuClick",void 0),w([O()],e.prototype,"columnMenuOpen",void 0),w([O()],e.prototype,"columnMenuClick",void 0),w([O()],e.prototype,"checkBoxChange",void 0),w([O()],e.prototype,"beforeCopy",void 0),w([O()],e.prototype,"beforePaste",void 0),w([O()],e.prototype,"beforeAutoFill",void 0),w([O()],e.prototype,"columnDataStateChange",void 0),w([O()],e.prototype,"dataStateChange",void 0),w([O()],e.prototype,"dataSourceChanged",void 0),w([O()],e.prototype,"exportGroupCaption",void 0),w([O()],e.prototype,"lazyLoadGroupExpand",void 0),w([O()],e.prototype,"lazyLoadGroupCollapse",void 0),w([O()],e.prototype,"beforeDetailTemplateDetach",void 0),e=t=w([ki],e),e}(gi);function vd(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound","enableHtmlSanitizer"]}var zl=function(){function o(e,t){this.isAsyncPrint=!1,this.defered=new pt,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(Xe,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(_t,this.actionBeginFunction),this.parent.on(ei,this.onEmpty.bind(this)),this.parent.on(da,this.hierarchyPrint,this),this.scrollModule=t)}return o.prototype.isContentReady=function(){var e=this;return this.isPrintGrid()&&(this.parent.hierarchyPrintMode==="None"||!this.parent.childGrid)?this.contentReady:function(){e.defered.promise.then(function(){e.contentReady()}),e.isPrintGrid()&&e.hierarchyPrint()}},o.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},o.prototype.print=function(){this.renderPrintGrid()},o.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},o.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},o.prototype.renderPrintGrid=function(){var e=this.parent,t=pe("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});t.classList.remove("e-gridhover"),document.body.appendChild(t);for(var i=new Bl(ql(e,e.hierarchyPrintMode)),r=0;r<i.columns.length;r++)i.columns[parseInt(r.toString(),10)]=Q({},i.columns[parseInt(r.toString(),10)]),!e.getFrozenColumns()&&e.isFrozenGrid()&&(i.columns[parseInt(r.toString(),10)].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=e.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var n=i.getInjectedModules(),s=e.getInjectedModules();(!n||n.length!==s.length)&&i.setInjectedModules(s),e.notify(gp,{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,this.parent.isVue&&(i.vueInstance=this.parent.vueInstance),i.printGridParent=e,i.appendTo(t),e.isVue3||(i.trigger=e.trigger)},o.prototype.contentReady=function(){var e=this;if(this.isPrintGrid()){var t=this.parent;if(this.isAsyncPrint){this.printGrid();return}var i={requestType:"print",element:t.element,selectedRows:t.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:t.hierarchyPrintMode};if(this.isAsyncPrint||t.trigger(ea,i),i.cancel){Ve(t.element);return}this.isAsyncPrint||(this.parent.printGridParent&&this.parent.printGridParent.isReact?this.parent.printGridParent.renderTemplates(function(){e.printGrid()}):this.printGrid())}},o.prototype.printGrid=function(){var e=this.parent;if(e.height!=="auto"){var t=this.scrollModule.getCssProperties(),i=e.element.querySelector("."+ot),r=e.element.querySelector("."+Bt);i.style.height="auto",i.style.overflowY="auto",r.style[t.padding]="",r.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,s=[].slice.call(e.element.getElementsByClassName(ot));n<s.length;n++){var a=s[n];a.style.overflowX="hidden"}for(var l=[].slice.call(e.element.getElementsByClassName("e-spin-show")),h=0,p=[].slice.call(l);h<p.length;h++){var a=p[h];ve(a,["e-spin-hide"],["e-spin-show"])}this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj;var c={element:e.element};e.trigger(ta,c),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())},o.prototype.printGridElement=function(e){ve(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&Ve(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),u(this.printWind)||(this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=nh(e.element,this.printWind))},o.prototype.removeColGroup=function(e){var t=e.groupSettings.columns.length,i=e.element,r="#"+e.element.id;if(t){for(var n=Lt(".e-groupcaption",i),s=e.groupSettings.enableLazyLoading?(parseInt(n[0].getAttribute("colspan"),10)-(e.groupSettings.columns.length-1)).toString():n[t-1].getAttribute("colspan"),a=0;a<n.length;a++)n[parseInt(a.toString(),10)].setAttribute("colspan",s);var l=Lt("colgroup"+r+"colgroup",i),h=Lt(".e-content colgroup",i),p=Lt(".e-summarycontent colgroup",i);this.hideColGroup(l,t),this.hideColGroup(h,t),this.hideColGroup(p,t)}},o.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var r=0;r<t;r++)e[parseInt(i.toString(),10)].children[parseInt(r.toString(),10)].style.display="none"},o.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},o.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Xe,this.contentReady.bind(this)),this.parent.removeEventListener(_t,this.actionBeginFunction),this.parent.off(ei,this.onEmpty.bind(this)),this.parent.off(da,this.hierarchyPrint))},o.prototype.getModuleName=function(){return"print"},o.printGridProp=vd().concat([ea,ta,ds]),o}();function yd(o,e){return o.prototype&&e in o.prototype}function Nl(o,e,t){return u(o)||o===""?"":A.getObject(o,e)}function Hl(o,e){requestAnimationFrame(function(){try{e(null,o())}catch(t){e(t)}})}function qi(o,e){for(var t=[],i=0,r=o.length;i<r;i++){var n=e(o[parseInt(i.toString(),10)],i);u(n)||t.push(n)}return t}function ss(o){for(var e=[],t=0;t<o.length;t++)e.push(Q({},wr(o[parseInt(t.toString(),10)]),{},!0));return e}function qe(o){if(o)try{var e=o[0]!=="<";return typeof o=="function"?Be(o):e&&document.querySelectorAll(o).length?Be(document.querySelector(o).innerHTML.trim()):Be(o)}catch{return Be(o)}}function Yt(o,e){var t={},i=["style","class"];Q(t,e,{}),"style"in t&&(nt(o,t[i[0]]),delete t[i[0]]),"class"in t&&(B([o],t[i[1]]),delete t[i[1]]),de(o,t)}function Sd(o,e,t,i){for(var r=Q(o,e,t),n=Object.keys(r),s=0;s<n.length;s++)i&&i.indexOf(n[parseInt(s.toString(),10)])!==-1&&delete r[n[parseInt(s.toString(),10)]];return r}function rn(o,e){e===void 0&&(e=0);for(var t=0,i=u(o)?0:o.length;t<i;t++)o[parseInt(t.toString(),10)].columns?(o[parseInt(t.toString(),10)].index=u(o[parseInt(t.toString(),10)].index)?e:o[parseInt(t.toString(),10)].index,e++,e=rn(o[parseInt(t.toString(),10)].columns,e)):(o[parseInt(t.toString(),10)].index=u(o[parseInt(t.toString(),10)].index)?e:o[parseInt(t.toString(),10)].index,e++);return e}function Cn(o,e,t){for(var i=0,r=u(o)?0:o.length;i<r;i++){var n=void 0;typeof o[parseInt(i.toString(),10)]=="string"?n=new tt({field:o[parseInt(i.toString(),10)]},t):!(o[parseInt(i.toString(),10)]instanceof tt)||o[parseInt(i.toString(),10)].columns?o[parseInt(i.toString(),10)].columns?(o[parseInt(i.toString(),10)].columns=Cn(o[parseInt(i.toString(),10)].columns,null,t),n=new tt(o[parseInt(i.toString(),10)],t)):n=new tt(o[parseInt(i.toString(),10)],t):n=o[parseInt(i.toString(),10)],n.type&&n.type.toLowerCase()==="checkbox"&&(n.allowReordering=!1),n.headerText=u(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=(typeof n.valueAccessor=="string"?oe(n.valueAccessor,window):n.valueAccessor)||Nl,n.headerValueAccessor=typeof n.headerValueAccessor=="string"?oe(n.headerValueAccessor,window):n.headerValueAccessor,n.width=e&&u(n.width)?200:n.width,u(n.visible)&&(n.visible=!0),o[parseInt(i.toString(),10)]=n}return o}function Cd(o,e,t){var i=o.querySelector("span"),r=o.parentElement.getBoundingClientRect(),n=e.target.getBoundingClientRect();i.className=t,o.style.display="";var s=(u(e.clientY)?e.changedTouches[0].clientY:e.clientY)>o.offsetHeight+10;o.style.top=n.top-r.top+(s?-(o.offsetHeight+10):o.offsetHeight+10)+"px",o.style.left=bd(o,e,n,r.left)+"px",s?(o.querySelector(".e-downtail").style.display="",o.querySelector(".e-uptail").style.display="none"):(o.querySelector(".e-downtail").style.display="none",o.querySelector(".e-uptail").style.display="")}function bd(o,e,t,i){var r=o.offsetWidth/2,n=Ps(e).x;return n-t.left<r?t.left-i:t.right-n<r?t.right-i-r*2:n-i-r}function wr(o){return o instanceof _e?oe("properties",o):o}function T(o,e,t){for(var i=o;i&&!i.classList.contains(e);)i=i.parentElement;return i}function wd(o){for(var e=[],t=0,i=o.length;t<i;t++)o[parseInt(t.toString(),10)].hasOwnProperty("properties")?e.push(o[parseInt(t.toString(),10)].properties):e.push(o[parseInt(t.toString(),10)]);return e}function Ps(o){var e={};return e.x=u(o.clientX)?o.changedTouches[0].clientX:o.clientX,e.y=u(o.clientY)?o.changedTouches[0].clientY:o.clientY,e}var Id=0;function Ei(o){return o+Id++}function St(o,e){for(var t=0,i=e.length;t<i;t++)i===e.length?o.appendChild(e[parseInt(t.toString(),10)]):o.appendChild(e[0]);return o}function xd(o,e,t,i){if(o==="Custom"){var r=t.customAggregate;return typeof r=="string"&&(r=oe(r,window)),r?r.call(i,e,t):""}return t.field in e||e instanceof Array?A.aggregates[o.toLowerCase()](e,t.field):null}var os=null;function Tt(){if(os!==null)return os;var o=document.createElement("div"),e=0;return o.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(o),e=o.offsetWidth-o.clientWidth|0,document.body.removeChild(o),os=e}var _r,Ur;function Rd(o,e){if(e&&Ur!==void 0)return Ur;if(_r!==void 0)return _r;var t=pe("table",{className:di,attrs:{role:"grid"}});t.style.visibility="hidden",t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',o.appendChild(t);var i=t.querySelector("td").getBoundingClientRect();return o.removeChild(t),Ur=i.height,_r=Math.ceil(i.height),e?Ur:_r}function Ed(o){return o.split(".").length>1}function oo(o){var e=Ye("#"+o.element.id+"EditConfirm",o.element);return o.editSettings.mode==="Batch"&&(Lt(".e-updatedtd",o.element).length||Lt(".e-gridform.e-formvalidator",o.element).length)&&o.editSettings.showConfirmDialog&&(e?e.classList.contains("e-popup-close"):!0)}function xt(o,e){var t="e-wrap";o=o instanceof Array?o:[o];for(var i=0;i<o.length;i++)e?o[parseInt(i.toString(),10)].classList.add(t):o[parseInt(i.toString(),10)].classList.remove(t)}function Os(o,e){var t=o.getService("valueFormatter"),i="format",r;switch((e.type==="date"||e.type==="datetime"||e.type==="dateonly")&&(r={type:e.type==="dateonly"?"date":e.type,skeleton:e.format},typeof e.format=="string"&&e.format!=="yMd"&&(r[""+i]=e.format)),e.type){case"date":e.setFormatter(t.getFormatFunction(r)),e.setParser(t.getParserFunction(r));break;case"dateonly":e.setFormatter(t.getFormatFunction(r)),e.setParser(t.getParserFunction(r));break;case"datetime":e.setFormatter(t.getFormatFunction(r)),e.setParser(t.getParserFunction(r));break;case"number":e.setFormatter(t.getFormatFunction({format:e.format})),e.setParser(t.getParserFunction({format:e.format}));break}}function zi(o,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];for(var r=0,n=o.length;r<n;r++)e?(ve(o[parseInt(r.toString(),10)],t.slice(),[]),o[parseInt(r.toString(),10)].setAttribute("aria-selected","true")):(ve(o[parseInt(r.toString(),10)],[],t.slice()),o[parseInt(r.toString(),10)].removeAttribute("aria-selected"))}function Ad(o,e){var t=e.element.style.display;e.element.style.display="block";var i=e.width,r=Vs(o,e.element);e.element.style.display=t,e.element.style.top=r.top+o.getBoundingClientRect().height-5+"px";var n=r.left-i+o.clientWidth;n<1?e.element.style.left=i+n-16+"px":e.element.style.left=n+-4+"px"}function lr(o){var e=o.querySelector(".e-frame"),t=e.previousSibling;e.classList.contains("e-check")?(t.checked=!1,ve(e,["e-uncheck"],["e-check"])):(t.checked=!0,ve(e,["e-check"],["e-uncheck"]))}function Vi(o,e){o.checked=e}function as(o,e,t){var i=pe("div",{className:t});return i.appendChild(e),i.setAttribute("uid",o),i}function nn(o,e){G([o],["e-check","e-stop","e-uncheck"]),e?o.classList.add("e-check"):o.classList.add("e-uncheck")}function Td(o,e,t){for(var i=0;i<(u(e)?0:e.length);i++)mi(e[parseInt(i.toString(),10)].field,Gi(e[parseInt(i.toString(),10)],t),o.foreignKeyData);for(var r=o.cells,i=0;i<r.length;i++)r[parseInt(i.toString(),10)].isForeignKey&&mi("foreignKeyData",oe(r[parseInt(i.toString(),10)].column.field,o.foreignKeyData),r[parseInt(i.toString(),10)])}function Gi(o,e,t,i){var r=o.foreignKeyField,n=u(t)?Nl(o.field,e):t;n=u(n)?"":n;var s=new ae,a=i||(o.dataSource instanceof _&&o.dataSource.dataSource.json.length?o.dataSource.dataSource.json:o.columnData);return n.getDay?s.where(Ni({field:r,operator:"equal",value:n,matchCase:!1})):s.where(r,"==",n,!1),new _(a).executeLocal(s)}function ao(o,e){var t;return e.some(function(i){return t=i,i.foreignKeyValue===o})&&t}function bn(o){return o<10?"0"+o:String(o)}function Ni(o,e,t){var i,r,n,s=Q({},wr(o)),a=Q({},wr(o));if(u(o.value)||o.value==="")return i=new xe(s.field,s.operator,s.value,!1),i;var l=new Date(o.value);if(e==="dateonly"&&!t){typeof s.value=="string"&&(s.value=new Date(s.value));var h=s.value.getFullYear()+"-"+bn(s.value.getMonth()+1)+"-"+bn(s.value.getDate()),p=new xe(s.field,s.operator,h,!1);i=p}else if(o.operator=o.operator.toLowerCase(),o.operator==="equal"||o.operator==="notequal"){e==="datetime"?(r=new Date(l.setSeconds(l.getSeconds()-1)),n=new Date(l.setSeconds(l.getSeconds()+2)),o.value=new Date(l.setSeconds(n.getSeconds()-1))):(r=new Date(l.setHours(0)-1),n=new Date(l.setHours(24))),s.value=r,a.value=n,o.operator==="equal"?(s.operator="greaterthan",a.operator="lessthan"):o.operator==="notequal"&&(s.operator="lessthanorequal",a.operator="greaterthanorequal");var c=new xe(s.field,s.operator,s.value,!1),d=new xe(a.field,a.operator,a.value,!1);i=o.operator==="equal"?c.and(d):c.or(d)}else{e==="date"&&(o.operator==="lessthanorequal"||o.operator==="greaterthan")&&(s.value=new Date(l.setHours(24)-1)),typeof s.value=="string"&&(s.value=new Date(s.value));var p=new xe(s.field,s.operator,s.value,!1);i=p}return o.setProperties?o.setProperties({ejpredicate:i},!0):o.ejpredicate=i,i}function $t(o){return o.enableVirtualization&&o.groupSettings.columns.length>0&&o.isVirtualAdaptive&&!o.groupSettings.enableLazyLoading}function Si(o,e){if(o===void 0&&(o=""),o){for(var t=e,i=o.split("."),r=0;r<i.length&&!u(t);r++)if(t=t[i[parseInt(r.toString(),10)]],gt(t)){var n=i[parseInt(r.toString(),10)].charAt(0).toUpperCase()+i[parseInt(r.toString(),10)].slice(1);t=e[""+n]||e[(""+n).charAt(0).toLowerCase()+(""+n).slice(1)]}return t}}function Ld(o,e){for(var t=o.getRowsObject(),i={},r=0,n=t;r<n.length;r++){var s=n[r];if(s.isExpand&&!s.isDetailRow){var a=o.allowPaging&&o.printMode==="AllPages"?s.index+o.pageSettings.currentPage*o.pageSettings.pageSize-o.pageSettings.pageSize:s.index;u(a)||(i[parseInt(a.toString(),10)]={},i[parseInt(a.toString(),10)].isExpand=!0,o.childGrid&&(i[parseInt(a.toString(),10)].gridModel=ql(s.childGrid,e),i[parseInt(a.toString(),10)].gridModel.query=o.childGrid.query))}}return i}function ql(o,e){e===void 0&&(e="Expanded");var t={};if(!o)return t;for(var i=0,r=zl.printGridProp;i<r.length;i++){var n=r[i];n==="columns"?t[""+n]=wd(o[""+n]):n==="allowPaging"?t[""+n]=o.printMode==="CurrentPage":t[""+n]=wr(o[""+n])}return t.enableHover=!1,(o.childGrid||o.detailTemplate)&&e!=="None"&&(t.expandedRows=Ld(o,e)),t}function lo(o,e,t,i){for(var r=o||{},n=arguments.length,s=1;s<n;s++)if(arguments[parseInt(s.toString(),10)])for(var a=arguments[parseInt(s.toString(),10)],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(Fd(a)):Object.keys(a),h=0;h<l.length;h++){r[l[parseInt(h.toString(),10)]];var p=a[l[parseInt(h.toString(),10)]];r[l[parseInt(h.toString(),10)]]=p}return r}function Fd(o){for(var e=[];Object.getPrototypeOf(o)&&Object.keys(Object.getPrototypeOf(o)).length;)e=e.concat(Object.keys(Object.getPrototypeOf(o))),o=Object.getPrototypeOf(o);return e}function kd(o){for(var e=0,t=0;t<(u(o)?0:o.length);t++){var i=Vl(o[parseInt(t.toString(),10)],0);e<i&&(e=i)}return e+1}function Vl(o,e){var t=e,i=[];if(o.columns){e++;for(var r=0;r<o.columns.length;r++)i[parseInt(r.toString(),10)]=Vl(o.columns[parseInt(r.toString(),10)],e);for(var n=0;n<i.length;n++)t<i[parseInt(n.toString(),10)]&&(t=i[parseInt(n.toString(),10)]);e=t}return e}function Dd(o,e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].uid=e[parseInt(t.toString(),10)].isForeignKey?ao(e[parseInt(t.toString(),10)].field,o.getForeignKeyColumns()).uid:o.enableColumnVirtualization?jd(o,e[parseInt(t.toString(),10)].field).uid:o.getColumnByField(e[parseInt(t.toString(),10)].field).uid}var Wt;(function(o){o.timer=null})(Wt||(Wt={}));function Bs(o){var e=document.defaultView.getComputedStyle(o,null),t=e.getPropertyValue("transform"),i=t.replace(/,/g,""),r=parseFloat(i.split(" ")[4]),n=parseFloat(i.split(" ")[5]);return{width:r,height:n}}function ho(o){var e=o.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?Tt():0}function Gl(o,e){var t=0,i=o.getColumns(),r=e*30;o.isRowDragable()&&(t++,r+=30),t+=o.groupSettings.columns.length-e,r+=30*(o.groupSettings.columns.length-e);for(var n=(o.width==="auto"?o.element.offsetWidth:o.width.toString().indexOf("%")!==-1?o.element.getBoundingClientRect().width:parseInt(o.width.toString(),10))-ho(o),s=0;s<i.length;s++)if(i[parseInt(s.toString(),10)].visible&&(r+=parseInt(i[parseInt(s.toString(),10)].width.toString(),10),t++),r>n){t--;break}return t}function Md(o,e){for(var t=0,i=0,r=e.getVisibleFrozenLeftCount(),n=0;n<o.childNodes.length;n++){var s=o.childNodes[parseInt(n.toString(),10)];if(r===i)break;if((s.classList.contains("e-groupcaption")||s.classList.contains("e-summarycell"))&&(i+=parseInt(s.getAttribute("colspan"),10)),s.classList.add("e-leftfreeze"),s.classList.contains("e-groupcaption")&&parseInt(s.getAttribute("colspan"),10)===1&&s.classList.add("e-freezeleftborder"),ct(s,t,e.enableRtl,"Left"),(s.classList.contains("e-indentcell")||s.classList.contains("e-recordplusexpand")||s.classList.contains("e-recordpluscollapse"))&&(t+=30),s.classList.contains("e-groupcaption")){var a=parseInt(s.getAttribute("colspan"),10);e.isRowDragable()&&(a--,t+=30),a=a-(e.groupSettings.columns.length-n),t=t+30*(e.groupSettings.columns.length-n);for(var l=e.getColumns(),h=0;h<l.length;h++){if(parseInt(s.getAttribute("colspan"),10)>1&&parseInt(l[parseInt(h.toString(),10)].width.toString(),10)+t>parseInt(e.width.toString(),10)-ho(e)){var p=Gl(e,n);s.setAttribute("colspan",p.toString());break}if(l[parseInt(h.toString(),10)].visible&&(t+=parseInt(l[parseInt(h.toString(),10)].width.toString(),10),a--),a===0)break}}if(s.classList.contains("e-summarycell")){var c=s.getAttribute("e-mappinguid"),d=e.getColumnByUid(c);t+=parseInt(d.width.toString(),10)}}}function Pd(o,e){var t=Od(e),i=new pt;return t.dataSource=i.resolve,t.action=o,{state:t,deffered:i}}function Od(o){var e=new zt,t=new _({url:"",adaptor:new zt}),i=e.processQuery(t,o),r=JSON.parse(i.data);return r}function zs(o){for(var e=o.getVisibleColumns(),t=0,i=0,r=0;r<e.length;r++)gt(e[parseInt(r.toString(),10)].width)?i++:e[parseInt(r.toString(),10)].width.toString().indexOf("%")!==-1&&t++;return(o.width==="auto"||typeof o.width=="string"&&o.width.indexOf("%")!==-1)&&!o.groupSettings.showGroupedColumn&&o.groupSettings.columns.length&&t&&!i}function Bd(o,e,t,i,r){for(var n=0,s=0;s<e.length;s++)if(e[parseInt(s.toString(),10)]&&e[parseInt(s.toString(),10)].isDataRow){e[parseInt(s.toString(),10)].index=n,e[parseInt(s.toString(),10)].isAltRow=o.enableAltRow?n%2!==0:!1,t[parseInt(s.toString(),10)].setAttribute(He,(n+1).toString()),e[parseInt(s.toString(),10)].isAltRow?t[parseInt(s.toString(),10)].classList.add("e-altrow"):t[parseInt(s.toString(),10)].classList.remove("e-altrow");for(var a=0;a<t[parseInt(s.toString(),10)].cells.length;a++)t[parseInt(s.toString(),10)].cells[parseInt(a.toString(),10)].setAttribute("index",n.toString());n++}e.length||o.renderModule.emptyRow(!0)}function zd(o,e,t,i){var r=o.dataToBeUpdated[""+t].concat(e[""+t]).reduce(function(n,s){return n[s[""+i]]=n[s[""+i]]===void 0?s:Object.assign(n[s[""+i]],s),n},{});o.dataToBeUpdated[""+t]=Object.keys(r).map(function(n){return r[""+n]})}function Nd(o){if(o.enableInfiniteScrolling&&(o.childGrid||o.detailTemplate)){o.contentModule.rowElements=[].slice.call(o.getContentTable().rows).filter(function(e){return(e.classList.contains("e-row")||e.classList.contains("e-detailrow"))&&!e.classList.contains("e-addedrow")});return}o.contentModule.rowElements=[].slice.call(o.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"))}function Hd(o,e){var t=o.createElement("div",{className:"e-grid-popup",id:o.element.id+"_e-popup"}),i=mt(o.element,"left","Top");document.getElementById(o.element.id+"_e-popup")&&(t=document.getElementById(o.element.id+"_e-popup")),t.style.top=i.top+"px",t.style.left=i.left+"px",t.style.zIndex=e.zIndex.toString(),t.style.width=e.element.offsetWidth+"px",t.appendChild(e.element);var r=T(o.element,"sb-demo-section")||T(o.element,"e-grid-dialog-fixed");if(r){var n=Vs(o.element,r);t.style.top=n.top+"px",t.style.left=n.left+"px",r.insertBefore(t,r.firstChild)}else document.body.insertBefore(t,document.body.firstChild)}function Ra(o,e){var t=[];return t.push(o.uid),Wl(o,t),t.indexOf(e)>-1}function Wl(o,e){for(var t=0;t<o.columns.length;t++)o.columns[parseInt(t.toString(),10)].uid&&e.push(o.columns[parseInt(t.toString(),10)].uid),o.columns[parseInt(t.toString(),10)].columns&&o.columns[parseInt(t.toString(),10)].columns.length&&Wl(o.columns[parseInt(t.toString(),10)],e)}function sn(o){return o.columns[0].freeze||o.columns[0].isFrozen?o.columns[0].freeze==="Left"||o.columns[0].isFrozen?"Left":o.columns[0].freeze==="Right"?"Right":o.columns[0].freeze==="Fixed"?"Fixed":"None":o.columns[0].columns&&o.columns[0].columns.length?sn(o.columns[0]):"None"}function Ns(o){if(o.querySelector(".e-fixedfreeze"))for(var e=[].slice.call(o.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[t-1]||e[t-1]&&!e[t-1].classList.contains("e-fixedfreeze"))&&e[parseInt(t.toString(),10)].classList.add("e-freezeleftborder"),e[parseInt(t.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[t+1]||e[t+1]&&!e[t+1].classList.contains("e-fixedfreeze"))&&e[parseInt(t.toString(),10)].classList.add("e-freezerightborder")}function ct(o,e,t,i){i==="Left"&&(t?o.style.right=e+"px":o.style.left=e+"px"),i==="Right"&&(t?o.style.left=e+"px":o.style.right=e+"px")}function qd(o,e,t,i){var r=o.getColumns(),n=e.index;if(e.freeze==="Left"&&e.border!=="Left"){for(var s=n+(i-1);r[parseInt(s.toString(),10)].visible===!1;)s++;r[parseInt(s.toString(),10)].border==="Left"&&t.classList.add("e-freezeleftborder")}else if(e.freeze==="Right"||e.freeze==="Fixed"){for(var a=0,l=n+1;l<n+i&&l!==r.length;l++)r[parseInt(l.toString(),10)].visible?a+=parseInt(r[parseInt(l.toString(),10)].width.toString(),10):i++;o.enableRtl?t.style.left=parseInt(t.style.left,10)-a+"px":t.style.right=parseInt(t.style.right,10)-a+"px"}}function Ea(o,e,t){for(var i=o.getRowByIndex(e),r=0;r<i.cells.length;r++)if(parseInt(i.cells[parseInt(r.toString(),10)].getAttribute("aria-colindex").toString(),10)-1===t)return i.cells[parseInt(r.toString(),10)];return null}function _l(o,e,t){if(e.freeze==="Left"||e.isFrozen)if(t.classList.add("e-leftfreeze"),e.border==="Left"&&t.classList.add("e-freezeleftborder"),e.index===0)ct(t,o.getIndentCount()*30,o.enableRtl,"Left"),o.enableColumnVirtualization&&(e.valueX=o.getIndentCount()*30);else{for(var i=o.getColumns(),r=o.getIndentCount()*30,n=0;n<i.length&&e.uid!==i[parseInt(n.toString(),10)].uid;n++)i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));ct(t,r,o.enableRtl,"Left"),o.enableColumnVirtualization&&(e.valueX=r)}else if(e.freeze==="Right"){t.classList.add("e-rightfreeze");var i=o.getColumns();if(e.border==="Right"&&t.classList.add("e-freezerightborder"),e.index===i[i.length-1].index){var r=o.getFrozenMode()==="Right"&&o.isRowDragable()?30:0;ct(t,r,o.enableRtl,"Right"),o.enableColumnVirtualization&&(e.valueX=r)}else{for(var r=o.getFrozenMode()==="Right"&&o.isRowDragable()?30:0,n=i.length-1;n>=0&&e.uid!==i[parseInt(n.toString(),10)].uid;n--)i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));ct(t,r,o.enableRtl,"Right"),o.enableColumnVirtualization&&(e.valueX=r)}}else if(e.freeze==="Fixed"){t.classList.add("e-fixedfreeze");var i=o.getColumns(),r=0;o.getVisibleFrozenLeftCount()?r=o.getIndentCount()*30:o.getFrozenMode()==="Right"&&(r=o.groupSettings.columns.length*30);for(var n=0;n<i.length&&e.uid!==i[parseInt(n.toString(),10)].uid;n++)(i[parseInt(n.toString(),10)].freeze==="Left"||i[parseInt(n.toString(),10)].isFrozen||i[parseInt(n.toString(),10)].freeze==="Fixed")&&i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));ct(t,r-1,o.enableRtl,"Left"),r=o.getFrozenMode()==="Right"&&o.isRowDragable()?30:0;for(var n=i.length-1;n>=0&&e.uid!==i[parseInt(n.toString(),10)].uid;n--)(i[parseInt(n.toString(),10)].freeze==="Right"||i[parseInt(n.toString(),10)].freeze==="Fixed")&&i[parseInt(n.toString(),10)].visible&&(r+=parseFloat(i[parseInt(n.toString(),10)].width.toString()));ct(t,r-1,o.enableRtl,"Right")}else t.classList.add("e-unfreeze")}function Ul(o,e,t){return[].slice.call(o.getDataRows()[parseInt(t.toString(),10)].getElementsByClassName(Le))}function Vd(o,e,t,i){return Ul(o,e,t)[parseInt(i.toString(),10)]}function Gd(o,e,t,i){var r,n=new Hs;if(e==="number")try{r=n.getNumberPattern({format:o,currency:i,useGrouping:!0},!0)}catch{r=o}else if(e==="date"||e==="time"||e==="datetime")try{if(r=n.getDatePattern({skeleton:o,type:e},t),u(r))throw"error"}catch{try{r=n.getDatePattern({format:o,type:e},t)}catch{r=o}}else r=o;if(e!=="number"){var s=/G|H|c|'| a|yy|y|EEEE|E/g,a={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r=r.replace(s,function(l){return a[""+l]})}return r}function Wd(o){if(o.enableAdaptiveUI)for(var e=document.getElementsByClassName("e-responsive-dialog"),t=0;t<e.length;t++)e[parseInt(t.toString(),10)].classList.add("e-bigger")}function _d(o,e){for(var t,i=o.split(".").length,r=o.split("."),n=e,s=0;s<i;s++)t=n[r[parseInt(s.toString(),10)]],n=t;return t}function Ud(o,e,t,i,r,n){for(var s=Object.keys(o),a=e,l=0;l<s.length;l++){var h=o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)];if(r&&!r.isFrozenGrid()&&!r.isRowDragable()){if(h=!u(h)&&(parseInt(h.getAttribute("aria-colindex"),10)-1===e||T(h,"e-addedrow")&&h.parentElement.childNodes[parseInt(e.toString(),10)]===h)?h:o[parseInt(l.toString(),10)].querySelector('td[aria-colindex="'+(e+1)+'"]'),u(h))continue;e=r.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}if(o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h){if(nt(o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)],{display:t}),o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.contains("e-hide")&&G([o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)]],["e-hide"]),n&&r.isRowDragable()||r&&r.isDetail()){var p=e+1;i[s[parseInt(l.toString(),10)]].cells[parseInt(p.toString(),10)].visible=t===""}else u(i[s[parseInt(l.toString(),10)]])||(i[s[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible=t==="",i[s[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible===!1&&o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.add("e-hide"));e=a}}}function ii(o,e,t,i){for(var r=0,n=e;r<n.length;r++){var s=n[r];t?o.on(s.event,s.handler,i):o.off(s.event,s.handler)}}function jd(o,e){var t;o.columnModel||o.getColumns();for(var i=0,r=o.columnModel;i<r.length;i++){var n=r[i];if(n.field===e){t=n;break}}return t}function En(o,e){o.destroyTemplate(e),o.isReact&&o.renderTemplates()}function jr(o){for(var e=0;e<o.length;e++)fe(o[e])}function Aa(o,e){for(var t=0;t<o.length;t++)e.insertBefore(o[t],e.children[t])}function Kr(o,e){var t=pe("div",{className:"e-ftrchk"});t.style.visibility="hidden",t.innerHTML='<div class="e-checkbox-wrapper"><span class="e-frame e-icons e-check"></span><span class="e-label e-checkboxfiltertext">A</div></span>',o.appendChild(t);var i=t.getBoundingClientRect();o.removeChild(t);var r=Math.round(i.height);return r}function Vt(o,e,t){var i=o,r=e,n=!1;if(t)for(var s=r[0];s<i.length;s++)for(var a=i[parseInt(s.toString(),10)],l=0;l<a.length;l++){if(n&&i[parseInt(s.toString(),10)][parseInt(l.toString(),10)]===1)return r=[s,l],r;!n&&r.toString()===[s,l].toString()&&(n=!0)}else for(var s=r[0];s>=0;s--)for(var a=i[parseInt(s.toString(),10)],l=a.length-1;l>=0;l--){if(n&&i[parseInt(s.toString(),10)][parseInt(l.toString(),10)]===1)return r=[s,l],r;!n&&r.toString()===[s,l].toString()&&(n=!0)}return r}var Ta=function(){function o(e){this.searchInputArgs=null,this.isExecuteLocal=!1,this.queryFilteredColumn=[],this.existingPredicate={},this.foreignKeyQuery=new ae,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.infiniteRenderMod=!1,this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1,this.infinitePermenantLocalData=[],this.infiniteQueryExecutionPending=!1,this.infiniteSkipCnt=0,this.infiniteScrollAppendDiff=0,this.prevInfiniteScrollDirection="",this.infiniteLoadedElem=[],this.infiniteDataCount=0,this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteManualSelectMaintainPred=[],this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new Lr(this.parent.locale),this.cBoxTrue=fr(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=fr(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&B([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?B([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):B([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}return o.prototype.destroy=function(){this.closeDialog()},o.prototype.wireEvents=function(){x.add(this.dlg,"click",this.clickHandler,this),x.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=sh(this.searchBoxKeyUp,200);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(x.add(e,"keyup",this.searchHandler,this),x.add(e,"input",this.searchHandler,this))},o.prototype.unWireEvents=function(){x.remove(this.dlg,"click",this.clickHandler),x.remove(this.dlg,"keyup",this.keyupHandler);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(x.remove(e,"keyup",this.searchHandler),x.remove(e,"input",this.searchHandler))},o.prototype.foreignKeyFilter=function(e,t,i){var r=this,n={},s=[],a=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(a.where(i)).then(function(l){r.options.column.columnData=l.result,r.parent.notify(Zr,{predicate:n,column:r.options.column}),e.ejpredicate=n.predicate.predicates;for(var h=n.predicate.predicates,p=0;p<h.length;p++)s.push({field:h[parseInt(p.toString(),10)].field,predicate:"or",matchCase:h[parseInt(p.toString(),10)].ignoreCase,ignoreAccent:h[parseInt(p.toString(),10)].ignoreAccent,operator:h[parseInt(p.toString(),10)].operator,value:h[parseInt(p.toString(),10)].value,type:r.options.type});e.filterCollection=s.length?s:t.filter(function(c){return c.field=r.options.field}),r.options.handler(e)})},o.prototype.searchBoxClick=function(e){var t=e.target;t.classList.contains("e-searchclear")&&(this.sInput.value=t.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},o.prototype.searchBoxKeyUp=function(e){u(this.sInput)||(u(e)||e.key!=="ArrowUp"&&e.key!=="ArrowDown"&&e.key!=="Tab"&&!(e.key==="Tab"&&e.shiftKey))&&(!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon())},o.prototype.updateSearchIcon=function(){this.sInput.value.length?(ve(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),u(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(ve(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),u(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},o.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},o.prototype.updateDataSource=function(){var e=this.options.dataSource,t="object";if(!(e instanceof _)){for(var i=0;i<e.length;i++)if(typeof e!==t){var r={};r[this.options.field]=e[parseInt(i.toString(),10)],e[parseInt(i.toString(),10)]=r}}},o.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new ae,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.options.disableHtmlEncode=e.column.disableHtmlEncode||!1,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length,this.infiniteRenderMod=!!(this.parent.filterSettings&&this.parent.filterSettings.enableInfiniteScrolling),this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},o.prototype.getAndSetChkElem=function(e){return this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),e.hideSearchbox||(this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox),this.searchInputArgs={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}},Pe.createInput(this.searchInputArgs,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)),this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},o.prototype.showDialog=function(e){var t={requestType:Qu,columnName:this.options.field,columnType:this.options.type,cancel:!1},i="filterModel";if(t[""+i]=this,this.parent.notify(yp,t),t.cancel){e.cancel=t.cancel;return}this.dialogObj=new to({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!u(T(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""});var r="isStringTemplate";this.dialogObj[""+r]=!0,this.renderResponsiveFilter(e);var n=this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA");if(this.dlg.setAttribute("aria-label",n),e.isResponsiveFilter){var s=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");s.appendChild(this.dlg)}else this.parent.element.appendChild(this.dlg);this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.parent&&this.parent.filterSettings&&(this.parent.filterSettings.type==="CheckBox"||this.options.column&&this.options.column.filter&&this.options.column.filter.type==="CheckBox")&&this.parent.getContent().firstElementChild.offsetHeight<this.dialogObj.element.offsetHeight&&!T(this.parent.element,"e-gantt-dialog")&&Hd(this.parent,this.dialogObj);var a=this.dialogObj.element.querySelector(".e-dlg-content");if(a.appendChild(this.sBox),this.wireEvents(),!this.parent.enableAdaptiveUI)!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&!this.infiniteRenderMod&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.showMask();else{if(this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"){this.getAllData();return}this.infiniteRenderMod&&(this.cBox.style.marginTop=Kr(this.cBox)+"px")}this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"||(fn({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),ji(this.spinner)),this.getAllData()},o.prototype.renderResponsiveFilter=function(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},o.prototype.dialogCreated=function(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":K.isDevice?this.dialogObj.position={X:"center",Y:"center"}:Ad(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify(hp,e)},o.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},o.prototype.closeDialog=function(){if(this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var e=this.options.columns.filter(function(r){return r.getFilterItemTemplate()}),t=this.parent.registeredTemplate;if(e.length&&!u(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&En(this.parent,["filterItemTemplate"]),this.parent.notify(up,{field:this.options.field}),this.unWireEvents(),this.searchInputArgs&&this.searchInputArgs.element&&this.searchInputArgs.element.parentElement&&(Pe.destroy(this.searchInputArgs),fe(this.searchInputArgs.element)),this.searchInputArgs=null,this.sInput=null,this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string"&&(this.options.column.filter.type==="CheckBox"||this.options.column.filter.type==="Excel")&&(this.dialogObj.element.querySelector(".e-dlg-content").innerHTML=""),this.dialogObj.destroy(),this.dialogObj.dlgClosedBy==="escape"&&(this.parent.isColumnMenuFilterClosing=!0),this.dlg&&this.dlg.parentElement){fe(this.dlg);var i=document.getElementById(this.parent.element.id+"_e-popup");u(i)||(fe(i),i=null)}this.dlg=null,this.parent.notify(Rl,{})}},o.prototype.clearFilter=function(e){var t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(ga,t),!t.cancel&&this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})},o.prototype.btnClick=function(e){if(this.filterState){if(e.target.tagName.toLowerCase()==="input"&&e.target.classList.contains("e-searchinput")||e.keyCode===13)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var t=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===t?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===t&&this.clearFilter()}this.closeDialog()}else e.target&&e.target.firstChild&&e.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():e.target.tagName.toLowerCase()!=="input"&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify(tc,{}),u(this.parent.focusModule)||this.parent.focusModule.filterfocus()},o.prototype.fltrBtnHandler=function(){var e=this;this.infiniteRenderMod&&(this.cBox.innerHTML="",St(this.cBox,this.infiniteLoadedElem.slice()));var t=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")),i=t,r="equal",n=this.dialogObj.element.querySelector(".e-dropdownlist");n&&(this.options.operator=r=n.ej2_instances[0].value),this.isMenuNotEqual=this.options.operator==="notequal";var s;this.options.hideSearchbox||(s=this.searchBox.querySelector(".e-searchinput"));var a=this.options.allowCaseSensitive,l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:a,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==t.length&&this.itemsCnt-t.length<t.length;h&&s&&s.value===""&&(r=this.isMenuNotEqual?"equal":"notequal",t=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=r);var p,c,d=[];if(t.length!==this.itemsCnt||s&&s.value&&s.value!==""||this.infiniteRenderMod){if(this.infiniteRenderMod)this.infiniteRenderMod&&(!this.infiniteSearchPred||this.infiniteSearchPred&&!this.infiniteSearchPred.isComplex)?this.infiniteFltrBtnHandler(d):this.infiniteSearchPred.isComplex&&(d=this.complexQueryPredicate(t,l,h));else{if(d=this.complexQueryPredicate(t,l,h),u(d))return;d=this.filterPreventColumns?this.filterPreventColumns:d}(this.options.type==="date"||this.options.type==="dateonly"||this.options.type==="datetime")&&i.length&&(c=i.length-1,p=this.values[T(i[parseInt(c.toString(),10)],"e-ftrchk").getAttribute("uid")],u(p)&&h&&d.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"or",value:null}));var f=this.infiniteRenderMod?this.sBox.querySelector(".e-add-current"):this.cBox.querySelector(".e-add-current");if(f&&f.classList.contains("e-check")){var g=this.existingPredicate[this.options.field];if(g)for(var m=function(R){d.some(function(b){return b.value===g[parseInt(R.toString(),10)].value})||d.push(g[parseInt(R.toString(),10)])},v=0;v<g.length;v++)m(v);else return}if(!this.infiniteRenderMod)this.initiateFilter(d);else if(d.length)this.initiateFilter(d);else if(this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!d.length){var y=this.options.filteredColumns.some(function(R){return e.options.field===R.field});y&&this.clearFilter()}}else{var y=this.options.filteredColumns.some(function(b){return e.options.field===b.field});y&&this.clearFilter()}},o.prototype.complexQueryPredicate=function(e,t,i){for(var r,n,s=[],a=0;a<e.length;a++)r=this.values[T(e[parseInt(a.toString(),10)],"e-ftrchk").getAttribute("uid")],n=Q({},{value:r},t),r&&!r.toString().length&&(n.operator=i?"notequal":"equal"),r===""||u(r)?s=s.concat(o.generateNullValuePredicates(t)):s.push(n);var l=this.filterPreventColumns&&this.filterPreventColumns.length?this.filterPreventColumns[0]:n;return l&&!this.notifyFilterPrevEvent(l)?(this.filterPreventColumns=s,null):s},o.prototype.infiniteFltrBtnHandler=function(e){var t;if(this.infiniteManualSelectMaintainPred.length)for(var i=0;i<this.infiniteManualSelectMaintainPred.length;i++){var r=this.infiniteManualSelectMaintainPred[i];if(t=r.value+"",t===""||u(t)){var n={predicate:r.predicate,field:r.field,type:r.type,uid:r.uid,operator:r.operator,matchCase:r.matchCase,ignoreAccent:r.ignoreAccent};e.push.apply(e,o.generateNullValuePredicates(n))}else e.push(this.infiniteManualSelectMaintainPred[i]);this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[i])}if(!this.localInfiniteSelectAllClicked&&this.sInput.value===""&&!(!this.options.parentCurrentViewDataCount&&e.length))for(var i=0;i<this.infiniteUnloadParentExistPred.length;i++)e.unshift(this.infiniteUnloadParentExistPred[i]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][i]);this.sInput.value!==""&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll)&&(this.infiniteSearchPred.predicate="or",e.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},o.prototype.notifyFilterPrevEvent=function(e){var t={instance:this,handler:this.fltrBtnHandler,arg1:e.field,arg2:e.predicate,arg3:e.operator,arg4:e.matchCase,arg5:e.ignoreAccent,arg6:e.value,cancel:!1};return this.parent.notify(ga,t),!t.cancel},o.generateNullValuePredicates=function(e){var t=[];return e.type==="string"&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t},o.prototype.initiateFilter=function(e){var t=e[0],i;if(!u(t)){i=t.ejpredicate?t.ejpredicate:new xe(t.field,t.operator,t.value,!t.matchCase,t.ignoreAccent);for(var r=1;r<e.length;r++)i=e[parseInt(r.toString(),10)].ejpredicate!==void 0?i[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].ejpredicate):i[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].field,e[parseInt(r.toString(),10)].operator,e[parseInt(r.toString(),10)].value,!e[parseInt(r.toString(),10)].matchCase,e[parseInt(r.toString(),10)].ignoreAccent);var n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:xe.or(i)};this.options.handler(n)}},o.prototype.isForeignColumn=function(e){return e.isForeignColumn?e.isForeignColumn():!1},o.prototype.refreshCheckboxes=function(){var e=this,t=this.sInput.value,i=this.options.column,r=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),s=r.queries.filter(function(b){return b&&b.fn==="onWhere"})[0];r.queries=[],n.queries=[];var a=this.options.type!=="string"&&parseFloat(t)?parseFloat(t):t,l=this.options.isRemote?this.options.type==="string"?"contains":"equal":this.options.type?"contains":"equal",h=!0,p=this.options.ignoreAccent,c=this.isForeignColumn(i)?i.foreignKeyValue:i.field;a=a===""||a===void 0?void 0:a;var d=[],f={field:c,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:p},g,m=this.options.dataManager.adaptor.getModuleName;if(this.options.type==="boolean"&&(a!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())!==-1?a="true":a!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())!==-1&&(a="false"),a!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())!==-1&&m?a=(m(),!0):a!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())!==-1&&m&&(a=(m(),!1)),l="equal"),(this.options.type==="date"||this.options.type==="datetime"||this.options.type==="dateonly")&&this.options.format){var v=new Hs,y=typeof this.options.format=="string"?this.options.format:this.options.format.format;y?a=v.parseDate(t,{format:y})||new Date(t):a=new Date(t),this.options.type==="dateonly"&&(a=a.getFullYear()+"-"+bn(a.getMonth()+1)+"-"+bn(a.getDate()))}this.infiniteSearchValChange=!0,this.infiniteLoadedElem=[],this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteSkipCnt=0,this.infiniteDataCount=0,this.infiniteManualSelectMaintainPred=[],this.sInput.value===""?this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]:this.infiniteUnloadParentExistPred=[],this.addDistinct(r);var R={requestType:Yu,filterModel:this,columnName:c,column:i,operator:l,matchCase:h,ignoreAccent:p,filterChoiceCount:null,query:r,value:a};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(R.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(_t,R,function(b){if(b.operator=b.operator,g=new xe(c,b.operator,R.value,b.matchCase,b.ignoreAccent),e.options.type==="date"||e.options.type==="datetime"||e.options.type==="dateonly"){l="equal";var E={field:c,operator:l,value:a,matchCase:h,ignoreAccent:p};u(a)||(g=Ni(E,e.options.type))}if(t&&typeof t=="string"&&e.isBlanks&&e.getLocalizedLabel("Blanks").toLowerCase().indexOf(t.toLowerCase())>=0){d=d.concat(o.generateNullValuePredicates(f));var k=o.generatePredicate(d);k.predicates.push(g),g=k,r.where(k)}else t.length?(g=u(s)?g:g.and(s.e),r.where(g)):u(s)||(g=s.e,r.where(s.e));e.infiniteSearchPred=g,b.filterChoiceCount=u(b.filterChoiceCount)?1e3:b.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==b.filterChoiceCount&&(e.parent.filterSettings.itemsCount=R.filterChoiceCount);var F={};if(ji(e.spinner),e.renderEmpty=!1,e.isForeignColumn(i)&&t.length){var W="result"in i.dataSource?new _(i.dataSource.result):i.dataSource;W.executeQuery(r).then(function(te){var ne=e.options.column.columnData;e.options.column.columnData=te.result,e.parent.notify(Zr,{predicate:F,column:i}),F.predicate.predicates.length?n.where(F.predicate):e.renderEmpty=!0,e.options.column.columnData=ne,e.infiniteRenderMod?(e.infiniteInitialLoad=!!u(e.fullData),e.makeInfiniteScrollRequest(n),n.requiresCount()):n.take(b.filterChoiceCount),e.search(b,n)})}else e.infiniteRenderMod&&e.parent.filterSettings.itemsCount?(e.infiniteInitialLoad=!!u(e.fullData),e.makeInfiniteScrollRequest(r),r.requiresCount()):r.take(b.filterChoiceCount),e.search(b,r)})},o.prototype.search=function(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)},o.prototype.getPredicateFromCols=function(e,t){for(var i=o.getPredicate(e,t),r=[],n={},s=this.parent.getForeignKeyColumns!==void 0,a=s?this.parent.getForeignKeyColumns():[],l=0,h=Object.keys(i);l<h.length;l++){var p=h[l],c=void 0;s&&!this.parent.getColumnByField(p)&&(c=ao(p,a)),c?(this.parent.notify(Zr,{predicate:n,column:c}),n.predicate.predicates.length&&r.push(xe.or(n.predicate.predicates))):r.push(i[""+p])}return r.length&&xe.and(r)},o.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new ae},o.prototype.getAllData=function(){var e=this;this.customQuery=!1;var t=this.getQuery(),i=this.options.dataManager.adaptor.getModuleName;!u(this.parent.getDataModule)&&i&&i()==="ODataV4Adaptor"||t.requiresCount(),this.addDistinct(t);var r={requestType:is,query:t,filterChoiceCount:null},n="filterModel";r[""+n]=this,this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(r.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(_t,r,function(s){s.filterChoiceCount=u(s.filterChoiceCount)?1e3:s.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==s.filterChoiceCount&&(e.parent.filterSettings.itemsCount=s.filterChoiceCount),e.infiniteRenderMod||t.take(s.filterChoiceCount),(!s.query.distincts.length||e.infiniteRenderMod)&&(e.customQuery=!0,e.queryGenerate(t)),e.infiniteRenderMod&&(e.infiniteInitialLoad=!!u(e.fullData),e.makeInfiniteScrollRequest(t)),e.parent.dataSource&&"result"in e.parent.dataSource?e.filterEvent(s,t):e.processDataOperation(t,!0)})},o.prototype.addDistinct=function(e){var t=this,i=A.distinct(this.options.filteredColumns,"field");i.indexOf(this.options.column.field)<=-1&&(i=i.concat(this.options.column.field));var r=this.options.dataManager.adaptor.getModuleName;if(r&&r()==="ODataV4Adaptor"&&this.parent&&this.parent.query instanceof ae)for(var n=this.parent.query,s=0;s<n.queries.length;s++){var a=n.queries[parseInt(s.toString(),10)];a.fn==="onWhere"&&(this.getPredicateFields(a.e),this.queryFilteredColumn.map(function(c){i.indexOf(c)===-1&&i.push(c)}),this.queryFilteredColumn=[])}if(this.infiniteRenderMod||e.distinct(i),this.infiniteRenderMod&&!this.options.isRemote&&this.sInput.value===""){this.options.dataSource=this.options.dataSource instanceof _?this.options.dataSource:new _(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice();var l=new ae;this.queryGenerate(l);var h=new _(this.options.dataSource.dataSource).executeLocal(l);this.options.dataSource=new _(A.distinct(h,this.options.column.field,!0)),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof _?this.options.column.dataSource:new _(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(c,d){return Object.assign({},c,t.options.column.dataSource.dataSource.json[d])}))}else if(this.infiniteRenderMod&&this.options.isRemote){e.select(this.options.column.field),e.sortBy(this.options.column.field,"ascending");var p=this.options.dataManager.adaptor.getModuleName;p&&p()&&(p()==="ODataV4Adaptor"||p()==="WebApiAdaptor"||p()==="CustomDataAdaptor"||p()==="GraphQLAdaptor"||p()==="ODataAdaptor")&&e.distinct(i)}return e},o.prototype.getPredicateFields=function(e){var t=this;e.isComplex&&e.predicates?e.predicates.forEach(function(i){Array.isArray(i)?i.forEach(function(r){return t.getPredicateFields(r)}):t.getPredicateFields(i)}):e.field&&!e.isComplex&&this.queryFilteredColumn.indexOf(e.field)<=-1&&(this.queryFilteredColumn=this.queryFilteredColumn.concat(A.distinct([e.field],"field")))},o.prototype.filterEvent=function(e,t){var i=this,r=Pd(e,t);this.parent.trigger(Rs,r.state),this.addInfiniteScrollEvent(t);var n=r.deffered;n.promise.then(function(s){i.infiniteDataCount=i.infiniteRenderMod&&!i.infiniteDataCount?s.count:i.infiniteDataCount;var a=i.infiniteRenderMod?s.result:s;i.dataSuccess(a)})},o.prototype.addInfiniteScrollEvent=function(e){this.infiniteRenderMod&&(this.infiniteQuery=e.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),x.add(this.cBox,"scroll",this.infiniteScrollHandler,this),x.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),x.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML=""))},o.prototype.infiniteScrollMouseKeyDownHandler=function(){x.remove(this.cBox,"scroll",this.infiniteScrollHandler)},o.prototype.infiniteScrollMouseKeyUpHandler=function(e){var t=this;x.add(this.cBox,"scroll",this.infiniteScrollHandler,this);var i=this.cBox;i.children.length>1&&(i.scrollTop>=i.scrollHeight-i.offsetHeight||i.scrollTop<=0)&&this.infiniteScrollHandler(),Wt.timer=setTimeout(function(){t.clickHandler(e),Wt.timer=null},0)},o.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},o.prototype.showMask=function(){var e=5,t,i=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist"});i.style.zIndex="10";var r=this.cBox;if(this.removeMask(),r){var n=getComputedStyle(r),s=Kr(r),a=r.children.length?parseInt(n.height,10):Math.floor(parseInt(n.height.split("px")[0],10))-5;this.parent.enableAdaptiveUI&&this.infiniteRenderMod&&(i.style.height=a-s+"px",this.dlg.querySelector(".e-dlg-content").style.overflow="hidden");var l=this.isExcel&&!r.children.length&&!this.dlg.classList.contains("e-excelfilter")?"":getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor;i.style.cssText="width: "+n.width+"; min-height: "+n.minHeight+"; height: "+a+"px; margin: "+n.margin+"; border-style: "+n.borderStyle+"; border-width: "+n.borderWidth+"; border-color: "+n.borderColor+"; position: absolute; background-color: "+l+";",e=Math.floor(a/s),e=r.children.length>e?r.children.length:e,t=s+"px"}var h='<div class="e-ftrchk e-mask-ftrchk"><div class="e-checkbox-wrapper"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";if(i.innerHTML="",!r.children.length){this.spinner.insertAdjacentHTML("beforebegin",h),this.spinner.parentElement.querySelector(".e-ftrchk.e-mask-ftrchk").style.cssText="width: 100%; height: "+t+";",this.spinner.parentElement.querySelector(".e-checkbox-wrapper").style.width="100%";var p=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.spinner.insertBefore(i,this.cBox);for(var c=0;e&&c<e;c++){i.innerHTML+=h,i.lastElementChild.style.cssText="width: 100%; height: "+t+";",i.lastElementChild.querySelector(".e-checkbox-wrapper").style.width="100%";var p=[].slice.call(i.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.cBox&&(i.scrollTop=this.cBox.scrollTop)},o.prototype.removeMask=function(){var e=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");if(e.length)for(var t=0;t<e.length;t++)fe(e[t]);var i=this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist");i&&fe(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},o.prototype.infiniteScrollHandler=function(){var e=this.cBox;e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(jr([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+=this.prevInfiniteScrollDirection==="down"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,St(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>this.parent.filterSettings.itemsCount*3&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(jr([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-=this.prevInfiniteScrollDirection==="up"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,Aa([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<this.parent.filterSettings.itemsCount*3&&(jr([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,Aa([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)),this.cBox),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},o.prototype.makeInfiniteScrollRequest=function(e){var t=this;!this.infiniteInitialLoad&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?setTimeout(function(){t.infiniteQueryExecutionPending&&t.showMask()},500):this.infiniteInitialLoad||(fn({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),ji(this.spinner));var i="fn";if(this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(var r=0;r<this.infiniteQuery.queries.length;r++)(this.infiniteQuery.queries[r][""+i]==="onTake"||this.infiniteQuery.queries[r][""+i]==="onSkip")&&(this.infiniteQuery.queries.splice(r,1),r--);var n=!!e;if(e=e||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,e.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(e.take(this.parent.filterSettings.itemsCount*3),this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount*2):e.take(this.parent.filterSettings.itemsCount),!n)if(this.parent.dataSource&&"result"in this.parent.dataSource){var s={requestType:is,query:e,filterChoiceCount:null,filterModel:this};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(s.filterChoiceCount=this.parent.filterSettings.itemsCount),this.filterEvent(s,e)}else this.processDataOperation(e),this.infiniteQueryExecutionPending=!0},o.prototype.processDataOperation=function(e,t){var i=this;this.options.dataSource=this.options.dataSource instanceof _?this.options.dataSource:new _(this.options.dataSource);var r=[],n=[];if(this.isForeignColumn(this.options.column)&&t){var s="result"in this.options.column.dataSource?new _(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,r.push(s.executeQuery(this.foreignKeyQuery)),n.push(function(l){return i.foreignKeyData=l})}if(this.addInfiniteScrollEvent(e),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote){var a=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field;this.options.dataSource.executeQuery(new ae().sortBy(a,A.fnAscending)).then(function(l){i.options.dataSource.dataSource.json=l.result,i.executeQueryOperations(e,r,n)})}else this.executeQueryOperations(e,r,n)},o.prototype.executeQueryOperations=function(e,t,i){var r=this;t.push(this.options.dataSource.executeQuery(e)),i.push(this.dataSuccess.bind(this));var n=0;Promise.all(t).then(function(s){r.infiniteQueryExecutionPending=r.infiniteRenderMod?!1:r.infiniteQueryExecutionPending;for(var a=0;a<s.length;a++)r.infiniteDataCount=r.infiniteRenderMod&&!r.infiniteDataCount?s[a].count:r.infiniteDataCount,i[n++](s[parseInt(a.toString(),10)].result)}).catch(function(){r.infiniteRenderMod&&r.parent.filterSettings&&r.parent.filterSettings.loadingIndicator==="Shimmer"&&r.parent.showMaskRow(void 0,r.dialogObj.element)})},o.prototype.dataSuccess=function(e){if(!(!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||e.length===0))){this.fullData=e;var t={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify(zp,t),t.executeQuery){var i=new ae;this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(i),this.isExecuteLocal=!1);var r=new _(t.dataSource).executeLocal(i),n=this.options.column;this.filteredData=o.getDistinct(r,this.options.field,n,this.foreignKeyData,this).records||[]}var s=t.executeQuery?this.filteredData:t.dataSource;this.processDataSource(null,!0,s,t),(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&(this.sInput?this.sInput.focus():this.dlg.querySelector(".e-chk-hidden")&&this.dlg.querySelector(".e-ftrchk")&&(this.dlg.querySelector(".e-chk-hidden").focus(),this.dlg.querySelector(".e-ftrchk").classList.add("e-chkfocus"))),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1);var a={requestType:Ku,columnName:this.options.field,columnType:this.options.type},l="filterModel";a[""+l]=this,this.parent.notify(fa,a),this.isCheckboxFilterTemplate&&gn(this.spinner)}},o.prototype.queryGenerate=function(e){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var t=this.options.dataManager.adaptor.getModuleName;if(!u(this.parent.getDataModule)&&t&&t()==="ODataV4Adaptor")this.parent.getDataModule().searchQuery(e);else{var i=this.parent.searchSettings,r=i.fields.length?i.fields:this.options.columns.map(function(h){return h.field});e.search(i.key,r,i.operator,i.ignoreCase,i.ignoreAccent)}}if(this.options.filteredColumns.length){for(var n=[],s=0;s<this.options.filteredColumns.length;s++){var a=this.options.filteredColumns[parseInt(s.toString(),10)];this.options.uid?(a.uid=a.uid||this.parent.getColumnByField(a.field).uid,a.uid!==this.options.uid&&n.push(this.options.filteredColumns[parseInt(s.toString(),10)])):a.field!==this.options.field&&n.push(this.options.filteredColumns[parseInt(s.toString(),10)])}var l=this.getPredicateFromCols(n,this.isExecuteLocal);l&&e.where(l)}},o.prototype.processDataSource=function(e,t,i,r){ji(this.spinner),this.isExecuteLocal=!0,this.updateResult(),this.isExecuteLocal=!1;var n={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(ic,n),this.isCheckboxFilterTemplate=n.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask():this.createFilterItems(i,t,r)},o.prototype.processSearch=function(e){this.processDataOperation(e)},o.prototype.updateResult=function(){this.result={};var e=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),t=new ae;e&&t.where(e),this.parent.notify($p,{query:t});for(var i=new _(this.fullData).executeLocal(t),r=0,n=i;r<n.length;r++){var s=n[r];this.result[Si(this.options.field,s)]=!0}},o.prototype.clickHandler=function(e){var t;u(Wt.timer)||clearTimeout(Wt.timer);var i=e.target;if(!(!u(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&T(i,"e-mask-ftrchk"))){var r=T(i,"e-checkbox-wrapper");if(T(i,"e-searchbox")&&this.searchBoxClick(e),r&&!this.isCheckboxFilterTemplate){var n=r.querySelector(".e-selectall");if(n)this.updateAllCBoxes(!n.classList.contains("e-check"));else if(lr(r.parentElement),this.infiniteRenderMod&&!r.parentElement.querySelector(".e-add-current")){this.localInfiniteSelectionInteracted=!0;var s=this.options.allowCaseSensitive,a=r.parentElement.querySelector(".e-frame"),l=a.previousSibling,h=l.checked?"equal":"notequal",p=l.checked?"or":"and",c={field:this.options.field,predicate:p,uid:this.options.uid,operator:h,type:this.options.type,matchCase:s,ignoreAccent:this.options.ignoreAccent},d=this.values[T(l,"e-ftrchk").getAttribute("uid")];if(this.updateInfiniteManualSelectPred(c,d),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length){var f=this.getPredicateFromCols((t=this.options.filteredColumns).concat.apply(t,this.infiniteManualSelectMaintainPred),!0),g=new ae;f&&g.where(f);var m=new _(this.infinitePermenantLocalData).executeLocal(g);this.options.parentTotalDataCount!==m.length&&(this.options.parentTotalDataCount=m.length),!this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[])}this.infiniteUnloadParentExistPred.length&&(this.options.parentTotalDataCount===this.infiniteDataCount||!this.options.parentTotalDataCount)&&(this.infiniteUnloadParentExistPred=[])}this.updateIndeterminatenBtn(),r.querySelector(".e-chk-hidden").focus()}this.setFocus(T(r,"e-ftrchk"))}},o.prototype.updateInfiniteManualSelectPred=function(e,t){for(var i=0;i<this.infiniteManualSelectMaintainPred.length;i++){var r=this.infiniteManualSelectMaintainPred[i];if(r.value+""==t+""&&(r.operator==="equal"||r.operator==="notequal")){this.infiniteManualSelectMaintainPred.splice(i,1);break}}(e.predicate==="or"&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll)||e.predicate==="and"&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll))&&(this.infiniteManualSelectMaintainPred.push(Q({},{value:t},e)),e.predicate==="or"?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},o.prototype.focusNextOrPrev=function(e,t){var i=e.key==="ArrowUp"?t.indexOf(document.activeElement)-1:t.indexOf(document.activeElement)+1,r=t[(i+t.length)%t.length];if(r){r.focus();var n=r.classList.contains("e-chk-hidden")?T(r,"e-ftrchk"):r;this.setFocus(n)}},o.prototype.keyupHandler=function(e){if((e.key==="Tab"||(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey)&&this.setFocus(T(e.target,"e-ftrchk")),(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey&&this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"){e.preventDefault();var t=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));this.focusNextOrPrev(e,t)}},o.prototype.setFocus=function(e){var t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e!==t&&e.classList.add("e-chkfocus")},o.prototype.updateAllCBoxes=function(e){this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=e,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]);for(var t=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(s){return s.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)")),i=0,r=t;i<r.length;i++){var n=r[i];nn(n,e),Vi(n.previousSibling,e)}},o.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},o.prototype.createCheckbox=function(e,t,i){var r=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Vi(r.querySelector("input"),t);var n=r.querySelector(".e-label"),s=lo({},i,{column:this.options.column,parent:this.parent}),a=this.options.disableHtmlEncode?"textContent":"innerHTML";n[""+a]=!u(e)&&e.toString().length?this.parent.enableHtmlSanitizer?Xt.sanitize(e):e:this.getLocalizedLabel("Blanks");var l=Ei("cbox");if(n.setAttribute("id",l+"cboxLabel"),r.querySelector("input").setAttribute("aria-labelledby",n.id),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),typeof e=="boolean"&&(n.innerHTML=e===!0?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),B([n],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&i[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection")){n.innerHTML="";var h=this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string"&&!(this.options.column.filter.itemTemplate.prototype&&this.options.column.filter.itemTemplate.prototype.CSPTemplate),p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;h||p?(this.options.template(s,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):St(n,this.options.template(s,this.parent,"filterItemTemplate",null,null,null,null,this.parent.root))}return r},o.prototype.updateIndeterminatenBtn=function(){var e=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,t=[],i=!1,r=this.infiniteRenderMod?this.sBox.querySelector(".e-selectall"):this.cBox.querySelector(".e-selectall"),n=this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(l){return l.querySelector(".e-check")}).length:this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length;this.cBox.querySelector(".e-add-current")&&(e-=1);var s;this.options.isResponsiveFilter||(s=this.dialogObj.btnObj[0],s.disabled=!1);var a=r.previousSibling;Vi(a,!1),a.indeterminate=!1,this.infiniteRenderMod&&this.sInput.value===""&&!this.options.parentCurrentViewDataCount&&!this.localInfiniteSelectionInteracted&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll&&!n)&&(e!==n||e===n)?n=0:this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!n||e===n)&&this.infiniteLocalSelectAll&&(n?e+=this.infiniteUnloadParentExistPred.length:n+=this.infiniteUnloadParentExistPred.length),e===n?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),t=["e-check"],Vi(a,!0)):n?(t=["e-stop"],a.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),t=["e-uncheck"],i=!0,s&&(s.disabled=!0)),s&&(this.filterState=!s.disabled,s.dataBind()),G([r],["e-check","e-stop","e-uncheck"]),B([r],t),this.parent.notify(Ls,{disabled:i})},o.prototype.createFilterItems=function(e,t,i){var r,n,s,a=this.parent.createElement("div"),l,h=!1;this.options.isResponsiveFilter||(l=this.dialogObj.btnObj[0]);var p=-1,c="ejValue";i.executeQuery||(c=i.field);for(var d=0;d<e.length;d++){var f=oe(c,e[parseInt(d.toString(),10)]);(f===""||u(f))&&(p=p+1)}if(this.infiniteRenderMod||(this.itemsCnt=p!==-1?e.length-p:e.length),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask(),e.length&&!this.renderEmpty){var g=this.getLocalizedLabel("SelectAll"),m=this.cBox.querySelector(".e-checkfltrnmdiv");m&&m.classList.remove("e-checkfltrnmdiv");var v=this.createCheckbox(g,!1,(r={},r[this.options.field]=g,r));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?B([v],this.parent.cssClass.split(" ")):B([v],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod){var y=as(Ei("cbox"),v,"e-ftrchk");y.querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?(y.classList.add("e-infinitescroll"),this.parent.enableAdaptiveUI&&(this.spinner.style.height=this.spinner.offsetHeight-Kr(this.cBox)+"px"),this.sBox.insertBefore(y,this.spinner)):a.appendChild(y)}else this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled"));var R=new xe("field","equal",this.options.field);this.options.foreignKeyValue&&(R=R.or("field","equal",this.options.foreignKeyValue));var b=new _(this.options.filteredColumns).executeLocal(new ae().where(R)).length;if(this.sInput&&this.sInput.value){var E=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,(n={},n[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),n));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?B([E],this.parent.cssClass.split(" ")):B([E],[this.parent.cssClass])),this.infiniteRenderMod&&!u(this.sBox.children[2])&&this.sBox.children[2].innerText!==this.getLocalizedLabel("AddCurrentSelection")||!this.infiniteRenderMod){var k=as(Ei("cbox"),E,"e-ftrchk");if(k.querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod){k.classList.add("e-infinitescroll"),this.sBox.insertBefore(k,this.spinner);var F=this.spinner.querySelector(".e-checkboxlist"),W=Math.ceil(k.getBoundingClientRect().height);F.style.height=parseInt(getComputedStyle(F).height.split("px")[0],10)-W+"px",F.style.minHeight=F.style.height}else a.appendChild(k)}else this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled"))}else if(this.infiniteRenderMod&&!u(this.sBox.children[2])&&this.sBox.children[2].innerText===this.getLocalizedLabel("AddCurrentSelection")){var F=this.spinner.querySelector(".e-checkboxlist"),te=Math.ceil(this.sBox.children[2].getBoundingClientRect().height);F.style.height=parseInt(getComputedStyle(F).height.split("px")[0],10)+te+"px",F.style.minHeight=F.style.height,fe(this.sBox.children[2])}for(var ne=void 0,d=0;d<e.length;d++){var ye=Ei("cbox");this.values[""+ye]=oe(c,e[parseInt(d.toString(),10)]);var L=oe(this.options.field,e[parseInt(d.toString(),10)]);this.options.formatFn&&(L=this.valueFormatter.toView(L,this.options.formatFn));var P={value:L,column:this.options.column,data:e[parseInt(d.toString(),10)]};if(this.parent.notify(Sp,P),L=P.value,L===""||u(L)){if(ne)continue;ne=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(L,this.infiniteUnloadParentExistPred);var D=this.localInfiniteSelectAllClicked?this.createCheckbox(L,this.infiniteLocalSelectAll,oe("dataObj",e[d])):this.createCheckbox(L,this.getCheckedState(b,this.values[""+ye]),oe("dataObj",e[d]));a.appendChild(as(ye,D,"e-ftrchk")),this.infiniteRenderMod&&(a.lastChild.style.height=Kr(this.cBox)+"px")}var N=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&jr([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteRenderMod&&((s=this.infiniteLoadedElem).push.apply(s,[].slice.call(a.children)),this.itemsCnt=p!==-1?this.infiniteLoadedElem.length-p:this.infiniteLoadedElem.length),this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]),St(this.cBox,[].slice.call(a.children)),this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(N-this.cBox.scrollTop)),this.updateIndeterminatenBtn(),this.infiniteRenderMod?l&&l.disabled?h=!0:h=!1:(l&&(l.disabled=!1),h=!1)}else{if(a.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod){var y=this.sBox.querySelector(".e-ftrchk .e-selectall");if(y){var $=y.parentElement.parentElement;y.classList.contains("e-check")?lr($):y.classList.contains("e-stop")&&(lr($),y.classList.remove("e-stop"),lr($)),y.previousSibling.disabled=!0,y.parentElement.classList.add("e-checkbox-disabled")}var V=this.sBox.querySelector(".e-ftrchk .e-add-current");if(V){var H=V.parentElement.parentElement;V.classList.contains("e-check")&&lr(H),V.previousSibling.disabled=!0,V.parentElement.classList.add("e-checkbox-disabled")}}this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),St(this.cBox.children[0],[].slice.call(a.children)),l&&(l.disabled=!0),h=!0,this.filterState=!h}l&&e.length&&(this.filterState=!l.disabled,l.dataBind());var z={requestType:is,dataSource:this.renderEmpty?[]:e},Z="filterModel";z[""+Z]=this,this.parent.notify(fa,z),this.parent.notify(Ls,{disabled:h}),this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px"),gn(this.spinner)},o.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.value instanceof Date?this.valueFormatter.toView(r.value,this.options.formatFn):r.value,s=this.options.column;if(s.isForeignColumn()){var a=Gi(s,{},n,this.foreignKeyData)[0];e=oe(s.foreignKeyField,a)}e===n&&(r.operator==="equal"||r.operator==="notequal")&&(this.infiniteManualSelectMaintainPred.push(t[i]),t.splice(i,1),i--)}},o.prototype.getCheckedState=function(e,t){if(!this.isFiltered||!e)return!0;var i=this.sInput&&this.sInput.value?!0:this.result[""+t];return this.infiniteRenderMod?i:this.options.operator==="notequal"?!i:i},o.getDistinct=function(e,t,i,r,n){for(var s=e.length,a=[],l,h="ejValue",p={},c=i&&i.isForeignColumn?i.isForeignColumn():!1;s--;){if(l=e[parseInt(s.toString(),10)],i&&i.type==="dateonly"&&typeof l[""+t]=="string"&&l[""+t]){var d=l[""+t].split(/[^0-9.]/);l[""+t]=new Date(parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}l=Si(t,l);var f=typeof l=="string"&&!u(n)&&!u(n.parent)&&!u(n.parent.filterSettings)&&!u(n.parent.filterSettings.enableCaseSensitivity)?l.toLowerCase():l;if(!(f in p)){var g={};if(g[""+h]=l,p[""+f]=!0,c){var m=Gi(i,{},l,r)[0];mi(bl,m,e[parseInt(s.toString(),10)]),l=oe(i.foreignKeyValue,m)}mi(t,u(l)?null:l,g),mi("dataObj",e[parseInt(s.toString(),10)],g),a.push(g)}}return A.group(A.sort(a,t,A.fnAscending),"ejValue")},o.getPredicate=function(e,t){for(var i=A.distinct(e,"field",!0)||[],r=[],n={},s=0;s<i.length;s++)r=new _(e).executeLocal(new ae().where("field","equal",i[parseInt(s.toString(),10)].field)),r.length!==0&&(n[i[parseInt(s.toString(),10)].field]=o.generatePredicate(r,t));return n},o.generatePredicate=function(e,t){var i=e?e.length:0,r,n="or",s=o.updateDateFilter(e[0]);s.ignoreAccent=u(s.ignoreAccent)?!1:s.ignoreAccent,s.type==="date"||s.type==="datetime"||s.type==="dateonly"?r=Ni(s,s.type,t):r=s.ejpredicate?s.ejpredicate:new xe(s.field,s.operator,s.value,!o.getCaseValue(s),s.ignoreAccent);for(var a=1;a<i;a++)e[parseInt(a.toString(),10)]=o.updateDateFilter(e[parseInt(a.toString(),10)]),i>2&&a>1&&(e[a].predicate==="or"&&e[a-1].predicate==="or"||e[a].predicate==="and"&&e[a-1].predicate==="and")?e[a].type==="date"||e[a].type==="datetime"||e[a].type==="dateonly"?r.predicates.push(Ni(e[parseInt(a.toString(),10)],e[a].type,t)):r.predicates.push(new xe(e[a].field,e[parseInt(a.toString(),10)].operator,e[parseInt(a.toString(),10)].value,!o.getCaseValue(e[parseInt(a.toString(),10)]),e[parseInt(a.toString(),10)].ignoreAccent)):e[a].type==="date"||e[a].type==="datetime"||e[a].type==="dateonly"?e[parseInt(a.toString(),10)].predicate==="and"&&e[parseInt(a.toString(),10)].operator==="equal"?r=r[""+n](Ni(e[parseInt(a.toString(),10)],e[parseInt(a.toString(),10)].type,t),e[parseInt(a.toString(),10)].type,e[parseInt(a.toString(),10)].ignoreAccent):r=r[e[parseInt(a.toString(),10)].predicate](Ni(e[parseInt(a.toString(),10)],e[parseInt(a.toString(),10)].type,t),e[parseInt(a.toString(),10)].type,e[parseInt(a.toString(),10)].ignoreAccent):r=e[parseInt(a.toString(),10)].ejpredicate?r[e[parseInt(a.toString(),10)].predicate](e[parseInt(a.toString(),10)].ejpredicate):r[e[parseInt(a.toString(),10)].predicate](e[parseInt(a.toString(),10)].field,e[parseInt(a.toString(),10)].operator,e[parseInt(a.toString(),10)].value,!o.getCaseValue(e[parseInt(a.toString(),10)]),e[parseInt(a.toString(),10)].ignoreAccent);return r||null},o.getCaseValue=function(e){return u(e.matchCase)?!(e.type==="string"||u(e.type)&&typeof e.value=="string"):e.matchCase},o.updateDateFilter=function(e){return(e.type==="date"||e.type==="datetime"||e.type==="dateonly"||e.value instanceof Date)&&(e.type=e.type||"date"),e},o}(),Rt="",on="",hr="",Qe=[],Kd="e-active",wn="";function ur(o,e,t,i,r,n,s,a,l){!n||Rt===""?hr!==""?(Rt=hr+String.fromCharCode(o),hr=""):Rt+=String.fromCharCode(o):Rt===on&&(hr=String.fromCharCode(o)),a?(setTimeout(function(){hr=""},700),setTimeout(function(){Rt=""},3e3)):setTimeout(function(){Rt=""},1e3);var h;if(Rt=Rt.toLowerCase(),wn===r&&on===Rt&&!l){for(var p=0;p<Qe.length;p++){if(Qe[p].classList.contains(Kd)){h=p;break}if(s&&Qe[p].textContent.toLowerCase()===s.toLowerCase()){h=p;break}}return h=h+1,a?Qe[h]&&Qe.length-1!==h?Qe[h]:Qe[Qe.length]:Qe[h]?Qe[h]:Qe[0]}else{var c=e,d=Rt.length,f=void 0,g=void 0;t=t?t+1:0;var p=t;Qe=[];do p===c.length&&(p=-1),p===-1?h=0:h=p,g=c[h],f=g.innerText.toLowerCase(),f.substr(0,d)===Rt&&Qe.push(c[h]),p++;while(p!==t);if(on=Rt,wn=r,a){for(var m=!1,v=0;v<Qe.length;v++)if(s&&Qe[v].textContent.toLowerCase()===s.toLowerCase()){h=v,m=!0;break}return s&&m&&(h=h+1),Qe[h]?Qe[h]:Qe[0]}return Qe[0]}}function Qd(o){wn===o&&(wn="",on="",Rt="",Qe=[])}var Yd=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wi=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ls={TEXTSHAPE:"e-skeleton-text",CIRCLESHAPE:"e-skeleton-circle",SQUARESHAPE:"e-skeleton-square",RECTANGLESHAPE:"e-skeleton-rectangle",WAVEEFFECT:"e-shimmer-wave",PULSEEFFECT:"e-shimmer-pulse",FADEEFFECT:"e-shimmer-fade",VISIBLENONE:"e-visible-none"},La;(function(o){o.Text="Text",o.Circle="Circle",o.Square="Square",o.Rectangle="Rectangle"})(La||(La={}));var Fa;(function(o){o.Wave="Wave",o.Fade="Fade",o.Pulse="Pulse",o.None="None"})(Fa||(Fa={}));var Xd=function(o){Yd(e,o);function e(t,i){return o.call(this,t,i)||this}return e.prototype.getModuleName=function(){return"skeleton"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.preRender=function(){this.element.id||(this.element.id=an("e-"+this.getModuleName())),this.updateCssClass(),de(this.element,{role:"alert","aria-busy":"true","aria-live":"polite","aria-label":this.label})},e.prototype.render=function(){this.initialize()},e.prototype.onPropertyChanged=function(t,i){for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"width":case"height":this.updateDimension();break;case"shape":this.updateShape();break;case"shimmerEffect":this.updateEffect();break;case"visible":this.updateVisibility();break;case"label":this.element.setAttribute("aria-label",this.label);break;case"cssClass":i.cssClass&&G([this.element],i.cssClass.split(" ")),this.updateCssClass();break}}},e.prototype.destroy=function(){o.prototype.destroy.call(this);var t=["role","aria-live","aria-busy","aria-label"],i=[];this.cssClass&&(i=i.concat(this.cssClass.split(" ")));for(var r=0;r<t.length;r++)this.element.removeAttribute(t[parseInt(r.toString(),10)]);i=i.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[]),i=i.concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[]),G([this.element],i)},e.prototype.initialize=function(){this.updateShape(),this.updateEffect(),this.updateVisibility()},e.prototype.updateShape=function(){if(!u(this.shape)){var t=ls[this.shape.toUpperCase()+"SHAPE"],i=this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[];this.updateDimension(),i&&G([this.element],i),B([this.element],[t])}},e.prototype.updateDimension=function(){var t=!this.width&&["Text","Rectangle"].indexOf(this.shape)>-1?"100%":ke(this.width),i=["Circle","Square"].indexOf(this.shape)>-1?t:ke(this.height);this.element.style.width=t,this.element.style.height=i},e.prototype.updateEffect=function(){var t=this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[];t&&G([this.element],t),u(this.shimmerEffect)||B([this.element],[ls[this.shimmerEffect.toUpperCase()+"EFFECT"]])},e.prototype.updateVisibility=function(){this.element.classList[this.visible?"remove":"add"](ls.VISIBLENONE)},e.prototype.updateCssClass=function(){this.cssClass&&B([this.element],this.cssClass.split(" "))},wi([C("")],e.prototype,"width",void 0),wi([C("")],e.prototype,"height",void 0),wi([C(!0)],e.prototype,"visible",void 0),wi([C("Text")],e.prototype,"shape",void 0),wi([C("Wave")],e.prototype,"shimmerEffect",void 0),wi([C("Loading...")],e.prototype,"label",void 0),wi([C("")],e.prototype,"cssClass",void 0),e=wi([ki],e),e}(gi),jl=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Oe=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},Jd=function(o){jl(e,o);function e(){return o!==null&&o.apply(this,arguments)||this}return Oe([C()],e.prototype,"text",void 0),Oe([C()],e.prototype,"value",void 0),Oe([C()],e.prototype,"iconCss",void 0),Oe([C()],e.prototype,"groupBy",void 0),Oe([C()],e.prototype,"htmlAttributes",void 0),Oe([C()],e.prototype,"disabled",void 0),e}(_e),X={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group",virtualList:"e-list-item e-virtual-list"},$d="ItemTemplate",Zd="DisplayTemplate",ef="SpinnerTemplate",tf="ValueTemplate",rf="GroupTemplate",nf="HeaderTemplate",sf="FooterTemplate",of="NoRecordsTemplate",af="ActionFailureTemplate",lf="e-hide-group-header",hf=function(o){jl(e,o);function e(t,i){var r=o.call(this,t,i)||this;return r.preventChange=!1,r.isPreventChange=!1,r.isDynamicDataChange=!1,r.addedNewItem=!1,r.isAddNewItemTemplate=!1,r.isRequesting=!1,r.isVirtualizationEnabled=!1,r.isCustomDataUpdated=!1,r.isAllowFiltering=!1,r.virtualizedItemsCount=0,r.isCheckBoxSelection=!1,r.totalItemCount=0,r.dataCount=0,r.remoteDataCount=-1,r.isRemoteDataUpdated=!1,r.isIncrementalRequest=!1,r.itemCount=30,r.virtualListHeight=0,r.isVirtualScrolling=!1,r.isPreventScrollAction=!1,r.scrollPreStartIndex=0,r.isScrollActionTriggered=!1,r.previousStartIndex=0,r.isMouseScrollAction=!1,r.isKeyBoardAction=!1,r.isScrollChanged=!1,r.isUpwardScrolling=!1,r.startIndex=0,r.currentPageNumber=0,r.pageCount=0,r.isPreventKeyAction=!1,r.generatedDataObject={},r.skeletonCount=32,r.isVirtualTrackHeight=!1,r.virtualSelectAll=!1,r.isVirtualReorder=!1,r.incrementalQueryString="",r.incrementalEndIndex=0,r.incrementalStartIndex=0,r.incrementalPreQueryString="",r.isObjectCustomValue=!1,r.appendUncheckList=!1,r.getInitialData=!1,r.preventPopupOpen=!0,r.virtualSelectAllState=!1,r.CurrentEvent=null,r.isDynamicData=!1,r.isPrimitiveData=!1,r.isCustomFiltering=!1,r.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r.selectedValueInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r}return e.prototype.getPropObject=function(t,i,r){var n=new Object,s=new Object,a=function(h){return h};n[a(t)]=i[a(t)],s[a(t)]=r[a(t)];var l=new Object;return l.newProperty=n,l.oldProperty=s,l},e.prototype.getValueByText=function(t,i,r){var n=null;return u(this.listData)||(i?n=this.checkValueCase(t,!0,r):n=this.checkValueCase(t,!1,r)),n},e.prototype.checkValueCase=function(t,i,r,n){var s=this,a=null;if(n&&(a=t),!u(this.listData)){var l=this.listData,h=this.fields,p=this.typeOfData(l).typeof;if(p==="string"||p==="number"||p==="boolean")for(var c=0,d=l;c<d.length;c++){var f=d[c];u(f)||(r?a=this.checkingAccent(String(f),t,i):i?this.checkIgnoreCase(String(f),t)&&(a=this.getItemValue(String(f),t,i)):this.checkNonIgnoreCase(String(f),t)&&(a=this.getItemValue(String(f),t,i,n)))}else if(i)l.filter(function(m){var v=oe(h.value,m);!u(v)&&s.checkIgnoreCase(oe(h.text,m).toString(),t)&&(a=oe(h.value,m))});else if(n){var g=null;g=a,l.filter(function(m){var v=oe(h.value,m);!u(v)&&!u(a)&&v.toString()===g.toString()&&(a=oe(h.text,m))})}else l.filter(function(m){s.checkNonIgnoreCase(oe(h.text,m),t)&&(a=oe(h.value,m))})}return a},e.prototype.checkingAccent=function(t,i,r){var n=A.ignoreDiacritics(String(t)),s=A.ignoreDiacritics(i.toString()),a=null;return r?this.checkIgnoreCase(n,s)&&(a=this.getItemValue(String(t),i,r)):this.checkNonIgnoreCase(String(t),i)&&(a=this.getItemValue(String(t),i,r)),a},e.prototype.checkIgnoreCase=function(t,i){return String(t).toLowerCase()===i.toString().toLowerCase()},e.prototype.checkNonIgnoreCase=function(t,i){return String(t)===i.toString()},e.prototype.getItemValue=function(t,i,r,n){var s=null,a=this.listData,l=this.typeOfData(a).typeof;return n?s=t.toString():r?s=l==="string"?String(t):this.getFormattedValue(String(t)):s=l==="string"?i:this.getFormattedValue(i),s},e.prototype.templateCompiler=function(t){var i=!1;if(typeof t!="function"&&t)try{i=!!Lt(t,document).length}catch{i=!1}return i},e.prototype.l10nUpdate=function(t){var i=this.getModuleName()==="listbox"?this.ulElement:this.list;if(!u(this.noRecordsTemplate)&&this.noRecordsTemplate!=="No records found"||this.actionFailureTemplate!=="Request failed"){var r=t?this.actionFailureTemplate:this.noRecordsTemplate,n=void 0,s=t?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";var a=this.templateCompiler(r);typeof r!="function"&&a?n=Be(Ye(r,document).innerHTML.trim()):n=Be(r);var l=t?"actionFailureTemplate":"noRecordsTemplate",h=void 0;if(this.isReact&&typeof r=="function"?h=n({},this,l,s,this.isStringTemplate,null):h=n({},this,l,s,this.isStringTemplate,null,i),h&&h.length>0)for(var p=0;p<h.length;p++)if(this.getModuleName()==="listbox"&&l==="noRecordsTemplate")if(h[p].nodeName==="#text"){var c=this.createElement("li");c.textContent=h[p].textContent,c.classList.add("e-list-nrt"),c.setAttribute("role","option"),i.appendChild(c)}else h[p].classList.add("e-list-nr-template"),i.appendChild(h[p]);else(h[p]instanceof HTMLElement||h[p]instanceof Text&&h[p].textContent!=="")&&i.appendChild(h[p]);this.renderReactTemplates()}else{var d={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},f=new $i(this.getLocaleName(),{},this.locale);f.getConstant("actionFailureTemplate")!==""||f.getConstant("noRecordsTemplate")!==""?this.l10n=f:this.l10n=new $i(this.getModuleName()==="listbox"?"listbox":this.getModuleName()==="mention"?"mention":"dropdowns",d,this.locale);var g=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if(this.getModuleName()==="listbox"){var c=this.createElement("li");c.textContent=g,i.appendChild(c),c.classList.add("e-list-nrt"),c.setAttribute("role","option")}else u(i)||(i.innerHTML=g)}},e.prototype.checkAndResetCache=function(){this.isVirtualizationEnabled&&(this.generatedDataObject={},this.virtualItemStartIndex=this.virtualItemEndIndex=0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.selectedValueInfo=null)},e.prototype.updateIncrementalInfo=function(t,i){this.viewPortInfo.startIndex=t,this.viewPortInfo.endIndex=i,this.updateVirtualItemIndex(),this.isIncrementalRequest=!0,this.resetList(this.dataSource,this.fields,this.query),this.isIncrementalRequest=!1},e.prototype.updateIncrementalView=function(t,i){this.viewPortInfo.startIndex=t,this.viewPortInfo.endIndex=i,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+X.li),this.ulElement=this.list.querySelector("ul")},e.prototype.updateVirtualItemIndex=function(){this.virtualItemStartIndex=this.viewPortInfo.startIndex,this.virtualItemEndIndex=this.viewPortInfo.endIndex,this.virtualListInfo=this.viewPortInfo},e.prototype.getFilteringSkeletonCount=function(){var t=this.skeletonCount;this.getSkeletonCount(!0),this.skeletonCount=this.dataCount<this.itemCount*2&&(!(this.dataSource instanceof _)||this.dataSource instanceof _&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount;var i=!0;if((this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof _)||this.dataSource instanceof _&&this.totalItemCount<=this.itemCount)&&(this.skeletonCount=0,i=!1),!this.list.classList.contains(X.noData)){if(t!==this.skeletonCount&&i?this.UpdateSkeleton(!0,Math.abs(t-this.skeletonCount)):this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl").length>0)this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0&&this.list.querySelector(".e-dropdownbase")){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.list.querySelector(".e-dropdownbase").appendChild(r)}this.list.getElementsByClassName("e-virtual-ddl-content").length>0&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},e.prototype.getSkeletonCount=function(t){this.virtualListHeight=this.listContainerHeight!=null?parseInt(this.listContainerHeight,10):this.virtualListHeight;var i=this.virtualListHeight>0&&this.listItemHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;this.skeletonCount=i*4<this.itemCount?this.itemCount:i*4,this.itemCount=t?this.itemCount:this.skeletonCount,this.virtualItemCount=this.itemCount,this.skeletonCount=Math.floor(this.skeletonCount/2)},e.prototype.GetVirtualTrackHeight=function(){var t=this.totalItemCount===this.viewPortInfo.endIndex?this.totalItemCount*this.listItemHeight-this.itemCount*this.listItemHeight:this.totalItemCount*this.listItemHeight;t=this.isVirtualTrackHeight?0:t;var i="height: "+(t-this.itemCount*this.listItemHeight)+"px;";return(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")&&this.skeletonCount===0?"height: 0px;":i},e.prototype.getTransformValues=function(){var t=this.viewPortInfo.startIndex*this.listItemHeight;t=t-this.skeletonCount*this.listItemHeight,t=this.viewPortInfo.startIndex===0&&this.listData&&this.listData.length===0||this.skeletonCount===0?0:t;var i="transform: translate(0px, "+t+"px);";return i},e.prototype.UpdateSkeleton=function(t,i){var r=this.list.querySelector(".e-virtual-ddl-content"),n=this.list.querySelector(".e-virtual-list");if(r&&(!n||t)&&this.isVirtualizationEnabled)for(var s=t?i:this.skeletonCount,a=0;a<s;a++){var l=this.createElement("li",{className:X.virtualList,styles:"overflow: inherit"});this.isVirtualizationEnabled&&this.itemTemplate&&(l.style.height=this.listItemHeight-parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)+"px");var h=new Xd({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text"});h.appendTo(this.createElement("div")),l.appendChild(h.element),r.firstChild&&r.firstChild.insertBefore(l,r.firstChild.children[0])}},e.prototype.getLocaleName=function(){return"drop-down-base"},e.prototype.getTextByValue=function(t){var i=this.checkValueCase(t,!1,!1,!0);return i},e.prototype.getFormattedValue=function(t){if(this.listData&&this.listData.length){var i=void 0;if(this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?i=this.typeOfData(this.properties.value):i=this.typeOfData(this.listData),typeof oe(this.fields.value?this.fields.value:"value",i.item)=="number"||i.typeof==="number")return parseFloat(t);if(typeof oe(this.fields.value?this.fields.value:"value",i.item)=="boolean"||i.typeof==="boolean")return t==="true"||""+t=="true"}return t},e.prototype.setEnableRtl=function(){u(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?B(this.enableRtlElements,X.rtl):G(this.enableRtlElements,X.rtl))},e.prototype.initialize=function(t){if(this.bindEvent=!0,this.preventPopupOpen=!0,this.actionFailureTemplateId=""+this.element.id+af,this.element.tagName==="UL"){var i=ht.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(i,this.fields)}else if(this.element.tagName==="SELECT"){var r=this.dataSource instanceof Array?this.dataSource.length>0:!u(this.dataSource);r?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,t)},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.updateDataAttribute=function(t){for(var i=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],r={},n=0;n<this.element.attributes.length;n++)i.indexOf(this.element.attributes[n].name)===-1&&!(this.getModuleName()==="dropdownlist"&&this.element.attributes[n].name==="readonly")&&(r[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));Q(r,t,r),this.setProperties({htmlAttributes:r},!0)},e.prototype.renderItemsBySelect=function(){var t=this.element,i=t.querySelectorAll("select>optgroup"),r,n=this.getModuleName()==="multiselect"&&this.isGroupChecking&&i.length>0;r=n?{value:"value",text:"text",groupBy:"categeory"}:r={value:"value",text:"text"};var s=[],a=t.querySelectorAll("select>option");if(this.getJSONfromOption(s,a,r),i.length){for(var l=0;l<i.length;l++){var h=i[l],p={};p[r.text]=h.label,p.isHeader=!0;var c=h.querySelectorAll("option");n?this.getJSONfromOption(s,c,r,h.label):(s.push(p),this.getJSONfromOption(s,c,r))}t.querySelectorAll("select>option")}this.updateFields(r.text,r.value,n?r.groupBy:this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss,this.fields.disabled),this.resetList(s,r)},e.prototype.updateFields=function(t,i,r,n,s,a){var l={fields:{text:t,value:i,groupBy:u(r)?this.fields&&this.fields.groupBy:r,htmlAttributes:u(n)?this.fields&&this.fields.htmlAttributes:n,iconCss:u(s)?this.fields&&this.fields.iconCss:s,disabled:u(a)?this.fields&&this.fields.disabled:a}};this.setProperties(l,!0)},e.prototype.getJSONfromOption=function(t,i,r,n){n===void 0&&(n=null);for(var s=0,a=i;s<a.length;s++){var l=a[s],h={};h[r.text]=l.innerText,h[r.value]=u(l.getAttribute(r.value))?l.innerText:l.getAttribute(r.value),u(n)||(h[r.groupBy]=n),t.push(h)}},e.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=""+this.element.id+$d,this.displayTemplateId=""+this.element.id+Zd,this.spinnerTemplateId=""+this.element.id+ef,this.valueTemplateId=""+this.element.id+tf,this.groupTemplateId=""+this.element.id+rf,this.headerTemplateId=""+this.element.id+nf,this.footerTemplateId=""+this.element.id+sf,this.noRecordsTemplateId=""+this.element.id+of},e.prototype.setListData=function(t,i,r,n){var s=this;i=i||this.fields;var a;this.isActive=!0;var l={cancel:!1,data:t,query:r};this.isPreventChange=this.isAngular&&this.preventChange?!0:this.isPreventChange,this.isRequesting||this.trigger("actionBegin",l,function(h){if(!h.cancel)if(s.isRequesting=!0,s.showSpinner(),t instanceof _){s.isRequested=!0;var p=!1;if(s.isDataFetched){s.emptyDataRequest(i);return}h.data.executeQuery(s.getQuery(h.query)).then(function(R){s.isPreventChange=s.isAngular&&s.preventChange?!0:s.isPreventChange;var b=!0;if(!s.virtualSelectAll){for(var E=s.getQuery(h.query),k=0;k<E.queries.length;k++)E.queries[k].fn==="onWhere"&&(p=!0);if(s.isVirtualizationEnabled&&R.count!==0&&R.count<s.itemCount*2){if(E)for(var k=0;k<E.queries.length;k++)E.queries[k].fn==="onTake"&&(E.queries[k].e.nos=R.count),s.getModuleName()==="multiselect"&&(E.queries[k].e.condition==="or"||E.queries[k].e.operator==="equal")&&!s.isCustomFiltering&&(b=!1)}else if(s.isVirtualTrackHeight=!1,E)for(var k=0;k<E.queries.length;k++)s.getModuleName()==="multiselect"&&(E.queries[k].e&&E.queries[k].e.condition==="or"||E.queries[k].e&&E.queries[k].e.operator==="equal")&&(b=!1)}b&&(s.dataCount=s.totalItemCount=R.count),s.trigger("actionComplete",R,function(F){if(!F.cancel){s.isRequesting=!1,s.isCustomFiltering=!1;var W=F.result;if(s.isIncrementalRequest){a=s.renderItems(W,i);return}if((!s.isVirtualizationEnabled&&W.length===0||s.isVirtualizationEnabled&&W.length===0&&!p)&&(s.isDataFetched=!0),p||(s.remoteDataCount=F.count),s.dataCount=s.virtualSelectAll?s.dataCount:F.count,s.totalItemCount=s.virtualSelectAll?s.totalItemCount:F.count,a=s.renderItems(W,i),s.appendUncheckList=!1,s.onActionComplete(a,W,F),s.groupTemplate&&s.renderGroupTemplate(a),s.isRequested=!1,s.bindChildItems(W,a,i,F),s.getInitialData){s.getInitialData=!1,s.preventPopupOpen=!1;return}s.isVirtualizationEnabled&&s.setCurrentView&&s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),s.keyboardEvent!=null&&s.handleVirtualKeyboardActions(s.keyboardEvent,s.pageCount),s.isVirtualizationEnabled&&(s.getFilteringSkeletonCount(),s.updatePopupPosition()),s.virtualSelectAll&&s.virtualSelectAllData&&(s.virtualSelectionAll(s.virtualSelectAllState,s.liCollections,s.CurrentEvent),s.virtualSelectAllState=!1,s.CurrentEvent=null,s.virtualSelectAll=!1)}})}).catch(function(R){s.isRequested=!1,s.isRequesting=!1,s.onActionFailure(R),s.hideSpinner()})}else{s.isRequesting=!1;var c=!0,d=void 0;if(s.isVirtualizationEnabled&&!s.virtualGroupDataSource&&s.fields.groupBy){var f=new _(s.dataSource).executeLocal(new ae().group(s.fields.groupBy));s.virtualGroupDataSource=f.records}var g=s.isVirtualizationEnabled&&s.virtualGroupDataSource&&!s.isCustomDataUpdated?new _(s.virtualGroupDataSource):new _(h.data);if(d=s.getQuery(h.query).executeLocal(g),!s.virtualSelectAll){var m=s.getQuery(h.query);if(s.isVirtualizationEnabled&&d.count!==0&&d.count<s.itemCount*2&&!s.appendUncheckList){if(m){for(var v=0;v<m.queries.length;v++)m.queries[v].fn==="onTake"&&(m.queries[v].e.nos=d.count,d=m.executeLocal(g)),s.getModuleName()==="multiselect"&&(m.queries[v].e.condition==="or"||m.queries[v].e.operator==="equal")&&!s.isCustomFiltering&&(c=!1);c&&(d=m.executeLocal(g),s.isVirtualTrackHeight=!(s.dataSource instanceof _)&&!s.isCustomDataUpdated)}}else if(s.isVirtualTrackHeight=!1,m)for(var v=0;v<m.queries.length;v++)s.getModuleName()==="multiselect"&&(m.queries[v].e&&m.queries[v].e.condition==="or"||m.queries[v].e&&m.queries[v].e.operator==="equal")&&(c=!1)}c&&!(s.dataSource instanceof _)&&!s.isCustomDataUpdated&&!s.virtualSelectAll&&(s.dataCount=s.totalItemCount=s.virtualSelectAll?d.length:d.count),d=s.isVirtualizationEnabled?d.result:d;var y={cancel:!1,result:d};s.isPreventChange=s.isAngular&&s.preventChange?!0:s.isPreventChange,s.trigger("actionComplete",y,function(R){if(s.isCustomFiltering=!1,s.isIncrementalRequest){a=s.renderItems(R.result,i);return}if(!R.cancel){if(a=s.renderItems(R.result,i),s.onActionComplete(a,R.result,n),s.groupTemplate&&s.renderGroupTemplate(a),s.bindChildItems(R.result,a,i),s.getInitialData){s.getInitialData=!1,s.preventPopupOpen=!1;return}setTimeout(function(){s.getModuleName()==="multiselect"&&s.itemTemplate!=null&&a.childElementCount>0&&(a.children[0].childElementCount>0||s.fields.groupBy&&a.children[1]&&a.children[1].childElementCount>0)&&s.updateDataList()})}})}})},e.prototype.handleVirtualKeyboardActions=function(t,i){},e.prototype.updatePopupState=function(){},e.prototype.updatePopupPosition=function(){},e.prototype.virtualSelectionAll=function(t,i,r){},e.prototype.updateRemoteData=function(){this.setListData(this.dataSource,this.fields,this.query)},e.prototype.bindChildItems=function(t,i,r,n){var s=this;t.length>=100&&this.getModuleName()==="autocomplete"?setTimeout(function(){var a=s.remainingItems(s.sortedData,r);Te(a,i),s.liCollections=s.list.querySelectorAll("."+X.li),s.updateListValues(),s.raiseDataBound(t,n)},0):this.raiseDataBound(t,n)},e.prototype.isObjectInArray=function(t,i){return i.some(function(r){return Object.keys(t).every(function(n){return Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t[n]})})},e.prototype.updateListValues=function(){},e.prototype.findListElement=function(t,i,r,n){var s=null;if(t){for(var a=[].slice.call(t.querySelectorAll(i)),l=0;l<a.length;l++)if(a[l].getAttribute(r)===n+""){s=a[l];break}}return s},e.prototype.raiseDataBound=function(t,i){this.hideSpinner();var r={items:t,e:i};this.trigger("dataBound",r)},e.prototype.remainingItems=function(t,i){var r=new _(t).executeLocal(new ae().skip(100));if(this.itemTemplate){var n=this.templateListItem(r,i);return[].slice.call(n.childNodes)}var s=this.typeOfData(r).typeof;return s==="string"||s==="number"||s==="boolean"?ht.createListItemFromArray(this.createElement,r,!0,this.listOption(r,i),this):ht.createListItemFromJson(this.createElement,r,this.listOption(r,i),1,!0,this)},e.prototype.emptyDataRequest=function(t){var i=[];this.onActionComplete(this.renderItems(i,t),i),this.isRequested=!1,this.isRequesting=!1,this.hideSpinner()},e.prototype.showSpinner=function(){},e.prototype.hideSpinner=function(){},e.prototype.onActionFailure=function(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),u(this.list)||B([this.list],X.noData)},e.prototype.onActionComplete=function(t,i,r){if(this.listData=i,this.isVirtualizationEnabled&&!this.isCustomDataUpdated&&!this.virtualSelectAll&&this.notify("setGeneratedData",{module:"VirtualScroll"}),this.getModuleName()!=="listbox"&&t.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.isVirtualizationEnabled||(this.fixedHeaderElement=u(this.fixedHeaderElement)?this.fixedHeaderElement:null),this.getModuleName()==="multiselect"&&this.properties.allowCustomValue&&this.fields.groupBy)for(var n=0;n<t.childElementCount;n++)t.children[n].classList.contains("e-list-group-item")&&(u(t.children[n].innerHTML)||t.children[n].innerHTML==="")&&B([t.children[n]],lf),t.children[0].classList.contains("e-hide-group-header")&&nt(t.children[1],{zIndex:11});u(this.list)||this.isVirtualizationEnabled||(this.list.innerHTML="",this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+X.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))},e.prototype.postRender=function(t,i,r){if(this.fields.disabled){for(var n=t.querySelectorAll("."+X.li),s=0;s<n.length;s++)if(JSON.parse(JSON.stringify(this.listData[s]))[this.fields.disabled])if(u(this.fields.groupBy))this.disableListItem(n[s]);else{var a=this.listData[s],l=oe(this.fields.value?this.fields.value:"value",a),h=t.querySelector('li[data-value="'+l+'"]');u(h)||this.disableListItem(h)}}var p=this.fields.disabled?t.querySelector("."+X.li+":not(.e-disabled"):t.querySelector("."+X.li),c=t.querySelector("."+X.selected);if(p&&!c){if(this.isVirtualizationEnabled&&this.viewPortInfo.startIndex!==0){var d=this.ulElement.querySelectorAll("li."+X.li+":not(.e-virtual-list):not(.e-hide-listitem)");p=d&&d.length>0?d[2]:p}p&&p.classList.add(X.focus)}i.length<=0?(this.l10nUpdate(),B([t],X.noData)):t.classList.remove(X.noData)},e.prototype.getQuery=function(t){return t||(this.query?this.query:new ae)},e.prototype.updateVirtualizationProperties=function(t,i,r){this.isVirtualizationEnabled=!0,this.virtualizedItemsCount=t,this.isAllowFiltering=i,this.isCheckBoxSelection=r},e.prototype.renderGroupTemplate=function(t){if(this.fields.groupBy!==null&&this.dataSource||this.element.querySelector("."+X.group)){var i=this.dataSource,r={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=t.querySelectorAll("."+X.group),s=this.templateCompiler(this.groupTemplate);if(typeof this.groupTemplate!="function"&&s){var a=Ye(this.groupTemplate,document).innerHTML.trim(),l=ht.renderGroupTemplate(a,i,this.fields.properties,n,r,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else{var l=ht.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,n,r,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}this.renderReactTemplates()}},e.prototype.createListItems=function(t,i){if(t){if(i.groupBy||this.element.querySelector("optgroup")){if(i.groupBy){this.sortOrder!=="None"&&(t=this.getSortedDataSource(t));var r=i.properties||i;t=ht.groupDataSource(t,r,this.sortOrder)}B([this.list],X.grouping)}else(this.getModuleName()!=="listbox"||this.getModuleName()==="listbox"&&!this.preventDefActionFilter)&&(t=this.getSortedDataSource(t));var n=this.listOption(t,i),s=t.length>100?new _(t).executeLocal(new ae().take(100)):t;return this.sortedData=t,ht.createList(this.createElement,this.getModuleName()==="autocomplete"?s:t,n,!0,this)}return null},e.prototype.listOption=function(t,i){var r=!u(i.iconCss),n=u(i.properties)?i:i.properties,s=i.text!==null||i.value!==null?{fields:n,showIcon:r,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return Q({},s,i,!0)},e.prototype.setFloatingHeader=function(t){!u(this.list)&&!this.list.classList.contains(X.noData)&&(u(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:X.fixedHead}),!u(this.list)&&!this.list.querySelector("li").classList.contains(X.group)&&(this.fixedHeaderElement.style.display="none"),!u(this.fixedHeaderElement)&&!u(this.list)&&Pt([this.fixedHeaderElement],this.list),this.setFixedHeader()),!u(this.fixedHeaderElement)&&this.fixedHeaderElement.style.zIndex==="0"&&this.setFixedHeader(),this.scrollStop(t))},e.prototype.scrollStop=function(t,i){for(var r=u(t)?this.list:t.target,n=getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),s=getComputedStyle(this.getValidLi(),null).getPropertyValue("margin-bottom"),a=parseInt(s,10),l=this.getModuleName()==="multiselect"?parseFloat(n):parseInt(n,10),h=Math.round(r.scrollTop/(l+a)),p=this.list.querySelectorAll("li:not(.e-hide-listitem)"),c=this.list.querySelectorAll(".e-virtual-list").length,d=h;d>-1;d--){var f=this.isVirtualizationEnabled?d+c:d;if(this.isVirtualizationEnabled){if(this.fixedHeaderElement&&this.updateGroupHeader(f,p,r))break;i&&(!u(p[f])&&p[f].classList.contains(X.selected)&&this.getModuleName()!=="autocomplete"||!u(p[f])&&p[f].classList.contains(X.focus)&&this.getModuleName())}else if(this.updateGroupHeader(f,p,r))break}},e.prototype.getPageCount=function(t){if(this.list){var i=this.list.classList.contains(X.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height"),r=Math.round(this.list.getBoundingClientRect().height/parseInt(i,10));return t?r:Math.round(r)}else return 0},e.prototype.updateGroupHeader=function(t,i,r){return!u(i[t])&&i[t].classList.contains(X.group)?(this.updateGroupFixedHeader(i[t],r),!0):(this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none",!1)},e.prototype.updateGroupFixedHeader=function(t,i){this.fixedHeaderElement&&(u(t.innerHTML)||(this.fixedHeaderElement.innerHTML=t.innerHTML),this.fixedHeaderElement.style.position="fixed",this.fixedHeaderElement.style.top=this.list.parentElement.offsetTop+this.list.offsetTop-window.scrollY+"px",this.fixedHeaderElement.style.display="block")},e.prototype.getValidLi=function(){return this.isVirtualizationEnabled?this.liCollections[0].classList.contains("e-virtual-list")?this.liCollections[this.skeletonCount]:this.liCollections[0]:this.liCollections[0]},e.prototype.renderItems=function(t,i,r){var n;if(this.itemTemplate&&t){this.getModuleName()==="multiselect"&&this.virtualSelectAll&&(this.virtualSelectAllData=t,t=t.slice(this.virtualItemStartIndex,this.virtualItemEndIndex));var s=t;s&&i.groupBy?(this.sortOrder!=="None"&&(s=this.getSortedDataSource(s)),s=ht.groupDataSource(s,i.properties,this.sortOrder)):(this.getModuleName()!=="listbox"||this.getModuleName()==="listbox"&&!this.preventDefActionFilter)&&(s=this.getSortedDataSource(s)),this.sortedData=s;var a=s.length>100?new _(s).executeLocal(new ae().take(100)):s;if(n=this.templateListItem(this.getModuleName()==="autocomplete"?a:s,i),this.isIncrementalRequest)return this.incrementalLiCollections=n.querySelectorAll("."+X.li),this.incrementalUlElement=n,this.incrementalListData=t,n;if(this.isVirtualizationEnabled){var l=this.list.querySelector(".e-list-parent"),h=this.list.querySelector(".e-virtual-ddl-content");if(t.length>=this.virtualizedItemsCount&&l&&h||l&&h&&this.isAllowFiltering||l&&h&&this.getModuleName()==="autocomplete"){this.getModuleName()==="multiselect"&&this.isCheckBoxSelection&&this.appendUncheckList&&this.list&&this.list.querySelector(".e-active")?(h.appendChild(n),r=!0):h.replaceChild(n,l);var p=this.list.querySelectorAll(".e-reorder");this.list.querySelector(".e-virtual-ddl-content")&&p&&p.length>0&&!r&&this.list.querySelector(".e-virtual-ddl-content").removeChild(p[0]),this.updateListElements(t)}else h||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(n),this.updateListElements(t))}}else{if(this.getModuleName()==="multiselect"&&this.virtualSelectAll&&(this.virtualSelectAllData=t,t=t.slice(this.virtualItemStartIndex,this.virtualItemEndIndex)),n=this.createListItems(t,i),this.isIncrementalRequest)return this.incrementalLiCollections=n.querySelectorAll("."+X.li),this.incrementalUlElement=n,this.incrementalListData=t,n;if(this.isVirtualizationEnabled){var l=this.list.querySelector(".e-list-parent:not(.e-reorder)"),h=this.list.querySelector(".e-virtual-ddl-content"),c=!1;(!l&&this.list.querySelector(".e-list-parent.e-reorder")||l&&this.isVirtualReorder&&this.list.querySelector(".e-list-parent.e-reorder"))&&(l=this.list.querySelector(".e-list-parent.e-reorder")),t.length>=this.virtualizedItemsCount&&l&&h||l&&h&&this.isAllowFiltering||l&&h&&(this.getModuleName()==="autocomplete"||this.getModuleName()==="multiselect")||c?(this.appendUncheckList?h.appendChild(n):h.replaceChild(n,l),this.updateListElements(t)):(!h||!h.firstChild)&&(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(n),this.updateListElements(t))}}return n},e.prototype.createVirtualContent=function(){this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content"}))},e.prototype.updateListElements=function(t){this.liCollections=this.list.querySelectorAll("."+X.li),this.ulElement=this.list.querySelector("ul"),this.listData=t,this.postRender(this.list,t,this.bindEvent)},e.prototype.templateListItem=function(t,i){var r=this.listOption(t,i);r.templateID=this.itemTemplateId,r.isStringTemplate=this.isStringTemplate;var n=this.templateCompiler(this.itemTemplate),s;if(typeof this.itemTemplate!="function"&&n){var a=Ye(this.itemTemplate,document).innerHTML.trim();return s=ht.renderContentTemplate(this.createElement,a,t,i.properties,r,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),s}else return s=ht.renderContentTemplate(this.createElement,this.itemTemplate,t,i.properties,r,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),s},e.prototype.typeOfData=function(t){for(var i={typeof:null,item:null},r=0;!u(t)&&r<t.length;r++)if(!u(t[r])){var n=typeof t[r]=="string"||typeof t[r]=="number"||typeof t[r]=="boolean",s=n?u(t[r]):u(oe(this.fields.value?this.fields.value:"value",t[r]));if(!s)return i={typeof:typeof t[r],item:t[r]}}return i},e.prototype.setFixedHeader=function(){u(this.list)||(this.list.parentElement.style.display="block");var t=0;if(this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(t))){var i=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10),r=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10),n=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10),s=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10);t=i+r+n+s}if(!u(this.liCollections)){var a=this.getValidLi().offsetWidth-t;this.fixedHeaderElement.style.width=a.toString()+"px"}nt(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+X.group+":not(.e-hide-listitem)");u(l)||(this.fixedHeaderElement.innerHTML=l.innerHTML)},e.prototype.getSortedDataSource=function(t){if(t&&this.sortOrder!=="None"){var i=this.fields.text?this.fields.text:"text";(this.typeOfData(t).typeof==="string"||this.typeOfData(t).typeof==="number"||this.typeOfData(t).typeof==="boolean")&&(i=""),t=ht.getDataSource(t,ht.addSorting(this.sortOrder,i))}return t},e.prototype.getIndexByValue=function(t){var i,r=[];this.fields.disabled&&this.getModuleName()==="multiselect"&&this.liCollections?r=this.liCollections:r=this.getItems();for(var n=0;n<r.length;n++)if(!u(t)&&r[n].getAttribute("data-value")===t.toString()){i=n;break}return i},e.prototype.getIndexByValueFilter=function(t,i){var r;if(!i)return null;var n=i.querySelectorAll("li:not(.e-list-group-item)");if(n){for(var s=0;s<n.length;s++)if(!u(t)&&n[s].getAttribute("data-value")===t.toString()){r=s;break}}return r},e.prototype.dispatchEvent=function(t,i){var r=document.createEvent("HTMLEvents");r.initEvent(i,!1,!0),t&&t.dispatchEvent(r)},e.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&(this.isPrimitiveData=!0,this.updateFields("text","text"))},e.prototype.resetList=function(t,i,r,n){if(this.list){if(this.element.tagName==="SELECT"&&this.element.options.length>0||this.element.tagName==="UL"&&this.element.childNodes.length>0){var s=t instanceof Array?t.length>0:!u(t);!s&&this.selectData&&this.selectData.length>0&&(t=this.selectData)}t=this.getModuleName()==="combobox"&&this.selectData&&t instanceof Array&&t.length<this.selectData.length&&this.addedNewItem?this.selectData:t,this.addedNewItem=!1,this.setListData(t,i,r,n)}},e.prototype.updateSelectElementData=function(t){(t||this.isVirtualizationEnabled)&&u(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},e.prototype.updateSelection=function(){},e.prototype.renderList=function(){this.render()},e.prototype.updateDataSource=function(t,i){this.resetList(this.dataSource),this.totalItemCount=this.dataSource instanceof _?this.dataSource.dataSource.json.length:0},e.prototype.setUpdateInitial=function(t,i,r){this.isDataFetched=!1,this.isPrimitiveData=!1;for(var n={},s=0;t.length>s;s++)i[t[s]]&&t[s]==="fields"?(this.setFields(),n[t[s]]=i[t[s]]):i[t[s]]&&(n[t[s]]=i[t[s]]);Object.keys(n).length>0&&(Object.keys(n).indexOf("dataSource")===-1&&(n.dataSource=this.dataSource),this.getModuleName()==="listbox"?(!this.isReact||this.isReact&&(!u(i.dataSource)||!u(i.sortOrder)))&&this.updateDataSource(n,r):(this.isDynamicData=!0,this.updateDataSource(n,r)))},e.prototype.onPropertyChanged=function(t,i){this.getModuleName()==="dropdownbase"&&this.setUpdateInitial(["fields","query","dataSource"],t),this.setUpdateInitial(["sortOrder","itemTemplate"],t);for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var a=this.ulElement.querySelector("."+X.group);this.fixedHeaderElement.innerHTML=a.innerHTML}break;case"locale":this.list&&!u(this.liCollections)&&this.liCollections.length===0&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex();break}}},e.prototype.render=function(t,i){this.getModuleName()==="listbox"?this.list=this.createElement("div",{className:X.content,attrs:{tabindex:"0"}}):this.list=this.createElement("div",{className:X.content}),this.list.classList.add(X.root),this.setFields();var r={duration:300,selector:"."+X.li};this.rippleFun=oh(this.list,r);var n=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!u(n))&&!this.isGroupChecking){x.add(this.list,"scroll",this.setFloatingHeader,this);for(var s=this.getScrollableParent(),a=0;a<s.length;a++){var l=s[a];x.add(l,"scroll",this.updateGroupFixedHeader,this)}}if(this.getModuleName()==="dropdownbase"){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),G([this.element],X.root),this.element.style.display="none";var h=this.createElement("div");this.element.parentElement.insertBefore(h,this.element),h.appendChild(this.element),h.appendChild(this.list)}this.setEnableRtl(),i||this.initialize(t)},e.prototype.getScrollableParent=function(){for(var t=getComputedStyle(this.element),i=[],r=/(auto|scroll)/,n=this.element.parentElement;n&&n.tagName!=="HTML";){var s=getComputedStyle(n);!(t.position==="absolute"&&s.position==="static")&&r.test(s.overflow+s.overflowY+s.overflowX)&&i.push(n),n=n.parentElement}return i.push(document),i},e.prototype.removeScrollEvent=function(){this.list&&x.remove(this.list,"scroll",this.setFloatingHeader)},e.prototype.getModuleName=function(){return"dropdownbase"},e.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+X.li)},e.prototype.addItem=function(t,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&this.getModuleName()!=="listbox")&&this.renderList(),this.sortOrder!=="None"&&u(i)){var r=[].slice.call(this.listData);r.push(t),r=this.getSortedDataSource(r),this.fields.groupBy&&(r=ht.groupDataSource(r,this.fields.properties,this.sortOrder)),i=r.indexOf(t)}var n=this.getItems().length,s=n===0,a=this.list.querySelector("."+X.selected);t=t instanceof Array?t:[t];var l;l=u(i)||i<0||i>n-1?n:i;var h=this.fields;t&&h.groupBy&&(t=ht.groupDataSource(t,h.properties));for(var p=[],c=0;c<t.length;c++){var d=t[c],f=d.isHeader,g=this.createElement("li",{className:f?X.group:X.li,id:"option-add-"+c}),m=d instanceof Object?oe(h.text,d):d;if(f&&(g.innerText=m),this.itemTemplate&&!f){var v=this.templateCompiler(this.itemTemplate),y=typeof this.itemTemplate!="function"&&v?Be(Ye(this.itemTemplate,document).innerHTML.trim()):Be(this.itemTemplate),R=y(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,g);R&&Te(R,g)}else f||g.appendChild(document.createTextNode(m));g.setAttribute("data-value",d instanceof Object?oe(h.value,d):d),g.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:g}),p.push(g),this.getModuleName()==="listbox"?(this.listData.splice(s?this.listData.length:l,0,d),this.listData.length!==this.sortedData.length&&(this.sortedData=this.listData)):this.listData.push(d),this.sortOrder==="None"&&u(i)&&l===0&&(l=null),this.getModuleName()==="listbox"?this.updateActionCompleteData(g,d,s?null:l+c):this.updateActionCompleteData(g,d,l),this.trigger("beforeItemRender",{element:g,item:d})}if(n===0&&u(this.list.querySelector("ul")))u(this.list)||(this.list.innerHTML="",this.list.classList.remove(X.noData),this.isAddNewItemTemplate=!0,u(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=p,!u(p)&&!u(this.ulElement)&&Te(p,this.ulElement),this.updateAddItemList(this.list,n);else{this.getModuleName()==="listbox"&&n===0&&(this.ulElement.innerHTML="");for(var b=[],c=0;c<t.length;c++){for(var E=this.ulElement.querySelectorAll(".e-list-group-item"),k=0;k<E.length;k++)b[k]=E[k].innerText;if(b.indexOf(p[c].innerText)>-1&&h.groupBy){for(var k=0;k<E.length;k++)if(b[k]===p[c].innerText){this.sortOrder==="None"?this.ulElement.insertBefore(p[c+1],E[k+1]):this.ulElement.insertBefore(p[c+1],this.ulElement.childNodes[i]),c=c+1;break}}else this.liCollections[l]&&this.liCollections[l].parentNode?this.liCollections[l].parentNode.insertBefore(p[c],this.liCollections[l]):i&&this.getModuleName()==="listbox"?this.ulElement.insertBefore(p[c],this.ulElement.childNodes[i+c]):this.ulElement.appendChild(p[c]);var F=[].slice.call(this.liCollections);F.splice(l,0,p[c]),this.liCollections=F,l+=1,this.getModuleName()==="multiselect"&&this.updateDataList()}}this.getModuleName()==="listbox"&&this.isReact&&this.renderReactTemplates(),(a||i===0)&&this.updateSelection(),this.addedNewItem=!0},e.prototype.isDisabledElement=function(t){return!!(t&&t.classList.contains("e-disabled"))},e.prototype.isDisabledItemByIndex=function(t){return this.fields.disabled&&this.liCollections?this.isDisabledElement(this.liCollections[t]):!1},e.prototype.disableListItem=function(t){t.classList.add("e-disabled"),t.setAttribute("aria-disabled","true"),t.setAttribute("aria-selected","false")},e.prototype.validationAttribute=function(t,i){var r=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");i.setAttribute("name",r),t.removeAttribute("name");for(var n=["required","aria-required","form"],s=0;s<n.length;s++)if(t.getAttribute(n[s])){var a=t.getAttribute(n[s]);i.setAttribute(n[s],a),t.removeAttribute(n[s])}},e.prototype.setZIndex=function(){},e.prototype.updateActionCompleteData=function(t,i,r){},e.prototype.updateAddItemList=function(t,i){},e.prototype.updateDataList=function(){},e.prototype.getDataByValue=function(t){if(!u(this.listData)){var i=this.typeOfData(this.listData).typeof;if(i==="string"||i==="number"||i==="boolean")for(var r=0,n=this.listData;r<n.length;r++){var s=n[r];if(!u(s)&&s===t)return s}else for(var a=0,l=this.listData;a<l.length;a++){var s=l[a];if(!u(s)&&oe(this.fields.value?this.fields.value:"value",s)===t)return s}}return null},e.prototype.destroy=function(){document&&(x.remove(document,"scroll",this.updateGroupFixedHeader),document.body.contains(this.list)&&(x.remove(this.list,"scroll",this.setFloatingHeader),u(this.rippleFun)||this.rippleFun(),Ve(this.list))),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,o.prototype.destroy.call(this)},Oe([rt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},Jd)],e.prototype,"fields",void 0),Oe([C(null)],e.prototype,"itemTemplate",void 0),Oe([C(null)],e.prototype,"groupTemplate",void 0),Oe([C("No records found")],e.prototype,"noRecordsTemplate",void 0),Oe([C("Request failed")],e.prototype,"actionFailureTemplate",void 0),Oe([C("None")],e.prototype,"sortOrder",void 0),Oe([C([])],e.prototype,"dataSource",void 0),Oe([C(null)],e.prototype,"query",void 0),Oe([C("StartsWith")],e.prototype,"filterType",void 0),Oe([C(!0)],e.prototype,"ignoreCase",void 0),Oe([C(1e3)],e.prototype,"zIndex",void 0),Oe([C(!1)],e.prototype,"ignoreAccent",void 0),Oe([C()],e.prototype,"locale",void 0),Oe([O()],e.prototype,"actionBegin",void 0),Oe([O()],e.prototype,"actionComplete",void 0),Oe([O()],e.prototype,"actionFailure",void 0),Oe([O()],e.prototype,"select",void 0),Oe([O()],e.prototype,"dataBound",void 0),Oe([O()],e.prototype,"created",void 0),Oe([O()],e.prototype,"destroyed",void 0),e=Oe([ki],e),e}(gi),uf=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ae=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},le={selected:X.selected,li:X.li,disable:X.disabled,focus:X.focus,inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",resizeIcon:"e-resizer-right e-icons",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},pf={container:null,buttons:[]},cf=function(o){uf(e,o);function e(t,i){var r=o.call(this,t,i)||this;return r.isListSearched=!1,r.preventChange=!1,r.isTouched=!1,r.isFocused=!1,r.autoFill=!1,r.isUpdateHeaderHeight=!1,r.isUpdateFooterHeight=!1,r.isReactTemplateUpdate=!1,r}return e.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),o.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},e.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"VirtualScroll"}),t},e.prototype.renderList=function(t,i){o.prototype.render.call(this,t,i),this.dataSource instanceof _||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.enableVirtualization&&this.isFiltering()&&this.getModuleName()==="combobox"&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+X.li),this.ulElement=this.list.querySelector("ul")),this.unWireListEvents(),this.wireListEvents()},e.prototype.floatLabelChange=function(){if(this.getModuleName()==="dropdownlist"&&this.floatLabelType==="Auto"){var t=this.inputWrapper.container.querySelector(".e-float-text");this.inputElement.value!==""||this.isInteracted?ve(t,["e-label-top"],["e-label-bottom"]):ve(t,["e-label-bottom"],["e-label-top"])}},e.prototype.resetHandler=function(t){t.preventDefault(),this.clearAll(t),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},e.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,this.getModuleName()!=="autocomplete"&&!u(this.ulElement)){var t=this.fields.disabled?this.ulElement.querySelector("."+le.li+":not(.e-disabled)"):this.ulElement.querySelector("."+le.li);this.enableVirtualization&&(t=this.liCollections[this.skeletonCount]),t&&t.classList.add(le.focus)}},e.prototype.clearAll=function(t,i){this.previousItemData=u(this.itemData)?null:this.itemData,(u(i)||!u(i)&&(u(i.dataSource)||!(i.dataSource instanceof _)&&i.dataSource.length===0))&&(this.isActive=!0,this.resetSelection(i));var r=this.getItemData();if(!this.allowObjectBinding&&this.previousValue===r.value||this.allowObjectBinding&&this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom?this.value?this.value:r:r.value?this.getDataByValue(r.value):r])){this.checkAndResetCache(),this.enableVirtualization&&this.list&&this.updateInitialData();return}this.onChangeEvent(t),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData()},e.prototype.resetSelection=function(t){this.list&&(!u(t)&&(u(t.dataSource)||!(t.dataSource instanceof _)&&t.dataSource.length===0)?(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(t.dataSource)):(this.allowFiltering&&this.getModuleName()!=="autocomplete"&&!u(this.actionCompleteData.ulElement)&&!u(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement())),u(this.hiddenElement)||(this.hiddenElement.innerHTML=""),u(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(Ve(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var r=i[t];if(r==="class"){var n=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();n!==""&&B([this.inputWrapper.container],n.split(" "))}else if(r==="disabled"&&this.htmlAttributes[""+r]==="disabled")this.enabled=!1,this.setEnable();else if(r==="readonly"&&!u(this.htmlAttributes[""+r]))this.readonly=!0,this.dataBind();else if(r==="style")this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+r]);else if(r==="aria-label")(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+r]):this.getModuleName()==="dropdownlist"&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+r]);else{var s=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],a=["name","required"];(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&s.push("tabindex"),a.indexOf(r)>-1||r.indexOf("data")===0?this.hiddenElement.setAttribute(r,this.htmlAttributes[""+r]):s.indexOf(r)>-1?r==="placeholder"?Pe.setPlaceholder(this.htmlAttributes[""+r],this.inputElement):this.inputElement.setAttribute(r,this.htmlAttributes[""+r]):this.inputWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}}(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&this.inputWrapper.container.removeAttribute("tabindex")},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},e.prototype.setEnableRtl=function(){!u(this.inputElement)&&!u(this.inputElement.parentElement)&&Pe.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){Pe.setEnabled(this.enabled,this.inputElement),this.enabled?(G([this.inputWrapper.container],le.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex),this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","false"),this.inputWrapper.container.removeAttribute("disabled"))):(this.hidePopup(),B([this.inputWrapper.container],le.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1,this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","true"),this.inputWrapper.container.setAttribute("disabled","")))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-list"},e.prototype.preventTabIndex=function(t){this.getModuleName()==="dropdownlist"&&(t.tabIndex=-1)},e.prototype.targetElement=function(){return u(this.inputWrapper)?null:this.inputWrapper.container},e.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},e.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},e.prototype.getElementByValue=function(t){for(var i,r=this.getItems(),n=0,s=r;n<s.length;n++){var a=s[n];if(this.getFormattedValue(a.getAttribute("data-value"))===t){i=a;break}}return i},e.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof _?this.initialRemoteRender=!0:this.updateValues()},e.prototype.isDisableItemValue=function(t){if(typeof t=="object"){var i=JSON.parse(JSON.stringify(t))[this.fields.value];return this.isDisabledItemByIndex(this.getIndexByValue(i))}return this.isDisabledItemByIndex(this.getIndexByValue(t))},e.prototype.updateValues=function(){if(this.fields.disabled&&(this.value!=null&&(this.value=this.isDisableItemValue(this.value)?null:this.value),this.text!=null&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),this.index!=null&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),this.selectedValueInfo=this.viewPortInfo,u(this.value))if(this.text&&u(this.value)){var i=this.getElementByText(this.text);if(u(i)){this.setProperties({text:null});return}else this.setSelection(i,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else{var t=this.allowObjectBinding&&!u(this.value)?oe(this.fields.value?this.fields.value:"",this.value):this.value;this.setSelection(this.getElementByValue(t),null)}this.setHiddenValue(),Pe.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onBlurHandler=function(t){if(this.enabled){var i=t.relatedTarget,r=t.target,n=this.isPreventBlur;if(this.isPreventBlur=!1,n&&!this.isDocumentClick&&this.isPopupOpen&&(!u(r)||!this.isFilterLayout()&&u(i))){this.getModuleName()==="dropdownlist"&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus();return}if(this.isDocumentClick||!u(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(le.mobileFilter)){this.beforePopupOpen||(this.isDocumentClick=!1);return}(this.getModuleName()==="dropdownlist"&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&r.classList.contains(le.inputFocus))||u(i)&&this.getModuleName()==="dropdownlist"&&this.allowFiltering&&r!==this.inputWrapper.container||this.getModuleName()!=="dropdownlist"&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(t),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1),this.isFocused=!1}},e.prototype.focusOutAction=function(t){this.isInteracted=!1,this.focusOut(t),this.onFocusOut(t)},e.prototype.onFocusOut=function(t){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),this.getModuleName()==="dropdownlist"&&this.element.tagName!=="INPUT"&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&B([this.inputWrapper.clearButton],le.clearIconHide),this.trigger("blur"))},e.prototype.onFocus=function(t){if(!this.isInteracted){this.isInteracted=!0;var i={isInteracted:!!t,event:t};this.trigger("focus",i)}this.updateIconState(),this.isFocused=!0},e.prototype.resizingWireEvent=function(){x.add(document,"mousemove",this.resizePopup,this),x.add(document,"mouseup",this.stopResizing,this),x.add(document,"touchmove",this.resizePopup,this),x.add(document,"touchend",this.stopResizing,this)},e.prototype.resizingUnWireEvent=function(){x.remove(document,"mousemove",this.resizePopup),x.remove(document,"mouseup",this.stopResizing),x.remove(document,"touchmove",this.resizePopup),x.remove(document,"touchend",this.stopResizing)},e.prototype.resetValueHandler=function(t){var i=Y(this.inputElement,"form");if(i&&t.target===i){var r=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=r}},e.prototype.wireEvent=function(){x.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),x.add(this.inputWrapper.container,"focus",this.focusIn,this),x.add(this.inputWrapper.container,"keypress",this.onSearch,this),x.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},e.prototype.bindCommonEvent=function(){x.add(this.targetElement(),"blur",this.onBlurHandler,this);var t=Y(this.inputElement,"form");t&&x.add(t,"reset",this.resetValueHandler,this),K.isDevice?this.keyboardModule=new pr(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new pr(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},e.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},e.prototype.bindClearEvent=function(){this.showClearButton&&x.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},e.prototype.unBindCommonEvent=function(){!u(this.inputWrapper)&&this.targetElement()&&x.remove(this.targetElement(),"blur",this.onBlurHandler);var t=this.inputElement&&Y(this.inputElement,"form");t&&x.remove(t,"reset",this.resetValueHandler),K.isDevice||this.keyboardModule.destroy(),this.showClearButton&&x.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},e.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement.value!==""&&!this.readonly?G([this.inputWrapper.clearButton],le.clearIconHide):B([this.inputWrapper.clearButton],le.clearIconHide))},e.prototype.wireListEvents=function(){u(this.list)||(x.add(this.list,"click",this.onMouseClick,this),x.add(this.list,"mouseover",this.onMouseOver,this),x.add(this.list,"mouseout",this.onMouseLeave,this))},e.prototype.onSearch=function(t){t.charCode!==32&&t.charCode!==13&&(this.list===void 0&&this.renderList(),this.searchKeyEvent=t,this.onServerIncrementalSearch(t))},e.prototype.onServerIncrementalSearch=function(t){!this.isRequested&&!u(this.list)&&!u(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(t)},e.prototype.startResizing=function(t){this.isResizing=!0,this.trigger("resizeStart",t);var i=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,r=t instanceof MouseEvent?t.clientY:t.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=i,this.originalMouseY=r),this.resizingWireEvent(),t&&t.preventDefault()},e.prototype.resizePopup=function(t){if(this.isResizing){this.trigger("resizing",t);var i=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,r=t instanceof MouseEvent?t.clientY:t.touches[0].clientY,n=i-this.originalMouseX,s=r-this.originalMouseY;if(this.list&&this.list.parentElement){var a=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),l=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);a=a||100,l=l||120,this.resizeWidth=Math.max(this.originalWidth+n,a),this.resizeHeight=Math.max(this.originalHeight+s,l),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}t&&t.preventDefault()}},e.prototype.stopResizing=function(t){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",t),this.resizingUnWireEvent()),t&&t.preventDefault()},e.prototype.onMouseClick=function(t){var i=t.target;this.keyboardEvent=null;var r=Y(i,"."+X.li);if(!(!this.isValidLI(r)||this.isDisabledElement(r)))if(this.setSelection(r,t),K.isDevice&&this.isFilterLayout())history.back();else{var n=100;this.closePopup(n,t)}},e.prototype.onMouseOver=function(t){var i=Y(t.target,"."+X.li);this.setHover(i)},e.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains(X.hover)&&(this.removeHover(),B([t],X.hover))},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.removeHover=function(){if(this.list){var t=this.list.querySelectorAll("."+X.hover);t&&t.length&&G(t,X.hover)}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&t.getAttribute("role")==="option"},e.prototype.updateIncrementalItemIndex=function(t,i){this.incrementalStartIndex=t,this.incrementalEndIndex=i},e.prototype.incrementalSearch=function(t){if(this.liCollections.length>0)if(this.enableVirtualization){var i=!1,r=!1,n=this.ulElement.getElementsByClassName("e-active")[0],s=n?n.textContent:null;this.incrementalQueryString===""?(this.incrementalQueryString=String.fromCharCode(t.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(t.charCode).toLocaleLowerCase()===this.incrementalPreQueryString.toLocaleLowerCase()?r=!0:this.incrementalQueryString=String.fromCharCode(t.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex===0)&&(i=!0,this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex===0?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0),(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount);for(var a=ur(t.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,r,s,!0);u(a)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0,(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount),a=ur(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,r,s,!0,!0),!!u(a));)if(u(a)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}u(a)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),i=!0,(this.viewPortInfo.startIndex!==0||i)&&this.updateIncrementalView(0,this.itemCount),a=ur(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,r,s,!0,!0));var l=a&&this.getIndexByValue(a.getAttribute("data-value"));if(l)l=l-this.skeletonCount;else for(var h=0;h<this.incrementalLiCollections.length;h++)if(!u(a)&&!u(a.getAttribute("data-value"))&&this.incrementalLiCollections[h].getAttribute("data-value")===a.getAttribute("data-value").toString()){l=h,l=this.incrementalStartIndex+l;break}if(l&&(!(this.viewPortInfo.startIndex>=l)||!(l>=this.viewPortInfo.endIndex))){var p=l-(this.itemCount/2-2)>0?l-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(u(a))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.getIndexByValue(a.getAttribute("data-value"))-this.skeletonCount;if(d>this.itemCount/2){var p=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(a=this.getElementByValue(a.getAttribute("data-value")),this.setSelection(a,t),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var f=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=f-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var a=void 0;if(this.fields.disabled){var g=this.list.querySelectorAll("."+X.li+":not(.e-disabled)");a=ur(t.charCode,g,this.activeIndex,!0,this.element.id)}else a=ur(t.charCode,this.liCollections,this.activeIndex,!0,this.element.id);u(a)||(this.setSelection(a,t),this.setScrollPosition())}},e.prototype.hideSpinner=function(){u(this.spinnerElement)||(gn(this.spinnerElement),G([this.spinnerElement],le.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.showSpinner=function(){u(this.spinnerElement)&&(this.spinnerElement=K.isDevice&&!u(this.filterInputObj)&&this.filterInputObj.buttons[1]||!u(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],B([this.spinnerElement],le.disableIcon),fn({target:this.spinnerElement,width:K.isDevice?"16px":"14px"},this.createElement),ji(this.spinnerElement))},e.prototype.keyActionHandler=function(t){if(this.enabled){this.keyboardEvent=t,this.isPreventKeyAction&&this.enableVirtualization&&t.preventDefault();var i=t.action==="pageUp"||t.action==="pageDown",r=this.getModuleName()!=="dropdownlist"&&(t.action==="home"||t.action==="end");this.isEscapeKey=t.action==="escape",this.isTabKey=!this.isPopupOpen&&t.action==="tab";var n=t.action==="down"||t.action==="up"||t.action==="pageUp"||t.action==="pageDown"||t.action==="home"||t.action==="end";if(!((this.isEditTextBox()||i||r)&&!this.isPopupOpen)&&!this.readonly){var s=t.action==="tab"||t.action==="close";if(u(this.list)&&!this.isRequested&&!s&&t.action!=="escape"&&(this.searchKeyEvent=t,(!this.enableVirtualization||this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&t.type!=="mousedown"&&(t.keyCode===40||t.keyCode===38))&&(this.renderList(t),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+X.li),this.ulElement=this.list.querySelector("ul"))),u(this.list)||!u(this.liCollections)&&n&&this.liCollections.length===0||this.isRequested)return;switch((s&&this.getModuleName()!=="autocomplete"&&this.isPopupOpen||t.action==="escape")&&t.preventDefault(),this.isSelected=t.action==="escape"?!1:this.isSelected,this.isTyped=n||t.action==="escape"?!1:this.isTyped,t.action){case"down":case"up":this.updateUpDownAction(t);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(t);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t);break;case"space":this.getModuleName()==="dropdownlist"&&(this.beforePopupOpen||(this.showPopup(),t.preventDefault()));break;case"open":this.showPopup(t);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(t),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"tab":this.selectCurrentValueOnTab(t);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t));break}}}},e.prototype.updateUpDownAction=function(t,i){if(!(this.fields.disabled&&this.list&&this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length===0)){if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var r=this.getItemData().value;u(r)&&(r="null");var n=this.getIndexByValue(r);u(n)||(this.activeIndex=n)}var s=this.list.querySelector("."+le.focus);if(this.isSelectFocusItem(s)&&!i){if(this.setSelection(s,t),this.enableVirtualization){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.fields.groupBy&&(a=this.virtualListInfo&&this.virtualListInfo.startIndex===0?this.selectedLI.offsetHeight-a:a-this.selectedLI.offsetHeight),this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!u(this.liCollections)){var l=this.activeIndex,h=t.action==="down"?this.activeIndex+1:this.activeIndex-1;h=i?l:h;var p=0;this.getModuleName()==="autocomplete"&&(p=t.action==="down"&&u(this.activeIndex)?0:this.liCollections.length-1,h=h<0?this.liCollections.length-1:h===this.liCollections.length?0:h);var c=void 0;if(this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&this.isPopupOpen)if(!this.enableVirtualization)c=u(this.activeIndex)?this.liCollections[p]:this.liCollections[h];else if(!i)c=u(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[h],c=!u(c)&&!c.classList.contains("e-virtual-list")?c:null;else if(this.getModuleName()==="autocomplete"){var r=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));c=this.getElementByValue(r)}else c=this.getElementByValue(this.getItemData().value);if(u(c)){if(this.enableVirtualization&&!this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&(this.viewPortInfo.endIndex!==this.totalItemCount&&t.action==="down"||this.viewPortInfo.startIndex!==0&&t.action==="up")){if(t.action==="down"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var r=this.liCollections[0].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,f=this.getDataByValue(r);f&&(this.itemData=f)}else if(t.action==="up"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var r=this.liCollections[this.liCollections.length-1].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,f=this.getDataByValue(r);f&&(this.itemData=f)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+X.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(t,this.pageCount)}}else{var d=this.liCollections[this.skeletonCount]&&this.liCollections[this.skeletonCount].classList.contains("e-item-focus");if(this.setSelection(c,t),d&&this.enableVirtualization&&this.getModuleName()==="autocomplete"&&!i){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;a=this.virtualListInfo&&this.virtualListInfo.startIndex===0&&this.fields.groupBy?this.selectedLI.offsetHeight-a:a-this.selectedLI.offsetHeight,this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}}if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var r=this.getItemData().value,n=this.getIndexByValueFilter(r,this.actionCompleteData.ulElement);u(n)||(this.activeIndex=n)}this.allowFiltering&&this.getModuleName()==="dropdownlist"&&this.filterInput&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?de(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&de(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}));for(var g,h=0;h<this.liCollections.length;h++)if(this.liCollections[h].classList.contains(le.focus)||this.liCollections[h].classList.contains(le.selected)){g=h;break}g!=null&&this.isDisabledElement(this.liCollections[g])&&(this.getModuleName()!=="autocomplete"&&(this.liCollections.length-1===g&&t.action==="down"&&(t.action="up"),g===0&&t.action==="up"&&(t.action="down")),this.updateUpDownAction(t)),t.preventDefault()}},e.prototype.updateHomeEndAction=function(t,i){if(this.getModuleName()==="dropdownlist"){var r=0;if(t.action==="home"?(r=0,this.enableVirtualization&&this.isPopupOpen?r=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),r=this.getItems().length-1),t.preventDefault(),this.activeIndex===r){i&&this.setSelection(this.liCollections[r],t);return}if(!this.enableVirtualization&&this.liCollections[r]&&this.liCollections[r].classList.contains("e-disabled"))return;this.setSelection(this.liCollections[r],t)}},e.prototype.selectCurrentValueOnTab=function(t){this.getModuleName()==="autocomplete"?this.selectCurrentItem(t):this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))},e.prototype.mobileKeyActionHandler=function(t){if(this.enabled&&!(this.isEditTextBox()&&!this.isPopupOpen)&&!this.readonly){if(this.list===void 0&&!this.isRequested&&(this.searchKeyEvent=t,this.renderList()),u(this.list)||!u(this.liCollections)&&this.liCollections.length===0||this.isRequested)return;t.action==="enter"&&this.selectCurrentItem(t)}},e.prototype.handleVirtualKeyboardActions=function(t,i){switch(t.action){case"down":case"up":(this.itemData!=null||this.getModuleName()==="autocomplete")&&this.updateUpDownAction(t,!0);break;case"pageUp":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))+this.getPageCount()-1:this.getIndexByValue(this.previousValue),this.pageUpSelection(this.activeIndex-this.getPageCount(),t,!0),t.preventDefault();break;case"pageDown":this.activeIndex=this.getModuleName()==="autocomplete"?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))-this.getPageCount():this.getIndexByValue(this.previousValue),this.pageDownSelection(u(this.activeIndex)?2*this.getPageCount():this.activeIndex+this.getPageCount(),t,!0),t.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(t,!0);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t,!0);break}this.keyboardEvent=null},e.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var i=this.list.querySelector("."+le.focus);if(this.isDisabledElement(i))return;i&&(this.setSelection(i,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(t),this.focusDropDown(t)}else this.showPopup()},e.prototype.isSelectFocusItem=function(t){return!u(t)},e.prototype.pageUpSelection=function(t,i,r){var n=t>=0?this.liCollections[t+1]:this.liCollections[0];if(!this.enableVirtualization&&n&&n.classList.contains("e-disabled")){for(var s=t>=0?t+1:0;s<this.liCollections.length&&(n=this.liCollections[s],!(n&&!n.classList.contains("e-disabled")));)if(s--,s<0)return}this.enableVirtualization&&this.activeIndex==null&&(n=this.liCollections.length>=t&&t>=0?this.liCollections[t+this.skeletonCount+1]:this.liCollections[0]),!u(n)&&n.classList.contains("e-virtual-list")&&(n=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(n,i),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?de(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&de(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},e.prototype.PageUpDownSelection=function(t,i){this.enableVirtualization?!u(t)&&(this.getModuleName()!=="autocomplete"&&!t.classList.contains("e-active")||this.getModuleName()==="autocomplete"&&!t.classList.contains("e-item-focus"))&&this.setSelection(t,i):this.setSelection(t,i)},e.prototype.pageDownSelection=function(t,i,r){var n=this.getItems(),s=t<=n.length?this.liCollections[t-1]:this.liCollections[n.length-1];if(!this.enableVirtualization&&s&&s.classList.contains("e-disabled"))for(;t>=0&&t<this.liCollections.length&&(s=t<=n.length?this.liCollections[t-1]:this.liCollections[n.length-1],!(s&&!s.classList.contains("e-disabled")));)t++;this.enableVirtualization&&this.skeletonCount>0&&(t=this.getModuleName()==="dropdownlist"&&this.allowFiltering?t+1:t,s=t<n.length?this.liCollections[t]:this.liCollections[n.length-1]),this.enableVirtualization&&this.activeIndex==null&&(s=t<=n.length?this.liCollections[t+this.skeletonCount-1]:this.liCollections[n.length-1]),this.PageUpDownSelection(s,i),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?de(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&de(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},e.prototype.unWireEvent=function(){u(this.inputWrapper)||(x.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),x.remove(this.inputWrapper.container,"keypress",this.onSearch),x.remove(this.inputWrapper.container,"focus",this.focusIn),x.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},e.prototype.unWireListEvents=function(){this.list&&(x.remove(this.list,"click",this.onMouseClick),x.remove(this.list,"mouseover",this.onMouseOver),x.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.checkSelector=function(t){return'[id="'+t.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},e.prototype.onDocumentClick=function(t){var i=t.target;if(!(!u(this.popupObj)&&Y(i,this.checkSelector(this.popupObj.element.id)))&&!u(this.inputWrapper)&&!this.inputWrapper.container.contains(t.target)){if(this.inputWrapper.container.classList.contains(le.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var r=this.isRequested;this.getModuleName()==="combobox"&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(t),this.isInteracted=!1,r||(this.onFocusOut(t),this.inputWrapper.container.classList.remove(le.inputFocus))}}else i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&!(this.getModuleName()==="combobox"&&!this.allowFiltering&&K.isDevice&&i===this.inputWrapper.buttons[0])&&(this.isPreventBlur=(K.isIE||K.info.name==="edge")&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault())},e.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(le.inputFocus))},e.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn(t)},e.prototype.dropDownClick=function(t){if(!(t.which===3||t.button===2)&&(this.keyboardEvent=null,!(this.targetElement().classList.contains(le.disable)||this.inputWrapper.clearButton===t.target))){var i=t.target;if(i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&this.getModuleName()!=="combobox"&&t.preventDefault(),this.readonly)this.focusIn(t);else{this.isPopupOpen?(this.hidePopup(t),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(t),this.floatLabelChange(),this.queryString=this.inputElement.value.trim()===""?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(t));var r=this,n=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){r.cloneElements(),r.isSecondClick=!0,r.isSecondClick=!(r.isReact&&r.isFiltering()&&r.dataSource instanceof _&&!r.list.querySelector("ul"))},n)}}},e.prototype.cloneElements=function(){if(this.list){var t=this.list.querySelector("ul");t&&(t=t.cloneNode?t.cloneNode(!0):t,this.actionCompleteData.ulElement=t)}},e.prototype.updateSelectedItem=function(t,i,r,n){var s=this;this.removeSelection(),t.classList.add(X.selected),this.removeHover();var a=t.getAttribute("data-value")!==null?this.getFormattedValue(t.getAttribute("data-value")):null,l=this.getDataByValue(a);if(!this.initial&&!r&&!u(i)){var h=this.detachChanges(l);this.isSelected=!0;var p={e:i,item:t,itemData:h,isInteracted:!!i,cancel:!1};this.trigger("select",p,function(c){c.cancel?t.classList.remove(X.selected):(s.selectEventCallback(t,i,r,l,a),n&&s.setSelectOptions(t,i))})}else this.selectEventCallback(t,i,r,l,a),n&&this.setSelectOptions(t,i)},e.prototype.selectEventCallback=function(t,i,r,n,s){this.previousItemData=u(this.itemData)?null:this.itemData,this.itemData!==n&&(this.previousValue=u(this.itemData)?null:typeof this.itemData=="object"&&!this.allowObjectBinding?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=t,this.itemData=n;var a=this.list.querySelector("."+X.focus);if(a&&G([a],X.focus),t.setAttribute("aria-selected","true"),u(s)&&(s="null"),this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var l=this.getIndexByValueFilter(s,this.actionCompleteData.ulElement);u(l)?this.activeIndex=this.getIndexByValue(s):this.activeIndex=l}else this.enableVirtualization&&this.activeIndex==null&&this.dataSource instanceof _&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+X.li),this.ulElement=this.list.querySelector("ul")),this.activeIndex=this.getIndexByValue(s)},e.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains(X.selected)&&(this.removeSelection(),t.classList.add(X.selected),this.removeHover(),t.setAttribute("aria-selected","true"))},e.prototype.setValue=function(t){var i=this.getItemData();this.isTouched=!u(t),i.value===null?Pe.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):Pe.setValue(i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&this.itemData!==null?this.setValueTemplate():!u(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(Ve(this.valueTempElement),this.inputElement.style.display="block"),!u(i.value)&&!this.enableVirtualization&&this.allowFiltering&&(this.activeIndex=this.getIndexByValueFilter(i.value,this.actionCompleteData.ulElement));var r=le.clearIcon,n=this.isFiltering()&&this.filterInput&&this.getModuleName()==="combobox",s=n&&this.filterInput.parentElement.querySelector("."+r);return this.isFiltering()&&s&&s.style.removeProperty("visibility"),!this.allowObjectBinding&&this.previousValue===i.value||this.allowObjectBinding&&this.previousValue!=null&&this.isObjectInArray(this.previousValue,[this.allowCustom&&this.isObjectCustomValue?this.value?this.value:i:i.value?this.getDataByValue(i.value):i])?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,this.getModuleName()==="dropdownlist"&&this.updateIconState(),!1)},e.prototype.setSelection=function(t,i){if(this.isValidLI(t)&&(!t.classList.contains(X.selected)||this.isPopupOpen&&this.isSelected&&t.classList.contains(X.selected)))this.updateSelectedItem(t,i,!1,!0);else if(this.setSelectOptions(t,i),this.enableVirtualization&&this.value){var r=this.isPrimitiveData?"":this.fields.value,n=this.allowObjectBinding&&!u(this.value)?oe(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof _){var s=new _(this.virtualGroupDataSource).executeLocal(new ae().where(new xe(r,"equal",n)));if(s&&s.length>0){this.itemData=s[0];var a=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(a.value):a.value;(this.value===a.value&&this.text!==a.text||this.value!==a.value&&this.text===a.text)&&this.setProperties({text:a.text?a.text.toString():a.text,value:l})}}else{var s=new _(this.dataSource).executeLocal(new ae().where(new xe(r,"equal",n)));if(s&&s.length>0){this.itemData=s[0];var a=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(a.value):a.value;(this.value===a.value&&this.text!==a.text||this.value!==a.value&&this.text===a.text)&&(this.setProperties({text:a.text?a.text.toString():a.text,value:l}),u(t)&&(this.previousValue=this.value))}}}},e.prototype.setSelectOptions=function(t,i){this.list&&this.removeHover(),this.previousSelectedLI=u(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,!this.setValue(i)&&((!this.isPopupOpen&&!u(t)||this.isPopupOpen&&!u(i)&&(i.type!=="keydown"||i.type==="keydown"&&i.action==="enter"))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.isPopupOpen&&!u(this.selectedLI)&&this.itemData!==null&&(!i||i.type!=="click")&&this.setScrollPosition(i),K.info.name!=="mozilla"&&this.targetElement()&&(de(this.targetElement(),{"aria-describedby":this.inputElement.id!==""?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),this.isPopupOpen&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])?de(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):this.isPopupOpen&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-active")[0])&&de(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},e.prototype.dropdownCompiler=function(t){var i=!1;if(typeof t!="function"&&t)try{i=!!document.querySelectorAll(t).length}catch{i=!1}return i},e.prototype.setValueTemplate=function(){var t;this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(Ve(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:le.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var i=this.dropdownCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&i?t=Be(document.querySelector(this.valueTemplate).innerHTML.trim()):t=Be(this.valueTemplate);var r=t(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);r&&r.length>0&&Te(r,this.valueTempElement),this.renderReactTemplates()},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll("."+X.selected);t.length&&(G(t,X.selected),t[0].removeAttribute("aria-selected"))}},e.prototype.getItemData=function(){var t=this.fields,i=null;i=this.itemData;var r,n;u(i)||(r=oe(t.value,i),n=oe(t.text,i));var s=!u(i)&&!gt(r)?r:i,a=!u(i)&&!gt(r)?n:i;return{value:s,text:a}},e.prototype.onChangeEvent=function(t,i){var r=this,n=this.getItemData(),s=this.isSelectCustom?null:this.activeIndex;if(this.enableVirtualization){var a=this.dataSource instanceof _?this.virtualGroupDataSource:this.dataSource;if(n.value&&a&&a.length>0){var l=a.findIndex(function(p){return!u(n.value)&&oe(r.fields.value,p)===n.value});l!==-1&&(s=l)}}var h=this.allowObjectBinding?i?this.value:this.getDataByValue(n.value):n.value;this.setProperties({index:s,text:n.text?n.text.toString():n.text,value:h},!0),this.detachChangeEvent(t)},e.prototype.detachChanges=function(t){var i;return typeof t=="string"||typeof t=="boolean"||typeof t=="number"?i=Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):i=t,i},e.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.enableVirtualization?this.getIndexByValue(this.value):this.index,this.typedString=u(this.text)?"":this.text,!this.initial){var i=this.detachChanges(this.itemData),r=void 0;typeof this.previousItemData=="string"||typeof this.previousItemData=="boolean"||typeof this.previousItemData=="number"?r=Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):r=this.previousItemData,this.setHiddenValue();var n={e:t,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:r,isInteracted:!!t,value:this.value,element:this.element,event:t};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}(u(this.value)||this.value==="")&&this.floatLabelType!=="Always"&&G([this.inputWrapper.container],"e-valid-input")},e.prototype.setHiddenValue=function(){if(u(this.value))this.hiddenElement.innerHTML="";else{var t=this.allowObjectBinding&&!u(this.value)?oe(this.fields.value?this.fields.value:"",this.value):this.value;if(this.hiddenElement.querySelector("option")){var i=this.hiddenElement.querySelector("option");i.textContent=this.text,i.setAttribute("value",t.toString())}else if(!u(this.hiddenElement)){var r=document.createElement("option");r.text=this.text,r.setAttribute("selected",""),this.hiddenElement.appendChild(r);var i=this.hiddenElement.querySelector("option");i.setAttribute("value",t.toString())}}},e.prototype.onFilterUp=function(t){if(!(t.ctrlKey&&t.keyCode===86)&&(this.isValidKey||t.keyCode===40||t.keyCode===38))switch(this.isValidKey=!1,this.filterArgs=t,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,t.keyCode){case 38:case 40:this.getModuleName()==="autocomplete"&&!this.isPopupOpen&&!this.preventAltUp&&!this.isRequested?(this.preventAutoFill=!0,this.searchLists(t)):this.preventAutoFill=!1,this.preventAltUp=!1,this.getModuleName()==="autocomplete"&&!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])&&de(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&this.typedString!==""||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(t)):this.typedString===""&&this.queryString===""&&this.getModuleName()!=="autocomplete"?(this.preventAutoFill=!0,this.searchLists(t)):this.typedString===""&&(this.list&&this.resetFocusElement(),this.activeIndex=null,this.getModuleName()!=="dropdownlist"&&(this.preventAutoFill=!0,this.searchLists(t),this.getModuleName()==="autocomplete"&&this.hidePopup())),t.preventDefault();break;default:this.isFiltering()&&this.getModuleName()==="combobox"&&u(this.list)&&(this.getInitialData=!0,this.renderList(),!this.isSecondClick&&!this.isDropDownClick&&this.executeCloneElements()),this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.getInitialData||this.searchLists(t),(this.enableVirtualization&&this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof _)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof _&&this.totalItemCount!==0)&&this.getFilteringSkeletonCount();break}else this.isValidKey=!1},e.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value;break}},e.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},e.prototype.getQuery=function(t){var i;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){i=t?t.clone():this.query?this.query.clone():new ae;var r=this.typedString===""?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof _)&&n==="string"||n==="number")i.where("",r,this.typedString,this.ignoreCase,this.ignoreAccent);else if(this.getModuleName()!=="combobox"||this.isFiltering()&&this.getModuleName()==="combobox"&&this.typedString!==""){var s=this.fields.text?this.fields.text:"";i.where(s,r,this.typedString,this.ignoreCase,this.ignoreAccent)}}else i=this.enableVirtualization&&!u(this.customFilterQuery)?this.customFilterQuery.clone():t?t.clone():this.query?this.query.clone():new ae;if(this.enableVirtualization&&this.viewPortInfo.endIndex!==0){var a=this.getTakeValue(),l=!1;if(i){for(var h=0;h<i.queries.length;h++)if(i.queries[h].fn==="onSkip"){l=!0;break}}var p=0,c=0;if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++)i.queries[h].fn==="onSkip"&&(c=i.queries[h].e.nos),i.queries[h].fn==="onTake"&&(p=a<=i.queries[h].e.nos?i.queries[h].e.nos:a);if(p<=0&&this.query&&this.query.queries.length>0)for(var h=0;h<this.query.queries.length;h++)this.query.queries[h].fn==="onTake"&&(p=a<=this.query.queries[h].e.nos?this.query.queries[h].e.nos:a);var d=!1;if(i&&i.queries.length>0)for(var h=0;h<i.queries.length;h++){if(i.queries[h].fn==="onSkip"){c=i.queries[h].e.nos,i.queries.splice(h,1),l=!1,--h;continue}i.queries[h].fn==="onTake"&&(p=i.queries[h].e.nos<=p?p:i.queries[h].e.nos,i.queries.splice(h,1),--h)}!d&&(this.allowFiltering||!this.isPopupOpen||!l)&&(c>0?i.skip(c):i.skip(this.virtualItemStartIndex)),this.isIncrementalRequest?i.take(this.incrementalEndIndex):p>0?i.take(p):i.take(a),i.requiresCount()}return i},e.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},e.prototype.searchLists=function(t){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+le.clearIcon)){var r=this.filterInput.parentElement.querySelector("."+le.clearIcon);r.style.visibility=this.filterInput.value===""?"hidden":"visible"}if(this.isDataFetched=!1,this.isFiltering()){this.checkAndResetCache(),this.isRequesting=!1;var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(s,a,l){n.cancel||(i.isCustomFilter=!0,i.customFilterQuery=a&&a.clone(),i.filteringAction(s,a,l))},baseEventArgs:t,cancel:!1};this.trigger("filtering",n,function(s){!s.cancel&&!i.isCustomFilter&&!s.preventDefaultAction&&i.filteringAction(i.dataSource,null,i.fields)})}},e.prototype.filter=function(t,i,r){this.isCustomFilter=!0,this.filteringAction(t,i,r)},e.prototype.filteringAction=function(t,i,r){if(!u(this.filterInput)){this.beforePopupOpen=!(!this.isPopupOpen&&this.getModuleName()==="combobox"&&this.filterInput.value===""||this.getInitialData);var n=this.list.classList.contains(X.noData);if(this.filterInput.value.trim()===""&&!this.itemTemplate){if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!u(this.actionCompleteData.ulElement)&&!u(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.isFiltering()&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(t,r,i),n&&!this.list.classList.contains(X.noData))){if(!this.list.querySelector(".e-virtual-ddl-content")){var s=this.createElement("div",{className:"e-virtual-ddl-content"});s.style.cssText=this.getTransformValues(),this.list.appendChild(s).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var a=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});a.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(a)}}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,!u(this.itemData)&&this.getModuleName()==="dropdownlist"&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}else if(this.isNotSearchList=!1,i=this.filterInput.value.trim()===""?null:i,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(t,r,i),this.getModuleName()==="dropdownlist"&&this.list.classList.contains(X.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),de(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&n&&!this.list.classList.contains(X.noData)){if(!this.list.querySelector(".e-virtual-ddl-content")){var s=this.createElement("div",{className:"e-virtual-ddl-content"});s.style.cssText=this.getTransformValues(),this.list.appendChild(s).appendChild(this.list.querySelector(".e-list-parent"))}if(!this.list.querySelector(".e-virtual-ddl")){var a=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});a.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(a)}}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates(),this.filterInput&&this.filterInput.value===""&&this.getModuleName()==="combobox"&&this.executeCloneElements()}},e.prototype.setSearchBox=function(t){if(this.isFiltering()){var i=t.querySelector("."+le.filterParent)?t.querySelector("."+le.filterParent):this.createElement("span",{className:le.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:le.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var r=!1;return K.isDevice&&this.isDeviceFullScreen&&(r=!0),this.filterInputObj=Pe.createInput({element:this.filterInput,buttons:r?[le.backIcon,le.filterBarClearIcon]:[le.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),u(this.cssClass)||(this.cssClass.split(" ").indexOf("e-outline")!==-1?B([this.filterInputObj.container],"e-outline"):this.cssClass.split(" ").indexOf("e-filled")!==-1&&B([this.filterInputObj.container],"e-filled")),Te([this.filterInputObj.container],i),Pt([i],t),de(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+le.clearIcon),!K.isDevice&&this.clearIconElement&&(x.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),K.isDevice?this.searchKeyModule=new pr(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new pr(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),x.add(this.filterInput,"input",this.onInput,this),x.add(this.filterInput,"keyup",this.onFilterUp,this),x.add(this.filterInput,"keydown",this.onFilterDown,this),x.add(this.filterInput,"blur",this.onBlurHandler,this),x.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}else return pf},e.prototype.onInput=function(t){!u(t)&&!u(t.data)&&t.data.length>1&&this.autoFill&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.inputElement.value=t.data),this.isValidKey=!0,this.getModuleName()==="combobox"&&this.updateIconState(),K.isDevice&&K.info.name==="mozilla"&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(t))},e.prototype.pasteHandler=function(t){var i=this;setTimeout(function(){i.typedString=i.filterInput.value,i.getModuleName()==="combobox"&&i.isFiltering()&&u(i.list)&&i.renderList(),i.searchLists(t)})},e.prototype.onActionFailure=function(t){o.prototype.onActionFailure.call(this,t),this.beforePopupOpen&&this.renderPopup()},e.prototype.getTakeValue=function(){return this.allowFiltering&&this.getModuleName()==="dropdownlist"&&K.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},e.prototype.onActionComplete=function(t,i,r,n){var s=this;if(this.dataSource instanceof _&&!u(r)&&!this.virtualGroupDataSource&&(this.totalItemCount=r.count),this.isNotSearchList&&!this.enableVirtualization){this.isNotSearchList=!1;return}if(this.getInitialData){this.updateActionCompleteDataValues(t,i),this.getInitialData=!1,this.isReactTemplateUpdate=!0,this.searchLists(this.filterArgs);return}var a=this.itemCount;if(this.isActive||!u(t)){var l=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(o.prototype.onActionComplete.call(this,t,i,r),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof _)||this.dataSource instanceof _&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!u(this.searchKeyEvent)&&this.searchKeyEvent.type==="keydown"&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!u(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),u(t)||de(t,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof _){var h=u(this.fields.value)?this.fields.text:this.fields.value,p=this.allowObjectBinding&&!u(this.value)?oe(h,this.value):this.value,c=this.fields.value.split("."),d=i.some(function(y){return u(y[h])&&c.length>1?s.checkFieldValue(y,c)===p:y[h]===p});this.enableVirtualization&&this.virtualGroupDataSource&&(d=this.virtualGroupDataSource.some(function(y){return u(y[h])&&c.length>1?s.checkFieldValue(y,c)===p:y[h]===p})),d?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new xe(h,"equal",p))).then(function(y){y.result.length>0&&s.addItem(y.result,i.length),s.updateValues()})}else this.updateValues();this.initial=!1}else this.getModuleName()==="autocomplete"&&this.value&&this.setInputValue();if(this.getModuleName()!=="autocomplete"&&this.isFiltering()&&!this.isTyped){if((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||u(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof _||!u(this.dataSource)&&!u(this.dataSource.length)&&this.dataSource.length!==0))&&(this.itemTemplate&&(this.element.tagName==="EJS-COMBOBOX"||this.isReact)&&this.allowFiltering?setTimeout(function(){s.updateActionCompleteDataValues(t,i)},0):this.updateActionCompleteDataValues(t,i)),this.isDynamicData){var f=this.allowObjectBinding&&!u(this.value)?oe(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(f),this.selectedLI=this.getElementByValue(f),this.isDynamicData=!1}if((this.allowCustom||this.allowFiltering&&!this.isValueInList(i,this.value)&&this.dataSource instanceof _)&&!this.enableVirtualization)this.addNewItem(i,l);else if((this.allowCustom||this.allowFiltering&&this.isValueInList(i,this.value))&&!this.enableVirtualization){var g=this.allowObjectBinding&&!u(this.value)?oe(this.fields.value?this.fields.value:"",this.value):this.value,m=!u(this.value)&&l&&l.getAttribute("data-value")===g.toString();m&&this.addNewItem(i,l)}(!u(this.itemData)||u(this.itemData)&&this.enableVirtualization)&&(this.getSkeletonCount(),this.skeletonCount=this.totalItemCount!==0&&this.totalItemCount<this.itemCount*2&&(!(this.dataSource instanceof _)||this.dataSource instanceof _&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.focusIndexItem()),this.enableVirtualization&&this.updateActionCompleteDataValues(t,i)}else if(this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&!this.isFiltering()){var g=this.getItemData().value;this.activeIndex=this.getIndexByValue(g);var v=this.findListElement(this.list,"li","data-value",g);this.selectedLI=v}else this.enableVirtualization&&this.getModuleName()==="autocomplete"&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(r),this.enableVirtualization&&(this.list.querySelector(".e-virtual-list")||(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"))),this.enableVirtualization&&a!==this.itemCount&&this.resetList(this.dataSource,this.fields))}},e.prototype.isValueInList=function(t,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(t[r]===i)return!0}else if(typeof t=="object"&&t!==null){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===i)return!0}return!1},e.prototype.checkFieldValue=function(t,i){var r=t;return i.forEach(function(n){r=r[n]}),r},e.prototype.updateActionCompleteDataValues=function(t,i){this.actionCompleteData={ulElement:t.cloneNode(!0),list:i,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},e.prototype.addNewItem=function(t,i){var r=this;if(!u(this.itemData)&&!u(i)){var n=this.getItemData().value,s=t.some(function(a){return(typeof a=="string"||typeof a=="number"||typeof a=="boolean")&&a===n||oe(r.fields.value,a)===n});s||this.addItem(this.itemData)}},e.prototype.updateActionCompleteData=function(t,i,r){var n=this;this.getModuleName()!=="autocomplete"&&this.actionCompleteData.ulElement&&(this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){n.actionCompleteDataUpdate(t,i,r)},0):this.actionCompleteDataUpdate(t,i,r))},e.prototype.actionCompleteDataUpdate=function(t,i,r){r!==null?this.actionCompleteData.ulElement.insertBefore(t.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[r]):this.actionCompleteData.ulElement.appendChild(t.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list.indexOf(i)<0&&this.actionCompleteData.list.push(i)},e.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=this.enableVirtualization&&!u(t)||!this.enableVirtualization?this.getIndexByValue(t):this.activeIndex;var i=this.findListElement(this.list,"li","data-value",t);this.selectedLI=i,this.activeItem(i),this.enableVirtualization&&u(i)||this.removeFocus()},e.prototype.updateSelection=function(){var t=this.list.querySelector("."+X.selected);t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+X.li).classList.add(le.focus))},e.prototype.updateSelectionList=function(){var t=this.list&&this.list.querySelector(".e-active");if(!t&&!u(this.value)&&this.getModuleName()!=="autocomplete"){var i=this.allowObjectBinding?oe(this.fields.value?this.fields.value:"",this.value):this.value,r=this.findListElement(this.list,"li","data-value",i);r&&r.classList.add("e-active")}},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+le.focus);t&&t.length&&G(t,le.focus)},e.prototype.renderPopup=function(t){var i=this;if(this.popupObj&&document.body.contains(this.popupObj.element)){this.refreshPopup();return}var r={cancel:!1};this.trigger("beforeOpen",r,function(n){var s;if(n.cancel)i.beforePopupOpen=!1;else{var a=i.createElement("div",{id:i.element.id+"_popup",className:"e-ddl e-popup "+(i.cssClass!==null?i.cssClass:"")});a.setAttribute("aria-label",i.element.id),a.setAttribute("role","dialog");var l=i.setSearchBox(a);if(i.listContainerHeight=i.allowFiltering&&i.getModuleName()==="dropdownlist"&&K.isDevice?ke(Math.round(window.outerHeight).toString()+"px"):ke(i.popupHeight),i.headerTemplate&&(i.setHeaderTemplate(a),i.isUpdateHeaderHeight=i.header.offsetHeight!==0),Te([i.list],a),i.footerTemplate&&(i.setFooterTemplate(a),i.isUpdateFooterHeight=i.footer.offsetHeight!==0),document.body.appendChild(a),a.style.top="0px",s=a.clientHeight,i.enableVirtualization&&i.itemTemplate){var h=a.querySelectorAll("li.e-list-item:not(.e-virtual-list)");i.listItemHeight=h.length>0?Math.ceil(h[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(h[0]).marginBottom,10):0}if(i.enableVirtualization&&!i.list.classList.contains(X.noData)){if(i.getSkeletonCount(),i.skeletonCount=i.totalItemCount<i.itemCount*2&&(!(i.dataSource instanceof _)||i.dataSource instanceof _&&i.totalItemCount<=i.itemCount)?0:i.skeletonCount,i.list.querySelector(".e-virtual-ddl-content"))i.list.getElementsByClassName("e-virtual-ddl-content")[0].style=i.getTransformValues();else{var p=i.createElement("div",{className:"e-virtual-ddl-content"});p.style.cssText=i.getTransformValues(),i.list.appendChild(p).appendChild(i.list.querySelector(".e-list-parent"))}if(i.UpdateSkeleton(),i.liCollections=i.list.querySelectorAll("."+X.li),i.virtualItemCount=i.itemCount,i.list.querySelector(".e-virtual-ddl"))i.list.getElementsByClassName("e-virtual-ddl")[0].style=i.GetVirtualTrackHeight();else{var c=i.createElement("div",{id:i.element.id+"_popup",className:"e-virtual-ddl"});c.style.cssText=i.GetVirtualTrackHeight(),a.querySelector(".e-dropdownbase").appendChild(c)}}if(a.style.visibility="hidden",i.popupHeight!=="auto"){if(i.searchBoxHeight=0,!u(l.container)&&i.getModuleName()!=="combobox"&&i.getModuleName()!=="autocomplete"&&(i.searchBoxHeight=l.container.parentElement.getBoundingClientRect().height,i.listContainerHeight=(parseInt(i.listContainerHeight,10)-i.searchBoxHeight).toString()+"px"),i.headerTemplate){i.header=i.header?i.header:a.querySelector(".e-ddl-header");var d=Math.round(i.header.getBoundingClientRect().height);i.listContainerHeight=(parseInt(i.listContainerHeight,10)-(d+i.searchBoxHeight)).toString()+"px"}if(i.footerTemplate){i.footer=i.footer?i.footer:a.querySelector(".e-ddl-footer");var d=Math.round(i.footer.getBoundingClientRect().height);i.listContainerHeight=(parseInt(i.listContainerHeight,10)-(d+i.searchBoxHeight)).toString()+"px"}i.list.style.maxHeight=(parseInt(i.listContainerHeight,10)-2).toString()+"px",a.style.maxHeight=ke(i.popupHeight)}else a.style.height="auto";var f=0,g=void 0;if(i.isPreventScrollAction=!0,!u(i.selectedLI)&&!u(i.activeIndex)&&i.activeIndex>=0||i.enableVirtualization?i.setScrollPosition():i.list.scrollTop=0,K.isDevice&&i.isDeviceFullScreen&&!i.allowFiltering&&(i.getModuleName()==="dropdownlist"||i.isDropDownClick&&i.getModuleName()==="combobox")){f=i.getOffsetValue(a);var m=i.isEmptyList()?i.list:i.liCollections[0];u(i.inputElement)||(g=-(parseInt(getComputedStyle(m).textIndent,10)-parseInt(getComputedStyle(i.inputElement).paddingLeft,10)+parseInt(getComputedStyle(i.inputElement.parentElement).borderLeftWidth,10)))}i.createPopup(a,f,g),i.popupContentElement=i.popupObj.element.querySelector(".e-content"),i.getFocusElement(),i.checkCollision(a),K.isDevice&&(parseInt(i.popupWidth.toString(),10)>window.outerWidth&&!(i.getModuleName()==="dropdownlist"&&i.allowFiltering)&&i.popupObj.element.classList.add("e-wide-popup"),i.popupObj.element.classList.add(le.device),(i.getModuleName()==="dropdownlist"||i.getModuleName()==="combobox"&&!i.allowFiltering&&i.isDropDownClick)&&(i.popupObj.collision={X:"fit",Y:"fit"}),i.isFilterLayout()&&i.isDeviceFullScreen&&(i.popupObj.element.classList.add(le.mobileFilter),i.popupObj.position={X:0,Y:0},i.popupObj.dataBind(),de(i.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),B([document.body,i.popupObj.element],le.popupFullScreen),i.setSearchBoxPosition(),i.backIconElement=l.container.querySelector(".e-back-icon"),i.clearIconElement=l.container.querySelector("."+le.clearIcon),x.add(i.backIconElement,"click",i.clickOnBackIcon,i),x.add(i.clearIconElement,"click",i.clearText,i))),a.style.visibility="visible",B([a],"e-popup-close");for(var v=i.popupObj.getScrollableParent(i.inputWrapper.container),y=0,R=v;y<R.length;y++){var b=R[y];x.add(b,"scroll",i.scrollHandler,i)}u(i.list)||(i.unWireListEvents(),i.wireListEvents()),i.selectedElementID=i.selectedLI?i.selectedLI.id:null,i.enableVirtualization&&(i.notify("bindScrollEvent",{module:"VirtualScroll",component:i.getModuleName(),enable:i.enableVirtualization}),setTimeout(function(){(i.value||i.list.querySelector(".e-active"))&&(i.updateSelectionList(),i.selectedValueInfo&&i.viewPortInfo&&i.viewPortInfo.offsets.top?i.list.scrollTop=i.viewPortInfo.offsets.top:i.scrollBottom(!0,!0))},5)),de(i.targetElement(),{"aria-expanded":"true","aria-owns":i.element.id+"_popup","aria-controls":i.element.id}),i.getModuleName()!=="dropdownlist"&&i.list.classList.contains("e-nodata")&&(de(i.targetElement(),{"aria-activedescendant":"no-record"}),i.popupContentElement.setAttribute("role","status"),i.popupContentElement.setAttribute("id","no-record")),i.inputElement.setAttribute("aria-expanded","true"),i.inputElement.setAttribute("aria-controls",i.element.id+"_popup");var E=i.isFiltering()?i.filterInput.parentElement:i.inputWrapper.container;B([E],[le.inputFocus]);var k={name:"FadeIn",duration:100};i.beforePopupOpen=!0;var F=i.popupObj,W={popup:F,event:t,cancel:!1,animation:k};if(i.trigger("open",W,function(ne){ne.cancel?(i.beforePopupOpen=!1,i.destroyPopup()):(u(i.inputWrapper)||B([i.inputWrapper.container],[le.iconAnimation]),i.renderReactTemplates(),i.isReact&&i.isFiltering()&&i.dataSource instanceof _&&i.list.querySelector("ul")&&!i.isSecondClick&&i.executeCloneElements(),u(i.popupObj)||i.popupObj.show(new xi(ne.animation),i.zIndex===1e3?i.element:null),i.isReact&&setTimeout(function(){if(i.popupHeight&&i.list&&i.popupHeight!=="auto"&&!(i.getModuleName()==="dropdownlist"&&i.allowFiltering)){var ye=typeof i.popupHeight=="string"?parseInt(i.popupHeight,10):i.popupHeight;if(!i.isUpdateHeaderHeight&&i.headerTemplate&&i.header){var L=i.list.style.maxHeight===""?ye:parseInt(i.list.style.maxHeight,10);i.list.style.maxHeight=(L-i.header.offsetHeight).toString()+"px",i.isUpdateHeaderHeight=!0}if(!i.isUpdateFooterHeight&&i.footerTemplate&&i.footer){var L=i.list.style.maxHeight===""?ye:parseInt(i.list.style.maxHeight,10);i.list.style.maxHeight=(L-i.footer.offsetHeight).toString()+"px",i.isUpdateFooterHeight=!0}}},15))}),i.allowResize&&(i.getModuleName()!=="dropdownlist"||!(K.isDevice&&i.isDeviceFullScreen&&i.allowFiltering))){var te=16;i.resizer=i.createElement("div",{id:i.element.id+"_resize-popup",className:le.resizeIcon}),i.list&&i.list.parentElement&&(i.list.parentElement.classList.add("e-resize"),i.popupHeight.toString().toLowerCase()!=="auto"&&s>=parseInt(i.popupHeight.toString(),10)-2&&(i.list.parentElement.style.height="100%"),i.list.parentElement.style.paddingBottom=i.getModuleName()==="dropdownlist"&&i.allowFiltering&&i.searchBoxHeight?(i.searchBoxHeight+te).toString()+"px":te.toString()+"px",(i.header||i.footer||i.itemTemplate)&&(i.list.parentElement.style.paddingBottom=(parseInt(i.list.parentElement.style.maxHeight,10)-parseInt(i.list.style.maxHeight,10)+te).toString()+"px"),i.list.parentElement.appendChild(i.resizer),i.list.parentElement.style.width=i.resizeWidth+"px",i.list.parentElement.style.height=i.resizeHeight+"px",i.list.parentElement.style.maxHeight=i.resizeHeight+"px",i.list.style.maxHeight=i.resizeHeight+"px"),x.add(i.resizer,"mousedown",i.startResizing,i),x.add(i.resizer,"touchstart",i.startResizing,i)}}})},e.prototype.checkCollision=function(t){if(!K.isDevice||K.isDevice&&!(this.getModuleName()==="dropdownlist"||this.isDropDownClick)){var i=Gs(t);i.length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision()}},e.prototype.getOffsetValue=function(t){var i=getComputedStyle(t),r=parseInt(i.borderTopWidth,10),n=parseInt(i.borderBottomWidth,10);return this.setPopupPosition(r+n)},e.prototype.createPopup=function(t,i,r){var n=this;this.popupObj=new Ys(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:r,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown(),n.isReact&&n.clearTemplate(["headerTemplate","footerTemplate"]),n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup(),n.isFiltering()&&n.actionCompleteData.list&&n.actionCompleteData.list.length>0?(n.isActive=!0,n.isReactTemplateUpdate&&n.isReact&&n.itemTemplate&&!n.enableVirtualization&&(n.actionCompleteData.ulElement=n.renderItems(n.actionCompleteData.list,n.fields),n.isReactTemplateUpdate=!1),n.enableVirtualization?n.onActionComplete(n.ulElement,n.listData,null,!0):n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0)):n.enableVirtualization&&n.focusIndexItem()},open:function(){x.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0;var s=n.actionCompleteData&&n.actionCompleteData.ulElement&&n.actionCompleteData.ulElement.querySelector("li"),a=n.list.querySelector("ul li");!u(n.ulElement)&&!u(n.ulElement.getElementsByClassName("e-item-focus")[0])?de(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-item-focus")[0].id}):!u(n.ulElement)&&!u(n.ulElement.getElementsByClassName("e-active")[0])&&de(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-active")[0].id}),n.isFiltering()&&n.itemTemplate&&n.element.tagName===n.getNgDirective()&&s&&a&&s.textContent!==a.textContent&&n.element.tagName!=="EJS-COMBOBOX"&&n.cloneElements(),n.isFilterLayout()&&(G([n.inputWrapper.container],[le.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&B([n.inputWrapper.clearButton],le.clearIconHide)),n.activeStateChange()},targetExitViewport:function(){K.isDevice||n.hidePopup()}})},e.prototype.isEmptyList=function(){return!u(this.liCollections)&&this.liCollections.length===0},e.prototype.getFocusElement=function(){},e.prototype.isFilterLayout=function(){return this.getModuleName()==="dropdownlist"&&this.allowFiltering},e.prototype.scrollHandler=function(){K.isDevice&&(this.getModuleName()==="dropdownlist"&&!this.isFilterLayout()||this.getModuleName()==="combobox"&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},e.prototype.isElementInViewport=function(t){var i=t.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=window.innerHeight&&i.right<=window.innerWidth},e.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var i=this.filterInput.parentElement.querySelector("."+le.clearIcon);Ve(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},e.prototype.setPopupPosition=function(t){var i,r=t,n=this.list.querySelector("."+le.focus)||this.selectedLI,s=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=s.getBoundingClientRect().height;this.listItemHeight=l+parseInt(window.getComputedStyle(s).marginBottom,10);var h=this.list.offsetHeight/2,p=u(n)?s.offsetTop:n.offsetTop,c=a.offsetTop;if(c-h<p&&!u(this.liCollections)&&this.liCollections.length>0&&!u(n)){var d=this.list.offsetHeight/l,f=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(d-(this.liCollections.length-this.activeIndex))*l-r+f,this.list.scrollTop=n.offsetTop}else p>h&&!this.enableVirtualization?(i=h-l/2,this.list.scrollTop=p-h+l/2):i=p;var g=this.inputWrapper.container.offsetHeight;return i=i+l+r-(l-g)/2,-i},e.prototype.setWidth=function(){var t=ke(this.popupWidth);if(t.indexOf("%")>-1){var i=this.inputWrapper.container.offsetWidth*parseFloat(t)/100;t=i.toString()+"px"}if(K.isDevice&&t.indexOf("px")>-1&&!this.allowFiltering&&(this.getModuleName()==="dropdownlist"||this.isDropDownClick&&this.getModuleName()==="combobox")){var r=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+(parseInt(getComputedStyle(r).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))*2+"px"}return t},e.prototype.scrollBottom=function(t,i,r){var n=this;if(i===void 0&&(i=!1),r===void 0&&(r=null),u(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+X.li),!u(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!u(this.selectedLI)){var s=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0;this.isUpwardScrolling=!1;var a=this.list.querySelectorAll(".e-virtual-list").length,l=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,h=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+s):this.selectedLI.offsetTop,p=this.list.offsetHeight,c=h-a*(this.selectedLI.offsetHeight+s)+(this.selectedLI.offsetHeight+s)-this.list.scrollTop,d=this.list.scrollTop+c-p,f=!1;d=t?d+parseInt(getComputedStyle(this.list).paddingTop,10)*2:d+parseInt(getComputedStyle(this.list).paddingTop,10);var g=h-a*(this.selectedLI.offsetHeight+s)+(this.selectedLI.offsetHeight+s)-this.list.scrollTop;if(g=this.fields.groupBy&&!u(this.fixedHeaderElement)?g-this.fixedHeaderElement.offsetHeight:g,this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0,f=this.isKeyBoardAction;else if(c>p||!(g>0&&this.list.offsetHeight>g)){var m=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,v=r==="pageDown"?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||i?this.isKeyBoardAction&&this.enableVirtualization&&l&&m===l&&r!=="end"&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=d:(this.enableVirtualization&&(v=r==="pageDown"?this.getPageCount()+1:v),this.list.scrollTop+=(this.selectedLI.offsetHeight+s)*v),this.isPreventKeyAction=this.IsScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&r==="end"?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(r==="pageDown"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=d):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?t&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+this.listItemHeight*2:this.virtualListInfo.startIndex*this.listItemHeight:0,f=this.isKeyBoardAction}this.isKeyBoardAction=f,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&r==="down"&&setTimeout(function(){n.scrollStop(null,!0)},100)}},e.prototype.scrollTop=function(t){if(t===void 0&&(t=null),!u(this.selectedLI)){var i=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0,r=this.list.querySelectorAll(".e-virtual-list").length,n=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+i):this.selectedLI.offsetTop,s=n-r*(this.selectedLI.offsetHeight+i)-this.list.scrollTop,a=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;s=this.fields.groupBy&&!u(this.fixedHeaderElement)?s-this.fixedHeaderElement.offsetHeight:s;var l=n-r*(this.selectedLI.offsetHeight+i)+(this.selectedLI.offsetHeight+i)-this.list.scrollTop,h=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&s<=0;if(this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(s<0||h){var p=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,c=t==="pageUp"?this.getPageCount()-2:1;this.enableVirtualization&&(c=t==="pageUp"?this.getPageCount():c),this.enableVirtualization&&this.isKeyBoardAction&&a&&p===a&&t!=="home"&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=(this.selectedLI.offsetHeight+i)*c,this.isPreventKeyAction=this.list.scrollTop!==0?this.isPreventKeyAction:!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&t==="home"?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(t==="pageUp"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+s)}else l>0&&this.list.offsetHeight>l||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!u(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},e.prototype.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},e.prototype.isEditTextBox=function(){return!1},e.prototype.isFiltering=function(){return this.allowFiltering},e.prototype.isPopupButton=function(){return!0},e.prototype.setScrollPosition=function(t){if(this.isPreventScrollAction=!0,u(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,t.action);break;default:this.isKeyBoardAction=t.action==="up"||t.action==="pageUp"||t.action==="open",this.scrollTop(t.action);break}this.isKeyBoardAction=!1},e.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},e.prototype.setEleWidth=function(t){u(t)||(typeof t=="number"?this.inputWrapper.container.style.width=ke(t):typeof t=="string"&&(this.inputWrapper.container.style.width=t.match(/px|%|em/)?t:ke(t)))},e.prototype.closePopup=function(t,i){var r=this,n=!u(this.filterInput)&&!u(this.filterInput.value)&&this.filterInput.value!=="";if(this.getModuleName()==="combobox"&&this.typedString,this.isTyped=!1,this.isVirtualTrackHeight=!1,!!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen)){this.keyboardEvent=null,x.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var s=this.popupObj.getScrollableParent(this.inputWrapper.container),a=0,l=s;a<l.length;a++){var h=l[a];x.remove(h,"scroll",this.scrollHandler)}K.isDevice&&this.isFilterLayout()&&this.isDeviceFullScreen&&G([document.body,this.popupObj.element],le.popupFullScreen),this.isFilterLayout()&&(K.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&x.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(x.remove(this.backIconElement,"click",this.clickOnBackIcon),x.remove(this.clearIconElement,"click",this.clearText)),u(this.filterInput)||(x.remove(this.filterInput,"input",this.onInput),x.remove(this.filterInput,"keyup",this.onFilterUp),x.remove(this.filterInput,"keydown",this.onFilterDown),x.remove(this.filterInput,"blur",this.onBlurHandler),x.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput.removeAttribute("aria-disabled"),this.filterInput.removeAttribute("role"),this.filterInput.removeAttribute("autocomplete"),this.filterInput.removeAttribute("autocapitalize"),this.filterInput.removeAttribute("spellcheck")),this.filterInput=null),de(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(le.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(this.value==null||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,(this.getModuleName()==="autocomplete"||this.getModuleName()==="dropdownlist"&&!u(this.typedString)&&this.typedString!==""||this.getModuleName()==="combobox"&&this.allowFiltering&&!u(this.typedString)&&this.typedString!=="")&&this.checkAndResetCache()):this.getModuleName()==="autocomplete"&&this.checkAndResetCache(),(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.skeletonCount!==0&&this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var p={name:"FadeOut",duration:100,delay:t||0},c=this.popupObj,d={popup:c,cancel:!1,animation:p,event:i||null};this.trigger("close",d,function(g){if(r.getModuleName()==="dropdownlist"&&Pe.destroy({element:r.filterInput,floatLabelType:r.floatLabelType,properties:{placeholder:r.filterBarPlaceholder},buttons:r.clearIconElement},r.clearIconElement),r.filterInputObj=null,!u(r.popupObj)&&!u(r.popupObj.element.querySelector(".e-fixed-head"))){var m=r.popupObj.element.querySelector(".e-fixed-head");m.parentNode.removeChild(m),r.fixedHeaderElement=null}g.cancel||(r.getModuleName()==="autocomplete"&&r.rippleFun(),r.isPopupOpen?r.popupObj.hide(new xi(g.animation)):r.destroyPopup())}),K.isDevice&&!d.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup");var f;this.dataSource instanceof _?f=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:f=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.enableVirtualization&&this.isFiltering()&&n&&this.totalItemCount!==f&&(this.updateInitialData(),this.checkAndResetCache())}},e.prototype.updateInitialData=function(){var t=this.selectData;if(!u(t)){var i=this.renderItems(t,this.fields);if(this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.getModuleName()==="combobox"&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof _?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.list.parentElement){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});r.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(r)}this.getModuleName()!=="autocomplete"&&this.totalItemCount!==0&&this.totalItemCount>this.itemCount*2&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=t,this.updateActionCompleteDataValues(i,t),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.inputElement.removeAttribute("aria-controls"),this.popupObj&&(this.resizer&&(x.remove(this.resizer,"mousedown",this.startResizing),x.remove(this.resizer,"touchstart",this.startResizing)),this.popupObj.destroy(),Ve(this.popupObj.element))},e.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},e.prototype.render=function(){this.preselectedIndex=u(this.index)?null:this.index,this.element.tagName==="INPUT"?(this.inputElement=this.element,u(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),u(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var t=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(t=this.cssClass.replace(/\s+/g," ").trim()),!u(Y(this.element,"fieldset"))&&Y(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=Pe.createInput({element:this.inputElement,buttons:this.isPopupButton()?[le.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:this.getModuleName()==="dropdownlist"?!0:this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:le.hiddenElement}}),Pt([this.hiddenElement],this.inputWrapper.container),this.hiddenElement.hasAttribute("aria-label")||this.hiddenElement.setAttribute("aria-label",this.getModuleName()),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=ke(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.floatLabelType!=="Never"&&Pe.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):an("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()):this.getModuleName()==="dropdownlist"&&(this.targetElement().hasAttribute("aria-label")||de(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false")),de(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),this.value!==null||this.activeIndex!==null||this.text!==null)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.index!==null&&(this.activeIndex=this.index+this.skeletonCount)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if(this.element.tagName==="SELECT"&&this.element.options[0]){var r=this.element;this.value=this.allowObjectBinding?this.getDataByValue(r.options[r.selectedIndex].value):r.options[r.selectedIndex].value,this.text=u(this.value)?null:r.options[r.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(s){s.stopImmediatePropagation()},this.inputElement.onchange=function(s){s.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),u(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var n=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!u(this.element.id)&&this.element.id!==""&&!u(n)&&(n.id="label_"+this.element.id.replace(/ /g,"_"),de(this.inputElement,{"aria-labelledby":n.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},e.prototype.getListHeight=function(){var t=this.createElement("div",{className:"e-dropdownbase"}),i=this.createElement("li",{className:"e-list-item"}),r=ke(this.popupHeight);t.style.height=parseInt(r,10).toString()+"px",t.appendChild(i),document.body.appendChild(t),this.virtualListHeight=t.getBoundingClientRect().height;var n=Math.ceil(i.getBoundingClientRect().height)+parseInt(window.getComputedStyle(i).marginBottom,10);return t.remove(),n},e.prototype.setFooterTemplate=function(t){var i;this.footer?this.isReact&&typeof this.footerTemplate=="function"?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),B([this.footer],le.footer));var r=this.dropdownCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&r?i=Be(Ye(this.footerTemplate,document).innerHTML.trim()):i=Be(this.footerTemplate);var n=i({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);n&&n.length>0&&Te(n,this.footer),Te([this.footer],t)},e.prototype.setHeaderTemplate=function(t){var i;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),B([this.header],le.header));var r=this.dropdownCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&r?i=Be(Ye(this.headerTemplate,document).innerHTML.trim()):i=Be(this.headerTemplate);var n=i({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);n&&n.length&&Te(n,this.header);var s=t.querySelector("div.e-content");t.insertBefore(this.header,s)},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.setOldText=function(t){this.text=t},e.prototype.setOldValue=function(t){this.value=t},e.prototype.refreshPopup=function(){!u(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&!(K.isDevice&&this.isFilterLayout())||this.getModuleName()==="autocomplete")&&(G([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},e.prototype.checkData=function(t){t.dataSource&&!u(Object.keys(t.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&t.dataSource instanceof _)&&(this.list&&!this.isReact?this.list.innerHTML="":this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var i=Object.keys(t).indexOf("value")!==-1&&u(t.value),r=Object.keys(t).indexOf("text")!==-1&&u(t.text);this.getModuleName()!=="autocomplete"&&this.allowFiltering&&(i||r)&&(this.itemData=null),this.allowFiltering&&t.dataSource&&!u(Object.keys(t.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&t.query&&!u(Object.keys(t.query))&&(this.actionCompleteData=this.getModuleName()==="combobox"?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},e.prototype.updateDataSource=function(t,i){(this.inputElement.value!==""||!u(t)&&(u(t.dataSource)||!(t.dataSource instanceof _)&&t.dataSource.length===0))&&this.clearAll(null,t),this.fields.groupBy&&t.fields&&!this.isGroupChecking&&this.list&&(x.remove(this.list,"scroll",this.setFloatingHeader),x.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!u(t)&&(u(t.dataSource)||!(t.dataSource instanceof _)&&t.dataSource.length===0))||t.dataSource instanceof _||!u(t)&&Array.isArray(t.dataSource)&&!u(i)&&Array.isArray(i.dataSource)&&t.dataSource.length!==i.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},e.prototype.checkCustomValue=function(){var t=this.allowObjectBinding&&!u(this.value)?oe(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(t);var i=this.getItemData(),r=this.allowObjectBinding?this.itemData:i.value,n=u(r)?null:this.index;u(n)&&t===r||this.isAngular?this.setProperties({text:i.text?i.text.toString():i.text,value:r}):this.setProperties({text:i.text?i.text.toString():i.text,index:n,value:r})},e.prototype.updateInputFields=function(){this.getModuleName()==="dropdownlist"&&Pe.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(t,i){var r=this;!u(t.dataSource)&&!this.isTouched&&u(t.value)&&u(t.index)&&!u(this.preselectedIndex)&&!u(this.index)&&(t.index=this.index),(!u(t.value)||!u(t.index))&&(this.isTouched=!0),this.getModuleName()==="dropdownlist"&&(this.checkData(t),this.setUpdateInitial(["fields","query","dataSource"],t));for(var n=function(c){switch(c){case"query":case"dataSource":s.getSkeletonCount(),s.checkAndResetCache();break;case"htmlAttributes":s.setHTMLAttributes();break;case"width":s.setEleWidth(t.width),Pe.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"placeholder":Pe.setPlaceholder(t.placeholder,s.inputElement);break;case"filterBarPlaceholder":s.filterInput&&Pe.setPlaceholder(t.filterBarPlaceholder,s.filterInput);break;case"readonly":s.getModuleName()!=="dropdownlist"&&Pe.setReadonly(t.readonly,s.inputElement),s.setReadOnly();break;case"cssClass":s.setCssClass(t.cssClass,i.cssClass),Pe.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"enableRtl":s.setEnableRtl();break;case"enabled":s.setEnable();break;case"text":if(s.fields.disabled&&(t.text=t.text&&!s.isDisabledItemByIndex(s.getIndexByValue(s.getValueByText(t.text)))?t.text:null),t.text===null){s.clearAll();break}if(s.enableVirtualization){s.updateValues(),s.updateInputFields(),s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(s.list||(s.dataSource instanceof _&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender){var d=s.getElementByText(t.text);if(!s.checkValidLi(d))if(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100)s.setSelectionData(t.text,i.text,"text");else if(t.text&&s.dataSource instanceof _){var f=s.getItems().length,g=u(s.fields.text)?s.fields.value:s.fields.text;s.typedString="",s.dataSource.executeQuery(s.getQuery(s.query).where(new xe(g,"equal",t.text))).then(function(k){k.result.length>0?(r.addItem(k.result,f),r.updateValues()):r.setOldText(i.text)})}else s.getModuleName()==="autocomplete"?s.setInputValue(t,i):s.setOldText(i.text);s.updateInputFields()}break;case"value":if(s.fields.disabled&&(t.value=t.value!=null&&!s.isDisableItemValue(t.value)?t.value:null),t.value===null){s.clearAll();break}if(s.allowObjectBinding&&!u(t.value)&&!u(i.value)&&s.isObjectInArray(t.value,[i.value]))return{value:void 0};if(s.enableVirtualization){s.updateValues(),s.updateInputFields(),s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),s.preventChange=s.isAngular&&s.preventChange?!s.preventChange:s.preventChange;break}if(s.notify("beforeValueChange",{newProp:t}),s.list||(s.dataSource instanceof _&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender){var m=s.allowObjectBinding&&!u(t.value)?oe(s.fields.value?s.fields.value:"",t.value):t.value,v=s.getElementByValue(m);if(!s.checkValidLi(v))if(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100)s.setSelectionData(t.value,i.value,"value");else if(t.value&&s.dataSource instanceof _){var y=s.getItems().length,g=u(s.fields.value)?s.fields.text:s.fields.value;s.typedString="";var R=s.allowObjectBinding&&!u(t.value)?oe(g,t.value):t.value;s.dataSource.executeQuery(s.getQuery(s.query).where(new xe(g,"equal",R))).then(function(F){F.result.length>0?(r.addItem(F.result,y),r.updateValues()):r.setOldValue(i.value)})}else s.getModuleName()==="autocomplete"?s.setInputValue(t,i):s.setOldValue(i.value);s.updateInputFields(),s.preventChange=s.isAngular&&s.preventChange?!s.preventChange:s.preventChange}break;case"index":if(s.fields.disabled&&(t.index=t.index!=null&&!s.isDisabledItemByIndex(t.index)?t.index:null),t.index===null){s.clearAll();break}if(s.list||(s.dataSource instanceof _&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender&&s.liCollections){var b=s.liCollections[t.index];s.checkValidLi(b)||(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100?s.setSelectionData(t.index,i.index,"index"):s.index=i.index),s.updateInputFields()}break;case"footerTemplate":s.popupObj&&s.setFooterTemplate(s.popupObj.element);break;case"headerTemplate":s.popupObj&&s.setHeaderTemplate(s.popupObj.element);break;case"valueTemplate":!u(s.itemData)&&s.valueTemplate!==null&&s.setValueTemplate();break;case"allowFiltering":s.allowFiltering&&(s.actionCompleteData={ulElement:s.ulElement,list:s.listData,isUpdated:!0},s.actionData=s.actionCompleteData,s.updateSelectElementData(s.allowFiltering));break;case"floatLabelType":Pe.removeFloating(s.inputWrapper),Pe.addFloating(s.inputElement,t.floatLabelType,s.placeholder,s.createElement),!u(s.inputWrapper.buttons[0])&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&s.floatLabelType!=="Never"&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":s.inputWrapper.clearButton||(Pe.setClearButton(t.showClearButton,s.inputElement,s.inputWrapper,null,s.createElement),s.bindClearEvent());break;default:{var E=s.getPropObject(c,t,i);o.prototype.onPropertyChanged.call(s,E.newProperty,E.oldProperty)}break}},s=this,a=0,l=Object.keys(t);a<l.length;a++){var h=l[a],p=n(h);if(typeof p=="object")return p.value}},e.prototype.checkValidLi=function(t){return this.isValidLI(t)?(this.setSelection(t,null),!0):!1},e.prototype.setSelectionData=function(t,i,r){var n=this,s;this.updateListValues=function(){if(r==="text")s=n.getElementByText(t),n.checkValidLi(s)||n.setOldText(i);else if(r==="value"){var a=n.fields.value?n.fields.value:"";n.allowObjectBinding&&!u(t)&&oe(a,t),s=n.getElementByValue(t),n.checkValidLi(s)||n.setOldValue(i)}else r==="index"&&(s=n.liCollections[t],n.checkValidLi(s)||(n.index=i))}},e.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},e.prototype.setReadOnly=function(){this.readonly?B([this.inputWrapper.container],["e-readonly"]):G([this.inputWrapper.container],["e-readonly"])},e.prototype.setInputValue=function(t,i){},e.prototype.setCssClass=function(t,i){u(i)||(i=i.replace(/\s+/g," ").trim()),u(t)||(t=t.replace(/\s+/g," ").trim()),Pe.setCssClass(t,[this.inputWrapper.container],i),this.popupObj&&Pe.setCssClass(t,[this.popupObj.element],i)},e.prototype.getModuleName=function(){return"dropdownlist"},e.prototype.showPopup=function(t){if(this.enabled){if(this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.isReact&&this.getModuleName()==="combobox"&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof _&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(u(this.list)||!gt(this.list)&&(this.list.classList.contains(X.noData)||this.list.querySelectorAll("."+X.li).length<=0))&&(this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&(this.isSecondClick=!1),this.renderList(t)),this.enableVirtualization&&this.listData&&this.listData.length&&(!u(this.value)&&(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(t),this.enableVirtualization&&!this.allowFiltering&&this.selectedValueInfo!=null&&this.selectedValueInfo.startIndex>0&&this.value!=null&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),!this.isSecondClick&&!this.isDropDownClick&&this.executeCloneElements()}},e.prototype.executeCloneElements=function(){var t=this,i=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&setTimeout(function(){t.cloneElements(),t.isSecondClick=!(t.isReact&&t.isFiltering()&&t.dataSource instanceof _&&!t.list.querySelector("ul"))},i)},e.prototype.invokeRenderPopup=function(t){if(K.isDevice&&this.isFilterLayout()){var i=this;window.onpopstate=function(){i.hidePopup()},history.pushState({},"")}!u(this.list)&&(!u(this.list.children[0])||this.list.classList.contains(X.noData))&&this.renderPopup(t)},e.prototype.renderHightSearch=function(){},e.prototype.hidePopup=function(t){if(this.isEscapeKey&&this.getModuleName()==="dropdownlist")if(u(this.inputElement)||Pe.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,u(this.index))this.resetSelection();else{var i=this.allowObjectBinding?oe(this.fields.value?this.fields.value:"",this.value):this.value,r=this.findListElement(this.ulElement,"li","data-value",i);this.selectedLI=this.liCollections[this.index]||r,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&this.itemData!==null&&this.setValueTemplate())}this.isVirtualTrackHeight=!1,this.customFilterQuery=null,this.closePopup(0,t);var n=this.getItemData(),s=!u(this.selectedLI);s&&this.enableVirtualization&&this.selectedLI.classList&&(s=this.selectedLI.classList.contains("e-active")),this.inputElement&&this.inputElement.value===""&&!this.isInteracted&&(this.isSelectCustom||s&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(t))},e.prototype.focusIn=function(t){if(this.enabled&&!this.targetElement().classList.contains(le.disable)){var i=!1;this.preventFocus&&K.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),B([this.inputWrapper.container],[le.inputFocus]),this.onFocus(t),this.floatLabelType!=="Never"&&Pe.calculateWidth(this.inputElement,this.inputWrapper.container)}},e.prototype.focusOut=function(t){this.enabled&&(!this.enableVirtualization&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.isTyped=!0),this.hidePopup(t),this.targetElement()&&this.targetElement().blur(),G([this.inputWrapper.container],[le.inputFocus]),this.floatLabelType!=="Never"&&Pe.calculateWidth(this.inputElement,this.inputWrapper.container))},e.prototype.disableItem=function(t){if(this.fields.disabled){this.list||this.renderList();var i=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if(typeof t=="string")i=this.getIndexByValue(t);else if(typeof t=="object"){if(t instanceof HTMLLIElement){for(var r=0;r<this.liCollections.length;r++)if(this.liCollections[r]===t){i=this.getIndexByValue(t.getAttribute("data-value"));break}}else for(var n=JSON.parse(JSON.stringify(t))[this.fields.value],r=0;r<this.listData.length;r++)if(JSON.parse(JSON.stringify(this.listData[r]))[this.fields.value]===n){i=this.getIndexByValue(n);break}}else i=t;var s=i<this.liCollections.length&&i>-1;if(s&&!JSON.parse(JSON.stringify(this.listData[i]))[this.fields.disabled]){var a=this.liCollections[i];if(a){this.disableListItem(a);var l=JSON.parse(JSON.stringify(this.listData[i]));l[this.fields.disabled]=!0,this.listData[i]=l,this.dataSource=this.listData,a.classList.contains(le.focus)&&this.removeFocus(),a.classList.contains(le.selected)&&this.clear()}}}}},e.prototype.destroy=function(){if(this.isActive=!1,this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),Qd(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))){if(this.inputElement){for(var t=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<t.length;i++)this.inputElement.removeAttribute(t[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),Pe.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container&&this.inputWrapper.container.parentElement&&(this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?Ve(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),Ve(this.inputWrapper.container))),delete this.hiddenElement,this.filterInput=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.clearIconElement=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!u(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.inputElement&&!u(this.inputElement.onselect)&&(this.inputElement.onselect=null),Pe.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties,buttons:this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]},this.clearButton),this.clearButton=null,this.inputElement=null,this.inputWrapper=null,o.prototype.destroy.call(this)}},e.prototype.getItems=function(){return this.list||(this.dataSource instanceof _&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?o.prototype.getItems.call(this):[]},e.prototype.getDataByValue=function(t){return o.prototype.getDataByValue.call(this,t)},e.prototype.clear=function(){this.value=null},Ae([C(null)],e.prototype,"cssClass",void 0),Ae([C("100%")],e.prototype,"width",void 0),Ae([C(!0)],e.prototype,"enabled",void 0),Ae([C(!1)],e.prototype,"enablePersistence",void 0),Ae([C("300px")],e.prototype,"popupHeight",void 0),Ae([C("100%")],e.prototype,"popupWidth",void 0),Ae([C(null)],e.prototype,"placeholder",void 0),Ae([C(null)],e.prototype,"filterBarPlaceholder",void 0),Ae([C({})],e.prototype,"htmlAttributes",void 0),Ae([C(null)],e.prototype,"query",void 0),Ae([C(null)],e.prototype,"valueTemplate",void 0),Ae([C(null)],e.prototype,"headerTemplate",void 0),Ae([C(null)],e.prototype,"footerTemplate",void 0),Ae([C(!1)],e.prototype,"allowFiltering",void 0),Ae([C(!0)],e.prototype,"isDeviceFullScreen",void 0),Ae([C(!1)],e.prototype,"readonly",void 0),Ae([C(!1)],e.prototype,"enableVirtualization",void 0),Ae([C(!1)],e.prototype,"allowResize",void 0),Ae([C(null)],e.prototype,"text",void 0),Ae([C(null)],e.prototype,"value",void 0),Ae([C(!1)],e.prototype,"allowObjectBinding",void 0),Ae([C(null)],e.prototype,"index",void 0),Ae([C("Never")],e.prototype,"floatLabelType",void 0),Ae([C(!1)],e.prototype,"showClearButton",void 0),Ae([O()],e.prototype,"filtering",void 0),Ae([O()],e.prototype,"change",void 0),Ae([O()],e.prototype,"beforeOpen",void 0),Ae([O()],e.prototype,"open",void 0),Ae([O()],e.prototype,"close",void 0),Ae([O()],e.prototype,"blur",void 0),Ae([O()],e.prototype,"focus",void 0),Ae([O()],e.prototype,"resizeStop",void 0),Ae([O()],e.prototype,"resizing",void 0),Ae([O()],e.prototype,"resizeStart",void 0),e=Ae([ki],e),e}(hf),df=function(){function o(e){this.pagerModule=e}return o.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},o.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.refreshAriaAttrLabel(),this.updateStyles()},o.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),r=document.createDocumentFragment();i.innerHTML="";for(var n=1;n<=t.pageCount;n++)e=pe("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{tabindex:"-1","aria-label":t.getLocalizedLabel("Page")+n+t.getLocalizedLabel("Of")+t.totalPages+t.getLocalizedLabel("Pages"),href:"#"}}),t.currentPage===n&&(ve(e,["e-currentitem","e-active"],["e-pager-default"]),e.setAttribute("aria-current","page")),r.appendChild(e);i.appendChild(r),this.links=[].slice.call(i.childNodes)},o.prototype.wireEvents=function(){x.add(this.pagerElement,"click",this.clickHandler,this),x.add(this.pagerElement,"auxclick",this.auxiliaryClickHandler,this)},o.prototype.unwireEvents=function(){x.remove(this.pagerModule.element,"click",this.clickHandler),x.remove(this.pagerModule.element,"auxclick",this.auxiliaryClickHandler)},o.prototype.destroy=function(){this.unwireEvents()},o.prototype.refreshAriaAttrLabel=function(){for(var e=this.pagerModule,t=e.element.querySelector(".e-numericcontainer"),i=t.querySelectorAll("a"),r=0;r<i.length;r++)i[parseInt(r.toString(),10)].hasAttribute("aria-label")&&i[parseInt(r.toString(),10)].hasAttribute("index")&&i[parseInt(r.toString(),10)].setAttribute("aria-label",e.getLocalizedLabel("Page")+i[parseInt(r.toString(),10)].getAttribute("index")+e.getLocalizedLabel("Of")+e.totalPages+e.getLocalizedLabel("Pages"))},o.prototype.renderNumericContainer=function(){this.element=pe("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(pe("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},o.prototype.renderFirstNPrev=function(e){this.first=pe("div",{className:"e-first e-icons e-icon-first",attrs:{title:this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1",role:"button"}}),this.prev=pe("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1",role:"button"}}),Te([this.first,this.prev],e)},o.prototype.renderPrevPagerSet=function(e){var t=pe("div");this.PP=pe("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.PP),e.appendChild(t)},o.prototype.renderNextPagerSet=function(e){var t=pe("div");this.NP=pe("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",href:"#"}}),t.appendChild(this.NP),e.appendChild(t)},o.prototype.renderNextNLast=function(e){this.next=pe("div",{className:"e-next e-icons e-icon-next",attrs:{title:this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1",role:"button"}}),this.last=pe("div",{className:"e-last e-icons e-icon-last",attrs:{title:this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1",role:"button"}}),Te([this.next,this.last],e)},o.prototype.clickHandler=function(e){var t=this.pagerModule;return this.target=e.target,this.target.classList.contains("e-numericitem")&&e.preventDefault(),t.previousPageNo=t.currentPage,!this.target.classList.contains("e-disable")&&!u(this.target.getAttribute("index"))&&(t.currentPage=parseInt(this.target.getAttribute("index"),10),this.pagerModule.isInteracted=!0,t.dataBind()),!1},o.prototype.auxiliaryClickHandler=function(e){this.target=e.target,this.target.classList.contains("e-numericitem")&&e.button===1&&e.preventDefault()},o.prototype.updateLinksHtml=function(){var e=this.pagerModule,t,i,r,n=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');e.currentPage=e.totalPages===1?1:e.currentPage,e.currentPage>e.totalPages&&e.totalPages&&(e.currentPage=e.totalPages),t=parseInt((e.currentPage/e.pageCount).toString(),10),e.currentPage%e.pageCount===0&&t>0&&(t=t-1);for(var s=0;s<e.pageCount;s++){if(e.isPagerResized){var a=this.pagerElement.querySelector(".e-focus"),l=this.target?this.target:a||null,h=!1,p=!1,c=!1,d=!1,f=!1,g=!1,m=!1;if(l){var v=l.classList;if(v.contains("e-icons"))switch(!0){case v.contains("e-prev"):h=!0;break;case v.contains("e-next"):p=!0;break;case v.contains("e-first"):c=!0;break;case v.contains("e-last"):d=!0;break}else if(v.contains("e-numericitem"))switch(!0){case v.contains("e-np"):g=!0;break;case v.contains("e-pp"):m=!0;break;default:f=v.contains("e-numericitem");break}}i=d||this.pagerModule.keyAction==="End",n=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');var y=Array.from(n).some(function(E){return parseInt(E.getAttribute("index"),10)===e.currentPage});c||this.pagerModule.keyAction==="Home"?r=1+s:d||this.pagerModule.keyAction==="End"?r=t*e.pageCount+1+s:p||this.pagerModule.keyAction==="ArrowRight"||h||this.pagerModule.keyAction==="ArrowLeft"?y?r=parseInt(n[0].getAttribute("index"),10)+s:h||this.pagerModule.keyAction==="ArrowLeft"?r=parseInt(this.PP.getAttribute("index"),10)+s:r=e.currentPage+s:g||m?r=e.currentPage+s:f?r=parseInt(n[0].getAttribute("index"),10)+s:r=t*e.pageCount+1+s}else r=t*e.pageCount+1+s;r<=e.totalPages?(this.links[parseInt(s.toString(),10)].classList.remove("e-hide"),this.links[parseInt(s.toString(),10)].style.display="",this.links[parseInt(s.toString(),10)].setAttribute("index",r.toString()),this.links[parseInt(s.toString(),10)].innerHTML=e.customText?e.customText+r:r.toString(),e.currentPage!==r?this.links[parseInt(s.toString(),10)].classList.add("e-pager-default"):this.links[parseInt(s.toString(),10)].classList.remove("e-pager-default")):(this.links[parseInt(s.toString(),10)].innerHTML=e.customText?e.customText+r:r.toString(),this.links[parseInt(s.toString(),10)].style.display="none"),ve(this.links[parseInt(s.toString(),10)],[],["e-currentitem","e-active"]),this.links[parseInt(s.toString(),10)].removeAttribute("aria-current")}de(this.first,{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),de(this.pagerElement.querySelector(".e-mfirst"),{index:"1",title:this.pagerModule.getLocalizedLabel("firstPageTooltip")}),de(this.last,{index:e.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),de(this.pagerElement.querySelector(".e-mlast"),{index:e.totalPages.toString(),title:this.pagerModule.getLocalizedLabel("lastPageTooltip")}),de(this.prev,{index:(e.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),de(this.pagerElement.querySelector(".e-mprev"),{index:(e.currentPage-1).toString(),title:this.pagerModule.getLocalizedLabel("previousPageTooltip")}),de(this.next,{index:(e.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")}),de(this.pagerElement.querySelector(".e-mnext"),{index:(e.currentPage+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPageTooltip")});var R=this.pagerModule.isPagerResized&&n.length?i?parseInt(n[0].getAttribute("index"),10)-e.avgNumItems:parseInt(n[0].getAttribute("index"),10)-n.length:parseInt(this.links[0].getAttribute("index"),10)-e.pageCount;de(this.PP,{index:R<1?"1":R.toString(),title:this.pagerModule.getLocalizedLabel("previousPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("previousPagerTooltip")});var b=this.pagerModule.isPagerResized&&n.length?parseInt(n[n.length-1].getAttribute("index"),10):parseInt(this.links[this.links.length-1].getAttribute("index"),10);de(this.NP,{index:(b+1).toString(),title:this.pagerModule.getLocalizedLabel("nextPagerTooltip"),"aria-label":this.pagerModule.getLocalizedLabel("nextPagerTooltip")}),this.target=void 0},o.prototype.updateStyles=function(){var e=this;if(this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length){var t=this.links.findIndex(function(r){return r.getAttribute("index")===e.pagerModule.currentPage.toString()}),i=this.pagerModule.isPagerResized&&t!==-1?t:(this.pagerModule.currentPage-1)%this.pagerModule.pageCount;this.links[parseInt(i.toString(),10)]&&(ve(this.links[parseInt(i.toString(),10)],["e-currentitem","e-active"],[]),this.links[parseInt(i.toString(),10)].setAttribute("aria-current","page"))}},o.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],r=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(ve(this.prev,i,r),ve(this.first,e,t),ve(this.pagerElement.querySelector(".e-mfirst"),e,t),ve(this.pagerElement.querySelector(".e-mprev"),i,r)):(ve(this.prev,r,i),ve(this.first,t,e),ve(this.pagerElement.querySelector(".e-mprev"),r,i),ve(this.pagerElement.querySelector(".e-mfirst"),t,e))},o.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount||this.pagerModule.isPagerResized&&this.links.findIndex(function(e){return parseInt(e.getAttribute("index"),10)===1})?ve(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):ve(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},o.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,""),i=this.pagerElement.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)');!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages||e.isPagerResized&&Array.from(i).some(function(r){return parseInt(r.getAttribute("index"),10)===e.totalPages})?ve(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):ve(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},o.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],r=["e-nextpagedisabled","e-disable"],n=this.pagerModule;n.currentPage===n.totalPages||n.totalRecordsCount===0?(ve(this.last,t,e),ve(this.next,r,i),ve(this.pagerElement.querySelector(".e-mlast"),t,e),ve(this.pagerElement.querySelector(".e-mnext"),r,i)):(ve(this.last,e,t),ve(this.next,i,r),ve(this.pagerElement.querySelector(".e-mlast"),e,t),ve(this.pagerElement.querySelector(".e-mnext"),i,r))},o}(),ff=function(){function o(e){this.pagerModule=e}return o.prototype.render=function(){var e=pe("div",{className:"e-parentmsgbar"});this.pageNoMsgElem=pe("span",{className:"e-pagenomsg"}),this.pageNoMsgElem.style.textAlign="right",this.pageCountMsgElem=pe("span",{className:"e-pagecountmsg"}),this.pageCountMsgElem.style.textAlign="right",Te([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},o.prototype.refresh=function(){var e=this.pagerModule;this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[e.totalRecordsCount===0?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage]),this.pageNoMsgElem.parentElement.classList.remove("e-hide")},o.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},o.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},o.prototype.destroy=function(){},o.prototype.format=function(e,t){for(var i,r=RegExp,n=0;n<t.length;n++)i=new r("\\{"+n+"\\}","gm"),this.isValidLocale(this.pagerModule.locale)?e=e.replace(i,t[parseInt(n.toString(),10)].toLocaleString(this.pagerModule.locale)):e=e.replace(i,t[parseInt(n.toString(),10)].toString());return e},o.prototype.isValidLocale=function(e){try{return new Intl.NumberFormat(e),!0}catch{return!1}},o}(),gf=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),lt=function(o,e,t,i){var r=arguments.length,n=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,e,t,i);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(e,t,n):s(e,t))||n);return r>3&&n&&Object.defineProperty(e,t,n),n},ka=function(o){gf(e,o);function e(t,i,r){var n=o.call(this,t,i)||this;return n.hasParent=!1,n.checkAll=!0,n.pageRefresh="pager-refresh",n.firstPagerFocus=!1,n.isCancel=!1,n.isInteracted=!1,n.parent=r,n}return e.prototype.requiredModules=function(){var t=[];return this.enableExternalMessage&&t.push({member:"externalMessage",args:[this],name:"ExternalMessage"}),this.checkpagesizes()&&t.push({member:"pagerdropdown",args:[this],name:"PagerDropDown"}),t},e.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager items",previousPagerTooltip:"Go to previous pager items",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager items",PreviousPagerTooltip:"Go to previous pager items",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All",Container:"Pager Container",Information:"Pager Information",ExternalMsg:"Pager external message",Page:"Page ",Of:" of ",Pages:" Pages"},this.containerModule=new df(this),this.pagerMessageModule=new ff(this)},e.prototype.render=function(){if(this.element.setAttribute("data-role","pager"),this.element.setAttribute("tabindex","-1"),this.initLocalization(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&this.element.classList.add("e-mac-safari"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?B([this.element],this.cssClass.split(" ")):B([this.element],[this.cssClass])),this.hasParent||this.element.setAttribute("tabindex","0"),this.enableQueryString){var t=new URL(window.location.href).searchParams.get("page");if(!u(t)&&window.location.href.indexOf("?page=")>0){var i=parseInt(t,10);this.hasParent&&this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.currentPage=i}}this.template?this.isReactTemplate()?(this.on(this.pageRefresh,this.pagerTemplate,this),this.notify(this.pageRefresh,{})):this.pagerTemplate():(this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount})),this.wireEvents(),this.addListener()},e.prototype.getPersistData=function(){var t=["currentPage","pageSize"];return this.addOnPersist(t)},e.prototype.destroy=function(){this.isDestroyed||(this.isReactTemplate()&&(this.off(this.pageRefresh,this.pagerTemplate),this.hasParent||this.destroyTemplate(["pagerTemplate"])),this.removeListener(),this.unwireEvents(),o.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML=""))},e.prototype.destroyTemplate=function(t,i){this.clearTemplate(t,i)},e.prototype.getModuleName=function(){return"pager"},e.prototype.onPropertyChanged=function(t,i){if(!this.isDestroyed){if(t.pageSize===this.getLocalizedLabel("All")&&i.pageSize===this.totalRecordsCount){this.pageSize=this.totalRecordsCount;return}t.pageCount!==i.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var r=0,n=Object.keys(t);r<n.length;r++){var s=n[r];switch(s){case"currentPage":this.checkGoToPage(t.currentPage,i.currentPage)&&this.currentPageChanged(t,i);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(i.pageSize!==t.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),t.pageSize!==i.pageSize?(this.pageSize=t.pageSize,this.currentPageChanged(t,i),this.isCancel&&this.hasParent&&this.parent.setProperties({pageSettings:{pageSize:i.pageSize}},!0)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage();break}}this.resizePager()}},e.prototype.wireEvents=function(){this.hasParent||(x.add(this.element,"keydown",this.keyPressHandler,this),x.add(document.body,"keydown",this.keyDownHandler,this)),x.add(this.element,"focusin",this.onFocusIn,this),x.add(this.element,"focusout",this.onFocusOut,this),x.add(window,"resize",this.resizePager,this),x.add(window,"load",this.resizePager,this)},e.prototype.unwireEvents=function(){this.hasParent||(x.remove(this.element,"keydown",this.keyPressHandler),x.remove(document.body,"keydown",this.keyDownHandler)),x.remove(this.element,"focusin",this.onFocusIn),x.remove(this.element,"focusout",this.onFocusOut),x.remove(window,"resize",this.resizePager),x.remove(window,"load",this.resizePager)},e.prototype.onFocusIn=function(t){var i=this.getFocusedTabindexElement();if(u(i)){var r=t.target,n=this.getDropDownPage();if(this.hasParent||(this.element.tabIndex=-1),r===this.element&&!this.hasParent){var s=this.getFocusablePagerElements(this.element,[]);this.addFocus(s[0],!0);return}if(r===this.element){this.element.tabIndex=0;return}r!==n&&!r.classList.contains("e-disable")&&this.addFocus(r,!0)}},e.prototype.onFocusOut=function(t){var i=this.getFocusedElement(),r=this.getDropDownPage();u(i)||this.removeFocus(i,!0),this.pageSizes&&r&&r.classList.contains("e-input-focus")&&this.removeFocus(r,!0),this.setTabIndexForFocusLastElement(),this.hasParent||(this.element.tabIndex=0),this.hasParent&&(this.element.tabIndex=-1)},e.prototype.keyDownHandler=function(t){if(t.altKey&&t.keyCode===74){var i=this.getFocusablePagerElements(this.element,[]);i.length>0&&i[0].focus()}},e.prototype.keyPressHandler=function(t){var i=Q(t,{cancel:!1});this.notify(Jt,i),i.cancel===!0&&t.stopImmediatePropagation()},e.prototype.addListener=function(){this.isDestroyed||this.hasParent||this.on(Jt,this.onKeyPress,this)},e.prototype.removeListener=function(){this.isDestroyed||this.hasParent||this.off(Jt,this.onKeyPress)},e.prototype.onKeyPress=function(t){this.hasParent||(this.checkPagerHasFocus()?this.changePagerFocus(t):(t.preventDefault(),this.setPagerFocus()))},e.prototype.checkPagerHasFocus=function(){return!!this.getFocusedTabindexElement()},e.prototype.setPagerContainerFocus=function(){this.element.focus()},e.prototype.setPagerFocus=function(){var t=this.getFocusablePagerElements(this.element,[]);t.length>0&&t[0].focus()},e.prototype.setPagerFocusForActiveElement=function(){var t=this.getActiveElement();t&&t.focus()},e.prototype.setTabIndexForFocusLastElement=function(){var t=this.getFocusablePagerElements(this.element,[]),i=this.getDropDownPage();this.pageSizes&&i&&!u(i.offsetParent)?i.tabIndex=0:t.length>0&&(t[t.length-1].tabIndex=0)},e.prototype.changePagerFocus=function(t){this.keyAction=t.key,t.shiftKey&&t.keyCode===9?this.changeFocusByShiftTab(t):t.keyCode===9?this.changeFocusByTab(t):t.keyCode===13||t.keyCode===32?this.navigateToPageByEnterOrSpace(t):(t.keyCode===37||t.keyCode===39||t.keyCode===35||t.keyCode===36)&&this.navigateToPageByKey(t),this.keyAction=""},e.prototype.getFocusedTabindexElement=function(){for(var t,i=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])'),r=0;r<i.length;r++){var n=i[parseInt(r.toString(),10)];if(n&&(n.classList.contains("e-focused")||n.classList.contains("e-input-focus"))){t=n;break}}return t},e.prototype.changeFocusByTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(r.length>0){if(this.pageSizes&&n&&i===r[r.length-1])n.tabIndex=0;else for(var s=0;s<r.length;s++)if(i===r[parseInt(s.toString(),10)]){var a=s+1;a<r.length&&(t.preventDefault(),r[parseInt(a.toString(),10)].focus());break}}},e.prototype.changeFocusByShiftTab=function(t){var i=this.getFocusedTabindexElement(),r=this.getFocusablePagerElements(this.element,[]),n=this.getDropDownPage();if(this.pageSizes&&n&&n.classList.contains("e-input-focus"))n.tabIndex=-1,this.addFocus(r[r.length-1],!0);else if(r.length>0){for(var s=0;s<r.length;s++)if(i===r[parseInt(s.toString(),10)]){var a=s-1;if(a>=0)t.preventDefault(),r[parseInt(a.toString(),10)].focus();else if(this.hasParent){var l=this.parent.getRows(),h=l[l.length-1],p=h.lastChild;t.preventDefault(),p.focus(),this.firstPagerFocus=!0}break}}},e.prototype.checkFirstPagerFocus=function(){return this.firstPagerFocus?(this.firstPagerFocus=!1,!0):!1},e.prototype.navigateToPageByEnterOrSpace=function(t){var i=this.getFocusedElement();if(i){this.goToPage(parseInt(i.getAttribute("index"),10));var r=this.getActiveElement(),n=this.getClass(i),s=this.getElementByClass(n);(n==="e-first"||n==="e-prev"||n==="e-next"||n==="e-last"||n==="e-pp"||n==="e-np")&&s&&!s.classList.contains("e-disable")?s.focus():this.checkFocusInAdaptiveMode(i)?this.changeFocusInAdaptiveMode(i):r&&r.focus()}},e.prototype.navigateToPageByKey=function(t){var i=t.keyCode===37?".e-prev":t.keyCode===39?".e-next":t.keyCode===35?".e-last":t.keyCode===36?".e-first":"",r=this.element.querySelector(i),n=this.getFocusedElement();if(!u(r)&&r.hasAttribute("index")&&!isNaN(parseInt(r.getAttribute("index"),10))){this.goToPage(parseInt(r.getAttribute("index"),10));var s=this.getActiveElement();this.checkFocusInAdaptiveMode(n)?this.changeFocusInAdaptiveMode(n):s&&s.focus()}},e.prototype.checkFocusInAdaptiveMode=function(t){var i=this.getClass(t);return i==="e-mfirst"||i==="e-mprev"||i==="e-mnext"||i==="e-mlast"},e.prototype.changeFocusInAdaptiveMode=function(t){var i=this.getClass(t),r=this.getElementByClass(i);if(r&&r.classList.contains("e-disable"))if(i==="e-mnext"||i==="e-mlast"){var n=this.element.querySelector(".e-mprev");n.focus()}else this.setPagerFocus()},e.prototype.removeTabindexLastElements=function(){var t=this.element.querySelectorAll('[tabindex]:not([tabindex="-1"])');if(t.length>1)for(var i=1;i<t.length;i++){var r=t[parseInt(i.toString(),10)];r&&(r.tabIndex=-1)}},e.prototype.getActiveElement=function(){return this.element.querySelector(".e-active")},e.prototype.getDropDownPage=function(){var t=this.element.querySelector(".e-pagerdropdown"),i;return t&&(i=t.children[0]),i},e.prototype.getFocusedElement=function(){return this.element.querySelector(".e-focused")},e.prototype.getClass=function(t){for(var i,r=["e-mfirst","e-mprev","e-first","e-prev","e-pp","e-np","e-next","e-last","e-mnext","e-mlast"],n=0;n<r.length;n++)if(t&&t.classList.contains(r[parseInt(n.toString(),10)]))return i=r[parseInt(n.toString(),10)],i;return i},e.prototype.getElementByClass=function(t){return this.element.querySelector("."+t)},e.prototype.getFocusablePagerElements=function(t,i){for(var r=t,n=r.children,s=i,a=0;a<n.length;a++){var l=n[parseInt(a.toString(),10)];if(l.children.length>0&&!l.classList.contains("e-pagesizes"))s=this.getFocusablePagerElements(l,s);else{var h=n[parseInt(a.toString(),10)];h.hasAttribute("tabindex")&&!l.classList.contains("e-disable")&&l.style.display!=="none"&&!u(l.offsetParent)&&s.push(h)}}return s},e.prototype.addFocus=function(t,i){u(t)||(i&&B([t],["e-focused","e-focus"]),t.tabIndex=0)},e.prototype.removeFocus=function(t,i){i&&G([t],["e-focused","e-focus"]),t.tabIndex=-1},e.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},e.prototype.goToPage=function(t){this.checkGoToPage(t)&&(this.currentPage=t,this.isInteracted=!1,this.dataBind())},e.prototype.setPageSize=function(t){this.pageSize=t,this.dataBind()},e.prototype.checkpagesizes=function(){return!!(this.pageSizes===!0||this.pageSizes.length)},e.prototype.checkGoToPage=function(t,i){return t!==this.currentPage&&(this.previousPageNo=this.currentPage),u(i)||(this.previousPageNo=i),this.previousPageNo!==t&&t>=1&&t<=this.totalPages},e.prototype.currentPageChanged=function(t,i){if(this.enableQueryString&&this.updateQueryString(this.currentPage),t.currentPage!==i.currentPage||t.pageSize!==i.pageSize){var r={currentPage:this.currentPage,newProp:t,oldProp:i,cancel:!1,isInteracted:this.isInteracted};this.trigger("click",r),r.cancel?(this.isCancel=!0,i&&i.pageSize&&(this.setProperties({pageSize:i.pageSize},!0),this.pagerdropdownModule&&(this.pagerdropdownModule.setDropDownValue("value",i.pageSize),this.pagerdropdownModule.dropDownListObject.text=i.pageSize+""))):(this.isCancel=!1,this.refresh())}},e.prototype.pagerTemplate=function(){if(!(this.isReactTemplate()&&this.hasParent)){var t;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var i={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},r=this.element.parentElement.id+"_template";this.isReactTemplate()&&!this.isVue?(this.getPagerTemplate()(i,this,"pagerTemplate",r,null,null,this.element),this.renderReactTemplates()):(t=this.isVue?this.getPagerTemplate()(i,this,"pagerTemplate",null,null,null,null,this.root):this.getPagerTemplate()(i),St(this.element,t))}},e.prototype.updateTotalPages=function(){this.totalPages=this.isAllPage?1:this.totalRecordsCount%this.pageSize===0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},e.prototype.getPagerTemplate=function(){return this.templateFn},e.prototype.compile=function(t){if(t)try{typeof t=="function"?this.templateFn=Be(t):document.querySelectorAll(t).length?this.templateFn=Be(document.querySelector(t).innerHTML.trim()):this.templateFn=Be(t)}catch{this.templateFn=Be(t)}},e.prototype.refresh=function(){if(this.template)this.isReactTemplate()?(this.updateTotalPages(),this.notify(this.pageRefresh,{})):(this.parent&&this.parent.isAngular?this.parent.destroyTemplate(["pagerTemplate"]):this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate());else{this.updateRTL();var t=this.getFocusedTabindexElement();this.containerModule.refresh(),this.removeTabindexLastElements(),t&&t.classList.contains("e-disable")&&(this.checkFocusInAdaptiveMode(t)?this.changeFocusInAdaptiveMode(t):this.setPagerFocusForActiveElement()),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh(),this.setTabIndexForFocusLastElement(),this.resizePager()}},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.initLocalization=function(){this.localeObj=new $i(this.getModuleName(),this.defaultConstants,this.locale)},e.prototype.updateQueryString=function(t){var i=this.getUpdatedURL(window.location.href,"page",t.toString());window.history.pushState({path:i},"",i)},e.prototype.getUpdatedURL=function(t,i,r){var n=RegExp,s=new n("([?|&])"+i+"=.*?(&|#|$)","i");if(t.match(s))return t.replace(s,"$1"+i+"="+r+"$2");var a="";return t.indexOf("#")!==-1&&(a=t.replace(/.*#/,"#"),t=t.replace(/#.*/,"")),t+(t.indexOf("?")!==-1?"&":"?")+i+"="+r+a},e.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(pe("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(pe("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},e.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(pe("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(pe("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},e.prototype.addAriaLabel=function(){var t=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!K.isDevice)for(var i=0;i<t.length;i++){var r=this.element.querySelector(t[parseInt(i.toString(),10)]);r.setAttribute("aria-label",r.getAttribute("title"))}},e.prototype.isReactTemplate=function(){return(this.isReact||this.isVue)&&this.template&&typeof this.template!="string"&&!(this.template.prototype&&this.template.prototype.CSPTemplate)},e.prototype.calculateActualWidth=function(){for(var t=this.element.querySelectorAll(".e-mfirst, .e-mprev, .e-icon-first, .e-icon-prev, .e-pp:not(.e-disable), .e-numericitem:not(.e-hide), .e-numericitem.e-active.e-hide, .e-np:not(.e-disable), .e-icon-next, .e-icon-last, .e-parentmsgbar, .e-mnext, .e-mlast, .e-pagerdropdown, .e-pagerconstant"),i=0,r=0;r<t.length;r++)getComputedStyle(t[parseInt(r.toString(),10)]).display!=="none"&&(i+=t[parseInt(r.toString(),10)].offsetWidth+parseFloat(getComputedStyle(t[parseInt(r.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(t[parseInt(r.toString(),10)]).marginRight));var n=this.element.querySelector(".e-pagercontainer");return i+=parseFloat(getComputedStyle(n).marginLeft)+parseFloat(getComputedStyle(n).marginRight),i},e.prototype.resizePager=function(){var t=this,i=this.element.classList.contains("e-pager")?getComputedStyle(this.element).getPropertyValue("border-style").includes("solid"):null;if(!this.template&&i){var r=this.element.querySelector(".e-pagercontainer"),n=this.calculateActualWidth(),s=this.element.clientWidth-parseFloat(getComputedStyle(this.element).paddingLeft)-parseFloat(getComputedStyle(this.element).paddingRight)-parseFloat(getComputedStyle(this.element).marginLeft)-parseFloat(getComputedStyle(this.element).marginRight),a=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),l=r.querySelectorAll('.e-numericitem.e-hide:not([style*="display: none"])'),h=a.length,p=1,c=u(T(this.element,"e-bigger"))?5:10,d=r.querySelector(".e-np"),f=r.querySelector(".e-pp"),g=this.element.querySelectorAll('.e-parentmsgbar:not(.e-hide):not([style*="display: none"]), .e-pagesizes:not(.e-hide):not([style*="display: none"])'),m=0;g.length&&(g.forEach(function(V){m+=V.offsetWidth}),this.averageDetailWidth=m/g.length);for(var v=0,y=0;y<a.length;y++)v+=a[parseInt(y.toString(),10)].offsetWidth+parseFloat(getComputedStyle(a[parseInt(y.toString(),10)]).marginLeft)+parseFloat(getComputedStyle(a[parseInt(y.toString(),10)]).marginRight);var R=v/a.length;if(s>0&&n>=s-(R||0)){this.isPagerResized=!0,this.currentPage!==this.totalPages&&ve(d,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]),n=this.calculateActualWidth();var b=Math.abs(n-s),E=Math.ceil(b/R);E=E===0?1:E>a.length?a.length-1:E;for(var y=1;y<=E;y++){var k=h-parseInt(y.toString(),10);a=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),this.currentPage!==1&&(parseInt(a[Math.abs(k)].getAttribute("index"),10)===this.currentPage||parseInt(a[a.length-1].getAttribute("index"),10)===this.currentPage)&&(k=0,ve(f,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])),a[Math.abs(k)]&&!a[Math.abs(k)].classList.contains("e-currentitem")&&a[Math.abs(k)].classList.add("e-hide")}if(a=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),a.length<=1&&g.length&&window.innerWidth>=768){var F=this.calculateActualWidth();if(F>s-c){var W=Math.floor((s-(F-m))/this.averageDetailWidth);W=g.length-W;for(var y=0;y<(W>g.length?g.length:W);y++)g[parseInt(y.toString(),10)].classList.add("e-hide")}}}else if(n<s&&l.length){var b=Math.abs(s-n),te=this.element.querySelectorAll(".e-parentmsgbar.e-hide, .e-pagesizes.e-hide");if(te.length&&b>this.averageDetailWidth+this.averageDetailWidth/4&&te[te.length-1].classList.remove("e-hide"),b>R*2&&!te.length&&window.innerWidth>=768){var ne=Math.floor(b/(R+c));ne=ne>l.length?l.length:ne-1;for(var ye=Array.from(l).filter(function(H){return parseInt(H.getAttribute("index"),10)<t.currentPage}).sort(function(H,z){return parseInt(z.getAttribute("index"),10)-parseInt(H.getAttribute("index"),10)}),L=Array.from(l).filter(function(H){return parseInt(H.getAttribute("index"),10)>t.currentPage}),P=ye.length&&ye||L.length&&L,y=1;y<=ne;y++){var D=P&&P[Math.abs(p-y)];D&&(D.classList.remove("e-hide"),D===P[P.length-1]&&(P=null))}}}if(a=r.querySelectorAll('.e-numericitem:not(.e-hide):not([style*="display: none"]):not(.e-np):not(.e-pp)'),a.length){parseInt(a[a.length-1].getAttribute("index"),10)===this.totalPages&&ve(d,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]),parseInt(a[0].getAttribute("index"),10)===1&&ve(f,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]);var N=Array.from(a).some(function(V){return parseInt(V.getAttribute("index"),10)===t.totalPages}),$=parseInt(a[0].getAttribute("index"),10)-(N&&!u(this.avgNumItems)?this.avgNumItems:a.length);f.setAttribute("index",$<1?"1":$.toString()),d.setAttribute("index",(parseInt(a[a.length-1].getAttribute("index"),10)+1).toString()),this.avgNumItems=N?this.avgNumItems:a.length}this.element.offsetWidth<769&&window.getComputedStyle(this.element.querySelector(".e-mfirst")).getPropertyValue("display")!=="none"&&this.pageSizes?(this.element.querySelector(".e-pagesizes").classList.remove("e-hide"),this.element.querySelector(".e-parentmsgbar").classList.remove("e-hide"),this.element.classList.add("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.element.offsetWidth<481?this.currentPage+" / "+this.totalPages:this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" "):(this.element.classList.remove("e-adaptive"),this.element.querySelector(".e-pagenomsg").innerHTML=this.pagerMessageModule.format(this.getLocalizedLabel("currentPageInfo"),[this.totalRecordsCount===0?0:this.currentPage,this.totalPages||0,this.totalRecordsCount||0])+" ")}},lt([C(!1)],e.prototype,"enableQueryString",void 0),lt([C(!1)],e.prototype,"enableExternalMessage",void 0),lt([C(!0)],e.prototype,"enablePagerMessage",void 0),lt([C(12)],e.prototype,"pageSize",void 0),lt([C(10)],e.prototype,"pageCount",void 0),lt([C(1)],e.prototype,"currentPage",void 0),lt([C()],e.prototype,"totalRecordsCount",void 0),lt([C()],e.prototype,"externalMessage",void 0),lt([C(!1)],e.prototype,"pageSizes",void 0),lt([C()],e.prototype,"template",void 0),lt([C("")],e.prototype,"customText",void 0),lt([O()],e.prototype,"click",void 0),lt([C("")],e.prototype,"cssClass",void 0),lt([O()],e.prototype,"dropDownChanged",void 0),lt([O()],e.prototype,"created",void 0),e=lt([ki],e),e}(gi),mf=function(){function o(e){this.pagerModule=e}return o.prototype.getModuleName=function(){return"pagerdropdown"},o.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=pe("div",{className:"e-pagesizes"});var t=pe("div",{className:"e-pagerdropdown"}),i=pe("div",{className:"e-pagerconstant"}),r=pe("input",{attrs:{type:"text",tabindex:"-1"}});this.pagerCons=pe("span",{className:"e-constant",innerHTML:this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(r),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var n=this.pagerModule.pageSizes,s=n.length?this.convertValue(n):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],a=this.pagerModule.pageSize;this.dropDownListObject=new cf({dataSource:s,value:a.toString(),change:this.onChange.bind(this),placeholder:this.pagerModule.getLocalizedLabel("pagerDropDown"),cssClass:this.pagerModule.cssClass?"e-alldrop "+this.pagerModule.cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(r),n.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=a,e.dataBind(),e.trigger("dropDownChanged",{pageSize:a}),this.addEventListener()},o.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.pagerModule.isAllPage=!0,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerModule.isAllPage=!1,this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.isCancel||this.pagerModule.trigger("dropDownChanged",{pageSize:this.pagerModule.isAllPage||this.pagerModule.isAllPage===void 0&&this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?this.pagerModule.totalRecordsCount:parseInt(this.dropDownListObject.value,10)})},o.prototype.refresh=function(){this.pagerCons&&(this.isPageSizeAll(this.pagerModule.pageSize)?(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerAllDropDown"),this.pagerCons.parentElement.classList.add("e-page-all")):(this.pagerCons.innerHTML=this.pagerModule.getLocalizedLabel("pagerDropDown"),this.pagerCons.parentElement.classList.remove("e-page-all")),this.pagerDropDownDiv.classList.remove("e-hide"))},o.prototype.beforeValueChange=function(e){if(typeof e.newProp.value=="number"){var t=e.newProp.value.toString();e.newProp.value=t}},o.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[parseInt(i.toString(),10)]=parseInt(t[parseInt(i.toString(),10)],10)?t[parseInt(i.toString(),10)].toString():this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)])!==""?this.pagerModule.getLocalizedLabel(t[parseInt(i.toString(),10)]):t[parseInt(i.toString(),10)];return t},o.prototype.isPageSizeAll=function(e){var t=typeof e=="string"&&e!==this.pagerModule.getLocalizedLabel("All")?parseInt(e,10):e;return t===this.pagerModule.totalRecordsCount||e===this.pagerModule.getLocalizedLabel("All")},o.prototype.setDropDownValue=function(e,t){if(this.dropDownListObject){var i=this.pagerModule.isAllPage;this.pagerModule.isAllPage=this.isPageSizeAll(t),this.pagerModule.isAllPage&&typeof this.pagerModule.pageSizes=="object"&&this.pagerModule.pageSizes.indexOf("All")===-1&&(this.pagerModule.isAllPage=!1),this.pagerModule.checkAll=!!(i&&this.pagerModule.isAllPage),this.dropDownListObject[""+e]=this.pagerModule.isAllPage?this.pagerModule.getLocalizedLabel("All"):t}},o.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},o.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},o.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),fe(this.pagerDropDownDiv))},o}(),vf=function(){function o(e){this.pagerModule=e}return o.prototype.getModuleName=function(){return"externalMessage"},o.prototype.render=function(){this.element=pe("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":this.pagerModule.getLocalizedLabel("ExternalMsg")}}),this.pagerModule.element.appendChild(this.element),this.refresh()},o.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},o.prototype.hideMessage=function(){u(this.element)||(this.element.style.display="none")},o.prototype.showMessage=function(){this.element.style.display=""},o.prototype.destroy=function(){this.element&&this.element.parentElement&&fe(this.element)},o}(),Ef=function(){function o(e,t){this.isInitialRender=!0,this.isCancel=!1,ka.Inject(vf,mf),this.parent=e,this.pageSettings=t,this.addEventListener()}return o.prototype.getModuleName=function(){return"pager"},o.prototype.render=function(){var e=this.parent;this.pagerDestroy(),u(this.parent.pagerTemplate)||(this.pageSettings.template=this.parent.pagerTemplate,this.parent.pageTemplateChange=!0),this.element=this.parent.createElement("div",{className:"e-gridpager"});var t=Sd({},Q({},wr(this.pageSettings)),{click:this.clickHandler.bind(this),dropDownChanged:this.onSelect.bind(this),enableRtl:e.enableRtl,locale:e.locale,created:this.addAriaAttr.bind(this)},["parentObj","propName"]);t.cssClass=this.parent.cssClass?this.parent.cssClass:"",this.pagerObj=new ka(t,void 0,this.parent),this.pagerObj.root=e.root?e.root:e,this.pagerObj.hasParent=!0,this.pagerObj.on(ya,this.renderReactPagerTemplate,this),this.pagerObj.allowServerDataBinding=!1},o.prototype.onSelect=function(e){this.pageSettings.pageSize=e.pageSize,this.isInitialLoad||(this.pageSettings.currentPage=1)},o.prototype.addAriaAttr=function(){if(!this.pageSettings.template){for(var e=this.parent.createElement("div",{className:"e-numericcontainer"}),t=this.element.querySelector(".e-pagercontainer"),i=document.createDocumentFragment(),r=this.element.querySelector(".e-numericcontainer"),n=r.querySelectorAll("a"),s=0;s<n.length;s++){this.parent.getContentTable()?n[parseInt(s.toString(),10)].setAttribute("aria-owns",this.parent.getContentTable().id+" "+(s+1)):n[parseInt(s.toString(),10)].setAttribute("aria-owns",this.parent.element.getAttribute("id")+"_content_table "+(s+1));var a=this.parent.createElement("div");a.appendChild(n[parseInt(s.toString(),10)]),i.appendChild(a)}e.appendChild(i),t.replaceChild(e,r);for(var l=[".e-mfirst",".e-mprev",".e-first",".e-prev",".e-next",".e-last",".e-mnext",".e-mlast"],h=0;h<l.length;h++){var p=this.element.querySelector(l[parseInt(h.toString(),10)]);this.parent.getContentTable()&&p.setAttribute("aria-owns",this.parent.getContentTable().id+l[parseInt(h.toString(),10)].replace(".e-"," "))}}},o.prototype.dataReady=function(e){this.updateModel(e)},o.prototype.refresh=function(){this.pagerObj.refresh()},o.prototype.goToPage=function(e){this.pagerObj.goToPage(e)},o.prototype.setPageSize=function(e){this.pagerObj.setPageSize(e)},o.prototype.updateModel=function(e){this.parent.pageSettings.totalRecordsCount=e.count;var t=e.action==="add"&&e.requestType==="save"||e.requestType==="batchsave";this.pagerObj.isAllPage&&!t&&(this.parent.pageSettings.pageSize=this.parent.pageSettings.totalRecordsCount),t&&this.pagerObj.isAllPage&&e.count===this.pageSettings.pageSize&&this.pagerObj.setProperties({pageSize:e.count},!0),this.parent.dataBind()},o.prototype.onActionComplete=function(e){this.parent.trigger(dt,Q(e,{currentPage:this.parent.pageSettings.currentPage,requestType:"paging",type:dt}))},o.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){for(var t=e.properties,i=0,r=Object.keys(t);i<r.length;i++){var n=r[i];this.pagerObj[""+n]=t[""+n]}this.pagerObj.dataBind()}},o.prototype.clickHandler=function(e){var t=this.parent;if(this.isForceCancel||oo(t)&&!t.prevPageMoving&&!this.isCancel){this.isForceCancel?this.isForceCancel=!1:(!u(e.newProp)&&!u(e.newProp.pageSize)?(t.notify(xs,{instance:this,handler:this.setPageSize,arg1:e.newProp.pageSize}),this.pagerObj.setProperties({pageSize:e.oldProp.pageSize},!0),this.parent.setProperties({pageSettings:{pageSize:e.oldProp.pageSize}},!0),this.pagerObj.setProperties({currentPage:t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage},!0)):e.currentPage&&(t.notify(xs,{instance:this,handler:this.goToPage,arg1:e.currentPage}),this.pagerObj.currentPage=t.pageSettings.currentPage===this.pagerObj.currentPage?this.pagerObj.previousPageNo:t.pageSettings.currentPage),this.isForceCancel=!0,this.pagerObj.dataBind()),e.cancel=!0;return}t.pageSettings.pageSize=this.pagerObj.pageSize,t.prevPageMoving=!1;var i=this.pageSettings.currentPage,r={cancel:!1,requestType:"paging",previousPage:i,currentPage:e.currentPage,pageSize:t.pageSettings.pageSize,type:_t};if(this.isCancel||(this.pageSettings.currentPage=e.currentPage,this.parent.notify(yr,r),t.pageRequireRefresh=!1),r.cancel){e.cancel=!0,this.parent.setProperties({pageSettings:{currentPage:i}},!0),this.pagerObj.setProperties({currentPage:i},!0),this.isCancel=!0;return}this.isCancel=!1,this.parent.requestTypeAction="paging"},o.prototype.keyPressHandler=function(e){if(e.action in Da){e.preventDefault();var t=this.element.querySelector(Da[e.action]);t.classList.contains("e-nextprevitemdisabled")||t.click()}},o.prototype.updateExternalMessage=function(e){this.pagerObj.enableExternalMessage||(this.pagerObj.enableExternalMessage=!0,this.pagerObj.dataBind()),this.pagerObj.externalMessage=e,this.pagerObj.dataBind()},o.prototype.appendToElement=function(){this.isInitialLoad=!0,this.parent.element.appendChild(this.element),this.parent.setGridPager(this.element),this.pagerObj.isReact=this.parent.isReact,this.pagerObj.isVue=this.parent.isVue||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isVue,this.pagerObj.appendTo(this.element),this.isInitialLoad=!1},o.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.appendToElement(),this.isReactTemplate()&&(this.pagerObj.updateTotalPages(),this.created()))},o.prototype.addEventListener=function(){this.handlers={load:this.render,end:this.appendToElement,ready:this.dataReady,complete:this.onActionComplete,updateLayout:this.enableAfterRender,inboundChange:this.onPropertyChanged,keyPress:this.keyPressHandler,created:this.created},!this.parent.isDestroyed&&((this.parent.isReact||this.parent.isVue)&&this.parent.addEventListener(wa,this.handlers.created.bind(this)),this.evtHandlers=[{event:ro,handler:this.handlers.load},{event:xn,handler:this.handlers.end},{event:er,handler:this.handlers.ready},{event:Xu,handler:this.handlers.complete},{event:et,handler:this.handlers.updateLayout},{event:At,handler:this.handlers.inboundChange},{event:Jt,handler:this.handlers.keyPress},{event:ti,handler:this.destroy}],ii(this.parent,this.evtHandlers,!0,this))},o.prototype.created=function(){this.isInitialRender&&this.isReactTemplate()&&(this.isInitialRender=!1,this.renderReactPagerTemplate())},o.prototype.isReactTemplate=function(){return(this.parent.isReact||this.parent.isVue)&&this.pagerObj.template&&typeof this.pagerObj.template!="string"},o.prototype.renderReactPagerTemplate=function(){if(!this.isInitialRender&&this.isReactTemplate()){var e=void 0;this.parent.destroyTemplate(["pagerTemplate"]),this.element.classList.add("e-pagertemplate"),this.pagerObj.compile(this.pagerObj.template);var t=this.parent.pageSettings,i={currentPage:t.currentPage,pageSize:t.pageSize,pageCount:t.pageCount,totalRecordsCount:t.totalRecordsCount,totalPages:this.pagerObj.totalPages},r=this.parent.id+"_pagertemplate";this.parent.isReact?(this.pagerObj.templateFn(i,this.parent,"pagerTemplate",r,null,null,this.pagerObj.element),this.parent.renderTemplates()):(e=this.pagerObj.templateFn(i,this.parent,"pagerTemplate"),St(this.pagerObj.element,e))}},o.prototype.removeEventListener=function(){this.parent.isDestroyed||((this.parent.isReact||this.parent.isVue)&&this.parent.removeEventListener(wa,this.handlers.created),this.parent.off(ya,this.renderReactPagerTemplate),ii(this.parent,this.evtHandlers,!1))},o.prototype.destroy=function(){this.removeEventListener(),this.isReactTemplate()&&this.parent.destroyTemplate(["pagerTemplate"]),this.pagerObj.destroy()},o.prototype.pagerDestroy=function(){this.pagerObj&&!this.pagerObj.isDestroyed&&(this.pagerObj.destroy(),fe(this.element))},o}(),Da={pageUp:".e-prev",pageDown:".e-next",ctrlAltPageDown:".e-last",ctrlAltPageUp:".e-first",altPageUp:".e-pp",altPageDown:".e-np"},yf=function(){var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n])},o(e,t)};return function(e,t){o(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Sf=function(o){yf(e,o);function e(t){var i=o.call(this,t)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={columns:{column:{stackedColumns:"stackedColumn"}},aggregates:{aggregate:{aggregateColumns:"aggregateColumn"}}},i.statelessTemplateProps=null,i.templateProps=["template","headerTemplate","commandsTemplate","filter.itemTemplate","editTemplate","filterTemplate","columnChooserSettings.headerTemplate","columnChooserSettings.template","columnChooserSettings.footerTemplate"],i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return e.prototype.render=function(){if(this.isReactMock=!1,(this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)o.prototype.render.call(this),this.initRenderCalled=!0;else return Ba.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals))},e}(Bl);Xl(Sf,[Jl,Ba.Component]);export{Rf as C,Sf as G,Ef as P,xf as a};
