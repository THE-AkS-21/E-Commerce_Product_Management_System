import{w as f}from"./with-props-5nfPBK-j.js";import{a as y,o as t}from"./chunk-D4RADZKF-CEFUjEjZ.js";import"./utils-mUqetfhN.js";import"./authContext-DwKCA1uB.js";import{H as b}from"./Header-BRpT-8A_.js";import{u as D,a as E,b as N}from"./categoryComponent-08yfEJr3.js";import{G as T,C as k,a as r,P as v}from"./grid.component-B_i_wA0Z.js";import{I as A}from"./template-DP_y5Sm2.js";import"./button.component-B0WLNDez.js";import"./axiosAuthInterceptor-pnhKdU3P.js";import"./index-DIYeVvcV.js";const P=()=>{const{categories:c}=D(),{updateCategory:m}=E(),{deleteCategory:u}=N(),[s,o]=y.useState({}),g=e=>{console.log("Edit button clicked for category:",e),o(i=>({...i,[e.id]:{name:e.name,description:e.description}}))},p=async e=>{window.confirm("Are you sure you want to delete this category?")&&(console.log("Deleting category with ID:",e),await u(BigInt(e)),setTimeout(()=>window.location.reload(),300))},l=(e,i)=>{const{name:n,value:a}=e.target;o(d=>({...d,[i]:{...d[i],[n]:a}}))},x=async e=>{const i=s[e];i&&(console.log("Saving category with ID:",e,"New data:",i),await m(BigInt(e),{id:e,name:i.name,description:i.description}),o(n=>{const a={...n};return delete a[e],a}),setTimeout(()=>window.location.reload(),500))},h=e=>{console.log("Cancel edit for category ID:",e),o(i=>{const n={...i};return delete n[e],n})},w=e=>{var n;return s.hasOwnProperty(e.id)?t.jsx("input",{type:"text",name:"name",value:((n=s[e.id])==null?void 0:n.name)||"",onChange:a=>l(a,e.id),className:"border border-gray-300 p-1 w-full"}):t.jsx("span",{children:e.name})},C=e=>{var n;return s.hasOwnProperty(e.id)?t.jsx("input",{type:"text",name:"description",value:((n=s[e.id])==null?void 0:n.description)||"",onChange:a=>l(a,e.id),className:"border border-gray-300 p-1 w-full"}):t.jsx("span",{children:e.description})},j=e=>{const i=s.hasOwnProperty(e.id);return t.jsx("div",{className:"flex gap-2",children:i?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>x(e.id),className:"bg-green-500 text-white px-2 py-1 rounded",children:"Save"}),t.jsx("button",{onClick:()=>h(e.id),className:"bg-gray-500 text-white px-2 py-1 rounded",children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>g(e),className:"bg-blue-500 text-white px-2 py-1 rounded",children:"Update"}),t.jsx("button",{onClick:()=>p(e.id),className:"bg-red-600 text-white px-2 py-1 rounded",children:"Delete"})]})})};return t.jsxs("main",{className:"all-users wrapper",children:[t.jsx(b,{title:"ALL Categories",description:"Check out all Categories",createText:"CREATE",createUrl:"/category/create"}),t.jsxs(T,{dataSource:c,allowPaging:!0,pageSettings:{pageSize:15},children:[t.jsxs(k,{children:[t.jsx(r,{field:"id",headerText:"ID",width:"50",textAlign:"Left"}),t.jsx(r,{field:"name",headerText:"Name",width:"120",template:w}),t.jsx(r,{field:"description",headerText:"Description",width:"220",template:C}),t.jsx(r,{headerText:"Actions",width:"180",template:j})]}),t.jsx(A,{services:[v]})]})]})},q=f(P);export{q as default};
