import{w as S}from"./with-props-5nfPBK-j.js";import{a as l,o as e}from"./chunk-D4RADZKF-CEFUjEjZ.js";import{f}from"./utils-mUqetfhN.js";import"./authContext-DwKCA1uB.js";import{H as v}from"./Header-BRpT-8A_.js";import{P as T}from"./ProductCard-jHbfvcMz.js";import{u as k,a as D,A as I}from"./ProductComponent-DuU1GyGy.js";import{u as F}from"./categoryComponent-08yfEJr3.js";import{g as L}from"./products-api-CvKkBCNi.js";import{G as R,C as E,a as s,P as G}from"./grid.component-B_i_wA0Z.js";import{I as M}from"./template-DP_y5Sm2.js";import"./button.component-B0WLNDez.js";import"./axiosAuthInterceptor-pnhKdU3P.js";import"./index-DIYeVvcV.js";const U=()=>{const[o,m]=l.useState(""),[r,x]=l.useState(null),[c,i]=l.useState([]),[n,y]=l.useState("grid"),[d,h]=l.useState(1),u=8,{categories:j}=F();k(o);const{products:C}=D(r),{products:g}=I(),P=t=>e.jsx("span",{children:f(t.createdAt)}),w=t=>e.jsx("span",{children:f(t.updatedAt)});l.useEffect(()=>{(async()=>{try{console.log("Fetching all products from API...");const a=await L();setTimeout(()=>{i(a),console.log("Products successfully fetched.")},300)}catch(a){console.error("Failed to load products",a)}})()},[]);const b=()=>{if(console.log("Filter button clicked."),!o&&r===null){console.log("No filters applied. Showing all products."),i(g);return}if(!o&&r!==null){console.log(`Filtering by category ID using hook: ${r}`),i(C);return}let t=g;o&&(console.log(`Filtering by name: '${o}'`),t=t.filter(a=>a.name.toLowerCase().includes(o.toLowerCase()))),r!==null&&(console.log(`Further filtering by category ID: ${r}`),t=t.filter(a=>a.categoryId===r)),console.log("Final filtered data:",t),i(t)},A=()=>{console.log("Reset button clicked."),m(""),x(null),i(g)},N=c.slice((d-1)*u,d*u),p=Math.ceil(c.length/u);return e.jsxs("main",{className:"all-users wrapper",children:[e.jsx(v,{title:"ALL PRODUCTS",description:"Check out all Products",createText:"CREATE",createUrl:"/product/create"}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6 items-center",children:[e.jsx("input",{type:"text",placeholder:"Name",value:o,onChange:t=>m(t.target.value),className:"border border-gray-300 rounded px-3 py-2"}),e.jsxs("select",{value:r!==null?r.toString():"",onChange:t=>x(t.target.value?BigInt(t.target.value):null),className:"border border-gray-300 rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"Filter by Category"}),j.map(t=>e.jsx("option",{value:t.id.toString(),children:t.name},t.id.toString()))]}),e.jsx("button",{onClick:b,className:"bg-blue-600 text-white rounded px-4 py-2",children:"Filter"}),e.jsx("button",{onClick:A,className:"bg-gray-400 text-white rounded px-4 py-2",children:"Reset"}),e.jsx("button",{onClick:()=>{console.log(`Switching view mode to: ${n==="grid"?"cards":"grid"}`),y(n==="grid"?"cards":"grid")},className:"ml-auto !bg-primary-100 !h-10 !w-30 md:w-[240px] text-white rounded px-4 py-2",children:n==="grid"?"Card View":"Grid View"})]}),n==="grid"?e.jsxs(R,{dataSource:c,allowPaging:!0,pageSettings:{pageSize:10},children:[e.jsxs(E,{children:[e.jsx(s,{field:"id",headerText:"ID",width:"50",textAlign:"Left"}),e.jsx(s,{field:"name",headerText:"Name",width:"100",textAlign:"Left"}),e.jsx(s,{field:"description",headerText:"Description",width:"200",textAlign:"Left"}),e.jsx(s,{field:"price",headerText:"Price",width:"70",textAlign:"Center"}),e.jsx(s,{field:"stockQuantity",headerText:"Stock",width:"70",textAlign:"Center"}),e.jsx(s,{field:"categoryId",headerText:"Category ID",width:"100",textAlign:"Center"}),e.jsx(s,{field:"createdAt",headerText:"Created On",width:"100",textAlign:"Center",template:P}),e.jsx(s,{field:"updatedAt",headerText:"Updated On",width:"100",textAlign:"Center",template:w})]}),e.jsx(M,{services:[G]})]}):e.jsx("section",{className:"flex flex-col gap-6",children:e.jsxs("section",{className:"container",children:[e.jsx("h1",{className:"text-xl font-semibold text-dark-100",children:"PRODUCTS"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full",children:N.map(t=>e.jsx(T,{product:t},t.id))}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsx("button",{onClick:()=>h(t=>Math.max(t-1,1)),disabled:d===1,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Prev"}),e.jsxs("span",{children:["Page ",d," of ",p]}),e.jsx("button",{onClick:()=>h(t=>Math.min(t+1,p)),disabled:d===p,className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",children:"Next"})]})]})})]})},_=S(U);export{_ as default};
